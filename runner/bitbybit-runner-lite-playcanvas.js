!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PLAYCANVAS")):"function"==typeof define&&define.amd?define(["PLAYCANVAS"],e):"object"==typeof exports?exports.bitbybitRunner=e(require("PLAYCANVAS")):t.bitbybitRunner=e(t.PLAYCANVAS)}(window,(t=>(()=>{var e={258:t=>{t.exports=function(){var t={},e=this,r=(new Function("try {return this===window;}catch(e){ return false;}"),new Function("try {return this===global;}catch(e){return false;}")),i=new Function("try {return typeof importScripts === 'function';}catch(e){return false;}");if(r()&&i(),r()||i()){var o=e;if(i()){onmessage=function(t){if(t.data.className&&t.data.methodName){var r=(i=t.data.className,o=t.data.methodName,s=e,i.split(".").forEach((function(t){s&&(s=s[t])})),s?s[o]:null);if(!r)return console.error("could not find "+t.data.className+"."+t.data.methodName);postMessage({result:r.apply(null,t.data.args),id:t.data.id})}var i,o,s}}}return function(t,e,r){"use strict";e.geom=e.geom||{},e.exe=e.exe||{},e.eval=e.eval||{},e.core=e.core||{},e.promhx=e.promhx||{};var i={},o=function(){return S.__string_rec(this,"")};function s(t,e){function r(){}r.prototype=t;var i=new r;for(var o in e)i[o]=e[o];return e.toString!==Object.prototype.toString&&(i.toString=e.toString),i}var n=function(){};i.HxOverrides=n,n.__name__=["HxOverrides"],n.strDate=function(t){switch(t.length){case 8:var e=t.split(":"),r=new Date;return r.setTime(0),r.setUTCHours(e[0]),r.setUTCMinutes(e[1]),r.setUTCSeconds(e[2]),r;case 10:var i=t.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var o=t.split(" "),s=o[0].split("-"),n=o[1].split(":");return new Date(s[0],s[1]-1,s[2],n[0],n[1],n[2]);default:throw new T("Invalid date format : "+t)}},n.cca=function(t,e){var r=t.charCodeAt(e);if(r==r)return r},n.substr=function(t,e,r){return null!=e&&0!=e&&null!=r&&r<0?"":(null==r&&(r=t.length),e<0?(e=t.length+e)<0&&(e=0):r<0&&(r=t.length+r-e),t.substr(e,r))},n.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var a=function(){};i.Lambda=a,a.__name__=["Lambda"],a.fold=function(t,e,r){for(var i=se(t)();i.hasNext();)r=e(i.next(),r);return r};var c=function(){this.length=0};i.List=c,c.__name__=["List"],c.prototype={add:function(t){var e=[t];null==this.h?this.h=e:this.q[1]=e,this.q=e,this.length++},pop:function(){if(null==this.h)return null;var t=this.h[0];return this.h=this.h[1],null==this.h&&(this.q=null),this.length--,t},isEmpty:function(){return null==this.h},__class__:c},Math.__name__=["Math"];var h=function(){};i.Reflect=h,h.__name__=["Reflect"],h.field=function(t,e){try{return t[e]}catch(t){return t instanceof T&&(t=t.val),null}},h.callMethod=function(t,e,r){return e.apply(t,r)},h.fields=function(t){var e=[];if(null!=t){var r=Object.prototype.hasOwnProperty;for(var i in t)"__id__"!=i&&"hx__closures__"!=i&&r.call(t,i)&&e.push(i)}return e},h.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},h.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)};var l=function(){};i.Std=l,l.__name__=["Std"],l.string=function(t){return S.__string_rec(t,"")},l.parseFloat=function(t){return parseFloat(t)};var u=function(){this.b=""};i.StringBuf=u,u.__name__=["StringBuf"],u.prototype={add:function(t){this.b+=l.string(t)},__class__:u};var d=function(){};i.StringTools=d,d.__name__=["StringTools"],d.fastCodeAt=function(t,e){return t.charCodeAt(e)};var v=i.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};v.TNull=["TNull",0],v.TNull.toString=o,v.TNull.__enum__=v,v.TInt=["TInt",1],v.TInt.toString=o,v.TInt.__enum__=v,v.TFloat=["TFloat",2],v.TFloat.toString=o,v.TFloat.__enum__=v,v.TBool=["TBool",3],v.TBool.toString=o,v.TBool.__enum__=v,v.TObject=["TObject",4],v.TObject.toString=o,v.TObject.__enum__=v,v.TFunction=["TFunction",5],v.TFunction.toString=o,v.TFunction.__enum__=v,v.TClass=function(t){var e=["TClass",6,t];return e.__enum__=v,e.toString=o,e},v.TEnum=function(t){var e=["TEnum",7,t];return e.__enum__=v,e.toString=o,e},v.TUnknown=["TUnknown",8],v.TUnknown.toString=o,v.TUnknown.__enum__=v;var f=function(){};i.Type=f,f.__name__=["Type"],f.getClassName=function(t){var e=t.__name__;return null==e?null:e.join(".")},f.getEnumName=function(t){return t.__ename__.join(".")},f.resolveClass=function(t){var e=i[t];return null!=e&&e.__name__?e:null},f.resolveEnum=function(t){var e=i[t];return null!=e&&e.__ename__?e:null},f.createEmptyInstance=function(t){function e(){}return e.prototype=t.prototype,new e},f.createEnum=function(t,e,r){var i=h.field(t,e);if(null==i)throw new T("No such constructor "+e);if(h.isFunction(i)){if(null==r)throw new T("Constructor "+e+" need parameters");return h.callMethod(t,i,r)}if(null!=r&&0!=r.length)throw new T("Constructor "+e+" does not need parameters");return i},f.getEnumConstructs=function(t){return t.__constructs__.slice()},f.typeof=function(t){switch(typeof t){case"boolean":return v.TBool;case"string":return v.TClass(String);case"number":return Math.ceil(t)==t%2147483648?v.TInt:v.TFloat;case"object":if(null==t)return v.TNull;var e=t.__enum__;if(null!=e)return v.TEnum(e);var r=S.getClass(t);return null!=r?v.TClass(r):v.TObject;case"function":return t.__name__||t.__ename__?v.TObject:v.TFunction;case"undefined":return v.TNull;default:return v.TUnknown}};var p=function(){};i["haxe.IMap"]=p,p.__name__=["haxe","IMap"];var g=function(t,e){this.high=t,this.low=e};i["haxe._Int64.___Int64"]=g,g.__name__=["haxe","_Int64","___Int64"],g.prototype={__class__:g};var m=function(){this.buf=new u,this.cache=[],this.useCache=m.USE_CACHE,this.useEnumIndex=m.USE_ENUM_INDEX,this.shash=new k,this.scount=0};i["haxe.Serializer"]=m,m.__name__=["haxe","Serializer"],m.prototype={toString:function(){return this.buf.b},serializeString:function(t){var e=this.shash.get(t);if(null!=e)return this.buf.b+="R",void(this.buf.b+=null==e?"null":""+e);this.shash.set(t,this.scount++),this.buf.b+="y",null==(t=encodeURIComponent(t)).length?this.buf.b+="null":this.buf.b+=""+t.length,this.buf.b+=":",this.buf.b+=null==t?"null":""+t},serializeRef:function(t){for(var e=typeof t,r=0,i=this.cache.length;r<i;){var o=r++,s=this.cache[o];if(typeof s==e&&s==t)return this.buf.b+="r",this.buf.b+=null==o?"null":""+o,!0}return this.cache.push(t),!1},serializeFields:function(t){for(var e=0,r=h.fields(t);e<r.length;){var i=r[e];++e,this.serializeString(i),this.serialize(h.field(t,i))}this.buf.b+="g"},serialize:function(t){var e=f.typeof(t);switch(e[1]){case 0:this.buf.b+="n";break;case 1:var r=t;if(0==r)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==r?"null":""+r;break;case 2:var i=t;isNaN(i)?this.buf.b+="k":isFinite(i)?(this.buf.b+="d",this.buf.b+=null==i?"null":""+i):this.buf.b+=i<0?"m":"p";break;case 3:this.buf.b+=t?"t":"f";break;case 6:var o=e[2];if(o==String)return void this.serializeString(t);if(this.useCache&&this.serializeRef(t))return;switch(o){case Array:var s=0;this.buf.b+="a";for(var n=t.length,a=0;a<n;){var d=a++;null==t[d]?s++:(s>0&&(1==s?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==s?"null":""+s),s=0),this.serialize(t[d]))}s>0&&(1==s?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==s?"null":""+s)),this.buf.b+="h";break;case c:this.buf.b+="l";for(var v=t.h,p=null;null!=v;){var g;p=v[0],v=v[1],g=p,this.serialize(g)}this.buf.b+="h";break;case Date:var b=t;this.buf.b+="v",this.buf.add(b.getTime());break;case k:this.buf.b+="b";for(var w=t,x=w.keys();x.hasNext();){var _=x.next();this.serializeString(_),this.serialize(null!=pe[_]?w.getReserved(_):w.h[_])}this.buf.b+="h";break;case y:this.buf.b+="q";for(var M=t,W=M.keys();W.hasNext();){var E=W.next();this.buf.b+=":",this.buf.b+=null==E?"null":""+E,this.serialize(M.h[E])}this.buf.b+="h";break;case P:this.buf.b+="M";for(var D=t,O=D.keys();O.hasNext();){var A=O.next(),I=h.field(A,"__id__");h.deleteField(A,"__id__"),this.serialize(A),A.__id__=I,this.serialize(D.h[A.__id__])}this.buf.b+="h";break;case C:for(var F=t,L=0,B=F.length-2,R=new u,N=m.BASE64;L<B;){var U=F.get(L++),V=F.get(L++),j=F.get(L++);R.add(N.charAt(U>>2)),R.add(N.charAt(63&(U<<4|V>>4))),R.add(N.charAt(63&(V<<2|j>>6))),R.add(N.charAt(63&j))}if(L==B){var z=F.get(L++),H=F.get(L++);R.add(N.charAt(z>>2)),R.add(N.charAt(63&(z<<4|H>>4))),R.add(N.charAt(H<<2&63))}else if(L==B+1){var q=F.get(L++);R.add(N.charAt(q>>2)),R.add(N.charAt(q<<4&63))}var G=R.b;this.buf.b+="s",null==G.length?this.buf.b+="null":this.buf.b+=""+G.length,this.buf.b+=":",this.buf.b+=null==G?"null":""+G;break;default:this.useCache&&this.cache.pop(),null!=t.hxSerialize?(this.buf.b+="C",this.serializeString(f.getClassName(o)),this.useCache&&this.cache.push(t),t.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(f.getClassName(o)),this.useCache&&this.cache.push(t),this.serializeFields(t))}break;case 4:if(S.__instanceof(t,ve)){var Y=f.getClassName(t);this.buf.b+="A",this.serializeString(Y)}else if(S.__instanceof(t,fe))this.buf.b+="B",this.serializeString(f.getEnumName(t));else{if(this.useCache&&this.serializeRef(t))return;this.buf.b+="o",this.serializeFields(t)}break;case 7:var $=e[2];if(this.useCache){if(this.serializeRef(t))return;this.cache.pop()}this.useEnumIndex?this.buf.b+="j":this.buf.b+="w",this.serializeString(f.getEnumName($)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=l.string(t[1])):this.serializeString(t[0]),this.buf.b+=":";var Z=t.length;this.buf.b+=l.string(Z-2);for(var K=2;K<Z;){var X=K++;this.serialize(t[X])}this.useCache&&this.cache.push(t);break;case 5:throw new T("Cannot serialize function");default:throw new T("Cannot serialize "+l.string(t))}},__class__:m};var b=function(t){this.buf=t,this.length=t.length,this.pos=0,this.scache=[],this.cache=[];var e=b.DEFAULT_RESOLVER;null==e&&(e=f,b.DEFAULT_RESOLVER=e),this.setResolver(e)};i["haxe.Unserializer"]=b,b.__name__=["haxe","Unserializer"],b.initCodes=function(){for(var t=[],e=0,r=b.BASE64.length;e<r;){var i=e++;t[b.BASE64.charCodeAt(i)]=i}return t},b.prototype={setResolver:function(t){this.resolver=null==t?{resolveClass:function(t){return null},resolveEnum:function(t){return null}}:t},get:function(t){return this.buf.charCodeAt(t)},readDigits:function(){for(var t=0,e=!1,r=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||i>57)break;t=10*t+(i-48),this.pos++}else{if(this.pos!=r)break;e=!0,this.pos++}}return e&&(t*=-1),t},readFloat:function(){for(var t=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(!(e>=43&&e<58||101==e||69==e))break;this.pos++}return l.parseFloat(n.substr(this.buf,t,this.pos-t))},unserializeObject:function(t){for(;;){if(this.pos>=this.length)throw new T("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw new T("Invalid object key");var r=this.unserialize();t[e]=r}this.pos++},unserializeEnum:function(t,e){if(58!=this.get(this.pos++))throw new T("Invalid enum format");var r=this.readDigits();if(0==r)return f.createEnum(t,e);for(var i=[];r-- >0;)i.push(this.unserialize());return f.createEnum(t,e,i)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:return this.readFloat();case 121:var t=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<t)throw new T("Invalid string length");var e=n.substr(this.buf,this.pos,t);return this.pos+=t,e=decodeURIComponent(e.split("+").join(" ")),this.scache.push(e),e;case 107:return NaN;case 109:return-1/0;case 112:return 1/0;case 97:this.buf;var r=[];for(this.cache.push(r);;){var i=this.buf.charCodeAt(this.pos);if(104==i){this.pos++;break}if(117==i){this.pos++;var o=this.readDigits();r[r.length+o-1]=null}else r.push(this.unserialize())}return r;case 111:var s={};return this.cache.push(s),this.unserializeObject(s),s;case 114:var a=this.readDigits();if(a<0||a>=this.cache.length)throw new T("Invalid reference");return this.cache[a];case 82:var h=this.readDigits();if(h<0||h>=this.scache.length)throw new T("Invalid string reference");return this.scache[h];case 120:throw new T(this.unserialize());case 99:var l=this.unserialize(),u=this.resolver.resolveClass(l);if(null==u)throw new T("Class not found "+l);var v=f.createEmptyInstance(u);return this.cache.push(v),this.unserializeObject(v),v;case 119:var p=this.unserialize(),g=this.resolver.resolveEnum(p);if(null==g)throw new T("Enum not found "+p);var m=this.unserializeEnum(g,this.unserialize());return this.cache.push(m),m;case 106:var w=this.unserialize(),x=this.resolver.resolveEnum(w);if(null==x)throw new T("Enum not found "+w);this.pos++;var _=this.readDigits(),S=f.getEnumConstructs(x)[_];if(null==S)throw new T("Unknown enum index "+w+"@"+_);var M=this.unserializeEnum(x,S);return this.cache.push(M),M;case 108:var W=new c;for(this.cache.push(W),this.buf;104!=this.buf.charCodeAt(this.pos);)W.add(this.unserialize());return this.pos++,W;case 98:var E=new k;for(this.cache.push(E),this.buf;104!=this.buf.charCodeAt(this.pos);){var D=this.unserialize();E.set(D,this.unserialize())}return this.pos++,E;case 113:var O=new y;this.cache.push(O),this.buf;for(var A=this.get(this.pos++);58==A;){var I=this.readDigits();O.set(I,this.unserialize()),A=this.get(this.pos++)}if(104!=A)throw new T("Invalid IntMap format");return O;case 77:var F=new P;for(this.cache.push(F),this.buf;104!=this.buf.charCodeAt(this.pos);){var L=this.unserialize();F.set(L,this.unserialize())}return this.pos++,F;case 118:var B;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)){var R=n.substr(this.buf,this.pos,19);B=n.strDate(R),this.pos+=19}else{var N=this.readFloat(),U=new Date;U.setTime(N),B=U}return this.cache.push(B),B;case 115:var V=this.readDigits(),j=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<V)throw new T("Invalid bytes length");var z=b.CODES;null==z&&(z=b.initCodes(),b.CODES=z);var H,q=this.pos,G=3&V;H=3*(V>>2)+(G>=2?G-1:0);for(var Y=q+(V-G),$=C.alloc(H),Z=0;q<Y;){var K=z[d.fastCodeAt(j,q++)],X=z[d.fastCodeAt(j,q++)];$.set(Z++,K<<2|X>>4);var J=z[d.fastCodeAt(j,q++)];$.set(Z++,X<<4|J>>2);var Q=z[d.fastCodeAt(j,q++)];$.set(Z++,J<<6|Q)}if(G>=2){var tt=z[d.fastCodeAt(j,q++)],et=z[d.fastCodeAt(j,q++)];if($.set(Z++,tt<<2|et>>4),3==G){var rt=z[d.fastCodeAt(j,q++)];$.set(Z++,et<<4|rt>>2)}}return this.pos+=V,this.cache.push($),$;case 67:var it=this.unserialize(),ot=this.resolver.resolveClass(it);if(null==ot)throw new T("Class not found "+it);var st=f.createEmptyInstance(ot);if(this.cache.push(st),st.hxUnserialize(this),103!=this.get(this.pos++))throw new T("Invalid custom data");return st;case 65:var nt=this.unserialize(),at=this.resolver.resolveClass(nt);if(null==at)throw new T("Class not found "+nt);return at;case 66:var ct=this.unserialize(),ht=this.resolver.resolveEnum(ct);if(null==ht)throw new T("Enum not found "+ct);return ht}throw this.pos--,new T("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:b};var y=function(){this.h={}};i["haxe.ds.IntMap"]=y,y.__name__=["haxe","ds","IntMap"],y.__interfaces__=[p],y.prototype={set:function(t,e){this.h[t]=e},remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(0|e);return n.iter(t)},__class__:y};var P=function(){this.h={},this.h.__keys__={}};i["haxe.ds.ObjectMap"]=P,P.__name__=["haxe","ds","ObjectMap"],P.__interfaces__=[p],P.prototype={set:function(t,e){var r=t.__id__||(t.__id__=++P.count);this.h[r]=e,this.h.__keys__[r]=t},keys:function(){var t=[];for(var e in this.h.__keys__)this.h.hasOwnProperty(e)&&t.push(this.h.__keys__[e]);return n.iter(t)},__class__:P};var w=i["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]};w.Some=function(t){var e=["Some",0,t];return e.__enum__=w,e.toString=o,e},w.None=["None",1],w.None.toString=o,w.None.__enum__=w;var k=function(){this.h={}};i["haxe.ds.StringMap"]=k,k.__name__=["haxe","ds","StringMap"],k.__interfaces__=[p],k.prototype={set:function(t,e){null!=pe[t]?this.setReserved(t,e):this.h[t]=e},get:function(t){return null!=pe[t]?this.getReserved(t):this.h[t]},setReserved:function(t,e){null==this.rh&&(this.rh={}),this.rh["$"+t]=e},getReserved:function(t){return null==this.rh?null:this.rh["$"+t]},keys:function(){var t=this.arrayKeys();return n.iter(t)},arrayKeys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(var e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:k};var C=function(t){this.length=t.byteLength,this.b=new me(t),this.b.bufferValue=t,t.hxBytes=this,t.bytes=this.b};i["haxe.io.Bytes"]=C,C.__name__=["haxe","io","Bytes"],C.alloc=function(t){return new C(new ge(t))},C.prototype={get:function(t){return this.b[t]},set:function(t,e){this.b[t]=255&e},__class__:C};var x=i["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};x.Blocked=["Blocked",0],x.Blocked.toString=o,x.Blocked.__enum__=x,x.Overflow=["Overflow",1],x.Overflow.toString=o,x.Overflow.__enum__=x,x.OutsideBounds=["OutsideBounds",2],x.OutsideBounds.toString=o,x.OutsideBounds.__enum__=x,x.Custom=function(t){var e=["Custom",3,t];return e.__enum__=x,e.toString=o,e};var _=function(){};i["haxe.io.FPHelper"]=_,_.__name__=["haxe","io","FPHelper"],_.i32ToFloat=function(t){var e=t>>>23&255,r=8388607&t;return 0==r&&0==e?0:(1-(t>>>31<<1))*(1+Math.pow(2,-23)*r)*Math.pow(2,e-127)},_.floatToI32=function(t){if(0==t)return 0;var e;e=t<0?-t:t;var r=Math.floor(Math.log(e)/.6931471805599453);return r<-127?r=-127:r>128&&(r=128),(t<0?-2147483648:0)|r+127<<23|8388607&Math.round(8388608*(e/Math.pow(2,r)-1))},_.i64ToDouble=function(t,e){var r=(e>>20&2047)-1023,i=4294967296*(1048575&e)+2147483648*(t>>>31)+(2147483647&t);return 0==i&&-1023==r?0:(1-(e>>>31<<1))*(1+Math.pow(2,-52)*i)*Math.pow(2,r)},_.doubleToI64=function(t){var e=_.i64tmp;if(0==t)e.low=0,e.high=0;else{var r;r=t<0?-t:t;var i,o=Math.floor(Math.log(r)/.6931471805599453),s=4503599627370496*(r/Math.pow(2,o)-1),n=0|(i=Math.round(s)),a=i/4294967296|0;e.low=n,e.high=(t<0?-2147483648:0)|o+1023<<20|a}return e};var T=function(t){Error.call(this),this.val=t,this.message=String(t),Error.captureStackTrace&&Error.captureStackTrace(this,T)};i["js._Boot.HaxeError"]=T,T.__name__=["js","_Boot","HaxeError"],T.__super__=Error,T.prototype=s(Error.prototype,{__class__:T});var S=function(){};i["js.Boot"]=S,S.__name__=["js","Boot"],S.getClass=function(t){if(t instanceof Array&&null==t.__enum__)return Array;var e=t.__class__;if(null!=e)return e;var r=S.__nativeClassName(t);return null!=r?S.__resolveNativeClass(r):null},S.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var r=typeof t;switch("function"==r&&(t.__name__||t.__ename__)&&(r="object"),r){case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];var i=t[0]+"(";e+="\t";for(var o=2,s=t.length;o<s;){var n=o++;i+=2!=n?","+S.__string_rec(t[n],e):S.__string_rec(t[n],e)}return i+")"}var a=t.length,c="[";e+="\t";for(var h=0;h<a;){var l=h++;c+=(l>0?",":"")+S.__string_rec(t[l],e)}return c+"]"}var u;try{u=t.toString}catch(t){return t instanceof T&&(t=t.val),"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var d=t.toString();if("[object Object]"!=d)return d}var v=null,f="{\n";e+="\t";var p=null!=t.hasOwnProperty;for(var v in t)p&&!t.hasOwnProperty(v)||"prototype"!=v&&"__class__"!=v&&"__super__"!=v&&"__interfaces__"!=v&&"__properties__"!=v&&(2!=f.length&&(f+=", \n"),f+=e+v+" : "+S.__string_rec(t[v],e));return f+"\n"+(e=e.substring(1))+"}";case"function":return"<function>";case"string":return t;default:return String(t)}},S.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var r=t.__interfaces__;if(null!=r)for(var i=0,o=r.length;i<o;){var s=r[i++];if(s==e||S.__interfLoop(s,e))return!0}return S.__interfLoop(t.__super__,e)},S.__instanceof=function(t,e){if(null==e)return!1;switch(e){case he:return(0|t)===t;case ue:return"number"==typeof t;case de:return"boolean"==typeof t;case String:return"string"==typeof t;case Array:return t instanceof Array&&null==t.__enum__;case le:return!0;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e)return!0;if(S.__interfLoop(S.getClass(t),e))return!0}else if("object"==typeof e&&S.__isNativeObj(e)&&t instanceof e)return!0;return e==ve&&null!=t.__name__||e==fe&&null!=t.__ename__||t.__enum__==e}},S.__nativeClassName=function(t){var e=S.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},S.__isNativeObj=function(t){return null!=S.__nativeClassName(t)},S.__resolveNativeClass=function(t){return r[t]};var M=function(t){if(t instanceof Array&&null==t.__enum__)this.a=t,this.byteLength=t.length;else{var e=t;this.a=[];for(var r=0;r<e;){var i=r++;this.a[i]=0}this.byteLength=e}};i["js.html.compat.ArrayBuffer"]=M,M.__name__=["js","html","compat","ArrayBuffer"],M.sliceImpl=function(t,e){var r=new me(this,t,null==e?null:e-t),i=new ge(r.byteLength);return new me(i).set(r),i},M.prototype={slice:function(t,e){return new M(this.a.slice(t,e))},__class__:M};var W=function(t,e,r){if(this.buf=t,this.offset=null==e?0:e,this.length=null==r?t.byteLength-this.offset:r,this.offset<0||this.length<0||this.offset+this.length>t.byteLength)throw new T(x.OutsideBounds)};i["js.html.compat.DataView"]=W,W.__name__=["js","html","compat","DataView"],W.prototype={getInt8:function(t){var e=this.buf.a[this.offset+t];return e>=128?e-256:e},getUint8:function(t){return this.buf.a[this.offset+t]},getInt16:function(t,e){var r=this.getUint16(t,e);return r>=32768?r-65536:r},getUint16:function(t,e){return e?this.buf.a[this.offset+t]|this.buf.a[this.offset+t+1]<<8:this.buf.a[this.offset+t]<<8|this.buf.a[this.offset+t+1]},getInt32:function(t,e){var r=this.offset+t,i=this.buf.a[r++],o=this.buf.a[r++],s=this.buf.a[r++],n=this.buf.a[r++];return e?i|o<<8|s<<16|n<<24:n|s<<8|o<<16|i<<24},getUint32:function(t,e){var r=this.getInt32(t,e);return r<0?r+4294967296:r},getFloat32:function(t,e){return _.i32ToFloat(this.getInt32(t,e))},getFloat64:function(t,e){var r=this.getInt32(t,e),i=this.getInt32(t+4,e);return _.i64ToDouble(e?r:i,e?i:r)},setInt8:function(t,e){this.buf.a[t+this.offset]=e<0?e+128&255:255&e},setUint8:function(t,e){this.buf.a[t+this.offset]=255&e},setInt16:function(t,e,r){this.setUint16(t,e<0?e+65536:e,r)},setUint16:function(t,e,r){var i=t+this.offset;r?(this.buf.a[i]=255&e,this.buf.a[i++]=e>>8&255):(this.buf.a[i++]=e>>8&255,this.buf.a[i]=255&e)},setInt32:function(t,e,r){this.setUint32(t,e,r)},setUint32:function(t,e,r){var i=t+this.offset;r?(this.buf.a[i++]=255&e,this.buf.a[i++]=e>>8&255,this.buf.a[i++]=e>>16&255,this.buf.a[i++]=e>>>24):(this.buf.a[i++]=e>>>24,this.buf.a[i++]=e>>16&255,this.buf.a[i++]=e>>8&255,this.buf.a[i++]=255&e)},setFloat32:function(t,e,r){this.setUint32(t,_.floatToI32(e),r)},setFloat64:function(t,e,r){var i=_.doubleToI64(e);r?(this.setUint32(t,i.low),this.setUint32(t,i.high)):(this.setUint32(t,i.high),this.setUint32(t,i.low))},__class__:W};var E=function(){};i["js.html.compat.Uint8Array"]=E,E.__name__=["js","html","compat","Uint8Array"],E._new=function(t,e,r){var i;if("number"==typeof t){i=[];for(var o=0;o<t;)i[o++]=0;i.byteLength=i.length,i.byteOffset=0,i.buffer=new M(i)}else if(S.__instanceof(t,M)){var s=t;null==e&&(e=0),null==r&&(r=s.byteLength-e),(i=0==e?s.a:s.a.slice(e,e+r)).byteLength=i.length,i.byteOffset=e,i.buffer=s}else{if(!(t instanceof Array&&null==t.__enum__))throw new T("TODO "+l.string(t));(i=t.slice()).byteLength=i.length,i.byteOffset=0,i.buffer=new M(i)}return i.subarray=E._subarray,i.set=E._set,i},E._set=function(t,e){var r=this;if(S.__instanceof(t.buffer,M)){var i=t;if(t.byteLength+e>r.byteLength)throw new T("set() outside of range");for(var o=0,s=t.byteLength;o<s;){var n=o++;r[n+e]=i[n]}}else{if(!(t instanceof Array&&null==t.__enum__))throw new T("TODO");var a=t;if(a.length+e>r.byteLength)throw new T("set() outside of range");for(var c=0,h=a.length;c<h;){var l=c++;r[l+e]=a[l]}}},E._subarray=function(t,e){var r=E._new(this.slice(t,e));return r.byteOffset=t,r};var D=function(t){this._resolved=!1,this._pending=!1,this._errorPending=!1,this._fulfilled=!1,this._update=[],this._error=[],this._errored=!1,null!=t&&D.link(t,this,(function(t){return t}))};i["promhx.base.AsyncBase"]=D,D.__name__=["promhx","base","AsyncBase"],D.link=function(t,e,r){t._update.push({async:e,linkf:function(t){e.handleResolve(r(t))}}),D.immediateLinkUpdate(t,e,r)},D.immediateLinkUpdate=function(t,e,r){if(!t._errored||t._errorPending||t._error.length>0||e.handleError(t._errorVal),t._resolved&&!t._pending)try{e.handleResolve(r(t._val))}catch(t){t instanceof T&&(t=t.val),e.handleError(t)}},D.linkAll=function(t,e){for(var r=function(r,i,o){if(0==r.length||D.allFulfilled(r)){for(var s,n=[],a=se(t)();a.hasNext();){var c=a.next();n.push(c==i?o:c._val)}s=n,e.handleResolve(s)}},i=se(t)();i.hasNext();){var o=i.next();o._update.push({async:e,linkf:function(t,e,r){return function(i){t(e,r,i)}}(r,function(e){for(var r=[],i=se(t)();i.hasNext();){var s=i.next();s!=o&&r.push(s)}return r}(),o)})}D.allFulfilled(t)&&e.handleResolve(function(e){for(var r=[],i=se(t)();i.hasNext();){var o=i.next();r.push(o._val)}return r}())},D.pipeLink=function(t,e,r){var i=!1,o=function(t){if(!i){i=!0;var o=r(t);o._update.push({async:e,linkf:ce(e,e.handleResolve)}),D.immediateLinkUpdate(o,e,(function(t){return t}))}};if(t._update.push({async:e,linkf:o}),t._resolved&&!t._pending)try{o(t._val)}catch(t){t instanceof T&&(t=t.val),e.handleError(t)}},D.allResolved=function(t){for(var e=se(t)();e.hasNext();)if(!e.next()._resolved)return!1;return!0},D.allFulfilled=function(t){for(var e=se(t)();e.hasNext();)if(!e.next()._fulfilled)return!1;return!0},D.prototype={catchError:function(t){return this._error.push(t),this},errorThen:function(t){return this._errorMap=t,this},isResolved:function(){return this._resolved},isErrored:function(){return this._errored},isErrorHandled:function(){return this._error.length>0},isErrorPending:function(){return this._errorPending},isFulfilled:function(){return this._fulfilled},isPending:function(){return this._pending},handleResolve:function(t){this._resolve(t)},_resolve:function(t){var e,r,i=this;this._pending?L.enqueue((e=ce(this,this._resolve),r=t,function(){e(r)})):(this._resolved=!0,this._pending=!0,L.queue.add((function(){i._val=t;for(var e=0,r=i._update;e<r.length;){var o=r[e];++e;try{o.linkf(t)}catch(t){t instanceof T&&(t=t.val),o.async.handleError(t)}}i._fulfilled=!0,i._pending=!1})),L.continueOnNextLoop())},handleError:function(t){this._handleError(t)},_handleError:function(t){var e=this,r=function(t){if(e._error.length>0)for(var r=0,i=e._error;r<i.length;){var o=i[r];++r,o(t)}else{if(!(e._update.length>0))throw new T(t);for(var s=0,n=e._update;s<n.length;){var a=n[s];++s,a.async.handleError(t)}}e._errorPending=!1};this._errorPending||(this._errorPending=!0,this._errored=!0,this._errorVal=t,L.queue.add((function(){if(null!=e._errorMap)try{e._resolve(e._errorMap(t))}catch(t){t instanceof T&&(t=t.val),r(t)}else r(t)})),L.continueOnNextLoop())},then:function(t){var e=new D(null);return D.link(this,e,t),e},unlink:function(t){var e=this;L.queue.add((function(){e._update=e._update.filter((function(e){return e.async!=t}))})),L.continueOnNextLoop()},isLinked:function(t){for(var e=0,r=this._update;e<r.length;){var i=r[e];if(++e,i.async==t)return!0}return!1},__class__:D};var O=e.promhx.Deferred=function(){D.call(this)};i["promhx.Deferred"]=O,O.__name__=["promhx","Deferred"],O.__super__=D,O.prototype=s(D.prototype,{resolve:function(t){this.handleResolve(t)},throwError:function(t){this.handleError(t)},promise:function(){return new A(this)},stream:function(){return new I(this)},publicStream:function(){return new F(this)},__class__:O});var A=e.promhx.Promise=function(t){D.call(this,t),this._rejected=!1};i["promhx.Promise"]=A,A.__name__=["promhx","Promise"],A.whenAll=function(t){var e=new A(null);return D.linkAll(t,e),e},A.promise=function(t){var e=new A;return e.handleResolve(t),e},A.__super__=D,A.prototype=s(D.prototype,{isRejected:function(){return this._rejected},reject:function(t){this._rejected=!0,this.handleError(t)},handleResolve:function(t){if(this._resolved){throw new T(B.AlreadyResolved("Promise has already been resolved"))}this._resolve(t)},then:function(t){var e=new A(null);return D.link(this,e,t),e},unlink:function(t){var e=this;L.queue.add((function(){if(e._fulfilled)e._update=e._update.filter((function(e){return e.async!=t}));else{e.handleError(B.DownstreamNotFullfilled("Downstream Promise is not fullfilled"))}})),L.continueOnNextLoop()},handleError:function(t){this._rejected=!0,this._handleError(t)},pipe:function(t){var e=new A(null);return D.pipeLink(this,e,t),e},errorPipe:function(t){var e=new A;return this.catchError((function(r){t(r).then(ce(e,e._resolve))})),this.then(ce(e,e._resolve)),e},__class__:A});var I=e.promhx.Stream=function(t){D.call(this,t),this._end_promise=new A};i["promhx.Stream"]=I,I.__name__=["promhx","Stream"],I.foreach=function(t){for(var e=new I(null),r=se(t)();r.hasNext();){var i=r.next();e.handleResolve(i)}return e.end(),e},I.wheneverAll=function(t){var e=new I(null);return D.linkAll(t,e),e},I.concatAll=function(t){for(var e=new I(null),r=se(t)();r.hasNext();){var i=r.next();e.concat(i)}return e},I.mergeAll=function(t){for(var e=new I(null),r=se(t)();r.hasNext();){var i=r.next();e.merge(i)}return e},I.stream=function(t){var e=new I(null);return e.handleResolve(t),e},I.__super__=D,I.prototype=s(D.prototype,{then:function(t){var e=new I(null);return D.link(this,e,t),this._end_promise._update.push({async:e._end_promise,linkf:function(t){e.end()}}),e},detachStream:function(t){for(var e=[],r=!1,i=0,o=this._update;i<o.length;){var s=o[i];++i,s.async==t?(this._end_promise._update=this._end_promise._update.filter((function(e){return e.async!=t._end_promise})),r=!0):e.push(s)}return this._update=e,r},first:function(){var t=new A(null);return this.then((function(e){t._resolved||t.handleResolve(e)})),t},handleResolve:function(t){this._end||this._pause||this._resolve(t)},pause:function(t){null==t&&(t=!this._pause),this._pause=t},pipe:function(t){var e=new I(null);return D.pipeLink(this,e,t),this._end_promise.then((function(t){e.end()})),e},errorPipe:function(t){var e=new I(null);return this.catchError((function(r){var i=t(r);i.then(ce(e,e._resolve)),i._end_promise.then(ce(ne=e._end_promise,ne._resolve))})),this.then(ce(e,e._resolve)),this._end_promise.then((function(t){e.end()})),e},handleEnd:function(){if(this._pending)L.queue.add(ce(this,this.handleEnd)),L.continueOnNextLoop();else{if(this._end_promise._resolved)return;var t;this._end=!0,t=this._resolved?w.Some(this._val):w.None,this._end_promise.handleResolve(t),this._update=[],this._error=[]}},end:function(){return L.queue.add(ce(this,this.handleEnd)),L.continueOnNextLoop(),this},endThen:function(t){return this._end_promise.then(t)},filter:function(t){var e=new I(null);return this._update.push({async:e,linkf:function(r){t(r)&&e.handleResolve(r)}}),D.immediateLinkUpdate(this,e,(function(t){return t})),e},concat:function(t){var e=new I(null);return this._update.push({async:e,linkf:ce(e,e.handleResolve)}),D.immediateLinkUpdate(this,e,(function(t){return t})),this._end_promise.then((function(r){t.pipe((function(t){return e.handleResolve(t),e})),t._end_promise.then((function(t){e.end()}))})),e},merge:function(t){var e=new I(null);return this._update.push({async:e,linkf:ce(e,e.handleResolve)}),t._update.push({async:e,linkf:ce(e,e.handleResolve)}),D.immediateLinkUpdate(this,e,(function(t){return t})),D.immediateLinkUpdate(t,e,(function(t){return t})),e},__class__:I});var F=e.promhx.PublicStream=function(t){I.call(this,t)};i["promhx.PublicStream"]=F,F.__name__=["promhx","PublicStream"],F.publicstream=function(t){var e=new F(null);return e.handleResolve(t),e},F.__super__=I,F.prototype=s(I.prototype,{resolve:function(t){this.handleResolve(t)},throwError:function(t){this.handleError(t)},update:function(t){this.handleResolve(t)},__class__:F});var L=function(){};i["promhx.base.EventLoop"]=L,L.__name__=["promhx","base","EventLoop"],L.enqueue=function(t){L.queue.add(t),L.continueOnNextLoop()},L.set_nextLoop=function(t){if(null!=L.nextLoop)throw new T("nextLoop has already been set");return L.nextLoop=t,L.nextLoop},L.queueEmpty=function(){return L.queue.isEmpty()},L.finish=function(t){null==t&&(t=1e3);for(var e=null;t-- >0&&null!=(e=L.queue.pop());)e();return L.queue.isEmpty()},L.clear=function(){L.queue=new c},L.f=function(){var t=L.queue.pop();null!=t&&t(),L.queue.isEmpty()||L.continueOnNextLoop()},L.continueOnNextLoop=function(){null!=L.nextLoop?L.nextLoop(L.f):setImmediate(L.f)};var B=i["promhx.error.PromiseError"]={__ename__:["promhx","error","PromiseError"],__constructs__:["AlreadyResolved","DownstreamNotFullfilled"]};B.AlreadyResolved=function(t){var e=["AlreadyResolved",0,t];return e.__enum__=B,e.toString=o,e},B.DownstreamNotFullfilled=function(t){var e=["DownstreamNotFullfilled",1,t];return e.__enum__=B,e.toString=o,e};var R=function(){};i["verb.Verb"]=R,R.__name__=["verb","Verb"],R.main=function(){t.log("verb 2.1.0")};var N=function(){};i["verb.core.ArrayExtensions"]=N,N.__name__=["verb","core","ArrayExtensions"],N.alloc=function(t,e){if(!(e<0))for(;t.length<e;)t.push(null)},N.reversed=function(t){var e=t.slice();return e.reverse(),e},N.last=function(t){return t[t.length-1]},N.first=function(t){return t[0]},N.spliceAndInsert=function(t,e,r,i){t.splice(e,r),t.splice(e,0,i)},N.left=function(t){if(0==t.length)return[];var e=Math.ceil(t.length/2);return t.slice(0,e)},N.right=function(t){if(0==t.length)return[];var e=Math.ceil(t.length/2);return t.slice(e)},N.rightWithPivot=function(t){if(0==t.length)return[];var e=Math.ceil(t.length/2);return t.slice(e-1)},N.unique=function(t,e){if(0==t.length)return[];for(var r=[t.pop()];t.length>0;){for(var i=t.pop(),o=!0,s=0;s<r.length;){var n=r[s];if(++s,e(i,n)){o=!1;break}}o&&r.push(i)}return r};var U=function(){};i["verb.core.Binomial"]=U,U.__name__=["verb","core","Binomial"],U.get=function(t,e){if(0==e)return 1;if(0==t||e>t)return 0;if(e>t-e&&(e=t-e),U.memo_exists(t,e))return U.get_memo(t,e);for(var r=1,i=t,o=1,s=e+1;o<s;){var n=o++;U.memo_exists(i,n)?(t--,r=U.get_memo(i,n)):(r*=t--,U.memoize(i,n,r/=n))}return r},U.get_no_memo=function(t,e){if(0==e)return 1;if(0==t||e>t)return 0;e>t-e&&(e=t-e);for(var r=1,i=1,o=e+1;i<o;)r*=t--,r/=i++;return r},U.memo_exists=function(t,e){return U.memo.h.hasOwnProperty(t)&&U.memo.h[t].h.hasOwnProperty(e)},U.get_memo=function(t,e){return U.memo.h[t].h[e]},U.memoize=function(t,e,r){U.memo.h.hasOwnProperty(t)||U.memo.set(t,new y),U.memo.h[t].h[e]=r};var V=e.core.BoundingBox=function(t){this.max=null,this.min=null,this.dim=3,this.initialized=!1,null!=t&&this.addRange(t)};i["verb.core.BoundingBox"]=V,V.__name__=["verb","core","BoundingBox"],V.intervalsOverlap=function(t,e,r,i,o){var s;null==o&&(o=-1),s=o<-.5?j.TOLERANCE:o;var n=Math.min(t,e)-s,a=Math.max(t,e)+s,c=Math.min(r,i)-s,h=Math.max(r,i)+s;return n>=c&&n<=h||a>=c&&a<=h||c>=n&&c<=a||h>=n&&h<=a},V.prototype={fromPoint:function(t){return new V([t])},add:function(t){if(!this.initialized)return this.dim=t.length,this.min=t.slice(0),this.max=t.slice(0),this.initialized=!0,this;for(var e=0,r=this.dim;e<r;){var i=e++;t[i]>this.max[i]&&(this.max[i]=t[i]),t[i]<this.min[i]&&(this.min[i]=t[i])}return this},addRange:function(t){for(var e=t.length,r=0;r<e;){var i=r++;this.add(t[i])}return this},contains:function(t,e){return null==e&&(e=-1),!!this.initialized&&this.intersects(new V([t]),e)},intersects:function(t,e){if(null==e&&(e=-1),!this.initialized||!t.initialized)return!1;for(var r=this.min,i=this.max,o=t.min,s=t.max,n=0,a=this.dim;n<a;){var c=n++;if(!V.intervalsOverlap(r[c],i[c],o[c],s[c],e))return!1}return!0},clear:function(){return this.initialized=!1,this},getLongestAxis:function(){for(var t=0,e=0,r=0,i=this.dim;r<i;){var o=r++,s=this.getAxisLength(o);s>t&&(t=s,e=o)}return e},getAxisLength:function(t){return t<0||t>this.dim-1?0:Math.abs(this.min[t]-this.max[t])},intersect:function(t,e){if(!this.initialized)return null;var r=this.min,i=this.max,o=t.min,s=t.max;if(!this.intersects(t,e))return null;for(var n=[],a=[],c=0,h=this.dim;c<h;){var l=c++;n.push(Math.min(i[l],s[l])),a.push(Math.max(r[l],o[l]))}return new V([a,n])},__class__:V};var j=e.core.Constants=function(){};i["verb.core.Constants"]=j,j.__name__=["verb","core","Constants"];var z=e.core.SerializableBase=function(){};i["verb.core.SerializableBase"]=z,z.__name__=["verb","core","SerializableBase"],z.prototype={serialize:function(){var t=new m;return t.serialize(this),t.toString()},__class__:z};var H=e.core.Plane=function(t,e){this.origin=t,this.normal=e};i["verb.core.Plane"]=H,H.__name__=["verb","core","Plane"],H.__super__=z,H.prototype=s(z.prototype,{__class__:H});var q=e.core.Ray=function(t,e){this.origin=t,this.dir=e};i["verb.core.Ray"]=q,q.__name__=["verb","core","Ray"],q.__super__=z,q.prototype=s(z.prototype,{__class__:q});var G=e.core.NurbsCurveData=function(t,e,r){this.degree=t,this.controlPoints=r,this.knots=e};i["verb.core.NurbsCurveData"]=G,G.__name__=["verb","core","NurbsCurveData"],G.__super__=z,G.prototype=s(z.prototype,{__class__:G});var Y=e.core.NurbsSurfaceData=function(t,e,r,i,o){this.degreeU=t,this.degreeV=e,this.knotsU=r,this.knotsV=i,this.controlPoints=o};i["verb.core.NurbsSurfaceData"]=Y,Y.__name__=["verb","core","NurbsSurfaceData"],Y.__super__=z,Y.prototype=s(z.prototype,{__class__:Y});var $=e.core.MeshData=function(t,e,r,i){this.faces=t,this.points=e,this.normals=r,this.uvs=i};i["verb.core.MeshData"]=$,$.__name__=["verb","core","MeshData"],$.empty=function(){return new $([],[],[],[])},$.__super__=z,$.prototype=s(z.prototype,{__class__:$});var Z=e.core.PolylineData=function(t,e){this.points=t,this.params=e};i["verb.core.PolylineData"]=Z,Z.__name__=["verb","core","PolylineData"],Z.__super__=z,Z.prototype=s(z.prototype,{__class__:Z});var K=e.core.VolumeData=function(t,e,r,i,o,s,n){this.degreeU=t,this.degreeV=e,this.degreeW=r,this.knotsU=i,this.knotsV=o,this.knotsW=s,this.controlPoints=n};i["verb.core.VolumeData"]=K,K.__name__=["verb","core","VolumeData"],K.__super__=z,K.prototype=s(z.prototype,{__class__:K});var X=e.core.Pair=function(t,e){this.item0=t,this.item1=e};i["verb.core.Pair"]=X,X.__name__=["verb","core","Pair"],X.prototype={__class__:X};var J=e.core.Interval=function(t,e){this.min=t,this.max=e};i["verb.core.Interval"]=J,J.__name__=["verb","core","Interval"],J.prototype={__class__:J};var Q=e.core.CurveCurveIntersection=function(t,e,r,i){this.point0=t,this.point1=e,this.u0=r,this.u1=i};i["verb.core.CurveCurveIntersection"]=Q,Q.__name__=["verb","core","CurveCurveIntersection"],Q.prototype={__class__:Q};var tt=e.core.CurveSurfaceIntersection=function(t,e,r,i){this.u=t,this.uv=e,this.curvePoint=r,this.surfacePoint=i};i["verb.core.CurveSurfaceIntersection"]=tt,tt.__name__=["verb","core","CurveSurfaceIntersection"],tt.prototype={__class__:tt};var et=e.core.MeshIntersectionPoint=function(t,e,r,i,o){this.visited=!1,this.adj=null,this.opp=null,this.uv0=t,this.uv1=e,this.point=r,this.faceIndex0,this.faceIndex1};i["verb.core.MeshIntersectionPoint"]=et,et.__name__=["verb","core","MeshIntersectionPoint"],et.prototype={__class__:et};var rt=e.core.PolylineMeshIntersection=function(t,e,r,i,o){this.point=t,this.u=e,this.uv=r,this.polylineIndex=i,this.faceIndex=o};i["verb.core.PolylineMeshIntersection"]=rt,rt.__name__=["verb","core","PolylineMeshIntersection"],rt.prototype={__class__:rt};var it=e.core.SurfaceSurfaceIntersectionPoint=function(t,e,r,i){this.uv0=t,this.uv1=e,this.point=r,this.dist=i};i["verb.core.SurfaceSurfaceIntersectionPoint"]=it,it.__name__=["verb","core","SurfaceSurfaceIntersectionPoint"],it.prototype={__class__:it};var ot=e.core.TriSegmentIntersection=function(t,e,r,i){this.point=t,this.s=e,this.t=r,this.p=i};i["verb.core.TriSegmentIntersection"]=ot,ot.__name__=["verb","core","TriSegmentIntersection"],ot.prototype={__class__:ot};var st=e.core.CurveTriPoint=function(t,e,r){this.u=t,this.point=e,this.uv=r};i["verb.core.CurveTriPoint"]=st,st.__name__=["verb","core","CurveTriPoint"],st.prototype={__class__:st};var nt=function(t,e,r,i,o){null==o&&(o=!1),null==i&&(i=-1),this.uv=r,this.point=t,this.normal=e,this.id=i,this.degen=o};i["verb.core.SurfacePoint"]=nt,nt.__name__=["verb","core","SurfacePoint"],nt.fromUv=function(t,e){return new nt(null,null,[t,e])},nt.prototype={__class__:nt};var at=e.core.CurvePoint=function(t,e){this.u=t,this.pt=e};i["verb.core.CurvePoint"]=at,at.__name__=["verb","core","CurvePoint"],at.prototype={__class__:at};var ct=e.core.KdTree=function(t,e){this.dim=3,this.points=t,this.distanceFunction=e,this.dim=t[0].point.length,this.root=this.buildTree(t,0,null)};i["verb.core.KdTree"]=ct,ct.__name__=["verb","core","KdTree"],ct.prototype={buildTree:function(t,e,r){var i,o,s=e%this.dim;return 0==t.length?null:1==t.length?new ut(t[0],s,r):(t.sort((function(t,e){var r=t.point[s]-e.point[s];return 0==r?0:r>0?1:-1})),i=Math.floor(t.length/2),(o=new ut(t[i],s,r)).left=this.buildTree(t.slice(0,i),e+1,o),o.right=this.buildTree(t.slice(i+1),e+1,o),o)},nearest:function(t,e,r){var i,o=this,s=new ht((function(t){return-t.item1})),n=null;i=n=function(r){for(var i,a,c,h,l=r.dimension,u=o.distanceFunction(t,r.kdPoint.point),d=[],v=0,f=o.dim;v<f;)v++,d.push(0);a=d;for(var p=function(t,r){s.push(new X(t,r)),s.size()>e&&s.pop()},g=0,m=o.dim;g<m;){var b=g++;b==r.dimension?a[b]=t[b]:a[b]=r.kdPoint.point[b]}c=o.distanceFunction(a,r.kdPoint.point),null!=r.right||null!=r.left?(i=null==r.right?r.left:null==r.left?r.right:t[l]<r.kdPoint.point[l]?r.left:r.right,n(i),(s.size()<e||u<s.peek().item1)&&p(r,u),(s.size()<e||Math.abs(c)<s.peek().item1)&&null!=(h=i==r.left?r.right:r.left)&&n(h)):(s.size()<e||u<s.peek().item1)&&p(r,u)};for(var a=0;a<e;)a++,s.push(new X(null,r));i(this.root);for(var c=[],h=0;h<e;){var l=h++;null!=s.content[l].item0&&c.push(new X(s.content[l].item0.kdPoint,s.content[l].item1))}return c},__class__:ct};var ht=function(t){this.content=[],this.scoreFunction=t};i["verb.core.BinaryHeap"]=ht,ht.__name__=["verb","core","BinaryHeap"],ht.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,r=0;r<e;){var i=r++;if(this.content[i]==t){var o=this.content.pop();return void(i!=e-1&&(this.content[i]=o,this.scoreFunction(o)<this.scoreFunction(t)?this.bubbleUp(i):this.sinkDown(i)))}}throw new T("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var r=Math.floor((t+1)/2)-1,i=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[r]=e,this.content[t]=i,t=r}},sinkDown:function(t){for(var e=this.content.length,r=this.content[t],i=this.scoreFunction(r);;){var o=2*(t+1),s=o-1,n=-1,a=0;if(s<e){var c=this.content[s];(a=this.scoreFunction(c))<i&&(n=s)}if(o<e){var h=this.content[o];this.scoreFunction(h)<(-1==n?i:a)&&(n=o)}if(-1==n)break;this.content[t]=this.content[n],this.content[n]=r,t=n}},__class__:ht};var lt=e.core.KdPoint=function(t,e){this.point=t,this.obj=e};i["verb.core.KdPoint"]=lt,lt.__name__=["verb","core","KdPoint"],lt.prototype={__class__:lt};var ut=e.core.KdNode=function(t,e,r){this.kdPoint=t,this.left=null,this.right=null,this.parent=r,this.dimension=e};i["verb.core.KdNode"]=ut,ut.__name__=["verb","core","KdNode"],ut.prototype={__class__:ut};var dt=function(){};i["verb.eval.IBoundingBoxTree"]=dt,dt.__name__=["verb","eval","IBoundingBoxTree"],dt.prototype={__class__:dt};var vt=function(t,e){this._boundingBox=null,this._curve=t,null==e&&(e=Tt.domain(this._curve.knots)/64),this._knotTol=e};i["verb.core.LazyCurveBoundingBoxTree"]=vt,vt.__name__=["verb","core","LazyCurveBoundingBoxTree"],vt.__interfaces__=[dt],vt.prototype={split:function(){var t=N.first(this._curve.knots),e=N.last(this._curve.knots),r=e-t,i=Et.curveSplit(this._curve,(e+t)/2+.1*r*Math.random());return new X(new vt(i[0],this._knotTol),new vt(i[1],this._knotTol))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new V(Ot.dehomogenize1d(this._curve.controlPoints))),this._boundingBox},yield:function(){return this._curve},indivisible:function(t){return Tt.domain(this._curve.knots)<this._knotTol},empty:function(){return!1},__class__:vt};var ft=function(t,e){if(this._boundingBox=null,this._mesh=t,null==e){for(var r=[],i=0,o=t.faces.length;i<o;){var s=i++;r.push(s)}e=r}this._faceIndices=e};i["verb.core.LazyMeshBoundingBoxTree"]=ft,ft.__name__=["verb","core","LazyMeshBoundingBoxTree"],ft.__interfaces__=[dt],ft.prototype={split:function(){var t=yt.sortTrianglesOnLongestAxis(this.boundingBox(),this._mesh,this._faceIndices),e=N.left(t),r=N.right(t);return new X(new ft(this._mesh,e),new ft(this._mesh,r))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=yt.makeMeshAabb(this._mesh,this._faceIndices)),this._boundingBox},yield:function(){return this._faceIndices[0]},indivisible:function(t){return 1==this._faceIndices.length},empty:function(){return 0==this._faceIndices.length},__class__:ft};var pt=function(t,e){this._boundingBox=null,this._polyline=t,null==e&&(e=new J(0,0!=t.points.length?t.points.length-1:0)),this._interval=e};i["verb.core.LazyPolylineBoundingBoxTree"]=pt,pt.__name__=["verb","core","LazyPolylineBoundingBoxTree"],pt.__interfaces__=[dt],pt.prototype={split:function(){var t=this._interval.min,e=this._interval.max,r=t+Math.ceil((e-t)/2),i=new J(t,r),o=new J(r,e);return new X(new pt(this._polyline,i),new pt(this._polyline,o))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new V(this._polyline.points)),this._boundingBox},yield:function(){return this._interval.min},indivisible:function(t){return this._interval.max-this._interval.min==1},empty:function(){return this._interval.max-this._interval.min==0},__class__:pt};var gt=function(t,e,r,i){null==e&&(e=!1),this._boundingBox=null,this._surface=t,this._splitV=e,null==r&&(r=Tt.domain(t.knotsU)/16),null==i&&(i=Tt.domain(t.knotsV)/16),this._knotTolU=r,this._knotTolV=i};i["verb.core.LazySurfaceBoundingBoxTree"]=gt,gt.__name__=["verb","core","LazySurfaceBoundingBoxTree"],gt.__interfaces__=[dt],gt.prototype={split:function(){var t,e;this._splitV?(t=N.first(this._surface.knotsV),e=N.last(this._surface.knotsV)):(t=N.first(this._surface.knotsU),e=N.last(this._surface.knotsU));var r=(t+e)/2,i=Et.surfaceSplit(this._surface,r,this._splitV);return new X(new gt(i[0],!this._splitV,this._knotTolU,this._knotTolV),new gt(i[1],!this._splitV,this._knotTolU,this._knotTolV))},boundingBox:function(){if(null==this._boundingBox){this._boundingBox=new V;for(var t=0,e=this._surface.controlPoints;t<e.length;){var r=e[t];++t,this._boundingBox.addRange(Ot.dehomogenize1d(r))}}return this._boundingBox},yield:function(){return this._surface},indivisible:function(t){return Tt.domain(this._surface.knotsV)<this._knotTolV&&Tt.domain(this._surface.knotsU)<this._knotTolU},empty:function(){return!1},__class__:gt};var mt=e.core.Mat=function(){};i["verb.core.Mat"]=mt,mt.__name__=["verb","core","Mat"],mt.mul=function(t,e){for(var r=[],i=0,o=e.length;i<o;){var s=i++;r.push(Tt.mul(t,e[s]))}return r},mt.mult=function(t,e){var r,i,o,s,n,a,c,h;r=t.length,i=e.length,o=e[0].length,s=[];for(var l=r-1,u=0,d=0;l>=0;){for(n=[],a=t[l],d=o-1;d>=0;){for(c=a[i-1]*e[i-1][d],u=i-2;u>=1;)h=u-1,c+=a[u]*e[u][d]+a[h]*e[h][d],u-=2;0==u&&(c+=a[0]*e[0][d]),n[d]=c,d--}s[l]=n,l--}return s},mt.add=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(Tt.add(t[s],e[s]))}return r},mt.div=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(Tt.div(t[s],e))}return r},mt.sub=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(Tt.sub(t[s],e[s]))}return r},mt.dot=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(Tt.dot(t[s],e))}return r},mt.identity=function(t){for(var e=Tt.zeros2d(t,t),r=0;r<t;){var i=r++;e[i][i]=1}return e},mt.transpose=function(t){if(0==t.length)return[];for(var e=[],r=0,i=t[0].length;r<i;){var o=r++;e.push(function(e){for(var r=[],i=0,s=t.length;i<s;){var n=i++;r.push(t[n][o])}return r}())}return e},mt.solve=function(t,e){return mt.LUsolve(mt.LU(t),e)},mt.LUsolve=function(t,e){var r,i,o,s,n,a=t.LU,c=a.length,h=e.slice(),l=t.P;for(r=c-1;-1!=r;)h[r]=e[r],--r;for(r=0;r<c;){for(o=l[r],l[r]!=r&&(n=h[r],h[r]=h[o],h[o]=n),s=a[r],i=0;i<r;)h[r]-=h[i]*s[i],++i;++r}for(r=c-1;r>=0;){for(s=a[r],i=r+1;i<c;)h[r]-=h[i]*s[i],++i;h[r]/=s[r],--r}return h},mt.LU=function(t){Math.abs;for(var e,r,i,o,s,n,a,c,h,l=[],u=0,d=t.length;u<d;){var v=u++;l.push(t[v].slice())}var f=(t=l).length,p=f-1,g=[];for(i=0;i<f;){for(a=i,n=t[i],h=Math.abs(n[i]),r=i+1;r<f;)h<(o=Math.abs(t[r][i]))&&(h=o,a=r),++r;for(g[i]=a,a!=i&&(t[i]=t[a],t[a]=n,n=t[i]),s=n[i],e=i+1;e<f;)t[e][i]/=s,++e;for(e=i+1;e<f;){for(c=t[e],r=i+1;r<p;)c[r]-=c[i]*n[r],c[++r]-=c[i]*n[r],++r;r==p&&(c[r]-=c[i]*n[r]),++e}++i}return new bt(t,g)};var bt=function(t,e){this.LU=t,this.P=e};i["verb.core._Mat.LUDecomp"]=bt,bt.__name__=["verb","core","_Mat","LUDecomp"],bt.prototype={__class__:bt};var yt=e.core.Mesh=function(){};i["verb.core.Mesh"]=yt,yt.__name__=["verb","core","Mesh"],yt.getTriangleNorm=function(t,e){var r=t[e[0]],i=t[e[1]],o=t[e[2]],s=Tt.sub(i,r),n=Tt.sub(o,r),a=Tt.cross(s,n);return Tt.mul(1/Tt.norm(a),a)},yt.makeMeshAabb=function(t,e){for(var r=new V,i=0;i<e.length;){var o=e[i];++i,r.add(t.points[t.faces[o][0]]),r.add(t.points[t.faces[o][1]]),r.add(t.points[t.faces[o][2]])}return r},yt.sortTrianglesOnLongestAxis=function(t,e,r){for(var i=t.getLongestAxis(),o=[],s=0;s<r.length;){var n=r[s];++s;var a=yt.getMinCoordOnAxis(e.points,e.faces[n],i);o.push(new X(a,n))}o.sort((function(t,e){var r=t.item0,i=e.item0;return r==i?0:r>i?1:-1}));for(var c=[],h=0,l=o.length;h<l;){var u=h++;c.push(o[u].item1)}return c},yt.getMinCoordOnAxis=function(t,e,r){for(var i=1/0,o=0;o<3;){var s=t[e[o++]][r];s<i&&(i=s)}return i},yt.getTriangleCentroid=function(t,e){for(var r=[0,0,0],i=0;i<3;)for(var o=i++,s=0;s<3;){var n=s++;r[n]+=t[e[o]][n]}for(var a=0;a<3;)r[a++]/=3;return r},yt.triangleUVFromPoint=function(t,e,r){var i=t.faces[e],o=t.points[i[0]],s=t.points[i[1]],n=t.points[i[2]],a=t.uvs[i[0]],c=t.uvs[i[1]],h=t.uvs[i[2]],l=Tt.sub(o,r),u=Tt.sub(s,r),d=Tt.sub(n,r),v=Tt.norm(Tt.cross(Tt.sub(o,s),Tt.sub(o,n))),f=Tt.norm(Tt.cross(u,d))/v,p=Tt.norm(Tt.cross(d,l))/v,g=Tt.norm(Tt.cross(l,u))/v;return Tt.add(Tt.mul(f,a),Tt.add(Tt.mul(p,c),Tt.mul(g,h)))};var Pt=function(t,e){if(this._empty=!1,this._face=-1,null==e){for(var r=[],i=0,o=t.faces.length;i<o;){var s=i++;r.push(s)}e=r}if(this._boundingBox=yt.makeMeshAabb(t,e),e.length<1)this._empty=!0;else if(e.length<2)this._face=e[0];else{var n=yt.sortTrianglesOnLongestAxis(this._boundingBox,t,e),a=N.left(n),c=N.right(n);this._children=new X(new Pt(t,a),new Pt(t,c))}};i["verb.core.MeshBoundingBoxTree"]=Pt,Pt.__name__=["verb","core","MeshBoundingBoxTree"],Pt.__interfaces__=[dt],Pt.prototype={split:function(){return this._children},boundingBox:function(){return this._boundingBox},yield:function(){return this._face},indivisible:function(t){return null==this._children},empty:function(){return this._empty},__class__:Pt};var wt=e.core.Minimizer=function(){};i["verb.core.Minimizer"]=wt,wt.__name__=["verb","core","Minimizer"],wt.uncmin=function(t,e,r,i,o){null==r&&(r=1e-8),null==i&&(i=function(e){return wt.numericalGradient(t,e)}),null==o&&(o=1e3);var s,n,a,c,h=(e=e.slice(0)).length,l=t(e),u=l;if(isNaN(l))throw new T("uncmin: f(x0) is a NaN!");r=Math.max(r,j.EPSILON);var d,v,f,p,g,m,b=mt.identity(h),y=0,P=[],w="";for(a=i(e);y<o;){if(!Tt.all(Tt.finite(a))){w="Gradient has Infinity or NaN";break}if(n=Tt.neg(mt.dot(b,a)),!Tt.all(Tt.finite(n))){w="Search direction has Infinity or NaN";break}if((m=Tt.norm(n))<r){w="Newton step smaller than tol";break}for(g=1,s=Tt.dot(a,n),d=e;y<o&&!(g*m<r)&&(P=Tt.mul(g,n),d=Tt.add(e,P),(u=t(d))-l>=.1*g*s||isNaN(u));)g*=.5,++y;if(g*m<r){w="Line search step size smaller than tol";break}if(y==o){w="maxit reached during line search";break}c=i(d),v=Tt.sub(c,a),p=Tt.dot(v,P),f=mt.dot(b,v),b=mt.sub(mt.add(b,mt.mul((p+Tt.dot(v,f))/(p*p),wt.tensor(P,P))),mt.div(mt.add(wt.tensor(f,P),wt.tensor(P,f)),p)),e=d,l=u,a=c,++y}return new kt(e,l,a,b,y,w)},wt.numericalGradient=function(t,e){var r=e.length,i=t(e);if(NaN==i)throw new T("gradient: f(x) is a NaN!");for(var o,s,n,a,c,h,l,u,d=e.slice(0),v=[],f=0,p=0;p<r;)for(var g=p++,m=Math.max(1e-6*i,1e-8);;){if(++f>20)throw new T("Numerical gradient fails");if(d[g]=e[g]+m,o=t(d),d[g]=e[g]-m,s=t(d),d[g]=e[g],isNaN(o)||isNaN(s))m/=16;else{if(v[g]=(o-s)/(2*m),n=e[g]-m,a=e[g],c=e[g]+m,h=(o-i)/m,l=(i-s)/m,u=Tt.max([Math.abs(v[g]),Math.abs(i),Math.abs(o),Math.abs(s),Math.abs(n),Math.abs(a),Math.abs(c),1e-8]),!(Math.min(Tt.max([Math.abs(h-v[g]),Math.abs(l-v[g]),Math.abs(h-l)])/u,m/u)>.001))break;m/=16}}return v},wt.tensor=function(t,e){for(var r,i,o=t.length,s=e.length,n=[],a=o-1;a>=0;){r=[],i=t[a];for(var c=s-1;c>=3;)r[c]=i*e[c],r[--c]=i*e[c],r[--c]=i*e[c],r[--c]=i*e[c],--c;for(;c>=0;)r[c]=i*e[c],--c;n[a]=r,a--}return n};var kt=function(t,e,r,i,o,s){this.solution=t,this.value=e,this.gradient=r,this.invHessian=i,this.iterations=o,this.message=s};i["verb.core.MinimizationResult"]=kt,kt.__name__=["verb","core","MinimizationResult"],kt.prototype={__class__:kt};var Ct=function(){};i["verb.core.ISerializable"]=Ct,Ct.__name__=["verb","core","ISerializable"],Ct.prototype={__class__:Ct};var xt=e.core.Deserializer=function(){};i["verb.core.Deserializer"]=xt,xt.__name__=["verb","core","Deserializer"],xt.deserialize=function(t){return new b(t).unserialize()};var _t=e.core.Trig=function(){};i["verb.core.Trig"]=_t,_t.__name__=["verb","core","Trig"],_t.isPointInPlane=function(t,e,r){return Math.abs(Tt.dot(Tt.sub(t,e.origin),e.normal))<r},_t.distToSegment=function(t,e,r){var i=_t.segmentClosestPoint(e,t,r,0,1);return Tt.dist(e,i.pt)},_t.rayClosestPoint=function(t,e,r){var i=Tt.sub(t,e),o=Tt.dot(i,r);return Tt.add(e,Tt.mul(o,r))},_t.distToRay=function(t,e,r){var i=_t.rayClosestPoint(t,e,r),o=Tt.sub(i,t);return Tt.norm(o)},_t.threePointsAreFlat=function(t,e,r,i){var o=Tt.sub(e,t),s=Tt.sub(r,t),n=Tt.cross(o,s);return Tt.dot(n,n)<i},_t.segmentClosestPoint=function(t,e,r,i,o){var s=Tt.sub(r,e),n=Tt.norm(s);if(n<j.EPSILON)return{u:i,pt:e};var a=e,c=Tt.mul(1/n,s),h=Tt.sub(t,a),l=Tt.dot(h,c);return l<0?{u:i,pt:e}:l>n?{u:o,pt:r}:{u:i+(o-i)*l/n,pt:Tt.add(a,Tt.mul(l,c))}};var Tt=e.core.Vec=function(){};i["verb.core.Vec"]=Tt,Tt.__name__=["verb","core","Vec"],Tt.angleBetween=function(t,e){return Math.acos(Tt.dot(t,e)/(Tt.norm(t)*Tt.norm(e)))},Tt.positiveAngleBetween=function(t,e,r){var i=Tt.cross(t,e),o=Tt.norm(t)*Tt.norm(e),s=Tt.dot(t,e),n=Tt.norm(i)/o,a=s/o,c=Math.atan2(n,a),h=Tt.dot(r,i);return Math.abs(h)<j.EPSILON||h>0?c:-c},Tt.signedAngleBetween=function(t,e,r){var i=Tt.cross(t,e),o=Tt.norm(t)*Tt.norm(e),s=Tt.dot(t,e),n=Tt.norm(i)/o,a=s/o,c=Math.atan2(n,a);return Tt.dot(r,i)>0?c:2*Math.PI-c},Tt.angleBetweenNormalized2d=function(t,e){var r=t[0]*e[1]-t[1]*e[0];return Math.atan2(r,Tt.dot(t,e))},Tt.domain=function(t){return N.last(t)-N.first(t)},Tt.range=function(t){for(var e=[],r=0,i=0;i<t;)i++,e.push(r),r+=1;return e},Tt.span=function(t,e,r){if(null==r)return[];if(r<j.EPSILON)return[];if(t>e&&r>0)return[];if(e>t&&r<0)return[];for(var i=[],o=t;o<=e;)i.push(o),o+=r;return i},Tt.neg=function(t){return t.map((function(t){return-t}))},Tt.min=function(t){return a.fold(t,(function(t,e){return Math.min(t,e)}),1/0)},Tt.max=function(t){return a.fold(t,(function(t,e){return Math.max(t,e)}),-1/0)},Tt.all=function(t){return a.fold(t,(function(t,e){return e&&t}),!0)},Tt.finite=function(t){return t.map((function(t){return isFinite(t)}))},Tt.onRay=function(t,e,r){return Tt.add(t,Tt.mul(r,e))},Tt.lerp=function(t,e,r){return Tt.add(Tt.mul(t,e),Tt.mul(1-t,r))},Tt.normalized=function(t){return Tt.div(t,Tt.norm(t))},Tt.cross=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},Tt.dist=function(t,e){return Tt.norm(Tt.sub(t,e))},Tt.distSquared=function(t,e){return Tt.normSquared(Tt.sub(t,e))},Tt.sum=function(t){return a.fold(t,(function(t,e){return e+t}),0)},Tt.addAll=function(t){var e=se(t)();if(!e.hasNext())return null;var r=e.next().length;return a.fold(t,(function(t,e){return Tt.add(e,t)}),Tt.rep(r,0))},Tt.addAllMutate=function(t){for(var e=t[0],r=1,i=t.length;r<i;){var o=r++;Tt.addMutate(e,t[o])}},Tt.addMulMutate=function(t,e,r){for(var i=0,o=t.length;i<o;){var s=i++;t[s]=t[s]+e*r[s]}},Tt.subMulMutate=function(t,e,r){for(var i=0,o=t.length;i<o;){var s=i++;t[s]=t[s]-e*r[s]}},Tt.addMutate=function(t,e){for(var r=0,i=t.length;r<i;){var o=r++;t[o]=t[o]+e[o]}},Tt.subMutate=function(t,e){for(var r=0,i=t.length;r<i;){var o=r++;t[o]=t[o]-e[o]}},Tt.mulMutate=function(t,e){for(var r=0,i=e.length;r<i;){var o=r++;e[o]=e[o]*t}},Tt.norm=function(t){var e=Tt.normSquared(t);return 0!=e?Math.sqrt(e):e},Tt.normSquared=function(t){return a.fold(t,(function(t,e){return e+t*t}),0)},Tt.rep=function(t,e){for(var r=[],i=0;i<t;)i++,r.push(e);return r},Tt.zeros1d=function(t){for(var e=[],r=0;r<t;)r++,e.push(0);return e},Tt.zeros2d=function(t,e){for(var r=[],i=0;i<t;)i++,r.push(Tt.zeros1d(e));return r},Tt.zeros3d=function(t,e,r){for(var i=[],o=0;o<t;)o++,i.push(Tt.zeros2d(e,r));return i},Tt.dot=function(t,e){for(var r=0,i=0,o=t.length;i<o;){var s=i++;r+=t[s]*e[s]}return r},Tt.add=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(t[s]+e[s])}return r},Tt.mul=function(t,e){for(var r=[],i=0,o=e.length;i<o;){var s=i++;r.push(t*e[s])}return r},Tt.div=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(t[s]/e)}return r},Tt.sub=function(t,e){for(var r=[],i=0,o=t.length;i<o;){var s=i++;r.push(t[s]-e[s])}return r},Tt.isZero=function(t){for(var e=0,r=t.length;e<r;){var i=e++;if(Math.abs(t[i])>j.TOLERANCE)return!1}return!0},Tt.sortedSetUnion=function(t,e){for(var r=[],i=0,o=0;i<t.length||o<e.length;)if(i>=t.length)r.push(e[o]),o++;else if(o>=e.length)r.push(t[i]),i++;else{var s=t[i]-e[o];Math.abs(s)<j.EPSILON?(r.push(t[i]),i++,o++):s>0?(r.push(e[o]),o++):(r.push(t[i]),i++)}return r},Tt.sortedSetSub=function(t,e){for(var r=[],i=0,o=0;i<t.length;)o>=e.length?(r.push(t[i]),i++):Math.abs(t[i]-e[o])<j.EPSILON?(i++,o++):(r.push(t[i]),i++);return r};var St=e.eval.Analyze=function(){};i["verb.eval.Analyze"]=St,St.__name__=["verb","eval","Analyze"],St.knotMultiplicities=function(t){for(var e=[new Mt(t[0],0)],r=e[0],i=0;i<t.length;){var o=t[i];++i,Math.abs(o-r.knot)>j.EPSILON&&(r=new Mt(o,0),e.push(r)),r.inc()}return e},St.isRationalSurfaceClosed=function(t,e){var r;null==e&&(e=!0);for(var i=0,o=(r=e?t.controlPoints:mt.transpose(t.controlPoints))[0].length;i<o;){var s=i++;if(!(Tt.dist(N.first(r)[s],N.last(r)[s])<j.EPSILON))return!1}return!0},St.rationalSurfaceClosestPoint=function(t,e){var r=St.rationalSurfaceClosestParam(t,e);return Ot.rationalSurfacePoint(t,r[0],r[1])},St.rationalSurfaceClosestParam=function(t,e){for(var r,i,o,s=0,n=1e-4,a=5e-4,c=t.knotsU[0],h=N.last(t.knotsU),l=t.knotsV[0],u=N.last(t.knotsV),d=St.isRationalSurfaceClosed(t),v=St.isRationalSurfaceClosed(t,!1),f=Lt.rationalSurfaceAdaptive(t,new Bt),p=1/0,g=0,m=f.points.length;g<m;){var b=g++,y=f.points[b],P=Tt.normSquared(Tt.sub(e,y));P<p&&(p=P,o=f.uvs[b])}for(;s<5;){U=o,r=Ot.rationalSurfaceDerivatives(t,U[0],U[1],2),i=Tt.sub(r[0][0],e);var w=Tt.norm(i),k=Tt.dot(r[1][0],i),C=Tt.norm(r[1][0])*w,x=Tt.dot(r[0][1],i),_=Tt.norm(r[0][1])*w;if(w<n&&k/C<a&&x/_<a)return o;var T=(S=o,W=i,E=void 0,D=void 0,O=void 0,A=void 0,I=void 0,F=void 0,L=void 0,B=void 0,R=void 0,E=(M=r)[1][0],D=M[0][1],O=M[2][0],A=M[0][2],I=M[1][1],F=M[1][1],L=[-Tt.dot(E,W),-Tt.dot(D,W)],B=[[Tt.dot(E,E)+Tt.dot(O,W),Tt.dot(E,D)+Tt.dot(I,W)],[Tt.dot(E,D)+Tt.dot(F,W),Tt.dot(D,D)+Tt.dot(A,W)]],R=mt.solve(B,L),Tt.add(R,S));if(T[0]<c?T=d?[h-(T[0]-c),T[1]]:[c+j.EPSILON,T[1]]:T[0]>h&&(T=d?[c+(T[0]-h),T[1]]:[h-j.EPSILON,T[1]]),T[1]<l?T=v?[T[0],u-(T[1]-l)]:[T[0],l+j.EPSILON]:T[1]>u&&(T=v?[T[0],l+(T[0]-u)]:[T[0],u-j.EPSILON]),Tt.norm(Tt.mul(T[0]-o[0],r[1][0]))+Tt.norm(Tt.mul(T[1]-o[1],r[0][1]))<n)return o;o=T,s++}var S,M,W,E,D,O,A,I,F,L,B,R,U;return o},St.rationalCurveClosestPoint=function(t,e){return Ot.rationalCurvePoint(t,St.rationalCurveClosestParam(t,e))},St.rationalCurveClosestParam=function(t,e){for(var r=1/0,i=0,o=Lt.rationalCurveRegularSample(t,t.controlPoints.length*t.degree,!0),s=0,n=o.length-1;s<n;){var a=s++,c=o[a][0],h=o[a+1][0],l=o[a].slice(1),u=o[a+1].slice(1),d=_t.segmentClosestPoint(e,l,u,c,h),v=Tt.norm(Tt.sub(e,d.pt));v<r&&(r=v,i=d.u)}for(var f,p,g=0,m=1e-4,b=t.knots[0],y=N.last(t.knots),P=Tt.normSquared(Tt.sub(t.controlPoints[0],N.last(t.controlPoints)))<j.EPSILON,w=i;g<5;){W=w,f=Ot.rationalCurveDerivatives(t,W,2),p=Tt.sub(f[0],e);var k=Tt.norm(p),C=Tt.dot(f[1],p)/(Tt.norm(f[1])*k),x=k<m,_=Math.abs(C)<5e-4;if(x&&_)return w;var T=(S=f,M=p,w-Tt.dot(S[1],M)/(Tt.dot(S[2],M)+Tt.dot(S[1],S[1])));if(T<b?T=P?y-(T-b):b:T>y&&(T=P?b+(T-y):y),Tt.norm(Tt.mul(T-w,f[1]))<m)return w;w=T,g++}var S,M,W;return w},St.rationalCurveParamAtArcLength=function(t,e,r,i,o){if(null==r&&(r=.001),e<j.EPSILON)return t.knots[0];var s,n,a=0,c=((s=null!=i?i:Ft.decomposeCurveIntoBeziers(t))[a],-j.EPSILON);for(n=null!=o?o:[];c<e&&a<s.length;){if(a<n.length?n[a]=n[a]:n[a]=St.rationalBezierCurveArcLength(t),e<(c+=n[a])+j.EPSILON)return St.rationalBezierCurveParamAtArcLength(t,e,r,n[a]);a++}return-1},St.rationalBezierCurveParamAtArcLength=function(t,e,r,i){if(e<0)return t.knots[0];var o;if(e>(o=null!=i?i:St.rationalBezierCurveArcLength(t)))return N.last(t.knots);var s,n=t.knots[0],a=0,c=N.last(t.knots),h=o,l=0,u=0;for(s=null!=r?r:2*j.TOLERANCE;h-a>s;)l=(n+c)/2,(u=St.rationalBezierCurveArcLength(t,l))>e?(c=l,h=u):(n=l,a=u);return(n+c)/2},St.rationalCurveArcLength=function(t,e,r){null==r&&(r=16),null==e&&(e=N.last(t.knots));for(var i=Ft.decomposeCurveIntoBeziers(t),o=0,s=i[0],n=0;o<i.length&&s.knots[0]+j.EPSILON<e;){var a=Math.min(N.last(s.knots),e);n+=St.rationalBezierCurveArcLength(s,a,r),s=i[++o]}return n},St.rationalBezierCurveArcLength=function(t,e,r){null==r&&(r=16);for(var i,o,s=((null==e?N.last(t.knots):e)-t.knots[0])/2,n=0,a=t.degree+r,c=0;c<a;){var h=c++;i=s*St.Tvalues[a][h]+s+t.knots[0],o=Ot.rationalCurveDerivatives(t,i,1),n+=St.Cvalues[a][h]*Tt.norm(o[1])}return s*n};var Mt=e.eval.KnotMultiplicity=function(t,e){this.knot=t,this.mult=e};i["verb.eval.KnotMultiplicity"]=Mt,Mt.__name__=["verb","eval","KnotMultiplicity"],Mt.prototype={inc:function(){this.mult++},__class__:Mt};var Wt=e.eval.Check=function(){};i["verb.eval.Check"]=Wt,Wt.__name__=["verb","eval","Check"],Wt.isValidKnotVector=function(t,e){if(0==t.length)return!1;if(t.length<2*(e+1))return!1;for(var r=N.first(t),i=0,o=e+1;i<o;){var s=i++;if(Math.abs(t[s]-r)>j.EPSILON)return!1}r=N.last(t);for(var n=t.length-e-1,a=t.length;n<a;){var c=n++;if(Math.abs(t[c]-r)>j.EPSILON)return!1}return Wt.isNonDecreasing(t)},Wt.isNonDecreasing=function(t){for(var e=N.first(t),r=0,i=t.length;r<i;){var o=r++;if(t[o]<e-j.EPSILON)return!1;e=t[o]}return!0},Wt.isValidNurbsCurveData=function(t){if(null==t.controlPoints)throw new T("Control points array cannot be null!");if(null==t.degree)throw new T("Degree cannot be null!");if(t.degree<1)throw new T("Degree must be greater than 1!");if(null==t.knots)throw new T("Knots cannot be null!");if(t.knots.length!=t.controlPoints.length+t.degree+1)throw new T("controlPoints.length + degree + 1 must equal knots.length!");if(!Wt.isValidKnotVector(t.knots,t.degree))throw new T("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return t},Wt.isValidNurbsSurfaceData=function(t){if(null==t.controlPoints)throw new T("Control points array cannot be null!");if(null==t.degreeU)throw new T("DegreeU cannot be null!");if(null==t.degreeV)throw new T("DegreeV cannot be null!");if(t.degreeU<1)throw new T("DegreeU must be greater than 1!");if(t.degreeV<1)throw new T("DegreeV must be greater than 1!");if(null==t.knotsU)throw new T("KnotsU cannot be null!");if(null==t.knotsV)throw new T("KnotsV cannot be null!");if(t.knotsU.length!=t.controlPoints.length+t.degreeU+1)throw new T("controlPointsU.length + degreeU + 1 must equal knotsU.length!");if(t.knotsV.length!=t.controlPoints[0].length+t.degreeV+1)throw new T("controlPointsV.length + degreeV + 1 must equal knotsV.length!");if(!Wt.isValidKnotVector(t.knotsU,t.degreeU)||!Wt.isValidKnotVector(t.knotsV,t.degreeV))throw new T("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return t};var Et=e.eval.Divide=function(){};i["verb.eval.Divide"]=Et,Et.__name__=["verb","eval","Divide"],Et.surfaceSplit=function(t,e,r){var i,o,s,n;null==r&&(r=!1),r?(s=t.controlPoints,i=t.knotsV,o=t.degreeV):(s=mt.transpose(t.controlPoints),i=t.knotsU,o=t.degreeU);for(var a=[],c=0,h=o+1;c<h;)c++,a.push(e);n=a;for(var l=[],u=[],d=Ot.knotSpan(o,e,i),v=null,f=0;f<s.length;){var p=s[f];++f,v=Ft.curveKnotRefine(new G(o,i,p),n),l.push(v.controlPoints.slice(0,d+1)),u.push(v.controlPoints.slice(d+1))}var g=v.knots.slice(0,d+o+2),m=v.knots.slice(d+1);return r?[new Y(t.degreeU,o,t.knotsU.slice(),g,l),new Y(t.degreeU,o,t.knotsU.slice(),m,u)]:(l=mt.transpose(l),u=mt.transpose(u),[new Y(o,t.degreeV,g,t.knotsV.slice(),l),new Y(o,t.degreeV,m,t.knotsV.slice(),u)])},Et.curveSplit=function(t,e){for(var r,i=t.degree,o=(t.controlPoints,t.knots),s=[],n=0,a=i+1;n<a;)n++,s.push(e);r=s;var c=Ft.curveKnotRefine(t,r),h=Ot.knotSpan(i,e,o),l=c.knots.slice(0,h+i+2),u=c.knots.slice(h+1),d=c.controlPoints.slice(0,h+1),v=c.controlPoints.slice(h+1);return[new G(i,l,d),new G(i,u,v)]},Et.rationalCurveByEqualArcLength=function(t,e){var r=St.rationalCurveArcLength(t)/e;return Et.rationalCurveByArcLength(t,r)},Et.rationalCurveByArcLength=function(t,e){var r=Ft.decomposeCurveIntoBeziers(t),i=r.map((function(t){return St.rationalBezierCurveArcLength(t)})),o=Tt.sum(i),s=[new Dt(t.knots[0],0)];if(e>o)return s;for(var n,a=e,c=0,h=a,l=0,u=0;c<r.length;){for(l+=i[c];h<l+j.EPSILON;)n=St.rationalBezierCurveParamAtArcLength(r[c],h-u,j.TOLERANCE,i[c]),s.push(new Dt(n,h)),h+=a;u+=i[c],c++}return s};var Dt=e.eval.CurveLengthSample=function(t,e){this.u=t,this.len=e};i["verb.eval.CurveLengthSample"]=Dt,Dt.__name__=["verb","eval","CurveLengthSample"],Dt.prototype={__class__:Dt};var Ot=e.eval.Eval=function(){};i["verb.eval.Eval"]=Ot,Ot.__name__=["verb","eval","Eval"],Ot.rationalCurveTangent=function(t,e){return Ot.rationalCurveDerivatives(t,e,1)[1]},Ot.rationalSurfaceNormal=function(t,e,r){var i=Ot.rationalSurfaceDerivatives(t,e,r,1);return Tt.cross(i[1][0],i[0][1])},Ot.rationalSurfaceDerivatives=function(t,e,r,i){null==i&&(i=1);for(var o=Ot.surfaceDerivatives(t,e,r,i),s=Ot.rational2d(o),n=Ot.weight2d(o),a=[],c=s[0][0].length,h=0,l=i+1;h<l;){var u=h++;a.push([]);for(var d=0,v=i-u+1;d<v;){for(var f=d++,p=s[u][f],g=1,m=f+1;g<m;){var b=g++;Tt.subMulMutate(p,U.get(f,b)*n[0][b],a[u][f-b])}for(var y=1,P=u+1;y<P;){var w=y++;Tt.subMulMutate(p,U.get(u,w)*n[w][0],a[u-w][f]);for(var k=Tt.zeros1d(c),C=1,x=f+1;C<x;){var _=C++;Tt.addMulMutate(k,U.get(f,_)*n[w][_],a[u-w][f-_])}Tt.subMulMutate(p,U.get(u,w),k)}Tt.mulMutate(1/n[0][0],p),a[u].push(p)}}return a},Ot.rationalSurfacePoint=function(t,e,r){return Ot.dehomogenize(Ot.surfacePoint(t,e,r))},Ot.rationalCurveDerivatives=function(t,e,r){null==r&&(r=1);for(var i=Ot.curveDerivatives(t,e,r),o=Ot.rational1d(i),s=Ot.weight1d(i),n=[],a=0,c=r+1;a<c;){for(var h=a++,l=o[h],u=1,d=h+1;u<d;){var v=u++;Tt.subMulMutate(l,U.get(h,v)*s[v],n[h-v])}Tt.mulMutate(1/s[0],l),n.push(l)}return n},Ot.rationalCurvePoint=function(t,e){return Ot.dehomogenize(Ot.curvePoint(t,e))},Ot.surfaceDerivatives=function(t,e,r,i){var o=t.knotsU.length-t.degreeU-2,s=t.knotsV.length-t.degreeV-2;return Ot.surfaceDerivativesGivenNM(o,s,t,e,r,i)},Ot.surfaceDerivativesGivenNM=function(t,e,r,i,o,s){var n=r.degreeU,a=r.degreeV,c=r.controlPoints,h=r.knotsU,l=r.knotsV;if(!Ot.areValidRelations(n,c.length,h.length)||!Ot.areValidRelations(a,c[0].length,l.length))throw new T("Invalid relations between control points, knot vector, and n");var u,d,v=c[0][0].length;u=s<n?s:n,d=s<a?s:a;for(var f=Tt.zeros3d(s+1,s+1,v),p=Ot.knotSpanGivenN(t,n,i,h),g=Ot.knotSpanGivenN(e,a,o,l),m=Ot.derivativeBasisFunctionsGivenNI(p,i,n,t,h),b=Ot.derivativeBasisFunctionsGivenNI(g,o,a,e,l),y=Tt.zeros2d(a+1,v),P=0,w=u+1;P<w;){for(var k=P++,C=0,x=a+1;C<x;){var _=C++;y[_]=Tt.zeros1d(v);for(var S=0,M=n+1;S<M;){var W=S++;Tt.addMulMutate(y[_],m[k][W],c[p-n+W][g-a+_])}}for(var E=s-k,D=0,O=(E<d?E:d)+1;D<O;){var A=D++;f[k][A]=Tt.zeros1d(v);for(var I=0,F=a+1;I<F;){var L=I++;Tt.addMulMutate(f[k][A],b[A][L],y[L])}}}return f},Ot.surfacePoint=function(t,e,r){var i=t.knotsU.length-t.degreeU-2,o=t.knotsV.length-t.degreeV-2;return Ot.surfacePointGivenNM(i,o,t,e,r)},Ot.surfacePointGivenNM=function(t,e,r,i,o){var s=r.degreeU,n=r.degreeV,a=r.controlPoints,c=r.knotsU,h=r.knotsV;if(!Ot.areValidRelations(s,a.length,c.length)||!Ot.areValidRelations(n,a[0].length,h.length))throw new T("Invalid relations between control points, knot vector, and n");for(var l=a[0][0].length,u=Ot.knotSpanGivenN(t,s,i,c),d=Ot.knotSpanGivenN(e,n,o,h),v=Ot.basisFunctionsGivenKnotSpanIndex(u,i,s,c),f=Ot.basisFunctionsGivenKnotSpanIndex(d,o,n,h),p=u-s,g=d,m=Tt.zeros1d(l),b=Tt.zeros1d(l),y=0,P=n+1;y<P;){var w=y++;b=Tt.zeros1d(l),g=d-n+w;for(var k=0,C=s+1;k<C;){var x=k++;Tt.addMulMutate(b,v[x],a[p+x][g])}Tt.addMulMutate(m,f[w],b)}return m},Ot.curveRegularSamplePoints=function(t,e){for(var r=Ot.curveDerivatives(t,t.knots[0],t.degree),i=1/e,o=i*i,s=r[0],n=Tt.mul(i,r[1]),a=Tt.mul(.5*o,r[2]),c=Tt.mul(o*i*.5,r[3]),h=Tt.add(a,a),l=Tt.add(c,c),u=Tt.mul(.3333333333333333,c),d=[],v=0,f=e+1;v<f;)v++,d.push(Ot.dehomogenize(s)),Tt.addAllMutate([s,n,a,u]),Tt.addAllMutate([n,h,c]),Tt.addAllMutate([h,l]),Tt.addAllMutate([a,c]);return d},Ot.curveRegularSamplePoints2=function(t,e){for(var r=Ot.curveDerivatives(t,t.knots[0],t.degree),i=1/e,o=i*i,s=r[0],n=Tt.mul(i,r[1]),a=Tt.mul(.5*o,r[2]),c=Tt.mul(o*i*.5,r[3]),h=Tt.add(a,a),l=Tt.add(c,c),u=Tt.mul(.3333333333333333,c),d=[],v=0,f=e+1;v<f;)v++,d.push(Ot.dehomogenize(s)),Tt.addAllMutate([s,n,a,u]),Tt.addAllMutate([n,h,c]),Tt.addAllMutate([h,l]),Tt.addAllMutate([a,c]);return d},Ot.rationalSurfaceRegularSampleDerivatives=function(t,e,r,i){for(var o=Ot.surfaceRegularSampleDerivatives(t,e,r,i),s=[],n=e+1,a=r+1,c=i+1,h=0;h<n;){var l=h++,u=[];s.push(u);for(var d=0;d<a;){for(var v=d++,f=o[l][v],p=Ot.rational2d(f),g=Ot.weight2d(f),m=[],b=p[0][0].length,y=0;y<c;){var P=y++;m.push([]);for(var w=0,k=c-P;w<k;){for(var C=w++,x=p[P][C],_=1,T=C+1;_<T;){var S=_++;Tt.subMulMutate(x,U.get(C,S)*g[0][S],m[P][C-S])}for(var M=1,W=P+1;M<W;){var E=M++;Tt.subMulMutate(x,U.get(P,E)*g[E][0],m[P-E][C]);for(var D=Tt.zeros1d(b),O=1,A=C+1;O<A;){var I=O++;Tt.addMulMutate(D,U.get(C,I)*g[E][I],m[P-E][C-I])}Tt.subMulMutate(x,U.get(P,E),D)}Tt.mulMutate(1/g[0][0],x),m[P].push(x)}}u.push(m)}}return s},Ot.surfaceRegularSampleDerivatives=function(t,e,r,i){for(var o=t.degreeU,s=t.degreeV,n=t.controlPoints,a=t.knotsU,c=t.knotsV,h=n[0][0].length,l=(N.last(a),a[0],N.last(c),c[0],Ot.regularlySpacedDerivativeBasisFunctions(o,a,e)),u=l.item0,d=l.item1,v=Ot.regularlySpacedDerivativeBasisFunctions(s,c,r),f=v.item0,p=v.item1,g=[],m=e+1,b=r+1,y=0;y<m;){var P=y++,w=[];g.push(w);for(var k=0;k<b;){var C=k++;w.push(Ot.surfaceDerivativesGivenBasesKnotSpans(o,s,n,u[P],f[C],d[P],p[C],h,i))}}return g},Ot.rationalSurfaceRegularSamplePoints=function(t,e,r){return Ot.dehomogenize2d(Ot.surfaceRegularSamplePoints(t,e,r))},Ot.surfaceRegularSamplePoints=function(t,e,r){for(var i=t.degreeU,o=t.degreeV,s=t.controlPoints,n=t.knotsU,a=t.knotsV,c=s[0][0].length,h=(N.last(n),n[0],N.last(a),a[0],Ot.regularlySpacedBasisFunctions(i,n,e)),l=h.item0,u=h.item1,d=Ot.regularlySpacedBasisFunctions(o,a,r),v=d.item0,f=d.item1,p=[],g=e+1,m=r+1,b=0;b<g;){var y=b++,P=[];p.push(P);for(var w=0;w<m;){var k=w++;P.push(Ot.surfacePointGivenBasesKnotSpans(i,o,s,l[y],v[k],u[y],f[k],c))}}return p},Ot.regularlySpacedBasisFunctions=function(t,e,r){for(var i=e.length-t-2,o=(N.last(e)-e[0])/r,s=[],n=[],a=e[0],c=Ot.knotSpanGivenN(i,t,a,e),h=r+1,l=0;l<h;){for(l++;a>=e[c+1];)c++;n.push(c),s.push(Ot.basisFunctionsGivenKnotSpanIndex(c,a,t,e)),a+=o}return new X(n,s)},Ot.regularlySpacedDerivativeBasisFunctions=function(t,e,r){for(var i=e.length-t-2,o=(N.last(e)-e[0])/r,s=[],n=[],a=e[0],c=Ot.knotSpanGivenN(i,t,a,e),h=r+1,l=0;l<h;){for(l++;a>=e[c+1];)c++;n.push(c),s.push(Ot.derivativeBasisFunctionsGivenNI(c,a,t,i,e)),a+=o}return new X(n,s)},Ot.surfacePointGivenBasesKnotSpans=function(t,e,r,i,o,s,n,a){for(var c,h=Tt.zeros1d(a),l=i-t,u=o-e,d=0,v=e+1;d<v;){var f=d++;c=Tt.zeros1d(a);for(var p=0,g=t+1;p<g;){var m=p++;Tt.addMulMutate(c,s[m],r[l+m][u])}u++,Tt.addMulMutate(h,n[f],c)}return h},Ot.surfaceDerivativesGivenBasesKnotSpans=function(t,e,r,i,o,s,n,a,c){var h,l,u=r[0][0].length;h=c<t?c:t,l=c<e?c:e;for(var d=Tt.zeros3d(h+1,l+1,u),v=Tt.zeros2d(e+1,u),f=0,p=h+1;f<p;){for(var g=f++,m=0,b=e+1;m<b;){var y=m++;v[y]=Tt.zeros1d(u);for(var P=0,w=t+1;P<w;){var k=P++;Tt.addMulMutate(v[y],s[g][k],r[i-t+k][o-e+y])}}for(var C=c-g,x=0,_=(C<l?C:l)+1;x<_;){var T=x++;d[g][T]=Tt.zeros1d(u);for(var S=0,M=e+1;S<M;){var W=S++;Tt.addMulMutate(d[g][T],n[T][W],v[W])}}}return d},Ot.curveDerivatives=function(t,e,r){var i=t.knots.length-t.degree-2;return Ot.curveDerivativesGivenN(i,t,e,r)},Ot.curveDerivativesGivenN=function(t,e,r,i){var o=e.degree,s=e.controlPoints,n=e.knots;if(!Ot.areValidRelations(o,s.length,n.length))throw new T("Invalid relations between control points, knot vector, and n");var a,c=s[0].length;a=i<o?i:o;for(var h=Tt.zeros2d(i+1,c),l=Ot.knotSpanGivenN(t,o,r,n),u=Ot.derivativeBasisFunctionsGivenNI(l,r,o,a,n),d=0,v=a+1;d<v;)for(var f=d++,p=0,g=o+1;p<g;){var m=p++;Tt.addMulMutate(h[f],u[f][m],s[l-o+m])}return h},Ot.curvePoint=function(t,e){var r=t.knots.length-t.degree-2;return Ot.curvePointGivenN(r,t,e)},Ot.areValidRelations=function(t,e,r){return e+t+1-r==0},Ot.curvePointGivenN=function(t,e,r){var i=e.degree,o=e.controlPoints,s=e.knots;if(!Ot.areValidRelations(i,o.length,s.length))throw new T("Invalid relations between control points, knot Array, and n");for(var n=Ot.knotSpanGivenN(t,i,r,s),a=Ot.basisFunctionsGivenKnotSpanIndex(n,r,i,s),c=Tt.zeros1d(o[0].length),h=0,l=i+1;h<l;){var u=h++;Tt.addMulMutate(c,a[u],o[n-i+u])}return c},Ot.volumePoint=function(t,e,r,i){var o=t.knotsU.length-t.degreeU-2,s=t.knotsV.length-t.degreeV-2,n=t.knotsW.length-t.degreeW-2;return Ot.volumePointGivenNML(t,o,s,n,e,r,i)},Ot.volumePointGivenNML=function(t,e,r,i,o,s,n){if(!Ot.areValidRelations(t.degreeU,t.controlPoints.length,t.knotsU.length)||!Ot.areValidRelations(t.degreeV,t.controlPoints[0].length,t.knotsV.length)||!Ot.areValidRelations(t.degreeW,t.controlPoints[0][0].length,t.knotsW.length))throw new T("Invalid relations between control points and knot vector");for(var a=t.controlPoints,c=t.degreeU,h=t.degreeV,l=t.degreeW,u=t.knotsU,d=t.knotsV,v=t.knotsW,f=a[0][0][0].length,p=Ot.knotSpanGivenN(e,c,o,u),g=Ot.knotSpanGivenN(r,h,s,d),m=Ot.knotSpanGivenN(i,l,n,v),b=Ot.basisFunctionsGivenKnotSpanIndex(p,o,c,u),y=Ot.basisFunctionsGivenKnotSpanIndex(g,s,h,d),P=Ot.basisFunctionsGivenKnotSpanIndex(m,n,l,v),w=p-c,k=Tt.zeros1d(f),C=Tt.zeros1d(f),x=Tt.zeros1d(f),_=0,S=l+1;_<S;){var M=_++;x=Tt.zeros1d(f);for(var W=m-l+M,E=0,D=h+1;E<D;){var O=E++;C=Tt.zeros1d(f);for(var A=g-h+O,I=0,F=c+1;I<F;){var L=I++;Tt.addMulMutate(C,b[L],a[w+L][A][W])}Tt.addMulMutate(x,y[O],C)}Tt.addMulMutate(k,P[M],x)}return k},Ot.derivativeBasisFunctions=function(t,e,r){var i=Ot.knotSpan(e,t,r),o=r.length-1-e-1;return Ot.derivativeBasisFunctionsGivenNI(i,t,e,o,r)},Ot.derivativeBasisFunctionsGivenNI=function(t,e,r,i,o){var s=Tt.zeros2d(r+1,r+1),n=Tt.zeros1d(r+1),a=Tt.zeros1d(r+1),c=0,h=0;s[0][0]=1;for(var l=1,u=r+1;l<u;){var d=l++;n[d]=e-o[t+1-d],a[d]=o[t+d]-e,c=0;for(var v=0;v<d;){var f=v++;s[d][f]=a[f+1]+n[d-f],h=s[f][d-1]/s[d][f],s[f][d]=c+a[f+1]*h,c=n[d-f]*h}s[d][d]=c}for(var p=Tt.zeros2d(i+1,r+1),g=Tt.zeros2d(2,r+1),m=0,b=1,y=0,P=0,w=0,k=0,C=r+1;k<C;){var x=k++;p[0][x]=s[x][r]}for(var _=0,T=r+1;_<T;){var S=_++;m=0,b=1,g[0][0]=1;for(var M=1,W=i+1;M<W;){var E=M++;y=0,P=S-E,w=r-E,S>=E&&(g[b][0]=g[m][0]/s[w+1][P],y=g[b][0]*s[P][w]);for(var D=P>=-1?1:-P,O=1+(S-1<=w?E-1:r-S);D<O;){var A=D++;g[b][A]=(g[m][A]-g[m][A-1])/s[w+1][P+A],y+=g[b][A]*s[P+A][w]}S<=w&&(g[b][E]=-g[m][E-1]/s[w+1][S],y+=g[b][E]*s[S][w]),p[E][S]=y;var I=m;m=b,b=I}}for(var F=r,L=1,B=i+1;L<B;){for(var R=L++,N=0,U=r+1;N<U;){var V=N++;p[R][V]*=F}F*=r-R}return p},Ot.basisFunctions=function(t,e,r){var i=Ot.knotSpan(e,t,r);return Ot.basisFunctionsGivenKnotSpanIndex(i,t,e,r)},Ot.basisFunctionsGivenKnotSpanIndex=function(t,e,r,i){var o=Tt.zeros1d(r+1),s=Tt.zeros1d(r+1),n=Tt.zeros1d(r+1),a=0,c=0;o[0]=1;for(var h=1,l=r+1;h<l;){var u=h++;s[u]=e-i[t+1-u],n[u]=i[t+u]-e,a=0;for(var d=0;d<u;){var v=d++;c=o[v]/(n[v+1]+s[u-v]),o[v]=a+n[v+1]*c,a=s[u-v]*c}o[u]=a}return o},Ot.knotSpan=function(t,e,r){return Ot.knotSpanGivenN(r.length-t-2,t,e,r)},Ot.knotSpanGivenN=function(t,e,r,i){if(r>i[t+1]-j.EPSILON)return t;if(r<i[e]+j.EPSILON)return e;for(var o=e,s=t+1,n=Math.floor((o+s)/2);r<i[n]||r>=i[n+1];)r<i[n]?s=n:o=n,n=Math.floor((o+s)/2);return n},Ot.dehomogenize=function(t){for(var e=[],r=t[t.length-1],i=t.length-1,o=0;o<i;){var s=o++;e.push(t[s]/r)}return e},Ot.rational1d=function(t){var e=t[0].length-1;return t.map((function(t){return t.slice(0,e)}))},Ot.rational2d=function(t){return t.map(Ot.rational1d)},Ot.weight1d=function(t){var e=t[0].length-1;return t.map((function(t){return t[e]}))},Ot.weight2d=function(t){return t.map(Ot.weight1d)},Ot.dehomogenize1d=function(t){return t.map(Ot.dehomogenize)},Ot.dehomogenize2d=function(t){return t.map(Ot.dehomogenize1d)},Ot.homogenize1d=function(t,e){var r,i=t.length,o=t[0].length,s=[],n=0,a=[];r=null!=e?e:Tt.rep(t.length,1);for(var c=0;c<i;){var h=c++,l=[];a=t[h],n=r[h];for(var u=0;u<o;){var d=u++;l.push(a[d]*n)}l.push(n),s.push(l)}return s},Ot.homogenize2d=function(t,e){var r,i=t.length,o=[];if(null!=e)r=e;else{for(var s=[],n=0;n<i;)n++,s.push(Tt.rep(t[0].length,1));r=s}for(var a=0;a<i;){var c=a++;o.push(Ot.homogenize1d(t[c],r[c]))}return o};var At=e.eval.Intersect=function(){};i["verb.eval.Intersect"]=At,At.__name__=["verb","eval","Intersect"],At.surfaces=function(t,e,r){var i=Lt.rationalSurfaceAdaptive(t),o=Lt.rationalSurfaceAdaptive(e);return At.meshes(i,o).map((function(i){return i.map((function(i){return At.surfacesAtPointWithEstimate(t,e,i.uv0,i.uv1,r)}))})).map((function(t){return It.rationalInterpCurve(t.map((function(t){return t.point})),3)}))},At.surfacesAtPointWithEstimate=function(t,e,r,i,o){var s,n,a,c,h,l,u,d,v,f,p,g,m,b=0;do{if(n=(s=Ot.rationalSurfaceDerivatives(t,r[0],r[1],1))[0][0],c=s[1][0],h=s[0][1],a=Tt.normalized(Tt.cross(c,h)),l=Tt.dot(a,n),d=(u=Ot.rationalSurfaceDerivatives(e,i[0],i[1],1))[0][0],f=u[1][0],p=u[0][1],v=Tt.normalized(Tt.cross(f,p)),g=Tt.dot(v,d),(m=Tt.distSquared(n,d))<o*o)break;var y=Tt.normalized(Tt.cross(a,v)),P=Tt.dot(y,n),w=At.threePlanes(a,l,v,g,y,P);if(null==w)throw new T("panic!");var k=Tt.sub(w,n),C=Tt.sub(w,d),x=Tt.cross(c,a),_=Tt.cross(h,a),S=Tt.cross(f,v),M=Tt.cross(p,v),W=Tt.dot(_,k)/Tt.dot(_,c),E=Tt.dot(x,k)/Tt.dot(x,h),D=Tt.dot(M,C)/Tt.dot(M,f),O=Tt.dot(S,C)/Tt.dot(S,p);r=Tt.add([W,E],r),i=Tt.add([D,O],i),b++}while(b<5);return new it(r,i,n,m)},At.meshes=function(t,e,r,i){null==r&&(r=new ft(t)),null==i&&(i=new ft(e));var o=At.boundingBoxTrees(r,i,0),s=N.unique(o.map((function(r){return At.triangles(t,r.item0,e,r.item1)})).filter((function(t){return null!=t})).filter((function(t){return Tt.distSquared(t.min.point,t.max.point)>j.EPSILON})),(function(t,e){var r=Tt.sub(t.min.uv0,e.min.uv0),i=Tt.dot(r,r),o=Tt.sub(t.max.uv0,e.max.uv0),s=Tt.dot(o,o),n=Tt.sub(t.min.uv0,e.max.uv0),a=Tt.dot(n,n),c=Tt.sub(t.max.uv0,e.min.uv0),h=Tt.dot(c,c);return i<j.EPSILON&&s<j.EPSILON||a<j.EPSILON&&h<j.EPSILON}));return At.makeMeshIntersectionPolylines(s)},At.meshSlices=function(t,e,r,i){for(var o=new Pt(t),s=o.boundingBox(),n=s.min[0],a=s.min[1],c=s.max[0],h=s.max[1],l=Tt.span(e,r,i),u=[],d=0;d<l.length;){var v=l[d];++d;var f=new $([[0,1,2],[0,2,3]],[[n,a,v],[c,a,v],[c,h,v],[n,h,v]],null,[[0,0],[1,0],[1,1],[0,1]]);u.push(At.meshes(t,f,o))}return u},At.makeMeshIntersectionPolylines=function(t){if(0==t.length)return[];for(var e=0;e<t.length;){var r=t[e];++e,r.max.opp=r.min,r.min.opp=r.max}for(var i=At.kdTreeFromSegments(t),o=[],s=0;s<t.length;){var n=t[s];++s,o.push(n.min),o.push(n.max)}for(var a=0;a<o.length;){var c=o[a];if(++a,null==c.adj){var h=At.lookupAdjacentSegment(c,i,t.length);null!=h&&null==h.adj&&(c.adj=h,h.adj=c)}}var l=o.filter((function(t){return null==t.adj}));0==l.length&&(l=o);for(var u=[],d=0,v=!1;0!=l.length;){var f=l.pop();if(!f.visited){for(var p=[],g=f;null!=g&&!g.visited&&(g.visited=!0,g.opp.visited=!0,p.push(g),d+=2,(g=g.opp.adj)!=f););p.length>0&&(p.push(p[p.length-1].opp),u.push(p))}if(0==l.length&&o.length>0&&(v||d<o.length)){v=!0;var m=o.pop();l.push(m)}}return u},At.kdTreeFromSegments=function(t){for(var e=[],r=0;r<t.length;){var i=t[r];++r,e.push(new lt(i.min.point,i.min)),e.push(new lt(i.max.point,i.max))}return new ct(e,Tt.distSquared)},At.lookupAdjacentSegment=function(t,e,r){var i=e.nearest(t.point,r,j.EPSILON).filter((function(e){return t!=e.item0.obj})).map((function(t){return t.item0.obj}));return 1==i.length?i[0]:null},At.curveAndSurface=function(t,e,r,i,o){null==r&&(r=.001),null!=i||(i=new vt(t)),null!=o||(o=new gt(e));var s=At.boundingBoxTrees(i,o,r);return N.unique(s.map((function(t){var e=t.item0,i=t.item1,o=(N.first(e.knots)+N.last(e.knots))/2,s=[(N.first(i.knotsU)+N.last(i.knotsU))/2,(N.first(i.knotsV)+N.last(i.knotsV))/2];return At.curveAndSurfaceWithEstimate(e,i,[o].concat(s),r)})).filter((function(t){return Tt.distSquared(t.curvePoint,t.surfacePoint)<r*r})),(function(t,e){return Math.abs(t.u-e.u)<.5*r}))},At.curveAndSurfaceWithEstimate=function(t,e,r,i){null==i&&(i=.001);var o=wt.uncmin((function(r){var i=Ot.rationalCurvePoint(t,r[0]),o=Ot.rationalSurfacePoint(e,r[1],r[2]),s=Tt.sub(i,o);return Tt.dot(s,s)}),r,i*i,(function(r){var i=Ot.rationalCurveDerivatives(t,r[0],1),o=Ot.rationalSurfaceDerivatives(e,r[1],r[2],1),s=Tt.sub(o[0][0],i[0]),n=Tt.mul(-1,i[1]),a=o[1][0],c=o[0][1];return[2*Tt.dot(n,s),2*Tt.dot(a,s),2*Tt.dot(c,s)]})).solution;return new tt(o[0],[o[1],o[2]],Ot.rationalCurvePoint(t,o[0]),Ot.rationalSurfacePoint(e,o[1],o[2]))},At.polylineAndMesh=function(t,e,r){for(var i=At.boundingBoxTrees(new pt(t),new ft(e),r),o=[],s=0;s<i.length;){var n=i[s];++s;var a=n.item0,c=n.item1,h=At.segmentWithTriangle(t.points[a],t.points[a+1],e.points,e.faces[c]);if(null!=h){var l=h.point,u=Tt.lerp(h.p,[t.params[a]],[t.params[a+1]])[0],d=yt.triangleUVFromPoint(e,c,l);o.push(new rt(l,u,d,a,c))}}return o},At.boundingBoxTrees=function(t,e,r){null==r&&(r=1e-9);var i=[],o=[];i.push(t),o.push(e);for(var s=[];i.length>0;){var n=i.pop(),a=o.pop();if(!n.empty()&&!a.empty()&&n.boundingBox().intersects(a.boundingBox(),r)){var c=n.indivisible(r),h=a.indivisible(r);if(c&&h)s.push(new X(n.yield(),a.yield()));else if(!c||h)if(c||!h){var l=n.split(),u=a.split();i.push(l.item1),o.push(u.item1),i.push(l.item1),o.push(u.item0),i.push(l.item0),o.push(u.item1),i.push(l.item0),o.push(u.item0)}else{var d=n.split();i.push(d.item1),o.push(a),i.push(d.item0),o.push(a)}else{var v=a.split();i.push(n),o.push(v.item1),i.push(n),o.push(v.item0)}}}return s},At.curves=function(t,e,r){var i=At.boundingBoxTrees(new vt(t),new vt(e),0);return N.unique(i.map((function(i){return At.curvesWithEstimate(t,e,N.first(i.item0.knots),N.first(i.item1.knots),r)})).filter((function(t){return Tt.distSquared(t.point0,t.point1)<r})),(function(t,e){return Math.abs(t.u0-e.u0)<5*r}))},At.curvesWithEstimate=function(t,e,r,i,o){var s=wt.uncmin((function(r){var i=Ot.rationalCurvePoint(t,r[0]),o=Ot.rationalCurvePoint(e,r[1]),s=Tt.sub(i,o);return Tt.dot(s,s)}),[r,i],o*o,(function(r){var i=Ot.rationalCurveDerivatives(t,r[0],1),o=Ot.rationalCurveDerivatives(e,r[1],1),s=Tt.sub(i[0],o[0]),n=i[1],a=Tt.mul(-1,o[1]);return[2*Tt.dot(n,s),2*Tt.dot(a,s)]})),n=s.solution[0],a=s.solution[1],c=Ot.rationalCurvePoint(t,n),h=Ot.rationalCurvePoint(e,a);return new Q(c,h,n,a)},At.triangles=function(t,e,r,i){var o=t.faces[e],s=r.faces[i],n=yt.getTriangleNorm(t.points,o),a=yt.getTriangleNorm(r.points,s),c=t.points[o[0]],h=r.points[s[0]],l=At.planes(c,n,h,a);if(null==l)return null;var u=At.clipRayInCoplanarTriangle(l,t,e);if(null==u)return null;var d=At.clipRayInCoplanarTriangle(l,r,i);if(null==d)return null;var v=At.mergeTriangleClipIntervals(u,d,t,e,r,i);return null==v?null:new J(new et(v.min.uv0,v.min.uv1,v.min.point,e,i),new et(v.max.uv0,v.max.uv1,v.max.point,e,i))},At.clipRayInCoplanarTriangle=function(t,e,r){for(var i=e.faces[r],o=[e.points[i[0]],e.points[i[1]],e.points[i[2]]],s=[e.uvs[i[0]],e.uvs[i[1]],e.uvs[i[2]]],n=[Tt.sub(s[1],s[0]),Tt.sub(s[2],s[1]),Tt.sub(s[0],s[2])],a=[Tt.sub(o[1],o[0]),Tt.sub(o[2],o[1]),Tt.sub(o[0],o[2])],c=a.map(Tt.normalized),h=a.map(Tt.norm),l=null,u=null,d=0;d<3;){var v=d++,f=o[v],p=c[v],g=At.rays(f,p,t.origin,t.dir);if(null!=g){var m=g.u0,b=g.u1;m<-j.EPSILON||m>h[v]+j.EPSILON||((null==l||b<l.u)&&(l=new st(b,Tt.onRay(t.origin,t.dir,b),Tt.onRay(s[v],n[v],m/h[v]))),(null==u||b>u.u)&&(u=new st(b,Tt.onRay(t.origin,t.dir,b),Tt.onRay(s[v],n[v],m/h[v]))))}}return null==u||null==l?null:new J(l,u)},At.mergeTriangleClipIntervals=function(t,e,r,i,o,s){if(e.min.u>t.max.u+j.EPSILON||t.min.u>e.max.u+j.EPSILON)return null;var n,a;n=t.min.u>e.min.u?new X(t.min,0):new X(e.min,1),a=t.max.u<e.max.u?new X(t.max,0):new X(e.max,1);var c=new J(new et(null,null,n.item0.point,i,s),new et(null,null,a.item0.point,i,s));return 0==n.item1?(c.min.uv0=n.item0.uv,c.min.uv1=yt.triangleUVFromPoint(o,s,n.item0.point)):(c.min.uv0=yt.triangleUVFromPoint(r,i,n.item0.point),c.min.uv1=n.item0.uv),0==a.item1?(c.max.uv0=a.item0.uv,c.max.uv1=yt.triangleUVFromPoint(o,s,a.item0.point)):(c.max.uv0=yt.triangleUVFromPoint(r,i,a.item0.point),c.max.uv1=a.item0.uv),c},At.planes=function(t,e,r,i){var o=Tt.cross(e,i);if(Tt.dot(o,o)<j.EPSILON)return null;var s,n,a,c,h=0,l=Math.abs(o[0]),u=Math.abs(o[1]),d=Math.abs(o[2]);u>l&&(h=1,l=u),d>l&&(h=2,l=d),0==h?(s=e[1],n=e[2],a=i[1],c=i[2]):1==h?(s=e[0],n=e[2],a=i[0],c=i[2]):(s=e[0],n=e[1],a=i[0],c=i[1]);var v=-Tt.dot(t,e),f=-Tt.dot(r,i),p=s*c-n*a,g=(n*f-v*c)/p,m=(v*a-s*f)/p;return new q(0==h?[0,g,m]:1==h?[g,0,m]:[g,m,0],Tt.normalized(o))},At.threePlanes=function(t,e,r,i,o,s){var n=Tt.cross(r,o),a=Tt.dot(t,n);if(Math.abs(a)<j.EPSILON)return null;var c=Tt.sub(Tt.mul(s,r),Tt.mul(i,o)),h=Tt.add(Tt.mul(e,n),Tt.cross(t,c));return Tt.mul(1/a,h)},At.polylines=function(t,e,r){for(var i=At.boundingBoxTrees(new pt(t),new pt(e),r),o=[],s=0;s<i.length;){var n=i[s];++s;var a=n.item0,c=n.item1,h=At.segments(t.points[a],t.points[a+1],e.points[c],e.points[c+1],r);null!=h&&(h.u0=Tt.lerp(h.u0,[t.params[a]],[t.params[a+1]])[0],h.u1=Tt.lerp(h.u1,[e.params[c]],[e.params[c+1]])[0],o.push(h))}return o},At.segments=function(t,e,r,i,o){var s=Tt.sub(e,t),n=Math.sqrt(Tt.dot(s,s)),a=Tt.mul(1/n,s),c=Tt.sub(i,r),h=Math.sqrt(Tt.dot(c,c)),l=Tt.mul(1/h,c),u=At.rays(t,a,r,l);if(null!=u){var d=Math.min(Math.max(0,u.u0/n),1),v=Math.min(Math.max(0,u.u1/h),1),f=Tt.onRay(t,s,d),p=Tt.onRay(r,c,v);if(Tt.distSquared(f,p)<o*o)return new Q(f,p,d,v)}return null},At.rays=function(t,e,r,i){var o=Tt.dot(e,i),s=Tt.dot(e,r),n=Tt.dot(e,t),a=Tt.dot(i,r),c=Tt.dot(i,t),h=Tt.dot(e,e),l=h*Tt.dot(i,i)-o*o;if(Math.abs(l)<j.EPSILON)return null;var u=(o*(s-n)-h*(a-c))/l,d=(s-n+u*o)/h,v=Tt.onRay(t,e,d),f=Tt.onRay(r,i,u);return new Q(v,f,d,u)},At.segmentWithTriangle=function(t,e,r,i){var o=r[i[0]],s=r[i[1]],n=r[i[2]],a=Tt.sub(s,o),c=Tt.sub(n,o),h=Tt.cross(a,c),l=Tt.sub(e,t),u=Tt.sub(t,o),d=-Tt.dot(h,u),v=Tt.dot(h,l);if(Math.abs(v)<j.EPSILON)return null;var f=d/v;if(f<0||f>1)return null;var p=Tt.add(t,Tt.mul(f,l)),g=Tt.dot(a,c),m=Tt.dot(a,a),b=Tt.dot(c,c),y=Tt.sub(p,o),P=Tt.dot(y,a),w=Tt.dot(y,c),k=g*g-m*b;if(Math.abs(k)<j.EPSILON)return null;var C=(g*w-b*P)/k,x=(g*P-m*w)/k;return C>1+j.EPSILON||x>1+j.EPSILON||x<-j.EPSILON||C<-j.EPSILON||C+x>1+j.EPSILON?null:new ot(p,C,x,f)},At.segmentAndPlane=function(t,e,r,i){var o=Tt.dot(i,Tt.sub(e,t));if(Math.abs(o)<j.EPSILON)return null;var s=Tt.dot(i,Tt.sub(r,t))/o;return s>1+j.EPSILON||s<-j.EPSILON?null:{p:s}};var It=e.eval.Make=function(){};i["verb.eval.Make"]=It,It.__name__=["verb","eval","Make"],It.rationalTranslationalSurface=function(t,e){for(var r=Ot.rationalCurvePoint(e,N.first(e.knots)),i=N.first(e.knots),o=N.last(e.knots),s=2*e.controlPoints.length,n=(o-i)/(s-1),a=[],c=0;c<s;){var h=c++,l=Tt.sub(Ot.rationalCurvePoint(e,i+h*n),r),u=Ft.rationalCurveTransform(t,[[1,0,0,l[0]],[0,1,0,l[1]],[0,0,1,l[2]],[0,0,0,1]]);a.push(u)}return It.loftedSurface(a)},It.surfaceBoundaryCurves=function(t){return[It.surfaceIsocurve(t,N.first(t.knotsU),!1),It.surfaceIsocurve(t,N.last(t.knotsU),!1),It.surfaceIsocurve(t,N.first(t.knotsV),!0),It.surfaceIsocurve(t,N.last(t.knotsV),!0)]},It.surfaceIsocurve=function(t,e,r){var i,o;null==r&&(r=!1),i=r?t.knotsV:t.knotsU,o=r?t.degreeV:t.degreeU;for(var s=St.knotMultiplicities(i),n=-1,a=0,c=s.length;a<c;){var h=a++;if(Math.abs(e-s[h].knot)<j.EPSILON){n=h;break}}var l,u=o+1;n>=0&&(u-=s[n].mult),l=u>0?Ft.surfaceKnotRefine(t,Tt.rep(u,e),r):t;var d=Ot.knotSpan(o,e,i);return Math.abs(e-N.first(i))<j.EPSILON?d=0:Math.abs(e-N.last(i))<j.EPSILON&&(d=(r?l.controlPoints[0].length:l.controlPoints.length)-1),r?new G(l.degreeU,l.knotsU,function(t){for(var e=[],r=0,i=l.controlPoints;r<i.length;){var o=i[r];++r,e.push(o[d])}return e}()):new G(l.degreeV,l.knotsV,l.controlPoints[d])},It.loftedSurface=function(t,e){var r=(t=Ft.unifyCurveKnotVectors(t))[0].degree;null==e&&(e=3),e>t.length-1&&(e=t.length-1);for(var i=t[0].knots,o=[],s=[],n=0,a=t[0].controlPoints.length;n<a;){var c=[n++],h=t.map(function(t){return function(e){return e.controlPoints[t[0]]}}(c)),l=It.rationalInterpCurve(h,e,!0);s.push(l.controlPoints),o=l.knots}return new Y(r,e,i,o,s)},It.clonedCurve=function(t){return new G(t.degree,t.knots.slice(),t.controlPoints.map((function(t){return t.slice()})))},It.rationalBezierCurve=function(t,e){for(var r=t.length-1,i=[],o=0,s=r+1;o<s;)o++,i.push(0);for(var n=0,a=r+1;n<a;)n++,i.push(1);return null==e&&(e=Tt.rep(t.length,1)),new G(r,i,Ot.homogenize1d(t,e))},It.fourPointSurface=function(t,e,r,i,o){null==o&&(o=3);for(var s=o,n=[],a=0,c=o+1;a<c;){for(var h=a++,l=[],u=0,d=o+1;u<d;){var v=u++,f=1-h/s,p=Tt.lerp(f,t,e),g=Tt.lerp(f,i,r),m=Tt.lerp(1-v/s,p,g);m.push(1),l.push(m)}n.push(l)}var b=Tt.rep(o+1,0),y=Tt.rep(o+1,1);return new Y(o,o,b.concat(y),b.concat(y),n)},It.ellipseArc=function(t,e,r,i,o){var s=Tt.norm(e),n=Tt.norm(r);e=Tt.normalized(e),r=Tt.normalized(r),o<i&&(o=2*Math.PI+i);var a,c=o-i,h=c/(a=c<=Math.PI/2?1:c<=Math.PI?2:c<=3*Math.PI/2?3:4),l=Math.cos(h/2),u=Tt.add(t,Tt.add(Tt.mul(s*Math.cos(i),e),Tt.mul(n*Math.sin(i),r))),d=Tt.sub(Tt.mul(Math.cos(i),r),Tt.mul(Math.sin(i),e)),v=[],f=Tt.zeros1d(2*a+3),p=0,g=i,m=Tt.zeros1d(2*a);v[0]=u,m[0]=1;for(var b=1,y=a+1;b<y;){var P=b++;g+=h;var w=Tt.add(t,Tt.add(Tt.mul(s*Math.cos(g),e),Tt.mul(n*Math.sin(g),r)));m[p+2]=1,v[p+2]=w;var k=Tt.sub(Tt.mul(Math.cos(g),r),Tt.mul(Math.sin(g),e)),C=At.rays(u,Tt.mul(1/Tt.norm(d),d),w,Tt.mul(1/Tt.norm(k),k)),x=Tt.add(u,Tt.mul(C.u0,d));m[p+1]=l,v[p+1]=x,p+=2,P<a&&(u=w,d=k)}for(var _=2*a+1,T=0;T<3;){var S=T++;f[S]=0,f[S+_]=1}switch(a){case 2:f[3]=f[4]=.5;break;case 3:f[3]=f[4]=.3333333333333333,f[5]=f[6]=.6666666666666666;break;case 4:f[3]=f[4]=.25,f[5]=f[6]=.5,f[7]=f[8]=.75}return new G(2,f,Ot.homogenize1d(v,m))},It.arc=function(t,e,r,i,o,s){return It.ellipseArc(t,Tt.mul(i,Tt.normalized(e)),Tt.mul(i,Tt.normalized(r)),o,s)},It.polyline=function(t){for(var e,r=[0,0],i=0,o=0,s=t.length-1;o<s;){var n=o++;i+=Tt.dist(t[n],t[n+1]),r.push(i)}r.push(i),r=Tt.mul(1/i,r);for(var a=[],c=0,h=t.length;c<h;)c++,a.push(1);return e=a,new G(1,r,Ot.homogenize1d(t.slice(0),e))},It.extrudedSurface=function(t,e,r){for(var i=[[],[],[]],o=[[],[],[]],s=Ot.dehomogenize1d(r.controlPoints),n=Ot.weight1d(r.controlPoints),a=Tt.mul(e,t),c=Tt.mul(.5*e,t),h=0,l=s.length;h<l;){var u=h++;i[2][u]=s[u],i[1][u]=Tt.add(c,s[u]),i[0][u]=Tt.add(a,s[u]),o[0][u]=n[u],o[1][u]=n[u],o[2][u]=n[u]}return new Y(2,r.degree,[0,0,0,1,1,1],r.knots,Ot.homogenize2d(i,o))},It.cylindricalSurface=function(t,e,r,i,o){var s=Tt.cross(t,e),n=(Math.PI,It.arc(r,e,s,o,0,2*Math.PI));return It.extrudedSurface(t,i,n)},It.revolvedSurface=function(t,e,r,i){var o,s,n=Ot.dehomogenize1d(t.controlPoints),a=Ot.weight1d(t.controlPoints);i<=Math.PI/2?(o=1,s=Tt.zeros1d(6+2*(o-1))):i<=Math.PI?(o=2,(s=Tt.zeros1d(6+2*(o-1)))[3]=s[4]=.5):i<=3*Math.PI/2?(o=3,(s=Tt.zeros1d(6+2*(o-1)))[3]=s[4]=.3333333333333333,s[5]=s[6]=.6666666666666666):(o=4,(s=Tt.zeros1d(6+2*(o-1)))[3]=s[4]=.25,s[5]=s[6]=.5,s[7]=s[8]=.75);for(var c=i/o,h=3+2*(o-1),l=0;l<3;){var u=l++;s[u]=0,s[h+u]=1}for(var d=Math.cos(c/2),v=0,f=Tt.zeros1d(o+1),p=Tt.zeros1d(o+1),g=Tt.zeros3d(2*o+1,n.length,3),m=Tt.zeros2d(2*o+1,n.length),b=1,y=o+1;b<y;){var P=b++;v+=c,p[P]=Math.cos(v),f[P]=Math.sin(v)}for(var w=0,k=n.length;w<k;){var C=w++,x=_t.rayClosestPoint(n[C],e,r),_=Tt.sub(n[C],x),T=Tt.norm(_),S=Tt.cross(r,_);T>j.EPSILON&&(_=Tt.mul(1/T,_),S=Tt.mul(1/T,S)),g[0][C]=n[C];var M=n[C];m[0][C]=a[C];for(var W=S,E=0,D=1,O=o+1;D<O;){var A,I=D++;A=0==T?x:Tt.add(x,Tt.add(Tt.mul(T*p[I],_),Tt.mul(T*f[I],S))),g[E+2][C]=A,m[E+2][C]=a[C];var F=Tt.sub(Tt.mul(p[I],S),Tt.mul(f[I],_));if(0==T)g[E+1][C]=x;else{var L=At.rays(M,Tt.mul(1/Tt.norm(W),W),A,Tt.mul(1/Tt.norm(F),F)),B=Tt.add(M,Tt.mul(L.u0,W));g[E+1][C]=B}m[E+1][C]=d*a[C],E+=2,I<o&&(M=A,W=F)}}return new Y(2,t.degree,s,t.knots,Ot.homogenize2d(g,m))},It.sphericalSurface=function(t,e,r,i){var o=It.arc(t,Tt.mul(-1,e),r,i,0,Math.PI);return It.revolvedSurface(o,t,e,2*Math.PI)},It.conicalSurface=function(t,e,r,i,o){var s=2*Math.PI,n=[Tt.add(r,Tt.mul(i,t)),Tt.add(r,Tt.mul(o,e))],a=new G(1,[0,0,1,1],Ot.homogenize1d(n,[1,1]));return It.revolvedSurface(a,r,t,s)},It.rationalInterpCurve=function(t,e,r,i,o){if(null==r&&(r=!1),null==e&&(e=3),t.length<e+1)throw new T("You need to supply at least degree + 1 points! You only supplied "+t.length+" points.");for(var s=[0],n=1,a=t.length;n<a;){var c=n++,h=Tt.norm(Tt.sub(t[c],t[c-1])),l=s[s.length-1];s.push(l+h)}for(var u=s[s.length-1],d=0,v=s.length;d<v;){var f=d++;s[f]=s[f]/u}var p,g,m=Tt.rep(e+1,0),b=null!=i&&null!=o;p=b?0:1,g=b?s.length-e+1:s.length-e;for(var y=p;y<g;){for(var P=y++,w=0,k=0;k<e;)w+=s[P+k++];m.push(1/e*w)}var C,x,_=m.concat(Tt.rep(e+1,1)),S=[];C=b?t.length+1:t.length-1,x=b?t.length-(e-1):t.length-(e+1);for(var M=0;M<s.length;){var W=s[M];++M;var E=Ot.knotSpanGivenN(C,e,W,_),D=Ot.basisFunctionsGivenKnotSpanIndex(E,W,e,_),O=E-e,A=Tt.zeros1d(O),I=Tt.zeros1d(x-O);S.push(A.concat(D).concat(I))}if(b){var F=S[0].length-2,L=[-1,1].concat(Tt.zeros1d(F)),B=Tt.zeros1d(F).concat([-1,1]);N.spliceAndInsert(S,1,0,L),N.spliceAndInsert(S,S.length-1,0,B)}for(var R=t[0].length,U=[],V=(1-_[_.length-e-2])/e,j=_[e+1]/e,z=0;z<R;){var H,q=[z++];if(b){(H=[t[0][q[0]]]).push(j*i[q[0]]);for(var Y=1,$=t.length-1;Y<$;){var Z=Y++;H.push(t[Z][q[0]])}H.push(V*o[q[0]]),H.push(N.last(t)[q[0]])}else H=t.map(function(t){return function(e){return e[t[0]]}}(q));var K=mt.solve(S,H);U.push(K)}var X=mt.transpose(U);if(!r){var J=Tt.rep(X.length,1);X=Ot.homogenize1d(X,J)}return new G(e,_,X)};var Ft=e.eval.Modify=function(){};i["verb.eval.Modify"]=Ft,Ft.__name__=["verb","eval","Modify"],Ft.curveReverse=function(t){return new G(t.degree,Ft.knotsReverse(t.knots),N.reversed(t.controlPoints))},Ft.surfaceReverse=function(t,e){return null==e&&(e=!1),e?new Y(t.degreeU,t.degreeV,t.knotsU,Ft.knotsReverse(t.knotsV),function(e){for(var r=[],i=0,o=t.controlPoints;i<o.length;){var s=o[i];++i,r.push(N.reversed(s))}return r}()):new Y(t.degreeU,t.degreeV,Ft.knotsReverse(t.knotsU),t.knotsV,N.reversed(t.controlPoints))},Ft.knotsReverse=function(t){for(var e=N.first(t),r=(N.last(t),[e]),i=t.length,o=1;o<i;){var s=o++;r.push(r[s-1]+(t[i-s]-t[i-s-1]))}return r},Ft.unifyCurveKnotVectors=function(t){t=t.map(It.clonedCurve);for(var e,r=a.fold(t,(function(t,e){return Ft.imax(t.degree,e)}),0),i=0,o=t.length;i<o;){var s=i++;t[s].degree<r&&(t[s]=Ft.curveElevateDegree(t[s],r))}for(var n=[],c=0;c<t.length;){var h=t[c];++c,n.push(new J(N.first(h.knots),N.last(h.knots)))}e=n;for(var l=0,u=t.length;l<u;){var d=l++,v=[e[d].min];t[d].knots=t[d].knots.map(function(t){return function(e){return e-t[0]}}(v))}for(var f=e.map((function(t){return t.max-t.min})),p=a.fold(f,(function(t,e){return Math.max(t,e)}),0),g=0,m=t.length;g<m;){var b=g++,y=[p/f[b]];t[b].knots=t[b].knots.map(function(t){return function(e){return e*t[0]}}(y))}for(var P=a.fold(t,(function(t,e){return Tt.sortedSetUnion(t.knots,e)}),[]),w=0,k=t.length;w<k;){var C=w++,x=Tt.sortedSetSub(P,t[C].knots);0==x.length&&(t[C]=t[C]),t[C]=Ft.curveKnotRefine(t[C],x)}return t},Ft.imin=function(t,e){return t<e?t:e},Ft.imax=function(t,e){return t>e?t:e},Ft.curveElevateDegree=function(t,e){if(e<=t.degree)return t;var r=t.knots.length-t.degree-2,i=t.degree,o=t.knots,s=t.controlPoints,n=e-t.degree,a=t.controlPoints[0].length,c=Tt.zeros2d(i+n+1,i+1),h=[],l=[],u=[],d=r+i+1,v=e,f=Math.floor(v/2),p=[],g=[];c[0][0]=1,c[v][i]=1;for(var m=1,b=f+1;m<b;)for(var y=m++,P=1/U.get(v,y),w=Ft.imin(i,y),k=Ft.imax(0,y-n),C=w+1;k<C;){var x=k++;c[y][x]=P*U.get(i,x)*U.get(n,y-x)}for(var _=f+1;_<v;)for(var T=_++,S=Ft.imin(i,T),M=Ft.imax(0,T-n),W=S+1;M<W;){var E=M++;c[T][E]=c[v-T][i-E]}var D=v+1,O=-1,A=i,I=i+1,F=1,L=o[0];p[0]=s[0];for(var B=0,R=v+1;B<R;)g[B++]=L;for(var N=0,V=i+1;N<V;){var j=N++;h[j]=s[j]}for(;I<d;){for(var z=I;I<d&&o[I]==o[I+1];)I+=1;var H,q,Y=I-z+1,$=o[I],Z=O;if(O=i-Y,H=Z>0?Math.floor((Z+2)/2):1,q=O>0?Math.floor(v-(O+1)/2):v,O>0){for(var K=$-L,X=[],J=i;J>Y;)X[J-Y-1]=K/(o[A+J]-L),J--;for(var Q=1,tt=O+1;Q<tt;){for(var et=Q++,rt=O-et,it=Y+et,ot=i;ot>=it;)h[ot]=Tt.add(Tt.mul(X[ot-it],h[ot]),Tt.mul(1-X[ot-it],h[ot-1])),ot--;u[rt]=h[i]}}for(var st=H,nt=v+1;st<nt;){var at=st++;l[at]=Tt.zeros1d(a);for(var ct=Ft.imin(i,at),ht=Ft.imax(0,at-n),lt=ct+1;ht<lt;){var ut=ht++;l[at]=Tt.add(l[at],Tt.mul(c[at][ut],h[ut]))}}if(Z>1)for(var dt=D-2,vt=D,ft=$-L,pt=($-g[D-1])/ft,gt=1;gt<Z;){for(var mt=gt++,bt=dt,yt=vt,Pt=yt-D+1;yt-bt>mt;){if(bt<F){var wt=($-g[bt])/(L-g[bt]);p[bt]=Tt.lerp(wt,p[bt],p[bt-1])}if(yt>=H){if(yt-mt<=D-v+Z){var kt=($-g[yt-mt])/ft;l[Pt]=Tt.lerp(kt,l[Pt],l[Pt+1])}}else l[Pt]=Tt.lerp(pt,l[Pt],l[Pt+1]);bt+=1,yt-=1,Pt-=1}dt-=1,vt+=1}if(A!=i)for(var Ct=0,xt=v-Z;Ct<xt;)Ct++,g[D]=L,D+=1;for(var _t=H,St=q+1;_t<St;){var Mt=_t++;p[F]=l[Mt],F+=1}if(I<d){for(var Wt=0;Wt<O;){var Et=Wt++;h[Et]=u[Et]}for(var Dt=O,Ot=i+1;Dt<Ot;){var At=Dt++;h[At]=s[I-i+At]}A=I,I+=1,L=$}else for(var It=0,Lt=v+1;It<Lt;)g[D+It++]=$}return new G(e,g,p)},Ft.rationalSurfaceTransform=function(t,e){for(var r=Ot.dehomogenize2d(t.controlPoints),i=0,o=r.length;i<o;)for(var s=i++,n=0,a=r[s].length;n<a;){var c=n++,h=r[s][c];h.push(1),r[s][c]=mt.dot(e,h).slice(0,h.length-1)}return new Y(t.degreeU,t.degreeV,t.knotsU.slice(),t.knotsV.slice(),Ot.homogenize2d(r,Ot.weight2d(t.controlPoints)))},Ft.rationalCurveTransform=function(t,e){for(var r=Ot.dehomogenize1d(t.controlPoints),i=0,o=r.length;i<o;){var s=i++,n=r[s];n.push(1),r[s]=mt.dot(e,n).slice(0,n.length-1)}return new G(t.degree,t.knots.slice(),Ot.homogenize1d(r,Ot.weight1d(t.controlPoints)))},Ft.surfaceKnotRefine=function(t,e,r){var i,o,s,n=[];r?(s=t.controlPoints,i=t.knotsV,o=t.degreeV):(s=mt.transpose(t.controlPoints),i=t.knotsU,o=t.degreeU);for(var a=null,c=0;c<s.length;){var h=s[c];++c,a=Ft.curveKnotRefine(new G(o,i,h),e),n.push(a.controlPoints)}var l=a.knots;return r?new Y(t.degreeU,t.degreeV,t.knotsU.slice(),l,n):(n=mt.transpose(n),new Y(t.degreeU,t.degreeV,l,t.knotsV.slice(),n))},Ft.decomposeCurveIntoBeziers=function(t){for(var e=t.degree,r=t.controlPoints,i=t.knots,o=St.knotMultiplicities(i),s=e+1,n=0;n<o.length;){var a=o[n];if(++n,a.mult<s){var c=Tt.rep(s-a.mult,a.knot),h=Ft.curveKnotRefine(new G(e,i,r),c);i=h.knots,r=h.controlPoints}}i.length;for(var l=2*s,u=[],d=0;d<r.length;){var v=i.slice(d,d+l),f=r.slice(d,d+s);u.push(new G(e,v,f)),d+=s}return u},Ft.curveKnotRefine=function(t,e){if(0==e.length)return It.clonedCurve(t);for(var r=t.degree,i=t.controlPoints,o=t.knots,s=i.length-1,n=s+r+1,a=e.length-1,c=Ot.knotSpan(r,e[0],o),h=Ot.knotSpan(r,e[a],o),l=[],u=[],d=0,v=c-r+1;d<v;){var f=d++;l[f]=i[f]}for(var p=h-1,g=s+1;p<g;){var m=p++;l[m+a+1]=i[m]}for(var b=0,y=c+1;b<y;){var P=b++;u[P]=o[P]}for(var w=h+r,k=n+1;w<k;){var C=w++;u[C+a+1]=o[C]}for(var x=h+r-1,_=h+r+a,T=a;T>=0;){for(;e[T]<=o[x]&&x>c;)l[_-r-1]=i[x-r-1],u[_]=o[x],_-=1,x-=1;l[_-r-1]=l[_-r];for(var S=1,M=r+1;S<M;){var W=S++,E=_-r+W,D=u[_+W]-e[T];Math.abs(D)<j.EPSILON?l[E-1]=l[E]:(D/=u[_+W]-o[x-r+W],l[E-1]=Tt.add(Tt.mul(D,l[E-1]),Tt.mul(1-D,l[E])))}u[_]=e[T],_-=1,T--}return new G(r,u,l)},Ft.curveKnotInsert=function(t,e,r){for(var i=t.degree,o=t.controlPoints,s=t.knots,n=o.length,a=Ot.knotSpan(i,e,s),c=[],h=[],l=[],u=1,d=a+1;u<d;){var v=u++;h[v]=s[v]}for(var f=1,p=r+1;f<p;)h[a+f++]=e;for(var g=a+1,m=s.length;g<m;){var b=g++;h[b+r]=s[b]}for(var y=0,P=a-i+1;y<P;){var w=y++;l[w]=o[w]}for(var k=a-0;k<n;){var C=k++;l[C+r]=o[C]}for(var x=0,_=i-0+1;x<_;){var T=x++;c[T]=o[a-i+T]}for(var S=0,M=0,W=1,E=r+1;W<E;){var D=W++;S=a-i+D;for(var O=0,A=i-D-0+1;O<A;){var I=O++;M=(e-s[S+I])/(s[I+a+1]-s[S+I]),c[I]=Tt.add(Tt.mul(M,c[I+1]),Tt.mul(1-M,c[I]))}l[S]=c[0],l[a+r-D-0]=c[i-D-0]}for(var F=S+1,L=a-0;F<L;){var B=F++;l[B]=c[B-S]}return new G(i,h,l)};var Lt=e.eval.Tess=function(){};i["verb.eval.Tess"]=Lt,Lt.__name__=["verb","eval","Tess"],Lt.rationalCurveRegularSample=function(t,e,r){return Lt.rationalCurveRegularSampleRange(t,t.knots[0],N.last(t.knots),e,r)},Lt.rationalCurveRegularSampleRange=function(t,e,r,i,o){i<1&&(i=2);for(var s=[],n=(r-e)/(i-1),a=0,c=0;c<i;)a=e+n*c++,o?s.push([a].concat(Ot.rationalCurvePoint(t,a))):s.push(Ot.rationalCurvePoint(t,a));return s},Lt.rationalCurveAdaptiveSample=function(t,e,r){if(null==r&&(r=!1),null==e&&(e=1e-6),1==t.degree){if(r){for(var i=[],o=0,s=t.controlPoints.length;o<s;){var n=o++;i.push([t.knots[n+1]].concat(Ot.dehomogenize(t.controlPoints[n])))}return i}return t.controlPoints.map(Ot.dehomogenize)}return Lt.rationalCurveAdaptiveSampleRange(t,t.knots[0],N.last(t.knots),e,r)},Lt.rationalCurveAdaptiveSampleRange=function(t,e,r,i,o){var s=Ot.rationalCurvePoint(t,e),n=Ot.rationalCurvePoint(t,r),a=e+(r-e)*(.5+.2*Math.random()),c=Ot.rationalCurvePoint(t,a),h=Tt.sub(s,n),l=Tt.sub(s,c);if(Tt.dot(h,h)<i&&Tt.dot(l,l)>i||!_t.threePointsAreFlat(s,c,n,i)){var u=e+.5*(r-e),d=Lt.rationalCurveAdaptiveSampleRange(t,e,u,i,o),v=Lt.rationalCurveAdaptiveSampleRange(t,u,r,i,o);return d.slice(0,-1).concat(v)}return o?[[e].concat(s),[r].concat(n)]:[s,n]},Lt.rationalSurfaceNaive=function(t,e,r){e<1&&(e=1),r<1&&(r=1),t.degreeU,t.degreeV,t.controlPoints;for(var i=t.knotsU,o=t.knotsV,s=(N.last(i)-i[0])/e,n=(N.last(o)-o[0])/r,a=[],c=[],h=[],l=0,u=e+1;l<u;)for(var d=l++,v=0,f=r+1;v<f;){var p=d*s,g=v++*n;c.push([p,g]);var m=Ot.rationalSurfaceDerivatives(t,p,g,1),b=m[0][0];a.push(b);var y=Tt.normalized(Tt.cross(m[1][0],m[0][1]));h.push(y)}for(var P=[],w=0;w<e;)for(var k=w++,C=0;C<r;){var x=C++,_=k*(r+1)+x,T=(k+1)*(r+1)+x,S=T+1,M=[_,T,S],W=[_,S,_+1];P.push(M),P.push(W)}return new $(P,a,h,c)},Lt.divideRationalSurfaceAdaptive=function(t,e){null==e&&(e=new Bt),null!=e.minDivsU?e.minDivsU=e.minDivsU:e.minDivsU=1,null!=e.minDivsV?e.minDivsU=e.minDivsV:e.minDivsU=1,null!=e.refine?e.refine=e.refine:e.refine=!0;var r,i,o=2*(t.controlPoints.length-1),s=2*(t.controlPoints[0].length-1);r=e.minDivsU>o?e.minDivsU=e.minDivsU:e.minDivsU=o,i=e.minDivsV>s?e.minDivsV=e.minDivsV:e.minDivsV=s;for(var n=N.last(t.knotsU),a=t.knotsU[0],c=N.last(t.knotsV),h=t.knotsV[0],l=(n-a)/r,u=(c-h)/i,d=[],v=[],f=0,p=i+1;f<p;){for(var g=f++,m=[],b=0,y=r+1;b<y;){var P=a+l*b++,w=h+u*g,k=Ot.rationalSurfaceDerivatives(t,P,w,1),C=Tt.normalized(Tt.cross(k[0][1],k[1][0]));m.push(new nt(k[0][0],C,[P,w],-1,Tt.isZero(C)))}v.push(m)}for(var x=0;x<i;)for(var _=x++,T=0;T<r;){var S=T++,M=[v[i-_-1][S],v[i-_-1][S+1],v[i-_][S+1],v[i-_][S]];d.push(new Rt(t,M))}if(!e.refine)return d;for(var W=0;W<i;)for(var E=W++,D=0;D<r;){var O=D++,A=E*r+O,I=Lt.north(A,E,O,r,i,d),F=Lt.east(A,E,O,r,i,d),L=Lt.south(A,E,O,r,i,d),B=Lt.west(A,E,O,r,i,d);d[A].neighbors=[L,F,I,B],d[A].divide(e)}return d},Lt.north=function(t,e,r,i,o,s){return 0==e?null:s[t-i]},Lt.south=function(t,e,r,i,o,s){return e==o-1?null:s[t+i]},Lt.east=function(t,e,r,i,o,s){return r==i-1?null:s[t+1]},Lt.west=function(t,e,r,i,o,s){return 0==r?null:s[t-1]},Lt.triangulateAdaptiveRefinementNodeTree=function(t){for(var e=$.empty(),r=0;r<t.length;){var i=t[r];++r,i.triangulate(e)}return e},Lt.rationalSurfaceAdaptive=function(t,e){null!=e||(e=new Bt);var r=Lt.divideRationalSurfaceAdaptive(t,e);return Lt.triangulateAdaptiveRefinementNodeTree(r)};var Bt=e.core.AdaptiveRefinementOptions=function(){this.minDivsV=1,this.minDivsU=1,this.refine=!0,this.maxDepth=10,this.minDepth=0,this.normTol=.025};i["verb.eval.AdaptiveRefinementOptions"]=Bt,Bt.__name__=["verb","eval","AdaptiveRefinementOptions"],Bt.prototype={__class__:Bt};var Rt=e.core.AdaptiveRefinementNode=function(t,e,r){if(this.srf=t,this.neighbors=null==r?[null,null,null,null]:r,this.corners=e,null==this.corners){var i=t.knotsU[0],o=N.last(t.knotsU),s=t.knotsV[0],n=N.last(t.knotsV);this.corners=[nt.fromUv(i,s),nt.fromUv(o,s),nt.fromUv(o,n),nt.fromUv(i,n)]}};i["verb.eval.AdaptiveRefinementNode"]=Rt,Rt.__name__=["verb","eval","AdaptiveRefinementNode"],Rt.prototype={isLeaf:function(){return null==this.children},center:function(){return null!=this.centerPoint?this.centerPoint:this.evalSrf(this.u05,this.v05)},evalCorners:function(){this.u05=(this.corners[0].uv[0]+this.corners[2].uv[0])/2,this.v05=(this.corners[0].uv[1]+this.corners[2].uv[1])/2;for(var t=0;t<4;){var e=t++;if(null==this.corners[e].point){var r=this.corners[e];this.evalSrf(r.uv[0],r.uv[1],r)}}},evalSrf:function(t,e,r){var i=Ot.rationalSurfaceDerivatives(this.srf,t,e,1),o=i[0][0],s=Tt.cross(i[0][1],i[1][0]),n=Tt.isZero(s);return n||(s=Tt.normalized(s)),null!=r?(r.degen=n,r.point=o,r.normal=s,r):new nt(o,s,[t,e],-1,n)},getEdgeCorners:function(t){if(this.isLeaf())return[this.corners[t]];if(this.horizontal)switch(t){case 0:return this.children[0].getEdgeCorners(0);case 1:return this.children[0].getEdgeCorners(1).concat(this.children[1].getEdgeCorners(1));case 2:return this.children[1].getEdgeCorners(2);case 3:return this.children[1].getEdgeCorners(3).concat(this.children[0].getEdgeCorners(3))}switch(t){case 0:return this.children[0].getEdgeCorners(0).concat(this.children[1].getEdgeCorners(0));case 1:return this.children[1].getEdgeCorners(1);case 2:return this.children[1].getEdgeCorners(2).concat(this.children[0].getEdgeCorners(2));case 3:return this.children[0].getEdgeCorners(3)}return null},getAllCorners:function(t){var e=[this.corners[t]];if(null==this.neighbors[t])return e;var r=this.neighbors[t].getEdgeCorners((t+2)%4),i=t%2,o=j.EPSILON,s=this,n=[function(t){return t.uv[0]>s.corners[0].uv[0]+o&&t.uv[0]<s.corners[2].uv[0]-o},function(t){return t.uv[1]>s.corners[0].uv[1]+o&&t.uv[1]<s.corners[2].uv[1]-o}],a=r.filter(n[i]);return a.reverse(),e.concat(a)},midpoint:function(t){if(null==this.midPoints&&(this.midPoints=[null,null,null,null]),null!=this.midPoints[t])return this.midPoints[t];switch(t){case 0:this.midPoints[0]=this.evalSrf(this.u05,this.corners[0].uv[1]);break;case 1:this.midPoints[1]=this.evalSrf(this.corners[1].uv[0],this.v05);break;case 2:this.midPoints[2]=this.evalSrf(this.u05,this.corners[2].uv[1]);break;case 3:this.midPoints[3]=this.evalSrf(this.corners[0].uv[0],this.v05)}return this.midPoints[t]},hasBadNormals:function(){return this.corners[0].degen||this.corners[1].degen||this.corners[2].degen||this.corners[3].degen},fixNormals:function(){for(var t=this.corners.length,e=0;e<t;){var r=e++;if(this.corners[r],this.corners[r].degen){var i=this.corners[(r+1)%t],o=this.corners[(r+3)%t];i.degen?this.corners[r].normal=o.normal:this.corners[r].normal=i.normal}}},shouldDivide:function(t,e){if(e<t.minDepth)return!0;if(e>=t.maxDepth)return!1;if(this.hasBadNormals())return this.fixNormals(),!1;if(this.splitVert=Tt.normSquared(Tt.sub(this.corners[0].normal,this.corners[1].normal))>t.normTol||Tt.normSquared(Tt.sub(this.corners[2].normal,this.corners[3].normal))>t.normTol,this.splitHoriz=Tt.normSquared(Tt.sub(this.corners[1].normal,this.corners[2].normal))>t.normTol||Tt.normSquared(Tt.sub(this.corners[3].normal,this.corners[0].normal))>t.normTol,this.splitVert||this.splitHoriz)return!0;var r=this.center();return Tt.normSquared(Tt.sub(r.normal,this.corners[0].normal))>t.normTol||Tt.normSquared(Tt.sub(r.normal,this.corners[1].normal))>t.normTol||Tt.normSquared(Tt.sub(r.normal,this.corners[2].normal))>t.normTol||Tt.normSquared(Tt.sub(r.normal,this.corners[3].normal))>t.normTol},divide:function(t){null==t&&(t=new Bt),null==t.normTol&&(t.normTol=.085),null==t.minDepth&&(t.minDepth=0),null==t.maxDepth&&(t.maxDepth=10),this._divide(t,0,!0)},_divide:function(t,e,r){if(this.evalCorners(),this.shouldDivide(t,e)){if(e++,this.splitVert&&!this.splitHoriz?r=!1:!this.splitVert&&this.splitHoriz&&(r=!0),this.horizontal=r,this.horizontal){var i=[this.corners[0],this.corners[1],this.midpoint(1),this.midpoint(3)],o=[this.midpoint(3),this.midpoint(1),this.corners[2],this.corners[3]];this.children=[new Rt(this.srf,i),new Rt(this.srf,o)],this.children[0].neighbors=[this.neighbors[0],this.neighbors[1],this.children[1],this.neighbors[3]],this.children[1].neighbors=[this.children[0],this.neighbors[1],this.neighbors[2],this.neighbors[3]]}else{var s=[this.corners[0],this.midpoint(0),this.midpoint(2),this.corners[3]],n=[this.midpoint(0),this.corners[1],this.corners[2],this.midpoint(2)];this.children=[new Rt(this.srf,s),new Rt(this.srf,n)],this.children[0].neighbors=[this.neighbors[0],this.children[1],this.neighbors[2],this.neighbors[3]],this.children[1].neighbors=[this.neighbors[0],this.neighbors[1],this.neighbors[2],this.children[0]]}for(var a=0,c=this.children;a<c.length;){var h=c[a];++a,h._divide(t,e,!r)}}},triangulate:function(t){if(null==t&&(t=$.empty()),this.isLeaf())return this.triangulateLeaf(t);for(var e=0,r=this.children;e<r.length;){var i=r[e];if(++e,null==i)break;i.triangulate(t)}return t},triangulateLeaf:function(t){for(var e=t.points.length,r=[],i=[],o=0,s=0;s<4;){var n=s++,a=this.getAllCorners(n);2==a.length&&(o=n+1);for(var c=0,h=a.length;c<h;){var l=c++;r.push(a[l])}}for(var u=0;u<r.length;){var d=r[u];++u,-1==d.id?(t.uvs.push(d.uv),t.points.push(d.point),t.normals.push(d.normal),d.id=e,i.push(e),e++):i.push(d.id)}if(4==r.length)return t.faces.push([i[0],i[3],i[1]]),t.faces.push([i[3],i[2],i[1]]),t;if(5==r.length){var v=i.length;return t.faces.push([i[o],i[(o+2)%v],i[(o+1)%v]]),t.faces.push([i[(o+4)%v],i[(o+3)%v],i[o]]),t.faces.push([i[o],i[(o+3)%v],i[(o+2)%v]]),t}var f=this.center();t.uvs.push(f.uv),t.points.push(f.point),t.normals.push(f.normal);for(var p=t.points.length-1,g=0,m=r.length-1;g<r.length;)t.faces.push([p,i[g],i[m]]),m=g++;return t},__class__:Rt};var Nt=e.exe.Dispatcher=function(){};i["verb.exe.Dispatcher"]=Nt,Nt.__name__=["verb","exe","Dispatcher"],Nt.init=function(){Nt._init||(Nt._workerPool=new Ut(Nt.THREADS),Nt._init=!0)},Nt.dispatchMethod=function(t,e,r){Nt.init();var i=new O;return Nt._workerPool.addWork(f.getClassName(t),e,r,(function(t){i.resolve(t)})),new A(i)};var Ut=e.exe.WorkerPool=function(t,e){null==e&&(e="verb.js"),null==t&&(t=1),this._callbacks=new y,this._working=new y,this._pool=[],this._queue=[];for(var r=0;r<t;){var i;r++;try{i=new Worker(Ut.basePath+e)}catch(t){t instanceof T&&(t=t.val),i=new Worker(Ut.basePath+e.substring(0,-3)+".min.js")}this._pool.push(i)}};i["verb.exe.WorkerPool"]=Ut,Ut.__name__=["verb","exe","WorkerPool"],Ut.prototype={addWork:function(t,e,r,i){var o=new Vt(t,e,r);this._callbacks.set(o.id,i),this._queue.push(o),this.processQueue()},processQueue:function(){for(var e=this;this._queue.length>0&&this._pool.length>0;){var r=this._queue.shift(),i=[r.id],o=[this._pool.shift()];this._working.h[i[0]]=o[0],o[0].onmessage=function(r,i){return function(o){e._working.remove(i[0]),e._pool.push(r[0]);try{e._callbacks.h.hasOwnProperty(i[0])&&(e._callbacks.h[i[0]](o.data.result),e._callbacks.remove(i[0]))}catch(e){e instanceof T&&(e=e.val),t.log(e)}e.processQueue()}}(o,i),o[0].postMessage(r)}},__class__:Ut};var Vt=function(t,e,r){this.className=t,this.methodName=e,this.args=r,this.id=Vt.uuid++};i["verb.exe._WorkerPool.Work"]=Vt,Vt.__name__=["verb","exe","_WorkerPool","Work"],Vt.prototype={__class__:Vt};var jt=function(){};i["verb.geom.ICurve"]=jt,jt.__name__=["verb","geom","ICurve"],jt.__interfaces__=[Ct],jt.prototype={__class__:jt};var zt=e.geom.NurbsCurve=function(t){this._data=Wt.isValidNurbsCurveData(t)};i["verb.geom.NurbsCurve"]=zt,zt.__name__=["verb","geom","NurbsCurve"],zt.__interfaces__=[jt],zt.byKnotsControlPointsWeights=function(t,e,r,i){return new zt(new G(t,e.slice(),Ot.homogenize1d(r,i)))},zt.byPoints=function(t,e){return null==e&&(e=3),new zt(It.rationalInterpCurve(t,e))},zt.__super__=z,zt.prototype=s(z.prototype,{degree:function(){return this._data.degree},knots:function(){return this._data.knots.slice(0)},controlPoints:function(){return Ot.dehomogenize1d(this._data.controlPoints)},weights:function(){return Ot.weight1d(this._data.controlPoints)},asNurbs:function(){return new G(this.degree(),this.knots(),Ot.homogenize1d(this.controlPoints(),this.weights()))},clone:function(){return new zt(this._data)},domain:function(){return new J(N.first(this._data.knots),N.last(this._data.knots))},transform:function(t){return new zt(Ft.rationalCurveTransform(this._data,t))},transformAsync:function(t){return Nt.dispatchMethod(Ft,"rationalCurveTransform",[this._data,t]).then((function(t){return new zt(t)}))},point:function(t){return Ot.rationalCurvePoint(this._data,t)},pointAsync:function(t){return Nt.dispatchMethod(Ot,"rationalCurvePoint",[this._data,t])},tangent:function(t){return Ot.rationalCurveTangent(this._data,t)},tangentAsync:function(t){return Nt.dispatchMethod(Ot,"rationalCurveTangent",[this._data,t])},derivatives:function(t,e){return null==e&&(e=1),Ot.rationalCurveDerivatives(this._data,t,e)},derivativesAsync:function(t,e){return null==e&&(e=1),Nt.dispatchMethod(Ot,"rationalCurveDerivatives",[this._data,t,e])},closestPoint:function(t){return St.rationalCurveClosestPoint(this._data,t)},closestPointAsync:function(t){return Nt.dispatchMethod(St,"rationalCurveClosestPoint",[this._data,t])},closestParam:function(t){return St.rationalCurveClosestParam(this._data,t)},closestParamAsync:function(t){return Nt.dispatchMethod(St,"rationalCurveClosestParam",[this._data,t])},length:function(){return St.rationalCurveArcLength(this._data)},lengthAsync:function(){return Nt.dispatchMethod(St,"rationalCurveArcLength",[this._data])},lengthAtParam:function(t){return St.rationalCurveArcLength(this._data,t)},lengthAtParamAsync:function(){return Nt.dispatchMethod(St,"rationalCurveArcLength",[this._data])},paramAtLength:function(t,e){return St.rationalCurveParamAtArcLength(this._data,t,e)},paramAtLengthAsync:function(t,e){return Nt.dispatchMethod(St,"rationalCurveParamAtArcLength",[this._data,t,e])},divideByEqualArcLength:function(t){return Et.rationalCurveByEqualArcLength(this._data,t)},divideByEqualArcLengthAsync:function(t){return Nt.dispatchMethod(Et,"rationalCurveByEqualArcLength",[this._data,t])},divideByArcLength:function(t){return Et.rationalCurveByArcLength(this._data,t)},divideByArcLengthAsync:function(t){return Nt.dispatchMethod(Et,"rationalCurveByArcLength",[this._data,t])},split:function(t){return Et.curveSplit(this._data,t).map((function(t){return new zt(t)}))},splitAsync:function(t){return Nt.dispatchMethod(Et,"curveSplit",[this._data,t]).then((function(t){return t.map((function(t){return new zt(t)}))}))},reverse:function(){return new zt(Ft.curveReverse(this._data))},reverseAsync:function(){return Nt.dispatchMethod(Ft,"curveReverse",[this._data]).then((function(t){return new zt(t)}))},tessellate:function(t){return Lt.rationalCurveAdaptiveSample(this._data,t,!1)},tessellateAsync:function(t){return Nt.dispatchMethod(Lt,"rationalCurveAdaptiveSample",[this._data,t,!1])},__class__:zt});var Ht=e.geom.Arc=function(t,e,r,i,o,s){zt.call(this,It.arc(t,e,r,i,o,s)),this._center=t,this._xaxis=e,this._yaxis=r,this._radius=i,this._minAngle=o,this._maxAngle=s};i["verb.geom.Arc"]=Ht,Ht.__name__=["verb","geom","Arc"],Ht.__super__=zt,Ht.prototype=s(zt.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},radius:function(){return this._radius},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:Ht});var qt=e.geom.BezierCurve=function(t,e){zt.call(this,It.rationalBezierCurve(t,e))};i["verb.geom.BezierCurve"]=qt,qt.__name__=["verb","geom","BezierCurve"],qt.__super__=zt,qt.prototype=s(zt.prototype,{__class__:qt});var Gt=e.geom.Circle=function(t,e,r,i){Ht.call(this,t,e,r,i,0,2*Math.PI)};i["verb.geom.Circle"]=Gt,Gt.__name__=["verb","geom","Circle"],Gt.__super__=Ht,Gt.prototype=s(Ht.prototype,{__class__:Gt});var Yt=function(){};i["verb.geom.ISurface"]=Yt,Yt.__name__=["verb","geom","ISurface"],Yt.__interfaces__=[Ct],Yt.prototype={__class__:Yt};var $t=e.geom.NurbsSurface=function(t){this._data=Wt.isValidNurbsSurfaceData(t)};i["verb.geom.NurbsSurface"]=$t,$t.__name__=["verb","geom","NurbsSurface"],$t.__interfaces__=[Yt],$t.byKnotsControlPointsWeights=function(t,e,r,i,o,s){return new $t(new Y(t,e,r,i,Ot.homogenize2d(o,s)))},$t.byCorners=function(t,e,r,i){return new $t(It.fourPointSurface(t,e,r,i))},$t.byLoftingCurves=function(t,e){return new $t(It.loftedSurface(function(e){for(var r=[],i=0;i<t.length;){var o=t[i];++i,r.push(o.asNurbs())}return r}(),e))},$t.__super__=z,$t.prototype=s(z.prototype,{degreeU:function(){return this._data.degreeU},degreeV:function(){return this._data.degreeV},knotsU:function(){return this._data.knotsU.slice(0)},knotsV:function(){return this._data.knotsV.slice(0)},controlPoints:function(){return Ot.dehomogenize2d(this._data.controlPoints)},weights:function(){return Ot.weight2d(this._data.controlPoints)},asNurbs:function(){return new Y(this.degreeU(),this.degreeV(),this.knotsU(),this.knotsV(),Ot.homogenize2d(this.controlPoints(),this.weights()))},clone:function(){return new $t(this.asNurbs())},domainU:function(){return new J(N.first(this._data.knotsU),N.last(this._data.knotsU))},domainV:function(){return new J(N.first(this._data.knotsV),N.last(this._data.knotsV))},point:function(t,e){return Ot.rationalSurfacePoint(this._data,t,e)},pointAsync:function(t,e){return Nt.dispatchMethod(Ot,"rationalSurfacePoint",[this._data,t,e])},normal:function(t,e){return Ot.rationalSurfaceNormal(this._data,t,e)},normalAsync:function(t,e){return Nt.dispatchMethod(Ot,"rationalSurfaceNormal",[this._data,t,e])},derivatives:function(t,e,r){return null==r&&(r=1),Ot.rationalSurfaceDerivatives(this._data,t,e,r)},derivativesAsync:function(t,e,r){return null==r&&(r=1),Nt.dispatchMethod(Ot,"rationalSurfaceDerivatives",[this._data,t,e,r])},closestParam:function(t){return St.rationalSurfaceClosestParam(this._data,t)},closestParamAsync:function(t){return Nt.dispatchMethod(St,"rationalSurfaceClosestParam",[this._data,t])},closestPoint:function(t){return St.rationalSurfaceClosestPoint(this._data,t)},closestPointAsync:function(t){return Nt.dispatchMethod(St,"rationalSurfaceClosestPoint",[this._data,t])},split:function(t,e){return null==e&&(e=!1),Et.surfaceSplit(this._data,t,e).map((function(t){return new $t(t)}))},splitAsync:function(t,e){return null==e&&(e=!1),Nt.dispatchMethod(Et,"surfaceSplit",[this._data,t,e]).then((function(t){return t.map((function(t){return new $t(t)}))}))},reverse:function(t){return null==t&&(t=!1),new $t(Ft.surfaceReverse(this._data,t))},reverseAsync:function(t){return null==t&&(t=!1),Nt.dispatchMethod(Ft,"surfaceReverse",[this._data,t]).then((function(t){return new $t(t)}))},isocurve:function(t,e){return null==e&&(e=!1),new zt(It.surfaceIsocurve(this._data,t,e))},isocurveAsync:function(t,e){return null==e&&(e=!1),Nt.dispatchMethod(It,"surfaceIsocurve",[this._data,t,e]).then((function(t){return new zt(t)}))},boundaries:function(t){return It.surfaceBoundaryCurves(this._data).map((function(t){return new zt(t)}))},boundariesAsync:function(t){return Nt.dispatchMethod(It,"surfaceBoundaryCurves",[this._data]).then((function(t){return t.map((function(t){return new zt(t)}))}))},tessellate:function(t){return Lt.rationalSurfaceAdaptive(this._data,t)},tessellateAsync:function(t){return Nt.dispatchMethod(Lt,"rationalSurfaceAdaptive",[this._data,t])},transform:function(t){return new $t(Ft.rationalSurfaceTransform(this._data,t))},transformAsync:function(t){return Nt.dispatchMethod(Ft,"rationalSurfaceTransform",[this._data,t]).then((function(t){return new $t(t)}))},__class__:$t});var Zt=e.geom.ConicalSurface=function(t,e,r,i,o){$t.call(this,It.conicalSurface(t,e,r,i,o)),this._axis=t,this._xaxis=e,this._base=r,this._height=i,this._radius=o};i["verb.geom.ConicalSurface"]=Zt,Zt.__name__=["verb","geom","ConicalSurface"],Zt.__super__=$t,Zt.prototype=s($t.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:Zt});var Kt=e.geom.CylindricalSurface=function(t,e,r,i,o){$t.call(this,It.cylindricalSurface(t,e,r,i,o)),this._axis=t,this._xaxis=e,this._base=r,this._height=i,this._radius=o};i["verb.geom.CylindricalSurface"]=Kt,Kt.__name__=["verb","geom","CylindricalSurface"],Kt.__super__=$t,Kt.prototype=s($t.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:Kt});var Xt=e.geom.EllipseArc=function(t,e,r,i,o){zt.call(this,It.ellipseArc(t,e,r,i,o)),this._center=t,this._xaxis=e,this._yaxis=r,this._minAngle=i,this._maxAngle=o};i["verb.geom.EllipseArc"]=Xt,Xt.__name__=["verb","geom","EllipseArc"],Xt.__super__=zt,Xt.prototype=s(zt.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:Xt});var Jt=e.geom.Ellipse=function(t,e,r){Xt.call(this,t,e,r,0,2*Math.PI)};i["verb.geom.Ellipse"]=Jt,Jt.__name__=["verb","geom","Ellipse"],Jt.__super__=Xt,Jt.prototype=s(Xt.prototype,{__class__:Jt});var Qt=e.geom.ExtrudedSurface=function(t,e){$t.call(this,It.extrudedSurface(Tt.normalized(e),Tt.norm(e),t.asNurbs())),this._profile=t,this._direction=e};i["verb.geom.ExtrudedSurface"]=Qt,Qt.__name__=["verb","geom","ExtrudedSurface"],Qt.__super__=$t,Qt.prototype=s($t.prototype,{profile:function(){return this._profile},direction:function(){return this._direction},__class__:Qt});var te=e.geom.Intersect=function(){};i["verb.geom.Intersect"]=te,te.__name__=["verb","geom","Intersect"],te.curves=function(t,e,r){return null==r&&(r=.001),At.curves(t.asNurbs(),e.asNurbs(),r)},te.curvesAsync=function(t,e,r){return null==r&&(r=.001),Nt.dispatchMethod(At,"curves",[t.asNurbs(),e.asNurbs(),r])},te.curveAndSurface=function(t,e,r){return null==r&&(r=.001),At.curveAndSurface(t.asNurbs(),e.asNurbs(),r)},te.curveAndSurfaceAsync=function(t,e,r){return null==r&&(r=.001),Nt.dispatchMethod(At,"curveAndSurface",[t.asNurbs(),e.asNurbs(),r])},te.surfaces=function(t,e,r){return null==r&&(r=.001),At.surfaces(t.asNurbs(),e.asNurbs(),r).map((function(t){return new zt(t)}))},te.surfacesAsync=function(t,e,r){return null==r&&(r=.001),Nt.dispatchMethod(At,"surfaces",[t.asNurbs(),e.asNurbs(),r]).then((function(t){return t.map((function(t){return new zt(t)}))}))};var ee=e.geom.Line=function(t,e){zt.call(this,It.polyline([t,e])),this._start=t,this._end=e};i["verb.geom.Line"]=ee,ee.__name__=["verb","geom","Line"],ee.__super__=zt,ee.prototype=s(zt.prototype,{start:function(){return this._start},end:function(){return this._end},__class__:ee});var re=e.geom.RevolvedSurface=function(t,e,r,i){$t.call(this,It.revolvedSurface(t.asNurbs(),e,r,i)),this._profile=t,this._center=e,this._axis=r,this._angle=i};i["verb.geom.RevolvedSurface"]=re,re.__name__=["verb","geom","RevolvedSurface"],re.__super__=$t,re.prototype=s($t.prototype,{profile:function(){return this._profile},center:function(){return this._center},axis:function(){return this._center},angle:function(){return this._angle},__class__:re});var ie=e.geom.SphericalSurface=function(t,e){$t.call(this,It.sphericalSurface(t,[0,0,1],[1,0,0],e)),this._center=t,this._radius=e};i["verb.geom.SphericalSurface"]=ie,ie.__name__=["verb","geom","SphericalSurface"],ie.__super__=$t,ie.prototype=s($t.prototype,{center:function(){return this._center},radius:function(){return this._radius},__class__:ie});var oe=e.geom.SweptSurface=function(t,e){$t.call(this,It.rationalTranslationalSurface(t.asNurbs(),e.asNurbs())),this._profile=t,this._rail=e};function se(t){return t instanceof Array?function(){return n.iter(t)}:"function"==typeof t.iterator?ce(t,t.iterator):t.iterator}i["verb.geom.SweptSurface"]=oe,oe.__name__=["verb","geom","SweptSurface"],oe.__super__=$t,oe.prototype=s($t.prototype,{profile:function(){return this._profile},rail:function(){return this._rail},__class__:oe});var ne,ae=0;function ce(t,e){return null==e?null:(null==e.__id__&&(e.__id__=ae++),null==t.hx__closures__?t.hx__closures__={}:r=t.hx__closures__[e.__id__],null==r&&(r=function(){return r.method.apply(r.scope,arguments)},r.scope=t,r.method=e,t.hx__closures__[e.__id__]=r),r);var r}i.Math=Math,String.prototype.__class__=i.String=String,String.__name__=["String"],i.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=i.Date=Date,Date.__name__=["Date"];var he=i.Int={__name__:["Int"]},le=i.Dynamic={__name__:["Dynamic"]},ue=i.Float=Number;ue.__name__=["Float"];var de=i.Bool=Boolean;de.__ename__=["Bool"];var ve=i.Class={__name__:["Class"]},fe={};null==Array.prototype.map&&(Array.prototype.map=function(t){for(var e=[],r=0,i=this.length;r<i;){var o=r++;e[o]=t(this[o])}return e}),null==Array.prototype.filter&&(Array.prototype.filter=function(t){for(var e=[],r=0,i=this.length;r<i;){var o=this[r++];t(o)&&e.push(o)}return e});var pe={},ge=r.ArrayBuffer||M;null==ge.prototype.slice&&(ge.prototype.slice=M.sliceImpl),r.DataView;var me=r.Uint8Array||E._new;!function(t,e){if(!t.setImmediate){var r,i=1,o={},s=!1,n=t.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(t);a=a&&a.setTimeout?a:t,"[object process]"==={}.toString.call(t.process)?r=function(){var t=d(arguments);return process.nextTick(v(f,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?(l="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(l)&&f(+e.data.slice(l.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),r=function(){var e=d(arguments);return t.postMessage(l+e,"*"),e}):t.MessageChannel?((h=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(){var t=d(arguments);return h.port2.postMessage(t),t}):n&&"onreadystatechange"in n.createElement("script")?(c=n.documentElement,r=function(){var t=d(arguments),e=n.createElement("script");return e.onreadystatechange=function(){f(t),e.onreadystatechange=null,c.removeChild(e),e=null},c.appendChild(e),t}):r=function(){var t=d(arguments);return setTimeout(v(f,t),0),t},a.setImmediate=r,a.clearImmediate=p}var c,h,l,u;function d(t){return o[i]=v.apply(e,t),i++}function v(t){var r=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,r):new Function(""+t)()}}function f(t){if(s)setTimeout(v(f,t),0);else{var e=o[t];if(e){s=!0;try{e()}finally{p(t),s=!1}}}}function p(t){delete o[t]}}(new Function("return this")()),m.USE_CACHE=!1,m.USE_ENUM_INDEX=!1,m.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",b.DEFAULT_RESOLVER=f,b.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",P.count=0,_.i64tmp=new g(0,0),S.__toStr={}.toString,E.BYTES_PER_ELEMENT=1,L.queue=new c,U.memo=new y,j.TOLERANCE=1e-6,j.EPSILON=1e-10,j.VERSION="2.0.0",St.Tvalues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],St.Cvalues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Nt.THREADS=1,Nt._init=!1,Ut.basePath="",Vt.uuid=0,R.main()}("undefined"!=typeof console?console:{log:function(){}},t,void 0!==o?o:void 0!==e?e:"undefined"!=typeof self?self:this),t}()},574:e=>{"use strict";e.exports=t},725:()=>{},439:()=>{},699:()=>{}},r={};function i(t){var o=r[t];if(void 0!==o)return o.exports;var s=r[t]={exports:{}};return e[t](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{"use strict";i.r(o),i.d(o,{Runner:()=>pa,fontsEnum:()=>ca,getRunnerInstance:()=>fa});var t={};i.r(t),i.d(t,{LodDto:()=>Ji,lodEnum:()=>Vi});var e={};i.r(e),i.d(e,{Part:()=>Qi});var r={};i.r(r),i.d(r,{SerenitySwirlData:()=>eo,SerenitySwirlDto:()=>to});var s={};i.r(s),i.d(s,{ArabicArchwayData:()=>oo,ArabicArchwayDrawingPart:()=>so,ArabicArchwayDrawingPartShapes:()=>no,ArabicArchwayDto:()=>io,ArabicArchwayDtoBase:()=>ro});var n={};i.r(n),i.d(n,{ArabicArchway:()=>s,SerenitySwirl:()=>r});var a={};i.r(a),i.d(a,{EternalLoveData:()=>ho,EternalLoveDto:()=>co,EternalLoveDtoBase:()=>ao});var c={};i.r(c),i.d(c,{EternalLove:()=>a});var h={};i.r(h),i.d(h,{CalmCupData:()=>vo,CalmCupDto:()=>uo,CalmCupDtoBase:()=>lo});var l={};i.r(l),i.d(l,{DragonCupData:()=>go,DragonCupDto:()=>po,DragonCupDtoBase:()=>fo,DragonCupModelDto:()=>mo});var u={};i.r(u),i.d(u,{CalmCup:()=>h,DragonCup:()=>l});var d={};i.r(d),i.d(d,{PhoneNestData:()=>Po,PhoneNestDrawDto:()=>_o,PhoneNestDrawingPart:()=>wo,PhoneNestDrawingPartShapes:()=>ko,PhoneNestDto:()=>yo,PhoneNestDtoBase:()=>bo,PhoneNestMainPart:()=>Co,PhoneNestModelDto:()=>xo});var v={};i.r(v),i.d(v,{PhoneNest:()=>d});var f={};i.r(f),i.d(f,{SpicyBoxData:()=>Mo,SpicyBoxDto:()=>So,SpicyBoxDtoBase:()=>To,SpicyBoxModelDto:()=>Wo});var p={};i.r(p),i.d(p,{SpicyBox:()=>f});var g={};i.r(g),i.d(g,{Boxes:()=>p,Cups:()=>u,Desktop:()=>v,Medals:()=>c,Vases:()=>n});var m={};i.r(m),i.d(m,{DropletsPhoneHolderData:()=>Fo,DropletsPhoneHolderDrawingPart:()=>Lo,DropletsPhoneHolderDrawingPartShapes:()=>Bo,DropletsPhoneHolderDto:()=>Do,DropletsPhoneHolderDtoBase:()=>Eo,DropletsPhoneHolderModelDto:()=>Oo,DropletsPhoneHolderModelDxfDto:()=>Ao,DropletsPhoneHolderModelStepDto:()=>Io});var b={};i.r(b),i.d(b,{DropletsPhoneHolder:()=>m});var y={};i.r(y),i.d(y,{Gadgets:()=>b});var P={};i.r(P),i.d(P,{ZenHideoutData:()=>Uo,ZenHideoutDrawingPart:()=>Vo,ZenHideoutDrawingPartShapes:()=>jo,ZenHideoutDto:()=>No,ZenHideoutDtoBase:()=>Ro});var w={};i.r(w),i.d(w,{ZenHideout:()=>P});var k={};i.r(k),i.d(k,{BeamPart:()=>Qo,CeilingPart:()=>cs,ColumnPart:()=>Jo,CornerEntranceDto:()=>ls,CornerEntrancePart:()=>ss,CornerPart:()=>Xo,CornerStairDto:()=>is,CornerStairPart:()=>os,FloorPart:()=>hs,Houses:()=>w,RoofBeamsPart:()=>es,RoofCoverOneSidedDto:()=>ns,RoofCoverPart:()=>as,RoofPanelPart:()=>rs,RoofPart:()=>ts,SandwitchPanelDto:()=>Yo,SandwitchPanelFlexDto:()=>$o,SandwitchPart:()=>Zo,SandwitchPartFlex:()=>Ko,WindowCornerDto:()=>zo,WindowCornerPart:()=>Go,WindowRectangularDto:()=>Ho,WindowRectangularPart:()=>qo});var C={};i.r(C),i.d(C,{WingtipVillaData:()=>ds,WingtipVillaDto:()=>us});var x={};i.r(x),i.d(x,{ChirpyChaletData:()=>fs,ChirpyChaletDto:()=>vs});var _={};i.r(_),i.d(_,{ChirpyChalet:()=>x,WingtipVilla:()=>C});var T={};i.r(T),i.d(T,{BirdHouses:()=>_});var S={};i.r(S),i.d(S,{SnakeChairData:()=>ms,SnakeChairDrawDto:()=>ks,SnakeChairDrawingPart:()=>bs,SnakeChairDrawingPartShapes:()=>ys,SnakeChairDto:()=>gs,SnakeChairDtoBase:()=>ps,SnakeChairMainPart:()=>Ps,SnakeChairModelDto:()=>ws});var M={};i.r(M),i.d(M,{SnakeChair:()=>S});var W={};i.r(W),i.d(W,{ElegantTableData:()=>_s,ElegantTableDrawDto:()=>Os,ElegantTableDrawingPart:()=>Ts,ElegantTableDrawingPartShapes:()=>Ss,ElegantTableDto:()=>xs,ElegantTableDtoBase:()=>Cs,ElegantTableLegByIndexDto:()=>Es,ElegantTableLegPart:()=>Ms,ElegantTableModelDto:()=>Ds,ElegantTableTopPart:()=>Ws});var E={};i.r(E),i.d(E,{GoodCoffeeTableData:()=>Fs,GoodCoffeeTableDrawDto:()=>zs,GoodCoffeeTableDrawingPart:()=>Ls,GoodCoffeeTableDrawingPartShapes:()=>Bs,GoodCoffeeTableDto:()=>Is,GoodCoffeeTableDtoBase:()=>As,GoodCoffeeTableLegByIndexDto:()=>Vs,GoodCoffeeTableLegPart:()=>Rs,GoodCoffeeTableModelDto:()=>js,GoodCoffeeTableShelfPart:()=>Ns,GoodCoffeeTableTopPart:()=>Us});var D={};i.r(D),i.d(D,{SnakeTableData:()=>Gs,SnakeTableDrawDto:()=>Xs,SnakeTableDrawingPart:()=>Ys,SnakeTableDrawingPartShapes:()=>$s,SnakeTableDto:()=>qs,SnakeTableDtoBase:()=>Hs,SnakeTableMainPart:()=>Zs,SnakeTableModelDto:()=>Ks});var O={};i.r(O),i.d(O,{ElegantTable:()=>W,GoodCoffeeTable:()=>E,SnakeTable:()=>D});var A={};i.r(A),i.d(A,{Chairs:()=>M,Tables:()=>O});var I={};i.r(I),i.d(I,{Architecture:()=>k,Enums:()=>t,Furniture:()=>A,KidsCorner:()=>T,LaserCutting:()=>y,Shared:()=>e,ThreeDPrinting:()=>g});var F={};i.r(F),i.d(F,{FontDefinition:()=>cn,Text3DData:()=>nn,Text3DDto:()=>Qs,Text3DFaceDefinitionDto:()=>ln,Text3DFaceDefinitionUrlDto:()=>un,Text3DFaceDefinitionUrlParsedDto:()=>dn,Text3DFaceDto:()=>rn,Text3DFaceUrlDto:()=>on,Text3DFaceUrlParsedDto:()=>sn,Text3DLetterByIndexDto:()=>an,Text3DModelDto:()=>hn,Text3DUrlDto:()=>tn,Text3DUrlParsedDto:()=>en,Texts3DFaceDto:()=>vn,Texts3DFaceUrlDto:()=>fn,Texts3DFaceUrlParsedDto:()=>pn,faceTextVarEnum:()=>Hi,faceTypeEnum:()=>qi,fontVariantsEnum:()=>zi,fontsEnum:()=>ji,fontsModel:()=>Js,recAlignmentEnum:()=>Gi});var L={};i.r(L),i.d(L,{PyramidSimpeByIndexDto:()=>yn,PyramidSimpleAffectorsDto:()=>mn,PyramidSimpleCellPart:()=>Mn,PyramidSimpleData:()=>bn,PyramidSimpleDto:()=>gn,PyramidSimpleFacePart:()=>Wn,PyramidSimpleModelCellDto:()=>Cn,PyramidSimpleModelCellsDto:()=>wn,PyramidSimpleModelCellsIndexDto:()=>kn,PyramidSimpleModelDto:()=>Pn,PyramidSimpleModelFaceCellIndexDto:()=>_n,PyramidSimpleModelFaceCellsUIndexDto:()=>Tn,PyramidSimpleModelFaceCellsVIndexDto:()=>Sn,PyramidSimpleModelFaceIndexDto:()=>xn});var B={};i.r(B),i.d(B,{PyramidSimple:()=>L});var R={};i.r(R),i.d(R,{FacePatterns:()=>B});var N={};i.r(N),i.d(N,{outputShapeEnum:()=>En});var U={};i.r(U),i.d(U,{Enums:()=>N,Patterns:()=>R,Text3D:()=>F});var V={};i.r(V),i.d(V,{VectorCharData:()=>Un,VectorTextData:()=>Vn});var j={};i.r(j),i.d(j,{HexGridData:()=>jn});var z={};i.r(z),i.d(z,{ObjectDefinition:()=>Hn,ShapeWithId:()=>zn,TextWiresCharShapePart:()=>Gn,TextWiresDataDto:()=>qn});var H={};i.r(H),i.d(H,{OCCT:()=>z,Point:()=>j,Text:()=>V,renderableModels:()=>In});var q={};i.r(q),i.d(q,{Asset:()=>Ne,Base:()=>yr,CSV:()=>Ue,Color:()=>ee,Dates:()=>ce,Draw:()=>Pr,IO:()=>de,JSCAD:()=>qe,JSON:()=>Ve,Line:()=>he,Lists:()=>re,Logic:()=>ie,Manifold:()=>Ge,Math:()=>oe,Mesh:()=>ue,OCCT:()=>Qt,PlayCanvasCamera:()=>wr,Point:()=>se,Polyline:()=>le,Tag:()=>je,Text:()=>ne,Time:()=>ze,Transforms:()=>ae,Vector:()=>ve,Verb:()=>He});var G=i(574);class Y{constructor(t){this.occWorkerManager=t}makeCompound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.compound.makeCompound",t)}getShapesOfCompound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.compound.getShapesOfCompound",t)}}class ${constructor(t){this.occWorkerManager=t}fromBaseLine(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseLine",t)}fromBaseLines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseLines",t)}fromBaseSegment(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseSegment",t)}fromBaseSegments(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseSegments",t)}fromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromPoints",t)}fromBasePolyline(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBasePolyline",t)}fromBaseTriangle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseTriangle",t)}fromBaseMesh(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseMesh",t)}line(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.line",t)}arcThroughThreePoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcThroughThreePoints",t)}arcThroughTwoPointsAndTangent(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcThroughTwoPointsAndTangent",t)}arcFromCircleAndTwoPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCircleAndTwoPoints",t)}arcFromCircleAndTwoAngles(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCircleAndTwoAngles",t)}arcFromCirclePointAndAngle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCirclePointAndAngle",t)}createCircleEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.createCircleEdge",t)}createEllipseEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.createEllipseEdge",t)}removeInternalEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.removeInternalEdges",t)}makeEdgeFromGeom2dCurveAndSurface(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.makeEdgeFromGeom2dCurveAndSurface",t)}getEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdge",t)}getEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdges",t)}getEdgesAlongWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesAlongWire",t)}getCircularEdgesAlongWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgesAlongWire",t)}getLinearEdgesAlongWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getLinearEdgesAlongWire",t)}getCornerPointsOfEdgesForShape(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCornerPointsOfEdgesForShape",t)}getEdgeLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeLength",t)}getEdgeLengthsOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeLengthsOfShape",t)}getEdgesLengths(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesLengths",t)}getEdgeCenterOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeCenterOfMass",t)}getEdgesCentersOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesCentersOfMass",t)}getCircularEdgeCenterPoint(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgeCenterPoint",t)}getCircularEdgeRadius(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgeRadius",t)}getCircularEdgePlaneDirection(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgePlaneDirection",t)}pointOnEdgeAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointOnEdgeAtParam",t)}pointsOnEdgesAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointsOnEdgesAtParam",t)}edgesToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.edgesToPoints",t)}reversedEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.reversedEdge",t)}tangentOnEdgeAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentOnEdgeAtParam",t)}tangentsOnEdgesAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentsOnEdgesAtParam",t)}pointOnEdgeAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointOnEdgeAtLength",t)}pointsOnEdgesAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointsOnEdgesAtLength",t)}tangentOnEdgeAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentOnEdgeAtLength",t)}tangentsOnEdgesAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentsOnEdgesAtLength",t)}startPointOnEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.startPointOnEdge",t)}startPointsOnEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.startPointsOnEdges",t)}endPointOnEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.endPointOnEdge",t)}endPointsOnEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.endPointsOnEdges",t)}divideEdgeByParamsToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgeByParamsToPoints",t)}divideEdgesByParamsToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgesByParamsToPoints",t)}divideEdgeByEqualDistanceToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgeByEqualDistanceToPoints",t)}divideEdgesByEqualDistanceToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgesByEqualDistanceToPoints",t)}constraintTanLinesFromTwoPtsToCircle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesFromTwoPtsToCircle",t)}constraintTanLinesFromPtToCircle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesFromPtToCircle",t)}constraintTanLinesOnTwoCircles(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesOnTwoCircles",t)}constraintTanCirclesOnTwoCircles(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanCirclesOnTwoCircles",t)}constraintTanCirclesOnCircleAndPnt(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanCirclesOnCircleAndPnt",t)}isEdgeLinear(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.isEdgeLinear",t)}isEdgeCircular(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.isEdgeCircular",t)}}class Z{constructor(t){this.occWorkerManager=t}fromBaseTriangle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.fromBaseTriangle",t)}fromBaseMesh(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.fromBaseMesh",t)}createFacesFromWiresOnFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFacesFromWiresOnFace",t)}createFaceFromWireOnFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWireOnFace",t)}createFaceFromWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWire",t)}createFaceFromWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWires",t)}createFaceFromWiresOnFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWiresOnFace",t)}createFacesFromWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFacesFromWires",t)}createFaceFromMultipleCircleTanWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromMultipleCircleTanWires",t)}createFaceFromMultipleCircleTanWireCollections(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromMultipleCircleTanWireCollections",t)}faceFromSurface(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.faceFromSurface",t)}faceFromSurfaceAndWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.faceFromSurfaceAndWire",t)}createPolygonFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createPolygonFace",t)}createCircleFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createCircleFace",t)}hexagonsInGrid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.hexagonsInGrid",t)}createEllipseFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createEllipseFace",t)}createSquareFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createSquareFace",t)}createRectangleFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createRectangleFace",t)}createLPolygonFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createLPolygonFace",t)}createStarFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createStarFace",t)}createChristmasTreeFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createChristmasTreeFace",t)}createParallelogramFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createParallelogramFace",t)}createHeartFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createHeartFace",t)}createNGonFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createNGonFace",t)}createIBeamProfileFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createIBeamProfileFace",t)}createHBeamProfileFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createHBeamProfileFace",t)}createTBeamProfileFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createTBeamProfileFace",t)}createUBeamProfileFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createUBeamProfileFace",t)}getFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFace",t)}getFaces(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaces",t)}reversedFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.reversedFace",t)}subdivideToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPoints",t)}subdivideToWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToWires",t)}subdivideToRectangleWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToRectangleWires",t)}subdivideToRectangleHoles(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToRectangleHoles",t)}subdivideToHexagonWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToHexagonWires",t)}subdivideToHexagonHoles(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToHexagonHoles",t)}subdivideToPointsControlled(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPointsControlled",t)}subdivideToNormals(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToNormals",t)}subdivideToUV(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToUV",t)}pointOnUV(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.pointOnUV",t)}normalOnUV(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.normalOnUV",t)}pointsOnUVs(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.pointsOnUVs",t)}normalsOnUVs(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.normalsOnUVs",t)}subdivideToPointsOnParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPointsOnParam",t)}wireAlongParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.wireAlongParam",t)}wiresAlongParams(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.wiresAlongParams",t)}getUMinBound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getUMinBound",t)}getUMaxBound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getUMaxBound",t)}getVMinBound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getVMinBound",t)}getVMaxBound(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getVMaxBound",t)}getFaceArea(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaceArea",t)}getFacesAreas(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFacesAreas",t)}getFaceCenterOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaceCenterOfMass",t)}getFacesCentersOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFacesCentersOfMass",t)}filterFacePoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.filterFacePoints",t)}filterFacesPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.filterFacesPoints",t)}}class K{constructor(t){this.occWorkerManager=t}fromClosedShell(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.fromClosedShell",t)}createBox(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createBox",t)}createCube(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCube",t)}createBoxFromCorner(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createBoxFromCorner",t)}createCylinder(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCylinder",t)}createCylindersOnLines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCylindersOnLines",t)}createSphere(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createSphere",t)}createCone(t){return t.angle=t.angle*(Math.PI/180),this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCone",t)}createStarSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createStarSolid",t)}createNGonSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createNGonSolid",t)}createParallelogramSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createParallelogramSolid",t)}createHeartSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createHeartSolid",t)}createChristmasTreeSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createChristmasTreeSolid",t)}createLPolygonSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createLPolygonSolid",t)}createIBeamProfileSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createIBeamProfileSolid",t)}createHBeamProfileSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createHBeamProfileSolid",t)}createTBeamProfileSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createTBeamProfileSolid",t)}createUBeamProfileSolid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createUBeamProfileSolid",t)}getSolidSurfaceArea(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidSurfaceArea",t)}getSolidVolume(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidVolume",t)}getSolidsVolumes(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidsVolumes",t)}getSolidCenterOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidCenterOfMass",t)}getSolidsCentersOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidsCentersOfMass",t)}getSolids(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolids",t)}filterSolidPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.filterSolidPoints",t)}}class X{static parse(t,e){var r;const i=[t],o=new Set;for(;i.length>0;){const t=i.pop();if("object"==typeof t&&null!==t&&!o.has(t))if(o.add(t),Array.isArray(t))for(let e=0;e<t.length;e++)i.push(t[e]);else{if(Object.keys(t).includes("shapes")){const i=t.shapes;if("object"==typeof i&&null!==i)for(const o in i)t.shapes[o]&&(t.shapes[o]=null===(r=e.find((e=>e.id===t.shapes[o])))||void 0===r?void 0:r.shape)}for(const e in t)i.push(t[e])}}return t}}class J{constructor(t){this.occWorkerManager=t}fromBaseLine(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseLine",t)}fromBaseLines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseLines",t)}fromBaseSegment(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseSegment",t)}fromBaseSegments(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseSegments",t)}fromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromPoints",t)}fromBasePolyline(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBasePolyline",t)}fromBaseTriangle(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseTriangle",t)}fromBaseMesh(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseMesh",t)}createPolygonWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolygonWire",t)}createPolygons(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolygons",t)}createLineWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLineWire",t)}createLineWireWithExtensions(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLineWireWithExtensions",t)}createLines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLines",t)}splitOnPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.splitOnPoints",t)}wiresToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.wiresToPoints",t)}createPolylineWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolylineWire",t)}createZigZagBetweenTwoWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createZigZagBetweenTwoWires",t)}createWireFromTwoCirclesTan(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createWireFromTwoCirclesTan",t)}createPolylines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolylines",t)}createBezier(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezier",t)}createBezierWeights(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezierWeights",t)}createBezierWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezierWires",t)}interpolatePoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.interpolatePoints",t)}interpolateWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.interpolateWires",t)}createBSpline(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBSpline",t)}createBSplines(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBSplines",t)}combineEdgesAndWiresIntoAWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.combineEdgesAndWiresIntoAWire",t)}createWireFromEdge(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createWireFromEdge",t)}addEdgesAndWiresToWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.addEdgesAndWiresToWire",t)}divideWireByParamsToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWireByParamsToPoints",t)}divideWiresByParamsToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWiresByParamsToPoints",t)}divideWireByEqualDistanceToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWireByEqualDistanceToPoints",t)}divideWiresByEqualDistanceToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWiresByEqualDistanceToPoints",t)}pointOnWireAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointOnWireAtParam",t)}pointOnWireAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointOnWireAtLength",t)}pointsOnWireAtLengths(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtLengths",t)}pointsOnWireAtEqualLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtEqualLength",t)}pointsOnWireAtPatternOfLengths(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtPatternOfLengths",t)}tangentOnWireAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.tangentOnWireAtParam",t)}tangentOnWireAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.tangentOnWireAtLength",t)}derivativesOnWireAtLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.derivativesOnWireAtLength",t)}derivativesOnWireAtParam(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.derivativesOnWireAtParam",t)}startPointOnWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.startPointOnWire",t)}midPointOnWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.midPointOnWire",t)}endPointOnWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.endPointOnWire",t)}createCircleWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createCircleWire",t)}hexagonsInGrid(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.hexagonsInGrid",t)}createSquareWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createSquareWire",t)}createStarWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createStarWire",t)}createChristmasTreeWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createChristmasTreeWire",t)}createNGonWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createNGonWire",t)}createParallelogramWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createParallelogramWire",t)}createHeartWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createHeartWire",t)}createRectangleWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createRectangleWire",t)}createLPolygonWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLPolygonWire",t)}createIBeamProfileWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createIBeamProfileWire",t)}createHBeamProfileWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createHBeamProfileWire",t)}createTBeamProfileWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createTBeamProfileWire",t)}createUBeamProfileWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createUBeamProfileWire",t)}createEllipseWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createEllipseWire",t)}textWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.textWires",t)}textWiresWithData(t){return e=this,r=void 0,o=function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.textWiresWithData",t),r=X.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})},new((i=void 0)||(i=Promise))((function(t,s){function n(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,a)}c((o=o.apply(e,r||[])).next())}));var e,r,i,o}getWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWire",t)}getWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWires",t)}getWireCenterOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWireCenterOfMass",t)}getWiresCentersOfMass(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWiresCentersOfMass",t)}reversedWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.reversedWire",t)}reversedWireFromReversedEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.reversedWireFromReversedEdges",t)}isWireClosed(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.isWireClosed",t)}getWireLength(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWireLength",t)}getWiresLengths(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWiresLengths",t)}placeWireOnFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.placeWireOnFace",t)}placeWiresOnFace(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.placeWiresOnFace",t)}closeOpenWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.closeOpenWire",t)}project(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.project",t)}projectWires(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.projectWires",t)}}class Q{constructor(t){this.occWorkerManager=t}sewFaces(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shell.sewFaces",t)}getShellSurfaceArea(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shell.getShellSurfaceArea",t)}}class tt{constructor(t){this.occWorkerManager=t}purgeInternalEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.purgeInternalEdges",t)}unifySameDomain(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.unifySameDomain",t)}isClosed(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isClosed",t)}isConvex(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isConvex",t)}isChecked(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isChecked",t)}isFree(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isFree",t)}isInfinite(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isInfinite",t)}isModified(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isModified",t)}isLocked(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isLocked",t)}isNull(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isNull",t)}isEqual(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isEqual",t)}isNotEqual(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isNotEqual",t)}isPartner(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isPartner",t)}isSame(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isSame",t)}getOrientation(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.getOrientation",t)}getShapeType(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.getShapeType",t)}}class et{constructor(t){this.occWorkerManager=t}vertexFromXYZ(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexFromXYZ",t)}vertexFromPoint(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexFromPoint",t)}verticesFromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesFromPoints",t)}verticesCompoundFromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesCompoundFromPoints",t)}getVertices(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.getVertices",t)}getVerticesAsPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.getVerticesAsPoints",t)}verticesToPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesToPoints",t)}vertexToPoint(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexToPoint",t)}projectPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.projectPoints",t)}}class rt{constructor(t){this.vertex=new et(t),this.edge=new $(t),this.wire=new J(t),this.face=new Z(t),this.shell=new Q(t),this.solid=new K(t),this.compound=new Y(t),this.shape=new tt(t)}}var it=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class ot{constructor(t){this.occWorkerManager=t}saveShapeSTEP(t){return it(this,void 0,void 0,(function*(){this.saveSTEP(t)}))}saveShapeSTEPAndReturn(t){return it(this,void 0,void 0,(function*(){return this.saveSTEP(t)}))}saveShapeStl(t){return it(this,void 0,void 0,(function*(){this.saveStl(t)}))}saveShapeStlAndReturn(t){return it(this,void 0,void 0,(function*(){return this.saveStl(t)}))}saveSTEP(t){return this.occWorkerManager.genericCallToWorkerPromise("io.saveShapeSTEP",t).then((e=>{if(t.tryDownload&&document){const r=new Blob([e],{type:"text/plain"}),i=URL.createObjectURL(r);let o=t.fileName?t.fileName:"bitbybit-dev.step";o.toLowerCase().includes(".step")||(o+=".step");const s=document.createElement("a");s.href=i,s.target="_self",s.download=o,s.click(),s.remove()}return e}))}saveStl(t){return this.occWorkerManager.genericCallToWorkerPromise("io.saveShapeStl",t).then((e=>{if(t.tryDownload&&document){const r=new Blob([e],{type:"application/stl"}),i=URL.createObjectURL(r),o=t.fileName?t.fileName:"bitbybit-dev.stl",s=document.createElement("a");s.href=i,s.target="_self",s.download=o,s.click(),s.remove()}return e}))}shapeToDxfPaths(t){return this.occWorkerManager.genericCallToWorkerPromise("io.shapeToDxfPaths",t)}dxfPathsWithLayer(t){return this.occWorkerManager.genericCallToWorkerPromise("io.dxfPathsWithLayer",t)}dxfCreate(t){return this.occWorkerManager.genericCallToWorkerPromise("io.dxfCreate",t).then((e=>{if(t.tryDownload&&document){const r=new Blob([e],{type:"application/stl"}),i=URL.createObjectURL(r),o=t.fileName?t.fileName:"bitbybit-dev.dxf",s=document.createElement("a");s.href=i,s.target="_self",s.download=o,s.click(),s.remove()}return e}))}}class st{constructor(t){this.occWorkerManager=t}transform(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.transform",t)}rotate(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotate",t)}rotateAroundCenter(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateAroundCenter",t)}align(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.align",t)}alignNormAndAxis(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignNormAndAxis",t)}alignAndTranslate(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignAndTranslate",t)}translate(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.translate",t)}scale(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale",t)}scale3d(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale3d",t)}mirror(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirror",t)}mirrorAlongNormal(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorAlongNormal",t)}transformShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.transformShapes",t)}rotateShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateShapes",t)}rotateAroundCenterShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateAroundCenterShapes",t)}alignShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignShapes",t)}alignAndTranslateShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignAndTranslateShapes",t)}translateShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.translateShapes",t)}scaleShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scaleShapes",t)}scale3dShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale3dShapes",t)}mirrorShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorShapes",t)}mirrorAlongNormalShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorAlongNormalShapes",t)}}class nt{constructor(t){this.occWorkerManager=t}loft(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.loft",t)}loftAdvanced(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.loftAdvanced",t)}closestPointsBetweenTwoShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsBetweenTwoShapes",t)}closestPointsOnShapeFromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsOnShapeFromPoints",t)}closestPointsOnShapesFromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsOnShapesFromPoints",t)}distancesToShapeFromPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.distancesToShapeFromPoints",t)}boundingBoxOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxOfShape",t)}boundingBoxMinOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxMinOfShape",t)}boundingBoxMaxOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxMaxOfShape",t)}boundingBoxCenterOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxCenterOfShape",t)}boundingBoxSizeOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxSizeOfShape",t)}boundingBoxShapeOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxShapeOfShape",t)}boundingSphereOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereOfShape",t)}boundingSphereCenterOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereCenterOfShape",t)}boundingSphereRadiusOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereRadiusOfShape",t)}boundingSphereShapeOfShape(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereShapeOfShape",t)}extrude(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.extrude",t)}extrudeShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.extrudeShapes",t)}splitShapeWithShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.splitShapeWithShapes",t)}revolve(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.revolve",t)}rotatedExtrude(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.rotatedExtrude",t)}pipe(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipe",t)}pipePolylineWireNGon(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipePolylineWireNGon",t)}pipeWiresCylindrical(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipeWiresCylindrical",t)}pipeWireCylindrical(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipeWireCylindrical",t)}offset(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.offset",t)}offsetAdv(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.offsetAdv",t)}makeThickSolidSimple(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.makeThickSolidSimple",t)}makeThickSolidByJoin(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.makeThickSolidByJoin",t)}slice(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.slice",t)}sliceInStepPattern(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.sliceInStepPattern",t)}offset3DWire(t){return this.occWorkerManager.genericCallToWorkerPromise("operations.offset3DWire",t)}}class at{constructor(t){this.occWorkerManager=t}union(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.union",t)}difference(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.difference",t)}intersection(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.intersection",t)}meshMeshIntersectionWires(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionWires",t)}meshMeshIntersectionPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionPoints",t)}meshMeshIntersectionOfShapesWires(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionOfShapesWires",t)}meshMeshIntersectionOfShapesPoints(t){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionOfShapesPoints",t)}}class ct{constructor(t){this.occWorkerManager=t}geom2dEllipse(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dEllipse",t)}geom2dTrimmedCurve(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dTrimmedCurve",t)}geom2dSegment(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dSegment",t)}get2dPointFrom2dCurveOnParam(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.get2dPointFrom2dCurveOnParam",t)}geomCircleCurve(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geomCircleCurve",t)}geomEllipseCurve(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geomEllipseCurve",t)}}class ht{constructor(t){this.occWorkerManager=t}cylindricalSurface(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.surfaces.cylindricalSurface",t)}surfaceFromFace(t){return this.occWorkerManager.genericCallToWorkerPromise("geom.surfaces.surfaceFromFace",t)}}class lt{constructor(t){this.curves=new ct(t),this.surfaces=new ht(t)}}class ut{constructor(t){this.occWorkerManager=t}filletEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdges",t)}filletEdgesList(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesList",t)}filletEdgesListOneRadius(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesListOneRadius",t)}filletEdgeVariableRadius(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgeVariableRadius",t)}filletEdgesSameVariableRadius(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesSameVariableRadius",t)}filletEdgesVariableRadius(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesVariableRadius",t)}fillet3DWire(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet3DWire",t)}fillet3DWires(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet3DWires",t)}chamferEdges(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdges",t)}chamferEdgesList(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesList",t)}chamferEdgeTwoDistances(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgeTwoDistances",t)}chamferEdgesTwoDistances(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesTwoDistances",t)}chamferEdgesTwoDistancesLists(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesTwoDistancesLists",t)}chamferEdgeDistAngle(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgeDistAngle",t)}chamferEdgesDistAngle(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesDistAngle",t)}chamferEdgesDistsAngles(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesDistsAngles",t)}fillet2d(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet2d",t)}fillet2dShapes(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet2dShapes",t)}filletTwoEdgesInPlaneIntoAWire(t){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletTwoEdgesInPlaneIntoAWire",t)}}class dt{constructor(t){this.occWorkerManager=t}basicShapeRepair(t){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.basicShapeRepair",t)}fixSmallEdgeOnWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.fixSmallEdgeOnWire",t)}fixEdgeOrientationsAlongWire(t){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.fixEdgeOrientationsAlongWire",t)}}class vt{constructor(t){this.occWorkerManager=t}simpleLinearLengthDimension(t){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.simpleLinearLengthDimension",t)}simpleAngularDimension(t){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.simpleAngularDimension",t)}pinWithLabel(t){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.pinWithLabel",t)}}var ft=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class pt{constructor(t){this.occWorkerManager=t,this.shapes=new rt(t),this.geom=new lt(t),this.transforms=new st(t),this.operations=new nt(t),this.booleans=new at(t),this.fillets=new ut(t),this.shapeFix=new dt(t),this.dimensions=new vt(t),this.io=new ot(t)}shapeFacesToPolygonPoints(t){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapeFacesToPolygonPoints",t)}))}shapeToMesh(t){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapeToMesh",t)}))}shapesToMeshes(t){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapesToMeshes",t)}))}deleteShape(t){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("deleteShape",t)}))}deleteShapes(t){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("deleteShapes",t)}))}cleanAllCache(){return ft(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("cleanAllCache",{})}))}}var gt=function(t,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},gt(t,e)};function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function bt(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,s=r.call(t),n=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)n.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return n}function Pt(t,e,r){if(r||2===arguments.length)for(var i,o=0,s=e.length;o<s;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))}function wt(t){return"function"==typeof t}function kt(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Ct=kt((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function xt(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var _t=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var n=bt(s),a=n.next();!a.done;a=n.next())a.value.remove(this)}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}else s.remove(this);var c=this.initialTeardown;if(wt(c))try{c()}catch(t){o=t instanceof Ct?t.errors:[t]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=bt(h),u=l.next();!u.done;u=l.next()){var d=u.value;try{Mt(d)}catch(t){o=null!=o?o:[],t instanceof Ct?o=Pt(Pt([],yt(o)),yt(t.errors)):o.push(t)}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}if(o)throw new Ct(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Mt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&xt(e,t)},t.prototype.remove=function(e){var r=this._finalizers;r&&xt(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t;var e}(),Tt=_t.EMPTY;function St(t){return t instanceof _t||t&&"closed"in t&&wt(t.remove)&&wt(t.add)&&wt(t.unsubscribe)}function Mt(t){wt(t)?t():t.unsubscribe()}var Wt=null,Et=null,Dt=void 0,Ot=!1,At=!1,It={setTimeout:function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=It.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,Pt([t,e],yt(r))):setTimeout.apply(void 0,Pt([t,e],yt(r)))},clearTimeout:function(t){var e=It.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Ft(){}var Lt=Bt("C",void 0,void 0);function Bt(t,e,r){return{kind:t,value:e,error:r}}var Rt=null;function Nt(t){if(Ot){var e=!Rt;if(e&&(Rt={errorThrown:!1,error:null}),t(),e){var r=Rt,i=r.errorThrown,o=r.error;if(Rt=null,i)throw o}}else t()}var Ut=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,St(e)&&e.add(r)):r.destination=Yt,r}return mt(e,t),e.create=function(t,e,r){return new Ht(t,e,r)},e.prototype.next=function(t){this.isStopped?Gt(function(t){return Bt("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?Gt(Bt("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?Gt(Lt,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(_t),Vt=Function.prototype.bind;function jt(t,e){return Vt.call(t,e)}var zt=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){qt(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){qt(t)}else qt(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){qt(t)}},t}(),Ht=function(t){function e(e,r,i){var o,s,n=t.call(this)||this;return wt(e)||!e?o={next:null!=e?e:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:n&&At?((s=Object.create(e)).unsubscribe=function(){return n.unsubscribe()},o={next:e.next&&jt(e.next,s),error:e.error&&jt(e.error,s),complete:e.complete&&jt(e.complete,s)}):o=e,n.destination=new zt(o),n}return mt(e,t),e}(Ut);function qt(t){var e;Ot?(e=t,Ot&&Rt&&(Rt.errorThrown=!0,Rt.error=e)):function(t){It.setTimeout((function(){if(!Wt)throw t;Wt(t)}))}(t)}function Gt(t,e){var r=Et;r&&It.setTimeout((function(){return r(t,e)}))}var Yt={closed:!0,next:Ft,error:function(t){throw t},complete:Ft},$t="function"==typeof Symbol&&Symbol.observable||"@@observable";function Zt(t){return t}var Kt=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var i,o=this,s=(i=t)&&i instanceof Ut||function(t){return t&&wt(t.next)&&wt(t.error)&&wt(t.complete)}(i)&&St(i)?t:new Ht(t,e,r);return Nt((function(){var t=o,e=t.operator,r=t.source;s.add(e?e.call(s,r):r?o._subscribe(s):o._trySubscribe(s))})),s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=Xt(e))((function(e,i){var o=new Ht({next:function(e){try{t(e)}catch(t){i(t),o.unsubscribe()}},error:i,complete:e});r.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[$t]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0===(r=t).length?Zt:1===r.length?r[0]:function(t){return r.reduce((function(t,e){return e(t)}),t)})(this);var r},t.prototype.toPromise=function(t){var e=this;return new(t=Xt(t))((function(t,r){var i;e.subscribe((function(t){return i=t}),(function(t){return r(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function Xt(t){var e;return null!==(e=null!=t?t:Dt)&&void 0!==e?e:Promise}var Jt,Qt,te,ee,re,ie,oe,se,ne,ae,ce,he,le,ue,de,ve,fe,pe,ge,me,be,ye,Pe=kt((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),we=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return mt(e,t),e.prototype.lift=function(t){var e=new ke(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new Pe},e.prototype.next=function(t){var e=this;Nt((function(){var r,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var o=bt(e.currentObservers),s=o.next();!s.done;s=o.next())s.value.next(t)}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;Nt((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;Nt((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=this,i=r.hasError,o=r.isStopped,s=r.observers;return i||o?Tt:(this.currentObservers=null,s.push(t),new _t((function(){e.currentObservers=null,xt(s,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,i=e.thrownError,o=e.isStopped;r?t.error(i):o&&t.complete()},e.prototype.asObservable=function(){var t=new Kt;return t.source=this,t},e.create=function(t,e){return new ke(t,e)},e}(Kt),ke=function(t){function e(e,r){var i=t.call(this)||this;return i.destination=e,i.source=r,i}return mt(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Tt},e}(we);!function(t){t.loading="loading",t.loaded="loaded",t.initialised="initialised",t.computing="computing"}(Jt||(Jt={}));class Ce{constructor(){this.occWorkerState$=new we,this.promisesMade=[]}occWorkerAlreadyInitialised(){return!!this.occWorker}setOccWorker(t){this.occWorker=t,this.occWorker.onmessage=({data:t})=>{if("occ-initialised"===t)this.occWorkerState$.next({state:Jt.initialised});else if("busy"===t)this.occWorkerState$.next({state:Jt.computing});else{const e=this.promisesMade.find((e=>e.uid===t.uid));e&&void 0!==t.result&&!t.error?e.resolve(t.result):t.error&&(this.errorCallback&&this.errorCallback(t.error),e.reject(t.error)),this.promisesMade=this.promisesMade.filter((e=>e.uid!==t.uid)),0===this.promisesMade.length?this.occWorkerState$.next({state:Jt.loaded}):this.occWorkerState$.next({state:Jt.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(t,e){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((t,e)=>{i.resolve=t,i.reject=e}));return i.promise=o,this.promisesMade.push(i),this.occWorker.postMessage({action:{functionName:t,inputs:e},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}!function(t){let e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w;!function(t){t.arc="arc",t.intersection="intersection",t.tangent="tangent"}(e=t.joinTypeEnum||(t.joinTypeEnum={})),function(t){t.skin="skin",t.pipe="pipe",t.rectoVerso="rectoVerso"}(r=t.bRepOffsetModeEnum||(t.bRepOffsetModeEnum={})),function(t){t.approxChordLength="approxChordLength",t.approxCentripetal="approxCentripetal",t.approxIsoParametric="approxIsoParametric"}(i=t.approxParametrizationTypeEnum||(t.approxParametrizationTypeEnum={})),function(t){t.outside="outside",t.inside="inside",t.middle="middle"}(o=t.directionEnum||(t.directionEnum={})),function(t){t.iges="iges",t.step="step"}(s=t.fileTypeEnum||(t.fileTypeEnum={})),function(t){t.forward="forward",t.reversed="reversed",t.internal="internal",t.external="external"}(n=t.topAbsOrientationEnum||(t.topAbsOrientationEnum={})),function(t){t.in="in",t.out="out",t.on="on",t.unknown="unknown"}(a=t.topAbsStateEnum||(t.topAbsStateEnum={})),function(t){t.unknown="unknown",t.vertex="vertex",t.edge="edge",t.wire="wire",t.face="face",t.shell="shell",t.solid="solid",t.compSolid="compSolid",t.compound="compound",t.shape="shape"}(c=t.shapeTypeEnum||(t.shapeTypeEnum={})),function(t){t.unqualified="unqualified",t.enclosing="enclosing",t.enclosed="enclosed",t.outside="outside",t.noqualifier="noqualifier"}(h=t.gccEntPositionEnum||(t.gccEntPositionEnum={})),function(t){t.keepSide1="keepSide1",t.keepSide2="keepSide2",t.all="all"}(l=t.positionResultEnum||(t.positionResultEnum={})),function(t){t.none="none",t.keepSide1="keepSide1",t.keepSide2="keepSide2"}(u=t.circleInclusionEnum||(t.circleInclusionEnum={})),function(t){t.none="none",t.outside="outside",t.inside="inside",t.outsideInside="outsideInside",t.insideOutside="insideOutside"}(d=t.twoCircleInclusionEnum||(t.twoCircleInclusionEnum={})),function(t){t.outside="outside",t.inside="inside",t.outsideInside="outsideInside",t.insideOutside="insideOutside"}(v=t.fourSidesStrictEnum||(t.fourSidesStrictEnum={})),function(t){t.outside="outside",t.inside="inside"}(f=t.twoSidesStrictEnum||(t.twoSidesStrictEnum={})),function(t){t.allWithAll="allWithAll",t.inOrder="inOrder",t.inOrderClosed="inOrderClosed"}(p=t.combinationCirclesForFaceEnum||(t.combinationCirclesForFaceEnum={})),function(t){t[t.curve=0]="curve",t[t.edge=1]="edge",t[t.wire=2]="wire",t[t.face=3]="face"}(g=t.typeSpecificityEnum||(t.typeSpecificityEnum={})),function(t){t.all="all",t.closest="closest",t.furthest="furthest",t.closestAndFurthest="closestAndFurthest"}(m=t.pointProjectionTypeEnum||(t.pointProjectionTypeEnum={})),function(t){t.isCorrectedFrenet="isCorrectedFrenet",t.isFixed="isFixed",t.isFrenet="isFrenet",t.isConstantNormal="isConstantNormal",t.isDarboux="isDarboux",t.isGuideAC="isGuideAC",t.isGuidePlan="isGuidePlan",t.isGuideACWithContact="isGuideACWithContact",t.isGuidePlanWithContact="isGuidePlanWithContact",t.isDiscreteTrihedron="isDiscreteTrihedron"}(b=t.geomFillTrihedronEnum||(t.geomFillTrihedronEnum={})),function(t){t.aci="aci",t.truecolor="truecolor"}(y=t.dxfColorFormatEnum||(t.dxfColorFormatEnum={})),function(t){t.AC1009="AC1009",t.AC1015="AC1015"}(P=t.dxfAcadVersionEnum||(t.dxfAcadVersionEnum={})),function(t){t.none="none",t.arrow="arrow"}(w=t.dimensionEndTypeEnum||(t.dimensionEndTypeEnum={})),t.DecomposedMeshDto=class{constructor(t,e){void 0!==t&&(this.faceList=t),void 0!==e&&(this.edgeList=e)}},t.DecomposedFaceDto=class{},t.DecomposedEdgeDto=class{},t.ShapesDto=class{constructor(t){void 0!==t&&(this.shapes=t)}},t.PointDto=class{constructor(t){this.point=[0,0,0],void 0!==t&&(this.point=t)}},t.XYZDto=class{constructor(t,e,r){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==r&&(this.z=r)}},t.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.ConstraintTanLinesFromPtToCircleDto=class{constructor(t,e,r,i,o){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=u.none,void 0!==t&&(this.circle=t),void 0!==e&&(this.point=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==o&&(this.circleRemainder=o)}},t.ConstraintTanLinesFromTwoPtsToCircleDto=class{constructor(t,e,r,i,o,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=u.none,void 0!==t&&(this.circle=t),void 0!==e&&(this.point1=e),void 0!==r&&(this.point1=r),void 0!==i&&(this.tolerance=i),void 0!==o&&(this.positionResult=o),void 0!==s&&(this.circleRemainder=s)}},t.ConstraintTanLinesOnTwoCirclesDto=class{constructor(t,e,r,i,o){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainders=d.none,void 0!==t&&(this.circle1=t),void 0!==e&&(this.circle2=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==o&&(this.circleRemainders=o)}},t.ConstraintTanCirclesOnTwoCirclesDto=class{constructor(t,e,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==t&&(this.circle1=t),void 0!==e&&(this.circle2=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},t.ConstraintTanCirclesOnCircleAndPntDto=class{constructor(t,e,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==t&&(this.circle=t),void 0!==e&&(this.point=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},t.CurveAndSurfaceDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.surface=e)}},t.FilletTwoEdgesInPlaneDto=class{constructor(t,e,r,i,o,s){this.planeOrigin=[0,0,0],this.planeDirection=[0,1,0],this.radius=.3,this.solution=-1,void 0!==t&&(this.edge1=t),void 0!==e&&(this.edge2=e),void 0!==r&&(this.planeOrigin=r),void 0!==i&&(this.planeDirection=i),void 0!==o&&(this.radius=o),void 0!==s&&(this.solution=s)}},t.ClosestPointsOnShapeFromPointsDto=class{constructor(t,e){void 0!==t&&(this.shape=t),void 0!==e&&(this.points=e)}},t.BoundingBoxDto=class{constructor(t){void 0!==t&&(this.bbox=t)}},t.BoundingBoxPropsDto=class{constructor(t,e,r,i){this.min=[0,0,0],this.max=[0,0,0],this.center=[0,0,0],this.size=[0,0,0],void 0!==t&&(this.min=t),void 0!==e&&(this.max=e),void 0!==r&&(this.center=r),void 0!==i&&(this.size=i)}},t.BoundingSpherePropsDto=class{constructor(t,e){this.center=[0,0,0],this.radius=0,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e)}},t.SplitWireOnPointsDto=class{constructor(t,e){void 0!==t&&(this.shape=t),void 0!==e&&(this.points=e)}},t.ClosestPointsOnShapesFromPointsDto=class{constructor(t,e){void 0!==t&&(this.shapes=t),void 0!==e&&(this.points=e)}},t.ClosestPointsBetweenTwoShapesDto=class{constructor(t,e){void 0!==t&&(this.shape1=t),void 0!==e&&(this.shape2=e)}},t.FaceFromSurfaceAndWireDto=class{constructor(t,e,r){this.inside=!0,void 0!==t&&(this.surface=t),void 0!==e&&(this.wire=e),void 0!==r&&(this.inside=r)}},t.WireOnFaceDto=class{constructor(t,e){void 0!==t&&(this.wire=t),void 0!==e&&(this.face=e)}},t.DrawShapeDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.shape=t),void 0!==e&&(this.faceOpacity=e),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==o&&(this.faceMaterial=o),void 0!==s&&(this.faceColour=s),void 0!==l&&(this.vertexColour=l),void 0!==u&&(this.vertexSize=u),void 0!==n&&(this.edgeWidth=n),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==d&&(this.precision=d),void 0!==v&&(this.drawEdgeIndexes=v),void 0!==f&&(this.edgeIndexHeight=f),void 0!==p&&(this.edgeIndexColour=p),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==b&&(this.faceIndexColour=b),void 0!==y&&(this.drawTwoSided=y),void 0!==P&&(this.backFaceColour=P),void 0!==w&&(this.backFaceOpacity=w)}},t.DrawShapesDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.faceOpacity=e),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==o&&(this.faceMaterial=o),void 0!==s&&(this.faceColour=s),void 0!==l&&(this.vertexColour=l),void 0!==u&&(this.vertexSize=u),void 0!==n&&(this.edgeWidth=n),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==d&&(this.precision=d),void 0!==v&&(this.drawEdgeIndexes=v),void 0!==f&&(this.edgeIndexHeight=f),void 0!==p&&(this.edgeIndexColour=p),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==b&&(this.faceIndexColour=b),void 0!==y&&(this.drawTwoSided=y),void 0!==P&&(this.backFaceColour=P),void 0!==w&&(this.backFaceOpacity=w)}},t.FaceSubdivisionDto=class{constructor(t,e,r,i,o,s,n,a,c){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepU=!1,this.removeStartEdgeU=!1,this.removeEndEdgeU=!1,this.shiftHalfStepV=!1,this.removeStartEdgeV=!1,this.removeEndEdgeV=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrDivisionsU=e),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepU=i),void 0!==o&&(this.removeStartEdgeU=o),void 0!==s&&(this.removeEndEdgeU=s),void 0!==n&&(this.shiftHalfStepV=n),void 0!==a&&(this.removeStartEdgeV=a),void 0!==c&&(this.removeEndEdgeV=c)}},t.FaceSubdivisionToWiresDto=class{constructor(t,e,r,i,o,s){this.nrDivisions=10,this.isU=!0,this.shiftHalfStep=!1,this.removeStart=!1,this.removeEnd=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrDivisions=e),void 0!==r&&(this.isU=r),void 0!==i&&(this.shiftHalfStep=i),void 0!==o&&(this.removeStart=o),void 0!==s&&(this.removeEnd=s)}},t.FaceSubdivideToRectangleWiresDto=class{constructor(t,e,r,i,o,s,n,a,c){this.nrRectanglesU=10,this.nrRectanglesV=10,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrRectanglesU=e),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==o&&(this.scalePatternV=o),void 0!==s&&(this.filletPattern=s),void 0!==n&&(this.inclusionPattern=n),void 0!==a&&(this.offsetFromBorderU=a),void 0!==c&&(this.offsetFromBorderV=c)}},t.FaceSubdivideToHexagonWiresDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,this.extendUUp=!1,this.extendUBottom=!1,this.extendVUp=!1,this.extendVBottom=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrHexagonsU=e),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==o&&(this.scalePatternU=o),void 0!==s&&(this.scalePatternV=s),void 0!==n&&(this.filletPattern=n),void 0!==a&&(this.inclusionPattern=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h),void 0!==l&&(this.extendUUp=l),void 0!==u&&(this.extendUBottom=u),void 0!==d&&(this.extendVUp=d),void 0!==v&&(this.extendVBottom=v)}},t.FaceSubdivideToHexagonHolesDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrHexagonsU=e),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==o&&(this.holesToFaces=o),void 0!==s&&(this.scalePatternU=s),void 0!==n&&(this.scalePatternV=n),void 0!==a&&(this.filletPattern=a),void 0!==c&&(this.inclusionPattern=c),void 0!==h&&(this.offsetFromBorderU=h),void 0!==l&&(this.offsetFromBorderV=l)}},t.FaceSubdivideToRectangleHolesDto=class{constructor(t,e,r,i,o,s,n,a,c,h){this.nrRectanglesU=10,this.nrRectanglesV=10,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrRectanglesU=e),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==o&&(this.scalePatternV=o),void 0!==s&&(this.filletPattern=s),void 0!==n&&(this.inclusionPattern=n),void 0!==a&&(this.holesToFaces=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h)}},t.FaceSubdivisionControlledDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepNthU=0,this.shiftHalfStepUOffsetN=0,this.removeStartEdgeNthU=0,this.removeStartEdgeUOffsetN=0,this.removeEndEdgeNthU=0,this.removeEndEdgeUOffsetN=0,this.shiftHalfStepNthV=0,this.shiftHalfStepVOffsetN=0,this.removeStartEdgeNthV=0,this.removeStartEdgeVOffsetN=0,this.removeEndEdgeNthV=0,this.removeEndEdgeVOffsetN=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrDivisionsU=e),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepNthU=i),void 0!==o&&(this.shiftHalfStepUOffsetN=o),void 0!==s&&(this.removeStartEdgeNthU=s),void 0!==n&&(this.removeStartEdgeUOffsetN=n),void 0!==a&&(this.removeEndEdgeNthU=a),void 0!==c&&(this.removeEndEdgeUOffsetN=c),void 0!==h&&(this.shiftHalfStepNthV=h),void 0!==l&&(this.shiftHalfStepVOffsetN=l),void 0!==u&&(this.removeStartEdgeNthV=u),void 0!==d&&(this.removeStartEdgeVOffsetN=d),void 0!==v&&(this.removeEndEdgeNthV=v),void 0!==f&&(this.removeEndEdgeVOffsetN=f)}},t.FaceLinearSubdivisionDto=class{constructor(t,e,r,i,o,s,n){this.isU=!0,this.param=.5,this.nrPoints=10,this.shiftHalfStep=!1,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.isU=e),void 0!==r&&(this.param=r),void 0!==i&&(this.nrPoints=i),void 0!==o&&(this.shiftHalfStep=o),void 0!==s&&(this.removeStartPoint=s),void 0!==n&&(this.removeEndPoint=n)}},t.WireAlongParamDto=class{constructor(t,e,r){this.isU=!0,this.param=.5,void 0!==t&&(this.shape=t),void 0!==e&&(this.isU=e),void 0!==r&&(this.param=r)}},t.WiresAlongParamsDto=class{constructor(t,e,r){this.isU=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.isU=e),void 0!==r&&(this.params=r)}},t.DataOnUVDto=class{constructor(t,e,r){this.paramU=.5,this.paramV=.5,void 0!==t&&(this.shape=t),void 0!==e&&(this.paramU=e),void 0!==r&&(this.paramV=r)}},t.DataOnUVsDto=class{constructor(t,e){this.paramsUV=[[.5,.5]],void 0!==t&&(this.shape=t),void 0!==e&&(this.paramsUV=e)}},t.PolygonDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.PolygonsDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.polygons=t),void 0!==e&&(this.returnCompound=e)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.PolylineBaseDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.PolylinesBaseDto=class{constructor(t){void 0!==t&&(this.polylines=t)}},t.LineBaseDto=class{constructor(t){void 0!==t&&(this.line=t)}},t.LinesBaseDto=class{constructor(t){void 0!==t&&(this.lines=t)}},t.SegmentBaseDto=class{constructor(t){void 0!==t&&(this.segment=t)}},t.SegmentsBaseDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.TriangleBaseDto=class{constructor(t){void 0!==t&&(this.triangle=t)}},t.MeshBaseDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.PolylinesDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.polylines=t),void 0!==e&&(this.returnCompound=e)}},t.SquareDto=class{constructor(t,e,r){this.size=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.size=t),void 0!==e&&(this.center=e),void 0!==r&&(this.direction=r)}},t.RectangleDto=class{constructor(t,e,r,i){this.width=1,this.length=2,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.width=t),void 0!==e&&(this.length=e),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}};class k{constructor(t,e,r,i,s,n,a,c){this.widthFirst=1,this.lengthFirst=2,this.widthSecond=.5,this.lengthSecond=2,this.align=o.outside,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.widthFirst=t),void 0!==e&&(this.lengthFirst=e),void 0!==r&&(this.widthSecond=r),void 0!==i&&(this.lengthSecond=i),void 0!==s&&(this.align=s),void 0!==n&&(this.rotation=n),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}t.LPolygonDto=k;class C{constructor(t,e,r,i,o,s,n,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=te.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==o&&(this.alignment=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}t.IBeamProfileDto=C;class x{constructor(t,e,r,i,o,s,n,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=te.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==o&&(this.alignment=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}t.HBeamProfileDto=x;class _{constructor(t,e,r,i,o,s,n,a){this.width=2,this.height=2,this.webThickness=.2,this.flangeThickness=.3,this.alignment=te.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==o&&(this.alignment=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}t.TBeamProfileDto=_;class T{constructor(t,e,r,i,o,s,n,a,c){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.flangeWidth=.5,this.alignment=te.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==o&&(this.flangeWidth=o),void 0!==s&&(this.alignment=s),void 0!==n&&(this.rotation=n),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}t.UBeamProfileDto=T,t.ExtrudedSolidDto=class{constructor(t,e,r,i){this.extrusionLengthFront=1,this.extrusionLengthBack=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.extrusionLengthFront=t),void 0!==e&&(this.extrusionLengthBack=e),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}},t.IBeamProfileSolidDto=class extends C{constructor(t,e,r,i,o,s,n,a,c,h){super(t,e,r,i,o,s,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},t.HBeamProfileSolidDto=class extends x{constructor(t,e,r,i,o,s,n,a,c,h){super(t,e,r,i,o,s,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},t.TBeamProfileSolidDto=class extends _{constructor(t,e,r,i,o,s,n,a,c,h){super(t,e,r,i,o,s,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},t.UBeamProfileSolidDto=class extends T{constructor(t,e,r,i,o,s,n,a,c,h,l){super(t,e,r,i,o,s,n,a,c),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==h&&(this.extrusionLengthFront=h),void 0!==l&&(this.extrusionLengthBack=l)}},t.BoxDto=class{constructor(t,e,r,i,o){this.width=1,this.length=2,this.height=3,this.center=[0,0,0],this.originOnCenter=!0,void 0!==t&&(this.width=t),void 0!==e&&(this.length=e),void 0!==r&&(this.height=r),void 0!==i&&(this.center=i),void 0!==o&&(this.originOnCenter=o)}},t.CubeDto=class{constructor(t,e,r){this.size=1,this.center=[0,0,0],this.originOnCenter=!0,void 0!==t&&(this.size=t),void 0!==e&&(this.center=e),void 0!==r&&(this.originOnCenter=r)}},t.BoxFromCornerDto=class{constructor(t,e,r,i){this.width=1,this.length=2,this.height=3,this.corner=[0,0,0],void 0!==t&&(this.width=t),void 0!==e&&(this.length=e),void 0!==r&&(this.height=r),void 0!==i&&(this.corner=i)}},t.SphereDto=class{constructor(t,e){this.radius=1,this.center=[0,0,0],void 0!==t&&(this.radius=t),void 0!==e&&(this.center=e)}},t.ConeDto=class{constructor(t,e,r,i,o,s){this.radius1=2,this.radius2=1,this.height=2,this.angle=360,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.radius1=t),void 0!==e&&(this.radius2=e),void 0!==r&&(this.height=r),void 0!==i&&(this.angle=i),void 0!==o&&(this.center=o),void 0!==s&&(this.direction=s)}},t.LineDto=class{constructor(t,e){this.start=[0,0,0],this.end=[0,1,0],void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.LineWithExtensionsDto=class{constructor(t,e,r,i){this.start=[0,0,0],this.end=[0,1,0],this.extensionStart=.1,this.extensionEnd=.1,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==r&&(this.extensionStart=r),void 0!==i&&(this.extensionEnd=i)}},t.LinesDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.lines=t),void 0!==e&&(this.returnCompound=e)}},t.ArcEdgeTwoPointsTangentDto=class{constructor(t,e,r){this.start=[0,0,0],this.tangentVec=[0,1,0],this.end=[0,0,1],void 0!==t&&(this.start=t),void 0!==e&&(this.tangentVec=e),void 0!==r&&(this.end=r)}},t.ArcEdgeCircleTwoPointsDto=class{constructor(t,e,r,i){this.start=[0,0,0],this.end=[0,0,1],this.sense=!0,void 0!==t&&(this.circle=t),void 0!==e&&(this.start=e),void 0!==r&&(this.end=r),void 0!==i&&(this.sense=i)}},t.ArcEdgeCircleTwoAnglesDto=class{constructor(t,e,r,i){this.alphaAngle1=0,this.alphaAngle2=90,this.sense=!0,void 0!==t&&(this.circle=t),void 0!==e&&(this.alphaAngle1=e),void 0!==r&&(this.alphaAngle2=r),void 0!==i&&(this.sense=i)}},t.ArcEdgeCirclePointAngleDto=class{constructor(t,e,r,i){this.alphaAngle=90,this.sense=!0,void 0!==t&&(this.circle=t),void 0!==e&&(this.alphaAngle=e),void 0!==i&&(this.sense=i)}},t.ArcEdgeThreePointsDto=class{constructor(t,e,r){this.start=[0,0,0],this.middle=[0,1,0],this.end=[0,0,1],void 0!==t&&(this.start=t),void 0!==e&&(this.middle=e),void 0!==r&&(this.end=r)}},t.CylinderDto=class{constructor(t,e,r,i,o,s){this.radius=1,this.height=2,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,this.originOnCenter=!1,void 0!==t&&(this.radius=t),void 0!==e&&(this.height=e),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i),void 0!==o&&(this.angle=o),void 0!==s&&(this.originOnCenter=s)}},t.CylindersOnLinesDto=class{constructor(t,e){void 0!==t&&(this.radius=t),void 0!==e&&(this.lines=e)}},t.FilletDto=class{constructor(t,e,r,i){this.radius=.1,void 0!==t&&(this.shape=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},t.FilletShapesDto=class{constructor(t,e,r,i){this.radius=.1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},t.FilletEdgesListDto=class{constructor(t,e,r){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.radiusList=r)}},t.FilletEdgesListOneRadiusDto=class{constructor(t,e,r){this.radius=.1,void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.radius=r)}},t.FilletEdgeVariableRadiusDto=class{constructor(t,e,r,i){void 0!==t&&(this.shape=t),void 0!==e&&(this.edge=e),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},t.FilletEdgesVariableRadiusDto=class{constructor(t,e,r,i){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.radiusLists=r),void 0!==i&&(this.paramsULists=i)}},t.FilletEdgesSameVariableRadiusDto=class{constructor(t,e,r,i){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},t.Fillet3DWiresDto=class{constructor(t,e,r,i,o){this.radius=.1,this.direction=[0,1,0],void 0!==t&&(this.shapes=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==o&&(this.indexes=o)}},t.Fillet3DWireDto=class{constructor(t,e,r,i,o){this.radius=.1,this.direction=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==o&&(this.indexes=o)}},t.ChamferDto=class{constructor(t,e,r,i){this.distance=.1,void 0!==t&&(this.shape=t),void 0!==e&&(this.distance=e),void 0!==r&&(this.distanceList=r),void 0!==i&&(this.indexes=i)}},t.ChamferEdgesListDto=class{constructor(t,e,r){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.distanceList=r)}},t.ChamferEdgeDistAngleDto=class{constructor(t,e,r,i,o){this.distance=.1,this.angle=45,void 0!==t&&(this.shape=t),void 0!==e&&(this.edge=e),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.angle=o)}},t.ChamferEdgeTwoDistancesDto=class{constructor(t,e,r,i,o){this.distance1=.1,this.distance2=.2,void 0!==t&&(this.shape=t),void 0!==e&&(this.edge=e),void 0!==r&&(this.face=r),void 0!==i&&(this.distance1=i),void 0!==o&&(this.distance2=o)}},t.ChamferEdgesTwoDistancesListsDto=class{constructor(t,e,r,i,o){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances1=i),void 0!==o&&(this.distances2=o)}},t.ChamferEdgesTwoDistancesDto=class{constructor(t,e,r,i,o){this.distance1=.1,this.distance2=.2,void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance1=i),void 0!==o&&(this.distance2=o)}},t.ChamferEdgesDistsAnglesDto=class{constructor(t,e,r,i,o){void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances=i),void 0!==o&&(this.angles=o)}},t.ChamferEdgesDistAngleDto=class{constructor(t,e,r,i,o){this.distance=.1,this.angle=45,void 0!==t&&(this.shape=t),void 0!==e&&(this.edges=e),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.angle=o)}},t.BSplineDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e)}},t.BSplinesDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.bSplines=t),void 0!==e&&(this.returnCompound=e)}},t.WireFromTwoCirclesTanDto=class{constructor(t,e,r,i,o){this.keepLines=f.outside,this.circleRemainders=v.outside,this.tolerance=1e-7,void 0!==t&&(this.circle1=t),void 0!==e&&(this.circle2=e),void 0!==r&&(this.keepLines=r),void 0!==i&&(this.circleRemainders=i),void 0!==o&&(this.tolerance=o)}},t.FaceFromMultipleCircleTanWiresDto=class{constructor(t,e,r,i){this.combination=p.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==t&&(this.circles=t),void 0!==e&&(this.combination=e),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},t.FaceFromMultipleCircleTanWireCollectionsDto=class{constructor(t,e,r,i){this.combination=p.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==t&&(this.listsOfCircles=t),void 0!==e&&(this.combination=e),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},t.ZigZagBetweenTwoWiresDto=class{constructor(t,e,r,i,o,s){this.nrZigZags=20,this.divideByEqualDistance=!1,this.zigZagsPerEdge=!0,void 0!==t&&(this.wire1=t),void 0!==e&&(this.wire2=e),void 0!==r&&(this.nrZigZags=r),void 0!==i&&(this.inverse=i),void 0!==o&&(this.divideByEqualDistance=o),void 0!==s&&(this.zigZagsPerEdge=s)}},t.InterpolationDto=class{constructor(t,e,r){this.periodic=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==e&&(this.periodic=e),void 0!==r&&(this.tolerance=r)}},t.InterpolateWiresDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.interpolations=t),void 0!==e&&(this.returnCompound=e)}},t.BezierDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e)}},t.BezierWeightsDto=class{constructor(t,e,r){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.weights=e),void 0!==r&&(this.closed=r)}},t.BezierWiresDto=class{constructor(t,e){this.returnCompound=!1,void 0!==t&&(this.bezierWires=t),void 0!==e&&(this.returnCompound=e)}},t.DivideDto=class{constructor(t,e,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrOfDivisions=e),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},t.ProjectWireDto=class{constructor(t,e,r){this.direction=[0,1,0],void 0!==t&&(this.wire=t),void 0!==e&&(this.shape=e),void 0!==r&&(this.direction=r)}},t.ProjectPointsOnShapeDto=class{constructor(t,e,r,i){this.direction=[0,10,0],void 0!==t&&(this.points=t),void 0!==e&&(this.shape=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.projectionType=i)}},t.WiresToPointsDto=class{constructor(t,e,r,i,o,s){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==t&&(this.shape=t),void 0!==e&&(this.angularDeflection=e),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==o&&(this.uTolerance=o),void 0!==s&&(this.minimumLength=s)}},t.EdgesToPointsDto=class{constructor(t,e,r,i,o,s){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==t&&(this.shape=t),void 0!==e&&(this.angularDeflection=e),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==o&&(this.uTolerance=o),void 0!==s&&(this.minimumLength=s)}},t.ProjectWiresDto=class{constructor(t,e,r){this.direction=[0,1,0],void 0!==t&&(this.wires=t),void 0!==e&&(this.shape=e),void 0!==r&&(this.direction=r)}},t.DivideShapesDto=class{constructor(t,e,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.nrOfDivisions=e),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},t.DataOnGeometryAtParamDto=class{constructor(t,e){this.param=.5,void 0!==t&&(this.shape=t),void 0!==e&&(this.param=e)}},t.DataOnGeometryesAtParamDto=class{constructor(t,e){this.param=.5,void 0!==t&&(this.shapes=t),void 0!==e&&(this.param=e)}},t.PointInFaceDto=class{constructor(t,e,r,i){this.tEdgeParam=.5,this.distance2DParam=.5,void 0!==t&&(this.face=t),void 0!==e&&(this.edge=e),void 0!==r&&(this.tEdgeParam=r),void 0!==i&&(this.distance2DParam=i)}},t.PointsOnWireAtEqualLengthDto=class{constructor(t,e,r,i,o){this.length=.5,this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.length=e),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeFirst=i),void 0!==o&&(this.includeLast=o)}},t.PointsOnWireAtPatternOfLengthsDto=class{constructor(t,e,r,i,o){this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.lengths=e),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeLast=i),void 0!==o&&(this.includeLast=o)}},t.DataOnGeometryAtLengthDto=class{constructor(t,e){this.length=.5,void 0!==t&&(this.shape=t),void 0!==e&&(this.length=e)}},t.DataOnGeometryesAtLengthDto=class{constructor(t,e){this.length=.5,void 0!==t&&(this.shapes=t),void 0!==e&&(this.length=e)}},t.DataOnGeometryAtLengthsDto=class{constructor(t,e){void 0!==t&&(this.shape=t),void 0!==e&&(this.lengths=e)}},t.CircleDto=class{constructor(t,e,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.radius=t),void 0!==e&&(this.center=e),void 0!==r&&(this.direction=r)}},t.HexagonsInGridDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==o&&(this.flatTop=o),void 0!==s&&(this.extendTop=s),void 0!==n&&(this.extendBottom=n),void 0!==a&&(this.extendLeft=a),void 0!==c&&(this.extendRight=c),void 0!==h&&(this.scalePatternWidth=h),void 0!==l&&(this.scalePatternHeight=l),void 0!==u&&(this.filletPattern=u),void 0!==d&&(this.inclusionPattern=d)}},t.LoftDto=class{constructor(t,e){this.makeSolid=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.makeSolid=e)}},t.LoftAdvancedDto=class{constructor(t,e,r,o,s,n,a,c,h,l,u,d){this.makeSolid=!1,this.closed=!1,this.periodic=!1,this.straight=!1,this.nrPeriodicSections=10,this.useSmoothing=!1,this.maxUDegree=3,this.tolerance=1e-7,this.parType=i.approxCentripetal,void 0!==t&&(this.shapes=t),void 0!==e&&(this.makeSolid=e),void 0!==r&&(this.closed=r),void 0!==o&&(this.periodic=o),void 0!==s&&(this.straight=s),void 0!==n&&(this.nrPeriodicSections=n),void 0!==a&&(this.useSmoothing=a),void 0!==c&&(this.maxUDegree=c),void 0!==h&&(this.tolerance=h),void 0!==l&&(this.parType=l),void 0!==u&&(this.startVertex=u),void 0!==d&&(this.endVertex=d)}},t.OffsetDto=class{constructor(t,e,r,i){this.distance=.2,this.tolerance=.1,void 0!==t&&(this.shape=t),void 0!==e&&(this.face=e),void 0!==r&&(this.distance=r),void 0!==i&&(this.tolerance=i)}},t.OffsetAdvancedDto=class{constructor(t,r,i,o,s,n){this.distance=.2,this.tolerance=.1,this.joinType=e.arc,this.removeIntEdges=!1,void 0!==t&&(this.shape=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.tolerance=o),void 0!==s&&(this.joinType=s),void 0!==n&&(this.removeIntEdges=n)}},t.RevolveDto=class{constructor(t,e,r,i){this.angle=360,this.direction=[0,1,0],this.copy=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.angle=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.copy=i)}},t.ShapeShapesDto=class{constructor(t,e){void 0!==t&&(this.shape=t),void 0!==e&&(this.shapes=e)}},t.WiresOnFaceDto=class{constructor(t,e){void 0!==t&&(this.wires=t),void 0!==e&&(this.face=e)}},t.PipeWiresCylindricalDto=class{constructor(t,e,r,i,o){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==o&&(this.forceApproxC1=o)}},t.PipeWireCylindricalDto=class{constructor(t,e,r,i,o){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==o&&(this.forceApproxC1=o)}},t.PipePolygonWireNGonDto=class{constructor(t,e,r,i,o,s){this.radius=.1,this.nrCorners=6,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.makeSolid=i),void 0!==o&&(this.trihedronEnum=o),void 0!==s&&(this.forceApproxC1=s)}},t.ExtrudeDto=class{constructor(t,e){this.direction=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.direction=e)}},t.ExtrudeShapesDto=class{constructor(t,e){this.direction=[0,1,0],void 0!==t&&(this.shapes=t),void 0!==e&&(this.direction=e)}},t.SplitDto=class{constructor(t,e){this.localFuzzyTolerance=1e-4,this.nonDestructive=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.shapes=e)}},t.UnionDto=class{constructor(t,e){this.keepEdges=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.keepEdges=e)}},t.DifferenceDto=class{constructor(t,e,r){this.keepEdges=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.shapes=e),void 0!==r&&(this.keepEdges=r)}},t.IntersectionDto=class{constructor(t,e){this.keepEdges=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.keepEdges=e)}},t.ShapeDto=class{constructor(t){void 0!==t&&(this.shape=t)}},t.MeshMeshIntersectionTwoShapesDto=class{constructor(t,e,r,i){this.precision1=.01,this.precision2=.01,void 0!==t&&(this.shape1=t),void 0!==e&&(this.shape2=e),void 0!==r&&(this.precision1=r),void 0!==i&&(this.precision2=i)}},t.MeshMeshesIntersectionOfShapesDto=class{constructor(t,e,r,i){this.precision=.01,void 0!==t&&(this.shape=t),void 0!==e&&(this.shapes=e),void 0!==r&&(this.precision=r),void 0!==i&&(this.precisionShapes=i)}},t.CompareShapesDto=class{constructor(t,e){void 0!==t&&(this.shape=t),void 0!==e&&(this.otherShape=e)}},t.FixSmallEdgesInWireDto=class{constructor(t,e,r){this.lockvtx=!1,this.precsmall=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.lockvtx=e),void 0!==r&&(this.precsmall=r)}},t.BasicShapeRepairDto=class{constructor(t,e,r,i){this.precision=.001,this.maxTolerance=.01,this.minTolerance=1e-4,void 0!==t&&(this.shape=t),void 0!==e&&(this.precision=e),void 0!==r&&(this.maxTolerance=r),void 0!==i&&(this.minTolerance=i)}},t.FixClosedDto=class{constructor(t,e){this.precision=-.1,void 0!==t&&(this.shape=t),void 0!==e&&(this.precision=e)}},t.ShapesWithToleranceDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.shapes=t),void 0!==e&&(this.tolerance=e)}},t.ShapeWithToleranceDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.shape=t),void 0!==e&&(this.tolerance=e)}},t.ShapeIndexDto=class{constructor(t,e){this.index=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.index=e)}},t.EdgeIndexDto=class{constructor(t,e){this.index=1,void 0!==t&&(this.shape=t),void 0!==e&&(this.index=e)}},t.RotationExtrudeDto=class{constructor(t,e,r,i){this.height=1,this.angle=360,this.makeSolid=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.height=e),void 0!==r&&(this.angle=r),void 0!==i&&(this.makeSolid=i)}},t.ThickSolidByJoinDto=class{constructor(t,r,i,o,s,n,a,c){this.offset=1,this.tolerance=.001,this.intersection=!1,this.selfIntersection=!1,this.joinType=e.arc,this.removeIntEdges=!1,void 0!==t&&(this.shape=t),void 0!==r&&(this.shapes=r),void 0!==i&&(this.offset=i),void 0!==o&&(this.tolerance=o),void 0!==s&&(this.intersection=s),void 0!==n&&(this.selfIntersection=n),void 0!==a&&(this.joinType=a),void 0!==c&&(this.removeIntEdges=c)}},t.TransformDto=class{constructor(t,e,r,i,o){this.translation=[0,0,0],this.rotationAxis=[0,1,0],this.rotationAngle=0,this.scaleFactor=1,void 0!==t&&(this.shape=t),void 0!==e&&(this.translation=e),void 0!==r&&(this.rotationAxis=r),void 0!==i&&(this.rotationAngle=i),void 0!==o&&(this.scaleFactor=o)}},t.TransformShapesDto=class{constructor(t,e,r,i,o){this.translations=[[0,0,0]],this.rotationAxes=[[0,1,0]],this.rotationAngles=[0],this.scaleFactors=[1],void 0!==t&&(this.shapes=t),void 0!==e&&(this.translations=e),void 0!==r&&(this.rotationAxes=r),void 0!==i&&(this.rotationAngles=i),void 0!==o&&(this.scaleFactors=o)}},t.TranslateDto=class{constructor(t,e){this.translation=[0,0,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.translation=e)}},t.TranslateShapesDto=class{constructor(t,e){this.translations=[[0,0,0]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.translations=e)}},t.AlignNormAndAxisDto=class{constructor(t,e,r,i,o,s,n){this.fromOrigin=[0,0,0],this.fromNorm=[1,0,0],this.fromAx=[0,0,1],this.toOrigin=[0,1,0],this.toNorm=[0,1,0],this.toAx=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.fromOrigin=e),void 0!==r&&(this.fromNorm=r),void 0!==i&&(this.fromAx=i),void 0!==o&&(this.toOrigin=o),void 0!==s&&(this.toNorm=s),void 0!==n&&(this.toAx=n)}},t.AlignDto=class{constructor(t,e,r,i,o){this.fromOrigin=[0,0,0],this.fromDirection=[0,0,1],this.toOrigin=[0,1,0],this.toDirection=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.fromOrigin=e),void 0!==r&&(this.fromDirection=r),void 0!==i&&(this.toOrigin=i),void 0!==o&&(this.toDirection=o)}},t.AlignShapesDto=class{constructor(t,e,r,i,o){this.fromOrigins=[[0,0,0]],this.fromDirections=[[0,0,1]],this.toOrigins=[[0,1,0]],this.toDirections=[[0,1,0]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.fromOrigins=e),void 0!==r&&(this.fromDirections=r),void 0!==i&&(this.toOrigins=i),void 0!==o&&(this.toDirections=o)}},t.MirrorDto=class{constructor(t,e,r){this.origin=[0,0,0],this.direction=[0,0,1],void 0!==t&&(this.shape=t),void 0!==e&&(this.origin=e),void 0!==r&&(this.direction=r)}},t.MirrorShapesDto=class{constructor(t,e,r){this.origins=[[0,0,0]],this.directions=[[0,0,1]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.origins=e),void 0!==r&&(this.directions=r)}},t.MirrorAlongNormalDto=class{constructor(t,e,r){this.origin=[0,0,0],this.normal=[0,0,1],void 0!==t&&(this.shape=t),void 0!==e&&(this.origin=e),void 0!==r&&(this.normal=r)}},t.MirrorAlongNormalShapesDto=class{constructor(t,e,r){this.origins=[[0,0,0]],this.normals=[[0,0,1]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.origins=e),void 0!==r&&(this.normals=r)}},t.AlignAndTranslateDto=class{constructor(t,e,r){this.direction=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.center=r)}},t.UnifySameDomainDto=class{constructor(t,e,r,i){this.unifyEdges=!0,this.unifyFaces=!0,this.concatBSplines=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.unifyEdges=e),void 0!==r&&(this.unifyFaces=r),void 0!==i&&(this.concatBSplines=i)}},t.FilterFacesPointsDto=class{constructor(t,e,r,i,o,s,n,a,c,h){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,this.flatPointsArray=!0,void 0!==t&&(this.shapes=t),void 0!==e&&(this.points=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==o&&(this.gapTolerance=o),void 0!==s&&(this.keepIn=s),void 0!==n&&(this.keepOn=n),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c),void 0!==h&&(this.flatPointsArray=h)}},t.FilterFacePointsDto=class{constructor(t,e,r,i,o,s,n,a,c){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.points=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==o&&(this.gapTolerance=o),void 0!==s&&(this.keepIn=s),void 0!==n&&(this.keepOn=n),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c)}},t.FilterSolidPointsDto=class{constructor(t,e,r,i,o,s,n){this.tolerance=1e-4,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.points=e),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.keepIn=i),void 0!==o&&(this.keepOn=o),void 0!==s&&(this.keepOut=s),void 0!==n&&(this.keepUnknown=n)}},t.AlignAndTranslateShapesDto=class{constructor(t,e,r){this.directions=[[0,1,0]],this.centers=[[0,0,0]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.directions=e),void 0!==r&&(this.centers=r)}},t.RotateDto=class{constructor(t,e,r){this.axis=[0,0,1],this.angle=0,void 0!==t&&(this.shape=t),void 0!==e&&(this.axis=e),void 0!==r&&(this.angle=r)}},t.RotateAroundCenterDto=class{constructor(t,e,r,i){this.angle=0,this.center=[0,0,0],this.axis=[0,0,1],void 0!==t&&(this.shape=t),void 0!==e&&(this.angle=e),void 0!==r&&(this.center=r),void 0!==i&&(this.axis=i)}},t.RotateShapesDto=class{constructor(t,e,r){this.angles=[0],void 0!==t&&(this.shapes=t),void 0!==e&&(this.axes=e),void 0!==r&&(this.angles=r)}},t.RotateAroundCenterShapesDto=class{constructor(t,e,r,i){this.angles=[0],this.centers=[[0,0,0]],this.axes=[[0,0,1]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.angles=e),void 0!==r&&(this.centers=r),void 0!==i&&(this.axes=i)}},t.ScaleDto=class{constructor(t,e){this.factor=1,void 0!==t&&(this.shape=t),void 0!==e&&(this.factor=e)}},t.ScaleShapesDto=class{constructor(t,e){this.factors=[1],void 0!==t&&(this.shapes=t),void 0!==e&&(this.factors=e)}},t.Scale3DDto=class{constructor(t,e,r){this.scale=[1,1,1],this.center=[0,0,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.scale=e),void 0!==r&&(this.center=r)}},t.Scale3DShapesDto=class{constructor(t,e,r){this.scales=[[1,1,1]],this.centers=[[0,0,0]],void 0!==t&&(this.shapes=t),void 0!==e&&(this.scales=e),void 0!==r&&(this.centers=r)}},t.ShapeToMeshDto=class{constructor(t,e,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.precision=e),void 0!==r&&(this.adjustYtoZ=r)}},t.ShapeFacesToPolygonPointsDto=class{constructor(t,e,r,i){this.precision=.01,this.adjustYtoZ=!1,this.reversedPoints=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.precision=e),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.reversedPoints=i)}},t.ShapesToMeshesDto=class{constructor(t,e,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.precision=e),void 0!==r&&(this.adjustYtoZ=r)}},t.SaveStepDto=class{constructor(t,e,r,i){this.fileName="shape.step",this.adjustYtoZ=!1,this.fromRightHanded=!1,this.tryDownload=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.fileName=e),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.tryDownload=i)}},t.SaveStlDto=class{constructor(t,e,r,i,o,s){this.fileName="shape.stl",this.precision=.01,this.adjustYtoZ=!1,this.tryDownload=!0,this.binary=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.fileName=e),void 0!==r&&(this.precision=r),void 0!==i&&(this.adjustYtoZ=i),void 0!==o&&(this.tryDownload=o),void 0!==s&&(this.binary=s)}},t.ShapeToDxfPathsDto=class{constructor(t,e,r,i,o,s){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==t&&(this.shape=t),void 0!==e&&(this.angularDeflection=e),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==o&&(this.uTolerance=o),void 0!==s&&(this.minimumLength=s)}},t.DxfPathsWithLayerDto=class{constructor(t,e,r){this.layer="Default",this.color="#000000",void 0!==t&&(this.paths=t),void 0!==e&&(this.layer=e),void 0!==r&&(this.color=r)}},t.DxfPathsPartsListDto=class{constructor(t,e,r,i){this.colorFormat=y.aci,this.acadVersion=P.AC1009,this.fileName="bitbybit-dev.dxf",this.tryDownload=!0,void 0!==t&&(this.pathsParts=t),void 0!==e&&(this.colorFormat=e),void 0!==r&&(this.acadVersion=r),void 0!==i&&(this.tryDownload=i)}},t.SaveDxfDto=class{constructor(t,e,r,i,o,s,n,a){this.fileName="shape.dxf",this.tryDownload=!0,this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==t&&(this.shape=t),void 0!==e&&(this.fileName=e),void 0!==r&&(this.tryDownload=r),void 0!==i&&(this.angularDeflection=i),void 0!==o&&(this.curvatureDeflection=o),void 0!==s&&(this.minimumOfPoints=s),void 0!==n&&(this.uTolerance=n),void 0!==a&&(this.minimumLength=a)}},t.ImportStepIgesFromTextDto=class{constructor(t,e,r){this.fileType=s.step,this.adjustZtoY=!0,void 0!==t&&(this.text=t),void 0!==e&&(this.fileType=e),void 0!==r&&(this.adjustZtoY=r)}},t.ImportStepIgesDto=class{constructor(t,e){this.adjustZtoY=!0,void 0!==t&&(this.assetFile=t),void 0!==e&&(this.adjustZtoY=e)}},t.LoadStepOrIgesDto=class{constructor(t,e,r){this.fileName="shape.igs",this.adjustZtoY=!0,void 0!==t&&(this.filetext=t),void 0!==e&&(this.fileName=e),void 0!==r&&(this.adjustZtoY=r)}},t.CompoundShapesDto=class{constructor(t){void 0!==t&&(this.shapes=t)}},t.ThisckSolidSimpleDto=class{constructor(t,e){this.offset=1,void 0!==t&&(this.shape=t),void 0!==e&&(this.offset=e)}},t.Offset3DWireDto=class{constructor(t,e,r){this.offset=1,this.direction=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.offset=e),void 0!==r&&(this.direction=r)}},t.FaceFromWireDto=class{constructor(t,e){this.planar=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.planar=e)}},t.FaceFromWireOnFaceDto=class{constructor(t,e,r){this.inside=!0,void 0!==t&&(this.wire=t),void 0!==e&&(this.face=e),void 0!==r&&(this.inside=r)}},t.FacesFromWiresOnFaceDto=class{constructor(t,e,r){this.inside=!0,void 0!==t&&(this.wires=t),void 0!==e&&(this.face=e),void 0!==r&&(this.inside=r)}},t.FaceFromWiresDto=class{constructor(t,e){this.planar=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.planar=e)}},t.FacesFromWiresDto=class{constructor(t,e){this.planar=!1,void 0!==t&&(this.shapes=t),void 0!==e&&(this.planar=e)}},t.FaceFromWiresOnFaceDto=class{constructor(t,e,r){this.inside=!0,void 0!==t&&(this.wires=t),void 0!==e&&(this.face=e),void 0!==r&&(this.inside=r)}},t.SewDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.shapes=t),void 0!==e&&(this.tolerance=e)}},t.FaceIsoCurveAtParamDto=class{constructor(t,e,r){this.dir="u",void 0!==t&&(this.shape=t),void 0!==e&&(this.param=e),void 0!==r&&(this.dir=r)}},t.DivideFaceToUVPointsDto=class{constructor(t,e,r,i){this.nrOfPointsU=10,this.nrOfPointsV=10,this.flat=!1,void 0!==t&&(this.shape=t),void 0!==e&&(this.nrOfPointsU=e),void 0!==r&&(this.nrOfPointsV=r),void 0!==i&&(this.flat=i)}},t.Geom2dEllipseDto=class{constructor(t,e,r,i,o){this.center=[0,0],this.direction=[1,0],this.radiusMinor=1,this.radiusMajor=2,this.sense=!1,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i),void 0!==o&&(this.sense=o)}},t.Geom2dCircleDto=class{constructor(t,e,r,i){this.center=[0,0],this.direction=[1,0],this.radius=1,this.sense=!1,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.radius=r),void 0!==i&&(this.sense=i)}};class S{constructor(t,e,r,i,o,s,n,a,c,h){this.height=6,this.innerDist=1.5,this.outerDist=3,this.nrSkirts=5,this.trunkHeight=1,this.trunkWidth=1,this.half=!1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.innerDist=e),void 0!==r&&(this.outerDist=r),void 0!==i&&(this.nrSkirts=i),void 0!==o&&(this.trunkHeight=o),void 0!==s&&(this.trunkWidth=s),void 0!==n&&(this.half=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c),void 0!==h&&(this.direction=h)}}t.ChristmasTreeDto=S;class M{constructor(t,e,r,i,o,s,n){this.center=[0,0,0],this.direction=[0,1,0],this.numRays=7,this.half=!1,void 0!==t&&(this.outerRadius=t),void 0!==e&&(this.innerRadius=e),void 0!==r&&(this.numRays=r),void 0!==i&&(this.center=i),void 0!==o&&(this.direction=o),void 0!==s&&(this.offsetOuterEdges=s),void 0!==n&&(this.half=n)}}t.StarDto=M;class W{constructor(t,e,r,i,o,s){this.center=[0,0,0],this.direction=[0,1,0],this.aroundCenter=!0,this.width=2,this.height=1,this.angle=15,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.aroundCenter=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o),void 0!==s&&(this.angle=s)}}t.ParallelogramDto=W;class E{constructor(t,e,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.rotation=0,this.sizeApprox=2,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.rotation=r),void 0!==i&&(this.sizeApprox=i)}}t.Heart2DDto=E;class D{constructor(t,e,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.nrCorners=6,this.radius=1,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.radius=i)}}t.NGonWireDto=D,t.EllipseDto=class{constructor(t,e,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.radiusMinor=1,this.radiusMajor=2,void 0!==t&&(this.center=t),void 0!==e&&(this.direction=e),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i)}},t.TextWiresDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u){this.text="Hello World",this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=2,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==t&&(this.text=t),void 0!==e&&(this.xOffset=e),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.lineSpacing=o),void 0!==s&&(this.letterSpacing=s),void 0!==n&&(this.align=n),void 0!==a&&(this.extrudeOffset=a),void 0!==u&&(this.centerOnOrigin=u)}},t.GeomCylindricalSurfaceDto=class{constructor(t,e,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.radius=t),void 0!==e&&(this.center=e),void 0!==r&&(this.direction=r)}},t.Geom2dTrimmedCurveDto=class{constructor(t,e,r,i,o){this.u1=0,this.u2=1,this.sense=!0,this.adjustPeriodic=!0,void 0!==t&&(this.shape=t),void 0!==e&&(this.u1=e),void 0!==r&&(this.u2=r),void 0!==i&&(this.sense=i),void 0!==o&&(this.adjustPeriodic=o)}},t.Geom2dSegmentDto=class{constructor(t,e){this.start=[0,0],this.end=[1,0],void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.SliceDto=class{constructor(t,e,r){this.step=.1,this.direction=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.step=e),void 0!==r&&(this.direction=r)}},t.SliceInStepPatternDto=class{constructor(t,e,r){this.steps=[.1,.2],this.direction=[0,1,0],void 0!==t&&(this.shape=t),void 0!==e&&(this.steps=e),void 0!==r&&(this.direction=r)}},t.SimpleLinearLengthDimensionDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g){this.offsetFromPoints=0,this.crossingSize=.2,this.decimalPlaces=2,this.labelSuffix="(cm)",this.labelSize=.1,this.labelOffset=.3,this.labelRotation=0,this.endType=w.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,this.labelOverwrite="1*val",this.removeTrailingZeros=!1,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromPoints=i),void 0!==o&&(this.crossingSize=o),void 0!==s&&(this.labelSuffix=s),void 0!==n&&(this.labelSize=n),void 0!==a&&(this.labelOffset=a),void 0!==c&&(this.labelRotation=c),void 0!==h&&(this.endType=h),void 0!==l&&(this.arrowSize=l),void 0!==u&&(this.arrowAngle=u),void 0!==d&&(this.arrowsFlipped=d),void 0!==v&&(this.labelFlipHorizontal=v),void 0!==f&&(this.labelFlipVertical=f),void 0!==p&&(this.labelOverwrite=p),void 0!==g&&(this.removeTrailingZeros=g)}},t.SimpleAngularDimensionDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b){this.direction1=[1,0,0],this.direction2=[0,0,1],this.center=[0,0,0],this.radius=4,this.offsetFromCenter=.5,this.extraSize=0,this.decimalPlaces=2,this.labelSuffix="(deg)",this.labelSize=.1,this.labelOffset=.3,this.radians=!1,this.endType=w.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelRotation=0,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,this.labelOverwrite="1*val",this.removeTrailingZeros=!1,void 0!==t&&(this.direction1=t),void 0!==e&&(this.direction2=e),void 0!==r&&(this.center=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.offsetFromCenter=o),void 0!==s&&(this.extraSize=s),void 0!==n&&(this.radians=n),void 0!==a&&(this.labelSuffix=a),void 0!==c&&(this.labelSize=c),void 0!==h&&(this.labelOffset=h),void 0!==l&&(this.endType=l),void 0!==u&&(this.arrowSize=u),void 0!==d&&(this.arrowAngle=d),void 0!==v&&(this.arrowsFlipped=v),void 0!==f&&(this.labelRotation=f),void 0!==p&&(this.labelFlipHorizontal=p),void 0!==g&&(this.labelFlipVertical=g),void 0!==m&&(this.labelOverwrite=m),void 0!==b&&(this.removeTrailingZeros=b)}},t.PinWithLabelDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v){this.startPoint=[0,0,0],this.endPoint=[0,5,2],this.direction=[0,0,1],this.offsetFromStart=0,this.label="Pin",this.labelOffset=.3,this.labelSize=.1,this.endType=w.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelRotation=0,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoint=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromStart=i),void 0!==o&&(this.label=o),void 0!==s&&(this.labelOffset=s),void 0!==n&&(this.labelSize=n),void 0!==a&&(this.endType=a),void 0!==c&&(this.arrowSize=c),void 0!==h&&(this.arrowAngle=h),void 0!==l&&(this.arrowsFlipped=l),void 0!==u&&(this.labelRotation=u),void 0!==d&&(this.labelFlipHorizontal=d),void 0!==v&&(this.labelFlipVertical=v)}},t.StarSolidDto=class extends M{constructor(t,e,r,i,o,s,n,a,c){super(t,e,r,i,o,s,n),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==a&&(this.extrusionLengthFront=a),void 0!==c&&(this.extrusionLengthBack=c)}},t.NGonSolidDto=class extends D{constructor(t,e,r,i,o,s){super(t,e,r,i),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==o&&(this.extrusionLengthFront=o),void 0!==s&&(this.extrusionLengthBack=s)}},t.ParallelogramSolidDto=class extends W{constructor(t,e,r,i,o,s,n,a){super(t,e,r,i,o,s),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==n&&(this.extrusionLengthFront=n),void 0!==a&&(this.extrusionLengthBack=a)}},t.HeartSolidDto=class extends E{constructor(t,e,r,i,o,s){super(t,e,r,i),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==o&&(this.extrusionLengthFront=o),void 0!==s&&(this.extrusionLengthBack=s)}},t.ChristmasTreeSolidDto=class extends S{constructor(t,e,r,i,o,s,n,a,c,h,l,u){super(t,e,r,i,o,s,n,a,c,h),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==l&&(this.extrusionLengthFront=l),void 0!==u&&(this.extrusionLengthBack=u)}},t.LPolygonSolidDto=class extends k{constructor(t,e,r,i,o,s,n,a,c,h){super(t,e,r,i,o,s,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}}}(Qt||(Qt={})),function(t){let e,r,i,o;!function(t){t.left="left",t.center="center",t.right="right"}(e=t.horizontalAlignEnum||(t.horizontalAlignEnum={})),function(t){t.top="top",t.middle="middle",t.bottom="bottom"}(r=t.verticalAlignmentEnum||(t.verticalAlignmentEnum={})),function(t){t.top="top",t.bottom="bottom"}(i=t.topBottomEnum||(t.topBottomEnum={})),function(t){t.topLeft="topLeft",t.topMid="topMid",t.topRight="topRight",t.midLeft="midLeft",t.midMid="midMid",t.midRight="midRight",t.bottomLeft="bottomLeft",t.bottomMid="bottomMid",t.bottomRight="bottomRight"}(o=t.basicAlignmentEnum||(t.basicAlignmentEnum={}))}(te||(te={}));class xe{constructor(t){this.math=t}hexColor(t){return t.color}hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t.color);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}rgbToHex(t){let e=t.r,r=t.g,i=t.b;return 255!==t.max&&(e=Math.round(this.math.remap({number:e,fromLow:t.min,fromHigh:t.max,toLow:0,toHigh:255})),r=Math.round(this.math.remap({number:r,fromLow:t.min,fromHigh:t.max,toLow:0,toHigh:255})),i=Math.round(this.math.remap({number:i,fromLow:t.min,fromHigh:t.max,toLow:0,toHigh:255}))),`#${Number(16777216+65536*e+256*r+i).toString(16).substring(1,7)}`}rgbObjToHex(t){return this.rgbToHex({r:t.rgb.r,g:t.rgb.g,b:t.rgb.b,min:t.min,max:t.max})}hexToRgbMapped(t){const e=this.hexToRgb(t);return{r:this.math.remap({number:e.r,fromLow:0,fromHigh:255,toLow:t.from,toHigh:t.to}),g:this.math.remap({number:e.g,fromLow:0,fromHigh:255,toLow:t.from,toHigh:t.to}),b:this.math.remap({number:e.b,fromLow:0,fromHigh:255,toLow:t.from,toHigh:t.to})}}getRedParam(t){return this.hexToRgbMapped(t).r}getGreenParam(t){return this.hexToRgbMapped(t).g}getBlueParam(t){return this.hexToRgbMapped(t).b}rgbToRed(t){return t.rgb.r}rgbToGreen(t){return t.rgb.g}rgbToBlue(t){return t.rgb.b}invert(t){const{r:e,g:r,b:i}=this.hexToRgbMapped({color:t.color,from:0,to:255});if(t.blackAndWhite)return.299*e+.587*r+.114*i>186?"#000000":"#ffffff";const o=255-e,s=255-r,n=255-i;return this.rgbToHex({r:o,g:s,b:n,min:0,max:255})}}!function(t){t.HexDto=class{constructor(t){this.color="#0000ff",void 0!==t&&(this.color=t)}},t.InvertHexDto=class{constructor(t){this.color="#0000ff",this.blackAndWhite=!1,void 0!==t&&(this.color=t)}},t.HexDtoMapped=class{constructor(t,e,r){this.color="#0000ff",this.from=0,this.to=255,void 0!==t&&(this.color=t),void 0!==e&&(this.from=e),void 0!==r&&(this.to=r)}},t.RGBObjectMaxDto=class{constructor(t,e){this.min=0,this.max=255,void 0!==t&&(this.rgb=t),void 0!==e&&(this.max=e)}},t.RGBMinMaxDto=class{constructor(t,e,r,i,o){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==t&&(this.r=t),void 0!==e&&(this.g=e),void 0!==r&&(this.b=r),void 0!==i&&(this.min=i),void 0!==o&&(this.max=o)}},t.RGBObjectDto=class{constructor(t){void 0!==t&&(this.rgb=t)}}}(ee||(ee={})),function(t){let e;!function(t){t.first="first",t.last="last"}(e=t.firstLastEnum||(t.firstLastEnum={})),t.ListItemDto=class{constructor(t,e,r){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==r&&(this.clone=r)}},t.SubListDto=class{constructor(t,e,r,i){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexStart=e),void 0!==r&&(this.indexEnd=r),void 0!==i&&(this.clone=i)}},t.ListCloneDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RepeatInPatternDto=class{constructor(t){this.clone=!0,this.lengthLimit=100,void 0!==t&&(this.list=t)}},t.SortDto=class{constructor(t,e,r){this.clone=!0,this.orderAsc=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==r&&(this.orderAsc=r)}},t.SortJsonDto=class{constructor(t,e,r){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==r&&(this.orderAsc=r)}},t.ListDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.GroupListDto=class{constructor(t,e,r){this.nrElements=2,this.keepRemainder=!1,void 0!==t&&(this.list=t),void 0!==e&&(this.nrElements=e),void 0!==r&&(this.keepRemainder=r)}},t.MultiplyItemDto=class{constructor(t,e){void 0!==t&&(this.item=t),void 0!==e&&(this.times=e)}},t.AddItemAtIndexDto=class{constructor(t,e,r,i){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==r&&(this.index=r),void 0!==i&&(this.clone=i)}},t.AddItemAtIndexesDto=class{constructor(t,e,r,i){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},t.AddItemsAtIndexesDto=class{constructor(t,e,r,i){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.items=e),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},t.RemoveItemAtIndexDto=class{constructor(t,e,r){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==r&&(this.clone=r)}},t.RemoveItemsAtIndexesDto=class{constructor(t,e,r){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexes=e),void 0!==r&&(this.clone=r)}},t.RemoveNthItemDto=class{constructor(t,e,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},t.RandomThresholdDto=class{constructor(t,e,r){this.threshold=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.threshold=e),void 0!==r&&(this.clone=r)}},t.RemoveDuplicatesDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RemoveDuplicatesToleranceDto=class{constructor(t,e,r){this.tolerance=1e-7,this.clone=!0,void 0!==t&&(this.list=t),void 0!==r&&(this.tolerance=r),void 0!==e&&(this.clone=e)}},t.GetByPatternDto=class{constructor(t,e){this.pattern=[!0,!0,!1],void 0!==t&&(this.list=t),void 0!==e&&(this.pattern=e)}},t.GetNthItemDto=class{constructor(t,e,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},t.GetLongestListLength=class{constructor(t){void 0!==t&&(this.lists=t)}},t.MergeElementsOfLists=class{constructor(t,e){this.level=0,void 0!==t&&(this.lists=t),void 0!==e&&(this.level=e)}},t.AddItemDto=class{constructor(t,e,r){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==r&&(this.clone=r)}},t.AddItemFirstLastDto=class{constructor(t,r,i,o){this.position=e.last,this.clone=!0,void 0!==t&&(this.list=t),void 0!==r&&(this.item=r),void 0!==i&&(this.position=i),void 0!==o&&(this.clone=o)}},t.ConcatenateDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.lists=t),void 0!==e&&(this.clone=e)}},t.IncludesDto=class{constructor(t,e){void 0!==t&&(this.list=t),void 0!==e&&(this.item=e)}},t.InterleaveDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.lists=t),void 0!==e&&(this.clone=e)}}}(re||(re={})),function(t){let e;!function(t){t.less="<",t.lessOrEqual="<=",t.greater=">",t.greaterOrEqual=">=",t.tripleEqual="===",t.tripleNotEqual="!==",t.equal="==",t.notEqual="!="}(e=t.BooleanOperatorsEnum||(t.BooleanOperatorsEnum={})),t.ComparisonDto=class{constructor(t,e,r){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==r&&(this.operator=r)}},t.BooleanDto=class{constructor(t){this.boolean=!1,void 0!==t&&(this.boolean=t)}},t.BooleanListDto=class{constructor(t){void 0!==t&&(this.booleans=t)}},t.ValueGateDto=class{constructor(t,e){this.boolean=!1,void 0!==t&&(this.value=t),void 0!==e&&(this.boolean=e)}},t.TwoValueGateDto=class{constructor(t,e){void 0!==t&&(this.value1=t),void 0!==e&&(this.value2=e)}},t.RandomBooleansDto=class{constructor(t){this.length=10,this.trueThreshold=.5,void 0!==t&&(this.length=t)}},t.TwoThresholdRandomGradientDto=class{},t.ThresholdBooleanListDto=class{},t.ThresholdGapsBooleanListDto=class{}}(ie||(ie={})),function(t){let e,r,i;!function(t){t.add="add",t.subtract="subtract",t.multiply="multiply",t.divide="divide",t.power="power",t.modulus="modulus"}(e=t.mathTwoNrOperatorEnum||(t.mathTwoNrOperatorEnum={})),function(t){t.absolute="absolute",t.negate="negate",t.ln="ln",t.log10="log10",t.tenPow="tenPow",t.round="round",t.floor="floor",t.ceil="ceil",t.sqrt="sqrt",t.sin="sin",t.cos="cos",t.tan="tan",t.asin="asin",t.acos="acos",t.atan="atan",t.log="log",t.exp="exp",t.radToDeg="radToDeg",t.degToRad="degToRad"}(r=t.mathOneNrOperatorEnum||(t.mathOneNrOperatorEnum={})),function(t){t.easeInSine="easeInSine",t.easeOutSine="easeOutSine",t.easeInOutSine="easeInOutSine",t.easeInQuad="easeInQuad",t.easeOutQuad="easeOutQuad",t.easeInOutQuad="easeInOutQuad",t.easeInCubic="easeInCubic",t.easeOutCubic="easeOutCubic",t.easeInOutCubic="easeInOutCubic",t.easeInQuart="easeInQuart",t.easeOutQuart="easeOutQuart",t.easeInOutQuart="easeInOutQuart",t.easeInQuint="easeInQuint",t.easeOutQuint="easeOutQuint",t.easeInOutQuint="easeInOutQuint",t.easeInExpo="easeInExpo",t.easeOutExpo="easeOutExpo",t.easeInOutExpo="easeInOutExpo",t.easeInCirc="easeInCirc",t.easeOutCirc="easeOutCirc",t.easeInOutCirc="easeInOutCirc",t.easeInElastic="easeInElastic",t.easeOutElastic="easeOutElastic",t.easeInOutElastic="easeInOutElastic",t.easeInBack="easeInBack",t.easeOutBack="easeOutBack",t.easeInOutBack="easeInOutBack",t.easeInBounce="easeInBounce",t.easeOutBounce="easeOutBounce",t.easeInOutBounce="easeInOutBounce"}(i=t.easeEnum||(t.easeEnum={})),t.ModulusDto=class{constructor(t,e){this.number=1,this.modulus=2,void 0!==t&&(this.number=t),void 0!==e&&(this.modulus=e)}},t.NumberDto=class{constructor(t){this.number=1,void 0!==t&&(this.number=t)}},t.EaseDto=class{constructor(t){this.x=.5,this.min=0,this.max=1,void 0!==t&&(this.x=t)}},t.RoundToDecimalsDto=class{constructor(t,e){this.number=1.123456,this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}},t.ActionOnTwoNumbersDto=class{constructor(t,e,r){this.first=1,this.second=1,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==r&&(this.operation=r)}},t.TwoNumbersDto=class{constructor(t,e){this.first=1,this.second=2,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.ActionOnOneNumberDto=class{constructor(t,e){this.number=1,void 0!==t&&(this.number=t),void 0!==e&&(this.operation=e)}},t.RemapNumberDto=class{constructor(t,e,r,i,o){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==t&&(this.number=t),void 0!==e&&(this.fromLow=e),void 0!==r&&(this.fromHigh=r),void 0!==i&&(this.toLow=i),void 0!==o&&(this.toHigh=o)}},t.RandomNumberDto=class{constructor(t,e){this.low=0,this.high=1,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e)}},t.RandomNumbersDto=class{constructor(t,e,r){this.low=0,this.high=1,this.count=10,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e),void 0!==r&&(this.count=r)}},t.ToFixedDto=class{constructor(t,e){this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}},t.ClampDto=class{constructor(t,e,r){this.number=.5,this.min=0,this.max=1,void 0!==t&&(this.number=t),void 0!==e&&(this.min=e),void 0!==r&&(this.max=r)}},t.LerpDto=class{constructor(t,e,r){this.start=0,this.end=1,this.t=.5,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==r&&(this.t=r)}},t.InverseLerpDto=class{constructor(t,e,r){this.start=0,this.end=1,this.value=.5,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==r&&(this.value=r)}},t.WrapDto=class{constructor(t,e,r){this.number=1.5,this.min=0,this.max=1,void 0!==t&&(this.number=t),void 0!==e&&(this.min=e),void 0!==r&&(this.max=r)}},t.PingPongDto=class{constructor(t,e){this.t=.5,this.length=1,void 0!==t&&(this.t=t),void 0!==e&&(this.length=e)}},t.MoveTowardsDto=class{constructor(t,e,r){this.current=0,this.target=1,this.maxDelta=.1,void 0!==t&&(this.current=t),void 0!==e&&(this.target=e),void 0!==r&&(this.maxDelta=r)}}}(oe||(oe={})),(ye=se||(se={})).PointDto=class{constructor(t){void 0!==t&&(this.point=t)}},ye.PointXYZDto=class{constructor(t,e,r){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==r&&(this.z=r)}},ye.PointXYDto=class{constructor(t,e){this.x=0,this.y=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},ye.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},ye.TwoPointsDto=class{constructor(t,e){void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e)}},ye.DrawPointDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.point=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.pointMesh=s)}},ye.DrawPointsDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.pointsMesh=s)}},ye.TransformPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.transformation=e)}},ye.TransformPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},ye.TranslatePointsWithVectorsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translations=e)}},ye.TranslatePointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translation=e)}},ye.TranslateXYZPointsDto=class{constructor(t,e,r,i){this.x=0,this.y=1,this.z=0,void 0!==t&&(this.points=t),void 0!==e&&(this.x=e),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},ye.ScalePointsCenterXYZDto=class{constructor(t,e,r){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==r&&(this.scaleXyz=r)}},ye.StretchPointsDirFromCenterDto=class{constructor(t,e,r,i){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==r&&(this.direction=r),void 0!==i&&(this.scale=i)}},ye.RotatePointsCenterAxisDto=class{constructor(t,e,r,i){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.points=t),void 0!==e&&(this.angle=e),void 0!==r&&(this.axis=r),void 0!==i&&(this.center=i)}},ye.TransformsForPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},ye.ThreePointsNormalDto=class{constructor(t,e,r,i){this.reverseNormal=!1,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==r&&(this.point3=r),void 0!==i&&(this.reverseNormal=i)}},ye.ThreePointsToleranceDto=class{constructor(t,e,r,i){this.tolerance=1e-7,void 0!==t&&(this.start=t),void 0!==e&&(this.center=e),void 0!==r&&(this.end=r),void 0!==i&&(this.tolerance=i)}},ye.PointsMaxFilletsHalfLineDto=class{constructor(t,e,r){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==e&&(this.checkLastWithFirst=e),void 0!==r&&(this.tolerance=r)}},ye.RemoveConsecutiveDuplicatesDto=class{constructor(t,e,r){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.tolerance=e),void 0!==r&&(this.checkFirstAndLast=r)}},ye.ClosestPointFromPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.point=e)}},ye.TwoPointsToleranceDto=class{constructor(t,e,r){this.tolerance=1e-7,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==r&&(this.tolerance=r)}},ye.StartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoint=e)}},ye.StartEndPointsListDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoints=e)}},ye.MultiplyPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.amountOfPoints=e)}},ye.SpiralDto=class{constructor(t,e,r,i,o){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==t&&(this.radius=t),void 0!==e&&(this.numberPoints=e),void 0!==r&&(this.widening=r),void 0!==i&&(this.factor=i),void 0!==o&&(this.phi=o)}},ye.HexGridScaledToFitDto=class{constructor(t,e,r,i,o,s){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==o&&(this.centerGrid=o),void 0!==s&&(this.pointsOnGround=s)}},ye.HexGridCentersDto=class{constructor(t,e,r,i,o){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==t&&(this.nrHexagonsX=t),void 0!==e&&(this.nrHexagonsY=e),void 0!==r&&(this.radiusHexagon=r),void 0!==i&&(this.orientOnCenter=i),void 0!==o&&(this.pointsOnGround=o)}},function(t){t.TextDto=class{constructor(t){this.text="Hello World",void 0!==t&&(this.text=t)}},t.TextSplitDto=class{constructor(t,e){this.text="a,b,c",this.separator=",",void 0!==t&&(this.text=t),void 0!==e&&(this.separator=e)}},t.TextReplaceDto=class{constructor(t,e,r){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==t&&(this.text=t),void 0!==e&&(this.search=e),void 0!==r&&(this.replaceWith=r)}},t.TextJoinDto=class{constructor(t,e){this.separator=",",void 0!==t&&(this.list=t),void 0!==e&&(this.separator=e)}},t.ToStringDto=class{constructor(t){void 0!==t&&(this.item=t)}},t.ToStringEachDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.TextFormatDto=class{constructor(t,e){this.text="Hello {0}",this.values=["World"],void 0!==t&&(this.text=t),void 0!==e&&(this.values=e)}},t.TextSearchDto=class{constructor(t,e){this.text="hello world",this.search="world",void 0!==t&&(this.text=t),void 0!==e&&(this.search=e)}},t.TextSubstringDto=class{constructor(t,e,r){this.text="hello world",this.start=0,this.end=5,void 0!==t&&(this.text=t),void 0!==e&&(this.start=e),void 0!==r&&(this.end=r)}},t.TextIndexDto=class{constructor(t,e){this.text="hello",this.index=0,void 0!==t&&(this.text=t),void 0!==e&&(this.index=e)}},t.TextPadDto=class{constructor(t,e,r){this.text="x",this.length=3,this.padString="a",void 0!==t&&(this.text=t),void 0!==e&&(this.length=e),void 0!==r&&(this.padString=r)}},t.TextRepeatDto=class{constructor(t,e){this.text="ha",this.count=3,void 0!==t&&(this.text=t),void 0!==e&&(this.count=e)}},t.TextConcatDto=class{constructor(t){this.texts=["hello"," ","world"],void 0!==t&&(this.texts=t)}},t.TextRegexDto=class{constructor(t,e,r){this.text="hello123world",this.pattern="[0-9]+",this.flags="g",void 0!==t&&(this.text=t),void 0!==e&&(this.pattern=e),void 0!==r&&(this.flags=r)}},t.TextRegexReplaceDto=class{constructor(t,e,r,i){this.text="hello123world456",this.pattern="[0-9]+",this.flags="g",this.replaceWith="X",void 0!==t&&(this.text=t),void 0!==e&&(this.pattern=e),void 0!==r&&(this.flags=r),void 0!==i&&(this.replaceWith=i)}},t.VectorCharDto=class{constructor(t,e,r,i,o){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==t&&(this.char=t),void 0!==e&&(this.xOffset=e),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.extrudeOffset=o)}},t.VectorTextDto=class{constructor(t,e,r,i,o,s,n,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==t&&(this.text=t),void 0!==e&&(this.xOffset=e),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.lineSpacing=o),void 0!==s&&(this.letterSpacing=s),void 0!==n&&(this.align=n),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(ne||(ne={})),(be=ae||(ae={})).RotationCenterAxisDto=class{constructor(t,e,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.axis=e),void 0!==r&&(this.center=r)}},be.RotationCenterDto=class{constructor(t,e){this.angle=90,this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.center=e)}},be.RotationCenterYawPitchRollDto=class{constructor(t,e,r,i){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==t&&(this.yaw=t),void 0!==e&&(this.pitch=e),void 0!==r&&(this.roll=r),void 0!==i&&(this.center=i)}},be.ScaleXYZDto=class{constructor(t){this.scaleXyz=[1,1,1],void 0!==t&&(this.scaleXyz=t)}},be.StretchDirCenterDto=class{constructor(t,e,r){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e),void 0!==r&&(this.direction=r)}},be.ScaleCenterXYZDto=class{constructor(t,e){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.center=t),void 0!==e&&(this.scaleXyz=e)}},be.UniformScaleDto=class{constructor(t){this.scale=1,void 0!==t&&(this.scale=t)}},be.UniformScaleFromCenterDto=class{constructor(t,e){this.scale=1,this.center=[0,0,0],void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e)}},be.TranslationXYZDto=class{constructor(t){this.translation=[0,0,0],void 0!==t&&(this.translation=t)}},be.TranslationsXYZDto=class{constructor(t){void 0!==t&&(this.translations=t)}},function(t){t.DateDto=class{constructor(t){void 0!==t&&(this.date=t)}},t.DateStringDto=class{constructor(t){void 0!==t&&(this.dateString=t)}},t.DateSecondsDto=class{constructor(t,e){this.seconds=30,void 0!==t&&(this.date=t),void 0!==e&&(this.seconds=e)}},t.DateDayDto=class{constructor(t,e){this.day=1,void 0!==t&&(this.date=t),void 0!==e&&(this.day=e)}},t.DateYearDto=class{constructor(t,e){this.year=1,void 0!==t&&(this.date=t),void 0!==e&&(this.year=e)}},t.DateMonthDto=class{constructor(t,e){this.month=1,void 0!==t&&(this.date=t),void 0!==e&&(this.month=e)}},t.DateHoursDto=class{constructor(t,e){this.hours=1,void 0!==t&&(this.date=t),void 0!==e&&(this.hours=e)}},t.DateMinutesDto=class{constructor(t,e){this.minutes=1,void 0!==t&&(this.date=t),void 0!==e&&(this.minutes=e)}},t.DateMillisecondsDto=class{constructor(t,e){this.milliseconds=1,void 0!==t&&(this.date=t),void 0!==e&&(this.milliseconds=e)}},t.DateTimeDto=class{constructor(t,e){this.time=1,void 0!==t&&(this.date=t),void 0!==e&&(this.time=e)}},t.CreateFromUnixTimeStampDto=class{constructor(t){this.unixTimeStamp=1,void 0!==t&&(this.unixTimeStamp=t)}},t.CreateDateDto=class{constructor(t,e,r,i,o,s,n){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==t&&(this.year=t),void 0!==e&&(this.month=e),void 0!==r&&(this.day=r),void 0!==i&&(this.hours=i),void 0!==o&&(this.minutes=o),void 0!==s&&(this.seconds=s),void 0!==n&&(this.milliseconds=n)}}}(ce||(ce={})),(me=he||(he={})).LinePointsDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},me.LineStartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoints=t),void 0!==e&&(this.endPoints=e)}},me.DrawLineDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.line=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.lineMesh=s)}},me.DrawLinesDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.lines=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.linesMesh=s)}},me.PointsLinesDto=class{constructor(t){void 0!==t&&(this.points=t)}},me.LineDto=class{constructor(t){void 0!==t&&(this.line=t)}},me.SegmentDto=class{constructor(t){void 0!==t&&(this.segment=t)}},me.SegmentsDto=class{constructor(t){void 0!==t&&(this.segments=t)}},me.LinesDto=class{constructor(t){void 0!==t&&(this.lines=t)}},me.LineLineIntersectionDto=class{constructor(t,e,r){this.checkSegmentsOnly=!0,void 0!==t&&(this.line1=t),void 0!==e&&(this.line2=e),void 0!==r&&(this.tolerance=r)}},me.PointOnLineDto=class{constructor(t,e){this.param=.5,void 0!==t&&(this.line=t),void 0!==e&&(this.param=e)}},me.TransformLineDto=class{constructor(t,e){void 0!==t&&(this.line=t),void 0!==e&&(this.transformation=e)}},me.TransformsLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}},me.TransformLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}},(ge=le||(le={})).PolylineCreateDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},ge.PolylinePropertiesDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},ge.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},ge.PolylinesDto=class{constructor(t){void 0!==t&&(this.polylines=t)}},ge.TransformPolylineDto=class{constructor(t,e){void 0!==t&&(this.polyline=t),void 0!==e&&(this.transformation=e)}},ge.DrawPolylineDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polyline=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.polylineMesh=s)}},ge.DrawPolylinesDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polylines=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.polylinesMesh=s)}},ge.SegmentsToleranceDto=class{constructor(t){this.tolerance=1e-5,void 0!==t&&(this.segments=t)}},ge.PolylineToleranceDto=class{constructor(t,e){this.tolerance=1e-5,void 0!==t&&(this.polyline=t),void 0!==e&&(this.tolerance=e)}},ge.TwoPolylinesToleranceDto=class{constructor(t,e,r){this.tolerance=1e-5,void 0!==t&&(this.polyline1=t),void 0!==e&&(this.polyline2=e),void 0!==r&&(this.tolerance=r)}},(pe=ue||(ue={})).SignedDistanceFromPlaneToPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.plane=e)}},pe.TriangleDto=class{constructor(t){void 0!==t&&(this.triangle=t)}},pe.TriangleToleranceDto=class{constructor(t){this.tolerance=1e-7,void 0!==t&&(this.triangle=t)}},pe.TriangleTriangleToleranceDto=class{constructor(t,e,r){this.tolerance=1e-7,void 0!==t&&(this.triangle1=t),void 0!==e&&(this.triangle2=e),void 0!==r&&(this.tolerance=r)}},pe.MeshMeshToleranceDto=class{constructor(t,e,r){this.tolerance=1e-7,void 0!==t&&(this.mesh1=t),void 0!==e&&(this.mesh2=e),void 0!==r&&(this.tolerance=r)}},function(t){t.DxfLineSegmentDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.DxfArcSegmentDto=class{constructor(t,e,r,i){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.startAngle=r),void 0!==i&&(this.endAngle=i)}},t.DxfCircleSegmentDto=class{constructor(t,e){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e)}},t.DxfPolylineSegmentDto=class{constructor(t,e,r){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e),void 0!==r&&(this.bulges=r)}},t.DxfSplineSegmentDto=class{constructor(t,e,r){this.degree=3,this.closed=!1,void 0!==t&&(this.controlPoints=t),void 0!==e&&(this.degree=e),void 0!==r&&(this.closed=r)}},t.DxfPathDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.DxfPathsPartDto=class{constructor(t,e,r){this.layer="Default",this.color="#000000",void 0!==t&&(this.layer=t),void 0!==e&&(this.color=e),void 0!==r&&(this.paths=r)}},t.DxfModelDto=class{constructor(t,e,r){this.colorFormat="aci",this.acadVersion="AC1009",void 0!==t&&(this.dxfPathsParts=t),void 0!==e&&(this.colorFormat=e),void 0!==r&&(this.acadVersion=r)}}}(de||(de={})),(fe=ve||(ve={})).TwoVectorsDto=class{constructor(t,e){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},fe.VectorBoolDto=class{constructor(t){void 0!==t&&(this.vector=t)}},fe.RemoveAllDuplicateVectorsDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.tolerance=e)}},fe.RemoveConsecutiveDuplicateVectorsDto=class{constructor(t,e,r){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.checkFirstAndLast=e),void 0!==r&&(this.tolerance=r)}},fe.VectorsTheSameDto=class{constructor(t,e,r){this.tolerance=1e-7,void 0!==t&&(this.vec1=t),void 0!==e&&(this.vec2=e),void 0!==r&&(this.tolerance=r)}},fe.VectorDto=class{constructor(t){void 0!==t&&(this.vector=t)}},fe.VectorStringDto=class{constructor(t){void 0!==t&&(this.vector=t)}},fe.Vector3Dto=class{constructor(t){void 0!==t&&(this.vector=t)}},fe.RangeMaxDto=class{constructor(t){void 0!==t&&(this.max=t)}},fe.VectorXYZDto=class{constructor(t,e,r){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==r&&(this.z=r)}},fe.VectorXYDto=class{constructor(t,e){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},fe.SpanDto=class{constructor(t,e,r){this.step=.1,this.min=0,this.max=1,void 0!==t&&(this.step=t),void 0!==e&&(this.min=e),void 0!==r&&(this.max=r)}},fe.SpanEaseItemsDto=class{constructor(t,e,r,i){this.nrItems=100,this.min=0,this.max=1,this.ease=oe.easeEnum.easeInSine,this.intervals=!1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==r&&(this.max=r),void 0!==i&&(this.ease=i)}},fe.SpanLinearItemsDto=class{constructor(t,e,r){this.nrItems=100,this.min=0,this.max=1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==r&&(this.max=r)}},fe.RayPointDto=class{constructor(t,e,r){void 0!==t&&(this.point=t),void 0!==e&&(this.distance=e),void 0!==r&&(this.vector=r)}},fe.VectorsDto=class{constructor(t){void 0!==t&&(this.vectors=t)}},fe.FractionTwoVectorsDto=class{constructor(t,e,r){this.fraction=.5,void 0!==t&&(this.fraction=t),void 0!==e&&(this.first=e),void 0!==r&&(this.second=r)}},fe.VectorScalarDto=class{constructor(t,e){void 0!==t&&(this.scalar=t),void 0!==e&&(this.vector=e)}},fe.TwoVectorsReferenceDto=class{constructor(t,e,r){void 0!==t&&(this.reference=t),void 0!==e&&(this.first=e),void 0!==r&&(this.second=r)}};class _e{getItem(t){if(t.index<0||t.index>=t.list.length)throw new Error("Index out of bounds");let e;return e=t.clone?structuredClone(t.list[t.index]):t.list[t.index],e}getFirstItem(t){if(0===t.list.length)throw new Error("List is empty");let e;return e=t.clone?structuredClone(t.list[0]):t.list[0],e}getLastItem(t){if(0===t.list.length)throw new Error("List is empty");let e;return e=t.clone?structuredClone(t.list[t.list.length-1]):t.list[t.list.length-1],e}randomGetThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[];for(let i=0;i<t.list.length;i++)Math.random()<t.threshold&&r.push(e[i]);return r}getSubList(t){let e;return e=t.clone?structuredClone(t.list.slice(t.indexStart,t.indexEnd)):t.list.slice(t.indexStart,t.indexEnd),e}getNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[];for(let i=0;i<e.length;i++)(i+t.offset)%t.nth==0&&r.push(e[i]);return r}getByPattern(t){const{list:e,pattern:r}=t;if(!r||0===r.length)throw new Error("Pattern is empty or does not exist");const i=r.length,o=e.length,s=[];if(i>=o)e.forEach(((t,e)=>{!0===r[e]&&s.push(t)}));else{const t=[],n=Math.ceil(o/i);for(let e=0;e<n;e++)t.push(...r);e.forEach(((e,r)=>{!0===t[r]&&s.push(e)}))}return s}mergeElementsOfLists(t){const e=t.lists,r=t.level,i=[],o=[];e.forEach((t=>{const e=t.flat(r);i.push(e)}));const s=this.getLongestListLength({lists:i});for(let t=0;t<s;t++){const e=[];for(let r=0;r<i.length;r++){const o=i[r][t];void 0!==o&&e.push(o)}e.length>0&&o.push(e)}let n=[];if(r>0)for(let t=0;t<r;t++)t===r-1&&0!==t?n[t-1].push(o):t===r-1?n.push(o):n.push([]);else n=o;return n}getLongestListLength(t){let e=0;return t.lists?(t.lists.forEach((t=>{t.length>e&&(e=t.length)})),e):void 0}reverse(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.reverse()}shuffle(t){let e=t.list;t.clone&&(e=structuredClone(t.list));for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}flipLists(t){if(t.list.length>0){const e=t.list[0].length;let r=!0;if(t.list.forEach((t=>{t.length!==e&&(r=!1)})),r){const r=[];for(let i=0;i<e;i++){const e=[];t.list.forEach((t=>{e.push(t[i])})),r.push(e)}return r}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(t){return(t=>{const{nrElements:e,list:r,keepRemainder:i}=t,o=e,s=[];let n=[];return r.forEach(((t,e)=>{n.push(t),(e+1)%o==0&&(s.push(n),n=[]),n.length>0&&i&&e===r.length-1&&s.push(n)})),s})(t)}includes(t){return t.list.includes(t.item)}findIndex(t){return t.list.indexOf(t.item)}getListDepth(t){let e=0,r=!0,i=t.list;for(;r;){let t=!1;for(let e=0;e<i.length;e++)Array.isArray(i[e])&&(t=!0);i=i.flat(),t?e++:(e++,r=!1)}return e}listLength(t){return t.list.length}addItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,0,t.item),e}addItemAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));let r=[...t.indexes];return r=r.filter((t=>t>=0&&t<=e.length)),r.sort(((t,e)=>t-e)),r.forEach(((r,i)=>{r>=0&&r+i<=e.length&&e.splice(r+i,0,t.item)})),e}addItemsAtIndexes(t){if(t.items.length!==t.indexes.length)throw new Error("Items and indexes must have the same length");for(let e=0;e<t.indexes.length;e++)if(e>0&&t.indexes[e-1]>t.indexes[e])throw new Error("Indexes must be in ascending order");let e=t.list;return t.clone&&(e=structuredClone(t.list)),[...t.indexes].forEach(((r,i)=>{r>=0&&r+i<=e.length&&e.splice(r+i,0,t.items[i])})),e}removeItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,1),e}removeFirstItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.length>0&&e.shift(),e}removeLastItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.length>0&&e.pop(),e}removeItemAtIndexFromEnd(t){let e=t.list;if(t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<e.length){const r=e.length-1-t.index;e.splice(r,1)}return e}removeItemsAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[...t.indexes];return r.sort(((t,e)=>e-t)),r.forEach((t=>{t>=0&&t<e.length&&e.splice(t,1)})),e}removeAllItems(t){return t.list.length=0,t.list}removeNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[];for(let i=0;i<e.length;i++)(i+t.offset)%t.nth!=0&&r.push(e[i]);return r}randomRemoveThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[];for(let i=0;i<t.list.length;i++)Math.random()>t.threshold&&r.push(e[i]);return r}removeDuplicateNumbers(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((t,e,r)=>r.indexOf(t)===e))}removeDuplicateNumbersTolerance(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((e,r,i)=>i.findIndex((r=>Math.abs(r-e)<t.tolerance))===r))}removeDuplicates(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((t,e,r)=>r.indexOf(t)===e))}addItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.push(t.item),e}prependItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.unshift(t.item),e}addItemFirstLast(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.position===re.firstLastEnum.first?e.unshift(t.item):e.push(t.item),e}concatenate(t){let e=[];return t.clone?t.lists.forEach((t=>{e=e.concat(structuredClone(t))})):t.lists.forEach((t=>{e=e.concat(t)})),e}createEmptyList(){return[]}repeat(t){const e=[];for(let r=0;r<t.times;r++)e.push(t.item);return e}repeatInPattern(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const r=[];let i=0,o=0;for(;i<t.lengthLimit;)r.push(e[o]),o++,o===e.length&&(o=0),i++;return r}sortNumber(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((t,e)=>t-e)):e.sort(((t,e)=>e-t))}sortTexts(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort():e.sort().reverse()}sortByPropValue(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((e,r)=>e[t.property]-r[t.property])):e.sort(((e,r)=>r[t.property]-e[t.property]))}interleave(t){const e=t.clone?structuredClone(t.lists):t.lists;if(!e||0===e.length)throw new Error("Lists array is empty or does not exist");const r=[],i=Math.max(...e.map((t=>t.length)));for(let t=0;t<i;t++)for(const i of e)t<i.length&&r.push(i[t]);return r}}class Te{boolean(t){return t.boolean}randomBooleans(t){const e=[];for(let r=0;r<t.length;r++)e.push(Math.random()<t.trueThreshold);return e}twoThresholdRandomGradient(t){const e=[];return t.numbers.forEach((r=>{if(r<t.thresholdTotalTrue)e.push(!0);else if(r>t.thresholdTotalFalse)e.push(!1);else{const i=r-t.thresholdTotalTrue,o=(t.thresholdTotalFalse-t.thresholdTotalTrue)/t.nrLevels,s=Math.ceil(i/o)/t.nrLevels;Math.random()>s?e.push(!0):e.push(!1)}})),e}thresholdBooleanList(t){const e=[];return t.numbers.forEach((r=>{r<t.threshold?e.push(!0):e.push(!1)})),t.inverse?e.map((t=>!t)):e}thresholdGapsBooleanList(t){const e=[];return t.numbers.forEach((r=>{let i=!1;t.gapThresholds.forEach((t=>{const o=t[0],s=t[1];r>=o&&r<=s&&(e.push(!0),i=!0)})),i||e.push(!1)})),t.inverse?e.map((t=>!t)):e}not(t){return!t.boolean}notList(t){return t.booleans.map((t=>!t))}compare(t){switch(t.operator){case"==":return t.first==t.second;case"!=":return t.first!=t.second;case"===":return t.first===t.second;case"!==":return t.first!==t.second;case"<":return t.first<t.second;case"<=":return t.first<=t.second;case">":return t.first>t.second;case">=":return t.first>=t.second;default:return!1}}valueGate(t){return t.boolean?t.value:void 0}firstDefinedValueGate(t){let e;return e=void 0!==t.value1?t.value1:void 0!==t.value2?t.value2:void 0,e}}class Se{number(t){return t.number}twoNrOperation(t){let e;switch(t.operation){case oe.mathTwoNrOperatorEnum.add:e=t.first+t.second;break;case oe.mathTwoNrOperatorEnum.subtract:e=t.first-t.second;break;case oe.mathTwoNrOperatorEnum.multiply:e=t.first*t.second;break;case oe.mathTwoNrOperatorEnum.divide:e=t.first/t.second;break;case oe.mathTwoNrOperatorEnum.power:e=Math.pow(t.first,t.second);break;case oe.mathTwoNrOperatorEnum.modulus:e=t.first%t.second}return e}modulus(t){return this.twoNrOperation({first:t.number,second:t.modulus,operation:oe.mathTwoNrOperatorEnum.modulus})}roundToDecimals(t){return Math.round(t.number*Math.pow(10,t.decimalPlaces))/Math.pow(10,t.decimalPlaces)}roundAndRemoveTrailingZeros(t){const e=Math.round(t.number*Math.pow(10,t.decimalPlaces))/Math.pow(10,t.decimalPlaces);return parseFloat(e.toFixed(t.decimalPlaces))}oneNrOperation(t){let e;switch(t.operation){case oe.mathOneNrOperatorEnum.absolute:e=Math.abs(t.number);break;case oe.mathOneNrOperatorEnum.negate:e=-t.number;break;case oe.mathOneNrOperatorEnum.ln:e=Math.log(t.number);break;case oe.mathOneNrOperatorEnum.log10:e=Math.log10(t.number);break;case oe.mathOneNrOperatorEnum.tenPow:e=Math.pow(10,t.number);break;case oe.mathOneNrOperatorEnum.round:e=Math.round(t.number);break;case oe.mathOneNrOperatorEnum.floor:e=Math.floor(t.number);break;case oe.mathOneNrOperatorEnum.ceil:e=Math.ceil(t.number);break;case oe.mathOneNrOperatorEnum.sqrt:e=Math.sqrt(t.number);break;case oe.mathOneNrOperatorEnum.sin:e=Math.sin(t.number);break;case oe.mathOneNrOperatorEnum.cos:e=Math.cos(t.number);break;case oe.mathOneNrOperatorEnum.tan:e=Math.tan(t.number);break;case oe.mathOneNrOperatorEnum.asin:e=Math.asin(t.number);break;case oe.mathOneNrOperatorEnum.acos:e=Math.acos(t.number);break;case oe.mathOneNrOperatorEnum.atan:e=Math.atan(t.number);break;case oe.mathOneNrOperatorEnum.log:e=Math.log(t.number);break;case oe.mathOneNrOperatorEnum.exp:e=Math.exp(t.number);break;case oe.mathOneNrOperatorEnum.degToRad:e=t.number*Math.PI/180;break;case oe.mathOneNrOperatorEnum.radToDeg:e=180*t.number/Math.PI}return e}remap(t){return(t.number-t.fromLow)*(t.toHigh-t.toLow)/(t.fromHigh-t.fromLow)+t.toLow}random(){return Math.random()}randomNumber(t){return Math.random()*(t.high-t.low)+t.low}randomNumbers(t){const e=[];for(let r=0;r<t.count;r++)e.push(this.randomNumber(t));return e}pi(){return Math.PI}toFixed(t){return t.number.toFixed(t.decimalPlaces)}add(t){return t.first+t.second}subtract(t){return t.first-t.second}multiply(t){return t.first*t.second}divide(t){return t.first/t.second}power(t){return Math.pow(t.first,t.second)}sqrt(t){return Math.sqrt(t.number)}abs(t){return Math.abs(t.number)}round(t){return Math.round(t.number)}floor(t){return Math.floor(t.number)}ceil(t){return Math.ceil(t.number)}negate(t){return-t.number}ln(t){return Math.log(t.number)}log10(t){return Math.log10(t.number)}tenPow(t){return Math.pow(10,t.number)}sin(t){return Math.sin(t.number)}cos(t){return Math.cos(t.number)}tan(t){return Math.tan(t.number)}asin(t){return Math.asin(t.number)}acos(t){return Math.acos(t.number)}atan(t){return Math.atan(t.number)}exp(t){return Math.exp(t.number)}degToRad(t){return t.number*Math.PI/180}radToDeg(t){return 180*t.number/Math.PI}ease(t){const e=t.x,r=t.min,i=t.max,o=this[t.ease](e);return this.remap({number:o,fromLow:0,fromHigh:1,toLow:r,toHigh:i})}clamp(t){return Math.max(t.min,Math.min(t.max,t.number))}lerp(t){return t.start+(t.end-t.start)*t.t}inverseLerp(t){return t.start===t.end?0:(t.value-t.start)/(t.end-t.start)}smoothstep(t){const e=Math.max(0,Math.min(1,t.number));return e*e*(3-2*e)}sign(t){return Math.sign(t.number)}fract(t){return t.number-Math.floor(t.number)}wrap(t){const e=t.max-t.min;if(0===e)return t.min;const r=(t.number-t.min)%e;return r<0?r+t.max:r+t.min}pingPong(t){const e=Math.abs(t.t)%(2*t.length);return e>t.length?2*t.length-e:e}moveTowards(t){const e=t.target-t.current;return Math.abs(e)<=t.maxDelta?t.target:t.current+Math.sign(e)*t.maxDelta}easeInSine(t){return 1-Math.cos(t*Math.PI/2)}easeOutSine(t){return Math.sin(t*Math.PI/2)}easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}easeInQuad(t){return t*t}easeOutQuad(t){return 1-(1-t)*(1-t)}easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}easeInCubic(t){return t*t*t}easeOutCubic(t){return 1-Math.pow(1-t,3)}easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}easeInQuart(t){return t*t*t*t}easeOutQuart(t){return 1-Math.pow(1-t,4)}easeInOutQuart(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}easeInQuint(t){return t*t*t*t*t}easeOutQuint(t){return 1-Math.pow(1-t,5)}easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}easeInExpo(t){return 0===t?0:Math.pow(2,10*t-10)}easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}easeInCirc(t){return 1-Math.sqrt(1-t*t)}easeOutCirc(t){return Math.sqrt(1-Math.pow(t-1,2))}easeInOutCirc(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}easeInBack(t){return 2.70158*t*t*t-1.70158*t*t}easeOutBack(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}easeInOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}easeInElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}easeOutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}easeInOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}easeInBounce(t){return 1-this.easeOutBounce(1-t)}easeOutBounce(t){const e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375}easeInOutBounce(t){return t<.5?(1-this.easeOutBounce(1-2*t))/2:(1+this.easeOutBounce(2*t-1))/2}}class Me{constructor(t,e,r,i){this.geometryHelper=t,this.transforms=e,this.vector=r,this.lists=i}transformPoint(t){const e=t.transformation;let r=[t.point];return r=this.geometryHelper.transformControlPoints(e,r),r[0]}transformPoints(t){return this.geometryHelper.transformControlPoints(t.transformation,t.points)}transformsForPoints(t){if(t.points.length!==t.transformation.length)throw new Error("You must provide equal nr of points and transformations");return t.points.map(((e,r)=>this.geometryHelper.transformControlPoints(t.transformation[r],[e])[0]))}translatePoints(t){const e=this.transforms.translationXYZ({translation:t.translation});return this.geometryHelper.transformControlPoints(e,t.points)}translatePointsWithVectors(t){if(t.points.length!==t.translations.length)throw new Error("You must provide equal nr of points and translations");const e=this.transforms.translationsXYZ({translations:t.translations});return t.points.map(((t,r)=>this.geometryHelper.transformControlPoints(e[r],[t])[0]))}translateXYZPoints(t){const e=this.transforms.translationXYZ({translation:[t.x,t.y,t.z]});return this.geometryHelper.transformControlPoints(e,t.points)}scalePointsCenterXYZ(t){const e=this.transforms.scaleCenterXYZ({center:t.center,scaleXyz:t.scaleXyz});return this.geometryHelper.transformControlPoints(e,t.points)}stretchPointsDirFromCenter(t){const e=this.transforms.stretchDirFromCenter({center:t.center,scale:t.scale,direction:t.direction});return this.geometryHelper.transformControlPoints(e,t.points)}rotatePointsCenterAxis(t){const e=this.transforms.rotationCenterAxis({center:t.center,axis:t.axis,angle:t.angle});return this.geometryHelper.transformControlPoints(e,t.points)}boundingBoxOfPoints(t){const e=[],r=[],i=[];t.points.forEach((t=>{e.push(t[0]),r.push(t[1]),i.push(t[2])}));const o=[Math.min(...e),Math.min(...r),Math.min(...i)],s=[Math.max(...e),Math.max(...r),Math.max(...i)];return{min:o,max:s,center:[(o[0]+s[0])/2,(o[1]+s[1])/2,(o[2]+s[2])/2],width:s[0]-o[0],height:s[1]-o[1],length:s[2]-o[2]}}closestPointFromPointsDistance(t){return this.closestPointFromPointData(t).distance}closestPointFromPointsIndex(t){return this.closestPointFromPointData(t).index}closestPointFromPoints(t){return this.closestPointFromPointData(t).point}distance(t){const e=t.endPoint[0]-t.startPoint[0],r=t.endPoint[1]-t.startPoint[1],i=t.endPoint[2]-t.startPoint[2];return Math.sqrt(e*e+r*r+i*i)}distancesToPoints(t){return t.endPoints.map((e=>this.distance({startPoint:t.startPoint,endPoint:e})))}multiplyPoint(t){const e=[];for(let r=0;r<t.amountOfPoints;r++)e.push([t.point[0],t.point[1],t.point[2]]);return e}getX(t){return t.point[0]}getY(t){return t.point[1]}getZ(t){return t.point[2]}averagePoint(t){const e=[],r=[],i=[];return t.points.forEach((t=>{e.push(t[0]),r.push(t[1]),i.push(t[2])})),[e.reduce(((t,e)=>t+e),0)/t.points.length,r.reduce(((t,e)=>t+e),0)/t.points.length,i.reduce(((t,e)=>t+e),0)/t.points.length]}pointXYZ(t){return[t.x,t.y,t.z]}pointXY(t){return[t.x,t.y]}spiral(t){const e=t.phi,r=Math.log(e)/(Math.PI/t.widening),i=[],o=t.radius/t.numberPoints;for(let e=0;e<t.radius;e+=o){const o=Math.log(e/t.factor)/r,s=e*Math.cos(o),n=e*Math.sin(o);i.push([s||0,n||0,0])}return i}hexGrid(t){const e=Math.sqrt(Math.pow(t.radiusHexagon,2)-Math.pow(t.radiusHexagon/2,2)),r=[];for(let i=0;i<t.nrHexagonsX;i++){const o=i*e*2;for(let i=0;i<t.nrHexagonsY;i++){const s=(t.radiusHexagon+t.radiusHexagon/2)*i,n=o+(i%2==0?0:e);r.push([n,s,0])}}if(t.orientOnCenter){const t=r[r.length-1][0]/2,e=r[r.length-1][1]/2;r.forEach(((i,o)=>{r[o]=[i[0]-t,i[1]-e,0]}))}return t.pointsOnGround&&r.forEach(((t,e)=>{r[e]=[t[0],0,t[1]]})),r}hexGridScaledToFit(t){var e,r,i,o;let s=t.width,n=t.height,a=t.nrHexagonsInHeight,c=t.nrHexagonsInWidth,h=null!==(e=t.extendTop)&&void 0!==e&&e,l=null!==(r=t.extendBottom)&&void 0!==r&&r,u=null!==(i=t.extendLeft)&&void 0!==i&&i,d=null!==(o=t.extendRight)&&void 0!==o&&o;const{flatTop:v=!1,centerGrid:f=!1,pointsOnGround:p=!1}=t;if(v){const e=s;s=t.height,n=e;const r=c;c=a,a=r;const i=h,o=l;h=u,l=d,u=o,d=i}if(s<=0||n<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const m=g.map((t=>this.getRegularHexagonVertices(t,1)));let b=1/0,y=-1/0,P=1/0,w=-1/0;for(const t of m)for(const e of t)e[0]<b&&(b=e[0]),e[0]>y&&(y=e[0]),e[1]<P&&(P=e[1]),e[1]>w&&(w=e[1]);const k=y-b,C=w-P,x=k>1e-9?s/k:1,_=C>1e-9?n/C:1;let T=g.map((t=>[(t[0]-b)*x,(t[1]-P)*_,0])),S=m.map((t=>t.map((t=>[(t[0]-b)*x,(t[1]-P)*_,0])))),M=1/0,W=-1/0,E=0;if(0!==S.length){const t=S[0];if(E=this.safestPointsMaxFilletHalfLine({points:t,checkLastWithFirst:!0,tolerance:1e-7}),t.forEach(((e,r)=>{const i=t[(r+1)%t.length],o=this.distance({startPoint:e,endPoint:i});o<M&&(M=o),o>W&&(W=o)})),h||l||u||d){const e=t[0],r=t[1],i=e[1]-r[1],o=r[0]-e[0];if(h&&!l){const t={center:[0,0,0],direction:[0,1,0],scale:n/(n-i)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(l&&!h){const t={center:[0,n,0],direction:[0,-1,0],scale:n/(n-i)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(h&&l){const t={center:[0,n/2,0],direction:[0,1,0],scale:n/(n-2*i)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(u&&!d){const t={center:[s,0,0],direction:[1,0,0],scale:s/(s-o)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(d&&!u){const t={center:[0,0,0],direction:[1,0,0],scale:s/(s-o)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(u&&d){const t={center:[s/2,0,0],direction:[1,0,0],scale:s/(s-2*o)};S=S.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}}}if(v){T=this.rotatePointsCenterAxis({points:T,center:[s/2,n/2,0],axis:[0,0,1],angle:90}),S=S.map((t=>this.rotatePointsCenterAxis({points:t,center:[s/2,n/2,0],axis:[0,0,1],angle:90})));const t=this.vector.sub({first:[n/2,s/2,0],second:[s/2,n/2,0]});T=this.translatePoints({points:T,translation:t}),S=S.map((e=>this.translatePoints({points:e,translation:t})))}if(f){let t=s/2,e=n/2;v&&(t=n/2,e=s/2);for(let r=0;r<T.length;r++)T[r][0]-=t,T[r][1]-=e;for(let r=0;r<S.length;r++)for(let i=0;i<S[r].length;i++)S[r][i][0]-=t,S[r][i][1]-=e}if(p){for(let t=0;t<T.length;t++)T[t]=[T[t][0],0,T[t][1]];for(let t=0;t<S.length;t++)for(let e=0;e<S[t].length;e++)S[t][e]=[S[t][e][0],0,S[t][e][1]]}if(v){const e=this.lists.groupNth({list:S.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:e});r.forEach((t=>t.reverse())),S=r.flat();const i=this.lists.groupNth({list:T.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),o=this.lists.flipLists({list:i});o.forEach((t=>t.reverse())),T=o.flat()}return{centers:T,hexagons:S,shortestDistEdge:M,longestDistEdge:W,maxFilletRadius:E}}maxFilletRadius(t){const{start:e,center:r,end:i,tolerance:o=1e-7}=t,s=this.vector.sub({first:e,second:i}),n=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:s}),c=this.vector.length({vector:n});if(a<o||c<o)return 0;const h=this.vector.normalized({vector:s}),l=this.vector.normalized({vector:n});if(!h||!l)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(u>1-o)return 0;if(u<-1+o)return 0;const d=Math.acos(u),v=Math.tan(d/2);return v<o?0:Math.min(a,c)*v}maxFilletRadiusHalfLine(t){const{start:e,center:r,end:i,tolerance:o=1e-7}=t,s=this.vector.sub({first:e,second:i}),n=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:s}),c=this.vector.length({vector:n});if(a<o||c<o)return 0;const h=this.vector.normalized({vector:s}),l=this.vector.normalized({vector:n});if(!h||!l)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(u>1-o||u<-1+o)return 0;const d=Math.acos(u),v=Math.tan(d/2);return v<o?0:Math.min(a/2,c/2)*v}maxFilletsHalfLine(t){const{points:e,checkLastWithFirst:r=!1,tolerance:i=1e-7}=t,o=e.length,s=[];if(o<3)return s;for(let t=1;t<o-1;t++){const r=e[t-1],o=e[t],n={start:r,center:e[t+1],end:o,tolerance:i};s.push(this.maxFilletRadiusHalfLine(n))}if(r&&o>=3){const t=e[o-1],r=e[0],n={start:t,center:e[1],end:r,tolerance:i};s.push(this.maxFilletRadiusHalfLine(n));const a=e[o-2],c=e[o-1],h={start:a,center:e[0],end:c,tolerance:i};s.push(this.maxFilletRadiusHalfLine(h))}return s}safestPointsMaxFilletHalfLine(t){const e=this.maxFilletsHalfLine(t);if(0===e.length)return 0;const r=Math.min(...e);return Math.max(0,r)}removeConsecutiveDuplicates(t){return this.geometryHelper.removeConsecutivePointDuplicates(t.points,t.checkFirstAndLast,t.tolerance)}normalFromThreePoints(t){const e=t.point1,r=t.point2,i=t.point3;if(!e||!r||!i||3!==e.length||3!==r.length||3!==i.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const o=r[0]-e[0],s=r[1]-e[1],n=r[2]-e[2],a=i[0]-e[0],c=i[1]-e[1],h=i[2]-e[2];let l=s*h-n*c,u=n*a-o*h,d=o*c-s*a;if(0!==l||0!==u||0!==d)return t.reverseNormal&&(l=-l,u=-u,d=-d),this.vector.normalized({vector:[l,u,d]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(t){let e,r,i=Number.MAX_SAFE_INTEGER;for(let o=0;o<t.points.length;o++){const s=t.points[o],n=this.distance({startPoint:t.point,endPoint:s});n<i&&(i=n,e=o,r=s)}return{index:e+1,distance:i,point:r}}twoPointsAlmostEqual(t){const e=t.point1,r=t.point2;return this.distance({startPoint:e,endPoint:r})<t.tolerance}sortPoints(t){return[...t.points].sort(((t,e)=>t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]))}getRegularHexagonVertices(t,e){const r=[],i=t[0],o=t[1],s=t[2],n=Math.PI/3;for(let t=0;t<6;t++){const a=n*t;r.push([i+e*Math.sin(a),o+e*Math.cos(a),s])}return r}}const We={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12],176:[14,7,21,5,20,4,18,4,16,5,14,7,13,9,14,10,16,10,18,9,20,7,21],178:[14,5,17,5,18,6,19,7,20,9,21,10,21,11,20,12,19,12,18,11,17,10,16,6,14,12,14],179:[14,5,21,11,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],181:[19,4,14,4,-7,void 0,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],185:[14,7,19,8,20,10,21,10,14],188:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],189:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,15,4,15,5,16,6,17,7,19,7,20,6,20,5,19,4,17,2,15,0,21,0],190:[26,4,21,10,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],215:[18,3,15,15,3,void 0,15,15,3,3],247:[22,4,9,18,9,void 0,11,15,10,14,11,13,12,14,11,15,void 0,11,5,10,4,11,3,12,4,11,5],177:[26,13,18,13,6,void 0,4,12,22,12,void 0,4,3,22,3],8304:[14,8,21,7,20,6,19,5,17,5,15,6,14,8,14,9,14,11,15,12,17,12,19,11,20,9,21,8,21],8308:[14,10,21,6,17,12,17,void 0,10,21,10,14],8309:[14,11,21,6,21,5,17,6,17,7,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],8310:[14,11,19,10,20,9,21,7,21,6,20,5,18,5,15,6,14,8,14,9,14,10,15,11,16,11,17,10,18,9,18,8,17,7,16,6,15],8311:[14,11,21,7,14,void 0,5,21,11,21],8312:[14,8,21,7,20,6,19,6,18,7,17,8,17,9,18,10,19,10,20,9,21,8,21,7,20,void 0,8,17,7,16,6,15,6,14,7,13,8,13,9,14,10,15,10,16,9,17],8313:[14,10,17,9,16,8,16,7,17,6,18,6,19,7,20,8,20,9,19,10,18,10,15,9,14,7,14,6,15,5,16],8320:[14,8,7,7,6,6,5,5,3,5,1,6,0,8,0,9,0,11,1,12,3,12,5,11,6,9,7,8,7],8321:[14,7,5,8,6,10,7,10,0],8322:[14,5,4,5,5,6,6,7,7,9,7,10,6,11,5,11,4,10,3,9,2,6,0,12,0],8323:[14,5,7,11,7,8,4,10,4,11,3,12,2,12,1,11,0,9,0,7,1,6,2,5,3],8324:[14,10,7,6,3,12,3,void 0,10,7,10,0],8776:[24,3,11,4,13,6,14,8,14,10,13,14,10,16,9,18,9,20,10,21,12,void 0,3,5,4,7,6,8,8,8,10,7,14,4,16,3,18,3,20,4,21,6],8730:[20,4,12,6,8,8,0,void 0,8,0,10,21,void 0,10,21,20,21],8731:[24,2,21,5,21,4,19,5,18,6,17,6,16,5,15,3,15,2,16,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8732:[24,5,21,3,18,6,18,void 0,5,21,5,15,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8960:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,6,3,16,18]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class Ee{constructor(t){this.point=t}create(t){return t.text}split(t){return t.text.split(t.separator)}replaceAll(t){return t.text.split(t.search).join(t.replaceWith)}join(t){return t.list.join(t.separator)}toString(t){return t.item.toString()}toStringEach(t){return t.list.map((t=>t.toString()))}format(t){return t.text.replace(/{(\d+)}/g,((e,r)=>void 0!==t.values[r]?t.values[r]:e))}includes(t){return t.text.includes(t.search)}startsWith(t){return t.text.startsWith(t.search)}endsWith(t){return t.text.endsWith(t.search)}indexOf(t){return t.text.indexOf(t.search)}lastIndexOf(t){return t.text.lastIndexOf(t.search)}substring(t){return t.text.substring(t.start,t.end)}slice(t){return t.text.slice(t.start,t.end)}charAt(t){return t.text.charAt(t.index)}trim(t){return t.text.trim()}trimStart(t){return t.text.trimStart()}trimEnd(t){return t.text.trimEnd()}padStart(t){return t.text.padStart(t.length,t.padString)}padEnd(t){return t.text.padEnd(t.length,t.padString)}toUpperCase(t){return t.text.toUpperCase()}toLowerCase(t){return t.text.toLowerCase()}toUpperCaseFirst(t){return t.text?t.text.charAt(0).toUpperCase()+t.text.slice(1):t.text}toLowerCaseFirst(t){return t.text?t.text.charAt(0).toLowerCase()+t.text.slice(1):t.text}repeat(t){return t.text.repeat(t.count)}reverse(t){return t.text.split("").reverse().join("")}length(t){return t.text.length}isEmpty(t){return!t.text||0===t.text.trim().length}concat(t){return t.texts.join("")}regexTest(t){return new RegExp(t.pattern,t.flags).test(t.text)}regexMatch(t){const e=new RegExp(t.pattern,t.flags),r=t.text.match(e);return r?Array.from(r):null}regexReplace(t){const e=new RegExp(t.pattern,t.flags);return t.text.replace(e,t.replaceWith)}regexSearch(t){const e=new RegExp(t.pattern,t.flags);return t.text.search(e)}regexSplit(t){const e=new RegExp(t.pattern,t.flags);return t.text.split(e)}vectorChar(t){const{xOffset:e,yOffset:r,font:i,input:o,height:s,extrudeOffset:n}=this.vectorParamsChar(t);let a=o.charCodeAt(0);a&&i[a]||(a=63);const c=[].concat(i[a]),h=(s-n)/i.height,l=n/2,u=c.shift()*h,d=[];let v=[];for(let t=0,i=c.length;t<i;t+=2){const i=h*c[t]+e,o=h*c[t+1]+r+l;void 0===c[t]?(d.push(v),v=[],t--):v.push([i,0,o])}return v.length&&d.push(v),{width:u,height:s,paths:d}}vectorText(t){const{xOffset:e,yOffset:r,height:i,align:o,extrudeOffset:s,lineSpacing:n,letterSpacing:a}=Object.assign({},We,t),c=t.text;if("string"!=typeof c)throw new Error("text must be a string");const h=i*a;let l=0,u={width:0,height:0,chars:[]},d=[];const v=()=>{l=Math.max(l,u.width),u.chars.length&&d.push(u),u={width:0,height:0,chars:[]}};let f,p=e,g=r;const m=c.length;for(let t=0;t<m;t++){const r=c[t];if("\n"===r){v(),p=e,g-=i*n;continue}f=this.vectorChar({xOffset:p,yOffset:g,height:i,extrudeOffset:s,char:r});const o=f.width+h;p+=o,u.width+=o,u.height=Math.max(u.height,f.height)," "!==r&&(u.chars=u.chars.concat(f))}if(u.chars.length&&v(),d=d.map((t=>{const e=l-t.width;return o===te.horizontalAlignEnum.right?this.translateLine({x:e},t):o===te.horizontalAlignEnum.center?this.translateLine({x:e/2},t):t})),t.centerOnOrigin){const t=[];d.forEach((e=>{e.chars.forEach((e=>{e.paths.forEach((e=>{t.push(...e)}))}))}));const e=this.point.boundingBoxOfPoints({points:t});d.forEach((t=>{t.chars.forEach((t=>(t.paths=t.paths.map((t=>this.point.translatePoints({points:t,translation:[-e.center[0],-e.center[1],-e.center[2]]}))),t)))}))}return d}vectorParamsChar(t){const e=Object.assign({},We,t);return e.input=t.char||e.char,e}translateLine(t,e){const{x:r,y:i}=Object.assign({x:0,y:0},t);return e.chars=e.chars.map((t=>(t.paths=t.paths.map((t=>this.point.translatePoints({points:t,translation:[r,0,i]}))),t))),e}}class De{toDateString(t){return t.date.toDateString()}toISOString(t){return t.date.toISOString()}toJSON(t){return t.date.toJSON()}toString(t){return t.date.toString()}toTimeString(t){return t.date.toTimeString()}toUTCString(t){return t.date.toUTCString()}now(){return new Date(Date.now())}createDate(t){return new Date(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds)}createDateUTC(t){return new Date(Date.UTC(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds))}createFromUnixTimeStamp(t){return new Date(t.unixTimeStamp)}parseDate(t){return Date.parse(t.dateString)}getDayOfMonth(t){return t.date.getDate()}getWeekday(t){return t.date.getDay()}getYear(t){return t.date.getFullYear()}getMonth(t){return t.date.getMonth()}getHours(t){return t.date.getHours()}getMinutes(t){return t.date.getMinutes()}getSeconds(t){return t.date.getSeconds()}getMilliseconds(t){return t.date.getMilliseconds()}getTime(t){return t.date.getTime()}getUTCYear(t){return t.date.getUTCFullYear()}getUTCMonth(t){return t.date.getUTCMonth()}getUTCDay(t){return t.date.getUTCDate()}getUTCHours(t){return t.date.getUTCHours()}getUTCMinutes(t){return t.date.getUTCMinutes()}getUTCSeconds(t){return t.date.getUTCSeconds()}getUTCMilliseconds(t){return t.date.getUTCMilliseconds()}setYear(t){const e=new Date(t.date.getTime());return e.setFullYear(t.year),e}setMonth(t){const e=new Date(t.date.getTime());return e.setMonth(t.month),e}setDayOfMonth(t){const e=new Date(t.date.getTime());return e.setDate(t.day),e}setHours(t){const e=new Date(t.date.getTime());return e.setHours(t.hours),e}setMinutes(t){const e=new Date(t.date.getTime());return e.setMinutes(t.minutes),e}setSeconds(t){const e=new Date(t.date.getTime());return e.setSeconds(t.seconds),e}setMilliseconds(t){const e=new Date(t.date.getTime());return e.setMilliseconds(t.milliseconds),e}setTime(t){const e=new Date(t.date.getTime());return e.setTime(t.time),e}setUTCYear(t){const e=new Date(t.date.getTime());return e.setUTCFullYear(t.year),e}setUTCMonth(t){const e=new Date(t.date.getTime());return e.setUTCMonth(t.month),e}setUTCDay(t){const e=new Date(t.date.getTime());return e.setUTCDate(t.day),e}setUTCHours(t){const e=new Date(t.date.getTime());return e.setUTCHours(t.hours),e}setUTCMinutes(t){const e=new Date(t.date.getTime());return e.setUTCMinutes(t.minutes),e}setUTCSeconds(t){const e=new Date(t.date.getTime());return e.setUTCSeconds(t.seconds),e}setUTCMilliseconds(t){const e=new Date(t.date.getTime());return e.setUTCMilliseconds(t.milliseconds),e}}class Oe{constructor(t,e){this.math=t,this.geometryHelper=e}removeAllDuplicateVectors(t){return this.geometryHelper.removeAllDuplicateVectors(t.vectors,t.tolerance)}removeConsecutiveDuplicateVectors(t){return this.geometryHelper.removeConsecutiveVectorDuplicates(t.vectors,t.checkFirstAndLast,t.tolerance)}vectorsTheSame(t){return this.geometryHelper.vectorsTheSame(t.vec1,t.vec2,t.tolerance)}angleBetween(t){return this.math.radToDeg({number:Math.acos(this.dot({first:t.first,second:t.second})/(this.norm({vector:t.first})*this.norm({vector:t.second})))})}angleBetweenNormalized2d(t){const e=t.first[0]*t.second[1]-t.first[1]*t.second[0];return this.math.radToDeg({number:Math.atan2(e,this.dot({first:t.first,second:t.second}))})}positiveAngleBetween(t){const e=this.signedAngleBetween(t);return e<0?360+e:e}addAll(t){const e=[];for(let r=0;r<t.vectors[0].length;r++){let i=0;for(const e of t.vectors)i+=e[r];e.push(i)}return e}add(t){const e=[];for(let r=0;r<t.first.length;r++)e.push(t.first[r]+t.second[r]);return e}all(t){return t.vector.every((t=>t))}cross(t){const e=[];return e.push(t.first[1]*t.second[2]-t.first[2]*t.second[1]),e.push(t.first[2]*t.second[0]-t.first[0]*t.second[2]),e.push(t.first[0]*t.second[1]-t.first[1]*t.second[0]),e}distSquared(t){let e=0;for(let r=0;r<t.first.length;r++)e+=Math.pow(t.first[r]-t.second[r],2);return e}dist(t){return Math.sqrt(this.distSquared(t))}div(t){const e=[];for(let r=0;r<t.vector.length;r++)e.push(t.vector[r]/t.scalar);return e}domain(t){return t.vector[t.vector.length-1]-t.vector[0]}dot(t){let e=0;for(let r=0;r<t.first.length;r++)e+=t.first[r]*t.second[r];return e}finite(t){return t.vector.map((t=>isFinite(t)))}isZero(t){return 0===this.norm({vector:t.vector})}lerp(t){return this.add({first:this.mul({vector:t.first,scalar:t.fraction}),second:this.mul({vector:t.second,scalar:1-t.fraction})})}max(t){return Math.max(...t.vector)}min(t){return Math.min(...t.vector)}mul(t){const e=[];for(let r=0;r<t.vector.length;r++)e.push(t.vector[r]*t.scalar);return e}neg(t){const e=[];for(let r=0;r<t.vector.length;r++)e.push(-t.vector[r]);return e}normSquared(t){return this.dot({first:t.vector,second:t.vector})}norm(t){const e=this.normSquared(t);return 0!==e?Math.sqrt(e):e}normalized(t){if(!(this.length({vector:t.vector})<=1e-8))return this.div({scalar:this.norm(t),vector:t.vector})}onRay(t){return this.add({first:t.point,second:this.mul({vector:t.vector,scalar:t.distance})})}vectorXYZ(t){return[t.x,t.y,t.z]}vectorXY(t){return[t.x,t.y]}range(t){const e=[];for(let r=0;r<t.max;r++)e.push(r);return e}signedAngleBetween(t){const e=this.cross({first:t.first,second:t.second}),r=this.norm({vector:t.first})*this.norm({vector:t.second}),i=this.dot({first:t.first,second:t.second}),o=this.norm({vector:e})/r,s=i/r,n=Math.atan2(o,s),a=this.dot({first:t.reference,second:e})>0?n:2*Math.PI-n;return this.math.radToDeg({number:a})}span(t){const e=[];for(let r=t.min;r<=t.max;r+=t.step)e.push(r);return e}spanEaseItems(t){const e=[];for(let r=0;r<t.nrItems;r++){const i=1*r/(t.nrItems-1);e.push(this.math.ease({x:i,ease:t.ease,min:t.min,max:t.max}))}return t.intervals?e.map(((t,e,r)=>0===e?t:t-r[e-1])):e}spanLinearItems(t){const e=[],r=t.max-t.min;for(let i=0;i<t.nrItems;i++){const o=r*i/(t.nrItems-1);e.push(o+t.min)}return e}sub(t){const e=[];for(let r=0;r<t.first.length;r++)e.push(t.first[r]-t.second[r]);return e}sum(t){return t.vector.reduce(((t,e)=>t+e),0)}lengthSq(t){const e=t.vector;return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}length(t){return Math.sqrt(this.lengthSq(t))}parseNumbers(t){return t.vector.map((t=>parseFloat(t)))}}class Ae{constructor(t,e){this.vector=t,this.math=e}rotationCenterAxis(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationAxis(t.axis,this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterX(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationX(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterY(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationY(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationZ(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterYawPitchRoll(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:t.yaw}),this.math.degToRad({number:t.pitch}),this.math.degToRad({number:t.roll})),this.translation(t.center[0],t.center[1],t.center[2])]}scaleCenterXYZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2]),this.translation(t.center[0],t.center[1],t.center[2])]}scaleXYZ(t){return[this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2])]}stretchDirFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.stretchDirection(t.direction,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}uniformScale(t){return[this.scaling(t.scale,t.scale,t.scale)]}uniformScaleFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scale,t.scale,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}translationXYZ(t){return[this.translation(t.translation[0],t.translation[1],t.translation[2])]}translationsXYZ(t){return t.translations.map((t=>[this.translation(t[0],t[1],t[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(t,e,r){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1]}scaling(t,e,r){return[t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1]}rotationAxis(t,e){const r=Math.sin(-e),i=Math.cos(-e),o=1-i,s=this.vector.normalized({vector:t}),n=s[0],a=s[1],c=s[2],h=this.identity();return h[0]=n*n*o+i,h[1]=n*a*o-c*r,h[2]=n*c*o+a*r,h[3]=0,h[4]=a*n*o+c*r,h[5]=a*a*o+i,h[6]=a*c*o-n*r,h[7]=0,h[8]=c*n*o-a*r,h[9]=c*a*o+n*r,h[10]=c*c*o+i,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}rotationX(t){const e=Math.sin(t),r=Math.cos(t);return[1,0,0,0,0,r,e,0,0,-e,r,0,0,0,0,1]}rotationY(t){const e=Math.sin(t),r=Math.cos(t);return[r,0,-e,0,0,1,0,0,e,0,r,0,0,0,0,1]}rotationZ(t){const e=Math.sin(t),r=Math.cos(t);return[r,e,0,0,-e,r,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(t,e,r){const i=.5*r,o=.5*e,s=.5*t,n=Math.sin(i),a=Math.cos(i),c=Math.sin(o),h=Math.cos(o),l=Math.sin(s),u=Math.cos(s),d=u*c*a+l*h*n,v=l*h*a-u*c*n,f=u*h*n-l*c*a,p=u*h*a+l*c*n;return this.rotationMatrixFromQuat(d,v,f,p)}rotationMatrixFromQuat(t,e,r,i){const o=t*t,s=e*e,n=r*r,a=t*e,c=r*i,h=r*t,l=e*i,u=e*r,d=t*i,v=this.identity();return v[0]=1-2*(s+n),v[1]=2*(a+c),v[2]=2*(h-l),v[3]=0,v[4]=2*(a-c),v[5]=1-2*(n+o),v[6]=2*(u+d),v[7]=0,v[8]=2*(h+l),v[9]=2*(u-d),v[10]=1-2*(s+o),v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}stretchDirection(t,e){const r=this.vector.normalized({vector:t}),[i,o,s]=r;if(isNaN(i)||0===i&&0===o&&0===s)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const n=e-1;return[1+n*i*i,n*o*i,n*s*i,0,n*i*o,1+n*o*o,n*s*o,0,n*i*s,n*o*s,1+n*s*s,0,0,0,0,1]}}class Ie{constructor(){this.getArrayDepth=t=>Array.isArray(t)?1+Math.max(...t.map(this.getArrayDepth)):0}transformControlPoints(t,e){return this.getFlatTransformations(t).forEach((t=>{e=this.transformPointsByMatrixArray(e,t)})),e}getFlatTransformations(t){let e=[];return 3===this.getArrayDepth(t)?t.forEach((t=>{e.push(...t)})):e=t,e}transformPointsByMatrixArray(t,e){return this.transformPointsCoordinates(t,e)}transformPointsCoordinates(t,e){const r=[];for(const i of t){const t=this.transformCoordinates(i[0],i[1],i[2],e);r.push(t)}return r}removeAllDuplicateVectors(t,e=1e-7){const r=[];return t.forEach((t=>{r.some((r=>this.vectorsTheSame(t,r,e)))||r.push(t)})),r}removeConsecutiveVectorDuplicates(t,e=!0,r=1e-7){const i=[];if(t.length>1){for(let e=1;e<t.length;e++){const o=t[e],s=t[e-1];this.vectorsTheSame(o,s,r)||i.push(s),e===t.length-1&&i.push(o)}if(e){const t=i[0],e=i[i.length-1];this.vectorsTheSame(t,e,r)&&i.pop()}}else 1===t.length&&i.push(...t);return i}vectorsTheSame(t,e,r){let i=!1;if(t.length!==e.length)return i;i=!0;for(let o=0;o<t.length;o++)if(!this.approxEq(t[o],e[o],r)){i=!1;break}return i}approxEq(t,e,r){return Math.abs(t-e)<r}removeConsecutivePointDuplicates(t,e=!0,r=1e-7){const i=[];if(t.length>1){for(let e=1;e<t.length;e++){const o=t[e],s=t[e-1];this.arePointsTheSame(o,s,r)||i.push(s),e===t.length-1&&i.push(o)}if(e){const t=i[0],e=i[i.length-1];this.arePointsTheSame(t,e,r)&&i.pop()}}else 1===t.length&&i.push(...t);return i}arePointsTheSame(t,e,r){let i=!1;return 2===t.length&&2===e.length?this.approxEq(t[0],e[0],r)&&this.approxEq(t[1],e[1],r)&&(i=!0):3===t.length&&3===e.length&&this.approxEq(t[0],e[0],r)&&this.approxEq(t[1],e[1],r)&&this.approxEq(t[2],e[2],r)&&(i=!0),i}transformCoordinates(t,e,r,i){const o=i,s=t*o[0]+e*o[4]+r*o[8]+o[12],n=t*o[1]+e*o[5]+r*o[9]+o[13],a=t*o[2]+e*o[6]+r*o[10]+o[14],c=1/(t*o[3]+e*o[7]+r*o[11]+o[15]);return[s*c,n*c,a*c]}}class Fe{constructor(t,e,r){this.vector=t,this.point=e,this.geometryHelper=r}getStartPoint(t){return t.line.start}getEndPoint(t){return t.line.end}length(t){return this.point.distance({startPoint:t.line.start,endPoint:t.line.end})}reverse(t){return{start:t.line.end,end:t.line.start}}transformLine(t){const e=t.transformation;let r=[t.line.start,t.line.end];return r=this.geometryHelper.transformControlPoints(e,r),{start:r[0],end:r[1]}}transformsForLines(t){return t.lines.map(((e,r)=>{const i=t.transformation[r];let o=[e.start,e.end];return o=this.geometryHelper.transformControlPoints(i,o),{start:o[0],end:o[1]}}))}create(t){return{start:t.start,end:t.end}}createSegment(t){return[t.start,t.end]}getPointOnLine(t){const e=t.line.start,r=t.line.end,i=t.param,o=[r[0]-e[0],r[1]-e[1],r[2]-e[2]];return[e[0]+i*o[0],e[1]+i*o[1],e[2]+i*o[2]]}linesBetweenPoints(t){const e=[];for(let r=1;r<t.points.length;r++){const i=t.points[r-1],o=t.points[r];e.push({start:i,end:o})}return e}linesBetweenStartAndEndPoints(t){return t.startPoints.map(((e,r)=>({start:e,end:t.endPoints[r]}))).filter((t=>0!==this.point.distance({startPoint:t.start,endPoint:t.end})))}lineToSegment(t){return[t.line.start,t.line.end]}linesToSegments(t){return t.lines.map((t=>[t.start,t.end]))}segmentToLine(t){return{start:t.segment[0],end:t.segment[1]}}segmentsToLines(t){return t.segments.map((t=>({start:t[0],end:t[1]})))}lineLineIntersection(t){const e=t.tolerance||1e-6,r=t.checkSegmentsOnly,i=t.line1,o=t.line2;if(!((null==i?void 0:i.start)&&i.end&&(null==o?void 0:o.start)&&o.end&&3===i.start.length&&3===i.end.length&&3===o.start.length&&3===o.end.length))return void console.error("Invalid line input to lineLineIntersection");const s=i.start,n=this.vector.sub({first:i.end,second:i.start}),a=o.start,c=this.vector.sub({first:o.end,second:o.start}),h=this.vector.sub({first:a,second:s}),l=this.vector.lengthSq({vector:n}),u=this.vector.lengthSq({vector:c});if(l<e*e||u<e*e)return;const d=this.vector.cross({first:n,second:c});if(this.vector.lengthSq({vector:d})<e*e){const t=this.vector.cross({first:h,second:n}),i=e*e*l;if(this.vector.lengthSq({vector:t})<i){if(r){const t=l<e*e?1:l,r=this.vector.dot({first:n,second:h})/t,i=this.vector.sub({first:o.end,second:s}),a=this.vector.dot({first:n,second:i})/t,c=[Math.min(r,a),Math.max(r,a)],u=[0,1];return Math.max(u[0],c[0]),void Math.min(u[1],c[1])}return s}return}const v=this.vector.dot({first:h,second:d}),f=e*e*e;if(Math.abs(v)>f)return;const p=l,g=u,m=this.vector.dot({first:n,second:c}),b=this.vector.dot({first:n,second:h}),y=this.vector.dot({first:c,second:h}),P=p*g-m*m;if(Math.abs(P)<e*e)return void console.error("Internal error: Denominator near zero after non-parallel check.");const w=(g*b-m*y)/P,k=(m*b-p*y)/P;if(r&&(w<-e||w>1+e||k<-e||k>1+e))return;const C=this.getPointOnLine({param:w,line:i});return[Math.abs(C[0])<e?0:C[0],Math.abs(C[1])<e?0:C[1],Math.abs(C[2])<e?0:C[2]]}}class Le{constructor(t,e,r,i){this.vector=t,this.point=e,this.line=r,this.geometryHelper=i}length(t){let e=0;for(let r=1;r<t.polyline.points.length;r++){const i=t.polyline.points[r-1],o=t.polyline.points[r];e+=this.point.distance({startPoint:i,endPoint:o})}return e}countPoints(t){return t.polyline.points.length}getPoints(t){return t.polyline.points}reverse(t){return{points:t.polyline.points.reverse()}}transformPolyline(t){const e=t.transformation;let r=t.polyline.points;return r=this.geometryHelper.transformControlPoints(e,r),{points:r}}create(t){var e;return{points:t.points,isClosed:null!==(e=t.isClosed)&&void 0!==e&&e}}polylineToLines(t){return this.polylineToSegments(t).map((t=>({start:t[0],end:t[1]})))}polylineToSegments(t){const e=t.polyline,r=[],i=e.points,o=i.length;if(o<2)return r;for(let t=0;t<o-1;t++)r.push([i[t],i[t+1]]);return e.isClosed&&o>=2&&(this.point.twoPointsAlmostEqual({point1:i[o-1],point2:i[0],tolerance:1e-9})||r.push([i[o-1],i[0]])),r}polylineSelfIntersection(t){const{polyline:e,tolerance:r}=t,i=this.polylineToLines({polyline:e}),o=i.length;if(o<3)return[];const s=[],n=null!=r?r:1e-6;for(let t=0;t<o;t++)for(let r=t+1;r<o;r++){let a=r===t+1;if(!a&&e.isClosed&&0===t&&r===o-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:i[t],line2:i[r],checkSegmentsOnly:!0,tolerance:n});if(c){let t=!1;for(const e of s)if(this.point.twoPointsAlmostEqual({point1:c,point2:e,tolerance:n})){t=!0;break}t||s.push(c)}}return s}twoPolylineIntersection(t){const{polyline1:e,polyline2:r,tolerance:i}=t,o=this.polylineToLines({polyline:e}),s=this.polylineToLines({polyline:r}),n=[],a=null!=i?i:1e-6;for(const t of o)for(const e of s){const r=this.line.lineLineIntersection({line1:t,line2:e,checkSegmentsOnly:!0,tolerance:a});if(r){let t=!1;for(const e of n)if(this.point.twoPointsAlmostEqual({point1:r,point2:e,tolerance:a})){t=!0;break}t||n.push(r)}}return n}sortSegmentsIntoPolylines(t){var e;const r=null!==(e=t.tolerance)&&void 0!==e?e:1e-5,i=t.segments;if(!i||0===i.length)return[];const o=r*r,s=i.length,n=new Array(s).fill(!1),a=[],c=new Map,h=1/r,l=t=>`${Math.round(t[0]*h)},${Math.round(t[1]*h)},${Math.round(t[2]*h)}`;for(let t=0;t<s;t++){const e=i[t];if(this.point.twoPointsAlmostEqual({point1:e[0],point2:e[1],tolerance:r})){n[t]=!0;continue}const o=l(e[0]),s=l(e[1]),a={segmentIndex:t,endpointIndex:0,coords:e[0]},h={segmentIndex:t,endpointIndex:1,coords:e[1]};c.has(o)||c.set(o,[]),c.get(o).push(a),s!==o?(c.has(s)||c.set(s,[]),c.get(s).push(h)):c.get(o).push(h)}const u=t=>{const e=[],i=Math.round(t[0]*h),s=Math.round(t[1]*h),a=Math.round(t[2]*h);for(let t=-1;t<=1;t++)for(let r=-1;r<=1;r++)for(let o=-1;o<=1;o++)e.push(`${i+t},${s+r},${a+o}`);let l,u=o;for(const i of e){const e=c.get(i);if(e)for(const i of e)if(!n[i.segmentIndex]){const e=this.vector.sub({first:i.coords,second:t}),o=this.vector.lengthSq({vector:e});o<u&&this.point.twoPointsAlmostEqual({point1:i.coords,point2:t,tolerance:r})&&(l=i,u=o)}}if(l&&!n[l.segmentIndex])return l};for(let t=0;t<s;t++){if(n[t])continue;n[t]=!0;const e=i[t],o=[e[0],e[1]];let c=e[0],h=e[1],l=!1,d=0;for(;d++<s;){const t=u(h);if(!t)break;const e=i[t.segmentIndex],s=0===t.endpointIndex?e[1]:e[0];if(this.point.twoPointsAlmostEqual({point1:s,point2:c,tolerance:r})){l=!0,n[t.segmentIndex]=!0;break}n[t.segmentIndex]=!0,o.push(s),h=s}if(d=0,!l)for(;d++<s;){const t=u(c);if(!t)break;const e=i[t.segmentIndex],s=0===t.endpointIndex?e[1]:e[0];if(this.point.twoPointsAlmostEqual({point1:s,point2:h,tolerance:r})){l=!0,n[t.segmentIndex]=!0;break}n[t.segmentIndex]=!0,o.unshift(s),c=s}!l&&o.length>=2&&(l=this.point.twoPointsAlmostEqual({point1:c,point2:h,tolerance:r})),l&&o.length>2&&this.point.twoPointsAlmostEqual({point1:o[o.length-1],point2:o[0],tolerance:r})&&o.pop(),a.push({points:o,isClosed:l})}return a}maxFilletsHalfLine(t){return this.point.maxFilletsHalfLine({points:t.polyline.points,checkLastWithFirst:t.polyline.isClosed,tolerance:t.tolerance})}safestFilletRadius(t){const e=this.maxFilletsHalfLine(t);if(0===e.length)return 0;const r=Math.min(...e);return Math.max(0,r)}}class Be{constructor(t,e){this.vector=t,this.polyline=e}signedDistanceToPlane(t){return this.vector.dot({first:t.plane.normal,second:t.point})-t.plane.d}calculateTrianglePlane(t){const e=Math.pow(t.tolerance||1e-7,2),r=this.vector.sub({first:t.triangle[1],second:t.triangle[0]}),i=this.vector.sub({first:t.triangle[2],second:t.triangle[0]}),o=this.vector.cross({first:r,second:i});if(this.vector.lengthSq({vector:o})<e)return;const s=this.vector.normalized({vector:o});return{normal:s,d:this.vector.dot({first:s,second:t.triangle[0]})}}triangleTriangleIntersection(t){const e=t.triangle1,r=t.triangle2,i=t.tolerance||1e-7,o=e[0],s=e[1],n=e[2],a=r[0],c=r[1],h=r[2],l=this.calculateTrianglePlane({triangle:e,tolerance:i}),u=this.calculateTrianglePlane({triangle:r,tolerance:i});if(!l||!u)return;const d=[this.signedDistanceToPlane({point:a,plane:l}),this.signedDistanceToPlane({point:c,plane:l}),this.signedDistanceToPlane({point:h,plane:l})];if(d[0]>i&&d[1]>i&&d[2]>i||d[0]<-i&&d[1]<-i&&d[2]<-i)return;const v=[this.signedDistanceToPlane({point:o,plane:u}),this.signedDistanceToPlane({point:s,plane:u}),this.signedDistanceToPlane({point:n,plane:u})];if(v[0]>i&&v[1]>i&&v[2]>i||v[0]<-i&&v[1]<-i&&v[2]<-i)return;const f=v.every((t=>Math.abs(t)<i)),p=d.every((t=>Math.abs(t)<i));if(f&&p)return;const g=this.vector.cross({first:l.normal,second:u.normal}),m=this.vector.dot({first:g,second:g});if(m<i*i)return;const b=[],y=[],P=[[o,s],[s,n],[n,o]],w=v;for(let t=0;t<3;++t){const e=P[t][0],r=P[t][1],o=w[t],s=w[(t+1)%3];if(Math.abs(o)<i&&b.push(e),o*s<0&&Math.abs(o-s)>i){const t=o/(o-s);b.push(this.computeIntersectionPoint(e,r,t))}}const k=[[a,c],[c,h],[h,a]],C=d;for(let t=0;t<3;++t){const e=k[t][0],r=k[t][1],o=C[t],s=C[(t+1)%3];if(Math.abs(o)<i&&y.push(e),o*s<0&&Math.abs(o-s)>i){const t=o/(o-s);y.push(this.computeIntersectionPoint(e,r,t))}}if(b.length<2||y.length<2)return;const x=l.normal,_=u.normal,T=l.d,S=u.d,M=this.vector.mul({vector:_,scalar:T}),W=this.vector.mul({vector:x,scalar:S}),E=this.vector.sub({first:M,second:W}),D=this.vector.cross({first:E,second:g}),O=this.vector.mul({vector:D,scalar:1/m}),A=b.map((t=>this.vector.dot({first:this.vector.sub({first:t,second:O}),second:g}))),I=y.map((t=>this.vector.dot({first:this.vector.sub({first:t,second:O}),second:g}))),F=[Math.min(...A),Math.max(...A)],L=[Math.min(...I),Math.max(...I)],B=Math.max(F[0],L[0]),R=Math.min(F[1],L[1]);if(B<R-i*m){const t=this.vector.add({first:O,second:this.vector.mul({vector:g,scalar:B/m})}),e=this.vector.add({first:O,second:this.vector.mul({vector:g,scalar:R/m})}),r=this.vector.sub({first:t,second:e});return this.vector.lengthSq({vector:r})>i*i?[t,e]:void 0}}meshMeshIntersectionSegments(t){const e=t.mesh1,r=t.mesh2,i=[];for(let o=0;o<e.length;++o)for(let s=0;s<r.length;++s){const n=e[o],a=r[s],c=this.triangleTriangleIntersection({triangle1:n,triangle2:a,tolerance:t.tolerance});c&&i.push(c)}return i}meshMeshIntersectionPolylines(t){const e=this.meshMeshIntersectionSegments(t);return this.polyline.sortSegmentsIntoPolylines({segments:e,tolerance:t.tolerance})}meshMeshIntersectionPoints(t){return this.meshMeshIntersectionPolylines(t).map((t=>t.isClosed?[...t.points,t.points[0]]:t.points))}computeIntersectionPoint(t,e,r){return this.vector.add({first:t,second:this.vector.mul({vector:this.vector.sub({first:e,second:t}),scalar:r})})}}class Re{}var Ne,Ue,Ve,je,ze,He,qe,Ge;Re.BITBYBIT_CDN_URL="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.21.0","undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(t){t.GetAssetDto=class{constructor(t){void 0!==t&&(this.fileName=t)}},t.FetchDto=class{constructor(t){void 0!==t&&(this.url=t)}},t.FileDto=class{constructor(t){void 0!==t&&(this.file=t)}},t.FilesDto=class{constructor(t){void 0!==t&&(this.files=t)}},t.AssetFileDto=class{constructor(t,e){this.hidden=!1,void 0!==t&&(this.assetFile=t),void 0!==e&&(this.hidden=e)}},t.AssetFileByUrlDto=class{constructor(t,e,r){this.hidden=!1,void 0!==t&&(this.assetFile=t),void 0!==e&&(this.rootUrl=e),void 0!==r&&(this.hidden=r)}},t.DownloadDto=class{constructor(t,e,r,i){this.extension="txt",this.contentType="text/plain",void 0!==t&&(this.fileName=t),void 0!==e&&(this.content=e),void 0!==r&&(this.extension=r),void 0!==i&&(this.contentType=i)}}}(Ne||(Ne={})),function(t){t.ParseToArrayDto=class{constructor(t,e,r){this.csv="name,age\nJohn,30",this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.rowSeparator=e),void 0!==r&&(this.columnSeparator=r)}},t.ParseToJsonDto=class{constructor(t,e,r,i,o,s){this.csv="name,age\nJohn,30\nJane,25",this.headerRow=0,this.dataStartRow=1,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.headerRow=e),void 0!==r&&(this.dataStartRow=r),void 0!==i&&(this.rowSeparator=i),void 0!==o&&(this.columnSeparator=o),void 0!==s&&(this.numberColumns=s)}},t.ParseToJsonWithHeadersDto=class{constructor(t,e,r,i,o,s){this.csv="John,30\nJane,25",this.headers=["name","age"],this.dataStartRow=0,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.headers=e),void 0!==r&&(this.dataStartRow=r),void 0!==i&&(this.rowSeparator=i),void 0!==o&&(this.columnSeparator=o),void 0!==s&&(this.numberColumns=s)}},t.QueryColumnDto=class{constructor(t,e,r,i,o,s,n){this.csv="name,age\nJohn,30\nJane,25",this.column="name",this.headerRow=0,this.dataStartRow=1,this.rowSeparator="\n",this.columnSeparator=",",this.asNumber=!1,void 0!==t&&(this.csv=t),void 0!==e&&(this.column=e),void 0!==r&&(this.headerRow=r),void 0!==i&&(this.dataStartRow=i),void 0!==o&&(this.rowSeparator=o),void 0!==s&&(this.columnSeparator=s),void 0!==n&&(this.asNumber=n)}},t.QueryRowsByValueDto=class{constructor(t,e,r,i,o,s,n,a){this.csv="name,age\nJohn,30\nJane,25",this.column="age",this.value="30",this.headerRow=0,this.dataStartRow=1,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.column=e),void 0!==r&&(this.value=r),void 0!==i&&(this.headerRow=i),void 0!==o&&(this.dataStartRow=o),void 0!==s&&(this.rowSeparator=s),void 0!==n&&(this.columnSeparator=n),void 0!==a&&(this.numberColumns=a)}},t.ArrayToCsvDto=class{constructor(t,e,r){this.array=[["name","age"],["John","30"]],this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.array=t),void 0!==e&&(this.rowSeparator=e),void 0!==r&&(this.columnSeparator=r)}},t.JsonToCsvDto=class{constructor(t,e,r,i,o){this.json=[{name:"John",age:"30"}],this.headers=["name","age"],this.includeHeaders=!0,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.json=t),void 0!==e&&(this.headers=e),void 0!==r&&(this.includeHeaders=r),void 0!==i&&(this.rowSeparator=i),void 0!==o&&(this.columnSeparator=o)}},t.JsonToCsvAutoDto=class{constructor(t,e,r,i){this.json=[{name:"John",age:"30"}],this.includeHeaders=!0,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.json=t),void 0!==e&&(this.includeHeaders=e),void 0!==r&&(this.rowSeparator=r),void 0!==i&&(this.columnSeparator=i)}},t.GetHeadersDto=class{constructor(t,e,r,i){this.csv="name,age\nJohn,30",this.headerRow=0,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.headerRow=e),void 0!==r&&(this.rowSeparator=r),void 0!==i&&(this.columnSeparator=i)}},t.GetRowCountDto=class{constructor(t,e,r,i,o){this.csv="name,age\nJohn,30\nJane,25",this.hasHeaders=!0,this.rowSeparator="\n",this.columnSeparator=",",void 0!==t&&(this.csv=t),void 0!==e&&(this.hasHeaders=e),void 0!==r&&(this.dataStartRow=r),void 0!==i&&(this.rowSeparator=i),void 0!==o&&(this.columnSeparator=o)}}}(Ue||(Ue={})),function(t){t.StringifyDto=class{constructor(t){void 0!==t&&(this.json=t)}},t.ParseDto=class{constructor(t){this.text="[0, 0, 0]",void 0!==t&&(this.text=t)}},t.QueryDto=class{constructor(t,e){void 0!==t&&(this.json=t),void 0!==e&&(this.query=e)}},t.SetValueOnPropDto=class{constructor(t,e,r){this.property="propName",void 0!==t&&(this.json=t),void 0!==e&&(this.value=e),void 0!==r&&(this.property=r)}},t.GetJsonFromArrayByFirstPropMatchDto=class{constructor(t,e,r){this.property="propName",void 0!==t&&(this.jsonArray=t),void 0!==e&&(this.property=e),void 0!==r&&(this.match=r)}},t.GetValueOnPropDto=class{constructor(t,e){this.property="propName",void 0!==t&&(this.json=t),void 0!==e&&(this.property=e)}},t.SetValueDto=class{constructor(t,e,r,i){this.path="$.pathToParent",this.prop="propertyName",void 0!==t&&(this.json=t),void 0!==e&&(this.value=e),void 0!==r&&(this.path=r),void 0!==i&&(this.prop=i)}},t.SetValuesOnPathsDto=class{constructor(t,e,r,i){void 0!==t&&(this.json=t),void 0!==e&&(this.values=e),void 0!==r&&(this.paths=r),void 0!==i&&(this.props=i)}},t.PathsDto=class{constructor(t,e){void 0!==t&&(this.json=t),void 0!==e&&(this.query=e)}},t.JsonDto=class{constructor(t){void 0!==t&&(this.json=t)}}}(Ve||(Ve={})),function(t){t.DrawTagDto=class{constructor(t,e,r){this.updatable=!1,void 0!==t&&(this.tag=t),void 0!==e&&(this.updatable=e),void 0!==r&&(this.tagVariable=r)}},t.DrawTagsDto=class{constructor(t,e,r){this.updatable=!1,void 0!==t&&(this.tags=t),void 0!==e&&(this.updatable=e),void 0!==r&&(this.tagsVariable=r)}},t.TagDto=class{constructor(t,e,r,i,o,s,n){this.position=[0,0,0],this.colour="#444444",this.size=12,this.adaptDepth=!1,void 0!==t&&(this.text=t),void 0!==e&&(this.position=e),void 0!==r&&(this.colour=r),void 0!==i&&(this.size=i),void 0!==o&&(this.adaptDepth=o),void 0!==s&&(this.needsUpdate=s),void 0!==n&&(this.id=n)}}}(je||(je={})),function(t){t.PostFromIframe=class{constructor(t,e){void 0!==t&&(this.data=t),void 0!==e&&(this.targetOrigin=e)}}}(ze||(ze={})),function(t){t.CurveDto=class{constructor(t){void 0!==t&&(this.curve=t)}},t.LineDto=class{constructor(t){void 0!==t&&(this.line=t)}},t.LinesDto=class{constructor(t){void 0!==t&&(this.lines=t)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.PolylinesDto=class{constructor(t){void 0!==t&&(this.polylines=t)}},t.CurvesDto=class{constructor(t){void 0!==t&&(this.curves=t)}},t.ClosestPointDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.point=e)}},t.ClosestPointsDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.points=e)}},t.BezierCurveDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.weights=e)}},t.DrawCurveDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.curve=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.curveMesh=s)}},t.CurveParameterDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.parameter=e)}},t.CurvesParameterDto=class{constructor(t,e){void 0!==t&&(this.curves=t),void 0!==e&&(this.parameter=e)}},t.CurveTransformDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.transformation=e)}},t.CurvesTransformDto=class{constructor(t,e){void 0!==t&&(this.curves=t),void 0!==e&&(this.transformation=e)}},t.CurveToleranceDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.tolerance=e)}},t.CurveLengthToleranceDto=class{constructor(t,e,r){void 0!==t&&(this.curve=t),void 0!==e&&(this.length=e),void 0!==r&&(this.tolerance=r)}},t.CurveDerivativesDto=class{constructor(t,e,r){void 0!==t&&(this.curve=t),void 0!==e&&(this.parameter=e),void 0!==r&&(this.numDerivatives=r)}},t.CurveSubdivisionsDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.subdivision=e)}},t.CurvesSubdivisionsDto=class{constructor(t,e){void 0!==t&&(this.curves=t),void 0!==e&&(this.subdivision=e)}},t.CurvesDivideLengthDto=class{constructor(t,e){void 0!==t&&(this.curves=t),void 0!==e&&(this.length=e)}},t.CurveDivideLengthDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.length=e)}},t.DrawCurvesDto=class{constructor(t,e,r,i,o,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.curves=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.curvesMesh=s)}},t.CurveNurbsDataDto=class{constructor(t,e,r,i){void 0!==t&&(this.degree=t),void 0!==e&&(this.weights=e),void 0!==r&&(this.knots=r),void 0!==i&&(this.points=i)}},t.CurvePathDataDto=class{constructor(t,e){void 0!==t&&(this.degree=t),void 0!==e&&(this.points=e)}},t.EllipseDto=class{constructor(t){void 0!==t&&(this.ellipse=t)}},t.CircleDto=class{constructor(t){void 0!==t&&(this.circle=t)}},t.ArcDto=class{constructor(t){void 0!==t&&(this.arc=t)}},t.EllipseParametersDto=class{constructor(t,e,r){void 0!==t&&(this.xAxis=t),void 0!==e&&(this.yAxis=e),void 0!==r&&(this.center=r)}},t.CircleParametersDto=class{constructor(t,e,r,i){void 0!==t&&(this.xAxis=t),void 0!==e&&(this.yAxis=e),void 0!==r&&(this.radius=r),void 0!==i&&(this.center=i)}},t.ArcParametersDto=class{constructor(t,e,r,i,o,s){void 0!==t&&(this.minAngle=t),void 0!==e&&(this.maxAngle=e),void 0!==r&&(this.xAxis=r),void 0!==i&&(this.yAxis=i),void 0!==o&&(this.radius=o),void 0!==s&&(this.center=s)}},t.EllipseArcParametersDto=class{constructor(t,e,r,i,o){void 0!==t&&(this.minAngle=t),void 0!==e&&(this.maxAngle=e),void 0!==r&&(this.xAxis=r),void 0!==i&&(this.yAxis=i),void 0!==o&&(this.center=o)}},t.SurfaceDto=class{constructor(t){void 0!==t&&(this.surface=t)}},t.SurfaceTransformDto=class{constructor(t,e){void 0!==t&&(this.surface=t),void 0!==e&&(this.transformation=e)}},t.SurfaceParameterDto=class{constructor(t,e,r){void 0!==t&&(this.surface=t),void 0!==e&&(this.parameter=e),void 0!==r&&(this.useV=r)}},t.IsocurvesParametersDto=class{constructor(t,e,r){void 0!==t&&(this.surface=t),void 0!==e&&(this.parameters=e),void 0!==r&&(this.useV=r)}},t.IsocurveSubdivisionDto=class{constructor(t,e,r,i,o){this.useV=!1,this.includeLast=!0,this.includeFirst=!0,void 0!==t&&(this.surface=t),void 0!==e&&(this.useV=e),void 0!==r&&(this.includeLast=r),void 0!==i&&(this.includeFirst=i),void 0!==o&&(this.isocurveSegments=o)}},t.DerivativesDto=class{constructor(t,e,r,i){void 0!==t&&(this.surface=t),void 0!==e&&(this.u=e),void 0!==r&&(this.v=r),void 0!==i&&(this.numDerivatives=i)}},t.SurfaceLocationDto=class{constructor(t,e,r){void 0!==t&&(this.surface=t),void 0!==e&&(this.u=e),void 0!==r&&(this.v=r)}},t.CornersDto=class{constructor(t,e,r,i){void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==r&&(this.point3=r),void 0!==i&&(this.point4=i)}},t.SurfaceParamDto=class{constructor(t,e){void 0!==t&&(this.surface=t),void 0!==e&&(this.point=e)}},t.KnotsControlPointsWeightsDto=class{constructor(t,e,r,i,o,s){void 0!==t&&(this.degreeU=t),void 0!==e&&(this.degreeV=e),void 0!==r&&(this.knotsU=r),void 0!==i&&(this.knotsV=i),void 0!==o&&(this.points=o),void 0!==s&&(this.weights=s)}},t.LoftCurvesDto=class{constructor(t,e){void 0!==t&&(this.degreeV=t),void 0!==e&&(this.curves=e)}},t.DrawSurfaceDto=class{constructor(t,e,r,i,o,s,n,a,c){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.surface=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.surfaceMesh=s),void 0!==n&&(this.drawTwoSided=n),void 0!==a&&(this.backFaceColour=a),void 0!==c&&(this.backFaceOpacity=c)}},t.DrawSurfacesDto=class{constructor(t,e,r,i,o,s,n,a,c){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.surfaces=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.surfacesMesh=s),void 0!==n&&(this.drawTwoSided=n),void 0!==a&&(this.backFaceColour=a),void 0!==c&&(this.backFaceOpacity=c)}},t.DrawSurfacesColoursDto=class{constructor(t,e,r,i,o,s,n,a,c){this.opacity=1,this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.surfaces=t),void 0!==e&&(this.colours=e),void 0!==r&&(this.opacity=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.surfacesMesh=s),void 0!==n&&(this.drawTwoSided=n),void 0!==a&&(this.backFaceColour=a),void 0!==c&&(this.backFaceOpacity=c)}},t.ConeAndCylinderParametersDto=class{constructor(t,e,r,i,o){this.axis=[0,1,0],this.xAxis=[1,0,0],this.base=[0,0,0],this.height=2,this.radius=1,void 0!==t&&(this.axis=t),void 0!==e&&(this.xAxis=e),void 0!==r&&(this.base=r),void 0!==i&&(this.height=i),void 0!==o&&(this.radius=o)}},t.ConeDto=class{constructor(t){void 0!==t&&(this.cone=t)}},t.CylinderDto=class{constructor(t){void 0!==t&&(this.cylinder=t)}},t.ExtrusionParametersDto=class{constructor(t,e){void 0!==t&&(this.profile=t),void 0!==e&&(this.direction=e)}},t.ExtrusionDto=class{constructor(t){void 0!==t&&(this.extrusion=t)}},t.SphericalParametersDto=class{constructor(t,e){void 0!==t&&(this.radius=t),void 0!==e&&(this.center=e)}},t.SphereDto=class{constructor(t){void 0!==t&&(this.sphere=t)}},t.RevolutionParametersDto=class{constructor(t,e,r,i){void 0!==t&&(this.profile=t),void 0!==e&&(this.center=e),void 0!==r&&(this.axis=r),void 0!==i&&(this.angle=i)}},t.RevolutionDto=class{constructor(t){void 0!==t&&(this.revolution=t)}},t.SweepParametersDto=class{constructor(t,e){void 0!==t&&(this.profile=t),void 0!==e&&(this.rail=e)}},t.SweepDto=class{constructor(t){void 0!==t&&(this.sweep=t)}},t.CurveCurveDto=class{constructor(t,e,r){void 0!==t&&(this.firstCurve=t),void 0!==e&&(this.secondCurve=e),void 0!==r&&(this.tolerance=r)}},t.CurveSurfaceDto=class{constructor(t,e,r){void 0!==t&&(this.curve=t),void 0!==e&&(this.surface=e),void 0!==r&&(this.tolerance=r)}},t.SurfaceSurfaceDto=class{constructor(t,e,r){void 0!==t&&(this.firstSurface=t),void 0!==e&&(this.secondSurface=e),void 0!==r&&(this.tolerance=r)}},t.CurveCurveIntersectionsDto=class{constructor(t){void 0!==t&&(this.intersections=t)}},t.CurveSurfaceIntersectionsDto=class{constructor(t){void 0!==t&&(this.intersections=t)}}}(He||(He={})),function(t){let e,r;t.PolylinePropertiesDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},function(t){t.edge="edge",t.round="round",t.chamfer="chamfer"}(e=t.solidCornerTypeEnum||(t.solidCornerTypeEnum={})),function(t){t.left="left",t.center="center",t.right="right"}(r=t.jscadTextAlignEnum||(t.jscadTextAlignEnum={})),t.MeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.MeshesDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.DrawSolidMeshDto=class{constructor(t,e,r,i,o,s,n,a,c){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.mesh=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.jscadMesh=s),void 0!==n&&(this.drawTwoSided=n),void 0!==a&&(this.backFaceColour=a),void 0!==c&&(this.backFaceOpacity=c)}},t.DrawSolidMeshesDto=class{constructor(t,e,r,i,o,s,n,a,c){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.meshes=t),void 0!==e&&(this.opacity=e),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.jscadMesh=s),void 0!==n&&(this.drawTwoSided=n),void 0!==a&&(this.backFaceColour=a),void 0!==c&&(this.backFaceOpacity=c)}},t.DrawPathDto=class{constructor(t,e,r,i,o,s){this.colour="#444444",this.opacity=1,this.width=10,this.updatable=!1,void 0!==t&&(this.path=t),void 0!==e&&(this.colour=e),void 0!==r&&(this.opacity=r),void 0!==i&&(this.width=i),void 0!==o&&(this.updatable=o),void 0!==s&&(this.pathMesh=s)}},t.TransformSolidsDto=class{constructor(t,e){void 0!==t&&(this.meshes=t),void 0!==e&&(this.transformation=e)}},t.TransformSolidDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.transformation=e)}},t.DownloadSolidDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.fileName=e)}},t.DownloadGeometryDto=class{constructor(t,e,r){this.fileName="jscad-geometry",void 0!==t&&(this.geometry=t),void 0!==e&&(this.fileName=e),void 0!==r&&(this.options=r)}},t.DownloadSolidsDto=class{constructor(t,e){void 0!==t&&(this.meshes=t),void 0!==e&&(this.fileName=e)}},t.ColorizeDto=class{constructor(t,e){this.color="#0000ff",void 0!==t&&(this.geometry=t),void 0!==e&&(this.color=e)}},t.BooleanObjectsDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.BooleanTwoObjectsDto=class{constructor(t,e){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.BooleanObjectsFromDto=class{constructor(t,e){void 0!==t&&(this.from=t),void 0!==e&&(this.meshes=e)}},t.ExpansionDto=class{constructor(t,r,i,o){this.delta=.1,this.corners=e.edge,this.segments=24,void 0!==t&&(this.geometry=t),void 0!==r&&(this.delta=r),void 0!==i&&(this.corners=i),void 0!==o&&(this.segments=o)}},t.OffsetDto=class{constructor(t,r,i,o){this.delta=.1,this.corners=e.edge,this.segments=24,void 0!==t&&(this.geometry=t),void 0!==r&&(this.delta=r),void 0!==i&&(this.corners=i),void 0!==o&&(this.segments=o)}},t.ExtrudeLinearDto=class{constructor(t,e,r,i){this.height=1,this.twistAngle=90,this.twistSteps=15,void 0!==t&&(this.geometry=t),void 0!==e&&(this.height=e),void 0!==r&&(this.twistAngle=r),void 0!==i&&(this.twistSteps=i)}},t.HullDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.ExtrudeRectangularDto=class{constructor(t,e,r){this.height=1,this.size=1,void 0!==t&&(this.geometry=t),void 0!==e&&(this.height=e),void 0!==r&&(this.size=r)}},t.ExtrudeRectangularPointsDto=class{constructor(t,e,r){this.height=1,this.size=1,void 0!==t&&(this.points=t),void 0!==e&&(this.height=e),void 0!==r&&(this.size=r)}},t.ExtrudeRotateDto=class{constructor(t,e,r,i){this.angle=90,this.startAngle=0,this.segments=24,void 0!==t&&(this.polygon=t),void 0!==e&&(this.angle=e),void 0!==r&&(this.startAngle=r),void 0!==i&&(this.segments=i)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.CurveDto=class{constructor(t){void 0!==t&&(this.curve=t)}},t.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.PathDto=class{constructor(t){void 0!==t&&(this.path=t)}},t.PathFromPointsDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e)}},t.PathsFromPointsDto=class{constructor(t){void 0!==t&&(this.pointsLists=t)}},t.PathFromPolylineDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.polyline=t),void 0!==e&&(this.closed=e)}},t.PathAppendCurveDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.path=e)}},t.PathAppendPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.path=e)}},t.PathAppendPolylineDto=class{constructor(t,e){void 0!==t&&(this.polyline=t),void 0!==e&&(this.path=e)}},t.PathAppendArcDto=class{constructor(t,e,r,i,o,s,n,a){this.endPoint=[1,1],this.xAxisRotation=90,this.clockwise=!0,this.large=!1,this.segments=24,this.radiusX=1,this.radiusY=1,void 0!==t&&(this.path=t),void 0!==e&&(this.endPoint=e),void 0!==r&&(this.xAxisRotation=r),void 0!==i&&(this.clockwise=i),void 0!==o&&(this.large=o),void 0!==s&&(this.segments=s),void 0!==n&&(this.radiusX=n),void 0!==a&&(this.radiusY=a)}},t.CircleDto=class{constructor(t,e,r){this.center=[0,0],this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.EllipseDto=class{constructor(t,e,r){this.center=[0,0],this.radius=[1,2],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.SquareDto=class{constructor(t,e){this.center=[0,0],this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.RectangleDto=class{constructor(t,e,r){this.center=[0,0],this.width=1,this.length=1,void 0!==t&&(this.center=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r)}},t.RoundedRectangleDto=class{constructor(t,e,r,i,o){this.center=[0,0],this.roundRadius=.2,this.segments=24,this.width=1,this.length=1,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==r&&(this.segments=r),void 0!==i&&(this.width=i),void 0!==o&&(this.length=o)}},t.StarDto=class{constructor(t,e,r,i,o,s){this.center=[0,0],this.vertices=10,this.density=1,this.outerRadius=2,this.innerRadius=1,this.startAngle=0,void 0!==t&&(this.center=t),void 0!==e&&(this.vertices=e),void 0!==r&&(this.density=r),void 0!==i&&(this.outerRadius=i),void 0!==o&&(this.innerRadius=o),void 0!==s&&(this.startAngle=s)}},t.CubeDto=class{constructor(t,e){this.center=[0,0,0],this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.CubeCentersDto=class{constructor(t,e){this.size=1,void 0!==t&&(this.centers=t),void 0!==e&&(this.size=e)}},t.CuboidDto=class{constructor(t,e,r,i){this.center=[0,0,0],this.width=1,this.length=1,this.height=1,void 0!==t&&(this.center=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r),void 0!==i&&(this.height=i)}},t.CuboidCentersDto=class{constructor(t,e,r,i){this.width=1,this.length=1,this.height=1,void 0!==t&&(this.centers=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r),void 0!==i&&(this.height=i)}},t.RoundedCuboidDto=class{constructor(t,e,r,i,o,s){this.center=[0,0,0],this.roundRadius=1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==r&&(this.width=r),void 0!==i&&(this.length=i),void 0!==o&&(this.height=o),void 0!==s&&(this.segments=s)}},t.RoundedCuboidCentersDto=class{constructor(t,e,r,i,o,s){this.roundRadius=.1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.roundRadius=e),void 0!==r&&(this.width=r),void 0!==i&&(this.length=i),void 0!==o&&(this.height=o),void 0!==s&&(this.segments=s)}},t.CylidnerEllipticDto=class{constructor(t,e,r,i,o){this.center=[0,0,0],this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.height=e),void 0!==r&&(this.startRadius=r),void 0!==i&&(this.endRadius=i),void 0!==o&&(this.segments=o)}},t.CylidnerCentersEllipticDto=class{constructor(t,e,r,i,o){this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.height=e),void 0!==r&&(this.startRadius=r),void 0!==i&&(this.endRadius=i),void 0!==o&&(this.segments=o)}},t.CylidnerDto=class{constructor(t,e,r,i){this.center=[0,0,0],this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.height=e),void 0!==r&&(this.radius=r),void 0!==i&&(this.segments=i)}},t.RoundedCylidnerDto=class{constructor(t,e,r,i,o){this.center=[0,0,0],this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==r&&(this.height=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.segments=o)}},t.EllipsoidDto=class{constructor(t,e,r){this.center=[0,0,0],this.radius=[1,2,3],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.EllipsoidCentersDto=class{constructor(t,e,r){this.radius=[1,2,3],this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.GeodesicSphereDto=class{constructor(t,e,r){this.center=[0,0,0],this.radius=1,this.frequency=12,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.frequency=r)}},t.GeodesicSphereCentersDto=class{constructor(t,e,r){this.radius=1,this.frequency=12,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.frequency=r)}},t.CylidnerCentersDto=class{constructor(t,e,r,i){this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.height=e),void 0!==r&&(this.radius=r),void 0!==i&&(this.segments=i)}},t.RoundedCylidnerCentersDto=class{constructor(t,e,r,i,o){this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.roundRadius=e),void 0!==r&&(this.height=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.segments=o)}},t.SphereDto=class{constructor(t,e,r){this.center=[0,0,0],this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.SphereCentersDto=class{constructor(t,e,r){this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==r&&(this.segments=r)}},t.TorusDto=class{constructor(t,e,r,i,o,s,n,a){this.center=[0,0,0],this.innerRadius=1,this.outerRadius=2,this.innerSegments=24,this.outerSegments=24,this.innerRotation=0,this.outerRotation=360,this.startAngle=0,void 0!==t&&(this.center=t),void 0!==e&&(this.innerRadius=e),void 0!==r&&(this.outerRadius=r),void 0!==i&&(this.innerSegments=i),void 0!==o&&(this.outerSegments=o),void 0!==s&&(this.innerRotation=s),void 0!==n&&(this.outerRotation=n),void 0!==a&&(this.startAngle=a)}},t.TextDto=class{constructor(t,e,i,o,s,n,a,c,h){this.text="Hello World",this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.segments=e),void 0!==i&&(this.xOffset=i),void 0!==o&&(this.yOffset=o),void 0!==s&&(this.height=s),void 0!==n&&(this.lineSpacing=n),void 0!==a&&(this.letterSpacing=a),void 0!==c&&(this.align=c),void 0!==h&&(this.extrudeOffset=h)}},t.CylinderTextDto=class{constructor(t,e,i,o,s,n,a,c,h,l,u){this.text="Hello World",this.extrusionHeight=.5,this.extrusionSize=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.extrusionHeight=e),void 0!==i&&(this.extrusionSize=i),void 0!==o&&(this.segments=o),void 0!==s&&(this.xOffset=s),void 0!==n&&(this.yOffset=n),void 0!==a&&(this.height=a),void 0!==c&&(this.lineSpacing=c),void 0!==h&&(this.letterSpacing=h),void 0!==l&&(this.align=l),void 0!==u&&(this.extrudeOffset=u)}},t.SphereTextDto=class{constructor(t,e,i,o,s,n,a,c,h,l){this.text="Hello World",this.radius=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.radius=e),void 0!==i&&(this.segments=i),void 0!==o&&(this.xOffset=o),void 0!==s&&(this.yOffset=s),void 0!==n&&(this.height=n),void 0!==a&&(this.lineSpacing=a),void 0!==c&&(this.letterSpacing=c),void 0!==h&&(this.align=h),void 0!==l&&(this.extrudeOffset=l)}},t.FromPolygonPoints=class{constructor(t){void 0!==t&&(this.polygonPoints=t)}}}(qe||(qe={})),function(t){let e,r;!function(t){t.evenOdd="EvenOdd",t.nonZero="NonZero",t.positive="Positive",t.negative="Negative"}(e=t.fillRuleEnum||(t.fillRuleEnum={})),function(t){t.square="Square",t.round="Round",t.miter="Miter",t.bevel="Bevel"}(r=t.manifoldJoinTypeEnum||(t.manifoldJoinTypeEnum={})),t.DecomposedManifoldMeshDto=class{},t.DrawManifoldOrCrossSectionDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l){this.faceOpacity=1,this.faceColour="#ff0000",this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.manifoldOrCrossSection=t),void 0!==e&&(this.faceOpacity=e),void 0!==r&&(this.faceMaterial=r),void 0!==i&&(this.faceColour=i),void 0!==o&&(this.crossSectionColour=o),void 0!==s&&(this.crossSectionWidth=s),void 0!==n&&(this.crossSectionOpacity=n),void 0!==a&&(this.computeNormals=a),void 0!==c&&(this.drawTwoSided=c),void 0!==h&&(this.backFaceColour=h),void 0!==l&&(this.backFaceOpacity=l)}},t.DrawManifoldsOrCrossSectionsDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l){this.faceColour="#ff0000",this.faceOpacity=1,this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.manifoldsOrCrossSections=t),void 0!==e&&(this.faceOpacity=e),void 0!==r&&(this.faceMaterial=r),void 0!==i&&(this.faceColour=i),void 0!==o&&(this.crossSectionColour=o),void 0!==s&&(this.crossSectionWidth=s),void 0!==n&&(this.crossSectionOpacity=n),void 0!==a&&(this.computeNormals=a),void 0!==c&&(this.drawTwoSided=c),void 0!==h&&(this.backFaceColour=h),void 0!==l&&(this.backFaceOpacity=l)}},t.CreateFromMeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.FromPolygonPointsDto=class{constructor(t){void 0!==t&&(this.polygonPoints=t)}},t.CrossSectionFromPolygonPointsDto=class{constructor(t,r,i,o){this.fillRule=e.positive,this.removeDuplicates=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==r&&(this.fillRule=r),void 0!==i&&(this.removeDuplicates=i),void 0!==o&&(this.tolerance=o)}},t.CrossSectionFromPolygonsPointsDto=class{constructor(t,r,i,o){this.fillRule=e.positive,this.removeDuplicates=!1,this.tolerance=1e-7,void 0!==t&&(this.polygonPoints=t),void 0!==r&&(this.fillRule=r),void 0!==i&&(this.removeDuplicates=i),void 0!==o&&(this.tolerance=o)}},t.CubeDto=class{constructor(t,e){this.center=!0,this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.CreateContourSectionDto=class{constructor(t,r){this.fillRule=e.evenOdd,void 0!==t&&(this.polygons=t),void 0!==r&&(this.fillRule=r)}},t.SquareDto=class{constructor(t,e){this.center=!1,this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.SphereDto=class{constructor(t,e){this.radius=1,void 0!==t&&(this.radius=t),void 0!==e&&(this.circularSegments=e)}},t.CylinderDto=class{constructor(t,e,r,i,o){this.height=1,this.radiusLow=1,this.radiusHigh=1,this.circularSegments=32,this.center=!0,void 0!==t&&(this.height=t),void 0!==e&&(this.radiusLow=e),void 0!==r&&(this.radiusHigh=r),void 0!==i&&(this.circularSegments=i),void 0!==o&&(this.center=o)}},t.CircleDto=class{constructor(t,e){this.radius=1,this.circularSegments=32,void 0!==t&&(this.radius=t),void 0!==e&&(this.circularSegments=e)}},t.RectangleDto=class{constructor(t,e,r){this.length=1,this.height=1,this.center=!1,void 0!==t&&(this.length=t),void 0!==e&&(this.height=e),void 0!==r&&(this.center=r)}},t.ManifoldDto=class{constructor(t){void 0!==t&&(this.manifold=t)}},t.CalculateNormalsDto=class{constructor(t,e,r){this.normalIdx=0,this.minSharpAngle=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e),void 0!==r&&(this.minSharpAngle=r)}},t.CalculateCurvatureDto=class{constructor(t){void 0!==t&&(this.manifold=t)}},t.CountDto=class{constructor(t){void 0!==t&&(this.count=t)}},t.ManifoldsMinGapDto=class{constructor(t,e,r){this.searchLength=100,void 0!==t&&(this.manifold1=t),void 0!==e&&(this.manifold2=e),void 0!==r&&(this.searchLength=r)}},t.ManifoldRefineToleranceDto=class{constructor(t,e){this.tolerance=1e-6,void 0!==t&&(this.manifold=t),void 0!==e&&(this.tolerance=e)}},t.ManifoldRefineLengthDto=class{constructor(t,e){this.length=.1,void 0!==t&&(this.manifold=t),void 0!==e&&(this.length=e)}},t.ManifoldRefineDto=class{constructor(t,e){this.number=1,void 0!==t&&(this.manifold=t),void 0!==e&&(this.number=e)}},t.ManifoldSmoothByNormalsDto=class{constructor(t,e){this.normalIdx=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldSimplifyDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.tolerance=e)}},t.ManifoldSetPropertiesDto=class{constructor(t,e,r){this.numProp=3,void 0!==t&&(this.manifold=t),void 0!==e&&(this.numProp=e),void 0!==r&&(this.propFunc=r)}},t.ManifoldSmoothOutDto=class{constructor(t,e,r){this.minSharpAngle=60,this.minSmoothness=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.minSharpAngle=e),void 0!==r&&(this.minSmoothness=r)}},t.HullPointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.SliceDto=class{constructor(t){this.height=.5,void 0!==t&&(this.manifold=t)}},t.MeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.MeshVertexIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.vertexIndex=e)}},t.MeshTriangleRunIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.triangleRunIndex=e)}},t.MeshHalfEdgeIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.halfEdgeIndex=e)}},t.MeshTriangleIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.triangleIndex=e)}},t.CrossSectionDto=class{constructor(t){void 0!==t&&(this.crossSection=t)}},t.CrossSectionsDto=class{constructor(t){void 0!==t&&(this.crossSections=t)}},t.ExtrudeDto=class{constructor(t){this.height=1,this.nDivisions=1,this.twistDegrees=0,this.scaleTopX=1,this.scaleTopY=1,this.center=!0,void 0!==t&&(this.crossSection=t)}},t.RevolveDto=class{constructor(t,e,r,i){this.matchProfile=!0,this.circularSegments=32,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.revolveDegrees=e),void 0!==r&&(this.matchProfile=r),void 0!==i&&(this.circularSegments=i)}},t.OffsetDto=class{constructor(t,e,i,o,s){this.joinType=r.round,this.miterLimit=2,this.circularSegments=32,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.delta=e),void 0!==i&&(this.joinType=i),void 0!==o&&(this.miterLimit=o),void 0!==s&&(this.circularSegments=s)}},t.SimplifyDto=class{constructor(t,e){this.epsilon=1e-6,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.epsilon=e)}},t.ComposeDto=class{constructor(t){void 0!==t&&(this.polygons=t)}},t.MirrorCrossSectionDto=class{constructor(t,e){this.normal=[1,0],void 0!==t&&(this.crossSection=t),void 0!==e&&(this.normal=e)}},t.Scale2DCrossSectionDto=class{constructor(t,e){this.vector=[2,2],void 0!==t&&(this.crossSection=t),void 0!==e&&(this.vector=e)}},t.TranslateCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.vector=e)}},t.RotateCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.degrees=e)}},t.ScaleCrossSectionDto=class{constructor(t,e){this.factor=2,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.factor=e)}},t.TranslateXYCrossSectionDto=class{constructor(t,e,r){this.x=0,this.y=0,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.x=e),void 0!==r&&(this.y=r)}},t.TransformCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.transform=e)}},t.CrossSectionWarpDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.warpFunc=e)}},t.MirrorDto=class{constructor(t,e){this.normal=[1,0,0],void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e)}},t.Scale3DDto=class{constructor(t,e){this.vector=[2,2,2],void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.TranslateDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.TranslateByVectorsDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vectors=e)}},t.RotateDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.RotateXYZDto=class{constructor(t,e,r,i){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.x=e),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},t.ScaleDto=class{constructor(t,e){this.factor=2,void 0!==t&&(this.manifold=t),void 0!==e&&(this.factor=e)}},t.TranslateXYZDto=class{constructor(t,e,r,i){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.x=e),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},t.TransformDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.transform=e)}},t.TransformsDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.transforms=e)}},t.ManifoldWarpDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.warpFunc=e)}},t.TwoCrossSectionsDto=class{constructor(t,e){void 0!==t&&(this.crossSection1=t),void 0!==e&&(this.crossSection2=e)}},t.TwoManifoldsDto=class{constructor(t,e){void 0!==t&&(this.manifold1=t),void 0!==e&&(this.manifold2=e)}},t.SplitManifoldsDto=class{constructor(t,e){void 0!==t&&(this.manifoldToSplit=t),void 0!==e&&(this.manifoldCutter=e)}},t.TrimByPlaneDto=class{constructor(t,e,r){this.normal=[1,0,0],this.originOffset=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==r&&(this.originOffset=r)}},t.SplitByPlaneDto=class{constructor(t,e,r){this.normal=[1,0,0],this.originOffset=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==r&&(this.originOffset=r)}},t.SplitByPlaneOnOffsetsDto=class{constructor(t,e,r){this.normal=[1,0,0],this.originOffsets=[0],void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==r&&(this.originOffsets=r)}},t.ManifoldsDto=class{constructor(t){void 0!==t&&(this.manifolds=t)}},t.ManifoldToMeshDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldsToMeshesDto=class{constructor(t,e){void 0!==t&&(this.manifolds=t),void 0!==e&&(this.normalIdx=e)}},t.DecomposeManifoldOrCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.manifoldOrCrossSection=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldOrCrossSectionDto=class{constructor(t){void 0!==t&&(this.manifoldOrCrossSection=t)}},t.ManifoldsOrCrossSectionsDto=class{constructor(t){void 0!==t&&(this.manifoldsOrCrossSections=t)}},t.DecomposeManifoldsOrCrossSectionsDto=class{constructor(t,e){void 0!==t&&(this.manifoldsOrCrossSections=t),void 0!==e&&(this.normalIdx=e)}}}(Ge||(Ge={}));class Ye extends ot{constructor(t,e){super(t),this.occWorkerManager=t,this.context=e}loadSTEPorIGES(t){return this.context.getFile(t.assetFile).then((e=>this.occWorkerManager.genericCallToWorkerPromise("io.loadSTEPorIGES",new Qt.LoadStepOrIgesDto(e,t.assetFile.name,t.adjustZtoY))))}loadSTEPorIGESFromText(t){return this.occWorkerManager.genericCallToWorkerPromise("io.loadSTEPorIGES",new Qt.LoadStepOrIgesDto(t.text,`fake.${t.fileType}`,t.adjustZtoY))}}class $e extends pt{constructor(t,e){super(e),this.context=t,this.occWorkerManager=e,this.io=new Ye(e,t)}}class Ze{constructor(t,e){this.context=t,this.math=e}createCircle(t){return new this.context.verb.geom.Circle(t.center,t.xAxis,t.yAxis,t.radius)}createArc(t){return new this.context.verb.geom.Arc(t.center,t.xAxis,t.yAxis,t.radius,this.math.degToRad({number:t.minAngle}),this.math.degToRad({number:t.maxAngle}))}center(t){return t.circle.center()}radius(t){return t.circle.radius()}maxAngle(t){return this.math.radToDeg({number:t.circle.maxAngle()})}minAngle(t){return this.math.radToDeg({number:t.circle.minAngle()})}xAxis(t){return t.circle.xaxis()}yAxis(t){return t.circle.yaxis()}}class Ke{constructor(t,e){this.context=t,this.math=e}createEllipse(t){return new this.context.verb.geom.Ellipse(t.center,t.xAxis,t.yAxis)}createArc(t){return new this.context.verb.geom.EllipseArc(t.center,t.xAxis,t.yAxis,this.math.degToRad({number:t.minAngle}),this.math.degToRad({number:t.maxAngle}))}center(t){return t.ellipse.center()}maxAngle(t){return this.math.radToDeg({number:t.ellipse.maxAngle()})}minAngle(t){return this.math.radToDeg({number:t.ellipse.minAngle()})}xAxis(t){return t.ellipse.xaxis()}yAxis(t){return t.ellipse.yaxis()}}class Xe{constructor(t,e,r){this.context=t,this.geometryHelper=e,this.math=r,this.circle=new Ze(t,this.math),this.ellipse=new Ke(t,this.math)}createCurveByKnotsControlPointsWeights(t){return this.context.verb.geom.NurbsCurve.byKnotsControlPointsWeights(t.degree,t.knots,t.points,t.weights)}createCurveByPoints(t){return this.context.verb.geom.NurbsCurve.byPoints(t.points,t.degree)}convertLinesToNurbsCurves(t){return t.lines.map((t=>new this.context.verb.geom.Line(t.start,t.end)))}convertLineToNurbsCurve(t){return new this.context.verb.geom.Line(t.line.start,t.line.end)}convertPolylineToNurbsCurve(t){return this.context.verb.geom.NurbsCurve.byPoints(t.polyline.points,1)}convertPolylinesToNurbsCurves(t){return t.polylines.map((t=>this.convertPolylineToNurbsCurve({polyline:t})))}createBezierCurve(t){return new this.context.verb.geom.BezierCurve(t.points,t.weights)}clone(t){return t.curve.clone()}closestParam(t){return t.curve.closestParam(t.point)}closestParams(t){return t.points.map((e=>t.curve.closestParam(e)))}closestPoint(t){return t.curve.closestPoint(t.point)}closestPoints(t){return t.points.map((e=>t.curve.closestPoint(e)))}controlPoints(t){return t.curve.controlPoints()}degree(t){return t.curve.degree()}derivatives(t){return t.curve.derivatives(t.parameter,t.numDerivatives)}divideByEqualArcLengthToParams(t){return t.curve.divideByEqualArcLength(t.subdivision).map((t=>t.u))}divideByEqualArcLengthToPoints(t){return t.curve.divideByEqualArcLength(t.subdivision).map((e=>t.curve.point(e.u)))}divideByArcLengthToParams(t){return t.curve.divideByArcLength(t.length).map((t=>t.u))}divideByArcLengthToPoints(t){return t.curve.divideByArcLength(t.length).map((e=>t.curve.point(e.u)))}divideCurvesByEqualArcLengthToPoints(t){return t.curves.map((e=>this.divideByEqualArcLengthToPoints({curve:e,subdivision:t.subdivision})))}divideCurvesByArcLengthToPoints(t){return t.curves.map((e=>this.divideByArcLengthToPoints({curve:e,length:t.length})))}domain(t){return t.curve.domain()}startPoint(t){return t.curve.point(t.curve.domain().min)}endPoint(t){return t.curve.point(t.curve.domain().max)}startPoints(t){return t.curves.map((t=>this.startPoint({curve:t})))}endPoints(t){return t.curves.map((t=>this.endPoint({curve:t})))}knots(t){return t.curve.knots()}lengthAtParam(t){return t.curve.lengthAtParam(t.parameter)}length(t){return t.curve.length()}paramAtLength(t){return t.curve.paramAtLength(t.length,t.tolerance)}pointAtParam(t){return t.curve.point(t.parameter)}pointsAtParam(t){return t.curves.map((e=>this.pointAtParam({curve:e,parameter:t.parameter})))}reverse(t){return t.curve.reverse()}split(t){return t.curve.split(t.parameter)}tangent(t){return t.curve.tangent(t.parameter)}tessellate(t){return t.curve.tessellate(t.tolerance)}transform(t){const e=t.curve.controlPoints(),r=this.geometryHelper.transformControlPoints(t.transformation,e);return this.context.verb.geom.NurbsCurve.byKnotsControlPointsWeights(t.curve.degree(),t.curve.knots(),r,t.curve.weights())}transformCurves(t){return t.curves.map((e=>this.transform({curve:e,transformation:t.transformation})))}weights(t){return t.curve.weights()}}class Je{constructor(t,e){this.context=t,this.geometryHelper=e}curves(t){return this.context.verb.geom.Intersect.curves(t.firstCurve,t.secondCurve,t.tolerance)}curveAndSurface(t){return this.context.verb.geom.Intersect.curveAndSurface(t.curve,t.surface,t.tolerance)}surfaces(t){return this.context.verb.geom.Intersect.surfaces(t.firstSurface,t.secondSurface)}curveCurveFirstParams(t){return t.intersections.filter((t=>t.u0>=0&&t.u0<=1)).map((t=>t.u0))}curveCurveSecondParams(t){return t.intersections.filter((t=>t.u1>=0&&t.u1<=1)).map((t=>t.u1))}curveCurveFirstPoints(t){return t.intersections.filter((t=>t.u0>=0&&t.u0<=1)).map((t=>t.point0))}curveCurveSecondPoints(t){return t.intersections.filter((t=>t.u1>=0&&t.u1<=1)).map((t=>t.point1))}curveSurfaceCurveParams(t){return t.intersections.filter((t=>t.u>=0&&t.u<=1)).map((t=>t.u))}curveSurfaceSurfaceParams(t){return t.intersections.map((t=>t.uv))}curveSurfaceCurvePoints(t){return t.intersections.filter((t=>t.u>=0&&t.u<=1)).map((t=>t.curvePoint))}curveSurfaceSurfacePoints(t){return t.intersections.map((t=>t.surfacePoint))}}class Qe{constructor(t){this.context=t}create(t){return new this.context.verb.geom.ConicalSurface(t.axis,t.xAxis,t.base,t.height,t.radius)}axis(t){return t.cone.axis()}base(t){return t.cone.base()}height(t){return t.cone.height()}radius(t){return t.cone.radius()}xAxis(t){return t.cone.xaxis()}}class tr{constructor(t){this.context=t}create(t){return new this.context.verb.geom.CylindricalSurface(t.axis,t.xAxis,t.base,t.height,t.radius)}axis(t){return t.cylinder.axis()}base(t){return t.cylinder.base()}height(t){return t.cylinder.height()}radius(t){return t.cylinder.radius()}xAxis(t){return t.cylinder.xaxis()}}class er{constructor(t){this.context=t}create(t){return new this.context.verb.geom.ExtrudedSurface(t.profile,t.direction)}direction(t){return t.extrusion.direction()}profile(t){return t.extrusion.profile()}}class rr{constructor(t,e){this.context=t,this.math=e}create(t){return new this.context.verb.geom.RevolvedSurface(t.profile,t.center,t.axis,this.math.degToRad({number:t.angle}))}profile(t){return t.revolution.profile()}center(t){return t.revolution.center()}axis(t){return t.revolution.axis()}angle(t){return this.math.radToDeg({number:t.revolution.angle()})}}class ir{constructor(t){this.context=t}create(t){return new this.context.verb.geom.SphericalSurface(t.center,t.radius)}radius(t){return t.sphere.radius()}center(t){return t.sphere.center()}}class or{constructor(t){this.context=t}create(t){return new this.context.verb.geom.SweptSurface(t.profile,t.rail)}profile(t){return t.sweep.profile()}rail(t){return t.sweep.rail()}}class sr{constructor(t,e,r){this.context=t,this.geometryHelper=e,this.math=r,this.cone=new Qe(t),this.cylinder=new tr(t),this.extrusion=new er(t),this.sphere=new ir(t),this.revolved=new rr(t,r),this.sweep=new or(t)}boundaries(t){return t.surface.boundaries()}createSurfaceByCorners(t){return this.context.verb.geom.NurbsSurface.byCorners(t.point1,t.point2,t.point3,t.point4)}createSurfaceByKnotsControlPointsWeights(t){return this.context.verb.geom.NurbsSurface.byKnotsControlPointsWeights(t.degreeU,t.degreeV,t.knotsU,t.knotsV,t.points,t.weights)}createSurfaceByLoftingCurves(t){return this.context.verb.geom.NurbsSurface.byLoftingCurves(t.curves,t.degreeV)}clone(t){return t.surface.clone()}closestParam(t){return t.surface.closestParam(t.point)}closestPoint(t){return t.surface.closestPoint(t.point)}controlPoints(t){return t.surface.controlPoints()}degreeU(t){return t.surface.degreeU()}degreeV(t){return t.surface.degreeV()}derivatives(t){return t.surface.derivatives(t.u,t.v,t.numDerivatives)}domainU(t){return t.surface.domainU()}domainV(t){return t.surface.domainV()}isocurve(t){return t.surface.isocurve(t.parameter,t.useV)}isocurvesSubdivision(t){const e=.999999/t.isocurveSegments,r=this.context.verb.core.Vec.span(1e-7,.9999999,e);return t.includeLast||r.pop(),t.includeFirst||r.shift(),r.map((e=>t.surface.isocurve(e,t.useV)))}isocurvesAtParams(t){return t.parameters.map((e=>t.surface.isocurve(e,t.useV)))}knotsU(t){return t.surface.knotsU()}knotsV(t){return t.surface.knotsV()}normal(t){return t.surface.normal(t.u,t.v)}point(t){return t.surface.point(t.u,t.v)}reverse(t){return t.surface.reverse()}split(t){return t.surface.split(t.parameter,t.useV)}transformSurface(t){const e=t.surface.controlPoints(),r=t.transformation,i=[];return e.forEach((t=>{let e=t;e=this.geometryHelper.transformControlPoints(r,e),i.push(e)})),this.context.verb.geom.NurbsSurface.byKnotsControlPointsWeights(t.surface.degreeU(),t.surface.degreeV(),t.surface.knotsU(),t.surface.knotsV(),i,t.surface.weights())}weights(t){return t.surface.weights()}}class nr{constructor(t,e,r){this.math=r,this.curve=new Xe(t,e,this.math),this.surface=new sr(t,e,this.math),this.intersect=new Je(t,e)}}class ar{}var cr,hr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class lr{constructor(){this.assetManager=new ar}getFile(t){return this.assetManager.getAsset(t.fileName)}getTextFile(t){return hr(this,void 0,void 0,(function*(){const e=yield this.assetManager.getAsset(t.fileName);return yield e.text()}))}getLocalFile(t){return this.assetManager.getLocalAsset(t.fileName)}getLocalTextFile(t){return hr(this,void 0,void 0,(function*(){const e=yield this.getLocalFile(t);return Array.isArray(e)?yield Promise.all(e.map((t=>t.text()))):yield e.text()}))}fetchBlob(t){return hr(this,void 0,void 0,(function*(){return(yield fetch(t.url)).blob()}))}fetchFile(t){return hr(this,void 0,void 0,(function*(){const e=yield fetch(t.url),r=yield e.blob();return new File([r],t.url.split("/").pop().split("?")[0])}))}fetchJSON(t){return hr(this,void 0,void 0,(function*(){return(yield fetch(t.url)).json()}))}fetchText(t){return hr(this,void 0,void 0,(function*(){return(yield fetch(t.url)).text()}))}createObjectURL(t){return URL.createObjectURL(t.file)}createObjectURLs(t){return t.files.map((t=>URL.createObjectURL(t)))}download(t){let e;e="string"==typeof t.content?new Blob([t.content],{type:t.contentType}):t.content,this.assetManager.downloadFile(e,t.fileName,t.extension,t.contentType)}}!function(t){t.IntervalDto=class{constructor(){this.min=0,this.max=1}},t.UVDto=class{constructor(){this.u=0,this.v=0}},t.CurveCurveIntersection=class{},t.CurveSurfaceIntersection=class{},t.SurfaceSurfaceIntersectionPoint=class{}}(cr||(cr={}));class ur{parseToArray(t){const e=this.convertEscapeSequences(t.rowSeparator||"\n"),r=this.convertEscapeSequences(t.columnSeparator||","),i=t.csv.split(e),o=[];for(let t=0;t<i.length;t++){const e=i[t].trim();if(!e)continue;const s=this.parseCsvLine(e,r);o.push(s)}return o}parseToJson(t){var e,r;const i=this.parseToArray({csv:t.csv,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator});if(0===i.length)return[];const o=null!==(e=t.headerRow)&&void 0!==e?e:0,s=null!==(r=t.dataStartRow)&&void 0!==r?r:1;if(o>=i.length)throw new Error(`Header row ${o} is out of bounds (total rows: ${i.length})`);const n=i[o],a=new Set(t.numberColumns||[]),c=[];for(let t=s;t<i.length;t++){const e=i[t],r={};n.forEach(((t,i)=>{const o=e[i]||"";if(a.has(t)){const e=parseFloat(o);r[t]=0===e?0:e}else r[t]=o})),c.push(r)}return c}parseToJsonWithHeaders(t){var e;const r=this.parseToArray({csv:t.csv,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator});if(0===r.length)return[];const i=null!==(e=t.dataStartRow)&&void 0!==e?e:0,o=new Set(t.numberColumns||[]),s=[];for(let e=i;e<r.length;e++){const i=r[e],n={};t.headers.forEach(((t,e)=>{const r=i[e]||"";if(o.has(t)){const e=parseFloat(r);n[t]=0===e?0:e}else n[t]=r})),s.push(n)}return s}queryColumn(t){const e=t.asNumber?[t.column]:void 0;return this.parseToJson({csv:t.csv,headerRow:t.headerRow,dataStartRow:t.dataStartRow,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator,numberColumns:e}).map((e=>void 0!==e[t.column]?e[t.column]:""))}queryRowsByValue(t){var e;const r=this.parseToJson({csv:t.csv,headerRow:t.headerRow,dataStartRow:t.dataStartRow,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator,numberColumns:t.numberColumns}),i=null===(e=t.numberColumns)||void 0===e?void 0:e.includes(t.column),o=i?parseFloat(t.value):t.value;return r.filter((e=>{const r=e[t.column];return i?r===o:r===t.value}))}arrayToCsv(t){const e=this.convertEscapeSequences(t.columnSeparator||","),r=this.convertEscapeSequences(t.rowSeparator||"\n");return t.array.map((t=>t.map((t=>this.escapeCsvCell(t,e))).join(e))).join(r)}jsonToCsv(t){const e=this.convertEscapeSequences(t.columnSeparator||","),r=this.convertEscapeSequences(t.rowSeparator||"\n");if(!t.json||0===t.json.length)return t.includeHeaders?t.headers.join(e):"";const i=[];return t.includeHeaders&&i.push(t.headers.map((t=>this.escapeCsvCell(t,e))).join(e)),t.json.forEach((r=>{const o=t.headers.map((t=>{const i=r[t];return this.escapeCsvCell(null!=i?String(i):"",e)}));i.push(o.join(e))})),i.join(r)}jsonToCsvAuto(t){var e;if(!t.json||0===t.json.length)return"";const r=Object.keys(t.json[0]);return this.jsonToCsv({json:t.json,headers:r,includeHeaders:null===(e=t.includeHeaders)||void 0===e||e,columnSeparator:t.columnSeparator,rowSeparator:t.rowSeparator})}getHeaders(t){var e;const r=this.parseToArray({csv:t.csv,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator}),i=null!==(e=t.headerRow)&&void 0!==e?e:0;if(i>=r.length)throw new Error(`Header row ${i} is out of bounds (total rows: ${r.length})`);return r[i]}getRowCount(t){var e;const r=this.parseToArray({csv:t.csv,rowSeparator:t.rowSeparator,columnSeparator:t.columnSeparator}),i=null!==(e=t.dataStartRow)&&void 0!==e?e:t.hasHeaders?1:0;return Math.max(0,r.length-i)}getColumnCount(t){const e=this.parseToArray(t);return e.length>0?e[0].length:0}parseCsvLine(t,e){const r=[];let i="",o=!1;for(let s=0;s<t.length;s++){const n=t[s],a=t[s+1];'"'===n?o&&'"'===a?(i+='"',s++):o=!o:n!==e||o?i+=n:(r.push(i),i="")}return r.push(i),r}escapeCsvCell(t,e){const r=null!=t?String(t):"";return r.includes(e)||r.includes('"')||r.includes("\n")||r.includes("\r")?'"'+r.replace(/"/g,'""')+'"':r}convertEscapeSequences(t){return t.replace(/\\n/g,"\n").replace(/\\t/g,"\t").replace(/\\r/g,"\r")}}class dr{constructor(t){this.context=t}stringify(t){return JSON.stringify(t.json)}parse(t){return JSON.parse(t.text)}query(t){return this.context.jsonpath({path:t.query,json:t.json})}setValueOnProp(t){const e=Object.assign({},structuredClone(t.json));return e[t.property]=t.value,e}getJsonFromArrayByFirstPropMatch(t){return t.jsonArray.find((e=>e[t.property]===t.match))}getValueOnProp(t){try{return Object.assign({},structuredClone(t.json))[t.property]}catch(e){return t.json[t.property]}}setValue(t){if(t.json instanceof Object){const e=Object.assign({},structuredClone(t.json)),r=e=>(e[t.prop]=t.value,e);return this.context.jsonpath({path:t.path,json:e,callback:r}),e}throw new Error("Json must be an object")}setValuesOnPaths(t){let e=Object.assign({},structuredClone(t.json));return t.paths.forEach(((r,i)=>{e=this.setValue({json:e,path:r,value:t.values[i],prop:t.props[i]})})),e}paths(t){return this.context.jsonpath({json:t.json,path:t.query,resultType:"path"})}createEmpty(){return{}}previewAndSaveJson(t){t.json&&this.context.promptPrintSave({text:t.json,isJson:!0,hidden:!1})}previewJson(t){t.json&&this.context.promptPrint({text:t.json,isJson:!0,hidden:!1})}}class vr{constructor(t){this.context=t}create(t){const e=new je.TagDto;return e.text=t.text,e.position=t.position,e.colour=t.colour,e.size=t.size,e.adaptDepth=t.adaptDepth,e}drawTag(t){if(t.tagVariable&&t.updatable){const e=this.context.tagBag.find((e=>e.id===t.tagVariable.id));Object.keys(t.tag).forEach((r=>{e[r]=t.tag[r]})),e.needsUpdate=!0}else{const e=document.createElement("span"),r="_tag"+(new Date).getTime()+this.context.tagBag.length;t.tag.id=r,e.id=r,e.textContent=t.tag.text,document.querySelector("."+this.context.canvasZoneClass).appendChild(e),t.tag.needsUpdate=!0,this.context.tagBag.push(t.tag)}return t.tag}drawTags(t){if(t.tagsVariable&&t.updatable){if(t.tagsVariable.length<t.tags.length)for(let e=t.tagsVariable.length-1;e<t.tags.length-1;e++){const r=t.tags[e],i=document.createElement("span"),o="_tag"+(new Date).getTime()+this.context.tagBag.length;r.id=o,i.id=o,document.querySelector("."+this.context.canvasZoneClass).appendChild(i),r.needsUpdate=!0,this.context.tagBag.push(r),t.tagsVariable.push(r)}t.tagsVariable.forEach(((e,r)=>{const i=this.context.tagBag.find((t=>t.id===e.id)),o=t.tags[r];if(o)Object.keys(o).forEach((t=>{i[t]=o[t]})),i.needsUpdate=!0;else{this.context.tagBag=this.context.tagBag.filter((t=>t.id!==i.id));const t=document.getElementById(i.id);t.parentNode.removeChild(t)}}))}else{const e=[];t.tags.forEach(((r,i)=>{const o=document.createElement("span"),s="_tag"+(new Date).getTime()+this.context.tagBag.length;r.id=s,o.id=s,o.textContent=r.text,document.querySelector("."+this.context.canvasZoneClass).appendChild(o),r.needsUpdate=!0,this.context.tagBag.push(r),e.push(r),t.tagsVariable=e}))}return t.tagsVariable}}class fr{constructor(t){this.context=t}registerRenderFunction(t){this.context.renderLoopBag.push((e=>{t(e)}))}}const pr="#ff0000",gr="#0000ff";var mr,br,yr,Pr,wr;!function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG"}(mr||(mr={}));class kr{constructor(){this.canvasZoneClass="canvasZone",this.tolerance=1e-5,this.snapTolerance=1e-5,this.tagBag=[],this.timeoutBag=[],this.intervalBag=[],this.renderLoopBag=[],this.keyDownBag=[],this.keyUpBag=[],this.keyPressBag=[],this.currentlyPressedKeys=[]}getFile(t){return new Promise(((e,r)=>{if(t){const i=new FileReader;i.readAsText(t,"UTF-8"),i.onload=t=>{const r=t.target.result;e(r)},i.onerror=t=>{r()}}else r()}))}remap(t,e,r,i,o){return(t-e)/(r-e)*(o-i)+i}}class Cr{detectPoint(t){return Array.isArray(t)&&3===t.length&&this.checkIfElementsInArrayAreNumbers(t)}detectPoints(t){return Array.isArray(t)&&this.checkIfElementsInArrayAreArrays(t)&&this.arraysInChildrenArraysContainNumbers(t)&&this.arraysInChildrenArraysAreOfLength3(t)}detectLine(t){if(!t||"object"!=typeof t)return!1;const e=t;return e.start&&e.end&&Array.isArray(e.start)&&Array.isArray(e.end)||Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1])&&this.checkIfElementsInArrayAreNumbers(t[0])&&3===t[0].length&&this.checkIfElementsInArrayAreNumbers(t[1])&&3===t[1].length}detectLines(t){return Array.isArray(t)&&!t.some((t=>!this.detectLine(t)))}detectPolyline(t){if(!t||"object"!=typeof t)return!1;const e=t;return void 0!==e.points&&Array.isArray(e.points)}detectPolylines(t){return Array.isArray(t)&&!t.some((t=>!this.detectPolyline(t)))}detectNode(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;const e=t;return"string"==typeof e.id&&e.id.includes("node")}detectNodes(t){return Array.isArray(t)&&!t.some((t=>!this.detectNode(t)))}detectVerbCurve(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;const e=t._data;return void 0!==e&&void 0!==e.controlPoints&&void 0!==e.knots&&void 0!==e.degree}detectVerbSurface(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;const e=t._data;return void 0!==e&&void 0!==e.controlPoints&&void 0!==e.degreeU&&void 0!==e.degreeV&&void 0!==e.knotsU&&void 0!==e.knotsV}detectVerbCurves(t){return Array.isArray(t)&&!t.some((t=>!this.detectVerbCurve(t)))}detectVerbSurfaces(t){return Array.isArray(t)&&!t.some((t=>!this.detectVerbSurface(t)))}detectJscadMesh(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;const e=t;return void 0!==e.sides||void 0!==e.polygons}detectJscadMeshes(t){return Array.isArray(t)&&!t.some((t=>!this.detectJscadMesh(t)))}detectOcctShape(t){return!(!t||"object"!=typeof t)&&"occ-shape"===t.type}detectOcctShapes(t){return Array.isArray(t)&&!t.some((t=>!this.detectOcctShape(t)))}detectManifoldShape(t){return!(!t||"object"!=typeof t)&&"manifold-shape"===t.type}detectManifoldShapes(t){return Array.isArray(t)&&!t.some((t=>!this.detectManifoldShape(t)))}detectTag(t){return!(!t||"object"!=typeof t||Array.isArray(t))&&void 0!==t.text}detectTags(t){return Array.isArray(t)&&!t.some((t=>!this.detectTag(t)))}checkIfElementsInArrayAreNumbers(t){return!t.some((t=>"number"!=typeof t||isNaN(t)))}checkIfElementsInArrayAreArrays(t){return!t.some((t=>!Array.isArray(t)))}arraysInChildrenArraysContainNumbers(t){return!t.some((t=>!this.checkIfElementsInArrayAreNumbers(t)))}arraysInChildrenArraysAreOfLength3(t){return!t.some((t=>3!==t.length))}isValidDrawInput(t){return null!=t&&(!Array.isArray(t)||0!==t.length)}isTagDto(t){return null!=t&&"object"==typeof t&&"text"in t}isTagDtoArray(t){return Array.isArray(t)&&t.length>0&&this.isTagDto(t[0])}}!function(t){let e,r,i,o,s,n,a;!function(t){t.firstColorForAll="firstColorForAll",t.lastColorRemainder="lastColorRemainder",t.repeatColors="repeatColors",t.reversedColors="reversedColors"}(e=t.colorMapStrategyEnum||(t.colorMapStrategyEnum={})),function(t){t.default="default",t.clearSky="clearSky",t.city="city",t.greyGradient="greyGradient"}(r=t.skyboxEnum||(t.skyboxEnum={})),function(t){t.none="none",t.exponential="exponential",t.exponentialSquared="exponentialSquared",t.linear="linear"}(i=t.fogModeEnum||(t.fogModeEnum={})),function(t){t.left="left",t.center="center",t.right="right"}(o=t.horizontalAlignEnum||(t.horizontalAlignEnum={})),function(t){t.top="top",t.middle="middle",t.bottom="bottom"}(s=t.verticalAlignmentEnum||(t.verticalAlignmentEnum={})),function(t){t.top="top",t.bottom="bottom"}(n=t.topBottomEnum||(t.topBottomEnum={})),function(t){t.topLeft="topLeft",t.topMid="topMid",t.topRight="topRight",t.midLeft="midLeft",t.midMid="midMid",t.midRight="midRight",t.bottomLeft="bottomLeft",t.bottomMid="bottomMid",t.bottomRight="bottomRight"}(a=t.basicAlignmentEnum||(t.basicAlignmentEnum={}))}(br||(br={}));class xr{constructor(t){this.vector=t}computeEdgeMiddlePos(t){let e;if(2===t.vertex_coord.length){const r=t.vertex_coord[0],i=t.vertex_coord[1];e=this.vector.lerp({first:r,second:i,fraction:.5})}else if(3===t.vertex_coord.length)e=t.vertex_coord[1];else{const r=t.vertex_coord[Math.floor(t.vertex_coord.length/2)],i=t.vertex_coord[Math.floor(t.vertex_coord.length/2+1)];e=this.vector.lerp({first:r,second:i,fraction:.5})}return e}computeFaceMiddlePos(t){let e=0,r=0,i=0,o=0;return t.forEach((t=>{e+=t[0],r+=t[1],i+=t[2],o++})),[e/o,r/o,i/o]}resolveColorForEntity(t,e,r,i=br.colorMapStrategyEnum.lastColorRemainder){if(!Array.isArray(t))return t;if(0===t.length)return"#ff0000";if(1===t.length)return t[0];if(t.length>=r)return t[e];switch(i){case br.colorMapStrategyEnum.firstColorForAll:return t[0];case br.colorMapStrategyEnum.lastColorRemainder:return e<t.length?t[e]:t[t.length-1];case br.colorMapStrategyEnum.repeatColors:return t[e%t.length];case br.colorMapStrategyEnum.reversedColors:{const r=2*(t.length-1);if(r<=0)return t[0];const i=e%r;return i<t.length?t[i]:t[r-i]}default:return e<t.length?t[e]:t[t.length-1]}}resolveAllColors(t,e,r=br.colorMapStrategyEnum.lastColorRemainder){const i=[];for(let o=0;o<e;o++)i.push(this.resolveColorForEntity(t,o,e,r));return i}colorToHex(t,e,r){const i=t=>{const e=Math.round(t).toString(16);return 1===e.length?"0"+e:e};return"#"+i(t)+i(e)+i(r)}normalizedColorToHex(t,e,r){return this.colorToHex(255*t,255*e,255*r)}hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:null}normalizeColor(t,e){return t?Array.isArray(t)?t.length<3?(console.warn(`Invalid color array length: ${t.length}, expected at least 3. Using fallback: ${e}`),e):this.normalizedColorToHex(t[0],t[1],t[2]):"string"==typeof t?/^#?[0-9A-F]{6}$/i.test(t)?t.startsWith("#")?t:`#${t}`:(console.warn(`Invalid hex color: ${t}. Using fallback: ${e}`),e):(console.warn(`Unknown color format: ${typeof t}. Using fallback: ${e}`),e):e}getMaterialKey(t,e,r,i=!1){return`${t}-${e.toFixed(4)}-${r}${i?"-unlit":""}`}computePolylineSignature(t){return t.map((t=>t.length)).join(",")}computeArrowHeadLines(t,e,r){if(t.length<2||e<=0)return[];const i=t[t.length-1],o=t[t.length-2],s=i[0]-o[0],n=i[1]-o[1],a=i[2]-o[2],c=Math.sqrt(s*s+n*n+a*a);if(c<1e-10)return[];const h=s/c,l=n/c,u=a/c,d=r*Math.PI/180,v=Math.cos(d),f=Math.sin(d);let p=0,g=1,m=0;Math.abs(l)>.9&&(p=1,g=0,m=0);let b=l*m-u*g,y=u*p-h*m,P=h*g-l*p;const w=Math.sqrt(b*b+y*y+P*P);b/=w,y/=w,P/=w;let k=l*P-u*y,C=u*b-h*P,x=h*y-l*b;const _=Math.sqrt(k*k+C*C+x*x);k/=_,C/=_,x/=_;const T=e*v,S=e*f,M=[];return M.push([i,[i[0]-h*T+b*S,i[1]-l*T+y*S,i[2]-u*T+P*S]]),M.push([i,[i[0]-h*T-b*S,i[1]-l*T-y*S,i[2]-u*T-P*S]]),M.push([i,[i[0]-h*T+k*S,i[1]-l*T+C*S,i[2]-u*T+x*S]]),M.push([i,[i[0]-h*T-k*S,i[1]-l*T-C*S,i[2]-u*T-x*S]]),M}computeArrowHeadLinesForPolylines(t,e,r){const i=[];for(const o of t){const t=this.computeArrowHeadLines(o,e,r);i.push(...t)}return i}arrowLinesToPolylines(t){return t}processPolylinePoints(t){return t.map((t=>{const e=t.points?[...t.points]:[];return t.isClosed&&e.length>0&&e.push(e[0]),e}))}computeNormals(t,e){const r=t.length/3,i=new Float32Array(t.length);for(let r=0;r<e.length;r+=3){const o=e[r],s=e[r+1],n=e[r+2],a=t[3*o],c=t[3*o+1],h=t[3*o+2],l=t[3*s]-a,u=t[3*s+1]-c,d=t[3*s+2]-h,v=t[3*n]-a,f=t[3*n+1]-c,p=t[3*n+2]-h,g=u*p-d*f,m=d*v-l*p,b=l*f-u*v;i[3*o]+=g,i[3*o+1]+=m,i[3*o+2]+=b,i[3*s]+=g,i[3*s+1]+=m,i[3*s+2]+=b,i[3*n]+=g,i[3*n+1]+=m,i[3*n+2]+=b}for(let t=0;t<r;t++){const e=i[3*t],r=i[3*t+1],o=i[3*t+2],s=Math.sqrt(e*e+r*r+o*o);s>0&&(i[3*t]=e/s,i[3*t+1]=r/s,i[3*t+2]=o/s)}return Array.from(i)}expandToFlatShaded(t,e){const r=[],i=[],o=[];for(let s=0;s<e.length;s+=3){const n=e[s],a=e[s+1],c=e[s+2],h=t[3*n],l=t[3*n+1],u=t[3*n+2],d=t[3*a],v=t[3*a+1],f=t[3*a+2],p=t[3*c],g=t[3*c+1],m=t[3*c+2],b=d-h,y=v-l,P=f-u,w=p-h,k=g-l,C=m-u;let x=y*C-P*k,_=P*w-b*C,T=b*k-y*w;const S=Math.sqrt(x*x+_*_+T*T);S>0&&(x/=S,_/=S,T/=S);const M=r.length/3;r.push(h,l,u),r.push(d,v,f),r.push(p,g,m),i.push(x,_,T),i.push(x,_,T),i.push(x,_,T),o.push(M,M+1,M+2)}return{positions:r,indices:o,normals:i}}prepareBackFaceMeshData(t){const e=[];let r=[];const i=[],o=[];let s=0;if(t.forEach((t=>{if(e.push(...t.positions),t.normals&&t.normals.length>0)for(let e=0;e<t.normals.length;e++)r.push(-t.normals[e]);t.uvs&&o.push(...t.uvs);for(let e=0;e<t.indices.length;e+=3)i.push(t.indices[e]+s,t.indices[e+2]+s,t.indices[e+1]+s);s+=t.positions.length/3})),0===r.length&&e.length>0){const t=this.computeNormals(e,i);r=t}return{positions:e,indices:i,normals:r,uvs:o.length>0?o:void 0}}getDefaultBackFaceColor(){return gr}}!function(t){let e;!function(t){t.firstColorForAll="firstColorForAll",t.lastColorRemainder="lastColorRemainder",t.repeatColors="repeatColors",t.reversedColors="reversedColors"}(e=t.colorMapStrategyEnum||(t.colorMapStrategyEnum={}))}(yr||(yr={})),function(t){let e,r,i;t.DrawAny=class{constructor(t,e){void 0!==t&&(this.entity=t),void 0!==e&&(this.options=e)}},t.DrawManifoldOrCrossSectionOptions=class{constructor(t,e,r,i,o,s,n,a,c,h){this.faceOpacity=1,this.faceColour="#ff0000",this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.computeNormals=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.faceOpacity=t),void 0!==e&&(this.faceMaterial=e),void 0!==r&&(this.faceColour=r),void 0!==i&&(this.crossSectionColour=i),void 0!==o&&(this.crossSectionWidth=o),void 0!==s&&(this.crossSectionOpacity=s),void 0!==n&&(this.computeNormals=n),void 0!==a&&(this.drawTwoSided=a),void 0!==c&&(this.backFaceColour=c),void 0!==h&&(this.backFaceOpacity=h)}},t.DrawOcctShapeOptions=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w,k){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.vertexColour="#ffaaff",this.edgeWidth=2,this.vertexSize=.03,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,this.edgeArrowSize=0,this.edgeArrowAngle=15,void 0!==t&&(this.faceOpacity=t),void 0!==e&&(this.edgeOpacity=e),void 0!==r&&(this.edgeColour=r),void 0!==i&&(this.faceMaterial=i),void 0!==o&&(this.faceColour=o),void 0!==h&&(this.vertexColour=h),void 0!==l&&(this.vertexSize=l),void 0!==s&&(this.edgeWidth=s),void 0!==n&&(this.drawEdges=n),void 0!==a&&(this.drawFaces=a),void 0!==c&&(this.drawVertices=c),void 0!==u&&(this.precision=u),void 0!==d&&(this.drawEdgeIndexes=d),void 0!==v&&(this.edgeIndexHeight=v),void 0!==f&&(this.edgeIndexColour=f),void 0!==p&&(this.drawFaceIndexes=p),void 0!==g&&(this.faceIndexHeight=g),void 0!==m&&(this.faceIndexColour=m),void 0!==b&&(this.drawTwoSided=b),void 0!==y&&(this.backFaceColour=y),void 0!==P&&(this.backFaceOpacity=P),void 0!==w&&(this.edgeArrowSize=w),void 0!==k&&(this.edgeArrowAngle=k)}},t.DrawBasicGeometryOptions=class{constructor(t,e,r,i,o,s,n,a,c,h,l){this.colours="#ff0000",this.colorMapStrategy=yr.colorMapStrategyEnum.lastColorRemainder,this.size=1,this.opacity=1,this.updatable=!1,this.hidden=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,this.arrowSize=0,this.arrowAngle=15,void 0!==t&&(this.colours=t),void 0!==e&&(this.size=e),void 0!==r&&(this.opacity=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==s&&(this.drawTwoSided=s),void 0!==n&&(this.backFaceColour=n),void 0!==a&&(this.backFaceOpacity=a),void 0!==c&&(this.colorMapStrategy=c),void 0!==h&&(this.arrowSize=h),void 0!==l&&(this.arrowAngle=l)}},function(t){t.nearest="nearest",t.bilinear="bilinear",t.trilinear="trilinear"}(e=t.samplingModeEnum||(t.samplingModeEnum={})),t.GenericTextureDto=class{constructor(t,r,i,o,s,n,a,c,h,l){this.name="Texture",this.uScale=1,this.vScale=1,this.uOffset=0,this.vOffset=0,this.wAng=0,this.invertY=!1,this.invertZ=!1,this.samplingMode=e.nearest,void 0!==t&&(this.url=t),void 0!==r&&(this.name=r),void 0!==i&&(this.uScale=i),void 0!==o&&(this.vScale=o),void 0!==s&&(this.uOffset=s),void 0!==n&&(this.vOffset=n),void 0!==a&&(this.wAng=a),void 0!==c&&(this.invertY=c),void 0!==h&&(this.invertZ=h),void 0!==l&&(this.samplingMode=l)}},function(t){t.opaque="opaque",t.mask="mask",t.blend="blend"}(r=t.alphaModeEnum||(t.alphaModeEnum={})),t.GenericPBRMaterialDto=class{constructor(t,e,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y){this.name="PBRMaterial",this.baseColor="#0000ff",this.metallic=.5,this.roughness=.5,this.alpha=1,this.emissiveColor="#000000",this.emissiveIntensity=1,this.zOffset=0,this.zOffsetUnits=0,this.alphaMode=r.opaque,this.alphaCutoff=.5,this.doubleSided=!1,this.wireframe=!1,this.unlit=!1,void 0!==t&&(this.name=t),void 0!==e&&(this.baseColor=e),void 0!==i&&(this.metallic=i),void 0!==o&&(this.roughness=o),void 0!==s&&(this.alpha=s),void 0!==n&&(this.emissiveColor=n),void 0!==a&&(this.emissiveIntensity=a),void 0!==c&&(this.zOffset=c),void 0!==h&&(this.zOffsetUnits=h),void 0!==l&&(this.baseColorTexture=l),void 0!==u&&(this.metallicRoughnessTexture=u),void 0!==d&&(this.normalTexture=d),void 0!==v&&(this.emissiveTexture=v),void 0!==f&&(this.occlusionTexture=f),void 0!==p&&(this.alphaMode=p),void 0!==g&&(this.alphaCutoff=g),void 0!==m&&(this.doubleSided=m),void 0!==b&&(this.wireframe=b),void 0!==y&&(this.unlit=y)}},function(t){t[t.point=0]="point",t[t.points=1]="points",t[t.line=2]="line",t[t.lines=3]="lines",t[t.node=4]="node",t[t.nodes=5]="nodes",t[t.polyline=6]="polyline",t[t.polylines=7]="polylines",t[t.verbCurve=8]="verbCurve",t[t.verbCurves=9]="verbCurves",t[t.verbSurface=10]="verbSurface",t[t.verbSurfaces=11]="verbSurfaces",t[t.jscadMesh=12]="jscadMesh",t[t.jscadMeshes=13]="jscadMeshes",t[t.occt=14]="occt",t[t.occtShapes=15]="occtShapes",t[t.tag=16]="tag",t[t.tags=17]="tags"}(i=t.drawingTypes||(t.drawingTypes={}))}(Pr||(Pr={})),function(t){t.OrbitCameraDto=class{constructor(t,e,r,i,o,s,n,a,c,h,l,u){this.pivotPoint=[0,0,0],this.distance=20,this.pitch=30,this.yaw=45,this.distanceMin=.1,this.distanceMax=1e3,this.pitchAngleMin=-90,this.pitchAngleMax=90,this.orbitSensitivity=.3,this.distanceSensitivity=.15,this.inertiaFactor=0,this.autoRender=!0,this.frameOnStart=!0,void 0!==t&&(this.distance=t),void 0!==e&&(this.pitch=e),void 0!==r&&(this.yaw=r),void 0!==i&&(this.distanceMin=i),void 0!==o&&(this.distanceMax=o),void 0!==s&&(this.pitchAngleMin=s),void 0!==n&&(this.pitchAngleMax=n),void 0!==a&&(this.orbitSensitivity=a),void 0!==c&&(this.distanceSensitivity=c),void 0!==h&&(this.inertiaFactor=h),void 0!==l&&(this.autoRender=l),void 0!==u&&(this.frameOnStart=u)}},t.CameraDto=class{constructor(t){void 0!==t&&(this.camera=t)}},t.PositionDto=class{constructor(t,e){this.position=[0,0,0],void 0!==t&&(this.camera=t),void 0!==e&&(this.position=e)}},t.PivotPointDto=class{constructor(t,e){this.pivotPoint=[0,0,0],void 0!==t&&(this.orbitCamera=t),void 0!==e&&(this.pivotPoint=e)}},t.FocusEntityDto=class{constructor(t,e){void 0!==t&&(this.orbitCamera=t),void 0!==e&&(this.entity=e)}},t.ResetCameraDto=class{constructor(t,e,r,i){this.yaw=45,this.pitch=30,this.distance=20,void 0!==t&&(this.orbitCamera=t),void 0!==e&&(this.yaw=e),void 0!==r&&(this.pitch=r),void 0!==i&&(this.distance=i)}}}(wr||(wr={}));var _r=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Tr extends Cr{constructor(t,e,r){super(),this.drawHelper=t,this.context=e,this.tag=r,this.defaultBasicOptions=new Pr.DrawBasicGeometryOptions,this.defaultPolylineOptions=Object.assign(Object.assign({},new Pr.DrawBasicGeometryOptions),{size:2,colours:"#ff00ff"})}drawAnyAsync(t){return _r(this,void 0,void 0,(function*(){if(!this.isValidDrawInput(t.entity))return Promise.resolve(void 0);const e=t.entity;return this.detectJscadMesh(e)?this.handleJscadMesh(t):this.detectOcctShape(e)?this.handleOcctShape(t):this.detectOcctShapes(e)?this.handleOcctShapes(t):this.detectJscadMeshes(e)?this.handleJscadMeshes(t):this.detectManifoldShape(e)?this.handleManifoldShape(t):this.detectManifoldShapes(e)?this.handleManifoldShapes(t):Promise.resolve(this.drawAny(t))}))}drawAny(t){if(!this.isValidDrawInput(t.entity))return;let e;const r=t.entity;return t.group||t.entity instanceof G.Entity?e=this.updateAny(t):this.detectLine(r)?e=this.handleLine(t):this.detectPoint(r)?e=this.handlePoint(t):this.detectPolyline(r)?e=this.handlePolyline(t):this.detectVerbCurve(r)?e=this.handleVerbCurve(t):this.detectVerbSurface(r)?e=this.handleVerbSurface(t):this.detectPolylines(r)?e=this.handlePolylines(t):this.detectLines(r)?e=this.handleLines(t):this.detectPoints(r)?e=this.handlePoints(t):this.detectVerbCurves(r)?e=this.handleVerbCurves(t):this.detectVerbSurfaces(r)?e=this.handleVerbSurfaces(t):this.detectTag(r)?e=this.handleTag(t):this.detectTags(r)&&(e=this.handleTags(t)),e}optionsSimple(t){return t}optionsOcctShape(t){return t}createTexture(t){const e=this.context.app,r=new G.Texture(e.graphicsDevice,{name:t.name,addressU:G.ADDRESS_REPEAT,addressV:G.ADDRESS_REPEAT,flipY:!t.invertY});r._bitbybitTransform={uScale:t.uScale,vScale:t.vScale,uOffset:t.uOffset,vOffset:t.vOffset,wAng:t.wAng,invertZ:t.invertZ};const i=new Image;return i.crossOrigin="anonymous",i.onload=()=>{switch(r.setSource(i),t.samplingMode){case Pr.samplingModeEnum.nearest:r.minFilter=G.FILTER_NEAREST,r.magFilter=G.FILTER_NEAREST;break;case Pr.samplingModeEnum.bilinear:r.minFilter=G.FILTER_LINEAR,r.magFilter=G.FILTER_LINEAR;break;case Pr.samplingModeEnum.trilinear:r.minFilter=G.FILTER_LINEAR_MIPMAP_LINEAR,r.magFilter=G.FILTER_LINEAR}},i.src=t.url,r}createPBRMaterial(t){const e=new G.StandardMaterial;e.name=t.name;const r=this.hexToRgb(t.baseColor);if(e.diffuse=new G.Color(r.r,r.g,r.b),e.metalness=t.metallic,e.gloss=1-t.roughness,e.useMetalness=!0,e.opacity=t.alpha,t.emissiveColor){const r=this.hexToRgb(t.emissiveColor);e.emissive=new G.Color(r.r,r.g,r.b),e.emissiveIntensity=t.emissiveIntensity}switch(e.cull=t.doubleSided?G.CULLFACE_NONE:G.CULLFACE_BACK,0!==t.zOffset&&(e.depthBias=t.zOffset,e.slopeDepthBias=t.zOffsetUnits),t.baseColorTexture&&(e.diffuseMap=t.baseColorTexture,this.applyTextureTransform(e,t.baseColorTexture,"diffuseMap")),t.metallicRoughnessTexture&&(e.metalnessMap=t.metallicRoughnessTexture,e.glossMap=t.metallicRoughnessTexture,this.applyTextureTransform(e,t.metallicRoughnessTexture,"metalnessMap")),t.normalTexture&&(e.normalMap=t.normalTexture,this.applyTextureTransform(e,t.normalTexture,"normalMap")),t.emissiveTexture&&(e.emissiveMap=t.emissiveTexture,this.applyTextureTransform(e,t.emissiveTexture,"emissiveMap")),t.occlusionTexture&&(e.aoMap=t.occlusionTexture,this.applyTextureTransform(e,t.occlusionTexture,"aoMap")),t.alphaMode){case Pr.alphaModeEnum.opaque:e.blendType=G.BLEND_NONE;break;case Pr.alphaModeEnum.mask:e.blendType=G.BLEND_NONE,e.alphaTest=t.alphaCutoff;break;case Pr.alphaModeEnum.blend:e.blendType=G.BLEND_NORMAL}return e.update(),e}applyTextureTransform(t,e,r){const i=e._bitbybitTransform;if(!i)return;const o={diffuseMap:"diffuseMap",normalMap:"normalMap",emissiveMap:"emissiveMap",metalnessMap:"metalnessMap",aoMap:"aoMap"}[r];if(!o)return;const s=i.invertZ?-1:1;t[`${o}Tiling`]=new G.Vec2(i.uScale,i.vScale*s),t[`${o}Offset`]=new G.Vec2(i.uOffset,i.vOffset),t[`${o}Rotation`]=i.wAng}hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:{r:0,g:0,b:1}}handleJscadMesh(t){return this.handleAsync(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawSolidOrPolygonMesh(Object.assign({jscadMesh:t.group,mesh:t.entity},e))),Pr.drawingTypes.jscadMesh)}handleJscadMeshes(t){return this.handleAsync(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawSolidOrPolygonMeshes(Object.assign({jscadMesh:t.group,meshes:t.entity},e))),Pr.drawingTypes.jscadMeshes)}handleManifoldShape(t){return this.handleAsync(t,new Ge.DrawManifoldOrCrossSectionDto(t.entity),(e=>this.drawHelper.drawManifoldOrCrossSection(Object.assign(Object.assign({manifoldOrCrossSection:t.entity},new Pr.DrawManifoldOrCrossSectionOptions),e))),Pr.drawingTypes.occt)}handleManifoldShapes(t){return this.handleAsync(t,new Ge.DrawManifoldOrCrossSectionDto(t.entity),(e=>this.drawHelper.drawManifoldsOrCrossSections(Object.assign(Object.assign({manifoldsOrCrossSections:t.entity},new Pr.DrawManifoldOrCrossSectionOptions),e))),Pr.drawingTypes.occt)}handleOcctShape(t){return this.handleAsync(t,new Pr.DrawOcctShapeOptions,(e=>this.drawHelper.drawShape(Object.assign(Object.assign({shape:t.entity},new Pr.DrawOcctShapeOptions),e))),Pr.drawingTypes.occt)}handleOcctShapes(t){return this.handleAsync(t,new Pr.DrawOcctShapeOptions,(e=>this.drawHelper.drawShapes(Object.assign(Object.assign({shapes:t.entity},new Pr.DrawOcctShapeOptions),e))),Pr.drawingTypes.occtShapes)}handleLine(t){return this.handle(t,this.defaultPolylineOptions,(e=>{const r=t.entity,i=[];return r&&r.start?i.push(r.start,r.end):i.push(...r),this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:t.group,polylines:[{points:i}]},e))}),Pr.drawingTypes.line)}handlePoint(t){return this.handle(t,this.defaultBasicOptions,(e=>this.drawHelper.drawPoint(Object.assign({pointMesh:t.group,point:t.entity},e))),Pr.drawingTypes.point)}handlePolyline(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawPolylineClose(Object.assign({polylineMesh:t.group,polyline:t.entity},e))),Pr.drawingTypes.polyline)}handleVerbCurve(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawCurve(Object.assign({curveMesh:t.group,curve:t.entity},e))),Pr.drawingTypes.verbCurve)}handleVerbSurface(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawSurface(Object.assign({surfaceMesh:t.group,surface:t.entity},e))),Pr.drawingTypes.verbSurface)}handlePolylines(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:t.group,polylines:t.entity},e))),Pr.drawingTypes.polylines)}handleLines(t){return this.handle(t,this.defaultPolylineOptions,(e=>{const r=t.entity,i=[];return r&&r[0]&&r[0].start?r.forEach((t=>{i.push([t.start,t.end])})):r.forEach((t=>{i.push(t)})),this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:t.group,polylines:i.map((t=>({points:[...t]})))},e))}),Pr.drawingTypes.lines)}handlePoints(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawPoints(Object.assign({pointsMesh:t.group,points:t.entity},e))),Pr.drawingTypes.points)}handleVerbCurves(t){return this.handle(t,this.defaultPolylineOptions,(e=>this.drawHelper.drawCurves(Object.assign({curvesMesh:t.group,curves:t.entity},e))),Pr.drawingTypes.verbCurves)}handleVerbSurfaces(t){return this.handle(t,this.defaultBasicOptions,(e=>this.drawHelper.drawSurfacesMultiColour(Object.assign({surfacesMesh:t.group,surfaces:t.entity},e))),Pr.drawingTypes.verbSurfaces)}handleTag(t){const e=this.resolveDrawOptions(t,Object.assign(Object.assign({},this.defaultBasicOptions),{updatable:!1}));if(!this.isTagDto(t.entity))throw new Error("Entity must be a TagDto for drawTag operation");const r=this.tag.drawTag(Object.assign({tagVariable:t.group&&this.isTagDto(t.group)?t.group:void 0,tag:t.entity},e));return this.attachMetadata(r,Pr.drawingTypes.tag,e)}handleTags(t){const e=this.resolveDrawOptions(t,Object.assign(Object.assign({},this.defaultBasicOptions),{updatable:!1}));if(!this.isTagDtoArray(t.entity))throw new Error("Entity must be a TagDto array for drawTags operation");const r=this.tag.drawTags(Object.assign({tagsVariable:t.group&&this.isTagDtoArray(t.group)?t.group:void 0,tags:t.entity},e));return this.attachMetadata(r,Pr.drawingTypes.tags,e)}updateAny(t){let e;const r=t.group;if(r&&r.bitbybitMeta)switch(r.bitbybitMeta.type){case Pr.drawingTypes.point:e=this.handlePoint(t);break;case Pr.drawingTypes.points:e=this.handlePoints(t);break;case Pr.drawingTypes.line:e=this.handleLine(t);break;case Pr.drawingTypes.lines:e=this.handleLines(t);break;case Pr.drawingTypes.polyline:e=this.handlePolyline(t);break;case Pr.drawingTypes.polylines:e=this.handlePolylines(t);break;case Pr.drawingTypes.verbCurve:e=this.handleVerbCurve(t);break;case Pr.drawingTypes.verbCurves:e=this.handleVerbCurves(t);break;case Pr.drawingTypes.verbSurface:e=this.handleVerbSurface(t);break;case Pr.drawingTypes.verbSurfaces:e=this.handleVerbSurfaces(t);break;case Pr.drawingTypes.tag:e=this.handleTag(t);break;case Pr.drawingTypes.tags:e=this.handleTags(t)}return e}handle(t,e,r,i){try{const o=this.resolveDrawOptions(t,e),s=r(o);return s&&this.applyGlobalSettingsAndMetadataAndShadowCasting(i,o,s),s}catch(t){const e=Pr.drawingTypes[i];throw console.error(`Error in sync draw operation for ${e}:`,t),t}}handleAsync(t,e,r,i){return _r(this,void 0,void 0,(function*(){try{const o=this.resolveDrawOptions(t,e),s=yield r(o);return s?this.applyGlobalSettingsAndMetadataAndShadowCasting(i,o,s):console.warn(`Drawing operation returned null/undefined for type: ${Pr.drawingTypes[i]}`),s}catch(t){const e=Pr.drawingTypes[i];console.error(`Error in async draw operation for ${e}:`,t);const r=t instanceof Error?t.message:String(t);throw new Error(`Failed to draw ${e}: ${r}`)}}))}applyGlobalSettingsAndMetadataAndShadowCasting(t,e,r){if(r){const i=r,o={type:t,options:e};i.bitbybitMeta=i.bitbybitMeta?Object.assign(Object.assign({},i.bitbybitMeta),o):o}}isEntity(t){return t instanceof G.Entity}resolveDrawOptions(t,e){var r;if(t.options)return t.options;const i=t.group;return(null===(r=null==i?void 0:i.bitbybitMeta)||void 0===r?void 0:r.options)?i.bitbybitMeta.options:e}attachMetadata(t,e,r){if(!t||!this.isEntity(t))throw new Error("Invalid entity type for metadata attachment: "+typeof t);const i=t;return i.bitbybitMeta={type:e,options:r},i}}class Sr extends kr{}var Mr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Wr extends xr{constructor(t,e,r,i,o,s){super(r),this.context=t,this.solidText=e,this.vector=r,this.jscadWorkerManager=i,this.manifoldWorkerManager=o,this.occWorkerManager=s,this.materialCache=new Map,this.entityIdCounter=0,this.instanceId=`pc-${Date.now()}`}isDisposed(){return 0===this.materialCache.size}drawManifoldsOrCrossSections(t){return Mr(this,void 0,void 0,(function*(){try{const e=this.getSafeWorkerOptions(t),r=(yield this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldsOrCrossSections",e)).map((e=>this.handleDecomposedManifold(e,t))).filter((t=>void 0!==t)),i=this.generateEntityId("manifoldMeshContainer"),o=new G.Entity(i);return r.forEach((t=>{o.addChild(t)})),this.context.scene.addChild(o),o}catch(t){throw console.error("Error drawing manifolds or cross sections:",t),new Error(`Failed to draw manifolds or cross sections: ${t instanceof Error?t.message:String(t)}`)}}))}drawManifoldOrCrossSection(t){return Mr(this,void 0,void 0,(function*(){try{const e=this.getSafeWorkerOptions(t),r=yield this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldOrCrossSection",e);return this.handleDecomposedManifold(r,t)}catch(t){throw console.error("Error drawing manifold or cross section:",t),new Error(`Failed to draw manifold or cross section: ${t instanceof Error?t.message:String(t)}`)}}))}drawShape(t){return Mr(this,void 0,void 0,(function*(){try{const e=this.getSafeWorkerOptions(t),r=yield this.occWorkerManager.genericCallToWorkerPromise("shapeToMesh",e);return this.handleDecomposedMesh(t,r,t)}catch(t){throw console.error("Error drawing OCCT shape:",t),new Error(`Failed to draw OCCT shape: ${t instanceof Error?t.message:String(t)}`)}}))}drawShapes(t){return Mr(this,void 0,void 0,(function*(){try{const e=this.getSafeWorkerOptions(t),r=yield this.occWorkerManager.genericCallToWorkerPromise("shapesToMeshes",e),i=yield Promise.all(r.map((e=>Mr(this,void 0,void 0,(function*(){return this.handleDecomposedMesh(t,e,t)}))))),o=this.generateEntityId("shapesMeshContainer"),s=new G.Entity(o);return this.context.scene.addChild(s),i.forEach((t=>{s.addChild(t)})),s}catch(t){throw console.error("Error drawing OCCT shapes:",t),new Error(`Failed to draw OCCT shapes: ${t instanceof Error?t.message:String(t)}`)}}))}drawSolidOrPolygonMesh(t){return Mr(this,void 0,void 0,(function*(){try{const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("shapeToMesh",t);let r,i;if(t.jscadMesh&&t.updatable?r=t.jscadMesh:(r=new G.Entity(this.generateEntityId("jscadMesh")),this.context.scene.addChild(r)),t.mesh.color&&t.mesh.color.length>0){const e=t.mesh.color;i=this.normalizeColor(e,pr)}else i=Array.isArray(t.colours)?t.colours[0]:t.colours;const o=this.makeMesh(Object.assign(Object.assign({},t),{colour:i,drawTwoSided:t.drawTwoSided,backFaceColour:t.backFaceColour,backFaceOpacity:t.backFaceOpacity}),r,e);return t.jscadMesh=o,o}catch(t){throw console.error("Error drawing JSCAD solid or polygon mesh:",t),new Error(`Failed to draw JSCAD mesh: ${t instanceof Error?t.message:String(t)}`)}}))}drawSolidOrPolygonMeshes(t){return Mr(this,void 0,void 0,(function*(){try{const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("shapesToMeshes",t);let r;t.jscadMesh&&t.updatable?(r=t.jscadMesh,this.clearEntity(r)):r=new G.Entity(this.generateEntityId("jscadMeshes"));const i=Array.isArray(t.colours)&&t.colours.length===e.length,o=Array.isArray(t.colours);return e.forEach(((e,s)=>{const n=new G.Entity(this.generateEntityId("jscadMesh",r.name));let a;a=e.color?this.normalizeColor(e.color,pr):i?t.colours[s]:o?t.colours[0]:t.colours;const c=this.makeMesh(Object.assign(Object.assign({},t),{colour:a,drawTwoSided:t.drawTwoSided,backFaceColour:t.backFaceColour,backFaceOpacity:t.backFaceOpacity}),n,e);r.addChild(c)})),this.context.scene.addChild(r),t.jscadMesh=r,r}catch(t){throw console.error("Error drawing JSCAD solid or polygon meshes:",t),new Error(`Failed to draw JSCAD meshes: ${t instanceof Error?t.message:String(t)}`)}}))}drawPolylinesWithColours(t){const e=t.colorMapStrategy||yr.colorMapStrategyEnum.lastColorRemainder,r=this.processPolylinePoints(t.polylines),i=t.updatable&&t.polylinesMesh?t.polylinesMesh.children[0]:void 0,o=this.drawPolylines(i,r,t.updatable,t.size,t.opacity,t.colours,e,t.arrowSize,t.arrowAngle);return this.wrapPolylineInGroup(o,t.polylinesMesh,t.updatable)}drawPoint(t){const e=[t.point];let r=[];return r=Array.isArray(t.colours)?t.colours:[t.colours],t.pointMesh&&t.updatable?this.updatePointsInstances(t.pointMesh,e):t.pointMesh=this.createPointSpheresMesh(this.generateEntityId("pointMesh"),e,r,t.opacity,t.size),t.pointMesh}drawPolylineClose(t){const e=t.polyline.points;return t.polyline.isClosed&&e.push(e[0]),this.drawPolyline(t.polylineMesh,e,t.updatable,t.size,t.opacity,t.colours,t.arrowSize,t.arrowAngle)}drawPolyline(t,e,r,i,o,s,n=0,a=30){const c=this.drawPolylines(t,[e],r,i,o,s,yr.colorMapStrategyEnum.lastColorRemainder,n,a);return t||((t=new G.Entity(this.generateEntityId("polyline"))).addChild(c),this.context.scene.addChild(t)),t}drawCurve(t){const e=t.curve.tessellate();return this.drawPolyline(t.curveMesh,e,t.updatable,t.size,t.opacity,t.colours)}drawPoints(t){const e=t.points,r=t.colorMapStrategy||yr.colorMapStrategyEnum.lastColorRemainder,i=this.resolveAllColors(t.colours,e.length,r);return t.pointsMesh&&t.updatable?t.pointsMesh.children.length===e.length?this.updatePointsInstances(t.pointsMesh,e):(t.pointsMesh.destroy(),t.pointsMesh=this.createPointSpheresMesh(this.generateEntityId("pointsMesh"),e,i,t.opacity,t.size)):t.pointsMesh=this.createPointSpheresMesh(this.generateEntityId("pointsMesh"),e,i,t.opacity,t.size),t.pointsMesh}updatePointsInstances(t,e){const r=t.children,i=new Map;e.forEach(((t,e)=>{i.set(e,t)})),r.forEach((t=>{var r,o;if(null===(r=t.tags)||void 0===r?void 0:r.has("instancedPoints")){const e=t,r=e.instanceBuffer,o=e.pointIndices;if(r&&o){const t=r.lock();if(t){const e=new Float32Array(t),s=new G.Mat4;o.forEach(((t,r)=>{const o=i.get(t);o&&(s.setTranslate(o[0],o[1],o[2]),e.set(s.data,16*r))})),r.unlock()}}}else if(null===(o=t.tags)||void 0===o?void 0:o.has("singlePoint")){const r=parseInt(t.name.split("-").pop()||"0");e[r]&&t.setLocalPosition(e[r][0],e[r][1],e[r][2])}}))}drawCurves(t){const e=t.curves.map((t=>({points:t.tessellate()})));return this.drawPolylinesWithColours(Object.assign({polylines:e,polylinesMesh:t.curvesMesh},t))}drawSurfacesMultiColour(t){t.surfacesMesh&&t.updatable?this.clearEntity(t.surfacesMesh):(t.surfacesMesh=new G.Entity(this.generateEntityId("colouredSurfaces")),this.context.scene.addChild(t.surfacesMesh));const e=t.colorMapStrategy||yr.colorMapStrategyEnum.lastColorRemainder,r=this.resolveAllColors(t.colours,t.surfaces.length,e);return t.surfaces.forEach(((e,i)=>{const o=this.drawSurface({surface:e,colours:r[i],updatable:t.updatable,opacity:t.opacity,hidden:t.hidden,drawTwoSided:t.drawTwoSided,backFaceColour:t.backFaceColour,backFaceOpacity:t.backFaceOpacity});t.surfacesMesh.addChild(o)})),t.surfacesMesh}createOrUpdateSurfacesMesh(t,e,r,i,o,s){const n=()=>{const e=[];let r=[];const i=[],o=[];let s=0;t.forEach((t=>{e.push(...t.positions),t.normals&&t.normals.length>0&&r.push(...t.normals),t.uvs&&o.push(...t.uvs);const n=t.indices.map((t=>t+s));i.push(...n),s+=t.positions.length/3})),0===r.length&&e.length>0&&(r=this.computeNormals(e,i));const n=new G.Mesh(this.context.app.graphicsDevice);return n.setPositions(e),n.setNormals(r),n.setIndices(i),o.length>0&&n.setUvs(0,o),n.update(G.PRIMITIVE_TRIANGLES),n};if(e&&r){this.clearEntity(e);const t=n(),r=new G.MeshInstance(t,i),o=new G.Entity(this.generateEntityId("surfaceChild"));o.addComponent("render",{meshInstances:[r]}),e.addChild(o)}else{e=new G.Entity(this.generateEntityId("surface")),o&&this.context.scene.addChild(e);const t=n(),r=new G.MeshInstance(t,i),s=new G.Entity(this.generateEntityId("surfaceChild"));s.addComponent("render",{meshInstances:[r]}),e.addChild(s)}return s&&(e.enabled=!1),e}createBackFaceMesh(t,e,r,i){const o=this.getOrCreateMaterial(e+"-back",r,i+.1,(()=>{const t=new G.StandardMaterial;return t.name=this.generateEntityId("backFaceMaterial"),t.diffuse=this.hexToColor(e),t.metalness=.4,t.gloss=.2,t.opacity=r,r<1&&(t.blendType=G.BLEND_NORMAL),t.depthBias=i+.1,t.slopeDepthBias=i+.1,t.update(),t})),s=this.prepareBackFaceMeshData(t),n=new G.Mesh(this.context.app.graphicsDevice);n.setPositions(s.positions),n.setNormals(s.normals),n.setIndices(s.indices),s.uvs&&s.uvs.length>0&&n.setUvs(0,s.uvs),n.update(G.PRIMITIVE_TRIANGLES);const a=new G.Entity(this.generateEntityId("backFaceSurface")),c=new G.MeshInstance(n,o),h=new G.Entity(this.generateEntityId("backFaceSurfaceChild"));return h.addComponent("render",{meshInstances:[c]}),a.addChild(h),a}drawSurface(t){var e;const r=t.surface.tessellate(),i={positions:[],indices:[],normals:[]};let o=0;r.faces.forEach((t=>{o=this.parseFaces(t,r,i,o)}));const s=Array.isArray(t.colours)?t.colours[0]:t.colours,n=this.getOrCreateMaterial(s,t.opacity,0,(()=>{const e=new G.StandardMaterial;return e.name=this.generateEntityId("pbrSurface"),e.diffuse=this.hexToColor(s),e.metalness=.5,e.gloss=.3,e.opacity=t.opacity,t.opacity<1&&(e.blendType=G.BLEND_NORMAL),e.update(),e})),a=this.createOrUpdateSurfacesMesh([i],t.surfaceMesh,t.updatable,n,!0,t.hidden);if(!1!==t.drawTwoSided){const r=this.createBackFaceMesh([i],t.backFaceColour||gr,null!==(e=t.backFaceOpacity)&&void 0!==e?e:t.opacity,0);a.addChild(r)}return a}parseFaces(t,e,r,i){return t.forEach((t=>{const o=e.normals[t];r.normals.push(o[0],o[1],o[2]);const s=e.points[t];r.positions.push(s[0],s[1],s[2]),r.indices.push(i),i++})),i}makeMesh(t,e,r){var i;const o=this.getOrCreateMaterial(t.colour,t.opacity,0,(()=>{const e=new G.StandardMaterial;return e.name=this.generateEntityId("jscadMaterial"),e.diffuse=this.hexToColor(t.colour),e.metalness=.4,e.gloss=.4,e.opacity=t.opacity,t.opacity<1&&(e.blendType=G.BLEND_NORMAL),e.update(),e}));if(this.createMesh(r.positions,r.indices,r.normals,e,r.transforms,t.updatable,o),!1!==t.drawTwoSided){const o=this.createBackFaceMesh([{positions:r.positions,indices:r.indices,normals:r.normals}],t.backFaceColour||gr,null!==(i=t.backFaceOpacity)&&void 0!==i?i:t.opacity,0);e.addChild(o)}return t.hidden&&(e.enabled=!1),e}createMesh(t,e,r,i,o,s,n){const a=new G.Mesh(this.context.app.graphicsDevice);if(a.setPositions(t),a.setIndices(e),r&&0!==r.length)a.setNormals(r);else{const r=this.computeNormals(t,e);a.setNormals(r)}a.update(G.PRIMITIVE_TRIANGLES);const c=new G.MeshInstance(a,n);this.clearEntity(i);const h=new G.Entity(this.generateEntityId("jscadMeshChild"));if(h.addComponent("render",{meshInstances:[c]}),i.addChild(h),o&&16===o.length){const t=new G.Mat4;t.data=new Float32Array(o);const e=new G.Vec3,r=new G.Quat,s=new G.Vec3;t.getTranslation(e),t.getScale(s),r.setFromMat4(t),i.setLocalPosition(e),i.setLocalRotation(r),i.setLocalScale(s)}}handleDecomposedMesh(t,e,r){var i;return Mr(this,void 0,void 0,(function*(){const o=new G.Entity(this.generateEntityId("brepMesh"));if(this.context.scene.addChild(o),t.drawFaces&&e&&e.faceList&&e.faceList.length){let s;if(r.faceMaterial)s=r.faceMaterial;else{const e=Array.isArray(t.faceColour)?t.faceColour[0]:t.faceColour,r=t.faceOpacity,i=t.drawEdges?2:0,o=t.drawEdges?2:0;s=this.getOrCreateMaterial(e,r,i,(()=>{const t=new G.StandardMaterial;return t.diffuse=this.hexToColor(e),t.metalness=.4,t.gloss=.2,t.opacity=r,t.depthBias=i,t.slopeDepthBias=o,t.update(),t}))}const n=e.faceList.map((t=>({positions:t.vertex_coord,normals:t.normal_coord,indices:t.tri_indexes,uvs:t.uvs}))),a=this.createOrUpdateSurfacesMesh(n,void 0,!1,s,!1,!1);if(o.addChild(a),!1!==r.drawTwoSided){const e=this.createBackFaceMesh(n,r.backFaceColour||gr,null!==(i=r.backFaceOpacity)&&void 0!==i?i:r.faceOpacity,t.drawEdges?2:0);o.addChild(e)}}if(t.drawEdges&&e&&e.edgeList&&e.edgeList.length){const i=[];e.edgeList.forEach((t=>{const e=t.vertex_coord.filter((t=>void 0!==t));i.push(e)}));const s=this.drawPolylines(void 0,i,!1,t.edgeWidth,t.edgeOpacity,t.edgeColour,yr.colorMapStrategyEnum.lastColorRemainder,r.edgeArrowSize,r.edgeArrowAngle);o.addChild(s)}if(t.drawVertices&&e&&e.pointsList&&e.pointsList.length){const r=this.drawPoints({points:e.pointsList,opacity:1,size:t.vertexSize,colours:t.vertexColour,updatable:!1});o.addChild(r)}if(t.drawEdgeIndexes){const r=e.edgeList.map((e=>Mr(this,void 0,void 0,(function*(){let r=e.middle_point;void 0===r&&(r=this.computeEdgeMiddlePos(e));const i=new qe.TextDto;return i.text=`${e.edge_index+1}`,i.height=t.edgeIndexHeight,i.lineSpacing=1.5,(yield this.solidText.createVectorText(i)).map((t=>t.map((t=>[t[0],t[1]+.05,0])).map((t=>this.vector.add({first:t,second:r})))))})))),i=yield Promise.all(r),s=this.drawPolylines(void 0,i.flat(),!1,.2,1,t.edgeIndexColour);o.addChild(s)}if(t.drawFaceIndexes){const r=e.faceList.map((e=>Mr(this,void 0,void 0,(function*(){let r=e.center_point;void 0===r&&(r=this.computeFaceMiddlePos(e.vertex_coord_vec));const i=new qe.TextDto;return i.text=`${e.face_index}`,i.height=t.faceIndexHeight,i.lineSpacing=1.5,(yield this.solidText.createVectorText(i)).map((t=>t.map((t=>[t[0],t[1]+.05,0])).map((t=>this.vector.add({first:t,second:r})))))})))),i=yield Promise.all(r),s=this.drawPolylines(void 0,i.flat(),!1,.2,1,t.faceIndexColour);o.addChild(s)}return o}))}canUpdatePolylineEntity(t,e,r){var i;if(!t||!r)return!1;const o=t,s=super.computePolylineSignature(e);return(null===(i=o.bitbybitMeta)||void 0===i?void 0:i.linesForRenderLengths)===s}updatePolylineEntityPositions(t,e){var r,i;const o=t.render;if(!(null===(i=null===(r=null==o?void 0:o.meshInstances)||void 0===r?void 0:r[0])||void 0===i?void 0:i.mesh))return console.warn("Cannot update polyline: missing render component or mesh"),!1;try{const t=o.meshInstances[0].mesh;return t.setPositions(e),t.update(G.PRIMITIVE_LINES),!0}catch(t){return console.error("Error updating polyline positions:",t),!1}}computeLinePositionsWithSegmentCounts(t){const e=[],r=[];for(const i of t){let t=0;for(let r=0;r<i.length-1;r++){const o=i[r],s=i[r+1];e.push(o[0],o[1],o[2]),e.push(s[0],s[1],s[2]),t++}r.push(t)}return{positions:e,segmentCounts:r}}computePolylineColors(t,e,r){const i=[],o=e.length;return e.forEach(((e,s)=>{const n=this.resolveColorForEntity(t,s,o,r),a=this.hexToColor(n);for(let t=0;t<2*e;t++)i.push(Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b),255)})),i}createPolylineEntityWithMetadata(t,e,r,i,o=[],s=yr.colorMapStrategyEnum.lastColorRemainder){const n=this.createLineEntity(t,e,o,s);return n.bitbybitMeta={linesForRenderLengths:this.computePolylineSignature(i)},n}createPolylineEntityWithExplicitColors(t,e,r,i,o){const s=this.createLineEntityWithExplicitColors(t,i,o);return s.bitbybitMeta={linesForRenderLengths:this.computePolylineSignature(r)},s}computePolylineColorsWithExplicit(t,e){const r=[];return t.forEach(((t,i)=>{const o=e[i]||e[0]||"#ff0000",s=this.hexToColor(o);for(let e=0;e<2*t;e++)r.push(Math.round(255*s.r),Math.round(255*s.g),Math.round(255*s.b),255)})),r}createLineEntityWithExplicitColors(t,e,r){const i=new G.Mesh(this.context.app.graphicsDevice);i.setPositions(t);const o=this.computePolylineColorsWithExplicit(e,r);i.setColors32(o),i.update(G.PRIMITIVE_LINES);const s=new G.StandardMaterial;s.diffuseVertexColor=!0,s.emissiveVertexColor=!0,s.diffuse=new G.Color(1,1,1),s.emissive=new G.Color(1,1,1),s.useLighting=!1,s.update();const n=new G.MeshInstance(i,s),a=new G.Entity(this.generateEntityId("lines"));return a.addComponent("render",{meshInstances:[n]}),a}drawPolylines(t,e,r,i,o,s,n=yr.colorMapStrategyEnum.lastColorRemainder,a=0,c=30){if(!e||0===e.length)return;const h=[],l=[];a>0&&e.forEach(((t,r)=>{if(t.length>=2){const i=this.computeArrowHeadLines(t,a,c),o=this.resolveColorForEntity(s,r,e.length,n);i.forEach((t=>{h.push(t),l.push(o)}))}}));const u=[...e,...h],{positions:d,segmentCounts:v}=this.computeLinePositionsWithSegmentCounts(u),f=[...this.resolveAllColors(s,e.length,n),...l];if(this.canUpdatePolylineEntity(t,e,r)){if(this.updatePolylineEntityPositions(t,d))return t;console.warn("Polyline update failed, creating new entity")}return this.createPolylineEntityWithExplicitColors(d,i,u,v,f)}createLineEntity(t,e,r=[],i=yr.colorMapStrategyEnum.lastColorRemainder){const o=new G.Mesh(this.context.app.graphicsDevice);o.setPositions(t);const s=r.length>0;if(s){const t=this.computePolylineColors(e,r,i);o.setColors32(t)}o.update(G.PRIMITIVE_LINES);const n=new G.StandardMaterial;if(s)n.diffuseVertexColor=!0,n.emissiveVertexColor=!0,n.diffuse=new G.Color(1,1,1),n.emissive=new G.Color(1,1,1);else{const t=Array.isArray(e)?this.hexToColor(e[0]):this.hexToColor(e);n.emissive=t,n.diffuse=t}n.useLighting=!1,n.update();const a=new G.MeshInstance(o,n),c=new G.Entity(this.generateEntityId("lines"));return c.addComponent("render",{meshInstances:[a]}),c}handleDecomposedManifold(t,e){var r;if(t.vertProperties){const i=t;if(0!==i.triVerts.length){const t=i.numProp||3,o=i.vertProperties,s=i.triVerts;let n;if(3===t)n=Array.from(o);else{const e=o.length/t;n=[];for(let r=0;r<e;r++){const e=r*t;n.push(o[e],o[e+1],o[e+2])}}const a=[],c=[],h=[];for(let t=0;t<s.length;t+=3){const e=s[t],r=s[t+1],i=s[t+2],o=n[3*e],l=n[3*e+1],u=n[3*e+2],d=n[3*r],v=n[3*r+1],f=n[3*r+2],p=n[3*i],g=n[3*i+1],m=n[3*i+2],b=d-o,y=v-l,P=f-u,w=p-o,k=g-l,C=m-u;let x=y*C-P*k,_=P*w-b*C,T=b*k-y*w;const S=Math.sqrt(x*x+_*_+T*T);S>0&&(x/=S,_/=S,T/=S);const M=a.length/3;a.push(o,l,u),a.push(d,v,f),a.push(p,g,m),c.push(x,_,T),c.push(x,_,T),c.push(x,_,T),h.push(M,M+1,M+2)}const l=new G.Mesh(this.context.app.graphicsDevice);l.setPositions(a),l.setIndices(h),l.setNormals(c),l.update(G.PRIMITIVE_TRIANGLES);const u=new G.Entity(this.generateEntityId("manifoldMesh"));let d;d=void 0===e.faceMaterial?this.getOrCreateMaterial(e.faceColour,e.faceOpacity,0,(()=>{const t=new G.StandardMaterial;return t.name=this.generateEntityId("pbrManifold"),t.diffuse=this.hexToColor(e.faceColour),t.metalness=.5,t.gloss=.3,t.opacity=e.faceOpacity,t.update(),t})):e.faceMaterial;const v=new G.MeshInstance(l,d),f=new G.Entity(this.generateEntityId("manifoldMeshChild"));if(f.addComponent("render",{meshInstances:[v]}),u.addChild(f),!1!==e.drawTwoSided){const t=this.createBackFaceMesh([{positions:a,indices:h,normals:c}],e.backFaceColour||gr,null!==(r=e.backFaceOpacity)&&void 0!==r?r:e.faceOpacity,0);u.addChild(t)}return this.context.scene.addChild(u),u}}else{const r=t;if(r.length>0){const t=new G.Entity(this.generateEntityId("manifoldCrossSection")),i=r.map((t=>({points:t.map((t=>[t[0],t[1],0])),isClosed:!0}))),o=this.drawPolylinesWithColours({polylinesMesh:void 0,polylines:i,updatable:!1,size:e.crossSectionWidth,opacity:e.crossSectionOpacity,colours:e.crossSectionColour});return t.addChild(o),this.context.scene.addChild(t),t}}}clearEntity(t){for(;t.children.length>0;)t.children[0].destroy()}hexToColor(t){const e=this.hexToRgb(t);return e?new G.Color(e.r,e.g,e.b):new G.Color(1,0,0)}getSafeWorkerOptions(t){const{faceMaterial:e}=t;return function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]])}return r}(t,["faceMaterial"])}generateEntityId(t,e){const r=`${this.instanceId}-${t}-${++this.entityIdCounter}`;return e?`${e}/${r}`:r}getOrCreateMaterial(t,e,r,i,o=!1){const s=super.getMaterialKey(t,e,r,o),n=this.materialCache.get(s);if(n)return n;if(this.materialCache.size>=1e3){const t=this.materialCache.keys().next().value,e=this.materialCache.get(t);e&&e.destroy&&e.destroy(),this.materialCache.delete(t),console.warn(`Material cache full, evicted: ${t}`)}const a=i();return this.materialCache.set(s,a),a}dispose(){this.materialCache.forEach(((t,e)=>{try{t.destroy&&t.destroy()}catch(t){console.warn(`Error disposing material ${e}:`,t)}})),this.materialCache.clear(),this.entityIdCounter=0,console.log("DrawHelper disposed successfully")}normalizePolylineColors(t,e,r=yr.colorMapStrategyEnum.lastColorRemainder){const i=Array.isArray(e)?e[0]:e;return t.map(((o,s)=>{if(o.color){const t="string"==typeof o.color?o.color:o.color.join(",");return super.normalizeColor(t,i)}return this.resolveColorForEntity(e,s,t.length,r)}))}wrapPolylineInGroup(t,e,r){var i;if(e&&r&&(null===(i=e.children[0])||void 0===i?void 0:i.name)===t.name)return e;const o=this.generateEntityId("polylinesGroup"),s=new G.Entity(o);return s.addChild(t),this.context.scene.addChild(s),s}createPointSpheresMesh(t,e,r,i,o){const s=e.map(((t,e)=>({position:t,color:r[e],index:e}))),n=Array.from(new Set(r)).map((t=>{const e=this.getOrCreateMaterial(t,i,0,(()=>{const e=new G.StandardMaterial;return e.name=this.generateEntityId("mat"),e.opacity=i,i<1&&(e.blendType=G.BLEND_NORMAL),e.emissive=this.hexToColor(t),e.diffuse=this.hexToColor(t),e.useLighting=!1,e.update(),e}),!0),r=s.filter((e=>e.color===t));return{hex:t,material:e,positions:r}})),a=new G.Entity(t);return this.context.scene.addChild(a),n.forEach((e=>{var r;const i=e.positions.length;if(0===i)return;const s=i>1e3?4:8,n=this.createInstancedSphereMesh(this.generateEntityId(`points-${e.hex}`,t),e.positions.map((t=>({position:t.position,index:t.index}))),o,s,e.material);null===(r=n.tags)||void 0===r||r.add("instancedPoints"),a.addChild(n)})),a}createInstancedSphereMesh(t,e,r,i,o){var s,n;const a=null===(s=this.context.app)||void 0===s?void 0:s.graphicsDevice;if(!a)return this.createFallbackPointsMesh(t,e.map((t=>t.position)),r,o);const c=e.length,h=G.Mesh.fromGeometry(a,new G.SphereGeometry({radius:r,latitudeBands:i,longitudeBands:i})),l=G.VertexFormat.getDefaultInstancingFormat(a),u=new G.VertexBuffer(a,l,c,{usage:G.BUFFER_STATIC}),d=new Float32Array(16*c),v=new G.Mat4;e.forEach(((t,e)=>{v.setTranslate(t.position[0],t.position[1],t.position[2]),d.set(v.data,16*e)}));const f=u.lock();f&&(new Float32Array(f).set(d),u.unlock());const p=new G.MeshInstance(h,o);p.setInstancing(u),p.instancingCount=c,p.castShadow=!1,p.receiveShadow=!1;const g=new G.Entity(t);return g.addComponent("render",{meshInstances:[p],castShadows:!1,receiveShadows:!1}),null===(n=g.tags)||void 0===n||n.add("instancedPoints"),g.instanceBuffer=u,g.pointIndices=e.map((t=>t.index)),g}createFallbackPointsMesh(t,e,r,i){const o=new G.Entity(t);return e.forEach(((e,s)=>{var n;const a=new G.Entity(this.generateEntityId(`point-${s}`,t));a.addComponent("render",{type:"sphere",material:i,castShadows:!1,receiveShadows:!1}),a.setLocalScale(2*r,2*r,2*r),a.setLocalPosition(e[0],e[1],e[2]),null===(n=a.tags)||void 0===n||n.add("singlePoint"),o.addChild(a)})),o}}class Er{static get version(){return"1.3.9"}static toString(){return"JavaScript Expression Parser (JSEP) v"+Er.version}static addUnaryOp(t){return Er.max_unop_len=Math.max(t.length,Er.max_unop_len),Er.unary_ops[t]=1,Er}static addBinaryOp(t,e,r){return Er.max_binop_len=Math.max(t.length,Er.max_binop_len),Er.binary_ops[t]=e,r?Er.right_associative.add(t):Er.right_associative.delete(t),Er}static addIdentifierChar(t){return Er.additional_identifier_chars.add(t),Er}static addLiteral(t,e){return Er.literals[t]=e,Er}static removeUnaryOp(t){return delete Er.unary_ops[t],t.length===Er.max_unop_len&&(Er.max_unop_len=Er.getMaxKeyLen(Er.unary_ops)),Er}static removeAllUnaryOps(){return Er.unary_ops={},Er.max_unop_len=0,Er}static removeIdentifierChar(t){return Er.additional_identifier_chars.delete(t),Er}static removeBinaryOp(t){return delete Er.binary_ops[t],t.length===Er.max_binop_len&&(Er.max_binop_len=Er.getMaxKeyLen(Er.binary_ops)),Er.right_associative.delete(t),Er}static removeAllBinaryOps(){return Er.binary_ops={},Er.max_binop_len=0,Er}static removeLiteral(t){return delete Er.literals[t],Er}static removeAllLiterals(){return Er.literals={},Er}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new Er(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map((t=>t.length)))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return Er.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!Er.binary_ops[String.fromCharCode(t)]||Er.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return Er.isIdentifierStart(t)||Er.isDecimalDigit(t)}throwError(t){const e=new Error(t+" at character "+this.index);throw e.index=this.index,e.description=t,e}runHook(t,e){if(Er.hooks[t]){const r={context:this,node:e};return Er.hooks.run(t,r),r.node}return e}searchHook(t){if(Er.hooks[t]){const e={context:this};return Er.hooks[t].find((function(t){return t.call(e.context,e),e.node})),e.node}}gobbleSpaces(){let t=this.code;for(;t===Er.SPACE_CODE||t===Er.TAB_CODE||t===Er.LF_CODE||t===Er.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const t=this.gobbleExpressions(),e=1===t.length?t[0]:{type:Er.COMPOUND,body:t};return this.runHook("after-all",e)}gobbleExpressions(t){let e,r,i=[];for(;this.index<this.expr.length;)if(e=this.code,e===Er.SEMCOL_CODE||e===Er.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())i.push(r);else if(this.index<this.expr.length){if(e===t)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){const t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,Er.max_binop_len),e=t.length;for(;e>0;){if(Er.binary_ops.hasOwnProperty(t)&&(!Er.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!Er.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=e,t;t=t.substr(0,--e)}return!1}gobbleBinaryExpression(){let t,e,r,i,o,s,n,a,c;if(s=this.gobbleToken(),!s)return s;if(e=this.gobbleBinaryOp(),!e)return s;for(o={value:e,prec:Er.binaryPrecedence(e),right_a:Er.right_associative.has(e)},n=this.gobbleToken(),n||this.throwError("Expected expression after "+e),i=[s,o,n];e=this.gobbleBinaryOp();){if(r=Er.binaryPrecedence(e),0===r){this.index-=e.length;break}o={value:e,prec:r,right_a:Er.right_associative.has(e)},c=e;const a=t=>o.right_a&&t.right_a?r>t.prec:r<=t.prec;for(;i.length>2&&a(i[i.length-2]);)n=i.pop(),e=i.pop().value,s=i.pop(),t={type:Er.BINARY_EXP,operator:e,left:s,right:n},i.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+c),i.push(o,t)}for(a=i.length-1,t=i[a];a>1;)t={type:Er.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:t},a-=2;return t}gobbleToken(){let t,e,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(t=this.code,Er.isDecimalDigit(t)||t===Er.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===Er.SQUOTE_CODE||t===Er.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(t===Er.OBRACK_CODE)i=this.gobbleArray();else{for(e=this.expr.substr(this.index,Er.max_unop_len),r=e.length;r>0;){if(Er.unary_ops.hasOwnProperty(e)&&(!Er.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!Er.isIdentifierPart(this.expr.charCodeAt(this.index+e.length)))){this.index+=r;const t=this.gobbleToken();return t||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:Er.UNARY_EXP,operator:e,argument:t,prefix:!0})}e=e.substr(0,--r)}Er.isIdentifierStart(t)?(i=this.gobbleIdentifier(),Er.literals.hasOwnProperty(i.name)?i={type:Er.LITERAL,value:Er.literals[i.name],raw:i.name}:i.name===Er.this_str&&(i={type:Er.THIS_EXP})):t===Er.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let e=this.code;for(;e===Er.PERIOD_CODE||e===Er.OBRACK_CODE||e===Er.OPAREN_CODE||e===Er.QUMARK_CODE;){let r;if(e===Er.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==Er.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),e=this.code}this.index++,e===Er.OBRACK_CODE?((t={type:Er.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),e=this.code,e!==Er.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):e===Er.OPAREN_CODE?t={type:Er.CALL_EXP,arguments:this.gobbleArguments(Er.CPAREN_CODE),callee:t}:(e===Er.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:Er.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),e=this.code}return t}gobbleNumericLiteral(){let t,e,r="";for(;Er.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(this.code===Er.PERIOD_CODE)for(r+=this.expr.charAt(this.index++);Er.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(t=this.char,"e"===t||"E"===t){for(r+=this.expr.charAt(this.index++),t=this.char,"+"!==t&&"-"!==t||(r+=this.expr.charAt(this.index++));Er.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);Er.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+r+this.char+")")}return e=this.code,Er.isIdentifierStart(e)?this.throwError("Variable names cannot start with a number ("+r+this.char+")"):(e===Er.PERIOD_CODE||1===r.length&&r.charCodeAt(0)===Er.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:Er.LITERAL,value:parseFloat(r),raw:r}}gobbleStringLiteral(){let t="";const e=this.index,r=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let e=this.expr.charAt(this.index++);if(e===r){i=!0;break}if("\\"===e)switch(e=this.expr.charAt(this.index++),e){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return i||this.throwError('Unclosed quote after "'+t+'"'),{type:Er.LITERAL,value:t,raw:this.expr.substring(e,this.index)}}gobbleIdentifier(){let t=this.code,e=this.index;for(Er.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,Er.isIdentifierPart(t));)this.index++;return{type:Er.IDENTIFIER,name:this.expr.slice(e,this.index)}}gobbleArguments(t){const e=[];let r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===t){r=!0,this.index++,t===Er.CPAREN_CODE&&i&&i>=e.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}if(o===Er.COMMA_CODE){if(this.index++,i++,i!==e.length)if(t===Er.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===Er.CBRACK_CODE)for(let t=e.length;t<i;t++)e.push(null)}else if(e.length!==i&&0!==i)this.throwError("Expected comma");else{const t=this.gobbleExpression();t&&t.type!==Er.COMPOUND||this.throwError("Expected comma"),e.push(t)}}return r||this.throwError("Expected "+String.fromCharCode(t)),e}gobbleGroup(){this.index++;let t=this.gobbleExpressions(Er.CPAREN_CODE);if(this.code===Er.CPAREN_CODE)return this.index++,1===t.length?t[0]:!!t.length&&{type:Er.SEQUENCE_EXP,expressions:t};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:Er.ARRAY_EXP,elements:this.gobbleArguments(Er.CBRACK_CODE)}}}const Dr=new class{add(t,e,r){if("string"!=typeof arguments[0])for(let t in arguments[0])this.add(t,arguments[0][t],arguments[1]);else(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][r?"unshift":"push"](e)}),this)}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}};Object.assign(Er,{hooks:Dr,plugins:new class{constructor(t){this.jsep=t,this.registered={}}register(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((t=>{if("object"!=typeof t||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)}))}}(Er),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),Er.max_unop_len=Er.getMaxKeyLen(Er.unary_ops),Er.max_binop_len=Er.getMaxKeyLen(Er.binary_ops);const Or=t=>new Er(t).parse(),Ar=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(Er).filter((t=>!Ar.includes(t)&&void 0===Or[t])).forEach((t=>{Or[t]=Er[t]})),Or.Jsep=Er;var Ir={name:"ternary",init(t){t.hooks.add("after-expression",(function(e){if(e.node&&this.code===t.QUMARK_CODE){this.index++;const r=e.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),e.node={type:"ConditionalExpression",test:r,consequent:i,alternate:o},r.operator&&t.binary_ops[r.operator]<=.9){let i=r;for(;i.right.operator&&t.binary_ops[i.right.operator]<=.9;)i=i.right;e.node.test=i.right,i.right=e.node,e.node=r}}else this.throwError("Expected :")}}))}};Or.plugins.register(Ir);var Fr={name:"regex",init(t){t.hooks.add("gobble-token",(function(e){if(47===this.code){const r=++this.index;let i=!1;for(;this.index<this.expr.length;){if(47===this.code&&!i){const i=this.expr.slice(r,this.index);let o,s="";for(;++this.index<this.expr.length;){const t=this.code;if(!(t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57))break;s+=this.char}try{o=new RegExp(i,s)}catch(t){this.throwError(t.message)}return e.node={type:t.LITERAL,value:o,raw:this.expr.slice(r-1,this.index)},e.node=this.gobbleTokenProperty(e.node),e.node}this.code===t.OBRACK_CODE?i=!0:i&&this.code===t.CBRACK_CODE&&(i=!1),this.index+=92===this.code?2:1}this.throwError("Unclosed Regex")}}))}};const Lr={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|="]),updateOperators:[43,45],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];function r(t){Lr.assignmentOperators.has(t.operator)?(t.type="AssignmentExpression",r(t.left),r(t.right)):t.operator||Object.values(t).forEach((t=>{t&&"object"==typeof t&&r(t)}))}Lr.assignmentOperators.forEach((e=>t.addBinaryOp(e,Lr.assignmentPrecedence,!0))),t.hooks.add("gobble-token",(function(t){const r=this.code;Lr.updateOperators.some((t=>t===r&&t===this.expr.charCodeAt(this.index+1)))&&(this.index+=2,t.node={type:"UpdateExpression",operator:43===r?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},t.node.argument&&e.includes(t.node.argument.type)||this.throwError(`Unexpected ${t.node.operator}`))})),t.hooks.add("after-token",(function(t){if(t.node){const r=this.code;Lr.updateOperators.some((t=>t===r&&t===this.expr.charCodeAt(this.index+1)))&&(e.includes(t.node.type)||this.throwError(`Unexpected ${t.node.operator}`),this.index+=2,t.node={type:"UpdateExpression",operator:43===r?"++":"--",argument:t.node,prefix:!1})}})),t.hooks.add("after-expression",(function(t){t.node&&r(t.node)}))}};Or.plugins.register(Fr,Lr),Or.addUnaryOp("typeof"),Or.addLiteral("null",null),Or.addLiteral("undefined",void 0);const Br={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return Br.evalBinaryExpression(t,e);case"Compound":return Br.evalCompound(t,e);case"ConditionalExpression":return Br.evalConditionalExpression(t,e);case"Identifier":return Br.evalIdentifier(t,e);case"Literal":return Br.evalLiteral(t,e);case"MemberExpression":return Br.evalMemberExpression(t,e);case"UnaryExpression":return Br.evalUnaryExpression(t,e);case"ArrayExpression":return Br.evalArrayExpression(t,e);case"CallExpression":return Br.evalCallExpression(t,e);case"AssignmentExpression":return Br.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression:(t,e)=>({"||":(t,e)=>t||e(),"&&":(t,e)=>t&&e(),"|":(t,e)=>t|e(),"^":(t,e)=>t^e(),"&":(t,e)=>t&e(),"==":(t,e)=>t==e(),"!=":(t,e)=>t!=e(),"===":(t,e)=>t===e(),"!==":(t,e)=>t!==e(),"<":(t,e)=>t<e(),">":(t,e)=>t>e(),"<=":(t,e)=>t<=e(),">=":(t,e)=>t>=e(),"<<":(t,e)=>t<<e(),">>":(t,e)=>t>>e(),">>>":(t,e)=>t>>>e(),"+":(t,e)=>t+e(),"-":(t,e)=>t-e(),"*":(t,e)=>t*e(),"/":(t,e)=>t/e(),"%":(t,e)=>t%e()}[t.operator](Br.evalAst(t.left,e),(()=>Br.evalAst(t.right,e)))),evalCompound(t,e){let r;for(let i=0;i<t.body.length;i++){"Identifier"===t.body[i].type&&["var","let","const"].includes(t.body[i].name)&&t.body[i+1]&&"AssignmentExpression"===t.body[i+1].type&&(i+=1);const o=t.body[i];r=Br.evalAst(o,e)}return r},evalConditionalExpression:(t,e)=>Br.evalAst(t.test,e)?Br.evalAst(t.consequent,e):Br.evalAst(t.alternate,e),evalIdentifier(t,e){if(t.name in e)return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral:t=>t.value,evalMemberExpression(t,e){if("Identifier"===t.property.type&&"constructor"===t.property.name||"Identifier"===t.object.type&&"constructor"===t.object.name)throw new Error("'constructor' property is disabled");const r=t.computed?Br.evalAst(t.property):t.property.name,i=Br.evalAst(t.object,e),o=i[r];if("function"==typeof o){if(i===Function&&"bind"===r)throw new Error("Function.prototype.bind is disabled");if(i===Function&&("call"===r||"apply"===r))throw new Error("Function.prototype.call and Function.prototype.apply are disabled");return o===Function?o:o.bind(i)}return o},evalUnaryExpression:(t,e)=>({"-":t=>-Br.evalAst(t,e),"!":t=>!Br.evalAst(t,e),"~":t=>~Br.evalAst(t,e),"+":t=>+Br.evalAst(t,e),typeof:t=>typeof Br.evalAst(t,e)}[t.operator](t.argument)),evalArrayExpression:(t,e)=>t.elements.map((t=>Br.evalAst(t,e))),evalCallExpression(t,e){const r=t.arguments.map((t=>Br.evalAst(t,e))),i=Br.evalAst(t.callee,e);if(i===Function)throw new Error("Function constructor is disabled");return i(...r)},evalAssignmentExpression(t,e){if("Identifier"!==t.left.type)throw SyntaxError("Invalid left-hand side in assignment");const r=t.left.name;if("__proto__"===r)throw new Error("Assignment to __proto__ is disabled");const i=Br.evalAst(t.right,e);return e[r]=i,e[r]}};function Rr(t,e){return(t=t.slice()).push(e),t}function Nr(t,e){return(e=e.slice()).unshift(t),e}class Ur extends Error{constructor(t){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=t,this.name="NewError"}}function Vr(t,e,r,i,o){if(!(this instanceof Vr))try{return new Vr(t,e,r,i,o)}catch(t){if(!t.avoidNew)throw t;return t.value}"string"==typeof t&&(o=i,i=r,r=e,e=t,t=null);const s=t&&"object"==typeof t;if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=!Object.hasOwn(t,"wrap")||t.wrap,this.sandbox=t.sandbox||{},this.eval=void 0===t.eval?"safe":t.eval,this.ignoreEvalErrors=void 0!==t.ignoreEvalErrors&&t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||i||null,this.otherTypeCallback=t.otherTypeCallback||o||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){const i={path:s?t.path:e};s?"json"in t&&(i.json=t.json):i.json=r;const o=this.evaluate(i);if(!o||"object"!=typeof o)throw new Ur(o);return o}}Vr.prototype.evaluate=function(t,e,r,i){let o=this.parent,s=this.parentProperty,{flatten:n,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"==typeof t&&!Array.isArray(t)){if(!t.path&&""!==t.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),n=Object.hasOwn(t,"flatten")?t.flatten:n,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,r=Object.hasOwn(t,"callback")?t.callback:r,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,o=Object.hasOwn(t,"parent")?t.parent:o,s=Object.hasOwn(t,"parentProperty")?t.parentProperty:s,t=t.path}if(o=o||null,s=s||null,Array.isArray(t)&&(t=Vr.toPathString(t)),!t&&""!==t||!e)return;const c=Vr.toPathArray(t);"$"===c[0]&&c.length>1&&c.shift(),this._hasParentSelector=null;const h=this._trace(c,e,["$"],o,s,r).filter((function(t){return t&&!t.isParentSelector}));return h.length?a||1!==h.length||h[0].hasArrExpr?h.reduce(((t,e)=>{const r=this._getPreferredOutput(e);return n&&Array.isArray(r)?t=t.concat(r):t.push(r),t}),[]):this._getPreferredOutput(h[0]):a?[]:void 0},Vr.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const e=Array.isArray(t.path)?t.path:Vr.toPathArray(t.path);return t.pointer=Vr.toPointer(e),t.path="string"==typeof t.path?t.path:Vr.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return Vr.toPathString(t[e]);case"pointer":return Vr.toPointer(t.path);default:throw new TypeError("Unknown result type")}},Vr.prototype._handleCallback=function(t,e,r){if(e){const i=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:Vr.toPathString(t.path),e(i,r,t)}},Vr.prototype._trace=function(t,e,r,i,o,s,n,a){let c;if(!t.length)return c={path:r,value:e,parent:i,parentProperty:o,hasArrExpr:n},this._handleCallback(c,s,"value"),c;const h=t[0],l=t.slice(1),u=[];function d(t){Array.isArray(t)?t.forEach((t=>{u.push(t)})):u.push(t)}if(("string"!=typeof h||a)&&e&&Object.hasOwn(e,h))d(this._trace(l,e[h],Rr(r,h),e,h,s,n));else if("*"===h)this._walk(e,(t=>{d(this._trace(l,e[t],Rr(r,t),e,t,s,!0,!0))}));else if(".."===h)d(this._trace(l,e,r,i,o,s,n)),this._walk(e,(i=>{"object"==typeof e[i]&&d(this._trace(t.slice(),e[i],Rr(r,i),e,i,s,!0))}));else{if("^"===h)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:l,isParentSelector:!0};if("~"===h)return c={path:Rr(r,h),value:o,parent:i,parentProperty:null},this._handleCallback(c,s,"property"),c;if("$"===h)d(this._trace(l,e,r,null,null,s,n));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(h))d(this._slice(h,l,e,r,i,o,s));else if(0===h.indexOf("?(")){if(!1===this.currEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const t=h.replace(/^\?\((.*?)\)$/u,"$1"),n=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(t);n?this._walk(e,(t=>{const a=[n[2]],c=n[1]?e[t][n[1]]:e[t];this._trace(a,c,r,i,o,s,!0).length>0&&d(this._trace(l,e[t],Rr(r,t),e,t,s,!0))})):this._walk(e,(n=>{this._eval(t,e[n],n,r,i,o)&&d(this._trace(l,e[n],Rr(r,n),e,n,s,!0))}))}else if("("===h[0]){if(!1===this.currEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(Nr(this._eval(h,e,r.at(-1),r.slice(0,-1),i,o),l),e,r,i,o,s,n))}else if("@"===h[0]){let t=!1;const n=h.slice(1,-2);switch(n){case"scalar":e&&["object","function"].includes(typeof e)||(t=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===n&&(t=!0);break;case"integer":!Number.isFinite(e)||e%1||(t=!0);break;case"number":Number.isFinite(e)&&(t=!0);break;case"nonFinite":"number"!=typeof e||Number.isFinite(e)||(t=!0);break;case"object":e&&typeof e===n&&(t=!0);break;case"array":Array.isArray(e)&&(t=!0);break;case"other":t=this.currOtherTypeCallback(e,r,i,o);break;case"null":null===e&&(t=!0);break;default:throw new TypeError("Unknown value type "+n)}if(t)return c={path:r,value:e,parent:i,parentProperty:o},this._handleCallback(c,s,"value"),c}else if("`"===h[0]&&e&&Object.hasOwn(e,h.slice(1))){const t=h.slice(1);d(this._trace(l,e[t],Rr(r,t),e,t,s,n,!0))}else if(h.includes(",")){const t=h.split(",");for(const n of t)d(this._trace(Nr(n,l),e,r,i,o,s,!0))}else!a&&e&&Object.hasOwn(e,h)&&d(this._trace(l,e[h],Rr(r,h),e,h,s,n,!0))}if(this._hasParentSelector)for(let t=0;t<u.length;t++){const r=u[t];if(r&&r.isParentSelector){const a=this._trace(r.expr,e,r.path,i,o,s,n);if(Array.isArray(a)){u[t]=a[0];const e=a.length;for(let r=1;r<e;r++)t++,u.splice(t,0,a[r])}else u[t]=a}}return u},Vr.prototype._walk=function(t,e){if(Array.isArray(t)){const r=t.length;for(let t=0;t<r;t++)e(t)}else t&&"object"==typeof t&&Object.keys(t).forEach((t=>{e(t)}))},Vr.prototype._slice=function(t,e,r,i,o,s,n){if(!Array.isArray(r))return;const a=r.length,c=t.split(":"),h=c[2]&&Number.parseInt(c[2])||1;let l=c[0]&&Number.parseInt(c[0])||0,u=c[1]&&Number.parseInt(c[1])||a;l=l<0?Math.max(0,l+a):Math.min(a,l),u=u<0?Math.max(0,u+a):Math.min(a,u);const d=[];for(let t=l;t<u;t+=h)this._trace(Nr(t,e),r,i,o,s,n,!0).forEach((t=>{d.push(t)}));return d},Vr.prototype._eval=function(t,e,r,i,o,s){this.currSandbox._$_parentProperty=s,this.currSandbox._$_parent=o,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const n=t.includes("@path");n&&(this.currSandbox._$_path=Vr.toPathString(i.concat([r])));const a=this.currEval+"Script:"+t;if(!Vr.cache[a]){let e=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(n&&(e=e.replaceAll("@path","_$_path")),"safe"===this.currEval||!0===this.currEval||void 0===this.currEval)Vr.cache[a]=new this.safeVm.Script(e);else if("native"===this.currEval)Vr.cache[a]=new this.vm.Script(e);else if("function"==typeof this.currEval&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const t=this.currEval;Vr.cache[a]=new t(e)}else{if("function"!=typeof this.currEval)throw new TypeError(`Unknown "eval" property "${this.currEval}"`);Vr.cache[a]={runInNewContext:t=>this.currEval(e,t)}}}try{return Vr.cache[a].runInNewContext(this.currSandbox)}catch(e){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+e.message+": "+t)}},Vr.cache={},Vr.toPathString=function(t){const e=t,r=e.length;let i="$";for(let t=1;t<r;t++)/^(~|\^|@.*?\(\))$/u.test(e[t])||(i+=/^[0-9*]+$/u.test(e[t])?"["+e[t]+"]":"['"+e[t]+"']");return i},Vr.toPointer=function(t){const e=t,r=e.length;let i="";for(let t=1;t<r;t++)/^(~|\^|@.*?\(\))$/u.test(e[t])||(i+="/"+e[t].toString().replaceAll("~","~0").replaceAll("/","~1"));return i},Vr.toPathArray=function(t){const{cache:e}=Vr;if(e[t])return e[t].concat();const r=[],i=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,(function(t,e){return"[#"+(r.push(e)-1)+"]"})).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,(function(t,e){return"['"+e.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"})).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,(function(t,e){return";"+e.split("").join(";")+";"})).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map((function(t){const e=t.match(/#(\d+)/u);return e&&e[1]?r[e[1]]:t}));return e[t]=i,e[t].concat()},Vr.prototype.safeVm={Script:class{constructor(t){this.code=t,this.ast=Or(this.code)}runInNewContext(t){const e={...t};return Br.evalAst(this.ast,e)}}},Vr.prototype.vm={Script:class{constructor(t){this.code=t}runInNewContext(t){let e=this.code;const r=Object.keys(t),i=[];!function(e,r,i){const o=e.length;for(let i=0;i<o;i++)s=e[i],"function"==typeof t[s]&&r.push(e.splice(i--,1)[0]);var s}(r,i);const o=r.map((e=>t[e]));e=i.reduce(((e,r)=>{let i=t[r].toString();return/function/u.test(i)||(i="function "+i),"var "+r+"="+i+";"+e}),"")+e,/(['"])use strict\1/u.test(e)||r.includes("arguments")||(e="var arguments = undefined;"+e),e=e.replace(/;\s*$/u,"");const s=e.lastIndexOf(";"),n=s>-1?e.slice(0,s+1)+" return "+e.slice(s+1):" return "+e;return new Function(...r,n)(...o)}}};var jr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class zr{constructor(t){this.jscadWorkerManager=t}intersect(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.intersect",t)}))}subtract(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtract",t)}))}union(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.union",t)}))}intersectTwo(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.intersectTwo",t)}))}subtractTwo(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtractTwo",t)}))}unionTwo(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.unionTwo",t)}))}subtractFrom(t){return jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtractFrom",t)}))}}var Hr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class qr{constructor(t){this.jscadWorkerManager=t}expand(t){return Hr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("expansions.expand",t)}))}offset(t){return Hr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("expansions.offset",t)}))}}var Gr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Yr{constructor(t){this.jscadWorkerManager=t}extrudeLinear(t){return Gr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeLinear",t)}))}extrudeRectangular(t){return Gr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRectangular",t)}))}extrudeRectangularPoints(t){return Gr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRectangularPoints",t)}))}extrudeRotate(t){return Gr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRotate",t)}))}}var $r=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Zr{constructor(t){this.jscadWorkerManager=t}hullChain(t){return $r(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("hulls.hullChain",t)}))}hull(t){return $r(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("hulls.hullChain",t)}))}}var Kr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Xr{constructor(t){this.jscadWorkerManager=t}createFromPoints(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createFromPoints",t)}))}createPathsFromPoints(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createPathsFromPoints",t)}))}createFromPolyline(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createFromPolyline",t)}))}createEmpty(){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createEmpty",{})}))}close(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.close",t)}))}appendPoints(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendPoints",t)}))}appendPolyline(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendPolyline",t)}))}appendArc(t){return Kr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendArc",t)}))}}var Jr=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Qr{constructor(t){this.jscadWorkerManager=t}createFromPoints(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPoints",t)}))}createFromPolyline(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPolyline",t)}))}createFromCurve(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromCurve",t)}))}createFromPath(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPath",t)}))}circle(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.circle",t)}))}ellipse(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.ellipse",t)}))}rectangle(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.rectangle",t)}))}roundedRectangle(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.roundedRectangle",t)}))}square(t){return Jr(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.square",t)}))}star(t){return Jr(this,void 0,void 0,(function*(){return yield this.jscadWorkerManager.genericCallToWorkerPromise("polygon.star",t)}))}}var ti=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class ei{constructor(t){this.jscadWorkerManager=t}cube(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cube",t)}))}cubesOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cubesOnCenterPoints",t)}))}cuboid(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cuboid",t)}))}cuboidsOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cuboidsOnCenterPoints",t)}))}cylinderElliptic(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinderElliptic",t)}))}cylinderEllipticOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinderEllipticOnCenterPoints",t)}))}cylinder(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinder",t)}))}cylindersOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylindersOnCenterPoints",t)}))}ellipsoid(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.ellipsoid",t)}))}ellipsoidsOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.ellipsoidsOnCenterPoints",t)}))}geodesicSphere(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.geodesicSphere",t)}))}geodesicSpheresOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.geodesicSpheresOnCenterPoints",t)}))}roundedCuboid(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCuboid",t)}))}roundedCuboidsOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCuboidsOnCenterPoints",t)}))}roundedCylinder(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCylinder",t)}))}roundedCylindersOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCylindersOnCenterPoints",t)}))}sphere(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.sphere",t)}))}spheresOnCenterPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.spheresOnCenterPoints",t)}))}torus(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.torus",t)}))}fromPolygonPoints(t){return ti(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.fromPolygonPoints",t)}))}}var ri=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class ii{constructor(t){this.jscadWorkerManager=t}cylindricalText(t){return ri(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.cylindricalText",t)}))}sphericalText(t){return ri(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.sphericalText",t)}))}createVectorText(t){return ri(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.createVectorText",t)}))}}class oi{constructor(t){this.jscadWorkerManager=t}colorize(t){return e=this,r=void 0,o=function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("colors.colorize",t)},new((i=void 0)||(i=Promise))((function(t,s){function n(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,a)}c((o=o.apply(e,r||[])).next())}));var e,r,i,o}}var si,ni=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class ai{constructor(t){this.jscadWorkerManager=t,this.booleans=new zr(t),this.expansions=new qr(t),this.extrusions=new Yr(t),this.hulls=new Zr(t),this.path=new Xr(t),this.polygon=new Qr(t),this.shapes=new ei(t),this.text=new ii(t),this.colors=new oi(t)}toPolygonPoints(t){return ni(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("toPolygonPoints",t)}))}transformSolids(t){return ni(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("transformSolids",t)}))}transformSolid(t){return ni(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("transformSolid",t)}))}downloadSolidSTL(t){return ni(this,void 0,void 0,(function*(){const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadSolidSTL",t);this.downloadFile(e.blob,t.fileName,"stl")}))}downloadSolidsSTL(t){return ni(this,void 0,void 0,(function*(){const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadSolidsSTL",t);this.downloadFile(e.blob,t.fileName,"stl")}))}downloadGeometryDxf(t){return ni(this,void 0,void 0,(function*(){const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadGeometryDxf",t);this.downloadFile(e.blob,t.fileName,"dxf")}))}downloadGeometry3MF(t){return ni(this,void 0,void 0,(function*(){const e=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadGeometry3MF",t);this.downloadFile(e.blob,t.fileName,"3mf")}))}downloadFile(t,e,r){const i=URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.target="_self",o.download=e+"."+r,o.click(),o.remove()}}!function(t){t[t.loading=0]="loading",t[t.loaded=1]="loaded",t[t.initialised=2]="initialised",t[t.computing=3]="computing"}(si||(si={}));class ci{constructor(){this.jscadWorkerState$=new we,this.promisesMade=[]}jscadWorkerAlreadyInitialised(){return!!this.jscadWorker}setJscadWorker(t){this.jscadWorker=t,this.jscadWorker.onmessage=({data:t})=>{if("jscad-initialised"===t)this.jscadWorkerState$.next({state:si.initialised});else if("busy"===t)this.jscadWorkerState$.next({state:si.computing});else{const e=this.promisesMade.find((e=>e.uid===t.uid));e&&t.result&&!t.error?e.resolve(t.result):t.error&&(this.errorCallback&&this.errorCallback(t.error),e.reject(t.error)),this.promisesMade=this.promisesMade.filter((e=>e.uid!==t.uid)),0===this.promisesMade.length?this.jscadWorkerState$.next({state:si.loaded}):this.jscadWorkerState$.next({state:si.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(t,e){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((t,e)=>{i.resolve=t,i.reject=e}));return i.promise=o,this.promisesMade.push(i),this.jscadWorker.postMessage({action:{functionName:t,inputs:e},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}var hi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class li{constructor(t){this.manifoldWorkerManager=t}manifoldFromMesh(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.manifoldFromMesh",t)}fromPolygonPoints(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.fromPolygonPoints",t)}cube(t){return hi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.cube",t)}))}sphere(t){return hi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.sphere",t)}))}tetrahedron(){return hi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.tetrahedron",{})}))}cylinder(t){return hi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.cylinder",t)}))}}var ui=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class di{constructor(t){this.manifoldWorkerManager=t}subtract(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.subtract",t)}))}add(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.add",t)}))}intersect(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersect",t)}))}differenceTwo(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.differenceTwo",t)}))}unionTwo(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.unionTwo",t)}))}intersectionTwo(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersectionTwo",t)}))}difference(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.difference",t)}))}union(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.union",t)}))}intersection(t){return ui(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersection",t)}))}split(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.split",t)}splitByPlane(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.splitByPlane",t)}splitByPlaneOnOffsets(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.splitByPlaneOnOffsets",t)}trimByPlane(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.trimByPlane",t)}}var vi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class fi{constructor(t){this.manifoldWorkerManager=t}hull(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.hull",t)}))}hullPoints(t){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.hullPoints",t)}slice(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.slice",t)}))}project(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.project",t)}))}setTolerance(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.setTolerance",t)}))}reserveIds(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.reserveIds",t)}))}asOriginal(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.asOriginal",t)}))}compose(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.compose",t)}))}decompose(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.decompose",t)}))}calculateNormals(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.calculateNormals",t)}))}calculateCurvature(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.calculateCurvature",t)}))}refineToTolerance(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refineToTolerance",t)}))}refineToLength(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refineToLength",t)}))}refine(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refine",t)}))}smoothOut(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.smoothOut",t)}))}smoothByNormals(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.smoothByNormals",t)}))}simplify(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.simplify",t)}))}setProperties(t){return vi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.setProperties",t)}))}}var pi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class gi{constructor(t){this.manifoldWorkerManager=t}scale3D(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.scale3D",t)}))}scale(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.scale",t)}))}mirror(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.mirror",t)}))}translate(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translate",t)}))}translateByVectors(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translateByVectors",t)}))}translateXYZ(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translateXYZ",t)}))}rotate(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.rotate",t)}))}rotateXYZ(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.rotateXYZ",t)}))}transform(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.transform",t)}))}transforms(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.transforms",t)}))}warp(t){return pi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.warp",t)}))}}var mi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class bi{constructor(t){this.manifoldWorkerManager=t}surfaceArea(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.surfaceArea",t)}))}volume(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.volume",t)}))}isEmpty(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.isEmpty",t)}))}numVert(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numVert",t)}))}numTri(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numTri",t)}))}numEdge(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numEdge",t)}))}numProp(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numProp",t)}))}numPropVert(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numPropVert",t)}))}boundingBox(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.boundingBox",t)}))}tolerance(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.tolerance",t)}))}genus(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.genus",t)}))}minGap(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.minGap",t)}))}originalID(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.originalID",t)}))}status(t){return mi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.status",t)}))}}var yi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Pi{constructor(t){this.manifoldWorkerManager=t,this.shapes=new li(t),this.booleans=new di(t),this.operations=new fi(t),this.transforms=new gi(t),this.evaluate=new bi(t)}manifoldToMesh(t){return yi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.manifoldToMesh",t)}))}manifoldsToMeshes(t){return yi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.manifoldsToMeshes",t)}))}}var wi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class ki{constructor(t){this.manifoldWorkerManager=t}hull(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.hull",t)}))}extrude(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.extrude",t)}))}revolve(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.revolve",t)}))}offset(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.offset",t)}))}simplify(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.simplify",t)}))}compose(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.compose",t)}))}decompose(t){return wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.decompose",t)}))}}var Ci=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class xi{constructor(t){this.manifoldWorkerManager=t}create(t){return Ci(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.create",t)}))}square(t){return Ci(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.square",t)}))}circle(t){return Ci(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.circle",t)}))}rectangle(t){return Ci(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.rectangle",t)}))}}var _i=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Ti{constructor(t){this.manifoldWorkerManager=t}scale2D(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.scale2D",t)}))}scale(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.scale",t)}))}mirror(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.mirror",t)}))}translate(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.translate",t)}))}translateXY(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.translateXY",t)}))}rotate(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.rotate",t)}))}transform(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.transform",t)}))}warp(t){return _i(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.warp",t)}))}}var Si=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Mi{constructor(t){this.manifoldWorkerManager=t}subtract(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.subtract",t)}))}add(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.add",t)}))}intersect(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersect",t)}))}differenceTwo(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.differenceTwo",t)}))}unionTwo(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.unionTwo",t)}))}intersectionTwo(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersectionTwo",t)}))}difference(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.difference",t)}))}union(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.union",t)}))}intersection(t){return Si(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersection",t)}))}}var Wi=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Ei{constructor(t){this.manifoldWorkerManager=t}area(t){return Wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.area",t)}))}isEmpty(t){return Wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.isEmpty",t)}))}numVert(t){return Wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.numVert",t)}))}numContour(t){return Wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.numContour",t)}))}bounds(t){return Wi(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.bounds",t)}))}}var Di=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Oi{constructor(t){this.manifoldWorkerManager=t,this.shapes=new xi(t),this.operations=new ki(t),this.booleans=new Mi(t),this.transforms=new Ti(t),this.evaluate=new Ei(t)}crossSectionFromPoints(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionFromPoints",t)}))}crossSectionFromPolygons(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionFromPolygons",t)}))}crossSectionToPolygons(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionToPolygons",t)}))}crossSectionToPoints(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionToPoints",t)}))}crossSectionsToPolygons(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionsToPolygons",t)}))}crossSectionsToPoints(t){return Di(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionsToPoints",t)}))}}class Ai{constructor(t){this.manifoldWorkerManager=t}merge(t){return e=this,r=void 0,o=function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.operations.merge",t)},new((i=void 0)||(i=Promise))((function(t,s){function n(t){try{c(o.next(t))}catch(t){s(t)}}function a(t){try{c(o.throw(t))}catch(t){s(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,a)}c((o=o.apply(e,r||[])).next())}));var e,r,i,o}}var Ii=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Fi{constructor(t){this.manifoldWorkerManager=t}position(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.position",t)}))}verts(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.verts",t)}))}tangent(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.tangent",t)}))}extras(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.extras",t)}))}transform(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.transform",t)}))}numProp(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numProp",t)}))}numVert(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numVert",t)}))}numTri(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numTri",t)}))}numRun(t){return Ii(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numRun",t)}))}}class Li{constructor(t){this.manifoldWorkerManager=t,this.operations=new Ai(t),this.evaluate=new Fi(t)}}var Bi,Ri=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Ni{constructor(t){this.manifoldWorkerManager=t,this.manifold=new Pi(t),this.crossSection=new Oi(t),this.mesh=new Li(t)}manifoldToMeshPointer(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifoldToMeshPointer",t)}))}decomposeManifoldOrCrossSection(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldOrCrossSection",t)}))}toPolygonPoints(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("toPolygonPoints",t)}))}decomposeManifoldsOrCrossSections(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldsOrCrossSections",t)}))}deleteManifoldOrCrossSection(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("deleteManifoldOrCrossSection",t)}))}deleteManifoldsOrCrossSections(t){return Ri(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("deleteManifoldsOrCrossSections",t)}))}}!function(t){t[t.loading=0]="loading",t[t.loaded=1]="loaded",t[t.initialised=2]="initialised",t[t.computing=3]="computing"}(Bi||(Bi={}));class Ui{constructor(){this.manifoldWorkerState$=new we,this.promisesMade=[]}manifoldWorkerAlreadyInitialised(){return!!this.manifoldWorker}setManifoldWorker(t){this.manifoldWorker=t,this.manifoldWorker.onmessage=({data:t})=>{if("manifold-initialised"===t)this.manifoldWorkerState$.next({state:Bi.initialised});else if("busy"===t)this.manifoldWorkerState$.next({state:Bi.computing});else{const e=this.promisesMade.find((e=>e.uid===t.uid));e&&void 0!==t.result&&!t.error?e.resolve(t.result):t.error&&(this.errorCallback&&this.errorCallback(t.error),e.reject(t.error)),this.promisesMade=this.promisesMade.filter((e=>e.uid!==t.uid)),0===this.promisesMade.length?this.manifoldWorkerState$.next({state:Bi.loaded}):this.manifoldWorkerState$.next({state:Bi.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(t,e){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((t,e)=>{i.resolve=t,i.reject=e}));return i.promise=o,this.promisesMade.push(i),this.manifoldWorker.postMessage({action:{functionName:t,inputs:e},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}var Vi,ji,zi,Hi,qi,Gi,Yi=i(258);class $i{constructor(t){this.context=t}create(t){if(!this.context.app)throw new Error("App not initialized. Call init() first.");let e;t.focusEntity&&(e=this.context.scene.findOne((t=>t instanceof G.Entity&&void 0!==t.camera&&null!==t.camera))),e||(e=new G.Entity("OrbitCamera"),e.addComponent("camera",{clearColor:new G.Color(.1,.1,.1),farClip:1e4,nearClip:.1}),this.context.scene.addChild(e));const r=this.createOrbitCameraInstance(e,{autoRender:t.autoRender,distanceMax:t.distanceMax,distanceMin:t.distanceMin,pitchAngleMax:t.pitchAngleMax,pitchAngleMin:t.pitchAngleMin,inertiaFactor:t.inertiaFactor,focusEntity:t.focusEntity||null,frameOnStart:t.frameOnStart}),i=new G.Vec3(t.pivotPoint[0],t.pivotPoint[1],t.pivotPoint[2]);r.pivotPoint=i,r.distance=t.distance,r.pitch=t.pitch,r.yaw=t.yaw;const o=r;o._pivotPoint&&o._pivotPoint.copy(i);const s=this.createMouseInput(e,r,{orbitSensitivity:t.orbitSensitivity,distanceSensitivity:t.distanceSensitivity}),n=this.createTouchInput(e,r,{orbitSensitivity:t.orbitSensitivity,distanceSensitivity:t.distanceSensitivity}),a=t=>{r.update(t)};return this.context.app.on("update",a),t.focusEntity&&t.frameOnStart&&r.focus(t.focusEntity),{orbitCamera:r,cameraEntity:e,mouseInput:s,touchInput:n,update:a,destroy:()=>{var t;null===(t=this.context.app)||void 0===t||t.off("update",a),null==s||s.destroy(),null==n||n.destroy()}}}setPivotPoint(t){const e=new G.Vec3(t.pivotPoint[0],t.pivotPoint[1],t.pivotPoint[2]);t.orbitCamera.orbitCamera.pivotPoint=e}getPivotPoint(t){const e=t.orbitCamera.orbitCamera.pivotPoint;return[e.x,e.y,e.z]}focusOnEntity(t){t.orbitCamera.orbitCamera.focus(t.entity)}resetCamera(t){t.orbitCamera.orbitCamera.reset(t.yaw,t.pitch,t.distance)}createOrbitCameraInstance(t,e){const r={_modelsAabb:new G.BoundingBox,_pivotPoint:new G.Vec3,_targetPivotPoint:new G.Vec3,_lastFramePivotPoint:new G.Vec3,_yaw:0,_pitch:0,_distance:0,_targetYaw:0,_targetPitch:0,_targetDistance:0,_autoRenderDefault:!0},i=new G.Vec3,o=()=>{const e=(new G.Quat).setFromEulerAngles(0,r._yaw,0),i=(new G.Quat).setFromEulerAngles(r._pitch,0,0),o=new G.Quat;o.mul2(e,i);const s=new G.Vec3(0,0,r._distance);o.transformVector(s,s),t.setPosition(r._pivotPoint.x+s.x,r._pivotPoint.y+s.y,r._pivotPoint.z+s.z),t.setRotation(o)},s=()=>{r._yaw=r._targetYaw,r._pitch=r._targetPitch,r._distance=r._targetDistance,r._pivotPoint.copy(r._targetPivotPoint)},n=(t,e)=>{let i=e;if(t instanceof G.Entity&&t.model){const e=t.model.meshInstances;for(let t=0;t<e.length;t++)e[t].visible&&(0===i?r._modelsAabb.copy(e[t].aabb):r._modelsAabb.add(e[t].aabb),i+=1)}const o=t.children;for(let t=0;t<o.length;t++)i=n(o[t],i);return i};return{autoRender:e.autoRender,distanceMax:e.distanceMax,distanceMin:e.distanceMin,pitchAngleMax:e.pitchAngleMax,pitchAngleMin:e.pitchAngleMin,inertiaFactor:e.inertiaFactor,focusEntity:e.focusEntity,frameOnStart:e.frameOnStart,get distance(){return r._targetDistance},set distance(t){var i;r._targetDistance=(i=t,Math.max(e.distanceMin,Math.min(e.distanceMax,i)))},get pitch(){return r._targetPitch},set pitch(t){var i;r._targetPitch=(i=t,Math.max(e.pitchAngleMin,Math.min(e.pitchAngleMax,i)))},get yaw(){return r._targetYaw},set yaw(t){r._targetYaw=t;const e=(r._targetYaw-r._yaw)%360;e>180?r._yaw+=360:e<-180&&(r._yaw-=360)},get pivotPoint(){return r._targetPivotPoint},set pivotPoint(t){r._targetPivotPoint.copy(t)},focus(e){n(e,0);const i=r._modelsAabb.halfExtents;let o=Math.max(i.x,Math.max(i.y,i.z));const a=t.camera;a&&(o/=Math.tan(.5*a.fov*a.aspectRatio*G.math.DEG_TO_RAD)),o*=2,this.distance=o,s(),r._pivotPoint.copy(r._modelsAabb.center)},resetAndLookAtPoint(r,n){this.pivotPoint.copy(n),t.setPosition(r),t.lookAt(n),i.sub2(n,r),this.distance=i.length(),this.pivotPoint.copy(n);const a=t.getRotation();this.yaw=(t=>{const e=new G.Vec3;return t.transformVector(G.Vec3.FORWARD,e),Math.atan2(-e.x,-e.z)*G.math.RAD_TO_DEG})(a),this.pitch=((t,e)=>{const r=new G.Quat,i=new G.Quat;i.setFromEulerAngles(0,-e,0),r.mul2(i,t);const o=new G.Vec3;return r.transformVector(G.Vec3.FORWARD,o),Math.atan2(o.y,-o.z)*G.math.RAD_TO_DEG})(a,this.yaw),s(),o(),!e.autoRender&&this.context.app&&(this.context.app.renderNextFrame=!0)},resetAndLookAtEntity(t,e){n(e,0),this.resetAndLookAtPoint(t,r._modelsAabb.center)},reset(t,e,r){this.pitch=e,this.yaw=t,this.distance=r,s(),o()},update(t){const i=0===e.inertiaFactor?1:Math.min(t/e.inertiaFactor,1);r._distance=G.math.lerp(r._distance,r._targetDistance,i),r._yaw=G.math.lerp(r._yaw,r._targetYaw,i),r._pitch=G.math.lerp(r._pitch,r._targetPitch,i),r._pivotPoint.lerp(r._pivotPoint,r._targetPivotPoint,i),o()}}}createMouseInput(t,e,r){var i;if(!(null===(i=this.context.app)||void 0===i?void 0:i.mouse))return null;const o=this.context.app.mouse;let s=!1,n=!1;const a=new G.Vec2,c=new G.Vec3,h=new G.Vec3,l=new G.Vec3,u=t=>{switch(t.button){case G.MOUSEBUTTON_LEFT:s=!0;break;case G.MOUSEBUTTON_MIDDLE:case G.MOUSEBUTTON_RIGHT:n=!0}},d=t=>{switch(t.button){case G.MOUSEBUTTON_LEFT:s=!1;break;case G.MOUSEBUTTON_MIDDLE:case G.MOUSEBUTTON_RIGHT:n=!1}},v=i=>{s?(e.pitch-=i.dy*r.orbitSensitivity,e.yaw-=i.dx*r.orbitSensitivity):n&&(r=>{const i=t.camera;if(!i)return;const o=e.distance;i.screenToWorld(r.x,r.y,o,c),i.screenToWorld(a.x,a.y,o,h),l.sub2(h,c),e.pivotPoint.add(l)})(i),a.set(i.x,i.y)},f=t=>{e.distance+=t.wheelDelta*r.distanceSensitivity*(.1*e.distance),t.event.preventDefault()},p=()=>{s=!1,n=!1};return o.on(G.EVENT_MOUSEDOWN,u),o.on(G.EVENT_MOUSEUP,d),o.on(G.EVENT_MOUSEMOVE,v),o.on(G.EVENT_MOUSEWHEEL,f),window.addEventListener("mouseout",p,!1),o.disableContextMenu(),{destroy:()=>{o.off(G.EVENT_MOUSEDOWN,u),o.off(G.EVENT_MOUSEUP,d),o.off(G.EVENT_MOUSEMOVE,v),o.off(G.EVENT_MOUSEWHEEL,f),window.removeEventListener("mouseout",p)}}}createTouchInput(t,e,r){var i;if(!(null===(i=this.context.app)||void 0===i?void 0:i.touch))return null;const o=this.context.app.touch,s=new G.Vec2,n=new G.Vec2;let a=0;const c=new G.Vec3,h=new G.Vec3,l=new G.Vec3,u=new G.Vec2,d=(t,e)=>{const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},v=(t,e,r)=>{r.set(e.x-t.x,e.y-t.y),r.mulScalar(.5),r.x+=t.x,r.y+=t.y},f=t=>{const e=t.touches;1===e.length?s.set(e[0].x,e[0].y):2===e.length&&(a=d(e[0],e[1]),v(e[0],e[1],n))},p=i=>{const o=i.touches;if(1===o.length){const t=o[0];e.pitch-=(t.y-s.y)*r.orbitSensitivity,e.yaw-=(t.x-s.x)*r.orbitSensitivity,s.set(t.x,t.y)}else if(2===o.length){const i=d(o[0],o[1]),s=i-a;a=i,e.distance+=s*r.distanceSensitivity*.1*(.1*e.distance),v(o[0],o[1],u),(r=>{const i=t.camera;if(!i)return;const o=e.distance;i.screenToWorld(r.x,r.y,o,c),i.screenToWorld(n.x,n.y,o,h),l.sub2(h,c),e.pivotPoint.add(l)})(u),n.copy(u)}};return o.on(G.EVENT_TOUCHSTART,f),o.on(G.EVENT_TOUCHEND,f),o.on(G.EVENT_TOUCHCANCEL,f),o.on(G.EVENT_TOUCHMOVE,p),{destroy:()=>{o.off(G.EVENT_TOUCHSTART,f),o.off(G.EVENT_TOUCHEND,f),o.off(G.EVENT_TOUCHCANCEL,f),o.off(G.EVENT_TOUCHMOVE,p)}}}}class Zi{constructor(t){this.context=t,this.orbitCamera=new $i(this.context)}}class Ki{constructor(t,e){this.context=t,this.drawHelper=e,this.camera=new Zi(this.context)}}class Xi{constructor(){this.context=new Sr,this.jscadWorkerManager=new ci,this.manifoldWorkerManager=new Ui,this.occtWorkerManager=new Ce,this.jscad=new ai(this.jscadWorkerManager),this.manifold=new Ni(this.manifoldWorkerManager);const t=new Ie;this.lists=new _e,this.math=new Se,this.vector=new Oe(this.math,t);const e=new Wr(this.context,this.jscad.text,this.vector,this.jscadWorkerManager,this.manifoldWorkerManager,this.occtWorkerManager);this.playcanvas=new Ki(this.context,e),this.tag=new vr(this.context),this.draw=new Tr(e,this.context,this.tag),this.color=new xe(this.math),this.transforms=new Ae(this.vector,this.math),this.point=new Me(t,this.transforms,this.vector,this.lists),this.line=new Fe(this.vector,this.point,t),this.polyline=new Le(this.vector,this.point,this.line,t),this.verb=new nr(this.context,t,this.math),this.time=new fr(this.context),this.occt=new $e(this.context,this.occtWorkerManager),this.asset=new lr,this.logic=new Te,this.json=new dr(this.context),this.csv=new ur,this.text=new Ee(this.point),this.dates=new De,this.mesh=new Be(this.vector,this.polyline)}init(t,e,r,i,o){const s={geom:Yi.geom,core:Yi.core};this.context.app=t,this.context.scene=e,this.context.verb=s,this.context.jsonpath=Vr,r&&this.occtWorkerManager.setOccWorker(r),i&&this.jscadWorkerManager.setJscadWorker(i),o&&this.manifoldWorkerManager.setManifoldWorker(o)}}!function(t){t.low="low",t.middle="middle",t.high="high"}(Vi||(Vi={}));class Ji{constructor(){this.lod=Vi.low}}class Qi{}class to{constructor(t,e,r,i,o,s,n,a,c){this.swirl=.6,this.nrOfDivisions=10,this.addRadiusNarrow=.4,this.addRadiusWide=.2,this.addMiddleHeight=1.6,this.addTopHeight=1.5,this.thickness=1,this.rotation=0,this.origin=[0,0,0],void 0!==t&&(this.swirl=t),void 0!==e&&(this.nrOfDivisions=e),void 0!==r&&(this.addRadiusNarrow=r),void 0!==i&&(this.addRadiusWide=i),void 0!==o&&(this.addMiddleHeight=o),void 0!==s&&(this.addTopHeight=s),void 0!==n&&(this.thickness=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c)}}class eo{constructor(){this.type="parametric-model",this.name="serenitySwirl"}}class ro{}class io{constructor(t,e,r,i,o,s,n,a,c,h,l,u){this.profilePoints=[[2,0,0],[4,5,0],[1.5,10,0],[3,14,0]],this.nrOfSides=6,this.nrOfVerticalArches=4,this.archCenterThickness=.8,this.edgesThickness=.2,this.thickness=1,this.baseHeight=.4,this.patchHoles=!0,this.lod=Vi.high,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==t&&(this.nrOfSides=t),void 0!==e&&(this.nrOfVerticalArches=e),void 0!==r&&(this.archCenterThickness=r),void 0!==i&&(this.edgesThickness=i),void 0!==o&&(this.thickness=o),void 0!==s&&(this.baseHeight=s),void 0!==n&&(this.patchHoles=n),void 0!==a&&(this.lod=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.origin=h),void 0!==l&&(this.direction=l),void 0!==u&&(this.scale=u)}}class oo{constructor(){this.type="parametric-model",this.name="arabicArchway"}}class so{}class no{}class ao{}class co{constructor(t,e,r,i,o,s,n,a){this.textHeading="LOVE YOU",this.textName="NORA",this.fullModel=!0,this.thickness=6,this.decorationThickness=1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.textHeading=t),void 0!==e&&(this.textName=e),void 0!==r&&(this.fullModel=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.decorationThickness=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.origin=n),void 0!==a&&(this.direction=a)}}class ho{constructor(){this.type="parametric-model",this.name="eternalLove"}}class lo{}class uo{constructor(t,e,r,i,o,s,n,a,c,h,l,u){this.height=6,this.radiusBottom=4,this.radiusTopOffset=2,this.thickness=.6,this.fillet=.2,this.nrOfHandles=1,this.handleDist=2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.radiusBottom=e),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.fillet=o),void 0!==s&&(this.nrOfHandles=s),void 0!==n&&(this.handleDist=n),void 0!==a&&(this.precision=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.scale=h),void 0!==l&&(this.origin=l),void 0!==u&&(this.direction=u)}}class vo{constructor(){this.type="parametric-model",this.name="calmCup"}}class fo{}class po{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P){this.height=8,this.radiusBottom=4,this.radiusTopOffset=2,this.radiusMidOffset=2,this.rotationTopAngle=20,this.rotationMidAngle=20,this.nrSkinCellsVertical=5,this.nrSkinCellsHorizontal=10,this.nrSkinCellDivisionsTop=1,this.nrSkinCellDivisionsBottom=3,this.skinCellOuterHeight=.4,this.skinCellInnerHeight=.3,this.skinCellBottomHeight=.4,this.skinCellTopHeight=.4,this.thickness=.6,this.bottomThickness=1,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.radiusBottom=e),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.radiusMidOffset=i),void 0!==o&&(this.rotationTopAngle=o),void 0!==s&&(this.rotationMidAngle=s),void 0!==n&&(this.nrSkinCellsVertical=n),void 0!==a&&(this.nrSkinCellsHorizontal=a),void 0!==c&&(this.nrSkinCellDivisionsTop=c),void 0!==h&&(this.nrSkinCellDivisionsBottom=h),void 0!==l&&(this.skinCellOuterHeight=l),void 0!==u&&(this.skinCellInnerHeight=u),void 0!==d&&(this.skinCellBottomHeight=d),void 0!==v&&(this.skinCellTopHeight=v),void 0!==f&&(this.thickness=f),void 0!==p&&(this.bottomThickness=p),void 0!==g&&(this.precision=g),void 0!==m&&(this.rotation=m),void 0!==b&&(this.scale=b),void 0!==y&&(this.origin=y),void 0!==P&&(this.direction=P)}}class go{constructor(){this.type="parametric-model",this.name="dragonCup"}}class mo{}class bo{}class yo{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m){this.heightBottom=5,this.heightTop=16,this.widthBack=25,this.widthFront=10,this.length=16,this.backOffset=6,this.thickness=.4,this.applyOrnaments=!1,this.filletRadius=2,this.phoneHeight=16.8,this.phoneWidth=7.8,this.phoneThickness=.7,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.heightBottom=t),void 0!==e&&(this.heightTop=e),void 0!==r&&(this.widthBack=r),void 0!==i&&(this.widthFront=i),void 0!==o&&(this.length=o),void 0!==s&&(this.backOffset=s),void 0!==n&&(this.thickness=n),void 0!==a&&(this.applyOrnaments=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.phoneHeight=h),void 0!==l&&(this.phoneWidth=l),void 0!==u&&(this.phoneThickness=u),void 0!==d&&(this.precision=d),void 0!==v&&(this.drawEdges=v),void 0!==f&&(this.rotation=f),void 0!==p&&(this.scale=p),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Po{constructor(){this.type="parametric-model",this.name="phoneNest"}}class wo extends Qi{}class ko{}class Co extends Qi{}class xo{}class _o{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class To{}class So{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b){this.textTop="Pepper",this.textFront="For Your Spicy Needs",this.nrSides=4,this.nrOffsets=1,this.height=6,this.radiusBase=4,this.radiusOffset=2,this.coverHeight=1,this.baseHeight=1,this.thickness=.6,this.ornamentalThickness=.1,this.nrOrnamnetsPerSide=10,this.invertOrnaments=!1,this.fillet=.2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.textTop=t),void 0!==e&&(this.textFront=e),void 0!==r&&(this.nrSides=r),void 0!==i&&(this.nrOffsets=i),void 0!==o&&(this.height=o),void 0!==s&&(this.coverHeight=s),void 0!==n&&(this.baseHeight=n),void 0!==a&&(this.radiusBase=a),void 0!==c&&(this.radiusOffset=c),void 0!==h&&(this.thickness=h),void 0!==l&&(this.ornamentalThickness=l),void 0!==u&&(this.nrOrnamnetsPerSide=u),void 0!==d&&(this.invertOrnaments=d),void 0!==v&&(this.fillet=v),void 0!==f&&(this.precision=f),void 0!==p&&(this.rotation=p),void 0!==g&&(this.scale=g),void 0!==m&&(this.origin=m),void 0!==b&&(this.direction=b)}}class Mo{constructor(){this.type="parametric-model",this.name="spicyBox"}}class Wo{}class Eo{}class Do{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w,k,C,x){this.title="Your Name",this.subtitle="And Message",this.includeLogo=!0,this.thickness=.4,this.kerf=.01,this.phoneWidth=8,this.phoneHeight=16,this.phoneThickness=1,this.backLength=10,this.angle=20,this.offsetAroundPhone=.5,this.penShelf=1,this.phoneLockHeight=.5,this.filletRadius=.3,this.includePattern=!1,this.densityPattern=.4,this.holesForWire=!0,this.wireInputThickness=1.5,this.includeModel=!0,this.includeDrawings=!0,this.spacingDrawings=.5,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==t&&(this.title=t),void 0!==e&&(this.subtitle=e),void 0!==r&&(this.includeLogo=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.kerf=o),void 0!==s&&(this.phoneWidth=s),void 0!==n&&(this.phoneHeight=n),void 0!==a&&(this.phoneThickness=a),void 0!==c&&(this.backLength=c),void 0!==h&&(this.angle=h),void 0!==l&&(this.offsetAroundPhone=l),void 0!==u&&(this.penShelf=u),void 0!==d&&(this.phoneLockHeight=d),void 0!==v&&(this.filletRadius=v),void 0!==f&&(this.includePattern=f),void 0!==p&&(this.densityPattern=p),void 0!==g&&(this.holesForWire=g),void 0!==m&&(this.wireInputThickness=m),void 0!==b&&(this.includeModel=b),void 0!==y&&(this.includeDrawings=y),void 0!==P&&(this.spacingDrawings=P),void 0!==w&&(this.rotation=w),void 0!==k&&(this.origin=k),void 0!==C&&(this.direction=C),void 0!==x&&(this.scale=x)}}class Oo{}class Ao{constructor(){this.cutWiresColor="#000000",this.engravingWiresColor="#0000ff",this.fileName="bitbybit-droplets-phone-holder",this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7}}class Io{constructor(){this.fileName="bitbybit-droplets-phone-holder",this.adjustYZ=!0}}class Fo{constructor(){this.type="parametric-model",this.name="dropletsPhoneHolder"}}class Lo{}class Bo{}class Ro{}class No{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m,b,y,P,w,k,C,x,_,T,S,M,W){this.widthFirstWing=4,this.lengthFirstWing=10,this.terraceWidth=3,this.widthSecondWing=5,this.lengthSecondWing=10,this.heightWalls=3,this.roofAngleFirstWing=15,this.roofAngleSecondWing=25,this.roofOffset=.5,this.roofInsideOverhang=.5,this.roofMaxDistAttachmentBeams=.8,this.roofAttachmentBeamWidth=.2,this.roofAttachmentBeamHeight=.05,this.roofOutsideOverhang=.5,this.columnSize=.3,this.ceilingBeamHeight=.25,this.ceilingBeamWidth=.1,this.nrCeilingBeamsBetweenColumns=3,this.distBetweenColumns=2,this.floorHeight=.1,this.groundLevel=.6,this.facadePanelThickness=.05,this.windowWidthOffset=.1,this.windowHeightOffset=.2,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05,this.lod=Vi.high,this.skinOpacity=1,this.rotation=0,this.origin=[0,0,0],void 0!==t&&(this.widthFirstWing=t),void 0!==e&&(this.lengthFirstWing=e),void 0!==r&&(this.terraceWidth=r),void 0!==i&&(this.widthSecondWing=i),void 0!==o&&(this.lengthSecondWing=o),void 0!==s&&(this.heightWalls=s),void 0!==n&&(this.roofAngleFirstWing=n),void 0!==a&&(this.roofAngleSecondWing=a),void 0!==c&&(this.roofOffset=c),void 0!==h&&(this.roofInsideOverhang=h),void 0!==l&&(this.roofMaxDistAttachmentBeams=l),void 0!==u&&(this.roofAttachmentBeamWidth=u),void 0!==d&&(this.roofAttachmentBeamHeight=d),void 0!==v&&(this.roofOutsideOverhang=v),void 0!==f&&(this.columnSize=f),void 0!==p&&(this.ceilingBeamHeight=p),void 0!==g&&(this.ceilingBeamWidth=g),void 0!==m&&(this.nrCeilingBeamsBetweenColumns=m),void 0!==b&&(this.distBetweenColumns=b),void 0!==y&&(this.floorHeight=y),void 0!==P&&(this.groundLevel=P),void 0!==w&&(this.facadePanelThickness=w),void 0!==k&&(this.windowWidthOffset=k),void 0!==C&&(this.windowHeightOffset=C),void 0!==x&&(this.windowFrameThickness=x),void 0!==_&&(this.windowGlassFrameThickness=_),void 0!==T&&(this.lod=T),void 0!==S&&(this.skinOpacity=S),void 0!==M&&(this.rotation=M),void 0!==W&&(this.origin=W)}}class Uo{constructor(){this.type="parametric-model",this.name="zenHideout"}}class Vo{}class jo{}class zo{constructor(){this.wallThickness=.4,this.facadePanelThickness=.05,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThckness=.05,this.height=3,this.lengthFirst=1,this.lengthSecond=2,this.rotation=0}}class Ho{constructor(){this.thickness=.3,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThickness=.05,this.height=3,this.width=1,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0]}}class qo extends Ho{}class Go extends zo{}class Yo{constructor(){this.name="sandwitch-panel",this.createWindow=!0,this.createInnerPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelWidth=.4,this.exteriorPanelHeight=3,this.exteriorPanelThickness=.05,this.exteriorPanelBottomOffset=0,this.interiorPanelWidth=.4,this.interiorPanelHeight=3,this.interiorPanelThickness=.05,this.interiorPanelBottomOffset=0,this.windowWidthOffset=0,this.windowHeightOffset=0,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05}}class $o{constructor(){this.name="sandwitch-panel-flex",this.createInteriorPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelThickness=.05,this.interiorPanelThickness=.05,this.interiorPanelPolygonPoints=[],this.exteriorPanelPolygonPoints=[]}}class Zo extends Yo{}class Ko extends $o{}class Xo{}class Jo{}class Qo{}class ts{}class es{}class rs{}class is{constructor(){this.invert=!1,this.widthFirstLanding=1,this.widthSecondLanding=1,this.lengthFirstWing=2,this.lengthSecondWing=1,this.maxWishedStepHeight=.25,this.stepHeightWidthProportion=1.35,this.totalHeight=1,this.rotation=0,this.origin=[0,0,0]}}class os extends is{}class ss{}class ns{constructor(){this.name="roof-cover",this.roofAngle=15,this.roofLength=3,this.roofWidth=3,this.roofOutsideOverhang=.5,this.roofInsideOverhang=1,this.roofOverhangFacade=.1,this.roofThickness=.05,this.roofCoverHeight=.3,this.rotation=0,this.lod=Vi.high,this.center=[0,0,0],this.direction=[0,1,0]}}class as extends ns{}class cs{}class hs{}class ls{constructor(){this.widthFirstWing=1,this.widthSecondWing=2,this.lengthStairFirstWing=2,this.lengthStairSecondWing=1,this.lengthWallFirstWing=2,this.lengthWallSecondWing=1,this.facadePanelThickness=.05,this.wallThickness=3,this.wallHeightExterior=3,this.wallHeightInterior=3,this.windowFrameOffsetTop=.3,this.windowFrameThickness=.1,this.glassFrameThickness=.05,this.doorWidth=1,this.windowWidthOffset=.3,this.stairTotalHeight=1,this.createStair=!1,this.flipDirection=!1,this.rotation=0,this.origin=[0,0,0]}}class us{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.5,this.holeDiameter=1.5,this.holeDistToBottom=2.5,this.stickLength=1.2,this.stickDiameter=.5,this.baseAttachmentHeight=2,this.roofOverhang=1,this.rotation=0,this.chimneyHeight=1,this.origin=[0,0,0],void 0!==t&&(this.interiorWidth=t),void 0!==e&&(this.interiorLength=e),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.holeDiameter=o),void 0!==s&&(this.holeDistToBottom=s),void 0!==n&&(this.stickLength=n),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.rotation=l),void 0!==u&&(this.chimneyHeight=u),void 0!==d&&(this.origin=d)}}class ds{constructor(){this.type="parametric-model",this.name="wingtipVilla"}}class vs{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.3,this.holeDiameter=1.2,this.holeDistToBottom=2.5,this.stickLength=.9,this.stickDiameter=.3,this.baseAttachmentHeight=2,this.roofOverhang=.5,this.roofAngle=20,this.rotation=0,this.origin=[0,0,0],void 0!==t&&(this.interiorWidth=t),void 0!==e&&(this.interiorLength=e),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.holeDiameter=o),void 0!==s&&(this.holeDistToBottom=s),void 0!==n&&(this.stickLength=n),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.roofAngle=l),void 0!==u&&(this.rotation=u),void 0!==d&&(this.origin=d)}}class fs{constructor(){this.type="parametric-model",this.name="chirpyChalet"}}class ps{}class gs{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f){this.sittingHeight=.45,this.backRestOffset=.1,this.backRestHeight=.7,this.width=.45,this.length=.45,this.thickness=.05,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.sittingHeight=t),void 0!==e&&(this.backRestOffset=e),void 0!==r&&(this.backRestHeight=r),void 0!==i&&(this.width=i),void 0!==o&&(this.length=o),void 0!==s&&(this.thickness=s),void 0!==n&&(this.nrOrnamentPlanks=n),void 0!==a&&(this.ornamentDepth=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.precision=h),void 0!==l&&(this.drawEdges=l),void 0!==u&&(this.rotation=u),void 0!==d&&(this.scale=d),void 0!==v&&(this.origin=v),void 0!==f&&(this.direction=f)}}class ms{constructor(){this.type="parametric-model",this.name="snakeChair"}}class bs extends Qi{}class ys{}class Ps extends Qi{}class ws{}class ks{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Cs{}class xs{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p){this.height=.74,this.width=1,this.length=2,this.topThickness=.02,this.topOffset=.03,this.bottomThickness=.05,this.minFillet=.2,this.radiusLegTop=.03,this.radiusLegBottom=.01,this.nrLegPairs=2,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r),void 0!==i&&(this.topThickness=i),void 0!==o&&(this.topOffset=o),void 0!==s&&(this.bottomThickness=s),void 0!==n&&(this.minFillet=n),void 0!==a&&(this.radiusLegTop=a),void 0!==c&&(this.radiusLegBottom=c),void 0!==h&&(this.nrLegPairs=h),void 0!==l&&(this.precision=l),void 0!==u&&(this.drawEdges=u),void 0!==d&&(this.rotation=d),void 0!==v&&(this.scale=v),void 0!==f&&(this.origin=f),void 0!==p&&(this.direction=p)}}class _s{constructor(){this.type="parametric-model",this.name="elegantTable"}}class Ts extends Qi{}class Ss{}class Ms extends Qi{}class Ws extends Qi{}class Es{constructor(){this.index=0}}class Ds{}class Os{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class As{}class Is{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g,m){this.height=.4,this.width=1,this.length=1.2,this.chamfer=.01,this.topThickness=.05,this.topGlassOffset=.2,this.glassThickness=.005,this.glassHolderLength=.02,this.shelfTopOffset=.15,this.shelfThickness=.03,this.legWidth=.1,this.legDepth=.05,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r),void 0!==i&&(this.chamfer=i),void 0!==o&&(this.topThickness=o),void 0!==s&&(this.topGlassOffset=s),void 0!==n&&(this.glassThickness=n),void 0!==a&&(this.glassHolderLength=a),void 0!==c&&(this.shelfTopOffset=c),void 0!==h&&(this.shelfThickness=h),void 0!==l&&(this.legWidth=l),void 0!==u&&(this.legDepth=u),void 0!==d&&(this.precision=d),void 0!==v&&(this.drawEdges=v),void 0!==f&&(this.rotation=f),void 0!==p&&(this.scale=p),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Fs{constructor(){this.type="parametric-model",this.name="goodCoffeeTable"}}class Ls extends Qi{}class Bs{}class Rs extends Qi{}class Ns extends Qi{}class Us extends Qi{}class Vs{constructor(){this.index=0}}class js{}class zs{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Hs{}class qs{constructor(t,e,r,i,o,s,n,a,c,h,l,u,d,v,f,p,g){this.height=.74,this.width=1,this.length=2,this.supportLength=.5,this.shelfHeight=.2,this.thickness=.05,this.glassThickness=.005,this.glassOffset=0,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==t&&(this.height=t),void 0!==e&&(this.width=e),void 0!==r&&(this.length=r),void 0!==i&&(this.supportLength=i),void 0!==o&&(this.shelfHeight=o),void 0!==s&&(this.thickness=s),void 0!==n&&(this.glassThickness=n),void 0!==a&&(this.glassOffset=a),void 0!==c&&(this.nrOrnamentPlanks=c),void 0!==h&&(this.ornamentDepth=h),void 0!==l&&(this.filletRadius=l),void 0!==u&&(this.precision=u),void 0!==d&&(this.drawEdges=d),void 0!==v&&(this.rotation=v),void 0!==f&&(this.scale=f),void 0!==p&&(this.origin=p),void 0!==g&&(this.direction=g)}}class Gs{constructor(){this.type="parametric-model",this.name="snakeTable"}}class Ys extends Qi{}class $s{}class Zs extends Qi{}class Ks{}class Xs{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}!function(t){t.Aboreto="Aboreto",t.Bungee="Bungee",t.IndieFlower="IndieFlower",t.Lugrasimo="Lugrasimo",t.Orbitron="Orbitron",t.Roboto="Roboto",t.RobotoSlab="RobotoSlab",t.Silkscreen="Silkscreen",t.Tektur="Tektur",t.Workbench="Workbench"}(ji||(ji={})),function(t){t.Regular="Regular",t.Black="Black",t.Bold="Bold",t.ExtraBold="ExtraBold",t.Medium="Medium",t.SemiBold="SemiBold",t.BlackItalic="BlackItalic",t.BoldItalic="BoldItalic",t.Italic="Italic",t.Light="Light",t.LightItalic="LightItalic",t.MediumItalic="MediumItalic",t.Thin="Thin",t.ThinItalic="ThinItalic",t.ExtraLight="ExtraLight"}(zi||(zi={})),function(t){t.separatedExtrusion="separatedExtrusion",t.integratedExtrusion="integratedExtrusion",t.cutout="cutout"}(Hi||(Hi={})),function(t){t.compound="compound",t.cutout="originalCutout",t.cutoutInsideCharacter="cutoutInsideCharacter"}(qi||(qi={})),function(t){t.leftTop="leftTop",t.leftMiddle="leftMiddle",t.leftBottom="leftBottom",t.centerTop="centerTop",t.centerMiddle="centerMiddle",t.centerBottom="centerBottom",t.rightTop="rightTop",t.rightMiddle="rightMiddle",t.rightBottom="rightBottom"}(Gi||(Gi={}));const Js=[{key:"Aboreto",variants:["Regular"]},{key:"Bungee",variants:["Regular"]},{key:"IndieFlower",variants:["Regular"]},{key:"Lugrasimo",variants:["Regular"]},{key:"Orbitron",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Roboto",variants:["Black","BlackItalic","Bold","BoldItalic","Italic","Light","LightItalic","Medium","MediumItalic","Regular","Thin","ThinItalic"]},{key:"RobotoSlab",variants:["Black","Bold","ExtraBold","ExtraLight","Light","Medium","Regular","SemiBold","Thin"]},{key:"Silkscreen",variants:["Bold","Regular"]},{key:"Tektur",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Workbench",variants:["Regular"]}];class Qs{constructor(t,e,r,i,o,s,n,a,c){this.text="bitbybit.dev",this.fontType=ji.Roboto,this.fontVariant=zi.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.text=t),void 0!==e&&(this.fontType=e),void 0!==r&&(this.fontVariant=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.origin=n),void 0!==a&&(this.direction=a),void 0!==c&&(this.originAlignment=c)}}class tn{constructor(t,e,r,i,o,s,n,a){this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.text=t),void 0!==e&&(this.fontUrl=e),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==o&&(this.rotation=o),void 0!==s&&(this.origin=s),void 0!==n&&(this.direction=n),void 0!==a&&(this.originAlignment=a)}}class en{constructor(t,e,r,i,o,s,n,a){this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.text=t),void 0!==e&&(this.letterPaths=e),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==o&&(this.rotation=o),void 0!==s&&(this.origin=s),void 0!==n&&(this.direction=n),void 0!==a&&(this.originAlignment=a)}}class rn{constructor(t,e,r,i,o,s,n,a,c,h,l,u){this.facePlanar=!1,this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontType=ji.Roboto,this.fontVariant=zi.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.fontType=o),void 0!==s&&(this.fontVariant=s),void 0!==n&&(this.fontSize=n),void 0!==a&&(this.height=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.originParamU=h),void 0!==l&&(this.originParamV=l),void 0!==u&&(this.originAlignment=u)}}class on{constructor(t,e,r,i,o,s,n,a,c,h,l){this.facePlanar=!1,this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.fontUrl=o),void 0!==s&&(this.fontSize=s),void 0!==n&&(this.height=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class sn{constructor(t,e,r,i,o,s,n,a,c,h,l){this.facePlanar=!1,this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.letterPaths=o),void 0!==s&&(this.fontSize=s),void 0!==n&&(this.height=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class nn{constructor(){this.type="parametric-model",this.name="text3d"}}class an{constructor(){this.index=0}}class cn{}class hn{}class ln{constructor(t,e,r,i,o,s,n,a,c,h){this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontType=ji.Roboto,this.fontVariant=zi.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.faceTextVar=t),void 0!==e&&(this.text=e),void 0!==r&&(this.fontType=r),void 0!==i&&(this.fontVariant=i),void 0!==o&&(this.fontSize=o),void 0!==s&&(this.height=s),void 0!==n&&(this.rotation=n),void 0!==a&&(this.originParamU=a),void 0!==c&&(this.originParamV=c),void 0!==h&&(this.originAlignment=h)}}class un{constructor(t,e,r,i,o,s,n,a,c){this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.faceTextVar=t),void 0!==e&&(this.text=e),void 0!==r&&(this.fontUrl=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.originParamU=n),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class dn{constructor(t,e,r,i,o,s,n,a,c){this.faceTextVar=Hi.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Gi.centerMiddle,void 0!==t&&(this.faceTextVar=t),void 0!==e&&(this.text=e),void 0!==r&&(this.letterPaths=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==s&&(this.rotation=s),void 0!==n&&(this.originParamU=n),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class vn{constructor(t,e,r){this.facePlanar=!1,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.definitions=r)}}class fn{constructor(t,e,r){this.facePlanar=!1,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.definitions=r)}}class pn{constructor(t,e,r){this.facePlanar=!1,void 0!==t&&(this.face=t),void 0!==e&&(this.facePlanar=e),void 0!==r&&(this.definitions=r)}}class gn{constructor(t,e,r,i){this.uNumber=10,this.vNumber=10,this.height=.2,this.precision=.01,void 0!==t&&(this.faces=t),void 0!==i&&(this.height=i),void 0!==e&&(this.uNumber=e),void 0!==r&&(this.vNumber=r)}}class mn{constructor(t,e,r,i,o,s,n){this.uNumber=10,this.vNumber=5,this.defaultHeight=.2,this.affectMinHeight=0,this.affectMaxHeight=1,this.precision=.01,void 0!==t&&(this.faces=t),void 0!==e&&(this.affectorPoints=e),void 0!==r&&(this.uNumber=r),void 0!==i&&(this.vNumber=i),void 0!==o&&(this.affectMinHeight=o),void 0!==s&&(this.affectMaxHeight=s),void 0!==n&&(this.precision=n)}}class bn{constructor(){this.type="parametric-model",this.name="patternsFacePatternPyramidSimple"}}class yn{constructor(){this.index=0}}class Pn{}class wn{}class kn{}class Cn{}class xn{constructor(){this.faceIndex=0}}class _n{constructor(){this.faceIndex=0,this.uIndex=0,this.vIndex=0}}class Tn{constructor(){this.faceIndex=0,this.uIndex=0}}class Sn{constructor(){this.faceIndex=0,this.vIndex=0}}class Mn{}class Wn{}var En;!function(t){t.wire="wire",t.face="face",t.solid="solid"}(En||(En={}));class Dn{static parse(t,e){var r;const i=[t],o=new Set;for(;i.length>0;){const t=i.pop();if("object"==typeof t&&null!==t&&!o.has(t))if(o.add(t),Array.isArray(t))for(let e=0;e<t.length;e++)i.push(t[e]);else{if(Object.keys(t).includes("shapes")){const i=t.shapes;if("object"==typeof i&&null!==i)for(const o in i)t.shapes[o]&&(t.shapes[o]=null===(r=e.find((e=>e.id===t.shapes[o])))||void 0===r?void 0:r.shape)}for(const e in t)i.push(t[e])}}return t}}var On=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class An{constructor(t,e,r,i){this.occWorkerManager=t,this.context=e,this.draw=r,this.occt=i}create(t){return On(this,void 0,void 0,(function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3d",t),r=Dn.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})}))}createTextOnFace(t){return On(this,void 0,void 0,(function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3dFace",t),r=Dn.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})}))}createTextsOnFace(t){return On(this,void 0,void 0,(function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.texts3dFace",t),r=Dn.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})}))}definition3dTextOnFace(t){return t}drawModel(t,e=.003){return On(this,void 0,void 0,(function*(){const r=new G.Entity("brepMesh"+Math.random());this.context.scene.addChild(r);const i=new Pr.DrawOcctShapeOptions;i.faceOpacity=1,i.faceColour="#ffffff",i.edgeColour="#bc7e5b",i.edgeWidth=.6,i.precision=e;const o=yield this.draw.drawAnyAsync({entity:t.compound,options:i});return r.addChild(o),r}))}getCompoundShape(t){return t.model.compound}getCharacterShape(t){if(t.index<0||t.index>=t.model.characterParts.length)throw new Error("Index is out of bounds.");return t.model.characterParts[t.index].shapes.compound}getCharacterShapes(t){return t.model.characterParts.map((t=>t.shapes.compound))}getCharacterCenterCoordinates(t){return t.model.characterCenterCoordinates}getFaceCutout(t){if(t.model.faceParts){const e=t.model.faceParts.filter((t=>t.type===qi.cutout)).map((t=>t.shapes.face));if(e.length>0)return e[0];throw new Error("No cutout was found.")}throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getAllFacesOfCutout(t){if(t.model.faceParts)return t.model.faceParts.filter((t=>t.type===qi.cutout||t.type===qi.cutoutInsideCharacter)).map((t=>t.shapes.face));throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getCutoutsInsideCharacters(t){if(t.model.faceParts)return t.model.faceParts.filter((t=>t.type===qi.cutoutInsideCharacter)).map((t=>t.shapes.face));throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getAdvanceWidth(t){return t.model.advanceWidth}}var In,Fn=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};class Ln{constructor(t,e,r,i){this.occWorkerManager=t,this.context=e,this.draw=r,this.occt=i}createPyramidSimple(t){return Fn(this,void 0,void 0,(function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.pyramidSimple",t),r=Dn.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})}))}createPyramidSimpleAffectors(t){return Fn(this,void 0,void 0,(function*(){const e=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.pyramidSimpleAffectors",t),r=Dn.parse(e.data,e.shapes);return Object.assign(Object.assign({},r),{type:e.data.type,name:e.data.name,shapes:e.shapes,compound:e.compound})}))}drawModel(t){return Fn(this,void 0,void 0,(function*(){const e=new G.Entity("brepMesh"+Math.random());this.context.scene.addChild(e);const r=new Pr.DrawOcctShapeOptions;r.faceOpacity=1,r.faceColour="#ffffff",r.edgeColour="#bc7e5b",r.edgeWidth=1,r.precision=t.originalInputs.precision;const i=yield this.draw.drawAnyAsync({entity:t.compound,options:r});return e.addChild(i),e}))}getCompoundShape(t){return t.model.compound}getCompoundShapeOnFace(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.compound;throw new Error("Face index is out of range")}getCompoundShapeCellOnFace(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length){if(t.uIndex<t.model.originalInputs.uNumber&&t.vIndex<t.model.originalInputs.vNumber){const e=t.model.faceParts[t.faceIndex].cells.find((e=>e.uIndex===t.uIndex&&e.vIndex===t.vIndex));if(e)return e.shapes.compound;throw new Error("Cell does not exist on the face")}throw new Error("Cell u or v index is out of range")}throw new Error("Face index is out of range")}getAllPyramidCells(t){return t.model.faceParts.map((t=>t.cells)).flat()}getAllPyramidCellsOnFace(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].cells;throw new Error("Face index is out of range")}getAllPyramidUCellsOnFace(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].cells;throw new Error("Face index is out of range")}getAllPyramidUCellsOnFaceAtU(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].cells.filter((e=>e.uIndex===t.uIndex));throw new Error("Face index is out of range")}getAllPyramidUCellsOnFaceAtV(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].cells.filter((e=>e.vIndex===t.vIndex));throw new Error("Face index is out of range")}getCellOnIndex(t){if(t.model.faceParts&&t.faceIndex<t.model.faceParts.length){if(t.uIndex<t.model.originalInputs.uNumber&&t.vIndex<t.model.originalInputs.vNumber){const e=t.model.faceParts[t.faceIndex].cells.find((e=>e.uIndex===t.uIndex&&e.vIndex===t.vIndex));if(e)return e;throw new Error("Cell does not exist on the face")}throw new Error("Cell u or v index is out of range")}throw new Error("Face index is out of range")}getTopPointsOfCells(t){return t.cells.map((t=>t.topPoint))}getCenterPointsOfCells(t){return t.cells.map((t=>t.centerPoint))}getCornerPointsOfCells(t){return t.cells.map((t=>[t.cornerPoint1,t.cornerPoint2,t.cornerPoint3,t.cornerPoint4].filter((t=>void 0!==t))))}getCornerPointOfCells(t){if(t.index>=0&&t.index<=3)return t.cells.map((e=>0===t.index?e.cornerPoint1:1===t.index?e.cornerPoint2:2===t.index?e.cornerPoint3:3===t.index?e.cornerPoint4:void 0));throw new Error("Corner index is out of range")}getCornerNormalOfCells(t){if(t.index>=0&&t.index<=3)return t.cells.map((e=>0===t.index?e.cornerNormal1:1===t.index?e.cornerNormal2:2===t.index?e.cornerNormal3:3===t.index?e.cornerNormal4:void 0));throw new Error("Corner index is out of range")}getCornerNormalsOfCells(t){return t.cells.map((t=>[t.cornerNormal1,t.cornerNormal2,t.cornerNormal3,t.cornerNormal4].filter((t=>void 0!==t))))}getCompoundShapesOfCells(t){return t.cells.map((t=>t.shapes.compound))}getFaceShapesOfCells(t){if(t.index>=0&&t.index<=3)return t.cells.map((e=>0===t.index?e.shapes.face1:1===t.index?e.shapes.face2:2===t.index?e.shapes.face3:3===t.index?e.shapes.face4:void 0));throw new Error("Face index is out of range")}getWireShapesOfCells(t){if(t.index>=0&&t.index<=3)return t.cells.map((e=>0===t.index?e.shapes.wire1:1===t.index?e.shapes.wire2:2===t.index?e.shapes.wire3:3===t.index?e.shapes.wire4:void 0));throw new Error("Wire index is out of range")}getStartPolylineWireU(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.startPolylineWireU;throw new Error("Face index is out of bounds")}getEndPolylineWireU(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.endPolylineWireU;throw new Error("Face index is out of bounds")}getStartPolylineWireV(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.startPolylineWireV;throw new Error("Face index is out of bounds")}getEndPolylineWireV(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.endPolylineWireV;throw new Error("Face index is out of bounds")}getPolylineWiresUCompound(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.compoundPolylineWiresU;throw new Error("Face index is out of bounds")}getPolylineWiresVCompound(t){if(t.faceIndex>=0&&t.faceIndex<t.model.faceParts.length)return t.model.faceParts[t.faceIndex].shapes.compoundPolylineWiresV;throw new Error("Face index is out of bounds")}}class Bn{constructor(t,e,r,i){this.occWorkerManager=t,this.context=e,this.draw=r,this.occt=i,this.pyramidSimple=new Ln(this.occWorkerManager,this.context,this.draw,this.occt)}}class Rn{constructor(t,e,r,i){this.occWorkerManager=t,this.context=e,this.draw=r,this.occt=i,this.facePatterns=new Bn(this.occWorkerManager,this.context,this.draw,this.occt)}}class Nn{constructor(t,e,r,i){this.occWorkerManager=t,this.context=e,this.draw=r,this.occt=i,this.text3d=new An(this.occWorkerManager,this.context,this.draw,this.occt),this.patterns=new Rn(this.occWorkerManager,this.context,this.draw,this.occt)}}!function(t){t.wingtipVilla="wingtipVilla",t.chirpyChalet="chirpyChalet",t.serenitySwirl="serenitySwirl",t.arabicArchway="arabicArchway",t.zenHideout="zenHideout",t.calmCup="calmCup",t.dragonCup="dragonCup",t.spicyBox="spicyBox",t.phoneNest="phoneNest",t.elegantTable="elegantTable",t.goodCoffeeTable="goodCoffeeTable",t.snakeChair="snakeChair",t.snakeTable="snakeTable",t.eternalLove="eternalLove",t.text3d="text3d",t.patternsFacePatternPyramidSimple="patternsFacePatternPyramidSimple"}(In||(In={}));class Un{constructor(t,e,r){void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.paths=r)}}class Vn{constructor(t,e,r){void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.chars=r)}}class jn{}class zn{}class Hn{}class qn{constructor(){this.type="text",this.name="text"}}class Gn{}class Yn extends Tr{constructor(t,e,r,i){super(t,i,e),this.drawHelper=t,this.tag=e,this.advanced=r,this.context=i}drawAnyAsync(t){const e=t.entity;if(!e||!e.type||"parametric-model"!==e.type)return super.drawAnyAsync(t);switch(t.options,e.name){case In.text3d:return this.advanced.text3d.drawModel(e);case In.patternsFacePatternPyramidSimple:return this.advanced.patterns.facePatterns.pyramidSimple.drawModel(e);default:throw new Error(`Unknown parametric model "${e.name}"`)}}optionsSimple(t){return super.optionsSimple(t)}optionsOcctShape(t){return super.optionsOcctShape(t)}}class $n extends Xi{constructor(){super(),this.advanced=new Nn(this.occtWorkerManager,this.context,this.draw,this.occt);const t=new Wr(this.context,this.jscad.text,this.vector,this.jscadWorkerManager,this.manifoldWorkerManager,this.occtWorkerManager);this.draw=new Yn(t,this.tag,this.advanced,this.context)}}var Zn,Kn=function(){return Kn=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Kn.apply(this,arguments)},Xn=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))},Jn=function(t,e){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(n=0)),n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!((o=(o=n.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(t){a=[6,t],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};!function(t){t.flat="flat"}(Zn||(Zn={}));var Qn=function(){function t(){}return t.handleBlock=function(t,e,r){},t.inputAwaiter=function(e,r,i){return Xn(this,void 0,void 0,(function(){var o,s;return Jn(this,(function(n){return o=Object.keys(e),s=[],o.forEach((function(t){if(e[t])if(e[t].then)e[t].then((function(r){return e[t]=r,r})),s.push(e[t]);else if(e[t].length&&e[t].length>0&&"string"!=typeof e[t])for(var r=function(r){var i=e[t][r];"object"==typeof i&&null!==i&&i.then&&(i.then((function(i){return e[t][r]=i,i})),s.push(e[t][r]))},i=0;i<e[t].length;i++)r(i)})),s.length>0&&t.startedAsyncTask(r,i,"#eeeeff"),s.length>0?[2,Promise.all(s).then((function(e){return t.finishedAsyncTask(r,i),e}))]:[2,null]}))}))},t.finishedAsyncTask=function(t,e){},t.startedAsyncTask=function(t,e,r){},t.runtimeValidation=function(t,e){},t.validate=function(t,e,r){},t.handleBlockException=function(t,e){},t.errorHappened=function(t,e,r){},t.updateListInputs=function(t){Object.keys(t).forEach((function(e){if(Array.isArray(t[e])){var r=[];t[e].forEach((function(t){if(t&&t.result){var e=t.result;t.transformers&&t.transformers.length&&t.transformers.forEach((function(t){t.type===Zn.flat&&(e=e.flat())})),e instanceof Array?r.push.apply(r,e):r.push(e)}})),t[e]=r}}))},t.executeBasedOnTypeAsync=function(t,e,r){return Xn(this,void 0,void 0,(function(){var i,o,s,n,a,c,h,l,u;return Jn(this,(function(d){switch(d.label){case 0:if(e)return[3,5];c=this.performActionOnAllVariationsSimplified(t,r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(c)];case 2:return i=d.sent(),[3,4];case 3:throw o=d.sent(),new Error(o);case 4:return[3,9];case 5:if(!e)return[3,9];for(s=Object.keys(t),n=s.map((function(e){return t[e]})),a=this.normalizeListsToEqualLength(n),c=[],h=function(t){var e={};s.forEach((function(r,i){e[r]=n[i][t]})),c.push(r(e,t))},l=0;l<a;l++)h(l);d.label=6;case 6:return d.trys.push([6,8,,9]),[4,Promise.all(c)];case 7:return i=d.sent(),[3,9];case 8:throw u=d.sent(),new Error(u);case 9:return[2,i]}}))}))},t.executeBasedOnType=function(t,e,r){var i;if(e){if(e){var o=Object.keys(t),s=o.map((function(e){return t[e]})),n=this.normalizeListsToEqualLength(s);try{i=[];for(var a=function(t){var e={};o.forEach((function(r,i){e[r]=s[i][t]})),i.push(r(e))},c=0;c<n;c++)a(c)}catch(t){throw new Error(t)}}}else try{i=this.performActionOnAllVariationsSimplified(t,r)}catch(t){throw new Error(t)}return i},t.performActionOnAllVariationsSimplified=function(t,e){var r=Object.keys(t),i=[],o=function(s,n){var a,c=0;if(s===r.length)return i.push(e(n,c)),void c++;for(var h=r[s],l=0,u=t[h];l<u.length;l++){var d=u[l],v=Kn(Kn({},n),((a={})[h]=d,a));o(s+1,v)}};return o(0,t),i},t.normalizeListsToEqualLength=function(t){var e=this.getLongestListLength(t);return t.forEach((function(t){if(t.length<e)for(var r=t[t.length-1],i=e-t.length,o=0;o<i;o++)t.push(r)})),e},t.getLongestListLength=function(t){var e=0;return t.forEach((function(t){t.length>e&&(e=t.length)})),e},t.drawNodeMeshes=function(t,e){return Xn(this,void 0,void 0,(function(){var r,i=this;return Jn(this,(function(o){switch(o.label){case 0:return r=t.map((function(t){return Xn(i,void 0,void 0,(function(){var r,i,o;return Jn(this,(function(s){switch(s.label){case 0:return r=t.result,i=[],r instanceof Array&&r.length>0&&r[0]&&r[0].hash?r.forEach((function(t){var r=e.draw.drawAnyAsync({entity:t,options:void 0});i.push(r)})):(o=e.draw.drawAnyAsync({entity:r,options:void 0}),i.push(o)),[4,Promise.all(i)];case 1:return[2,s.sent()]}}))}))})),[4,Promise.all(r)];case 1:return o.sent(),[2]}}))}))},t}(),ta=kt((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}));function ea(t){return function(e){if(function(t){return wt(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function ra(t,e,r,i,o){return new ia(t,e,r,i,o)}var ia=function(t){function e(e,r,i,o,s,n){var a=t.call(this,e)||this;return a.onFinalize=s,a.shouldUnsubscribe=n,a._next=r?function(t){try{r(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=o?function(t){try{o(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return mt(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Ut),oa=new Kt((function(t){return t.complete()}));function sa(){return new ta}function na(t,e){var r=arguments.length>=2;return function(i){return i.pipe(t?function(t,e){return ea((function(e,r){var i=0;e.subscribe(ra(r,(function(e){return t.call(undefined,e,i++)&&r.next(e)})))}))}((function(e,r){return t(e,r,i)})):Zt,1<=0?function(){return oa}:ea((function(t,e){var r=0;t.subscribe(ra(e,(function(t){++r<=1&&(e.next(t),1<=r&&e.complete())})))})),r?function(t){return ea((function(e,r){var i=!1;e.subscribe(ra(r,(function(t){i=!0,r.next(t)}),(function(){i||r.next(t),r.complete()})))}))}(e):(void 0===(o=function(){return new ta})&&(o=sa),ea((function(t,e){var r=!1;t.subscribe(ra(e,(function(t){r=!0,e.next(t)}),(function(){return r?e.complete():e.error(o())})))}))));var o}}var aa,ca,ha=function(){return ha=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ha.apply(this,arguments)},la=function(t,e,r,i){return new(r||(r=Promise))((function(o,s){function n(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))},ua=function(t,e){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(n=0)),n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!((o=(o=n.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(t){a=[6,t],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};!function(t){t.rete="rete",t.blockly="blockly",t.typescript="typescript"}(aa||(aa={})),function(t){t.Aboreto="Aboreto",t.Bungee="Bungee",t.IndieFlower="IndieFlower",t.Lugrasimo="Lugrasimo",t.Orbitron="Orbitron",t.Roboto="Roboto",t.RobotoSlab="RobotoSlab",t.Silkscreen="Silkscreen",t.Tektur="Tektur",t.Workbench="Workbench"}(ca||(ca={}));var da=function(){this.canvasZoneClass="canvasZone",this.enableJSCAD=!0,this.enableOCCT=!0,this.enableManifold=!0,this.enableKeyEventListeners=!0,this.cameraPosition=[0,10,-20],this.cameraTarget=[0,0,0],this.backgroundColor="#ffffff",this.loadFonts=Object.keys(ca),this.cdnUrl=Re.BITBYBIT_CDN_URL};console.log("%c Bitbybit Runner - Powering Incredible 3D Experiences (https://bitbybit.dev)","background: #1a1c1f; color: #f0cebb; padding: 4px 8px; border-radius: 4px; font-weight: bold;");var va={Things:I,Advanced:U,Inputs:q,Models:H};function fa(){return new pa}var pa=function(){function t(){var t=this;this.bitbybit=new $n,this.registerBeforeRender=function(e){t.bitbybit.context.renderLoopBag.forEach((function(t){return t(e)}))},this.initWithExternalScene=function(e,r,i){return t.app=e,t.bitbybit.context.scene=r,{app:e,scene:r,camera:i}},this.initScene=function(e){var r=new G.Application(e,{graphicsDeviceOptions:{antialias:!0,alpha:!1},mouse:new G.Mouse(e),touch:new G.TouchDevice(e)});t.app=r,r.setCanvasFillMode(G.FILLMODE_FILL_WINDOW),r.setCanvasResolution(G.RESOLUTION_AUTO),window.addEventListener("resize",(function(){return r.resizeCanvas()}));var i=new G.Entity("scene");r.root.addChild(i);var o=t.hexToRgb(t.options.backgroundColor),s=new G.Entity("camera");s.addComponent("camera",{clearColor:new G.Color(o.r,o.g,o.b,1),fov:70,nearClip:.01,farClip:1e3}),i.addChild(s);var n=new G.Entity("directionalLight");return n.addComponent("light",{type:"directional",color:new G.Color(1,.93,.93),intensity:1}),n.setEulerAngles(45,30,0),n.setPosition(35,12,-15),i.addChild(n),r.scene.ambientLight=new G.Color(.4,.4,.4),t.bitbybit.context.scene=i,r.on("update",(function(e){t.registerBeforeRender(e)})),r.start(),{app:r,scene:i,camera:s}}}return t.prototype.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:{r:1,g:1,b:1}},t.prototype.setupOrbitCamera=function(t){var e=new wr.OrbitCameraDto,r=this.options.cameraPosition,i=this.options.cameraTarget,o=r[0]-i[0],s=r[1]-i[1],n=r[2]-i[2],a=Math.sqrt(o*o+s*s+n*n),c=-Math.asin(s/a)*(180/Math.PI),h=Math.atan2(o,n)*(180/Math.PI);e.distance=a,e.pitch=c,e.yaw=h,e.frameOnStart=!1,e.inertiaFactor=.2,e.distanceSensitivity=.3,e.focusEntity=t,e.pivotPoint=i,this.bitbybit.playcanvas.camera.orbitCamera.create(e)},t.prototype.run=function(t){return la(this,void 0,void 0,(function(){var e=this;return ua(this,(function(r){return this.options=ha(ha({},new da),t),t.cdnUrl&&t.cdnUrl!==Re.BITBYBIT_CDN_URL&&(Re.BITBYBIT_CDN_URL=t.cdnUrl),[2,new Promise((function(t,r){function i(t){var e='importScripts( "'.concat(t,'" );');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}try{if(e.options.enableOCCT){var o=i(e.options.cdnUrl+"/workers/bitbybit-occt-webworker.js"),s=new Worker(o);s.postMessage({type:"initialise",loadFonts:e.options.loadFonts}),URL.revokeObjectURL(o),e.bitbybit.occtWorkerManager.setOccWorker(s)}if(e.options.enableJSCAD){var n=i(e.options.cdnUrl+"/workers/bitbybit-jscad-webworker.js"),a=new Worker(n);URL.revokeObjectURL(n),e.bitbybit.jscadWorkerManager.setJscadWorker(a)}if(e.options.enableManifold){var c=i(e.options.cdnUrl+"/workers/bitbybit-manifold-webworker.js"),h=new Worker(c);URL.revokeObjectURL(c),e.bitbybit.manifoldWorkerManager.setManifoldWorker(h)}var l,u,d;if(e.options.externalPlayCanvasSettings){var v=e.initWithExternalScene(e.options.externalPlayCanvasSettings.app,e.options.externalPlayCanvasSettings.scene,e.options.externalPlayCanvasSettings.camera);l=v.app,u=v.scene,d=v.camera}else{var f=document.getElementById(e.options.canvasId);f.addEventListener("wheel",(function(t){return t.preventDefault()})),v=e.initScene(f),l=v.app,u=v.scene,d=v.camera}e.bitbybit.init(l,u),e.setupOrbitCamera(d),e.bitbybit.context.canvasZoneClass=e.options.canvasZoneClass,e.bitbybit.context.promptPrintSave=function(t){return console.log("Print save dialog can not be opened in the runner.")},e.bitbybit.context.promptPrint=function(t){return console.log("Print dialog can not be opened in the runner.")},e.options.enableKeyEventListeners&&(document.addEventListener("keypress",(function(t){e.bitbybit.context.keyPressBag.forEach((function(e){e.key===t.key&&e.fn()}))})),document.addEventListener("keydown",(function(t){e.bitbybit.context.currentlyPressedKeys.includes(t.key)||e.bitbybit.context.currentlyPressedKeys.push(t.key),e.bitbybit.context.keyDownBag.forEach((function(e){e.key===t.key&&e.fn()}))})),document.addEventListener("keyup",(function(t){e.bitbybit.context.currentlyPressedKeys.includes(t.key)&&(e.bitbybit.context.currentlyPressedKeys=e.bitbybit.context.currentlyPressedKeys.filter((function(e){return t.key!==e}))),e.bitbybit.context.keyUpBag.forEach((function(e){e.key===t.key&&e.fn()}))})));var p=e.bitbybit.occtWorkerManager.occWorkerState$,g=e.bitbybit.jscadWorkerManager.jscadWorkerState$,m=e.bitbybit.manifoldWorkerManager.manifoldWorkerState$,b=0,y=0,P=function(){b===y&&t({bitbybit:e.bitbybit,Bit:va,scene:u,camera:d,app:l,pc:G})};e.options.enableOCCT&&(y++,p.pipe(na()).subscribe((function(t){t.state===Jt.initialised&&(b++,P())}))),e.options.enableJSCAD&&(y++,g.pipe(na()).subscribe((function(t){t.state===si.initialised&&(b++,P())}))),e.options.enableManifold&&(y++,m.pipe(na()).subscribe((function(t){t.state===Bi.initialised&&(b++,P())}))),0===y&&t({bitbybit:e.bitbybit,Bit:va,scene:u,camera:d,app:l,pc:G})}catch(t){r(t)}}))]}))}))},t.prototype.executeScript=function(t,e){return la(this,void 0,void 0,(function(){var r,i,o,s,n;return ua(this,(function(a){return r=JSON.parse(t),i=function(t){throw new Error(t)},o='\n            "use strict";\n    \n            // make all global things undefined\n    \n            const bitbybitRunnerStart = async () => {\n    \n                const bitbybitRunnerInputs = '.concat(e&&Object.keys(e).length>0?JSON.stringify(e):"{}",';\n                let bitbybitRunnerResult = {};\n                const runContext = "runner";\n                const mockBitbybitRunnerInputs = (inputs) => {\n                }\n                const getBitbybitRunnerInputs = () => {\n                    return bitbybitRunnerInputs;\n                }\n                const setBitbybitRunnerResult = (result) => {\n                    bitbybitRunnerResult = result;\n                }\n                const setBitbybitRunnerResultValue = (prop, value) => {\n                    bitbybitRunnerResult[prop] = value;\n                }\n    \n                const bitbybit = this.bitbybit;\n                const Bit = this.Bit;\n                Bit.mockBitbybitRunnerInputs = mockBitbybitRunnerInputs;\n                Bit.getBitbybitRunnerInputs = getBitbybitRunnerInputs;\n                Bit.setBitbybitRunnerResult = setBitbybitRunnerResult;\n                Bit.setBitbybitRunnerResultValue = setBitbybitRunnerResultValue;\n    \n                const BitByBit = this.BitByBit;\n                const errorHandle = this.errorHandle;\n        \n                const resolve = this.resolve;\n    \n                await ').concat(r.script,"\n                if(bitbybitRunnerResult !== undefined){\n                    resolve(bitbybitRunnerResult);\n                } else {\n                    resolve(undefined);\n                }\n            }\n            \n            bitbybitRunnerStart();\n        "),s={HS:Qn,BitByBitContextHelperService:this.bitbybit.context},n={bitbybit:this.bitbybit,pc:G,Bit:va,BitByBit:s,errorHandle:i},[2,new Promise((function(t){return n.resolve=t,new Function(o).apply(n)}))]}))}))},t.prototype.resetRunnerContext=function(t){if(void 0===t&&(t=!0),t)for(var e=this.bitbybit.context.scene;e.children.length>0;)e.children[0].destroy();var r=document.getElementById(this.options.canvasId);this.initScene(r),this.bitbybit.context.intervalBag.forEach((function(t){return clearInterval(t)})),this.bitbybit.context.timeoutBag.forEach((function(t){return clearTimeout(t)})),this.bitbybit.context.intervalBag.length=0,this.bitbybit.context.timeoutBag.length=0,this.bitbybit.context.renderLoopBag.length=0,this.bitbybit.context.keyPressBag.length=0,this.bitbybit.context.keyDownBag.length=0,this.bitbybit.context.keyUpBag.length=0},t.prototype.cleanOCCTCache=function(){return la(this,void 0,void 0,(function(){return ua(this,(function(t){return[2,this.bitbybit.occtWorkerManager.cleanAllCache()]}))}))},t.prototype.cleanJSCADCache=function(){return la(this,void 0,void 0,(function(){return ua(this,(function(t){return[2,this.bitbybit.jscadWorkerManager.cleanAllCache()]}))}))},t.prototype.cleanManifoldCache=function(){return la(this,void 0,void 0,(function(){return ua(this,(function(t){return[2,this.bitbybit.manifoldWorkerManager.cleanAllCache()]}))}))},t}()})(),o})()));