/*! For license information please see bitbybit-runner-lite-babylonjs.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("BABYLON"),require("GUI"),require("LOADERS"),require("MATERIALS"),require("SERIALIZERS")):"function"==typeof define&&define.amd?define(["BABYLON","GUI","LOADERS","MATERIALS","SERIALIZERS"],t):"object"==typeof exports?exports.bitbybitRunner=t(require("BABYLON"),require("GUI"),require("LOADERS"),require("MATERIALS"),require("SERIALIZERS")):e.bitbybitRunner=t(e.BABYLON,e.GUI,e.LOADERS,e.MATERIALS,e.SERIALIZERS)}(window,((e,t,r,i,o)=>(()=>{var n={570:e=>{"use strict";function t(e,t,n){n=n||2;var s,a,c,u,d,f,v,g=t&&t.length,m=g?t[0]*n:e.length,b=r(e,0,m,n,!0),y=[];if(!b||b.next===b.prev)return y;if(g&&(b=function(e,t,o,n){var s,a,c,u=[];for(s=0,a=t.length;s<a;s++)(c=r(e,t[s]*n,s<a-1?t[s+1]*n:e.length,n,!1))===c.next&&(c.steiner=!0),u.push(p(c));for(u.sort(h),s=0;s<u.length;s++)o=i(o=l(u[s],o),o.next);return o}(e,t,b,n)),e.length>80*n){s=c=e[0],a=u=e[1];for(var x=n;x<m;x+=n)(d=e[x])<s&&(s=d),(f=e[x+1])<a&&(a=f),d>c&&(c=d),f>u&&(u=f);v=0!==(v=Math.max(c-s,u-a))?1/v:0}return o(b,y,n,s,a,v),y}function r(e,t,r,i,o){var n,s;if(o===M(e,t,r,i)>0)for(n=t;n<r;n+=i)s=k(n,e[n],e[n+1],s);else for(n=r-i;n>=t;n-=i)s=k(n,e[n],e[n+1],s);return s&&m(s,s.next)&&(C(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!m(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(C(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function o(e,t,r,h,l,u,p){if(e){!p&&u&&function(e,t,r,i){var o=e;do{null===o.z&&(o.z=d(o.x,o.y,t,r,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,r,i,o,n,s,a,c,h=1;do{for(r=e,e=null,n=null,s=0;r;){for(s++,i=r,a=0,t=0;t<h&&(a++,i=i.nextZ);t++);for(c=h;a>0||c>0&&i;)0!==a&&(0===c||!i||r.z<=i.z)?(o=r,r=r.nextZ,a--):(o=i,i=i.nextZ,c--),n?n.nextZ=o:e=o,o.prevZ=n,n=o;r=i}n.nextZ=null,h*=2}while(s>1)}(o)}(e,h,l,u);for(var f,v,g=e;e.prev!==e.next;)if(f=e.prev,v=e.next,u?s(e,h,l,u):n(e))t.push(f.i/r),t.push(e.i/r),t.push(v.i/r),C(e),e=v.next,g=v.next;else if((e=v)===g){p?1===p?o(e=a(i(e),t,r),t,r,h,l,u,2):2===p&&c(e,t,r,h,l,u):o(i(e),t,r,h,l,u,1);break}}}function n(e){var t=e.prev,r=e,i=e.next;if(g(t,r,i)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(f(t.x,t.y,r.x,r.y,i.x,i.y,o.x,o.y)&&g(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function s(e,t,r,i){var o=e.prev,n=e,s=e.next;if(g(o,n,s)>=0)return!1;for(var a=o.x<n.x?o.x<s.x?o.x:s.x:n.x<s.x?n.x:s.x,c=o.y<n.y?o.y<s.y?o.y:s.y:n.y<s.y?n.y:s.y,h=o.x>n.x?o.x>s.x?o.x:s.x:n.x>s.x?n.x:s.x,l=o.y>n.y?o.y>s.y?o.y:s.y:n.y>s.y?n.y:s.y,u=d(a,c,t,r,i),p=d(h,l,t,r,i),v=e.prevZ,m=e.nextZ;v&&v.z>=u&&m&&m.z<=p;){if(v!==e.prev&&v!==e.next&&f(o.x,o.y,n.x,n.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,m!==e.prev&&m!==e.next&&f(o.x,o.y,n.x,n.y,s.x,s.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;v&&v.z>=u;){if(v!==e.prev&&v!==e.next&&f(o.x,o.y,n.x,n.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&f(o.x,o.y,n.x,n.y,s.x,s.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function a(e,t,r){var o=e;do{var n=o.prev,s=o.next.next;!m(n,s)&&b(n,o,o.next,s)&&w(n,s)&&w(s,n)&&(t.push(n.i/r),t.push(o.i/r),t.push(s.i/r),C(o),C(o.next),o=e=s),o=o.next}while(o!==e);return i(o)}function c(e,t,r,n,s,a){var c=e;do{for(var h=c.next.next;h!==c.prev;){if(c.i!==h.i&&v(c,h)){var l=S(c,h);return c=i(c,c.next),l=i(l,l.next),o(c,t,r,n,s,a),void o(l,t,r,n,s,a)}h=h.next}c=c.next}while(c!==e)}function h(e,t){return e.x-t.x}function l(e,t){var r=function(e,t){var r,i=t,o=e.x,n=e.y,s=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var a=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=o&&a>s){if(s=a,a===o){if(n===i.y)return i;if(n===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(o===s)return r;var c,h=r,l=r.x,d=r.y,p=1/0;i=r;do{o>=i.x&&i.x>=l&&o!==i.x&&f(n<d?o:s,n,l,d,n<d?s:o,n,i.x,i.y)&&(c=Math.abs(n-i.y)/(o-i.x),w(i,e)&&(c<p||c===p&&(i.x>r.x||i.x===r.x&&u(r,i)))&&(r=i,p=c)),i=i.next}while(i!==h);return r}(e,t);if(!r)return t;var o=S(r,e),n=i(r,r.next);return i(o,o.next),t===r?n:t}function u(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function d(e,t,r,i,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function f(e,t,r,i,o,n,s,a){return(o-s)*(t-a)-(e-s)*(n-a)>=0&&(e-s)*(i-a)-(r-s)*(t-a)>=0&&(r-s)*(n-a)-(o-s)*(i-a)>=0}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&b(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var r=e,i=!1,o=(e.x+t.x)/2,n=(e.y+t.y)/2;do{r.y>n!=r.next.y>n&&r.next.y!==r.y&&o<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,r,i){var o=x(g(e,t,r)),n=x(g(e,t,i)),s=x(g(r,i,e)),a=x(g(r,i,t));return o!==n&&s!==a||!(0!==o||!y(e,r,t))||!(0!==n||!y(e,i,t))||!(0!==s||!y(r,e,i))||!(0!==a||!y(r,t,i))}function y(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function x(e){return e>0?1:e<0?-1:0}function w(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function S(e,t){var r=new P(e.i,e.x,e.y),i=new P(t.i,t.x,t.y),o=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=o,o.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function k(e,t,r,i){var o=new P(e,t,r);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(e,t,r,i){for(var o=0,n=t,s=r-i;n<r;n+=i)o+=(e[s]-e[n])*(e[n+1]+e[s+1]),s=n;return o}e.exports=t,e.exports.default=t,t.deviation=function(e,t,r,i){var o=t&&t.length,n=o?t[0]*r:e.length,s=Math.abs(M(e,0,n,r));if(o)for(var a=0,c=t.length;a<c;a++){var h=t[a]*r,l=a<c-1?t[a+1]*r:e.length;s-=Math.abs(M(e,h,l,r))}var u=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,p=i[a+1]*r,f=i[a+2]*r;u+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,o=0;o<e.length;o++){for(var n=0;n<e[o].length;n++)for(var s=0;s<t;s++)r.vertices.push(e[o][n][s]);o>0&&(i+=e[o-1].length,r.holes.push(i))}return r}},258:e=>{e.exports=function(){var e={},t=this,r=(new Function("try {return this===window;}catch(e){ return false;}"),new Function("try {return this===global;}catch(e){return false;}")),i=new Function("try {return typeof importScripts === 'function';}catch(e){return false;}");if(r()&&i(),r()||i()){var o=t;if(i()){onmessage=function(e){if(e.data.className&&e.data.methodName){var r=(i=e.data.className,o=e.data.methodName,n=t,i.split(".").forEach((function(e){n&&(n=n[e])})),n?n[o]:null);if(!r)return console.error("could not find "+e.data.className+"."+e.data.methodName);postMessage({result:r.apply(null,e.data.args),id:e.data.id})}var i,o,n}}}return function(e,t,r){"use strict";t.geom=t.geom||{},t.exe=t.exe||{},t.eval=t.eval||{},t.core=t.core||{},t.promhx=t.promhx||{};var i={},o=function(){return T.__string_rec(this,"")};function n(e,t){function r(){}r.prototype=e;var i=new r;for(var o in t)i[o]=t[o];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}var s=function(){};i.HxOverrides=s,s.__name__=["HxOverrides"],s.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),r=new Date;return r.setTime(0),r.setUTCHours(t[0]),r.setUTCMinutes(t[1]),r.setUTCSeconds(t[2]),r;case 10:var i=e.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var o=e.split(" "),n=o[0].split("-"),s=o[1].split(":");return new Date(n[0],n[1]-1,n[2],s[0],s[1],s[2]);default:throw new M("Invalid date format : "+e)}},s.cca=function(e,t){var r=e.charCodeAt(t);if(r==r)return r},s.substr=function(e,t,r){return null!=t&&0!=t&&null!=r&&r<0?"":(null==r&&(r=e.length),t<0?(t=e.length+t)<0&&(t=0):r<0&&(r=e.length+r-t),e.substr(t,r))},s.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var a=function(){};i.Lambda=a,a.__name__=["Lambda"],a.fold=function(e,t,r){for(var i=nt(e)();i.hasNext();)r=t(i.next(),r);return r};var c=function(){this.length=0};i.List=c,c.__name__=["List"],c.prototype={add:function(e){var t=[e];null==this.h?this.h=t:this.q[1]=t,this.q=t,this.length++},pop:function(){if(null==this.h)return null;var e=this.h[0];return this.h=this.h[1],null==this.h&&(this.q=null),this.length--,e},isEmpty:function(){return null==this.h},__class__:c},Math.__name__=["Math"];var h=function(){};i.Reflect=h,h.__name__=["Reflect"],h.field=function(e,t){try{return e[t]}catch(e){return e instanceof M&&(e=e.val),null}},h.callMethod=function(e,t,r){return t.apply(e,r)},h.fields=function(e){var t=[];if(null!=e){var r=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&r.call(e,i)&&t.push(i)}return t},h.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},h.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};var l=function(){};i.Std=l,l.__name__=["Std"],l.string=function(e){return T.__string_rec(e,"")},l.parseFloat=function(e){return parseFloat(e)};var u=function(){this.b=""};i.StringBuf=u,u.__name__=["StringBuf"],u.prototype={add:function(e){this.b+=l.string(e)},__class__:u};var d=function(){};i.StringTools=d,d.__name__=["StringTools"],d.fastCodeAt=function(e,t){return e.charCodeAt(t)};var p=i.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};p.TNull=["TNull",0],p.TNull.toString=o,p.TNull.__enum__=p,p.TInt=["TInt",1],p.TInt.toString=o,p.TInt.__enum__=p,p.TFloat=["TFloat",2],p.TFloat.toString=o,p.TFloat.__enum__=p,p.TBool=["TBool",3],p.TBool.toString=o,p.TBool.__enum__=p,p.TObject=["TObject",4],p.TObject.toString=o,p.TObject.__enum__=p,p.TFunction=["TFunction",5],p.TFunction.toString=o,p.TFunction.__enum__=p,p.TClass=function(e){var t=["TClass",6,e];return t.__enum__=p,t.toString=o,t},p.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=p,t.toString=o,t},p.TUnknown=["TUnknown",8],p.TUnknown.toString=o,p.TUnknown.__enum__=p;var f=function(){};i.Type=f,f.__name__=["Type"],f.getClassName=function(e){var t=e.__name__;return null==t?null:t.join(".")},f.getEnumName=function(e){return e.__ename__.join(".")},f.resolveClass=function(e){var t=i[e];return null!=t&&t.__name__?t:null},f.resolveEnum=function(e){var t=i[e];return null!=t&&t.__ename__?t:null},f.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},f.createEnum=function(e,t,r){var i=h.field(e,t);if(null==i)throw new M("No such constructor "+t);if(h.isFunction(i)){if(null==r)throw new M("Constructor "+t+" need parameters");return h.callMethod(e,i,r)}if(null!=r&&0!=r.length)throw new M("Constructor "+t+" does not need parameters");return i},f.getEnumConstructs=function(e){return e.__constructs__.slice()},f.typeof=function(e){switch(typeof e){case"boolean":return p.TBool;case"string":return p.TClass(String);case"number":return Math.ceil(e)==e%2147483648?p.TInt:p.TFloat;case"object":if(null==e)return p.TNull;var t=e.__enum__;if(null!=t)return p.TEnum(t);var r=T.getClass(e);return null!=r?p.TClass(r):p.TObject;case"function":return e.__name__||e.__ename__?p.TObject:p.TFunction;case"undefined":return p.TNull;default:return p.TUnknown}};var v=function(){};i["haxe.IMap"]=v,v.__name__=["haxe","IMap"];var g=function(e,t){this.high=e,this.low=t};i["haxe._Int64.___Int64"]=g,g.__name__=["haxe","_Int64","___Int64"],g.prototype={__class__:g};var m=function(){this.buf=new u,this.cache=[],this.useCache=m.USE_CACHE,this.useEnumIndex=m.USE_ENUM_INDEX,this.shash=new S,this.scount=0};i["haxe.Serializer"]=m,m.__name__=["haxe","Serializer"],m.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash.get(e);if(null!=t)return this.buf.b+="R",void(this.buf.b+=null==t?"null":""+t);this.shash.set(e,this.scount++),this.buf.b+="y",null==(e=encodeURIComponent(e)).length?this.buf.b+="null":this.buf.b+=""+e.length,this.buf.b+=":",this.buf.b+=null==e?"null":""+e},serializeRef:function(e){for(var t=typeof e,r=0,i=this.cache.length;r<i;){var o=r++,n=this.cache[o];if(typeof n==t&&n==e)return this.buf.b+="r",this.buf.b+=null==o?"null":""+o,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var t=0,r=h.fields(e);t<r.length;){var i=r[t];++t,this.serializeString(i),this.serialize(h.field(e,i))}this.buf.b+="g"},serialize:function(e){var t=f.typeof(e);switch(t[1]){case 0:this.buf.b+="n";break;case 1:var r=e;if(0==r)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==r?"null":""+r;break;case 2:var i=e;isNaN(i)?this.buf.b+="k":isFinite(i)?(this.buf.b+="d",this.buf.b+=null==i?"null":""+i):this.buf.b+=i<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 6:var o=t[2];if(o==String)return void this.serializeString(e);if(this.useCache&&this.serializeRef(e))return;switch(o){case Array:var n=0;this.buf.b+="a";for(var s=e.length,a=0;a<s;){var d=a++;null==e[d]?n++:(n>0&&(1==n?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==n?"null":""+n),n=0),this.serialize(e[d]))}n>0&&(1==n?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==n?"null":""+n)),this.buf.b+="h";break;case c:this.buf.b+="l";for(var p=e.h,v=null;null!=p;){var g;v=p[0],p=p[1],g=v,this.serialize(g)}this.buf.b+="h";break;case Date:var b=e;this.buf.b+="v",this.buf.add(b.getTime());break;case S:this.buf.b+="b";for(var w=e,C=w.keys();C.hasNext();){var P=C.next();this.serializeString(P),this.serialize(null!=vt[P]?w.getReserved(P):w.h[P])}this.buf.b+="h";break;case y:this.buf.b+="q";for(var D=e,_=D.keys();_.hasNext();){var O=_.next();this.buf.b+=":",this.buf.b+=null==O?"null":""+O,this.serialize(D.h[O])}this.buf.b+="h";break;case x:this.buf.b+="M";for(var E=e,W=E.keys();W.hasNext();){var A=W.next(),I=h.field(A,"__id__");h.deleteField(A,"__id__"),this.serialize(A),A.__id__=I,this.serialize(E.h[A.__id__])}this.buf.b+="h";break;case k:for(var B=e,R=0,L=B.length-2,F=new u,U=m.BASE64;R<L;){var z=B.get(R++),N=B.get(R++),G=B.get(R++);F.add(U.charAt(z>>2)),F.add(U.charAt(63&(z<<4|N>>4))),F.add(U.charAt(63&(N<<2|G>>6))),F.add(U.charAt(63&G))}if(R==L){var V=B.get(R++),H=B.get(R++);F.add(U.charAt(V>>2)),F.add(U.charAt(63&(V<<4|H>>4))),F.add(U.charAt(H<<2&63))}else if(R==L+1){var j=B.get(R++);F.add(U.charAt(j>>2)),F.add(U.charAt(j<<4&63))}var q=F.b;this.buf.b+="s",null==q.length?this.buf.b+="null":this.buf.b+=""+q.length,this.buf.b+=":",this.buf.b+=null==q?"null":""+q;break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(f.getClassName(o)),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(f.getClassName(o)),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 4:if(T.__instanceof(e,pt)){var Z=f.getClassName(e);this.buf.b+="A",this.serializeString(Z)}else if(T.__instanceof(e,ft))this.buf.b+="B",this.serializeString(f.getEnumName(e));else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 7:var Y=t[2];if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.useEnumIndex?this.buf.b+="j":this.buf.b+="w",this.serializeString(f.getEnumName(Y)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=l.string(e[1])):this.serializeString(e[0]),this.buf.b+=":";var X=e.length;this.buf.b+=l.string(X-2);for(var K=2;K<X;){var $=K++;this.serialize(e[$])}this.useCache&&this.cache.push(e);break;case 5:throw new M("Cannot serialize function");default:throw new M("Cannot serialize "+l.string(e))}},__class__:m};var b=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=b.DEFAULT_RESOLVER;null==t&&(t=f,b.DEFAULT_RESOLVER=t),this.setResolver(t)};i["haxe.Unserializer"]=b,b.__name__=["haxe","Unserializer"],b.initCodes=function(){for(var e=[],t=0,r=b.BASE64.length;t<r;){var i=t++;e[b.BASE64.charCodeAt(i)]=i}return e},b.prototype={setResolver:function(e){this.resolver=null==e?{resolveClass:function(e){return null},resolveEnum:function(e){return null}}:e},get:function(e){return this.buf.charCodeAt(e)},readDigits:function(){for(var e=0,t=!1,r=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||i>57)break;e=10*e+(i-48),this.pos++}else{if(this.pos!=r)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(!(t>=43&&t<58||101==t||69==t))break;this.pos++}return l.parseFloat(s.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new M("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new M("Invalid object key");var r=this.unserialize();e[t]=r}this.pos++},unserializeEnum:function(e,t){if(58!=this.get(this.pos++))throw new M("Invalid enum format");var r=this.readDigits();if(0==r)return f.createEnum(e,t);for(var i=[];r-- >0;)i.push(this.unserialize());return f.createEnum(e,t,i)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:return this.readFloat();case 121:var e=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<e)throw new M("Invalid string length");var t=s.substr(this.buf,this.pos,e);return this.pos+=e,t=decodeURIComponent(t.split("+").join(" ")),this.scache.push(t),t;case 107:return NaN;case 109:return-1/0;case 112:return 1/0;case 97:this.buf;var r=[];for(this.cache.push(r);;){var i=this.buf.charCodeAt(this.pos);if(104==i){this.pos++;break}if(117==i){this.pos++;var o=this.readDigits();r[r.length+o-1]=null}else r.push(this.unserialize())}return r;case 111:var n={};return this.cache.push(n),this.unserializeObject(n),n;case 114:var a=this.readDigits();if(a<0||a>=this.cache.length)throw new M("Invalid reference");return this.cache[a];case 82:var h=this.readDigits();if(h<0||h>=this.scache.length)throw new M("Invalid string reference");return this.scache[h];case 120:throw new M(this.unserialize());case 99:var l=this.unserialize(),u=this.resolver.resolveClass(l);if(null==u)throw new M("Class not found "+l);var p=f.createEmptyInstance(u);return this.cache.push(p),this.unserializeObject(p),p;case 119:var v=this.unserialize(),g=this.resolver.resolveEnum(v);if(null==g)throw new M("Enum not found "+v);var m=this.unserializeEnum(g,this.unserialize());return this.cache.push(m),m;case 106:var w=this.unserialize(),C=this.resolver.resolveEnum(w);if(null==C)throw new M("Enum not found "+w);this.pos++;var P=this.readDigits(),T=f.getEnumConstructs(C)[P];if(null==T)throw new M("Unknown enum index "+w+"@"+P);var D=this.unserializeEnum(C,T);return this.cache.push(D),D;case 108:var _=new c;for(this.cache.push(_),this.buf;104!=this.buf.charCodeAt(this.pos);)_.add(this.unserialize());return this.pos++,_;case 98:var O=new S;for(this.cache.push(O),this.buf;104!=this.buf.charCodeAt(this.pos);){var E=this.unserialize();O.set(E,this.unserialize())}return this.pos++,O;case 113:var W=new y;this.cache.push(W),this.buf;for(var A=this.get(this.pos++);58==A;){var I=this.readDigits();W.set(I,this.unserialize()),A=this.get(this.pos++)}if(104!=A)throw new M("Invalid IntMap format");return W;case 77:var B=new x;for(this.cache.push(B),this.buf;104!=this.buf.charCodeAt(this.pos);){var R=this.unserialize();B.set(R,this.unserialize())}return this.pos++,B;case 118:var L;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)){var F=s.substr(this.buf,this.pos,19);L=s.strDate(F),this.pos+=19}else{var U=this.readFloat(),z=new Date;z.setTime(U),L=z}return this.cache.push(L),L;case 115:var N=this.readDigits(),G=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<N)throw new M("Invalid bytes length");var V=b.CODES;null==V&&(V=b.initCodes(),b.CODES=V);var H,j=this.pos,q=3&N;H=3*(N>>2)+(q>=2?q-1:0);for(var Z=j+(N-q),Y=k.alloc(H),X=0;j<Z;){var K=V[d.fastCodeAt(G,j++)],$=V[d.fastCodeAt(G,j++)];Y.set(X++,K<<2|$>>4);var Q=V[d.fastCodeAt(G,j++)];Y.set(X++,$<<4|Q>>2);var J=V[d.fastCodeAt(G,j++)];Y.set(X++,Q<<6|J)}if(q>=2){var ee=V[d.fastCodeAt(G,j++)],te=V[d.fastCodeAt(G,j++)];if(Y.set(X++,ee<<2|te>>4),3==q){var re=V[d.fastCodeAt(G,j++)];Y.set(X++,te<<4|re>>2)}}return this.pos+=N,this.cache.push(Y),Y;case 67:var ie=this.unserialize(),oe=this.resolver.resolveClass(ie);if(null==oe)throw new M("Class not found "+ie);var ne=f.createEmptyInstance(oe);if(this.cache.push(ne),ne.hxUnserialize(this),103!=this.get(this.pos++))throw new M("Invalid custom data");return ne;case 65:var se=this.unserialize(),ae=this.resolver.resolveClass(se);if(null==ae)throw new M("Class not found "+se);return ae;case 66:var ce=this.unserialize(),he=this.resolver.resolveEnum(ce);if(null==he)throw new M("Enum not found "+ce);return he}throw this.pos--,new M("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:b};var y=function(){this.h={}};i["haxe.ds.IntMap"]=y,y.__name__=["haxe","ds","IntMap"],y.__interfaces__=[v],y.prototype={set:function(e,t){this.h[e]=t},remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return s.iter(e)},__class__:y};var x=function(){this.h={},this.h.__keys__={}};i["haxe.ds.ObjectMap"]=x,x.__name__=["haxe","ds","ObjectMap"],x.__interfaces__=[v],x.prototype={set:function(e,t){var r=e.__id__||(e.__id__=++x.count);this.h[r]=t,this.h.__keys__[r]=e},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return s.iter(e)},__class__:x};var w=i["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]};w.Some=function(e){var t=["Some",0,e];return t.__enum__=w,t.toString=o,t},w.None=["None",1],w.None.toString=o,w.None.__enum__=w;var S=function(){this.h={}};i["haxe.ds.StringMap"]=S,S.__name__=["haxe","ds","StringMap"],S.__interfaces__=[v],S.prototype={set:function(e,t){null!=vt[e]?this.setReserved(e,t):this.h[e]=t},get:function(e){return null!=vt[e]?this.getReserved(e):this.h[e]},setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},keys:function(){var e=this.arrayKeys();return s.iter(e)},arrayKeys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t);if(null!=this.rh)for(var t in this.rh)36==t.charCodeAt(0)&&e.push(t.substr(1));return e},__class__:S};var k=function(e){this.length=e.byteLength,this.b=new mt(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};i["haxe.io.Bytes"]=k,k.__name__=["haxe","io","Bytes"],k.alloc=function(e){return new k(new gt(e))},k.prototype={get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},__class__:k};var C=i["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};C.Blocked=["Blocked",0],C.Blocked.toString=o,C.Blocked.__enum__=C,C.Overflow=["Overflow",1],C.Overflow.toString=o,C.Overflow.__enum__=C,C.OutsideBounds=["OutsideBounds",2],C.OutsideBounds.toString=o,C.OutsideBounds.__enum__=C,C.Custom=function(e){var t=["Custom",3,e];return t.__enum__=C,t.toString=o,t};var P=function(){};i["haxe.io.FPHelper"]=P,P.__name__=["haxe","io","FPHelper"],P.i32ToFloat=function(e){var t=e>>>23&255,r=8388607&e;return 0==r&&0==t?0:(1-(e>>>31<<1))*(1+Math.pow(2,-23)*r)*Math.pow(2,t-127)},P.floatToI32=function(e){if(0==e)return 0;var t;t=e<0?-e:e;var r=Math.floor(Math.log(t)/.6931471805599453);return r<-127?r=-127:r>128&&(r=128),(e<0?-2147483648:0)|r+127<<23|8388607&Math.round(8388608*(t/Math.pow(2,r)-1))},P.i64ToDouble=function(e,t){var r=(t>>20&2047)-1023,i=4294967296*(1048575&t)+2147483648*(e>>>31)+(2147483647&e);return 0==i&&-1023==r?0:(1-(t>>>31<<1))*(1+Math.pow(2,-52)*i)*Math.pow(2,r)},P.doubleToI64=function(e){var t=P.i64tmp;if(0==e)t.low=0,t.high=0;else{var r;r=e<0?-e:e;var i,o=Math.floor(Math.log(r)/.6931471805599453),n=4503599627370496*(r/Math.pow(2,o)-1),s=0|(i=Math.round(n)),a=i/4294967296|0;t.low=s,t.high=(e<0?-2147483648:0)|o+1023<<20|a}return t};var M=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,M)};i["js._Boot.HaxeError"]=M,M.__name__=["js","_Boot","HaxeError"],M.__super__=Error,M.prototype=n(Error.prototype,{__class__:M});var T=function(){};i["js.Boot"]=T,T.__name__=["js","Boot"],T.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var r=T.__nativeClassName(e);return null!=r?T.__resolveNativeClass(r):null},T.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var r=typeof e;switch("function"==r&&(e.__name__||e.__ename__)&&(r="object"),r){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+"(";t+="\t";for(var o=2,n=e.length;o<n;){var s=o++;i+=2!=s?","+T.__string_rec(e[s],t):T.__string_rec(e[s],t)}return i+")"}var a=e.length,c="[";t+="\t";for(var h=0;h<a;){var l=h++;c+=(l>0?",":"")+T.__string_rec(e[l],t)}return c+"]"}var u;try{u=e.toString}catch(e){return e instanceof M&&(e=e.val),"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var d=e.toString();if("[object Object]"!=d)return d}var p=null,f="{\n";t+="\t";var v=null!=e.hasOwnProperty;for(var p in e)v&&!e.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=f.length&&(f+=", \n"),f+=t+p+" : "+T.__string_rec(e[p],t));return f+"\n"+(t=t.substring(1))+"}";case"function":return"<function>";case"string":return e;default:return String(e)}},T.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var r=e.__interfaces__;if(null!=r)for(var i=0,o=r.length;i<o;){var n=r[i++];if(n==t||T.__interfLoop(n,t))return!0}return T.__interfLoop(e.__super__,t)},T.__instanceof=function(e,t){if(null==t)return!1;switch(t){case ht:return(0|e)===e;case ut:return"number"==typeof e;case dt:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case lt:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(T.__interfLoop(T.getClass(e),t))return!0}else if("object"==typeof t&&T.__isNativeObj(t)&&e instanceof t)return!0;return t==pt&&null!=e.__name__||t==ft&&null!=e.__ename__||e.__enum__==t}},T.__nativeClassName=function(e){var t=T.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},T.__isNativeObj=function(e){return null!=T.__nativeClassName(e)},T.__resolveNativeClass=function(e){return r[e]};var D=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{var t=e;this.a=[];for(var r=0;r<t;){var i=r++;this.a[i]=0}this.byteLength=t}};i["js.html.compat.ArrayBuffer"]=D,D.__name__=["js","html","compat","ArrayBuffer"],D.sliceImpl=function(e,t){var r=new mt(this,e,null==t?null:t-e),i=new gt(r.byteLength);return new mt(i).set(r),i},D.prototype={slice:function(e,t){return new D(this.a.slice(e,t))},__class__:D};var _=function(e,t,r){if(this.buf=e,this.offset=null==t?0:t,this.length=null==r?e.byteLength-this.offset:r,this.offset<0||this.length<0||this.offset+this.length>e.byteLength)throw new M(C.OutsideBounds)};i["js.html.compat.DataView"]=_,_.__name__=["js","html","compat","DataView"],_.prototype={getInt8:function(e){var t=this.buf.a[this.offset+e];return t>=128?t-256:t},getUint8:function(e){return this.buf.a[this.offset+e]},getInt16:function(e,t){var r=this.getUint16(e,t);return r>=32768?r-65536:r},getUint16:function(e,t){return t?this.buf.a[this.offset+e]|this.buf.a[this.offset+e+1]<<8:this.buf.a[this.offset+e]<<8|this.buf.a[this.offset+e+1]},getInt32:function(e,t){var r=this.offset+e,i=this.buf.a[r++],o=this.buf.a[r++],n=this.buf.a[r++],s=this.buf.a[r++];return t?i|o<<8|n<<16|s<<24:s|n<<8|o<<16|i<<24},getUint32:function(e,t){var r=this.getInt32(e,t);return r<0?r+4294967296:r},getFloat32:function(e,t){return P.i32ToFloat(this.getInt32(e,t))},getFloat64:function(e,t){var r=this.getInt32(e,t),i=this.getInt32(e+4,t);return P.i64ToDouble(t?r:i,t?i:r)},setInt8:function(e,t){this.buf.a[e+this.offset]=t<0?t+128&255:255&t},setUint8:function(e,t){this.buf.a[e+this.offset]=255&t},setInt16:function(e,t,r){this.setUint16(e,t<0?t+65536:t,r)},setUint16:function(e,t,r){var i=e+this.offset;r?(this.buf.a[i]=255&t,this.buf.a[i++]=t>>8&255):(this.buf.a[i++]=t>>8&255,this.buf.a[i]=255&t)},setInt32:function(e,t,r){this.setUint32(e,t,r)},setUint32:function(e,t,r){var i=e+this.offset;r?(this.buf.a[i++]=255&t,this.buf.a[i++]=t>>8&255,this.buf.a[i++]=t>>16&255,this.buf.a[i++]=t>>>24):(this.buf.a[i++]=t>>>24,this.buf.a[i++]=t>>16&255,this.buf.a[i++]=t>>8&255,this.buf.a[i++]=255&t)},setFloat32:function(e,t,r){this.setUint32(e,P.floatToI32(t),r)},setFloat64:function(e,t,r){var i=P.doubleToI64(t);r?(this.setUint32(e,i.low),this.setUint32(e,i.high)):(this.setUint32(e,i.high),this.setUint32(e,i.low))},__class__:_};var O=function(){};i["js.html.compat.Uint8Array"]=O,O.__name__=["js","html","compat","Uint8Array"],O._new=function(e,t,r){var i;if("number"==typeof e){i=[];for(var o=0;o<e;)i[o++]=0;i.byteLength=i.length,i.byteOffset=0,i.buffer=new D(i)}else if(T.__instanceof(e,D)){var n=e;null==t&&(t=0),null==r&&(r=n.byteLength-t),(i=0==t?n.a:n.a.slice(t,t+r)).byteLength=i.length,i.byteOffset=t,i.buffer=n}else{if(!(e instanceof Array&&null==e.__enum__))throw new M("TODO "+l.string(e));(i=e.slice()).byteLength=i.length,i.byteOffset=0,i.buffer=new D(i)}return i.subarray=O._subarray,i.set=O._set,i},O._set=function(e,t){var r=this;if(T.__instanceof(e.buffer,D)){var i=e;if(e.byteLength+t>r.byteLength)throw new M("set() outside of range");for(var o=0,n=e.byteLength;o<n;){var s=o++;r[s+t]=i[s]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new M("TODO");var a=e;if(a.length+t>r.byteLength)throw new M("set() outside of range");for(var c=0,h=a.length;c<h;){var l=c++;r[l+t]=a[l]}}},O._subarray=function(e,t){var r=O._new(this.slice(e,t));return r.byteOffset=e,r};var E=function(e){this._resolved=!1,this._pending=!1,this._errorPending=!1,this._fulfilled=!1,this._update=[],this._error=[],this._errored=!1,null!=e&&E.link(e,this,(function(e){return e}))};i["promhx.base.AsyncBase"]=E,E.__name__=["promhx","base","AsyncBase"],E.link=function(e,t,r){e._update.push({async:t,linkf:function(e){t.handleResolve(r(e))}}),E.immediateLinkUpdate(e,t,r)},E.immediateLinkUpdate=function(e,t,r){if(!e._errored||e._errorPending||e._error.length>0||t.handleError(e._errorVal),e._resolved&&!e._pending)try{t.handleResolve(r(e._val))}catch(e){e instanceof M&&(e=e.val),t.handleError(e)}},E.linkAll=function(e,t){for(var r=function(r,i,o){if(0==r.length||E.allFulfilled(r)){for(var n,s=[],a=nt(e)();a.hasNext();){var c=a.next();s.push(c==i?o:c._val)}n=s,t.handleResolve(n)}},i=nt(e)();i.hasNext();){var o=i.next();o._update.push({async:t,linkf:function(e,t,r){return function(i){e(t,r,i)}}(r,function(t){for(var r=[],i=nt(e)();i.hasNext();){var n=i.next();n!=o&&r.push(n)}return r}(),o)})}E.allFulfilled(e)&&t.handleResolve(function(t){for(var r=[],i=nt(e)();i.hasNext();){var o=i.next();r.push(o._val)}return r}())},E.pipeLink=function(e,t,r){var i=!1,o=function(e){if(!i){i=!0;var o=r(e);o._update.push({async:t,linkf:ct(t,t.handleResolve)}),E.immediateLinkUpdate(o,t,(function(e){return e}))}};if(e._update.push({async:t,linkf:o}),e._resolved&&!e._pending)try{o(e._val)}catch(e){e instanceof M&&(e=e.val),t.handleError(e)}},E.allResolved=function(e){for(var t=nt(e)();t.hasNext();)if(!t.next()._resolved)return!1;return!0},E.allFulfilled=function(e){for(var t=nt(e)();t.hasNext();)if(!t.next()._fulfilled)return!1;return!0},E.prototype={catchError:function(e){return this._error.push(e),this},errorThen:function(e){return this._errorMap=e,this},isResolved:function(){return this._resolved},isErrored:function(){return this._errored},isErrorHandled:function(){return this._error.length>0},isErrorPending:function(){return this._errorPending},isFulfilled:function(){return this._fulfilled},isPending:function(){return this._pending},handleResolve:function(e){this._resolve(e)},_resolve:function(e){var t,r,i=this;this._pending?R.enqueue((t=ct(this,this._resolve),r=e,function(){t(r)})):(this._resolved=!0,this._pending=!0,R.queue.add((function(){i._val=e;for(var t=0,r=i._update;t<r.length;){var o=r[t];++t;try{o.linkf(e)}catch(e){e instanceof M&&(e=e.val),o.async.handleError(e)}}i._fulfilled=!0,i._pending=!1})),R.continueOnNextLoop())},handleError:function(e){this._handleError(e)},_handleError:function(e){var t=this,r=function(e){if(t._error.length>0)for(var r=0,i=t._error;r<i.length;){var o=i[r];++r,o(e)}else{if(!(t._update.length>0))throw new M(e);for(var n=0,s=t._update;n<s.length;){var a=s[n];++n,a.async.handleError(e)}}t._errorPending=!1};this._errorPending||(this._errorPending=!0,this._errored=!0,this._errorVal=e,R.queue.add((function(){if(null!=t._errorMap)try{t._resolve(t._errorMap(e))}catch(e){e instanceof M&&(e=e.val),r(e)}else r(e)})),R.continueOnNextLoop())},then:function(e){var t=new E(null);return E.link(this,t,e),t},unlink:function(e){var t=this;R.queue.add((function(){t._update=t._update.filter((function(t){return t.async!=e}))})),R.continueOnNextLoop()},isLinked:function(e){for(var t=0,r=this._update;t<r.length;){var i=r[t];if(++t,i.async==e)return!0}return!1},__class__:E};var W=t.promhx.Deferred=function(){E.call(this)};i["promhx.Deferred"]=W,W.__name__=["promhx","Deferred"],W.__super__=E,W.prototype=n(E.prototype,{resolve:function(e){this.handleResolve(e)},throwError:function(e){this.handleError(e)},promise:function(){return new A(this)},stream:function(){return new I(this)},publicStream:function(){return new B(this)},__class__:W});var A=t.promhx.Promise=function(e){E.call(this,e),this._rejected=!1};i["promhx.Promise"]=A,A.__name__=["promhx","Promise"],A.whenAll=function(e){var t=new A(null);return E.linkAll(e,t),t},A.promise=function(e){var t=new A;return t.handleResolve(e),t},A.__super__=E,A.prototype=n(E.prototype,{isRejected:function(){return this._rejected},reject:function(e){this._rejected=!0,this.handleError(e)},handleResolve:function(e){if(this._resolved){throw new M(L.AlreadyResolved("Promise has already been resolved"))}this._resolve(e)},then:function(e){var t=new A(null);return E.link(this,t,e),t},unlink:function(e){var t=this;R.queue.add((function(){if(t._fulfilled)t._update=t._update.filter((function(t){return t.async!=e}));else{t.handleError(L.DownstreamNotFullfilled("Downstream Promise is not fullfilled"))}})),R.continueOnNextLoop()},handleError:function(e){this._rejected=!0,this._handleError(e)},pipe:function(e){var t=new A(null);return E.pipeLink(this,t,e),t},errorPipe:function(e){var t=new A;return this.catchError((function(r){e(r).then(ct(t,t._resolve))})),this.then(ct(t,t._resolve)),t},__class__:A});var I=t.promhx.Stream=function(e){E.call(this,e),this._end_promise=new A};i["promhx.Stream"]=I,I.__name__=["promhx","Stream"],I.foreach=function(e){for(var t=new I(null),r=nt(e)();r.hasNext();){var i=r.next();t.handleResolve(i)}return t.end(),t},I.wheneverAll=function(e){var t=new I(null);return E.linkAll(e,t),t},I.concatAll=function(e){for(var t=new I(null),r=nt(e)();r.hasNext();){var i=r.next();t.concat(i)}return t},I.mergeAll=function(e){for(var t=new I(null),r=nt(e)();r.hasNext();){var i=r.next();t.merge(i)}return t},I.stream=function(e){var t=new I(null);return t.handleResolve(e),t},I.__super__=E,I.prototype=n(E.prototype,{then:function(e){var t=new I(null);return E.link(this,t,e),this._end_promise._update.push({async:t._end_promise,linkf:function(e){t.end()}}),t},detachStream:function(e){for(var t=[],r=!1,i=0,o=this._update;i<o.length;){var n=o[i];++i,n.async==e?(this._end_promise._update=this._end_promise._update.filter((function(t){return t.async!=e._end_promise})),r=!0):t.push(n)}return this._update=t,r},first:function(){var e=new A(null);return this.then((function(t){e._resolved||e.handleResolve(t)})),e},handleResolve:function(e){this._end||this._pause||this._resolve(e)},pause:function(e){null==e&&(e=!this._pause),this._pause=e},pipe:function(e){var t=new I(null);return E.pipeLink(this,t,e),this._end_promise.then((function(e){t.end()})),t},errorPipe:function(e){var t=new I(null);return this.catchError((function(r){var i=e(r);i.then(ct(t,t._resolve)),i._end_promise.then(ct(st=t._end_promise,st._resolve))})),this.then(ct(t,t._resolve)),this._end_promise.then((function(e){t.end()})),t},handleEnd:function(){if(this._pending)R.queue.add(ct(this,this.handleEnd)),R.continueOnNextLoop();else{if(this._end_promise._resolved)return;var e;this._end=!0,e=this._resolved?w.Some(this._val):w.None,this._end_promise.handleResolve(e),this._update=[],this._error=[]}},end:function(){return R.queue.add(ct(this,this.handleEnd)),R.continueOnNextLoop(),this},endThen:function(e){return this._end_promise.then(e)},filter:function(e){var t=new I(null);return this._update.push({async:t,linkf:function(r){e(r)&&t.handleResolve(r)}}),E.immediateLinkUpdate(this,t,(function(e){return e})),t},concat:function(e){var t=new I(null);return this._update.push({async:t,linkf:ct(t,t.handleResolve)}),E.immediateLinkUpdate(this,t,(function(e){return e})),this._end_promise.then((function(r){e.pipe((function(e){return t.handleResolve(e),t})),e._end_promise.then((function(e){t.end()}))})),t},merge:function(e){var t=new I(null);return this._update.push({async:t,linkf:ct(t,t.handleResolve)}),e._update.push({async:t,linkf:ct(t,t.handleResolve)}),E.immediateLinkUpdate(this,t,(function(e){return e})),E.immediateLinkUpdate(e,t,(function(e){return e})),t},__class__:I});var B=t.promhx.PublicStream=function(e){I.call(this,e)};i["promhx.PublicStream"]=B,B.__name__=["promhx","PublicStream"],B.publicstream=function(e){var t=new B(null);return t.handleResolve(e),t},B.__super__=I,B.prototype=n(I.prototype,{resolve:function(e){this.handleResolve(e)},throwError:function(e){this.handleError(e)},update:function(e){this.handleResolve(e)},__class__:B});var R=function(){};i["promhx.base.EventLoop"]=R,R.__name__=["promhx","base","EventLoop"],R.enqueue=function(e){R.queue.add(e),R.continueOnNextLoop()},R.set_nextLoop=function(e){if(null!=R.nextLoop)throw new M("nextLoop has already been set");return R.nextLoop=e,R.nextLoop},R.queueEmpty=function(){return R.queue.isEmpty()},R.finish=function(e){null==e&&(e=1e3);for(var t=null;e-- >0&&null!=(t=R.queue.pop());)t();return R.queue.isEmpty()},R.clear=function(){R.queue=new c},R.f=function(){var e=R.queue.pop();null!=e&&e(),R.queue.isEmpty()||R.continueOnNextLoop()},R.continueOnNextLoop=function(){null!=R.nextLoop?R.nextLoop(R.f):setImmediate(R.f)};var L=i["promhx.error.PromiseError"]={__ename__:["promhx","error","PromiseError"],__constructs__:["AlreadyResolved","DownstreamNotFullfilled"]};L.AlreadyResolved=function(e){var t=["AlreadyResolved",0,e];return t.__enum__=L,t.toString=o,t},L.DownstreamNotFullfilled=function(e){var t=["DownstreamNotFullfilled",1,e];return t.__enum__=L,t.toString=o,t};var F=function(){};i["verb.Verb"]=F,F.__name__=["verb","Verb"],F.main=function(){e.log("verb 2.1.0")};var U=function(){};i["verb.core.ArrayExtensions"]=U,U.__name__=["verb","core","ArrayExtensions"],U.alloc=function(e,t){if(!(t<0))for(;e.length<t;)e.push(null)},U.reversed=function(e){var t=e.slice();return t.reverse(),t},U.last=function(e){return e[e.length-1]},U.first=function(e){return e[0]},U.spliceAndInsert=function(e,t,r,i){e.splice(t,r),e.splice(t,0,i)},U.left=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(0,t)},U.right=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(t)},U.rightWithPivot=function(e){if(0==e.length)return[];var t=Math.ceil(e.length/2);return e.slice(t-1)},U.unique=function(e,t){if(0==e.length)return[];for(var r=[e.pop()];e.length>0;){for(var i=e.pop(),o=!0,n=0;n<r.length;){var s=r[n];if(++n,t(i,s)){o=!1;break}}o&&r.push(i)}return r};var z=function(){};i["verb.core.Binomial"]=z,z.__name__=["verb","core","Binomial"],z.get=function(e,t){if(0==t)return 1;if(0==e||t>e)return 0;if(t>e-t&&(t=e-t),z.memo_exists(e,t))return z.get_memo(e,t);for(var r=1,i=e,o=1,n=t+1;o<n;){var s=o++;z.memo_exists(i,s)?(e--,r=z.get_memo(i,s)):(r*=e--,z.memoize(i,s,r/=s))}return r},z.get_no_memo=function(e,t){if(0==t)return 1;if(0==e||t>e)return 0;t>e-t&&(t=e-t);for(var r=1,i=1,o=t+1;i<o;)r*=e--,r/=i++;return r},z.memo_exists=function(e,t){return z.memo.h.hasOwnProperty(e)&&z.memo.h[e].h.hasOwnProperty(t)},z.get_memo=function(e,t){return z.memo.h[e].h[t]},z.memoize=function(e,t,r){z.memo.h.hasOwnProperty(e)||z.memo.set(e,new y),z.memo.h[e].h[t]=r};var N=t.core.BoundingBox=function(e){this.max=null,this.min=null,this.dim=3,this.initialized=!1,null!=e&&this.addRange(e)};i["verb.core.BoundingBox"]=N,N.__name__=["verb","core","BoundingBox"],N.intervalsOverlap=function(e,t,r,i,o){var n;null==o&&(o=-1),n=o<-.5?G.TOLERANCE:o;var s=Math.min(e,t)-n,a=Math.max(e,t)+n,c=Math.min(r,i)-n,h=Math.max(r,i)+n;return s>=c&&s<=h||a>=c&&a<=h||c>=s&&c<=a||h>=s&&h<=a},N.prototype={fromPoint:function(e){return new N([e])},add:function(e){if(!this.initialized)return this.dim=e.length,this.min=e.slice(0),this.max=e.slice(0),this.initialized=!0,this;for(var t=0,r=this.dim;t<r;){var i=t++;e[i]>this.max[i]&&(this.max[i]=e[i]),e[i]<this.min[i]&&(this.min[i]=e[i])}return this},addRange:function(e){for(var t=e.length,r=0;r<t;){var i=r++;this.add(e[i])}return this},contains:function(e,t){return null==t&&(t=-1),!!this.initialized&&this.intersects(new N([e]),t)},intersects:function(e,t){if(null==t&&(t=-1),!this.initialized||!e.initialized)return!1;for(var r=this.min,i=this.max,o=e.min,n=e.max,s=0,a=this.dim;s<a;){var c=s++;if(!N.intervalsOverlap(r[c],i[c],o[c],n[c],t))return!1}return!0},clear:function(){return this.initialized=!1,this},getLongestAxis:function(){for(var e=0,t=0,r=0,i=this.dim;r<i;){var o=r++,n=this.getAxisLength(o);n>e&&(e=n,t=o)}return t},getAxisLength:function(e){return e<0||e>this.dim-1?0:Math.abs(this.min[e]-this.max[e])},intersect:function(e,t){if(!this.initialized)return null;var r=this.min,i=this.max,o=e.min,n=e.max;if(!this.intersects(e,t))return null;for(var s=[],a=[],c=0,h=this.dim;c<h;){var l=c++;s.push(Math.min(i[l],n[l])),a.push(Math.max(r[l],o[l]))}return new N([a,s])},__class__:N};var G=t.core.Constants=function(){};i["verb.core.Constants"]=G,G.__name__=["verb","core","Constants"];var V=t.core.SerializableBase=function(){};i["verb.core.SerializableBase"]=V,V.__name__=["verb","core","SerializableBase"],V.prototype={serialize:function(){var e=new m;return e.serialize(this),e.toString()},__class__:V};var H=t.core.Plane=function(e,t){this.origin=e,this.normal=t};i["verb.core.Plane"]=H,H.__name__=["verb","core","Plane"],H.__super__=V,H.prototype=n(V.prototype,{__class__:H});var j=t.core.Ray=function(e,t){this.origin=e,this.dir=t};i["verb.core.Ray"]=j,j.__name__=["verb","core","Ray"],j.__super__=V,j.prototype=n(V.prototype,{__class__:j});var q=t.core.NurbsCurveData=function(e,t,r){this.degree=e,this.controlPoints=r,this.knots=t};i["verb.core.NurbsCurveData"]=q,q.__name__=["verb","core","NurbsCurveData"],q.__super__=V,q.prototype=n(V.prototype,{__class__:q});var Z=t.core.NurbsSurfaceData=function(e,t,r,i,o){this.degreeU=e,this.degreeV=t,this.knotsU=r,this.knotsV=i,this.controlPoints=o};i["verb.core.NurbsSurfaceData"]=Z,Z.__name__=["verb","core","NurbsSurfaceData"],Z.__super__=V,Z.prototype=n(V.prototype,{__class__:Z});var Y=t.core.MeshData=function(e,t,r,i){this.faces=e,this.points=t,this.normals=r,this.uvs=i};i["verb.core.MeshData"]=Y,Y.__name__=["verb","core","MeshData"],Y.empty=function(){return new Y([],[],[],[])},Y.__super__=V,Y.prototype=n(V.prototype,{__class__:Y});var X=t.core.PolylineData=function(e,t){this.points=e,this.params=t};i["verb.core.PolylineData"]=X,X.__name__=["verb","core","PolylineData"],X.__super__=V,X.prototype=n(V.prototype,{__class__:X});var K=t.core.VolumeData=function(e,t,r,i,o,n,s){this.degreeU=e,this.degreeV=t,this.degreeW=r,this.knotsU=i,this.knotsV=o,this.knotsW=n,this.controlPoints=s};i["verb.core.VolumeData"]=K,K.__name__=["verb","core","VolumeData"],K.__super__=V,K.prototype=n(V.prototype,{__class__:K});var $=t.core.Pair=function(e,t){this.item0=e,this.item1=t};i["verb.core.Pair"]=$,$.__name__=["verb","core","Pair"],$.prototype={__class__:$};var Q=t.core.Interval=function(e,t){this.min=e,this.max=t};i["verb.core.Interval"]=Q,Q.__name__=["verb","core","Interval"],Q.prototype={__class__:Q};var J=t.core.CurveCurveIntersection=function(e,t,r,i){this.point0=e,this.point1=t,this.u0=r,this.u1=i};i["verb.core.CurveCurveIntersection"]=J,J.__name__=["verb","core","CurveCurveIntersection"],J.prototype={__class__:J};var ee=t.core.CurveSurfaceIntersection=function(e,t,r,i){this.u=e,this.uv=t,this.curvePoint=r,this.surfacePoint=i};i["verb.core.CurveSurfaceIntersection"]=ee,ee.__name__=["verb","core","CurveSurfaceIntersection"],ee.prototype={__class__:ee};var te=t.core.MeshIntersectionPoint=function(e,t,r,i,o){this.visited=!1,this.adj=null,this.opp=null,this.uv0=e,this.uv1=t,this.point=r,this.faceIndex0,this.faceIndex1};i["verb.core.MeshIntersectionPoint"]=te,te.__name__=["verb","core","MeshIntersectionPoint"],te.prototype={__class__:te};var re=t.core.PolylineMeshIntersection=function(e,t,r,i,o){this.point=e,this.u=t,this.uv=r,this.polylineIndex=i,this.faceIndex=o};i["verb.core.PolylineMeshIntersection"]=re,re.__name__=["verb","core","PolylineMeshIntersection"],re.prototype={__class__:re};var ie=t.core.SurfaceSurfaceIntersectionPoint=function(e,t,r,i){this.uv0=e,this.uv1=t,this.point=r,this.dist=i};i["verb.core.SurfaceSurfaceIntersectionPoint"]=ie,ie.__name__=["verb","core","SurfaceSurfaceIntersectionPoint"],ie.prototype={__class__:ie};var oe=t.core.TriSegmentIntersection=function(e,t,r,i){this.point=e,this.s=t,this.t=r,this.p=i};i["verb.core.TriSegmentIntersection"]=oe,oe.__name__=["verb","core","TriSegmentIntersection"],oe.prototype={__class__:oe};var ne=t.core.CurveTriPoint=function(e,t,r){this.u=e,this.point=t,this.uv=r};i["verb.core.CurveTriPoint"]=ne,ne.__name__=["verb","core","CurveTriPoint"],ne.prototype={__class__:ne};var se=function(e,t,r,i,o){null==o&&(o=!1),null==i&&(i=-1),this.uv=r,this.point=e,this.normal=t,this.id=i,this.degen=o};i["verb.core.SurfacePoint"]=se,se.__name__=["verb","core","SurfacePoint"],se.fromUv=function(e,t){return new se(null,null,[e,t])},se.prototype={__class__:se};var ae=t.core.CurvePoint=function(e,t){this.u=e,this.pt=t};i["verb.core.CurvePoint"]=ae,ae.__name__=["verb","core","CurvePoint"],ae.prototype={__class__:ae};var ce=t.core.KdTree=function(e,t){this.dim=3,this.points=e,this.distanceFunction=t,this.dim=e[0].point.length,this.root=this.buildTree(e,0,null)};i["verb.core.KdTree"]=ce,ce.__name__=["verb","core","KdTree"],ce.prototype={buildTree:function(e,t,r){var i,o,n=t%this.dim;return 0==e.length?null:1==e.length?new ue(e[0],n,r):(e.sort((function(e,t){var r=e.point[n]-t.point[n];return 0==r?0:r>0?1:-1})),i=Math.floor(e.length/2),(o=new ue(e[i],n,r)).left=this.buildTree(e.slice(0,i),t+1,o),o.right=this.buildTree(e.slice(i+1),t+1,o),o)},nearest:function(e,t,r){var i,o=this,n=new he((function(e){return-e.item1})),s=null;i=s=function(r){for(var i,a,c,h,l=r.dimension,u=o.distanceFunction(e,r.kdPoint.point),d=[],p=0,f=o.dim;p<f;)p++,d.push(0);a=d;for(var v=function(e,r){n.push(new $(e,r)),n.size()>t&&n.pop()},g=0,m=o.dim;g<m;){var b=g++;b==r.dimension?a[b]=e[b]:a[b]=r.kdPoint.point[b]}c=o.distanceFunction(a,r.kdPoint.point),null!=r.right||null!=r.left?(i=null==r.right?r.left:null==r.left?r.right:e[l]<r.kdPoint.point[l]?r.left:r.right,s(i),(n.size()<t||u<n.peek().item1)&&v(r,u),(n.size()<t||Math.abs(c)<n.peek().item1)&&null!=(h=i==r.left?r.right:r.left)&&s(h)):(n.size()<t||u<n.peek().item1)&&v(r,u)};for(var a=0;a<t;)a++,n.push(new $(null,r));i(this.root);for(var c=[],h=0;h<t;){var l=h++;null!=n.content[l].item0&&c.push(new $(n.content[l].item0.kdPoint,n.content[l].item1))}return c},__class__:ce};var he=function(e){this.content=[],this.scoreFunction=e};i["verb.core.BinaryHeap"]=he,he.__name__=["verb","core","BinaryHeap"],he.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,r=0;r<t;){var i=r++;if(this.content[i]==e){var o=this.content.pop();return void(i!=t-1&&(this.content[i]=o,this.scoreFunction(o)<this.scoreFunction(e)?this.bubbleUp(i):this.sinkDown(i)))}}throw new M("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var r=Math.floor((e+1)/2)-1,i=this.content[r];if(!(this.scoreFunction(t)<this.scoreFunction(i)))break;this.content[r]=t,this.content[e]=i,e=r}},sinkDown:function(e){for(var t=this.content.length,r=this.content[e],i=this.scoreFunction(r);;){var o=2*(e+1),n=o-1,s=-1,a=0;if(n<t){var c=this.content[n];(a=this.scoreFunction(c))<i&&(s=n)}if(o<t){var h=this.content[o];this.scoreFunction(h)<(-1==s?i:a)&&(s=o)}if(-1==s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}},__class__:he};var le=t.core.KdPoint=function(e,t){this.point=e,this.obj=t};i["verb.core.KdPoint"]=le,le.__name__=["verb","core","KdPoint"],le.prototype={__class__:le};var ue=t.core.KdNode=function(e,t,r){this.kdPoint=e,this.left=null,this.right=null,this.parent=r,this.dimension=t};i["verb.core.KdNode"]=ue,ue.__name__=["verb","core","KdNode"],ue.prototype={__class__:ue};var de=function(){};i["verb.eval.IBoundingBoxTree"]=de,de.__name__=["verb","eval","IBoundingBoxTree"],de.prototype={__class__:de};var pe=function(e,t){this._boundingBox=null,this._curve=e,null==t&&(t=Me.domain(this._curve.knots)/64),this._knotTol=t};i["verb.core.LazyCurveBoundingBoxTree"]=pe,pe.__name__=["verb","core","LazyCurveBoundingBoxTree"],pe.__interfaces__=[de],pe.prototype={split:function(){var e=U.first(this._curve.knots),t=U.last(this._curve.knots),r=t-e,i=Oe.curveSplit(this._curve,(t+e)/2+.1*r*Math.random());return new $(new pe(i[0],this._knotTol),new pe(i[1],this._knotTol))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new N(We.dehomogenize1d(this._curve.controlPoints))),this._boundingBox},yield:function(){return this._curve},indivisible:function(e){return Me.domain(this._curve.knots)<this._knotTol},empty:function(){return!1},__class__:pe};var fe=function(e,t){if(this._boundingBox=null,this._mesh=e,null==t){for(var r=[],i=0,o=e.faces.length;i<o;){var n=i++;r.push(n)}t=r}this._faceIndices=t};i["verb.core.LazyMeshBoundingBoxTree"]=fe,fe.__name__=["verb","core","LazyMeshBoundingBoxTree"],fe.__interfaces__=[de],fe.prototype={split:function(){var e=ye.sortTrianglesOnLongestAxis(this.boundingBox(),this._mesh,this._faceIndices),t=U.left(e),r=U.right(e);return new $(new fe(this._mesh,t),new fe(this._mesh,r))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=ye.makeMeshAabb(this._mesh,this._faceIndices)),this._boundingBox},yield:function(){return this._faceIndices[0]},indivisible:function(e){return 1==this._faceIndices.length},empty:function(){return 0==this._faceIndices.length},__class__:fe};var ve=function(e,t){this._boundingBox=null,this._polyline=e,null==t&&(t=new Q(0,0!=e.points.length?e.points.length-1:0)),this._interval=t};i["verb.core.LazyPolylineBoundingBoxTree"]=ve,ve.__name__=["verb","core","LazyPolylineBoundingBoxTree"],ve.__interfaces__=[de],ve.prototype={split:function(){var e=this._interval.min,t=this._interval.max,r=e+Math.ceil((t-e)/2),i=new Q(e,r),o=new Q(r,t);return new $(new ve(this._polyline,i),new ve(this._polyline,o))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new N(this._polyline.points)),this._boundingBox},yield:function(){return this._interval.min},indivisible:function(e){return this._interval.max-this._interval.min==1},empty:function(){return this._interval.max-this._interval.min==0},__class__:ve};var ge=function(e,t,r,i){null==t&&(t=!1),this._boundingBox=null,this._surface=e,this._splitV=t,null==r&&(r=Me.domain(e.knotsU)/16),null==i&&(i=Me.domain(e.knotsV)/16),this._knotTolU=r,this._knotTolV=i};i["verb.core.LazySurfaceBoundingBoxTree"]=ge,ge.__name__=["verb","core","LazySurfaceBoundingBoxTree"],ge.__interfaces__=[de],ge.prototype={split:function(){var e,t;this._splitV?(e=U.first(this._surface.knotsV),t=U.last(this._surface.knotsV)):(e=U.first(this._surface.knotsU),t=U.last(this._surface.knotsU));var r=(e+t)/2,i=Oe.surfaceSplit(this._surface,r,this._splitV);return new $(new ge(i[0],!this._splitV,this._knotTolU,this._knotTolV),new ge(i[1],!this._splitV,this._knotTolU,this._knotTolV))},boundingBox:function(){if(null==this._boundingBox){this._boundingBox=new N;for(var e=0,t=this._surface.controlPoints;e<t.length;){var r=t[e];++e,this._boundingBox.addRange(We.dehomogenize1d(r))}}return this._boundingBox},yield:function(){return this._surface},indivisible:function(e){return Me.domain(this._surface.knotsV)<this._knotTolV&&Me.domain(this._surface.knotsU)<this._knotTolU},empty:function(){return!1},__class__:ge};var me=t.core.Mat=function(){};i["verb.core.Mat"]=me,me.__name__=["verb","core","Mat"],me.mul=function(e,t){for(var r=[],i=0,o=t.length;i<o;){var n=i++;r.push(Me.mul(e,t[n]))}return r},me.mult=function(e,t){var r,i,o,n,s,a,c,h;r=e.length,i=t.length,o=t[0].length,n=[];for(var l=r-1,u=0,d=0;l>=0;){for(s=[],a=e[l],d=o-1;d>=0;){for(c=a[i-1]*t[i-1][d],u=i-2;u>=1;)h=u-1,c+=a[u]*t[u][d]+a[h]*t[h][d],u-=2;0==u&&(c+=a[0]*t[0][d]),s[d]=c,d--}n[l]=s,l--}return n},me.add=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(Me.add(e[n],t[n]))}return r},me.div=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(Me.div(e[n],t))}return r},me.sub=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(Me.sub(e[n],t[n]))}return r},me.dot=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(Me.dot(e[n],t))}return r},me.identity=function(e){for(var t=Me.zeros2d(e,e),r=0;r<e;){var i=r++;t[i][i]=1}return t},me.transpose=function(e){if(0==e.length)return[];for(var t=[],r=0,i=e[0].length;r<i;){var o=r++;t.push(function(t){for(var r=[],i=0,n=e.length;i<n;){var s=i++;r.push(e[s][o])}return r}())}return t},me.solve=function(e,t){return me.LUsolve(me.LU(e),t)},me.LUsolve=function(e,t){var r,i,o,n,s,a=e.LU,c=a.length,h=t.slice(),l=e.P;for(r=c-1;-1!=r;)h[r]=t[r],--r;for(r=0;r<c;){for(o=l[r],l[r]!=r&&(s=h[r],h[r]=h[o],h[o]=s),n=a[r],i=0;i<r;)h[r]-=h[i]*n[i],++i;++r}for(r=c-1;r>=0;){for(n=a[r],i=r+1;i<c;)h[r]-=h[i]*n[i],++i;h[r]/=n[r],--r}return h},me.LU=function(e){Math.abs;for(var t,r,i,o,n,s,a,c,h,l=[],u=0,d=e.length;u<d;){var p=u++;l.push(e[p].slice())}var f=(e=l).length,v=f-1,g=[];for(i=0;i<f;){for(a=i,s=e[i],h=Math.abs(s[i]),r=i+1;r<f;)h<(o=Math.abs(e[r][i]))&&(h=o,a=r),++r;for(g[i]=a,a!=i&&(e[i]=e[a],e[a]=s,s=e[i]),n=s[i],t=i+1;t<f;)e[t][i]/=n,++t;for(t=i+1;t<f;){for(c=e[t],r=i+1;r<v;)c[r]-=c[i]*s[r],c[++r]-=c[i]*s[r],++r;r==v&&(c[r]-=c[i]*s[r]),++t}++i}return new be(e,g)};var be=function(e,t){this.LU=e,this.P=t};i["verb.core._Mat.LUDecomp"]=be,be.__name__=["verb","core","_Mat","LUDecomp"],be.prototype={__class__:be};var ye=t.core.Mesh=function(){};i["verb.core.Mesh"]=ye,ye.__name__=["verb","core","Mesh"],ye.getTriangleNorm=function(e,t){var r=e[t[0]],i=e[t[1]],o=e[t[2]],n=Me.sub(i,r),s=Me.sub(o,r),a=Me.cross(n,s);return Me.mul(1/Me.norm(a),a)},ye.makeMeshAabb=function(e,t){for(var r=new N,i=0;i<t.length;){var o=t[i];++i,r.add(e.points[e.faces[o][0]]),r.add(e.points[e.faces[o][1]]),r.add(e.points[e.faces[o][2]])}return r},ye.sortTrianglesOnLongestAxis=function(e,t,r){for(var i=e.getLongestAxis(),o=[],n=0;n<r.length;){var s=r[n];++n;var a=ye.getMinCoordOnAxis(t.points,t.faces[s],i);o.push(new $(a,s))}o.sort((function(e,t){var r=e.item0,i=t.item0;return r==i?0:r>i?1:-1}));for(var c=[],h=0,l=o.length;h<l;){var u=h++;c.push(o[u].item1)}return c},ye.getMinCoordOnAxis=function(e,t,r){for(var i=1/0,o=0;o<3;){var n=e[t[o++]][r];n<i&&(i=n)}return i},ye.getTriangleCentroid=function(e,t){for(var r=[0,0,0],i=0;i<3;)for(var o=i++,n=0;n<3;){var s=n++;r[s]+=e[t[o]][s]}for(var a=0;a<3;)r[a++]/=3;return r},ye.triangleUVFromPoint=function(e,t,r){var i=e.faces[t],o=e.points[i[0]],n=e.points[i[1]],s=e.points[i[2]],a=e.uvs[i[0]],c=e.uvs[i[1]],h=e.uvs[i[2]],l=Me.sub(o,r),u=Me.sub(n,r),d=Me.sub(s,r),p=Me.norm(Me.cross(Me.sub(o,n),Me.sub(o,s))),f=Me.norm(Me.cross(u,d))/p,v=Me.norm(Me.cross(d,l))/p,g=Me.norm(Me.cross(l,u))/p;return Me.add(Me.mul(f,a),Me.add(Me.mul(v,c),Me.mul(g,h)))};var xe=function(e,t){if(this._empty=!1,this._face=-1,null==t){for(var r=[],i=0,o=e.faces.length;i<o;){var n=i++;r.push(n)}t=r}if(this._boundingBox=ye.makeMeshAabb(e,t),t.length<1)this._empty=!0;else if(t.length<2)this._face=t[0];else{var s=ye.sortTrianglesOnLongestAxis(this._boundingBox,e,t),a=U.left(s),c=U.right(s);this._children=new $(new xe(e,a),new xe(e,c))}};i["verb.core.MeshBoundingBoxTree"]=xe,xe.__name__=["verb","core","MeshBoundingBoxTree"],xe.__interfaces__=[de],xe.prototype={split:function(){return this._children},boundingBox:function(){return this._boundingBox},yield:function(){return this._face},indivisible:function(e){return null==this._children},empty:function(){return this._empty},__class__:xe};var we=t.core.Minimizer=function(){};i["verb.core.Minimizer"]=we,we.__name__=["verb","core","Minimizer"],we.uncmin=function(e,t,r,i,o){null==r&&(r=1e-8),null==i&&(i=function(t){return we.numericalGradient(e,t)}),null==o&&(o=1e3);var n,s,a,c,h=(t=t.slice(0)).length,l=e(t),u=l;if(isNaN(l))throw new M("uncmin: f(x0) is a NaN!");r=Math.max(r,G.EPSILON);var d,p,f,v,g,m,b=me.identity(h),y=0,x=[],w="";for(a=i(t);y<o;){if(!Me.all(Me.finite(a))){w="Gradient has Infinity or NaN";break}if(s=Me.neg(me.dot(b,a)),!Me.all(Me.finite(s))){w="Search direction has Infinity or NaN";break}if((m=Me.norm(s))<r){w="Newton step smaller than tol";break}for(g=1,n=Me.dot(a,s),d=t;y<o&&!(g*m<r)&&(x=Me.mul(g,s),d=Me.add(t,x),(u=e(d))-l>=.1*g*n||isNaN(u));)g*=.5,++y;if(g*m<r){w="Line search step size smaller than tol";break}if(y==o){w="maxit reached during line search";break}c=i(d),p=Me.sub(c,a),v=Me.dot(p,x),f=me.dot(b,p),b=me.sub(me.add(b,me.mul((v+Me.dot(p,f))/(v*v),we.tensor(x,x))),me.div(me.add(we.tensor(f,x),we.tensor(x,f)),v)),t=d,l=u,a=c,++y}return new Se(t,l,a,b,y,w)},we.numericalGradient=function(e,t){var r=t.length,i=e(t);if(NaN==i)throw new M("gradient: f(x) is a NaN!");for(var o,n,s,a,c,h,l,u,d=t.slice(0),p=[],f=0,v=0;v<r;)for(var g=v++,m=Math.max(1e-6*i,1e-8);;){if(++f>20)throw new M("Numerical gradient fails");if(d[g]=t[g]+m,o=e(d),d[g]=t[g]-m,n=e(d),d[g]=t[g],isNaN(o)||isNaN(n))m/=16;else{if(p[g]=(o-n)/(2*m),s=t[g]-m,a=t[g],c=t[g]+m,h=(o-i)/m,l=(i-n)/m,u=Me.max([Math.abs(p[g]),Math.abs(i),Math.abs(o),Math.abs(n),Math.abs(s),Math.abs(a),Math.abs(c),1e-8]),!(Math.min(Me.max([Math.abs(h-p[g]),Math.abs(l-p[g]),Math.abs(h-l)])/u,m/u)>.001))break;m/=16}}return p},we.tensor=function(e,t){for(var r,i,o=e.length,n=t.length,s=[],a=o-1;a>=0;){r=[],i=e[a];for(var c=n-1;c>=3;)r[c]=i*t[c],r[--c]=i*t[c],r[--c]=i*t[c],r[--c]=i*t[c],--c;for(;c>=0;)r[c]=i*t[c],--c;s[a]=r,a--}return s};var Se=function(e,t,r,i,o,n){this.solution=e,this.value=t,this.gradient=r,this.invHessian=i,this.iterations=o,this.message=n};i["verb.core.MinimizationResult"]=Se,Se.__name__=["verb","core","MinimizationResult"],Se.prototype={__class__:Se};var ke=function(){};i["verb.core.ISerializable"]=ke,ke.__name__=["verb","core","ISerializable"],ke.prototype={__class__:ke};var Ce=t.core.Deserializer=function(){};i["verb.core.Deserializer"]=Ce,Ce.__name__=["verb","core","Deserializer"],Ce.deserialize=function(e){return new b(e).unserialize()};var Pe=t.core.Trig=function(){};i["verb.core.Trig"]=Pe,Pe.__name__=["verb","core","Trig"],Pe.isPointInPlane=function(e,t,r){return Math.abs(Me.dot(Me.sub(e,t.origin),t.normal))<r},Pe.distToSegment=function(e,t,r){var i=Pe.segmentClosestPoint(t,e,r,0,1);return Me.dist(t,i.pt)},Pe.rayClosestPoint=function(e,t,r){var i=Me.sub(e,t),o=Me.dot(i,r);return Me.add(t,Me.mul(o,r))},Pe.distToRay=function(e,t,r){var i=Pe.rayClosestPoint(e,t,r),o=Me.sub(i,e);return Me.norm(o)},Pe.threePointsAreFlat=function(e,t,r,i){var o=Me.sub(t,e),n=Me.sub(r,e),s=Me.cross(o,n);return Me.dot(s,s)<i},Pe.segmentClosestPoint=function(e,t,r,i,o){var n=Me.sub(r,t),s=Me.norm(n);if(s<G.EPSILON)return{u:i,pt:t};var a=t,c=Me.mul(1/s,n),h=Me.sub(e,a),l=Me.dot(h,c);return l<0?{u:i,pt:t}:l>s?{u:o,pt:r}:{u:i+(o-i)*l/s,pt:Me.add(a,Me.mul(l,c))}};var Me=t.core.Vec=function(){};i["verb.core.Vec"]=Me,Me.__name__=["verb","core","Vec"],Me.angleBetween=function(e,t){return Math.acos(Me.dot(e,t)/(Me.norm(e)*Me.norm(t)))},Me.positiveAngleBetween=function(e,t,r){var i=Me.cross(e,t),o=Me.norm(e)*Me.norm(t),n=Me.dot(e,t),s=Me.norm(i)/o,a=n/o,c=Math.atan2(s,a),h=Me.dot(r,i);return Math.abs(h)<G.EPSILON||h>0?c:-c},Me.signedAngleBetween=function(e,t,r){var i=Me.cross(e,t),o=Me.norm(e)*Me.norm(t),n=Me.dot(e,t),s=Me.norm(i)/o,a=n/o,c=Math.atan2(s,a);return Me.dot(r,i)>0?c:2*Math.PI-c},Me.angleBetweenNormalized2d=function(e,t){var r=e[0]*t[1]-e[1]*t[0];return Math.atan2(r,Me.dot(e,t))},Me.domain=function(e){return U.last(e)-U.first(e)},Me.range=function(e){for(var t=[],r=0,i=0;i<e;)i++,t.push(r),r+=1;return t},Me.span=function(e,t,r){if(null==r)return[];if(r<G.EPSILON)return[];if(e>t&&r>0)return[];if(t>e&&r<0)return[];for(var i=[],o=e;o<=t;)i.push(o),o+=r;return i},Me.neg=function(e){return e.map((function(e){return-e}))},Me.min=function(e){return a.fold(e,(function(e,t){return Math.min(e,t)}),1/0)},Me.max=function(e){return a.fold(e,(function(e,t){return Math.max(e,t)}),-1/0)},Me.all=function(e){return a.fold(e,(function(e,t){return t&&e}),!0)},Me.finite=function(e){return e.map((function(e){return isFinite(e)}))},Me.onRay=function(e,t,r){return Me.add(e,Me.mul(r,t))},Me.lerp=function(e,t,r){return Me.add(Me.mul(e,t),Me.mul(1-e,r))},Me.normalized=function(e){return Me.div(e,Me.norm(e))},Me.cross=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},Me.dist=function(e,t){return Me.norm(Me.sub(e,t))},Me.distSquared=function(e,t){return Me.normSquared(Me.sub(e,t))},Me.sum=function(e){return a.fold(e,(function(e,t){return t+e}),0)},Me.addAll=function(e){var t=nt(e)();if(!t.hasNext())return null;var r=t.next().length;return a.fold(e,(function(e,t){return Me.add(t,e)}),Me.rep(r,0))},Me.addAllMutate=function(e){for(var t=e[0],r=1,i=e.length;r<i;){var o=r++;Me.addMutate(t,e[o])}},Me.addMulMutate=function(e,t,r){for(var i=0,o=e.length;i<o;){var n=i++;e[n]=e[n]+t*r[n]}},Me.subMulMutate=function(e,t,r){for(var i=0,o=e.length;i<o;){var n=i++;e[n]=e[n]-t*r[n]}},Me.addMutate=function(e,t){for(var r=0,i=e.length;r<i;){var o=r++;e[o]=e[o]+t[o]}},Me.subMutate=function(e,t){for(var r=0,i=e.length;r<i;){var o=r++;e[o]=e[o]-t[o]}},Me.mulMutate=function(e,t){for(var r=0,i=t.length;r<i;){var o=r++;t[o]=t[o]*e}},Me.norm=function(e){var t=Me.normSquared(e);return 0!=t?Math.sqrt(t):t},Me.normSquared=function(e){return a.fold(e,(function(e,t){return t+e*e}),0)},Me.rep=function(e,t){for(var r=[],i=0;i<e;)i++,r.push(t);return r},Me.zeros1d=function(e){for(var t=[],r=0;r<e;)r++,t.push(0);return t},Me.zeros2d=function(e,t){for(var r=[],i=0;i<e;)i++,r.push(Me.zeros1d(t));return r},Me.zeros3d=function(e,t,r){for(var i=[],o=0;o<e;)o++,i.push(Me.zeros2d(t,r));return i},Me.dot=function(e,t){for(var r=0,i=0,o=e.length;i<o;){var n=i++;r+=e[n]*t[n]}return r},Me.add=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(e[n]+t[n])}return r},Me.mul=function(e,t){for(var r=[],i=0,o=t.length;i<o;){var n=i++;r.push(e*t[n])}return r},Me.div=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(e[n]/t)}return r},Me.sub=function(e,t){for(var r=[],i=0,o=e.length;i<o;){var n=i++;r.push(e[n]-t[n])}return r},Me.isZero=function(e){for(var t=0,r=e.length;t<r;){var i=t++;if(Math.abs(e[i])>G.TOLERANCE)return!1}return!0},Me.sortedSetUnion=function(e,t){for(var r=[],i=0,o=0;i<e.length||o<t.length;)if(i>=e.length)r.push(t[o]),o++;else if(o>=t.length)r.push(e[i]),i++;else{var n=e[i]-t[o];Math.abs(n)<G.EPSILON?(r.push(e[i]),i++,o++):n>0?(r.push(t[o]),o++):(r.push(e[i]),i++)}return r},Me.sortedSetSub=function(e,t){for(var r=[],i=0,o=0;i<e.length;)o>=t.length?(r.push(e[i]),i++):Math.abs(e[i]-t[o])<G.EPSILON?(i++,o++):(r.push(e[i]),i++);return r};var Te=t.eval.Analyze=function(){};i["verb.eval.Analyze"]=Te,Te.__name__=["verb","eval","Analyze"],Te.knotMultiplicities=function(e){for(var t=[new De(e[0],0)],r=t[0],i=0;i<e.length;){var o=e[i];++i,Math.abs(o-r.knot)>G.EPSILON&&(r=new De(o,0),t.push(r)),r.inc()}return t},Te.isRationalSurfaceClosed=function(e,t){var r;null==t&&(t=!0);for(var i=0,o=(r=t?e.controlPoints:me.transpose(e.controlPoints))[0].length;i<o;){var n=i++;if(!(Me.dist(U.first(r)[n],U.last(r)[n])<G.EPSILON))return!1}return!0},Te.rationalSurfaceClosestPoint=function(e,t){var r=Te.rationalSurfaceClosestParam(e,t);return We.rationalSurfacePoint(e,r[0],r[1])},Te.rationalSurfaceClosestParam=function(e,t){for(var r,i,o,n=0,s=1e-4,a=5e-4,c=e.knotsU[0],h=U.last(e.knotsU),l=e.knotsV[0],u=U.last(e.knotsV),d=Te.isRationalSurfaceClosed(e),p=Te.isRationalSurfaceClosed(e,!1),f=Re.rationalSurfaceAdaptive(e,new Le),v=1/0,g=0,m=f.points.length;g<m;){var b=g++,y=f.points[b],x=Me.normSquared(Me.sub(t,y));x<v&&(v=x,o=f.uvs[b])}for(;n<5;){z=o,r=We.rationalSurfaceDerivatives(e,z[0],z[1],2),i=Me.sub(r[0][0],t);var w=Me.norm(i),S=Me.dot(r[1][0],i),k=Me.norm(r[1][0])*w,C=Me.dot(r[0][1],i),P=Me.norm(r[0][1])*w;if(w<s&&S/k<a&&C/P<a)return o;var M=(T=o,_=i,O=void 0,E=void 0,W=void 0,A=void 0,I=void 0,B=void 0,R=void 0,L=void 0,F=void 0,O=(D=r)[1][0],E=D[0][1],W=D[2][0],A=D[0][2],I=D[1][1],B=D[1][1],R=[-Me.dot(O,_),-Me.dot(E,_)],L=[[Me.dot(O,O)+Me.dot(W,_),Me.dot(O,E)+Me.dot(I,_)],[Me.dot(O,E)+Me.dot(B,_),Me.dot(E,E)+Me.dot(A,_)]],F=me.solve(L,R),Me.add(F,T));if(M[0]<c?M=d?[h-(M[0]-c),M[1]]:[c+G.EPSILON,M[1]]:M[0]>h&&(M=d?[c+(M[0]-h),M[1]]:[h-G.EPSILON,M[1]]),M[1]<l?M=p?[M[0],u-(M[1]-l)]:[M[0],l+G.EPSILON]:M[1]>u&&(M=p?[M[0],l+(M[0]-u)]:[M[0],u-G.EPSILON]),Me.norm(Me.mul(M[0]-o[0],r[1][0]))+Me.norm(Me.mul(M[1]-o[1],r[0][1]))<s)return o;o=M,n++}var T,D,_,O,E,W,A,I,B,R,L,F,z;return o},Te.rationalCurveClosestPoint=function(e,t){return We.rationalCurvePoint(e,Te.rationalCurveClosestParam(e,t))},Te.rationalCurveClosestParam=function(e,t){for(var r=1/0,i=0,o=Re.rationalCurveRegularSample(e,e.controlPoints.length*e.degree,!0),n=0,s=o.length-1;n<s;){var a=n++,c=o[a][0],h=o[a+1][0],l=o[a].slice(1),u=o[a+1].slice(1),d=Pe.segmentClosestPoint(t,l,u,c,h),p=Me.norm(Me.sub(t,d.pt));p<r&&(r=p,i=d.u)}for(var f,v,g=0,m=1e-4,b=e.knots[0],y=U.last(e.knots),x=Me.normSquared(Me.sub(e.controlPoints[0],U.last(e.controlPoints)))<G.EPSILON,w=i;g<5;){_=w,f=We.rationalCurveDerivatives(e,_,2),v=Me.sub(f[0],t);var S=Me.norm(v),k=Me.dot(f[1],v)/(Me.norm(f[1])*S),C=S<m,P=Math.abs(k)<5e-4;if(C&&P)return w;var M=(T=f,D=v,w-Me.dot(T[1],D)/(Me.dot(T[2],D)+Me.dot(T[1],T[1])));if(M<b?M=x?y-(M-b):b:M>y&&(M=x?b+(M-y):y),Me.norm(Me.mul(M-w,f[1]))<m)return w;w=M,g++}var T,D,_;return w},Te.rationalCurveParamAtArcLength=function(e,t,r,i,o){if(null==r&&(r=.001),t<G.EPSILON)return e.knots[0];var n,s,a=0,c=((n=null!=i?i:Be.decomposeCurveIntoBeziers(e))[a],-G.EPSILON);for(s=null!=o?o:[];c<t&&a<n.length;){if(a<s.length?s[a]=s[a]:s[a]=Te.rationalBezierCurveArcLength(e),t<(c+=s[a])+G.EPSILON)return Te.rationalBezierCurveParamAtArcLength(e,t,r,s[a]);a++}return-1},Te.rationalBezierCurveParamAtArcLength=function(e,t,r,i){if(t<0)return e.knots[0];var o;if(t>(o=null!=i?i:Te.rationalBezierCurveArcLength(e)))return U.last(e.knots);var n,s=e.knots[0],a=0,c=U.last(e.knots),h=o,l=0,u=0;for(n=null!=r?r:2*G.TOLERANCE;h-a>n;)l=(s+c)/2,(u=Te.rationalBezierCurveArcLength(e,l))>t?(c=l,h=u):(s=l,a=u);return(s+c)/2},Te.rationalCurveArcLength=function(e,t,r){null==r&&(r=16),null==t&&(t=U.last(e.knots));for(var i=Be.decomposeCurveIntoBeziers(e),o=0,n=i[0],s=0;o<i.length&&n.knots[0]+G.EPSILON<t;){var a=Math.min(U.last(n.knots),t);s+=Te.rationalBezierCurveArcLength(n,a,r),n=i[++o]}return s},Te.rationalBezierCurveArcLength=function(e,t,r){null==r&&(r=16);for(var i,o,n=((null==t?U.last(e.knots):t)-e.knots[0])/2,s=0,a=e.degree+r,c=0;c<a;){var h=c++;i=n*Te.Tvalues[a][h]+n+e.knots[0],o=We.rationalCurveDerivatives(e,i,1),s+=Te.Cvalues[a][h]*Me.norm(o[1])}return n*s};var De=t.eval.KnotMultiplicity=function(e,t){this.knot=e,this.mult=t};i["verb.eval.KnotMultiplicity"]=De,De.__name__=["verb","eval","KnotMultiplicity"],De.prototype={inc:function(){this.mult++},__class__:De};var _e=t.eval.Check=function(){};i["verb.eval.Check"]=_e,_e.__name__=["verb","eval","Check"],_e.isValidKnotVector=function(e,t){if(0==e.length)return!1;if(e.length<2*(t+1))return!1;for(var r=U.first(e),i=0,o=t+1;i<o;){var n=i++;if(Math.abs(e[n]-r)>G.EPSILON)return!1}r=U.last(e);for(var s=e.length-t-1,a=e.length;s<a;){var c=s++;if(Math.abs(e[c]-r)>G.EPSILON)return!1}return _e.isNonDecreasing(e)},_e.isNonDecreasing=function(e){for(var t=U.first(e),r=0,i=e.length;r<i;){var o=r++;if(e[o]<t-G.EPSILON)return!1;t=e[o]}return!0},_e.isValidNurbsCurveData=function(e){if(null==e.controlPoints)throw new M("Control points array cannot be null!");if(null==e.degree)throw new M("Degree cannot be null!");if(e.degree<1)throw new M("Degree must be greater than 1!");if(null==e.knots)throw new M("Knots cannot be null!");if(e.knots.length!=e.controlPoints.length+e.degree+1)throw new M("controlPoints.length + degree + 1 must equal knots.length!");if(!_e.isValidKnotVector(e.knots,e.degree))throw new M("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return e},_e.isValidNurbsSurfaceData=function(e){if(null==e.controlPoints)throw new M("Control points array cannot be null!");if(null==e.degreeU)throw new M("DegreeU cannot be null!");if(null==e.degreeV)throw new M("DegreeV cannot be null!");if(e.degreeU<1)throw new M("DegreeU must be greater than 1!");if(e.degreeV<1)throw new M("DegreeV must be greater than 1!");if(null==e.knotsU)throw new M("KnotsU cannot be null!");if(null==e.knotsV)throw new M("KnotsV cannot be null!");if(e.knotsU.length!=e.controlPoints.length+e.degreeU+1)throw new M("controlPointsU.length + degreeU + 1 must equal knotsU.length!");if(e.knotsV.length!=e.controlPoints[0].length+e.degreeV+1)throw new M("controlPointsV.length + degreeV + 1 must equal knotsV.length!");if(!_e.isValidKnotVector(e.knotsU,e.degreeU)||!_e.isValidKnotVector(e.knotsV,e.degreeV))throw new M("Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!");return e};var Oe=t.eval.Divide=function(){};i["verb.eval.Divide"]=Oe,Oe.__name__=["verb","eval","Divide"],Oe.surfaceSplit=function(e,t,r){var i,o,n,s;null==r&&(r=!1),r?(n=e.controlPoints,i=e.knotsV,o=e.degreeV):(n=me.transpose(e.controlPoints),i=e.knotsU,o=e.degreeU);for(var a=[],c=0,h=o+1;c<h;)c++,a.push(t);s=a;for(var l=[],u=[],d=We.knotSpan(o,t,i),p=null,f=0;f<n.length;){var v=n[f];++f,p=Be.curveKnotRefine(new q(o,i,v),s),l.push(p.controlPoints.slice(0,d+1)),u.push(p.controlPoints.slice(d+1))}var g=p.knots.slice(0,d+o+2),m=p.knots.slice(d+1);return r?[new Z(e.degreeU,o,e.knotsU.slice(),g,l),new Z(e.degreeU,o,e.knotsU.slice(),m,u)]:(l=me.transpose(l),u=me.transpose(u),[new Z(o,e.degreeV,g,e.knotsV.slice(),l),new Z(o,e.degreeV,m,e.knotsV.slice(),u)])},Oe.curveSplit=function(e,t){for(var r,i=e.degree,o=(e.controlPoints,e.knots),n=[],s=0,a=i+1;s<a;)s++,n.push(t);r=n;var c=Be.curveKnotRefine(e,r),h=We.knotSpan(i,t,o),l=c.knots.slice(0,h+i+2),u=c.knots.slice(h+1),d=c.controlPoints.slice(0,h+1),p=c.controlPoints.slice(h+1);return[new q(i,l,d),new q(i,u,p)]},Oe.rationalCurveByEqualArcLength=function(e,t){var r=Te.rationalCurveArcLength(e)/t;return Oe.rationalCurveByArcLength(e,r)},Oe.rationalCurveByArcLength=function(e,t){var r=Be.decomposeCurveIntoBeziers(e),i=r.map((function(e){return Te.rationalBezierCurveArcLength(e)})),o=Me.sum(i),n=[new Ee(e.knots[0],0)];if(t>o)return n;for(var s,a=t,c=0,h=a,l=0,u=0;c<r.length;){for(l+=i[c];h<l+G.EPSILON;)s=Te.rationalBezierCurveParamAtArcLength(r[c],h-u,G.TOLERANCE,i[c]),n.push(new Ee(s,h)),h+=a;u+=i[c],c++}return n};var Ee=t.eval.CurveLengthSample=function(e,t){this.u=e,this.len=t};i["verb.eval.CurveLengthSample"]=Ee,Ee.__name__=["verb","eval","CurveLengthSample"],Ee.prototype={__class__:Ee};var We=t.eval.Eval=function(){};i["verb.eval.Eval"]=We,We.__name__=["verb","eval","Eval"],We.rationalCurveTangent=function(e,t){return We.rationalCurveDerivatives(e,t,1)[1]},We.rationalSurfaceNormal=function(e,t,r){var i=We.rationalSurfaceDerivatives(e,t,r,1);return Me.cross(i[1][0],i[0][1])},We.rationalSurfaceDerivatives=function(e,t,r,i){null==i&&(i=1);for(var o=We.surfaceDerivatives(e,t,r,i),n=We.rational2d(o),s=We.weight2d(o),a=[],c=n[0][0].length,h=0,l=i+1;h<l;){var u=h++;a.push([]);for(var d=0,p=i-u+1;d<p;){for(var f=d++,v=n[u][f],g=1,m=f+1;g<m;){var b=g++;Me.subMulMutate(v,z.get(f,b)*s[0][b],a[u][f-b])}for(var y=1,x=u+1;y<x;){var w=y++;Me.subMulMutate(v,z.get(u,w)*s[w][0],a[u-w][f]);for(var S=Me.zeros1d(c),k=1,C=f+1;k<C;){var P=k++;Me.addMulMutate(S,z.get(f,P)*s[w][P],a[u-w][f-P])}Me.subMulMutate(v,z.get(u,w),S)}Me.mulMutate(1/s[0][0],v),a[u].push(v)}}return a},We.rationalSurfacePoint=function(e,t,r){return We.dehomogenize(We.surfacePoint(e,t,r))},We.rationalCurveDerivatives=function(e,t,r){null==r&&(r=1);for(var i=We.curveDerivatives(e,t,r),o=We.rational1d(i),n=We.weight1d(i),s=[],a=0,c=r+1;a<c;){for(var h=a++,l=o[h],u=1,d=h+1;u<d;){var p=u++;Me.subMulMutate(l,z.get(h,p)*n[p],s[h-p])}Me.mulMutate(1/n[0],l),s.push(l)}return s},We.rationalCurvePoint=function(e,t){return We.dehomogenize(We.curvePoint(e,t))},We.surfaceDerivatives=function(e,t,r,i){var o=e.knotsU.length-e.degreeU-2,n=e.knotsV.length-e.degreeV-2;return We.surfaceDerivativesGivenNM(o,n,e,t,r,i)},We.surfaceDerivativesGivenNM=function(e,t,r,i,o,n){var s=r.degreeU,a=r.degreeV,c=r.controlPoints,h=r.knotsU,l=r.knotsV;if(!We.areValidRelations(s,c.length,h.length)||!We.areValidRelations(a,c[0].length,l.length))throw new M("Invalid relations between control points, knot vector, and n");var u,d,p=c[0][0].length;u=n<s?n:s,d=n<a?n:a;for(var f=Me.zeros3d(n+1,n+1,p),v=We.knotSpanGivenN(e,s,i,h),g=We.knotSpanGivenN(t,a,o,l),m=We.derivativeBasisFunctionsGivenNI(v,i,s,e,h),b=We.derivativeBasisFunctionsGivenNI(g,o,a,t,l),y=Me.zeros2d(a+1,p),x=0,w=u+1;x<w;){for(var S=x++,k=0,C=a+1;k<C;){var P=k++;y[P]=Me.zeros1d(p);for(var T=0,D=s+1;T<D;){var _=T++;Me.addMulMutate(y[P],m[S][_],c[v-s+_][g-a+P])}}for(var O=n-S,E=0,W=(O<d?O:d)+1;E<W;){var A=E++;f[S][A]=Me.zeros1d(p);for(var I=0,B=a+1;I<B;){var R=I++;Me.addMulMutate(f[S][A],b[A][R],y[R])}}}return f},We.surfacePoint=function(e,t,r){var i=e.knotsU.length-e.degreeU-2,o=e.knotsV.length-e.degreeV-2;return We.surfacePointGivenNM(i,o,e,t,r)},We.surfacePointGivenNM=function(e,t,r,i,o){var n=r.degreeU,s=r.degreeV,a=r.controlPoints,c=r.knotsU,h=r.knotsV;if(!We.areValidRelations(n,a.length,c.length)||!We.areValidRelations(s,a[0].length,h.length))throw new M("Invalid relations between control points, knot vector, and n");for(var l=a[0][0].length,u=We.knotSpanGivenN(e,n,i,c),d=We.knotSpanGivenN(t,s,o,h),p=We.basisFunctionsGivenKnotSpanIndex(u,i,n,c),f=We.basisFunctionsGivenKnotSpanIndex(d,o,s,h),v=u-n,g=d,m=Me.zeros1d(l),b=Me.zeros1d(l),y=0,x=s+1;y<x;){var w=y++;b=Me.zeros1d(l),g=d-s+w;for(var S=0,k=n+1;S<k;){var C=S++;Me.addMulMutate(b,p[C],a[v+C][g])}Me.addMulMutate(m,f[w],b)}return m},We.curveRegularSamplePoints=function(e,t){for(var r=We.curveDerivatives(e,e.knots[0],e.degree),i=1/t,o=i*i,n=r[0],s=Me.mul(i,r[1]),a=Me.mul(.5*o,r[2]),c=Me.mul(o*i*.5,r[3]),h=Me.add(a,a),l=Me.add(c,c),u=Me.mul(.3333333333333333,c),d=[],p=0,f=t+1;p<f;)p++,d.push(We.dehomogenize(n)),Me.addAllMutate([n,s,a,u]),Me.addAllMutate([s,h,c]),Me.addAllMutate([h,l]),Me.addAllMutate([a,c]);return d},We.curveRegularSamplePoints2=function(e,t){for(var r=We.curveDerivatives(e,e.knots[0],e.degree),i=1/t,o=i*i,n=r[0],s=Me.mul(i,r[1]),a=Me.mul(.5*o,r[2]),c=Me.mul(o*i*.5,r[3]),h=Me.add(a,a),l=Me.add(c,c),u=Me.mul(.3333333333333333,c),d=[],p=0,f=t+1;p<f;)p++,d.push(We.dehomogenize(n)),Me.addAllMutate([n,s,a,u]),Me.addAllMutate([s,h,c]),Me.addAllMutate([h,l]),Me.addAllMutate([a,c]);return d},We.rationalSurfaceRegularSampleDerivatives=function(e,t,r,i){for(var o=We.surfaceRegularSampleDerivatives(e,t,r,i),n=[],s=t+1,a=r+1,c=i+1,h=0;h<s;){var l=h++,u=[];n.push(u);for(var d=0;d<a;){for(var p=d++,f=o[l][p],v=We.rational2d(f),g=We.weight2d(f),m=[],b=v[0][0].length,y=0;y<c;){var x=y++;m.push([]);for(var w=0,S=c-x;w<S;){for(var k=w++,C=v[x][k],P=1,M=k+1;P<M;){var T=P++;Me.subMulMutate(C,z.get(k,T)*g[0][T],m[x][k-T])}for(var D=1,_=x+1;D<_;){var O=D++;Me.subMulMutate(C,z.get(x,O)*g[O][0],m[x-O][k]);for(var E=Me.zeros1d(b),W=1,A=k+1;W<A;){var I=W++;Me.addMulMutate(E,z.get(k,I)*g[O][I],m[x-O][k-I])}Me.subMulMutate(C,z.get(x,O),E)}Me.mulMutate(1/g[0][0],C),m[x].push(C)}}u.push(m)}}return n},We.surfaceRegularSampleDerivatives=function(e,t,r,i){for(var o=e.degreeU,n=e.degreeV,s=e.controlPoints,a=e.knotsU,c=e.knotsV,h=s[0][0].length,l=(U.last(a),a[0],U.last(c),c[0],We.regularlySpacedDerivativeBasisFunctions(o,a,t)),u=l.item0,d=l.item1,p=We.regularlySpacedDerivativeBasisFunctions(n,c,r),f=p.item0,v=p.item1,g=[],m=t+1,b=r+1,y=0;y<m;){var x=y++,w=[];g.push(w);for(var S=0;S<b;){var k=S++;w.push(We.surfaceDerivativesGivenBasesKnotSpans(o,n,s,u[x],f[k],d[x],v[k],h,i))}}return g},We.rationalSurfaceRegularSamplePoints=function(e,t,r){return We.dehomogenize2d(We.surfaceRegularSamplePoints(e,t,r))},We.surfaceRegularSamplePoints=function(e,t,r){for(var i=e.degreeU,o=e.degreeV,n=e.controlPoints,s=e.knotsU,a=e.knotsV,c=n[0][0].length,h=(U.last(s),s[0],U.last(a),a[0],We.regularlySpacedBasisFunctions(i,s,t)),l=h.item0,u=h.item1,d=We.regularlySpacedBasisFunctions(o,a,r),p=d.item0,f=d.item1,v=[],g=t+1,m=r+1,b=0;b<g;){var y=b++,x=[];v.push(x);for(var w=0;w<m;){var S=w++;x.push(We.surfacePointGivenBasesKnotSpans(i,o,n,l[y],p[S],u[y],f[S],c))}}return v},We.regularlySpacedBasisFunctions=function(e,t,r){for(var i=t.length-e-2,o=(U.last(t)-t[0])/r,n=[],s=[],a=t[0],c=We.knotSpanGivenN(i,e,a,t),h=r+1,l=0;l<h;){for(l++;a>=t[c+1];)c++;s.push(c),n.push(We.basisFunctionsGivenKnotSpanIndex(c,a,e,t)),a+=o}return new $(s,n)},We.regularlySpacedDerivativeBasisFunctions=function(e,t,r){for(var i=t.length-e-2,o=(U.last(t)-t[0])/r,n=[],s=[],a=t[0],c=We.knotSpanGivenN(i,e,a,t),h=r+1,l=0;l<h;){for(l++;a>=t[c+1];)c++;s.push(c),n.push(We.derivativeBasisFunctionsGivenNI(c,a,e,i,t)),a+=o}return new $(s,n)},We.surfacePointGivenBasesKnotSpans=function(e,t,r,i,o,n,s,a){for(var c,h=Me.zeros1d(a),l=i-e,u=o-t,d=0,p=t+1;d<p;){var f=d++;c=Me.zeros1d(a);for(var v=0,g=e+1;v<g;){var m=v++;Me.addMulMutate(c,n[m],r[l+m][u])}u++,Me.addMulMutate(h,s[f],c)}return h},We.surfaceDerivativesGivenBasesKnotSpans=function(e,t,r,i,o,n,s,a,c){var h,l,u=r[0][0].length;h=c<e?c:e,l=c<t?c:t;for(var d=Me.zeros3d(h+1,l+1,u),p=Me.zeros2d(t+1,u),f=0,v=h+1;f<v;){for(var g=f++,m=0,b=t+1;m<b;){var y=m++;p[y]=Me.zeros1d(u);for(var x=0,w=e+1;x<w;){var S=x++;Me.addMulMutate(p[y],n[g][S],r[i-e+S][o-t+y])}}for(var k=c-g,C=0,P=(k<l?k:l)+1;C<P;){var M=C++;d[g][M]=Me.zeros1d(u);for(var T=0,D=t+1;T<D;){var _=T++;Me.addMulMutate(d[g][M],s[M][_],p[_])}}}return d},We.curveDerivatives=function(e,t,r){var i=e.knots.length-e.degree-2;return We.curveDerivativesGivenN(i,e,t,r)},We.curveDerivativesGivenN=function(e,t,r,i){var o=t.degree,n=t.controlPoints,s=t.knots;if(!We.areValidRelations(o,n.length,s.length))throw new M("Invalid relations between control points, knot vector, and n");var a,c=n[0].length;a=i<o?i:o;for(var h=Me.zeros2d(i+1,c),l=We.knotSpanGivenN(e,o,r,s),u=We.derivativeBasisFunctionsGivenNI(l,r,o,a,s),d=0,p=a+1;d<p;)for(var f=d++,v=0,g=o+1;v<g;){var m=v++;Me.addMulMutate(h[f],u[f][m],n[l-o+m])}return h},We.curvePoint=function(e,t){var r=e.knots.length-e.degree-2;return We.curvePointGivenN(r,e,t)},We.areValidRelations=function(e,t,r){return t+e+1-r==0},We.curvePointGivenN=function(e,t,r){var i=t.degree,o=t.controlPoints,n=t.knots;if(!We.areValidRelations(i,o.length,n.length))throw new M("Invalid relations between control points, knot Array, and n");for(var s=We.knotSpanGivenN(e,i,r,n),a=We.basisFunctionsGivenKnotSpanIndex(s,r,i,n),c=Me.zeros1d(o[0].length),h=0,l=i+1;h<l;){var u=h++;Me.addMulMutate(c,a[u],o[s-i+u])}return c},We.volumePoint=function(e,t,r,i){var o=e.knotsU.length-e.degreeU-2,n=e.knotsV.length-e.degreeV-2,s=e.knotsW.length-e.degreeW-2;return We.volumePointGivenNML(e,o,n,s,t,r,i)},We.volumePointGivenNML=function(e,t,r,i,o,n,s){if(!We.areValidRelations(e.degreeU,e.controlPoints.length,e.knotsU.length)||!We.areValidRelations(e.degreeV,e.controlPoints[0].length,e.knotsV.length)||!We.areValidRelations(e.degreeW,e.controlPoints[0][0].length,e.knotsW.length))throw new M("Invalid relations between control points and knot vector");for(var a=e.controlPoints,c=e.degreeU,h=e.degreeV,l=e.degreeW,u=e.knotsU,d=e.knotsV,p=e.knotsW,f=a[0][0][0].length,v=We.knotSpanGivenN(t,c,o,u),g=We.knotSpanGivenN(r,h,n,d),m=We.knotSpanGivenN(i,l,s,p),b=We.basisFunctionsGivenKnotSpanIndex(v,o,c,u),y=We.basisFunctionsGivenKnotSpanIndex(g,n,h,d),x=We.basisFunctionsGivenKnotSpanIndex(m,s,l,p),w=v-c,S=Me.zeros1d(f),k=Me.zeros1d(f),C=Me.zeros1d(f),P=0,T=l+1;P<T;){var D=P++;C=Me.zeros1d(f);for(var _=m-l+D,O=0,E=h+1;O<E;){var W=O++;k=Me.zeros1d(f);for(var A=g-h+W,I=0,B=c+1;I<B;){var R=I++;Me.addMulMutate(k,b[R],a[w+R][A][_])}Me.addMulMutate(C,y[W],k)}Me.addMulMutate(S,x[D],C)}return S},We.derivativeBasisFunctions=function(e,t,r){var i=We.knotSpan(t,e,r),o=r.length-1-t-1;return We.derivativeBasisFunctionsGivenNI(i,e,t,o,r)},We.derivativeBasisFunctionsGivenNI=function(e,t,r,i,o){var n=Me.zeros2d(r+1,r+1),s=Me.zeros1d(r+1),a=Me.zeros1d(r+1),c=0,h=0;n[0][0]=1;for(var l=1,u=r+1;l<u;){var d=l++;s[d]=t-o[e+1-d],a[d]=o[e+d]-t,c=0;for(var p=0;p<d;){var f=p++;n[d][f]=a[f+1]+s[d-f],h=n[f][d-1]/n[d][f],n[f][d]=c+a[f+1]*h,c=s[d-f]*h}n[d][d]=c}for(var v=Me.zeros2d(i+1,r+1),g=Me.zeros2d(2,r+1),m=0,b=1,y=0,x=0,w=0,S=0,k=r+1;S<k;){var C=S++;v[0][C]=n[C][r]}for(var P=0,M=r+1;P<M;){var T=P++;m=0,b=1,g[0][0]=1;for(var D=1,_=i+1;D<_;){var O=D++;y=0,x=T-O,w=r-O,T>=O&&(g[b][0]=g[m][0]/n[w+1][x],y=g[b][0]*n[x][w]);for(var E=x>=-1?1:-x,W=1+(T-1<=w?O-1:r-T);E<W;){var A=E++;g[b][A]=(g[m][A]-g[m][A-1])/n[w+1][x+A],y+=g[b][A]*n[x+A][w]}T<=w&&(g[b][O]=-g[m][O-1]/n[w+1][T],y+=g[b][O]*n[T][w]),v[O][T]=y;var I=m;m=b,b=I}}for(var B=r,R=1,L=i+1;R<L;){for(var F=R++,U=0,z=r+1;U<z;){var N=U++;v[F][N]*=B}B*=r-F}return v},We.basisFunctions=function(e,t,r){var i=We.knotSpan(t,e,r);return We.basisFunctionsGivenKnotSpanIndex(i,e,t,r)},We.basisFunctionsGivenKnotSpanIndex=function(e,t,r,i){var o=Me.zeros1d(r+1),n=Me.zeros1d(r+1),s=Me.zeros1d(r+1),a=0,c=0;o[0]=1;for(var h=1,l=r+1;h<l;){var u=h++;n[u]=t-i[e+1-u],s[u]=i[e+u]-t,a=0;for(var d=0;d<u;){var p=d++;c=o[p]/(s[p+1]+n[u-p]),o[p]=a+s[p+1]*c,a=n[u-p]*c}o[u]=a}return o},We.knotSpan=function(e,t,r){return We.knotSpanGivenN(r.length-e-2,e,t,r)},We.knotSpanGivenN=function(e,t,r,i){if(r>i[e+1]-G.EPSILON)return e;if(r<i[t]+G.EPSILON)return t;for(var o=t,n=e+1,s=Math.floor((o+n)/2);r<i[s]||r>=i[s+1];)r<i[s]?n=s:o=s,s=Math.floor((o+n)/2);return s},We.dehomogenize=function(e){for(var t=[],r=e[e.length-1],i=e.length-1,o=0;o<i;){var n=o++;t.push(e[n]/r)}return t},We.rational1d=function(e){var t=e[0].length-1;return e.map((function(e){return e.slice(0,t)}))},We.rational2d=function(e){return e.map(We.rational1d)},We.weight1d=function(e){var t=e[0].length-1;return e.map((function(e){return e[t]}))},We.weight2d=function(e){return e.map(We.weight1d)},We.dehomogenize1d=function(e){return e.map(We.dehomogenize)},We.dehomogenize2d=function(e){return e.map(We.dehomogenize1d)},We.homogenize1d=function(e,t){var r,i=e.length,o=e[0].length,n=[],s=0,a=[];r=null!=t?t:Me.rep(e.length,1);for(var c=0;c<i;){var h=c++,l=[];a=e[h],s=r[h];for(var u=0;u<o;){var d=u++;l.push(a[d]*s)}l.push(s),n.push(l)}return n},We.homogenize2d=function(e,t){var r,i=e.length,o=[];if(null!=t)r=t;else{for(var n=[],s=0;s<i;)s++,n.push(Me.rep(e[0].length,1));r=n}for(var a=0;a<i;){var c=a++;o.push(We.homogenize1d(e[c],r[c]))}return o};var Ae=t.eval.Intersect=function(){};i["verb.eval.Intersect"]=Ae,Ae.__name__=["verb","eval","Intersect"],Ae.surfaces=function(e,t,r){var i=Re.rationalSurfaceAdaptive(e),o=Re.rationalSurfaceAdaptive(t);return Ae.meshes(i,o).map((function(i){return i.map((function(i){return Ae.surfacesAtPointWithEstimate(e,t,i.uv0,i.uv1,r)}))})).map((function(e){return Ie.rationalInterpCurve(e.map((function(e){return e.point})),3)}))},Ae.surfacesAtPointWithEstimate=function(e,t,r,i,o){var n,s,a,c,h,l,u,d,p,f,v,g,m,b=0;do{if(s=(n=We.rationalSurfaceDerivatives(e,r[0],r[1],1))[0][0],c=n[1][0],h=n[0][1],a=Me.normalized(Me.cross(c,h)),l=Me.dot(a,s),d=(u=We.rationalSurfaceDerivatives(t,i[0],i[1],1))[0][0],f=u[1][0],v=u[0][1],p=Me.normalized(Me.cross(f,v)),g=Me.dot(p,d),(m=Me.distSquared(s,d))<o*o)break;var y=Me.normalized(Me.cross(a,p)),x=Me.dot(y,s),w=Ae.threePlanes(a,l,p,g,y,x);if(null==w)throw new M("panic!");var S=Me.sub(w,s),k=Me.sub(w,d),C=Me.cross(c,a),P=Me.cross(h,a),T=Me.cross(f,p),D=Me.cross(v,p),_=Me.dot(P,S)/Me.dot(P,c),O=Me.dot(C,S)/Me.dot(C,h),E=Me.dot(D,k)/Me.dot(D,f),W=Me.dot(T,k)/Me.dot(T,v);r=Me.add([_,O],r),i=Me.add([E,W],i),b++}while(b<5);return new ie(r,i,s,m)},Ae.meshes=function(e,t,r,i){null==r&&(r=new fe(e)),null==i&&(i=new fe(t));var o=Ae.boundingBoxTrees(r,i,0),n=U.unique(o.map((function(r){return Ae.triangles(e,r.item0,t,r.item1)})).filter((function(e){return null!=e})).filter((function(e){return Me.distSquared(e.min.point,e.max.point)>G.EPSILON})),(function(e,t){var r=Me.sub(e.min.uv0,t.min.uv0),i=Me.dot(r,r),o=Me.sub(e.max.uv0,t.max.uv0),n=Me.dot(o,o),s=Me.sub(e.min.uv0,t.max.uv0),a=Me.dot(s,s),c=Me.sub(e.max.uv0,t.min.uv0),h=Me.dot(c,c);return i<G.EPSILON&&n<G.EPSILON||a<G.EPSILON&&h<G.EPSILON}));return Ae.makeMeshIntersectionPolylines(n)},Ae.meshSlices=function(e,t,r,i){for(var o=new xe(e),n=o.boundingBox(),s=n.min[0],a=n.min[1],c=n.max[0],h=n.max[1],l=Me.span(t,r,i),u=[],d=0;d<l.length;){var p=l[d];++d;var f=new Y([[0,1,2],[0,2,3]],[[s,a,p],[c,a,p],[c,h,p],[s,h,p]],null,[[0,0],[1,0],[1,1],[0,1]]);u.push(Ae.meshes(e,f,o))}return u},Ae.makeMeshIntersectionPolylines=function(e){if(0==e.length)return[];for(var t=0;t<e.length;){var r=e[t];++t,r.max.opp=r.min,r.min.opp=r.max}for(var i=Ae.kdTreeFromSegments(e),o=[],n=0;n<e.length;){var s=e[n];++n,o.push(s.min),o.push(s.max)}for(var a=0;a<o.length;){var c=o[a];if(++a,null==c.adj){var h=Ae.lookupAdjacentSegment(c,i,e.length);null!=h&&null==h.adj&&(c.adj=h,h.adj=c)}}var l=o.filter((function(e){return null==e.adj}));0==l.length&&(l=o);for(var u=[],d=0,p=!1;0!=l.length;){var f=l.pop();if(!f.visited){for(var v=[],g=f;null!=g&&!g.visited&&(g.visited=!0,g.opp.visited=!0,v.push(g),d+=2,(g=g.opp.adj)!=f););v.length>0&&(v.push(v[v.length-1].opp),u.push(v))}if(0==l.length&&o.length>0&&(p||d<o.length)){p=!0;var m=o.pop();l.push(m)}}return u},Ae.kdTreeFromSegments=function(e){for(var t=[],r=0;r<e.length;){var i=e[r];++r,t.push(new le(i.min.point,i.min)),t.push(new le(i.max.point,i.max))}return new ce(t,Me.distSquared)},Ae.lookupAdjacentSegment=function(e,t,r){var i=t.nearest(e.point,r,G.EPSILON).filter((function(t){return e!=t.item0.obj})).map((function(e){return e.item0.obj}));return 1==i.length?i[0]:null},Ae.curveAndSurface=function(e,t,r,i,o){null==r&&(r=.001),null!=i||(i=new pe(e)),null!=o||(o=new ge(t));var n=Ae.boundingBoxTrees(i,o,r);return U.unique(n.map((function(e){var t=e.item0,i=e.item1,o=(U.first(t.knots)+U.last(t.knots))/2,n=[(U.first(i.knotsU)+U.last(i.knotsU))/2,(U.first(i.knotsV)+U.last(i.knotsV))/2];return Ae.curveAndSurfaceWithEstimate(t,i,[o].concat(n),r)})).filter((function(e){return Me.distSquared(e.curvePoint,e.surfacePoint)<r*r})),(function(e,t){return Math.abs(e.u-t.u)<.5*r}))},Ae.curveAndSurfaceWithEstimate=function(e,t,r,i){null==i&&(i=.001);var o=we.uncmin((function(r){var i=We.rationalCurvePoint(e,r[0]),o=We.rationalSurfacePoint(t,r[1],r[2]),n=Me.sub(i,o);return Me.dot(n,n)}),r,i*i,(function(r){var i=We.rationalCurveDerivatives(e,r[0],1),o=We.rationalSurfaceDerivatives(t,r[1],r[2],1),n=Me.sub(o[0][0],i[0]),s=Me.mul(-1,i[1]),a=o[1][0],c=o[0][1];return[2*Me.dot(s,n),2*Me.dot(a,n),2*Me.dot(c,n)]})).solution;return new ee(o[0],[o[1],o[2]],We.rationalCurvePoint(e,o[0]),We.rationalSurfacePoint(t,o[1],o[2]))},Ae.polylineAndMesh=function(e,t,r){for(var i=Ae.boundingBoxTrees(new ve(e),new fe(t),r),o=[],n=0;n<i.length;){var s=i[n];++n;var a=s.item0,c=s.item1,h=Ae.segmentWithTriangle(e.points[a],e.points[a+1],t.points,t.faces[c]);if(null!=h){var l=h.point,u=Me.lerp(h.p,[e.params[a]],[e.params[a+1]])[0],d=ye.triangleUVFromPoint(t,c,l);o.push(new re(l,u,d,a,c))}}return o},Ae.boundingBoxTrees=function(e,t,r){null==r&&(r=1e-9);var i=[],o=[];i.push(e),o.push(t);for(var n=[];i.length>0;){var s=i.pop(),a=o.pop();if(!s.empty()&&!a.empty()&&s.boundingBox().intersects(a.boundingBox(),r)){var c=s.indivisible(r),h=a.indivisible(r);if(c&&h)n.push(new $(s.yield(),a.yield()));else if(!c||h)if(c||!h){var l=s.split(),u=a.split();i.push(l.item1),o.push(u.item1),i.push(l.item1),o.push(u.item0),i.push(l.item0),o.push(u.item1),i.push(l.item0),o.push(u.item0)}else{var d=s.split();i.push(d.item1),o.push(a),i.push(d.item0),o.push(a)}else{var p=a.split();i.push(s),o.push(p.item1),i.push(s),o.push(p.item0)}}}return n},Ae.curves=function(e,t,r){var i=Ae.boundingBoxTrees(new pe(e),new pe(t),0);return U.unique(i.map((function(i){return Ae.curvesWithEstimate(e,t,U.first(i.item0.knots),U.first(i.item1.knots),r)})).filter((function(e){return Me.distSquared(e.point0,e.point1)<r})),(function(e,t){return Math.abs(e.u0-t.u0)<5*r}))},Ae.curvesWithEstimate=function(e,t,r,i,o){var n=we.uncmin((function(r){var i=We.rationalCurvePoint(e,r[0]),o=We.rationalCurvePoint(t,r[1]),n=Me.sub(i,o);return Me.dot(n,n)}),[r,i],o*o,(function(r){var i=We.rationalCurveDerivatives(e,r[0],1),o=We.rationalCurveDerivatives(t,r[1],1),n=Me.sub(i[0],o[0]),s=i[1],a=Me.mul(-1,o[1]);return[2*Me.dot(s,n),2*Me.dot(a,n)]})),s=n.solution[0],a=n.solution[1],c=We.rationalCurvePoint(e,s),h=We.rationalCurvePoint(t,a);return new J(c,h,s,a)},Ae.triangles=function(e,t,r,i){var o=e.faces[t],n=r.faces[i],s=ye.getTriangleNorm(e.points,o),a=ye.getTriangleNorm(r.points,n),c=e.points[o[0]],h=r.points[n[0]],l=Ae.planes(c,s,h,a);if(null==l)return null;var u=Ae.clipRayInCoplanarTriangle(l,e,t);if(null==u)return null;var d=Ae.clipRayInCoplanarTriangle(l,r,i);if(null==d)return null;var p=Ae.mergeTriangleClipIntervals(u,d,e,t,r,i);return null==p?null:new Q(new te(p.min.uv0,p.min.uv1,p.min.point,t,i),new te(p.max.uv0,p.max.uv1,p.max.point,t,i))},Ae.clipRayInCoplanarTriangle=function(e,t,r){for(var i=t.faces[r],o=[t.points[i[0]],t.points[i[1]],t.points[i[2]]],n=[t.uvs[i[0]],t.uvs[i[1]],t.uvs[i[2]]],s=[Me.sub(n[1],n[0]),Me.sub(n[2],n[1]),Me.sub(n[0],n[2])],a=[Me.sub(o[1],o[0]),Me.sub(o[2],o[1]),Me.sub(o[0],o[2])],c=a.map(Me.normalized),h=a.map(Me.norm),l=null,u=null,d=0;d<3;){var p=d++,f=o[p],v=c[p],g=Ae.rays(f,v,e.origin,e.dir);if(null!=g){var m=g.u0,b=g.u1;m<-G.EPSILON||m>h[p]+G.EPSILON||((null==l||b<l.u)&&(l=new ne(b,Me.onRay(e.origin,e.dir,b),Me.onRay(n[p],s[p],m/h[p]))),(null==u||b>u.u)&&(u=new ne(b,Me.onRay(e.origin,e.dir,b),Me.onRay(n[p],s[p],m/h[p]))))}}return null==u||null==l?null:new Q(l,u)},Ae.mergeTriangleClipIntervals=function(e,t,r,i,o,n){if(t.min.u>e.max.u+G.EPSILON||e.min.u>t.max.u+G.EPSILON)return null;var s,a;s=e.min.u>t.min.u?new $(e.min,0):new $(t.min,1),a=e.max.u<t.max.u?new $(e.max,0):new $(t.max,1);var c=new Q(new te(null,null,s.item0.point,i,n),new te(null,null,a.item0.point,i,n));return 0==s.item1?(c.min.uv0=s.item0.uv,c.min.uv1=ye.triangleUVFromPoint(o,n,s.item0.point)):(c.min.uv0=ye.triangleUVFromPoint(r,i,s.item0.point),c.min.uv1=s.item0.uv),0==a.item1?(c.max.uv0=a.item0.uv,c.max.uv1=ye.triangleUVFromPoint(o,n,a.item0.point)):(c.max.uv0=ye.triangleUVFromPoint(r,i,a.item0.point),c.max.uv1=a.item0.uv),c},Ae.planes=function(e,t,r,i){var o=Me.cross(t,i);if(Me.dot(o,o)<G.EPSILON)return null;var n,s,a,c,h=0,l=Math.abs(o[0]),u=Math.abs(o[1]),d=Math.abs(o[2]);u>l&&(h=1,l=u),d>l&&(h=2,l=d),0==h?(n=t[1],s=t[2],a=i[1],c=i[2]):1==h?(n=t[0],s=t[2],a=i[0],c=i[2]):(n=t[0],s=t[1],a=i[0],c=i[1]);var p=-Me.dot(e,t),f=-Me.dot(r,i),v=n*c-s*a,g=(s*f-p*c)/v,m=(p*a-n*f)/v;return new j(0==h?[0,g,m]:1==h?[g,0,m]:[g,m,0],Me.normalized(o))},Ae.threePlanes=function(e,t,r,i,o,n){var s=Me.cross(r,o),a=Me.dot(e,s);if(Math.abs(a)<G.EPSILON)return null;var c=Me.sub(Me.mul(n,r),Me.mul(i,o)),h=Me.add(Me.mul(t,s),Me.cross(e,c));return Me.mul(1/a,h)},Ae.polylines=function(e,t,r){for(var i=Ae.boundingBoxTrees(new ve(e),new ve(t),r),o=[],n=0;n<i.length;){var s=i[n];++n;var a=s.item0,c=s.item1,h=Ae.segments(e.points[a],e.points[a+1],t.points[c],t.points[c+1],r);null!=h&&(h.u0=Me.lerp(h.u0,[e.params[a]],[e.params[a+1]])[0],h.u1=Me.lerp(h.u1,[t.params[c]],[t.params[c+1]])[0],o.push(h))}return o},Ae.segments=function(e,t,r,i,o){var n=Me.sub(t,e),s=Math.sqrt(Me.dot(n,n)),a=Me.mul(1/s,n),c=Me.sub(i,r),h=Math.sqrt(Me.dot(c,c)),l=Me.mul(1/h,c),u=Ae.rays(e,a,r,l);if(null!=u){var d=Math.min(Math.max(0,u.u0/s),1),p=Math.min(Math.max(0,u.u1/h),1),f=Me.onRay(e,n,d),v=Me.onRay(r,c,p);if(Me.distSquared(f,v)<o*o)return new J(f,v,d,p)}return null},Ae.rays=function(e,t,r,i){var o=Me.dot(t,i),n=Me.dot(t,r),s=Me.dot(t,e),a=Me.dot(i,r),c=Me.dot(i,e),h=Me.dot(t,t),l=h*Me.dot(i,i)-o*o;if(Math.abs(l)<G.EPSILON)return null;var u=(o*(n-s)-h*(a-c))/l,d=(n-s+u*o)/h,p=Me.onRay(e,t,d),f=Me.onRay(r,i,u);return new J(p,f,d,u)},Ae.segmentWithTriangle=function(e,t,r,i){var o=r[i[0]],n=r[i[1]],s=r[i[2]],a=Me.sub(n,o),c=Me.sub(s,o),h=Me.cross(a,c),l=Me.sub(t,e),u=Me.sub(e,o),d=-Me.dot(h,u),p=Me.dot(h,l);if(Math.abs(p)<G.EPSILON)return null;var f=d/p;if(f<0||f>1)return null;var v=Me.add(e,Me.mul(f,l)),g=Me.dot(a,c),m=Me.dot(a,a),b=Me.dot(c,c),y=Me.sub(v,o),x=Me.dot(y,a),w=Me.dot(y,c),S=g*g-m*b;if(Math.abs(S)<G.EPSILON)return null;var k=(g*w-b*x)/S,C=(g*x-m*w)/S;return k>1+G.EPSILON||C>1+G.EPSILON||C<-G.EPSILON||k<-G.EPSILON||k+C>1+G.EPSILON?null:new oe(v,k,C,f)},Ae.segmentAndPlane=function(e,t,r,i){var o=Me.dot(i,Me.sub(t,e));if(Math.abs(o)<G.EPSILON)return null;var n=Me.dot(i,Me.sub(r,e))/o;return n>1+G.EPSILON||n<-G.EPSILON?null:{p:n}};var Ie=t.eval.Make=function(){};i["verb.eval.Make"]=Ie,Ie.__name__=["verb","eval","Make"],Ie.rationalTranslationalSurface=function(e,t){for(var r=We.rationalCurvePoint(t,U.first(t.knots)),i=U.first(t.knots),o=U.last(t.knots),n=2*t.controlPoints.length,s=(o-i)/(n-1),a=[],c=0;c<n;){var h=c++,l=Me.sub(We.rationalCurvePoint(t,i+h*s),r),u=Be.rationalCurveTransform(e,[[1,0,0,l[0]],[0,1,0,l[1]],[0,0,1,l[2]],[0,0,0,1]]);a.push(u)}return Ie.loftedSurface(a)},Ie.surfaceBoundaryCurves=function(e){return[Ie.surfaceIsocurve(e,U.first(e.knotsU),!1),Ie.surfaceIsocurve(e,U.last(e.knotsU),!1),Ie.surfaceIsocurve(e,U.first(e.knotsV),!0),Ie.surfaceIsocurve(e,U.last(e.knotsV),!0)]},Ie.surfaceIsocurve=function(e,t,r){var i,o;null==r&&(r=!1),i=r?e.knotsV:e.knotsU,o=r?e.degreeV:e.degreeU;for(var n=Te.knotMultiplicities(i),s=-1,a=0,c=n.length;a<c;){var h=a++;if(Math.abs(t-n[h].knot)<G.EPSILON){s=h;break}}var l,u=o+1;s>=0&&(u-=n[s].mult),l=u>0?Be.surfaceKnotRefine(e,Me.rep(u,t),r):e;var d=We.knotSpan(o,t,i);return Math.abs(t-U.first(i))<G.EPSILON?d=0:Math.abs(t-U.last(i))<G.EPSILON&&(d=(r?l.controlPoints[0].length:l.controlPoints.length)-1),r?new q(l.degreeU,l.knotsU,function(e){for(var t=[],r=0,i=l.controlPoints;r<i.length;){var o=i[r];++r,t.push(o[d])}return t}()):new q(l.degreeV,l.knotsV,l.controlPoints[d])},Ie.loftedSurface=function(e,t){var r=(e=Be.unifyCurveKnotVectors(e))[0].degree;null==t&&(t=3),t>e.length-1&&(t=e.length-1);for(var i=e[0].knots,o=[],n=[],s=0,a=e[0].controlPoints.length;s<a;){var c=[s++],h=e.map(function(e){return function(t){return t.controlPoints[e[0]]}}(c)),l=Ie.rationalInterpCurve(h,t,!0);n.push(l.controlPoints),o=l.knots}return new Z(r,t,i,o,n)},Ie.clonedCurve=function(e){return new q(e.degree,e.knots.slice(),e.controlPoints.map((function(e){return e.slice()})))},Ie.rationalBezierCurve=function(e,t){for(var r=e.length-1,i=[],o=0,n=r+1;o<n;)o++,i.push(0);for(var s=0,a=r+1;s<a;)s++,i.push(1);return null==t&&(t=Me.rep(e.length,1)),new q(r,i,We.homogenize1d(e,t))},Ie.fourPointSurface=function(e,t,r,i,o){null==o&&(o=3);for(var n=o,s=[],a=0,c=o+1;a<c;){for(var h=a++,l=[],u=0,d=o+1;u<d;){var p=u++,f=1-h/n,v=Me.lerp(f,e,t),g=Me.lerp(f,i,r),m=Me.lerp(1-p/n,v,g);m.push(1),l.push(m)}s.push(l)}var b=Me.rep(o+1,0),y=Me.rep(o+1,1);return new Z(o,o,b.concat(y),b.concat(y),s)},Ie.ellipseArc=function(e,t,r,i,o){var n=Me.norm(t),s=Me.norm(r);t=Me.normalized(t),r=Me.normalized(r),o<i&&(o=2*Math.PI+i);var a,c=o-i,h=c/(a=c<=Math.PI/2?1:c<=Math.PI?2:c<=3*Math.PI/2?3:4),l=Math.cos(h/2),u=Me.add(e,Me.add(Me.mul(n*Math.cos(i),t),Me.mul(s*Math.sin(i),r))),d=Me.sub(Me.mul(Math.cos(i),r),Me.mul(Math.sin(i),t)),p=[],f=Me.zeros1d(2*a+3),v=0,g=i,m=Me.zeros1d(2*a);p[0]=u,m[0]=1;for(var b=1,y=a+1;b<y;){var x=b++;g+=h;var w=Me.add(e,Me.add(Me.mul(n*Math.cos(g),t),Me.mul(s*Math.sin(g),r)));m[v+2]=1,p[v+2]=w;var S=Me.sub(Me.mul(Math.cos(g),r),Me.mul(Math.sin(g),t)),k=Ae.rays(u,Me.mul(1/Me.norm(d),d),w,Me.mul(1/Me.norm(S),S)),C=Me.add(u,Me.mul(k.u0,d));m[v+1]=l,p[v+1]=C,v+=2,x<a&&(u=w,d=S)}for(var P=2*a+1,M=0;M<3;){var T=M++;f[T]=0,f[T+P]=1}switch(a){case 2:f[3]=f[4]=.5;break;case 3:f[3]=f[4]=.3333333333333333,f[5]=f[6]=.6666666666666666;break;case 4:f[3]=f[4]=.25,f[5]=f[6]=.5,f[7]=f[8]=.75}return new q(2,f,We.homogenize1d(p,m))},Ie.arc=function(e,t,r,i,o,n){return Ie.ellipseArc(e,Me.mul(i,Me.normalized(t)),Me.mul(i,Me.normalized(r)),o,n)},Ie.polyline=function(e){for(var t,r=[0,0],i=0,o=0,n=e.length-1;o<n;){var s=o++;i+=Me.dist(e[s],e[s+1]),r.push(i)}r.push(i),r=Me.mul(1/i,r);for(var a=[],c=0,h=e.length;c<h;)c++,a.push(1);return t=a,new q(1,r,We.homogenize1d(e.slice(0),t))},Ie.extrudedSurface=function(e,t,r){for(var i=[[],[],[]],o=[[],[],[]],n=We.dehomogenize1d(r.controlPoints),s=We.weight1d(r.controlPoints),a=Me.mul(t,e),c=Me.mul(.5*t,e),h=0,l=n.length;h<l;){var u=h++;i[2][u]=n[u],i[1][u]=Me.add(c,n[u]),i[0][u]=Me.add(a,n[u]),o[0][u]=s[u],o[1][u]=s[u],o[2][u]=s[u]}return new Z(2,r.degree,[0,0,0,1,1,1],r.knots,We.homogenize2d(i,o))},Ie.cylindricalSurface=function(e,t,r,i,o){var n=Me.cross(e,t),s=(Math.PI,Ie.arc(r,t,n,o,0,2*Math.PI));return Ie.extrudedSurface(e,i,s)},Ie.revolvedSurface=function(e,t,r,i){var o,n,s=We.dehomogenize1d(e.controlPoints),a=We.weight1d(e.controlPoints);i<=Math.PI/2?(o=1,n=Me.zeros1d(6+2*(o-1))):i<=Math.PI?(o=2,(n=Me.zeros1d(6+2*(o-1)))[3]=n[4]=.5):i<=3*Math.PI/2?(o=3,(n=Me.zeros1d(6+2*(o-1)))[3]=n[4]=.3333333333333333,n[5]=n[6]=.6666666666666666):(o=4,(n=Me.zeros1d(6+2*(o-1)))[3]=n[4]=.25,n[5]=n[6]=.5,n[7]=n[8]=.75);for(var c=i/o,h=3+2*(o-1),l=0;l<3;){var u=l++;n[u]=0,n[h+u]=1}for(var d=Math.cos(c/2),p=0,f=Me.zeros1d(o+1),v=Me.zeros1d(o+1),g=Me.zeros3d(2*o+1,s.length,3),m=Me.zeros2d(2*o+1,s.length),b=1,y=o+1;b<y;){var x=b++;p+=c,v[x]=Math.cos(p),f[x]=Math.sin(p)}for(var w=0,S=s.length;w<S;){var k=w++,C=Pe.rayClosestPoint(s[k],t,r),P=Me.sub(s[k],C),M=Me.norm(P),T=Me.cross(r,P);M>G.EPSILON&&(P=Me.mul(1/M,P),T=Me.mul(1/M,T)),g[0][k]=s[k];var D=s[k];m[0][k]=a[k];for(var _=T,O=0,E=1,W=o+1;E<W;){var A,I=E++;A=0==M?C:Me.add(C,Me.add(Me.mul(M*v[I],P),Me.mul(M*f[I],T))),g[O+2][k]=A,m[O+2][k]=a[k];var B=Me.sub(Me.mul(v[I],T),Me.mul(f[I],P));if(0==M)g[O+1][k]=C;else{var R=Ae.rays(D,Me.mul(1/Me.norm(_),_),A,Me.mul(1/Me.norm(B),B)),L=Me.add(D,Me.mul(R.u0,_));g[O+1][k]=L}m[O+1][k]=d*a[k],O+=2,I<o&&(D=A,_=B)}}return new Z(2,e.degree,n,e.knots,We.homogenize2d(g,m))},Ie.sphericalSurface=function(e,t,r,i){var o=Ie.arc(e,Me.mul(-1,t),r,i,0,Math.PI);return Ie.revolvedSurface(o,e,t,2*Math.PI)},Ie.conicalSurface=function(e,t,r,i,o){var n=2*Math.PI,s=[Me.add(r,Me.mul(i,e)),Me.add(r,Me.mul(o,t))],a=new q(1,[0,0,1,1],We.homogenize1d(s,[1,1]));return Ie.revolvedSurface(a,r,e,n)},Ie.rationalInterpCurve=function(e,t,r,i,o){if(null==r&&(r=!1),null==t&&(t=3),e.length<t+1)throw new M("You need to supply at least degree + 1 points! You only supplied "+e.length+" points.");for(var n=[0],s=1,a=e.length;s<a;){var c=s++,h=Me.norm(Me.sub(e[c],e[c-1])),l=n[n.length-1];n.push(l+h)}for(var u=n[n.length-1],d=0,p=n.length;d<p;){var f=d++;n[f]=n[f]/u}var v,g,m=Me.rep(t+1,0),b=null!=i&&null!=o;v=b?0:1,g=b?n.length-t+1:n.length-t;for(var y=v;y<g;){for(var x=y++,w=0,S=0;S<t;)w+=n[x+S++];m.push(1/t*w)}var k,C,P=m.concat(Me.rep(t+1,1)),T=[];k=b?e.length+1:e.length-1,C=b?e.length-(t-1):e.length-(t+1);for(var D=0;D<n.length;){var _=n[D];++D;var O=We.knotSpanGivenN(k,t,_,P),E=We.basisFunctionsGivenKnotSpanIndex(O,_,t,P),W=O-t,A=Me.zeros1d(W),I=Me.zeros1d(C-W);T.push(A.concat(E).concat(I))}if(b){var B=T[0].length-2,R=[-1,1].concat(Me.zeros1d(B)),L=Me.zeros1d(B).concat([-1,1]);U.spliceAndInsert(T,1,0,R),U.spliceAndInsert(T,T.length-1,0,L)}for(var F=e[0].length,z=[],N=(1-P[P.length-t-2])/t,G=P[t+1]/t,V=0;V<F;){var H,j=[V++];if(b){(H=[e[0][j[0]]]).push(G*i[j[0]]);for(var Z=1,Y=e.length-1;Z<Y;){var X=Z++;H.push(e[X][j[0]])}H.push(N*o[j[0]]),H.push(U.last(e)[j[0]])}else H=e.map(function(e){return function(t){return t[e[0]]}}(j));var K=me.solve(T,H);z.push(K)}var $=me.transpose(z);if(!r){var Q=Me.rep($.length,1);$=We.homogenize1d($,Q)}return new q(t,P,$)};var Be=t.eval.Modify=function(){};i["verb.eval.Modify"]=Be,Be.__name__=["verb","eval","Modify"],Be.curveReverse=function(e){return new q(e.degree,Be.knotsReverse(e.knots),U.reversed(e.controlPoints))},Be.surfaceReverse=function(e,t){return null==t&&(t=!1),t?new Z(e.degreeU,e.degreeV,e.knotsU,Be.knotsReverse(e.knotsV),function(t){for(var r=[],i=0,o=e.controlPoints;i<o.length;){var n=o[i];++i,r.push(U.reversed(n))}return r}()):new Z(e.degreeU,e.degreeV,Be.knotsReverse(e.knotsU),e.knotsV,U.reversed(e.controlPoints))},Be.knotsReverse=function(e){for(var t=U.first(e),r=(U.last(e),[t]),i=e.length,o=1;o<i;){var n=o++;r.push(r[n-1]+(e[i-n]-e[i-n-1]))}return r},Be.unifyCurveKnotVectors=function(e){e=e.map(Ie.clonedCurve);for(var t,r=a.fold(e,(function(e,t){return Be.imax(e.degree,t)}),0),i=0,o=e.length;i<o;){var n=i++;e[n].degree<r&&(e[n]=Be.curveElevateDegree(e[n],r))}for(var s=[],c=0;c<e.length;){var h=e[c];++c,s.push(new Q(U.first(h.knots),U.last(h.knots)))}t=s;for(var l=0,u=e.length;l<u;){var d=l++,p=[t[d].min];e[d].knots=e[d].knots.map(function(e){return function(t){return t-e[0]}}(p))}for(var f=t.map((function(e){return e.max-e.min})),v=a.fold(f,(function(e,t){return Math.max(e,t)}),0),g=0,m=e.length;g<m;){var b=g++,y=[v/f[b]];e[b].knots=e[b].knots.map(function(e){return function(t){return t*e[0]}}(y))}for(var x=a.fold(e,(function(e,t){return Me.sortedSetUnion(e.knots,t)}),[]),w=0,S=e.length;w<S;){var k=w++,C=Me.sortedSetSub(x,e[k].knots);0==C.length&&(e[k]=e[k]),e[k]=Be.curveKnotRefine(e[k],C)}return e},Be.imin=function(e,t){return e<t?e:t},Be.imax=function(e,t){return e>t?e:t},Be.curveElevateDegree=function(e,t){if(t<=e.degree)return e;var r=e.knots.length-e.degree-2,i=e.degree,o=e.knots,n=e.controlPoints,s=t-e.degree,a=e.controlPoints[0].length,c=Me.zeros2d(i+s+1,i+1),h=[],l=[],u=[],d=r+i+1,p=t,f=Math.floor(p/2),v=[],g=[];c[0][0]=1,c[p][i]=1;for(var m=1,b=f+1;m<b;)for(var y=m++,x=1/z.get(p,y),w=Be.imin(i,y),S=Be.imax(0,y-s),k=w+1;S<k;){var C=S++;c[y][C]=x*z.get(i,C)*z.get(s,y-C)}for(var P=f+1;P<p;)for(var M=P++,T=Be.imin(i,M),D=Be.imax(0,M-s),_=T+1;D<_;){var O=D++;c[M][O]=c[p-M][i-O]}var E=p+1,W=-1,A=i,I=i+1,B=1,R=o[0];v[0]=n[0];for(var L=0,F=p+1;L<F;)g[L++]=R;for(var U=0,N=i+1;U<N;){var G=U++;h[G]=n[G]}for(;I<d;){for(var V=I;I<d&&o[I]==o[I+1];)I+=1;var H,j,Z=I-V+1,Y=o[I],X=W;if(W=i-Z,H=X>0?Math.floor((X+2)/2):1,j=W>0?Math.floor(p-(W+1)/2):p,W>0){for(var K=Y-R,$=[],Q=i;Q>Z;)$[Q-Z-1]=K/(o[A+Q]-R),Q--;for(var J=1,ee=W+1;J<ee;){for(var te=J++,re=W-te,ie=Z+te,oe=i;oe>=ie;)h[oe]=Me.add(Me.mul($[oe-ie],h[oe]),Me.mul(1-$[oe-ie],h[oe-1])),oe--;u[re]=h[i]}}for(var ne=H,se=p+1;ne<se;){var ae=ne++;l[ae]=Me.zeros1d(a);for(var ce=Be.imin(i,ae),he=Be.imax(0,ae-s),le=ce+1;he<le;){var ue=he++;l[ae]=Me.add(l[ae],Me.mul(c[ae][ue],h[ue]))}}if(X>1)for(var de=E-2,pe=E,fe=Y-R,ve=(Y-g[E-1])/fe,ge=1;ge<X;){for(var me=ge++,be=de,ye=pe,xe=ye-E+1;ye-be>me;){if(be<B){var we=(Y-g[be])/(R-g[be]);v[be]=Me.lerp(we,v[be],v[be-1])}if(ye>=H){if(ye-me<=E-p+X){var Se=(Y-g[ye-me])/fe;l[xe]=Me.lerp(Se,l[xe],l[xe+1])}}else l[xe]=Me.lerp(ve,l[xe],l[xe+1]);be+=1,ye-=1,xe-=1}de-=1,pe+=1}if(A!=i)for(var ke=0,Ce=p-X;ke<Ce;)ke++,g[E]=R,E+=1;for(var Pe=H,Te=j+1;Pe<Te;){var De=Pe++;v[B]=l[De],B+=1}if(I<d){for(var _e=0;_e<W;){var Oe=_e++;h[Oe]=u[Oe]}for(var Ee=W,We=i+1;Ee<We;){var Ae=Ee++;h[Ae]=n[I-i+Ae]}A=I,I+=1,R=Y}else for(var Ie=0,Re=p+1;Ie<Re;)g[E+Ie++]=Y}return new q(t,g,v)},Be.rationalSurfaceTransform=function(e,t){for(var r=We.dehomogenize2d(e.controlPoints),i=0,o=r.length;i<o;)for(var n=i++,s=0,a=r[n].length;s<a;){var c=s++,h=r[n][c];h.push(1),r[n][c]=me.dot(t,h).slice(0,h.length-1)}return new Z(e.degreeU,e.degreeV,e.knotsU.slice(),e.knotsV.slice(),We.homogenize2d(r,We.weight2d(e.controlPoints)))},Be.rationalCurveTransform=function(e,t){for(var r=We.dehomogenize1d(e.controlPoints),i=0,o=r.length;i<o;){var n=i++,s=r[n];s.push(1),r[n]=me.dot(t,s).slice(0,s.length-1)}return new q(e.degree,e.knots.slice(),We.homogenize1d(r,We.weight1d(e.controlPoints)))},Be.surfaceKnotRefine=function(e,t,r){var i,o,n,s=[];r?(n=e.controlPoints,i=e.knotsV,o=e.degreeV):(n=me.transpose(e.controlPoints),i=e.knotsU,o=e.degreeU);for(var a=null,c=0;c<n.length;){var h=n[c];++c,a=Be.curveKnotRefine(new q(o,i,h),t),s.push(a.controlPoints)}var l=a.knots;return r?new Z(e.degreeU,e.degreeV,e.knotsU.slice(),l,s):(s=me.transpose(s),new Z(e.degreeU,e.degreeV,l,e.knotsV.slice(),s))},Be.decomposeCurveIntoBeziers=function(e){for(var t=e.degree,r=e.controlPoints,i=e.knots,o=Te.knotMultiplicities(i),n=t+1,s=0;s<o.length;){var a=o[s];if(++s,a.mult<n){var c=Me.rep(n-a.mult,a.knot),h=Be.curveKnotRefine(new q(t,i,r),c);i=h.knots,r=h.controlPoints}}i.length;for(var l=2*n,u=[],d=0;d<r.length;){var p=i.slice(d,d+l),f=r.slice(d,d+n);u.push(new q(t,p,f)),d+=n}return u},Be.curveKnotRefine=function(e,t){if(0==t.length)return Ie.clonedCurve(e);for(var r=e.degree,i=e.controlPoints,o=e.knots,n=i.length-1,s=n+r+1,a=t.length-1,c=We.knotSpan(r,t[0],o),h=We.knotSpan(r,t[a],o),l=[],u=[],d=0,p=c-r+1;d<p;){var f=d++;l[f]=i[f]}for(var v=h-1,g=n+1;v<g;){var m=v++;l[m+a+1]=i[m]}for(var b=0,y=c+1;b<y;){var x=b++;u[x]=o[x]}for(var w=h+r,S=s+1;w<S;){var k=w++;u[k+a+1]=o[k]}for(var C=h+r-1,P=h+r+a,M=a;M>=0;){for(;t[M]<=o[C]&&C>c;)l[P-r-1]=i[C-r-1],u[P]=o[C],P-=1,C-=1;l[P-r-1]=l[P-r];for(var T=1,D=r+1;T<D;){var _=T++,O=P-r+_,E=u[P+_]-t[M];Math.abs(E)<G.EPSILON?l[O-1]=l[O]:(E/=u[P+_]-o[C-r+_],l[O-1]=Me.add(Me.mul(E,l[O-1]),Me.mul(1-E,l[O])))}u[P]=t[M],P-=1,M--}return new q(r,u,l)},Be.curveKnotInsert=function(e,t,r){for(var i=e.degree,o=e.controlPoints,n=e.knots,s=o.length,a=We.knotSpan(i,t,n),c=[],h=[],l=[],u=1,d=a+1;u<d;){var p=u++;h[p]=n[p]}for(var f=1,v=r+1;f<v;)h[a+f++]=t;for(var g=a+1,m=n.length;g<m;){var b=g++;h[b+r]=n[b]}for(var y=0,x=a-i+1;y<x;){var w=y++;l[w]=o[w]}for(var S=a-0;S<s;){var k=S++;l[k+r]=o[k]}for(var C=0,P=i-0+1;C<P;){var M=C++;c[M]=o[a-i+M]}for(var T=0,D=0,_=1,O=r+1;_<O;){var E=_++;T=a-i+E;for(var W=0,A=i-E-0+1;W<A;){var I=W++;D=(t-n[T+I])/(n[I+a+1]-n[T+I]),c[I]=Me.add(Me.mul(D,c[I+1]),Me.mul(1-D,c[I]))}l[T]=c[0],l[a+r-E-0]=c[i-E-0]}for(var B=T+1,R=a-0;B<R;){var L=B++;l[L]=c[L-T]}return new q(i,h,l)};var Re=t.eval.Tess=function(){};i["verb.eval.Tess"]=Re,Re.__name__=["verb","eval","Tess"],Re.rationalCurveRegularSample=function(e,t,r){return Re.rationalCurveRegularSampleRange(e,e.knots[0],U.last(e.knots),t,r)},Re.rationalCurveRegularSampleRange=function(e,t,r,i,o){i<1&&(i=2);for(var n=[],s=(r-t)/(i-1),a=0,c=0;c<i;)a=t+s*c++,o?n.push([a].concat(We.rationalCurvePoint(e,a))):n.push(We.rationalCurvePoint(e,a));return n},Re.rationalCurveAdaptiveSample=function(e,t,r){if(null==r&&(r=!1),null==t&&(t=1e-6),1==e.degree){if(r){for(var i=[],o=0,n=e.controlPoints.length;o<n;){var s=o++;i.push([e.knots[s+1]].concat(We.dehomogenize(e.controlPoints[s])))}return i}return e.controlPoints.map(We.dehomogenize)}return Re.rationalCurveAdaptiveSampleRange(e,e.knots[0],U.last(e.knots),t,r)},Re.rationalCurveAdaptiveSampleRange=function(e,t,r,i,o){var n=We.rationalCurvePoint(e,t),s=We.rationalCurvePoint(e,r),a=t+(r-t)*(.5+.2*Math.random()),c=We.rationalCurvePoint(e,a),h=Me.sub(n,s),l=Me.sub(n,c);if(Me.dot(h,h)<i&&Me.dot(l,l)>i||!Pe.threePointsAreFlat(n,c,s,i)){var u=t+.5*(r-t),d=Re.rationalCurveAdaptiveSampleRange(e,t,u,i,o),p=Re.rationalCurveAdaptiveSampleRange(e,u,r,i,o);return d.slice(0,-1).concat(p)}return o?[[t].concat(n),[r].concat(s)]:[n,s]},Re.rationalSurfaceNaive=function(e,t,r){t<1&&(t=1),r<1&&(r=1),e.degreeU,e.degreeV,e.controlPoints;for(var i=e.knotsU,o=e.knotsV,n=(U.last(i)-i[0])/t,s=(U.last(o)-o[0])/r,a=[],c=[],h=[],l=0,u=t+1;l<u;)for(var d=l++,p=0,f=r+1;p<f;){var v=d*n,g=p++*s;c.push([v,g]);var m=We.rationalSurfaceDerivatives(e,v,g,1),b=m[0][0];a.push(b);var y=Me.normalized(Me.cross(m[1][0],m[0][1]));h.push(y)}for(var x=[],w=0;w<t;)for(var S=w++,k=0;k<r;){var C=k++,P=S*(r+1)+C,M=(S+1)*(r+1)+C,T=M+1,D=[P,M,T],_=[P,T,P+1];x.push(D),x.push(_)}return new Y(x,a,h,c)},Re.divideRationalSurfaceAdaptive=function(e,t){null==t&&(t=new Le),null!=t.minDivsU?t.minDivsU=t.minDivsU:t.minDivsU=1,null!=t.minDivsV?t.minDivsU=t.minDivsV:t.minDivsU=1,null!=t.refine?t.refine=t.refine:t.refine=!0;var r,i,o=2*(e.controlPoints.length-1),n=2*(e.controlPoints[0].length-1);r=t.minDivsU>o?t.minDivsU=t.minDivsU:t.minDivsU=o,i=t.minDivsV>n?t.minDivsV=t.minDivsV:t.minDivsV=n;for(var s=U.last(e.knotsU),a=e.knotsU[0],c=U.last(e.knotsV),h=e.knotsV[0],l=(s-a)/r,u=(c-h)/i,d=[],p=[],f=0,v=i+1;f<v;){for(var g=f++,m=[],b=0,y=r+1;b<y;){var x=a+l*b++,w=h+u*g,S=We.rationalSurfaceDerivatives(e,x,w,1),k=Me.normalized(Me.cross(S[0][1],S[1][0]));m.push(new se(S[0][0],k,[x,w],-1,Me.isZero(k)))}p.push(m)}for(var C=0;C<i;)for(var P=C++,M=0;M<r;){var T=M++,D=[p[i-P-1][T],p[i-P-1][T+1],p[i-P][T+1],p[i-P][T]];d.push(new Fe(e,D))}if(!t.refine)return d;for(var _=0;_<i;)for(var O=_++,E=0;E<r;){var W=E++,A=O*r+W,I=Re.north(A,O,W,r,i,d),B=Re.east(A,O,W,r,i,d),R=Re.south(A,O,W,r,i,d),L=Re.west(A,O,W,r,i,d);d[A].neighbors=[R,B,I,L],d[A].divide(t)}return d},Re.north=function(e,t,r,i,o,n){return 0==t?null:n[e-i]},Re.south=function(e,t,r,i,o,n){return t==o-1?null:n[e+i]},Re.east=function(e,t,r,i,o,n){return r==i-1?null:n[e+1]},Re.west=function(e,t,r,i,o,n){return 0==r?null:n[e-1]},Re.triangulateAdaptiveRefinementNodeTree=function(e){for(var t=Y.empty(),r=0;r<e.length;){var i=e[r];++r,i.triangulate(t)}return t},Re.rationalSurfaceAdaptive=function(e,t){null!=t||(t=new Le);var r=Re.divideRationalSurfaceAdaptive(e,t);return Re.triangulateAdaptiveRefinementNodeTree(r)};var Le=t.core.AdaptiveRefinementOptions=function(){this.minDivsV=1,this.minDivsU=1,this.refine=!0,this.maxDepth=10,this.minDepth=0,this.normTol=.025};i["verb.eval.AdaptiveRefinementOptions"]=Le,Le.__name__=["verb","eval","AdaptiveRefinementOptions"],Le.prototype={__class__:Le};var Fe=t.core.AdaptiveRefinementNode=function(e,t,r){if(this.srf=e,this.neighbors=null==r?[null,null,null,null]:r,this.corners=t,null==this.corners){var i=e.knotsU[0],o=U.last(e.knotsU),n=e.knotsV[0],s=U.last(e.knotsV);this.corners=[se.fromUv(i,n),se.fromUv(o,n),se.fromUv(o,s),se.fromUv(i,s)]}};i["verb.eval.AdaptiveRefinementNode"]=Fe,Fe.__name__=["verb","eval","AdaptiveRefinementNode"],Fe.prototype={isLeaf:function(){return null==this.children},center:function(){return null!=this.centerPoint?this.centerPoint:this.evalSrf(this.u05,this.v05)},evalCorners:function(){this.u05=(this.corners[0].uv[0]+this.corners[2].uv[0])/2,this.v05=(this.corners[0].uv[1]+this.corners[2].uv[1])/2;for(var e=0;e<4;){var t=e++;if(null==this.corners[t].point){var r=this.corners[t];this.evalSrf(r.uv[0],r.uv[1],r)}}},evalSrf:function(e,t,r){var i=We.rationalSurfaceDerivatives(this.srf,e,t,1),o=i[0][0],n=Me.cross(i[0][1],i[1][0]),s=Me.isZero(n);return s||(n=Me.normalized(n)),null!=r?(r.degen=s,r.point=o,r.normal=n,r):new se(o,n,[e,t],-1,s)},getEdgeCorners:function(e){if(this.isLeaf())return[this.corners[e]];if(this.horizontal)switch(e){case 0:return this.children[0].getEdgeCorners(0);case 1:return this.children[0].getEdgeCorners(1).concat(this.children[1].getEdgeCorners(1));case 2:return this.children[1].getEdgeCorners(2);case 3:return this.children[1].getEdgeCorners(3).concat(this.children[0].getEdgeCorners(3))}switch(e){case 0:return this.children[0].getEdgeCorners(0).concat(this.children[1].getEdgeCorners(0));case 1:return this.children[1].getEdgeCorners(1);case 2:return this.children[1].getEdgeCorners(2).concat(this.children[0].getEdgeCorners(2));case 3:return this.children[0].getEdgeCorners(3)}return null},getAllCorners:function(e){var t=[this.corners[e]];if(null==this.neighbors[e])return t;var r=this.neighbors[e].getEdgeCorners((e+2)%4),i=e%2,o=G.EPSILON,n=this,s=[function(e){return e.uv[0]>n.corners[0].uv[0]+o&&e.uv[0]<n.corners[2].uv[0]-o},function(e){return e.uv[1]>n.corners[0].uv[1]+o&&e.uv[1]<n.corners[2].uv[1]-o}],a=r.filter(s[i]);return a.reverse(),t.concat(a)},midpoint:function(e){if(null==this.midPoints&&(this.midPoints=[null,null,null,null]),null!=this.midPoints[e])return this.midPoints[e];switch(e){case 0:this.midPoints[0]=this.evalSrf(this.u05,this.corners[0].uv[1]);break;case 1:this.midPoints[1]=this.evalSrf(this.corners[1].uv[0],this.v05);break;case 2:this.midPoints[2]=this.evalSrf(this.u05,this.corners[2].uv[1]);break;case 3:this.midPoints[3]=this.evalSrf(this.corners[0].uv[0],this.v05)}return this.midPoints[e]},hasBadNormals:function(){return this.corners[0].degen||this.corners[1].degen||this.corners[2].degen||this.corners[3].degen},fixNormals:function(){for(var e=this.corners.length,t=0;t<e;){var r=t++;if(this.corners[r],this.corners[r].degen){var i=this.corners[(r+1)%e],o=this.corners[(r+3)%e];i.degen?this.corners[r].normal=o.normal:this.corners[r].normal=i.normal}}},shouldDivide:function(e,t){if(t<e.minDepth)return!0;if(t>=e.maxDepth)return!1;if(this.hasBadNormals())return this.fixNormals(),!1;if(this.splitVert=Me.normSquared(Me.sub(this.corners[0].normal,this.corners[1].normal))>e.normTol||Me.normSquared(Me.sub(this.corners[2].normal,this.corners[3].normal))>e.normTol,this.splitHoriz=Me.normSquared(Me.sub(this.corners[1].normal,this.corners[2].normal))>e.normTol||Me.normSquared(Me.sub(this.corners[3].normal,this.corners[0].normal))>e.normTol,this.splitVert||this.splitHoriz)return!0;var r=this.center();return Me.normSquared(Me.sub(r.normal,this.corners[0].normal))>e.normTol||Me.normSquared(Me.sub(r.normal,this.corners[1].normal))>e.normTol||Me.normSquared(Me.sub(r.normal,this.corners[2].normal))>e.normTol||Me.normSquared(Me.sub(r.normal,this.corners[3].normal))>e.normTol},divide:function(e){null==e&&(e=new Le),null==e.normTol&&(e.normTol=.085),null==e.minDepth&&(e.minDepth=0),null==e.maxDepth&&(e.maxDepth=10),this._divide(e,0,!0)},_divide:function(e,t,r){if(this.evalCorners(),this.shouldDivide(e,t)){if(t++,this.splitVert&&!this.splitHoriz?r=!1:!this.splitVert&&this.splitHoriz&&(r=!0),this.horizontal=r,this.horizontal){var i=[this.corners[0],this.corners[1],this.midpoint(1),this.midpoint(3)],o=[this.midpoint(3),this.midpoint(1),this.corners[2],this.corners[3]];this.children=[new Fe(this.srf,i),new Fe(this.srf,o)],this.children[0].neighbors=[this.neighbors[0],this.neighbors[1],this.children[1],this.neighbors[3]],this.children[1].neighbors=[this.children[0],this.neighbors[1],this.neighbors[2],this.neighbors[3]]}else{var n=[this.corners[0],this.midpoint(0),this.midpoint(2),this.corners[3]],s=[this.midpoint(0),this.corners[1],this.corners[2],this.midpoint(2)];this.children=[new Fe(this.srf,n),new Fe(this.srf,s)],this.children[0].neighbors=[this.neighbors[0],this.children[1],this.neighbors[2],this.neighbors[3]],this.children[1].neighbors=[this.neighbors[0],this.neighbors[1],this.neighbors[2],this.children[0]]}for(var a=0,c=this.children;a<c.length;){var h=c[a];++a,h._divide(e,t,!r)}}},triangulate:function(e){if(null==e&&(e=Y.empty()),this.isLeaf())return this.triangulateLeaf(e);for(var t=0,r=this.children;t<r.length;){var i=r[t];if(++t,null==i)break;i.triangulate(e)}return e},triangulateLeaf:function(e){for(var t=e.points.length,r=[],i=[],o=0,n=0;n<4;){var s=n++,a=this.getAllCorners(s);2==a.length&&(o=s+1);for(var c=0,h=a.length;c<h;){var l=c++;r.push(a[l])}}for(var u=0;u<r.length;){var d=r[u];++u,-1==d.id?(e.uvs.push(d.uv),e.points.push(d.point),e.normals.push(d.normal),d.id=t,i.push(t),t++):i.push(d.id)}if(4==r.length)return e.faces.push([i[0],i[3],i[1]]),e.faces.push([i[3],i[2],i[1]]),e;if(5==r.length){var p=i.length;return e.faces.push([i[o],i[(o+2)%p],i[(o+1)%p]]),e.faces.push([i[(o+4)%p],i[(o+3)%p],i[o]]),e.faces.push([i[o],i[(o+3)%p],i[(o+2)%p]]),e}var f=this.center();e.uvs.push(f.uv),e.points.push(f.point),e.normals.push(f.normal);for(var v=e.points.length-1,g=0,m=r.length-1;g<r.length;)e.faces.push([v,i[g],i[m]]),m=g++;return e},__class__:Fe};var Ue=t.exe.Dispatcher=function(){};i["verb.exe.Dispatcher"]=Ue,Ue.__name__=["verb","exe","Dispatcher"],Ue.init=function(){Ue._init||(Ue._workerPool=new ze(Ue.THREADS),Ue._init=!0)},Ue.dispatchMethod=function(e,t,r){Ue.init();var i=new W;return Ue._workerPool.addWork(f.getClassName(e),t,r,(function(e){i.resolve(e)})),new A(i)};var ze=t.exe.WorkerPool=function(e,t){null==t&&(t="verb.js"),null==e&&(e=1),this._callbacks=new y,this._working=new y,this._pool=[],this._queue=[];for(var r=0;r<e;){var i;r++;try{i=new Worker(ze.basePath+t)}catch(e){e instanceof M&&(e=e.val),i=new Worker(ze.basePath+t.substring(0,-3)+".min.js")}this._pool.push(i)}};i["verb.exe.WorkerPool"]=ze,ze.__name__=["verb","exe","WorkerPool"],ze.prototype={addWork:function(e,t,r,i){var o=new Ne(e,t,r);this._callbacks.set(o.id,i),this._queue.push(o),this.processQueue()},processQueue:function(){for(var t=this;this._queue.length>0&&this._pool.length>0;){var r=this._queue.shift(),i=[r.id],o=[this._pool.shift()];this._working.h[i[0]]=o[0],o[0].onmessage=function(r,i){return function(o){t._working.remove(i[0]),t._pool.push(r[0]);try{t._callbacks.h.hasOwnProperty(i[0])&&(t._callbacks.h[i[0]](o.data.result),t._callbacks.remove(i[0]))}catch(t){t instanceof M&&(t=t.val),e.log(t)}t.processQueue()}}(o,i),o[0].postMessage(r)}},__class__:ze};var Ne=function(e,t,r){this.className=e,this.methodName=t,this.args=r,this.id=Ne.uuid++};i["verb.exe._WorkerPool.Work"]=Ne,Ne.__name__=["verb","exe","_WorkerPool","Work"],Ne.prototype={__class__:Ne};var Ge=function(){};i["verb.geom.ICurve"]=Ge,Ge.__name__=["verb","geom","ICurve"],Ge.__interfaces__=[ke],Ge.prototype={__class__:Ge};var Ve=t.geom.NurbsCurve=function(e){this._data=_e.isValidNurbsCurveData(e)};i["verb.geom.NurbsCurve"]=Ve,Ve.__name__=["verb","geom","NurbsCurve"],Ve.__interfaces__=[Ge],Ve.byKnotsControlPointsWeights=function(e,t,r,i){return new Ve(new q(e,t.slice(),We.homogenize1d(r,i)))},Ve.byPoints=function(e,t){return null==t&&(t=3),new Ve(Ie.rationalInterpCurve(e,t))},Ve.__super__=V,Ve.prototype=n(V.prototype,{degree:function(){return this._data.degree},knots:function(){return this._data.knots.slice(0)},controlPoints:function(){return We.dehomogenize1d(this._data.controlPoints)},weights:function(){return We.weight1d(this._data.controlPoints)},asNurbs:function(){return new q(this.degree(),this.knots(),We.homogenize1d(this.controlPoints(),this.weights()))},clone:function(){return new Ve(this._data)},domain:function(){return new Q(U.first(this._data.knots),U.last(this._data.knots))},transform:function(e){return new Ve(Be.rationalCurveTransform(this._data,e))},transformAsync:function(e){return Ue.dispatchMethod(Be,"rationalCurveTransform",[this._data,e]).then((function(e){return new Ve(e)}))},point:function(e){return We.rationalCurvePoint(this._data,e)},pointAsync:function(e){return Ue.dispatchMethod(We,"rationalCurvePoint",[this._data,e])},tangent:function(e){return We.rationalCurveTangent(this._data,e)},tangentAsync:function(e){return Ue.dispatchMethod(We,"rationalCurveTangent",[this._data,e])},derivatives:function(e,t){return null==t&&(t=1),We.rationalCurveDerivatives(this._data,e,t)},derivativesAsync:function(e,t){return null==t&&(t=1),Ue.dispatchMethod(We,"rationalCurveDerivatives",[this._data,e,t])},closestPoint:function(e){return Te.rationalCurveClosestPoint(this._data,e)},closestPointAsync:function(e){return Ue.dispatchMethod(Te,"rationalCurveClosestPoint",[this._data,e])},closestParam:function(e){return Te.rationalCurveClosestParam(this._data,e)},closestParamAsync:function(e){return Ue.dispatchMethod(Te,"rationalCurveClosestParam",[this._data,e])},length:function(){return Te.rationalCurveArcLength(this._data)},lengthAsync:function(){return Ue.dispatchMethod(Te,"rationalCurveArcLength",[this._data])},lengthAtParam:function(e){return Te.rationalCurveArcLength(this._data,e)},lengthAtParamAsync:function(){return Ue.dispatchMethod(Te,"rationalCurveArcLength",[this._data])},paramAtLength:function(e,t){return Te.rationalCurveParamAtArcLength(this._data,e,t)},paramAtLengthAsync:function(e,t){return Ue.dispatchMethod(Te,"rationalCurveParamAtArcLength",[this._data,e,t])},divideByEqualArcLength:function(e){return Oe.rationalCurveByEqualArcLength(this._data,e)},divideByEqualArcLengthAsync:function(e){return Ue.dispatchMethod(Oe,"rationalCurveByEqualArcLength",[this._data,e])},divideByArcLength:function(e){return Oe.rationalCurveByArcLength(this._data,e)},divideByArcLengthAsync:function(e){return Ue.dispatchMethod(Oe,"rationalCurveByArcLength",[this._data,e])},split:function(e){return Oe.curveSplit(this._data,e).map((function(e){return new Ve(e)}))},splitAsync:function(e){return Ue.dispatchMethod(Oe,"curveSplit",[this._data,e]).then((function(e){return e.map((function(e){return new Ve(e)}))}))},reverse:function(){return new Ve(Be.curveReverse(this._data))},reverseAsync:function(){return Ue.dispatchMethod(Be,"curveReverse",[this._data]).then((function(e){return new Ve(e)}))},tessellate:function(e){return Re.rationalCurveAdaptiveSample(this._data,e,!1)},tessellateAsync:function(e){return Ue.dispatchMethod(Re,"rationalCurveAdaptiveSample",[this._data,e,!1])},__class__:Ve});var He=t.geom.Arc=function(e,t,r,i,o,n){Ve.call(this,Ie.arc(e,t,r,i,o,n)),this._center=e,this._xaxis=t,this._yaxis=r,this._radius=i,this._minAngle=o,this._maxAngle=n};i["verb.geom.Arc"]=He,He.__name__=["verb","geom","Arc"],He.__super__=Ve,He.prototype=n(Ve.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},radius:function(){return this._radius},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:He});var je=t.geom.BezierCurve=function(e,t){Ve.call(this,Ie.rationalBezierCurve(e,t))};i["verb.geom.BezierCurve"]=je,je.__name__=["verb","geom","BezierCurve"],je.__super__=Ve,je.prototype=n(Ve.prototype,{__class__:je});var qe=t.geom.Circle=function(e,t,r,i){He.call(this,e,t,r,i,0,2*Math.PI)};i["verb.geom.Circle"]=qe,qe.__name__=["verb","geom","Circle"],qe.__super__=He,qe.prototype=n(He.prototype,{__class__:qe});var Ze=function(){};i["verb.geom.ISurface"]=Ze,Ze.__name__=["verb","geom","ISurface"],Ze.__interfaces__=[ke],Ze.prototype={__class__:Ze};var Ye=t.geom.NurbsSurface=function(e){this._data=_e.isValidNurbsSurfaceData(e)};i["verb.geom.NurbsSurface"]=Ye,Ye.__name__=["verb","geom","NurbsSurface"],Ye.__interfaces__=[Ze],Ye.byKnotsControlPointsWeights=function(e,t,r,i,o,n){return new Ye(new Z(e,t,r,i,We.homogenize2d(o,n)))},Ye.byCorners=function(e,t,r,i){return new Ye(Ie.fourPointSurface(e,t,r,i))},Ye.byLoftingCurves=function(e,t){return new Ye(Ie.loftedSurface(function(t){for(var r=[],i=0;i<e.length;){var o=e[i];++i,r.push(o.asNurbs())}return r}(),t))},Ye.__super__=V,Ye.prototype=n(V.prototype,{degreeU:function(){return this._data.degreeU},degreeV:function(){return this._data.degreeV},knotsU:function(){return this._data.knotsU.slice(0)},knotsV:function(){return this._data.knotsV.slice(0)},controlPoints:function(){return We.dehomogenize2d(this._data.controlPoints)},weights:function(){return We.weight2d(this._data.controlPoints)},asNurbs:function(){return new Z(this.degreeU(),this.degreeV(),this.knotsU(),this.knotsV(),We.homogenize2d(this.controlPoints(),this.weights()))},clone:function(){return new Ye(this.asNurbs())},domainU:function(){return new Q(U.first(this._data.knotsU),U.last(this._data.knotsU))},domainV:function(){return new Q(U.first(this._data.knotsV),U.last(this._data.knotsV))},point:function(e,t){return We.rationalSurfacePoint(this._data,e,t)},pointAsync:function(e,t){return Ue.dispatchMethod(We,"rationalSurfacePoint",[this._data,e,t])},normal:function(e,t){return We.rationalSurfaceNormal(this._data,e,t)},normalAsync:function(e,t){return Ue.dispatchMethod(We,"rationalSurfaceNormal",[this._data,e,t])},derivatives:function(e,t,r){return null==r&&(r=1),We.rationalSurfaceDerivatives(this._data,e,t,r)},derivativesAsync:function(e,t,r){return null==r&&(r=1),Ue.dispatchMethod(We,"rationalSurfaceDerivatives",[this._data,e,t,r])},closestParam:function(e){return Te.rationalSurfaceClosestParam(this._data,e)},closestParamAsync:function(e){return Ue.dispatchMethod(Te,"rationalSurfaceClosestParam",[this._data,e])},closestPoint:function(e){return Te.rationalSurfaceClosestPoint(this._data,e)},closestPointAsync:function(e){return Ue.dispatchMethod(Te,"rationalSurfaceClosestPoint",[this._data,e])},split:function(e,t){return null==t&&(t=!1),Oe.surfaceSplit(this._data,e,t).map((function(e){return new Ye(e)}))},splitAsync:function(e,t){return null==t&&(t=!1),Ue.dispatchMethod(Oe,"surfaceSplit",[this._data,e,t]).then((function(e){return e.map((function(e){return new Ye(e)}))}))},reverse:function(e){return null==e&&(e=!1),new Ye(Be.surfaceReverse(this._data,e))},reverseAsync:function(e){return null==e&&(e=!1),Ue.dispatchMethod(Be,"surfaceReverse",[this._data,e]).then((function(e){return new Ye(e)}))},isocurve:function(e,t){return null==t&&(t=!1),new Ve(Ie.surfaceIsocurve(this._data,e,t))},isocurveAsync:function(e,t){return null==t&&(t=!1),Ue.dispatchMethod(Ie,"surfaceIsocurve",[this._data,e,t]).then((function(e){return new Ve(e)}))},boundaries:function(e){return Ie.surfaceBoundaryCurves(this._data).map((function(e){return new Ve(e)}))},boundariesAsync:function(e){return Ue.dispatchMethod(Ie,"surfaceBoundaryCurves",[this._data]).then((function(e){return e.map((function(e){return new Ve(e)}))}))},tessellate:function(e){return Re.rationalSurfaceAdaptive(this._data,e)},tessellateAsync:function(e){return Ue.dispatchMethod(Re,"rationalSurfaceAdaptive",[this._data,e])},transform:function(e){return new Ye(Be.rationalSurfaceTransform(this._data,e))},transformAsync:function(e){return Ue.dispatchMethod(Be,"rationalSurfaceTransform",[this._data,e]).then((function(e){return new Ye(e)}))},__class__:Ye});var Xe=t.geom.ConicalSurface=function(e,t,r,i,o){Ye.call(this,Ie.conicalSurface(e,t,r,i,o)),this._axis=e,this._xaxis=t,this._base=r,this._height=i,this._radius=o};i["verb.geom.ConicalSurface"]=Xe,Xe.__name__=["verb","geom","ConicalSurface"],Xe.__super__=Ye,Xe.prototype=n(Ye.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:Xe});var Ke=t.geom.CylindricalSurface=function(e,t,r,i,o){Ye.call(this,Ie.cylindricalSurface(e,t,r,i,o)),this._axis=e,this._xaxis=t,this._base=r,this._height=i,this._radius=o};i["verb.geom.CylindricalSurface"]=Ke,Ke.__name__=["verb","geom","CylindricalSurface"],Ke.__super__=Ye,Ke.prototype=n(Ye.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius},__class__:Ke});var $e=t.geom.EllipseArc=function(e,t,r,i,o){Ve.call(this,Ie.ellipseArc(e,t,r,i,o)),this._center=e,this._xaxis=t,this._yaxis=r,this._minAngle=i,this._maxAngle=o};i["verb.geom.EllipseArc"]=$e,$e.__name__=["verb","geom","EllipseArc"],$e.__super__=Ve,$e.prototype=n(Ve.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle},__class__:$e});var Qe=t.geom.Ellipse=function(e,t,r){$e.call(this,e,t,r,0,2*Math.PI)};i["verb.geom.Ellipse"]=Qe,Qe.__name__=["verb","geom","Ellipse"],Qe.__super__=$e,Qe.prototype=n($e.prototype,{__class__:Qe});var Je=t.geom.ExtrudedSurface=function(e,t){Ye.call(this,Ie.extrudedSurface(Me.normalized(t),Me.norm(t),e.asNurbs())),this._profile=e,this._direction=t};i["verb.geom.ExtrudedSurface"]=Je,Je.__name__=["verb","geom","ExtrudedSurface"],Je.__super__=Ye,Je.prototype=n(Ye.prototype,{profile:function(){return this._profile},direction:function(){return this._direction},__class__:Je});var et=t.geom.Intersect=function(){};i["verb.geom.Intersect"]=et,et.__name__=["verb","geom","Intersect"],et.curves=function(e,t,r){return null==r&&(r=.001),Ae.curves(e.asNurbs(),t.asNurbs(),r)},et.curvesAsync=function(e,t,r){return null==r&&(r=.001),Ue.dispatchMethod(Ae,"curves",[e.asNurbs(),t.asNurbs(),r])},et.curveAndSurface=function(e,t,r){return null==r&&(r=.001),Ae.curveAndSurface(e.asNurbs(),t.asNurbs(),r)},et.curveAndSurfaceAsync=function(e,t,r){return null==r&&(r=.001),Ue.dispatchMethod(Ae,"curveAndSurface",[e.asNurbs(),t.asNurbs(),r])},et.surfaces=function(e,t,r){return null==r&&(r=.001),Ae.surfaces(e.asNurbs(),t.asNurbs(),r).map((function(e){return new Ve(e)}))},et.surfacesAsync=function(e,t,r){return null==r&&(r=.001),Ue.dispatchMethod(Ae,"surfaces",[e.asNurbs(),t.asNurbs(),r]).then((function(e){return e.map((function(e){return new Ve(e)}))}))};var tt=t.geom.Line=function(e,t){Ve.call(this,Ie.polyline([e,t])),this._start=e,this._end=t};i["verb.geom.Line"]=tt,tt.__name__=["verb","geom","Line"],tt.__super__=Ve,tt.prototype=n(Ve.prototype,{start:function(){return this._start},end:function(){return this._end},__class__:tt});var rt=t.geom.RevolvedSurface=function(e,t,r,i){Ye.call(this,Ie.revolvedSurface(e.asNurbs(),t,r,i)),this._profile=e,this._center=t,this._axis=r,this._angle=i};i["verb.geom.RevolvedSurface"]=rt,rt.__name__=["verb","geom","RevolvedSurface"],rt.__super__=Ye,rt.prototype=n(Ye.prototype,{profile:function(){return this._profile},center:function(){return this._center},axis:function(){return this._center},angle:function(){return this._angle},__class__:rt});var it=t.geom.SphericalSurface=function(e,t){Ye.call(this,Ie.sphericalSurface(e,[0,0,1],[1,0,0],t)),this._center=e,this._radius=t};i["verb.geom.SphericalSurface"]=it,it.__name__=["verb","geom","SphericalSurface"],it.__super__=Ye,it.prototype=n(Ye.prototype,{center:function(){return this._center},radius:function(){return this._radius},__class__:it});var ot=t.geom.SweptSurface=function(e,t){Ye.call(this,Ie.rationalTranslationalSurface(e.asNurbs(),t.asNurbs())),this._profile=e,this._rail=t};function nt(e){return e instanceof Array?function(){return s.iter(e)}:"function"==typeof e.iterator?ct(e,e.iterator):e.iterator}i["verb.geom.SweptSurface"]=ot,ot.__name__=["verb","geom","SweptSurface"],ot.__super__=Ye,ot.prototype=n(Ye.prototype,{profile:function(){return this._profile},rail:function(){return this._rail},__class__:ot});var st,at=0;function ct(e,t){return null==t?null:(null==t.__id__&&(t.__id__=at++),null==e.hx__closures__?e.hx__closures__={}:r=e.hx__closures__[t.__id__],null==r&&(r=function(){return r.method.apply(r.scope,arguments)},r.scope=e,r.method=t,e.hx__closures__[t.__id__]=r),r);var r}i.Math=Math,String.prototype.__class__=i.String=String,String.__name__=["String"],i.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=i.Date=Date,Date.__name__=["Date"];var ht=i.Int={__name__:["Int"]},lt=i.Dynamic={__name__:["Dynamic"]},ut=i.Float=Number;ut.__name__=["Float"];var dt=i.Bool=Boolean;dt.__ename__=["Bool"];var pt=i.Class={__name__:["Class"]},ft={};null==Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],r=0,i=this.length;r<i;){var o=r++;t[o]=e(this[o])}return t}),null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],r=0,i=this.length;r<i;){var o=this[r++];e(o)&&t.push(o)}return t});var vt={},gt=r.ArrayBuffer||D;null==gt.prototype.slice&&(gt.prototype.slice=D.sliceImpl),r.DataView;var mt=r.Uint8Array||O._new;!function(e,t){if(!e.setImmediate){var r,i=1,o={},n=!1,s=e.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(e);a=a&&a.setTimeout?a:e,"[object process]"==={}.toString.call(e.process)?r=function(){var e=d(arguments);return process.nextTick(p(f,e)),e}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(l="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(l)&&f(+t.data.slice(l.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),r=function(){var t=d(arguments);return e.postMessage(l+t,"*"),t}):e.MessageChannel?((h=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(){var e=d(arguments);return h.port2.postMessage(e),e}):s&&"onreadystatechange"in s.createElement("script")?(c=s.documentElement,r=function(){var e=d(arguments),t=s.createElement("script");return t.onreadystatechange=function(){f(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t),e}):r=function(){var e=d(arguments);return setTimeout(p(f,e),0),e},a.setImmediate=r,a.clearImmediate=v}var c,h,l,u;function d(e){return o[i]=p.apply(t,e),i++}function p(e){var r=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(t,r):new Function(""+e)()}}function f(e){if(n)setTimeout(p(f,e),0);else{var t=o[e];if(t){n=!0;try{t()}finally{v(e),n=!1}}}}function v(e){delete o[e]}}(new Function("return this")()),m.USE_CACHE=!1,m.USE_ENUM_INDEX=!1,m.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",b.DEFAULT_RESOLVER=f,b.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",x.count=0,P.i64tmp=new g(0,0),T.__toStr={}.toString,O.BYTES_PER_ELEMENT=1,R.queue=new c,z.memo=new y,G.TOLERANCE=1e-6,G.EPSILON=1e-10,G.VERSION="2.0.0",Te.Tvalues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Te.Cvalues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Ue.THREADS=1,Ue._init=!1,ze.basePath="",Ne.uuid=0,F.main()}("undefined"!=typeof console?console:{log:function(){}},e,void 0!==o?o:void 0!==t?t:"undefined"!=typeof self?self:this),e}()},945:t=>{"use strict";t.exports=e},235:e=>{"use strict";e.exports=t},172:e=>{"use strict";e.exports=r},970:e=>{"use strict";e.exports=i},953:e=>{"use strict";e.exports=o},725:()=>{},439:()=>{},699:()=>{},256:()=>{}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";a.r(c),a.d(c,{Runner:()=>Rv,fontsEnum:()=>_v,getRunnerInstance:()=>Bv});var e={};a.r(e),a.d(e,{LodDto:()=>Ws,lodEnum:()=>Cs});var t={};a.r(t),a.d(t,{Part:()=>As});var r={};a.r(r),a.d(r,{SerenitySwirlData:()=>Bs,SerenitySwirlDto:()=>Is});var i={};a.r(i),a.d(i,{ArabicArchwayData:()=>Fs,ArabicArchwayDrawingPart:()=>Us,ArabicArchwayDrawingPartShapes:()=>zs,ArabicArchwayDto:()=>Ls,ArabicArchwayDtoBase:()=>Rs});var o={};a.r(o),a.d(o,{ArabicArchway:()=>i,SerenitySwirl:()=>r});var n={};a.r(n),a.d(n,{EternalLoveData:()=>Vs,EternalLoveDto:()=>Gs,EternalLoveDtoBase:()=>Ns});var s={};a.r(s),a.d(s,{EternalLove:()=>n});var h={};a.r(h),a.d(h,{CalmCupData:()=>qs,CalmCupDto:()=>js,CalmCupDtoBase:()=>Hs});var l={};a.r(l),a.d(l,{DragonCupData:()=>Xs,DragonCupDto:()=>Ys,DragonCupDtoBase:()=>Zs,DragonCupModelDto:()=>Ks});var u={};a.r(u),a.d(u,{CalmCup:()=>h,DragonCup:()=>l});var d={};a.r(d),a.d(d,{PhoneNestData:()=>Js,PhoneNestDrawDto:()=>oa,PhoneNestDrawingPart:()=>ea,PhoneNestDrawingPartShapes:()=>ta,PhoneNestDto:()=>Qs,PhoneNestDtoBase:()=>$s,PhoneNestMainPart:()=>ra,PhoneNestModelDto:()=>ia});var p={};a.r(p),a.d(p,{PhoneNest:()=>d});var f={};a.r(f),a.d(f,{SpicyBoxData:()=>aa,SpicyBoxDto:()=>sa,SpicyBoxDtoBase:()=>na,SpicyBoxModelDto:()=>ca});var v={};a.r(v),a.d(v,{SpicyBox:()=>f});var g={};a.r(g),a.d(g,{Boxes:()=>v,Cups:()=>u,Desktop:()=>p,Medals:()=>s,Vases:()=>o});var m={};a.r(m),a.d(m,{DropletsPhoneHolderData:()=>fa,DropletsPhoneHolderDrawingPart:()=>va,DropletsPhoneHolderDrawingPartShapes:()=>ga,DropletsPhoneHolderDto:()=>la,DropletsPhoneHolderDtoBase:()=>ha,DropletsPhoneHolderModelDto:()=>ua,DropletsPhoneHolderModelDxfDto:()=>da,DropletsPhoneHolderModelStepDto:()=>pa});var b={};a.r(b),a.d(b,{DropletsPhoneHolder:()=>m});var y={};a.r(y),a.d(y,{Gadgets:()=>b});var x={};a.r(x),a.d(x,{ZenHideoutData:()=>ya,ZenHideoutDrawingPart:()=>xa,ZenHideoutDrawingPartShapes:()=>wa,ZenHideoutDto:()=>ba,ZenHideoutDtoBase:()=>ma});var w={};a.r(w),a.d(w,{ZenHideout:()=>x});var S={};a.r(S),a.d(S,{BeamPart:()=>Wa,CeilingPart:()=>Na,ColumnPart:()=>Ea,CornerEntranceDto:()=>Va,CornerEntrancePart:()=>Fa,CornerPart:()=>Oa,CornerStairDto:()=>Ra,CornerStairPart:()=>La,FloorPart:()=>Ga,Houses:()=>w,RoofBeamsPart:()=>Ia,RoofCoverOneSidedDto:()=>Ua,RoofCoverPart:()=>za,RoofPanelPart:()=>Ba,RoofPart:()=>Aa,SandwitchPanelDto:()=>Ma,SandwitchPanelFlexDto:()=>Ta,SandwitchPart:()=>Da,SandwitchPartFlex:()=>_a,WindowCornerDto:()=>Sa,WindowCornerPart:()=>Pa,WindowRectangularDto:()=>ka,WindowRectangularPart:()=>Ca});var k={};a.r(k),a.d(k,{WingtipVillaData:()=>ja,WingtipVillaDto:()=>Ha});var C={};a.r(C),a.d(C,{ChirpyChaletData:()=>Za,ChirpyChaletDto:()=>qa});var P={};a.r(P),a.d(P,{ChirpyChalet:()=>C,WingtipVilla:()=>k});var M={};a.r(M),a.d(M,{BirdHouses:()=>P});var T={};a.r(T),a.d(T,{SnakeChairData:()=>Ka,SnakeChairDrawDto:()=>tc,SnakeChairDrawingPart:()=>$a,SnakeChairDrawingPartShapes:()=>Qa,SnakeChairDto:()=>Xa,SnakeChairDtoBase:()=>Ya,SnakeChairMainPart:()=>Ja,SnakeChairModelDto:()=>ec});var D={};a.r(D),a.d(D,{SnakeChair:()=>T});var _={};a.r(_),a.d(_,{ElegantTableData:()=>oc,ElegantTableDrawDto:()=>uc,ElegantTableDrawingPart:()=>nc,ElegantTableDrawingPartShapes:()=>sc,ElegantTableDto:()=>ic,ElegantTableDtoBase:()=>rc,ElegantTableLegByIndexDto:()=>hc,ElegantTableLegPart:()=>ac,ElegantTableModelDto:()=>lc,ElegantTableTopPart:()=>cc});var O={};a.r(O),a.d(O,{GoodCoffeeTableData:()=>fc,GoodCoffeeTableDrawDto:()=>Sc,GoodCoffeeTableDrawingPart:()=>vc,GoodCoffeeTableDrawingPartShapes:()=>gc,GoodCoffeeTableDto:()=>pc,GoodCoffeeTableDtoBase:()=>dc,GoodCoffeeTableLegByIndexDto:()=>xc,GoodCoffeeTableLegPart:()=>mc,GoodCoffeeTableModelDto:()=>wc,GoodCoffeeTableShelfPart:()=>bc,GoodCoffeeTableTopPart:()=>yc});var E={};a.r(E),a.d(E,{SnakeTableData:()=>Pc,SnakeTableDrawDto:()=>Oc,SnakeTableDrawingPart:()=>Mc,SnakeTableDrawingPartShapes:()=>Tc,SnakeTableDto:()=>Cc,SnakeTableDtoBase:()=>kc,SnakeTableMainPart:()=>Dc,SnakeTableModelDto:()=>_c});var W={};a.r(W),a.d(W,{ElegantTable:()=>_,GoodCoffeeTable:()=>O,SnakeTable:()=>E});var A={};a.r(A),a.d(A,{Chairs:()=>D,Tables:()=>W});var I={};a.r(I),a.d(I,{Architecture:()=>S,Enums:()=>e,Furniture:()=>A,KidsCorner:()=>M,LaserCutting:()=>y,Shared:()=>t,ThreeDPrinting:()=>g});var B={};a.r(B),a.d(B,{FontDefinition:()=>zc,Text3DData:()=>Fc,Text3DDto:()=>Wc,Text3DFaceDefinitionDto:()=>Gc,Text3DFaceDefinitionUrlDto:()=>Vc,Text3DFaceDefinitionUrlParsedDto:()=>Hc,Text3DFaceDto:()=>Bc,Text3DFaceUrlDto:()=>Rc,Text3DFaceUrlParsedDto:()=>Lc,Text3DLetterByIndexDto:()=>Uc,Text3DModelDto:()=>Nc,Text3DUrlDto:()=>Ac,Text3DUrlParsedDto:()=>Ic,Texts3DFaceDto:()=>jc,Texts3DFaceUrlDto:()=>qc,Texts3DFaceUrlParsedDto:()=>Zc,faceTextVarEnum:()=>Ts,faceTypeEnum:()=>Ds,fontVariantsEnum:()=>Ms,fontsEnum:()=>Ps,fontsModel:()=>Ec,recAlignmentEnum:()=>_s});var R={};a.r(R),a.d(R,{PyramidSimpeByIndexDto:()=>$c,PyramidSimpleAffectorsDto:()=>Xc,PyramidSimpleCellPart:()=>sh,PyramidSimpleData:()=>Kc,PyramidSimpleDto:()=>Yc,PyramidSimpleFacePart:()=>ah,PyramidSimpleModelCellDto:()=>th,PyramidSimpleModelCellsDto:()=>Jc,PyramidSimpleModelCellsIndexDto:()=>eh,PyramidSimpleModelDto:()=>Qc,PyramidSimpleModelFaceCellIndexDto:()=>ih,PyramidSimpleModelFaceCellsUIndexDto:()=>oh,PyramidSimpleModelFaceCellsVIndexDto:()=>nh,PyramidSimpleModelFaceIndexDto:()=>rh});var L={};a.r(L),a.d(L,{PyramidSimple:()=>R});var F={};a.r(F),a.d(F,{FacePatterns:()=>L});var U={};a.r(U),a.d(U,{outputShapeEnum:()=>ch});var z={};a.r(z),a.d(z,{Enums:()=>U,Patterns:()=>F,Text3D:()=>B});var N={};a.r(N),a.d(N,{VectorCharData:()=>Ef,VectorTextData:()=>Wf});var G={};a.r(G),a.d(G,{HexGridData:()=>Af});var V={};a.r(V),a.d(V,{ObjectDefinition:()=>Bf,ShapeWithId:()=>If,TextWiresCharShapePart:()=>Lf,TextWiresDataDto:()=>Rf});var H={};a.r(H),a.d(H,{OCCT:()=>V,Point:()=>G,Text:()=>N,renderableModels:()=>Pf});var j={};a.r(j),a.d(j,{Asset:()=>gr,BabylonCamera:()=>$t,BabylonGaussianSplatting:()=>ir,BabylonGizmo:()=>lr,BabylonGui:()=>rr,BabylonIO:()=>Qt,BabylonLight:()=>er,BabylonMaterial:()=>Jt,BabylonMesh:()=>nr,BabylonMeshBuilder:()=>hr,BabylonNode:()=>fr,BabylonPick:()=>sr,BabylonRay:()=>ar,BabylonScene:()=>pr,BabylonTexture:()=>tr,BabylonTools:()=>cr,BabylonTransforms:()=>or,BabylonWebXR:()=>ur,Base:()=>dr,Color:()=>rt,Dates:()=>ht,Draw:()=>vr,JSCAD:()=>wr,JSON:()=>mr,Line:()=>lt,Lists:()=>it,Logic:()=>ot,Manifold:()=>Sr,Math:()=>nt,Mesh:()=>dt,OCCT:()=>et,Point:()=>st,Polyline:()=>ut,Tag:()=>br,Text:()=>at,Time:()=>yr,Transforms:()=>ct,Vector:()=>pt,Verb:()=>xr});var q=a(945),Z=a(235);a(172);class Y{constructor(e){this.occWorkerManager=e}makeCompound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.compound.makeCompound",e)}getShapesOfCompound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.compound.getShapesOfCompound",e)}}class X{constructor(e){this.occWorkerManager=e}fromBaseLine(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseLine",e)}fromBaseLines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseLines",e)}fromBaseSegment(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseSegment",e)}fromBaseSegments(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseSegments",e)}fromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromPoints",e)}fromBasePolyline(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBasePolyline",e)}fromBaseTriangle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseTriangle",e)}fromBaseMesh(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.fromBaseMesh",e)}line(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.line",e)}arcThroughThreePoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcThroughThreePoints",e)}arcThroughTwoPointsAndTangent(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcThroughTwoPointsAndTangent",e)}arcFromCircleAndTwoPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCircleAndTwoPoints",e)}arcFromCircleAndTwoAngles(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCircleAndTwoAngles",e)}arcFromCirclePointAndAngle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.arcFromCirclePointAndAngle",e)}createCircleEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.createCircleEdge",e)}createEllipseEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.createEllipseEdge",e)}removeInternalEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.removeInternalEdges",e)}makeEdgeFromGeom2dCurveAndSurface(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.makeEdgeFromGeom2dCurveAndSurface",e)}getEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdge",e)}getEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdges",e)}getEdgesAlongWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesAlongWire",e)}getCircularEdgesAlongWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgesAlongWire",e)}getLinearEdgesAlongWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getLinearEdgesAlongWire",e)}getCornerPointsOfEdgesForShape(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCornerPointsOfEdgesForShape",e)}getEdgeLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeLength",e)}getEdgeLengthsOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeLengthsOfShape",e)}getEdgesLengths(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesLengths",e)}getEdgeCenterOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgeCenterOfMass",e)}getEdgesCentersOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getEdgesCentersOfMass",e)}getCircularEdgeCenterPoint(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgeCenterPoint",e)}getCircularEdgeRadius(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgeRadius",e)}getCircularEdgePlaneDirection(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.getCircularEdgePlaneDirection",e)}pointOnEdgeAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointOnEdgeAtParam",e)}pointsOnEdgesAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointsOnEdgesAtParam",e)}edgesToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.edgesToPoints",e)}reversedEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.reversedEdge",e)}tangentOnEdgeAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentOnEdgeAtParam",e)}tangentsOnEdgesAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentsOnEdgesAtParam",e)}pointOnEdgeAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointOnEdgeAtLength",e)}pointsOnEdgesAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.pointsOnEdgesAtLength",e)}tangentOnEdgeAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentOnEdgeAtLength",e)}tangentsOnEdgesAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.tangentsOnEdgesAtLength",e)}startPointOnEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.startPointOnEdge",e)}startPointsOnEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.startPointsOnEdges",e)}endPointOnEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.endPointOnEdge",e)}endPointsOnEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.endPointsOnEdges",e)}divideEdgeByParamsToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgeByParamsToPoints",e)}divideEdgesByParamsToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgesByParamsToPoints",e)}divideEdgeByEqualDistanceToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgeByEqualDistanceToPoints",e)}divideEdgesByEqualDistanceToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.divideEdgesByEqualDistanceToPoints",e)}constraintTanLinesFromTwoPtsToCircle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesFromTwoPtsToCircle",e)}constraintTanLinesFromPtToCircle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesFromPtToCircle",e)}constraintTanLinesOnTwoCircles(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanLinesOnTwoCircles",e)}constraintTanCirclesOnTwoCircles(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanCirclesOnTwoCircles",e)}constraintTanCirclesOnCircleAndPnt(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.constraintTanCirclesOnCircleAndPnt",e)}isEdgeLinear(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.isEdgeLinear",e)}isEdgeCircular(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.edge.isEdgeCircular",e)}}class K{constructor(e){this.occWorkerManager=e}fromBaseTriangle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.fromBaseTriangle",e)}fromBaseMesh(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.fromBaseMesh",e)}createFacesFromWiresOnFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFacesFromWiresOnFace",e)}createFaceFromWireOnFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWireOnFace",e)}createFaceFromWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWire",e)}createFaceFromWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWires",e)}createFaceFromWiresOnFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromWiresOnFace",e)}createFacesFromWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFacesFromWires",e)}createFaceFromMultipleCircleTanWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromMultipleCircleTanWires",e)}createFaceFromMultipleCircleTanWireCollections(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createFaceFromMultipleCircleTanWireCollections",e)}faceFromSurface(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.faceFromSurface",e)}faceFromSurfaceAndWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.faceFromSurfaceAndWire",e)}createPolygonFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createPolygonFace",e)}createCircleFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createCircleFace",e)}hexagonsInGrid(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.hexagonsInGrid",e)}createEllipseFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createEllipseFace",e)}createSquareFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createSquareFace",e)}createRectangleFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.createRectangleFace",e)}getFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFace",e)}getFaces(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaces",e)}reversedFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.reversedFace",e)}subdivideToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPoints",e)}subdivideToWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToWires",e)}subdivideToRectangleWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToRectangleWires",e)}subdivideToRectangleHoles(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToRectangleHoles",e)}subdivideToHexagonWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToHexagonWires",e)}subdivideToHexagonHoles(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToHexagonHoles",e)}subdivideToPointsControlled(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPointsControlled",e)}subdivideToNormals(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToNormals",e)}subdivideToUV(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToUV",e)}pointOnUV(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.pointOnUV",e)}normalOnUV(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.normalOnUV",e)}pointsOnUVs(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.pointsOnUVs",e)}normalsOnUVs(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.normalsOnUVs",e)}subdivideToPointsOnParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.subdivideToPointsOnParam",e)}wireAlongParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.wireAlongParam",e)}wiresAlongParams(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.wiresAlongParams",e)}getUMinBound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getUMinBound",e)}getUMaxBound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getUMaxBound",e)}getVMinBound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getVMinBound",e)}getVMaxBound(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getVMaxBound",e)}getFaceArea(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaceArea",e)}getFacesAreas(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFacesAreas",e)}getFaceCenterOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFaceCenterOfMass",e)}getFacesCentersOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.getFacesCentersOfMass",e)}filterFacePoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.filterFacePoints",e)}filterFacesPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.face.filterFacesPoints",e)}}class ${constructor(e){this.occWorkerManager=e}fromClosedShell(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.fromClosedShell",e)}createBox(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createBox",e)}createCube(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCube",e)}createBoxFromCorner(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createBoxFromCorner",e)}createCylinder(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCylinder",e)}createCylindersOnLines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCylindersOnLines",e)}createSphere(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createSphere",e)}createCone(e){return e.angle=e.angle*(Math.PI/180),this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.createCone",e)}getSolidSurfaceArea(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidSurfaceArea",e)}getSolidVolume(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidVolume",e)}getSolidsVolumes(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidsVolumes",e)}getSolidCenterOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidCenterOfMass",e)}getSolidsCentersOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolidsCentersOfMass",e)}getSolids(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.getSolids",e)}filterSolidPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.solid.filterSolidPoints",e)}}class Q{static parse(e,t){var r;const i=[e],o=new Set;for(;i.length>0;){const e=i.pop();if("object"==typeof e&&null!==e&&!o.has(e))if(o.add(e),Array.isArray(e))for(let t=0;t<e.length;t++)i.push(e[t]);else{if(Object.keys(e).includes("shapes")){const i=e.shapes;if("object"==typeof i&&null!==i)for(const o in i)e.shapes[o]&&(e.shapes[o]=null===(r=t.find((t=>t.id===e.shapes[o])))||void 0===r?void 0:r.shape)}for(const t in e)i.push(e[t])}}return e}}class J{constructor(e){this.occWorkerManager=e}fromBaseLine(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseLine",e)}fromBaseLines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseLines",e)}fromBaseSegment(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseSegment",e)}fromBaseSegments(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseSegments",e)}fromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromPoints",e)}fromBasePolyline(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBasePolyline",e)}fromBaseTriangle(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseTriangle",e)}fromBaseMesh(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.fromBaseMesh",e)}createPolygonWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolygonWire",e)}createPolygons(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolygons",e)}createLineWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLineWire",e)}createLineWireWithExtensions(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLineWireWithExtensions",e)}createLines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLines",e)}splitOnPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.splitOnPoints",e)}wiresToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.wiresToPoints",e)}createPolylineWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolylineWire",e)}createZigZagBetweenTwoWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createZigZagBetweenTwoWires",e)}createWireFromTwoCirclesTan(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createWireFromTwoCirclesTan",e)}createPolylines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createPolylines",e)}createBezier(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezier",e)}createBezierWeights(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezierWeights",e)}createBezierWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBezierWires",e)}interpolatePoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.interpolatePoints",e)}interpolateWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.interpolateWires",e)}createBSpline(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBSpline",e)}createBSplines(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createBSplines",e)}combineEdgesAndWiresIntoAWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.combineEdgesAndWiresIntoAWire",e)}createWireFromEdge(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createWireFromEdge",e)}addEdgesAndWiresToWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.addEdgesAndWiresToWire",e)}divideWireByParamsToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWireByParamsToPoints",e)}divideWiresByParamsToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWiresByParamsToPoints",e)}divideWireByEqualDistanceToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWireByEqualDistanceToPoints",e)}divideWiresByEqualDistanceToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.divideWiresByEqualDistanceToPoints",e)}pointOnWireAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointOnWireAtParam",e)}pointOnWireAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointOnWireAtLength",e)}pointsOnWireAtLengths(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtLengths",e)}pointsOnWireAtEqualLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtEqualLength",e)}pointsOnWireAtPatternOfLengths(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.pointsOnWireAtPatternOfLengths",e)}tangentOnWireAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.tangentOnWireAtParam",e)}tangentOnWireAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.tangentOnWireAtLength",e)}derivativesOnWireAtLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.derivativesOnWireAtLength",e)}derivativesOnWireAtParam(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.derivativesOnWireAtParam",e)}startPointOnWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.startPointOnWire",e)}midPointOnWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.midPointOnWire",e)}endPointOnWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.endPointOnWire",e)}createCircleWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createCircleWire",e)}hexagonsInGrid(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.hexagonsInGrid",e)}createSquareWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createSquareWire",e)}createStarWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createStarWire",e)}createChristmasTreeWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createChristmasTreeWire",e)}createNGonWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createNGonWire",e)}createParallelogramWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createParallelogramWire",e)}createHeartWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createHeartWire",e)}createRectangleWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createRectangleWire",e)}createLPolygonWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createLPolygonWire",e)}createEllipseWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.createEllipseWire",e)}textWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.textWires",e)}textWiresWithData(e){return t=this,r=void 0,o=function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.textWiresWithData",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})},new((i=void 0)||(i=Promise))((function(e,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(t,r||[])).next())}));var t,r,i,o}getWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWire",e)}getWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWires",e)}getWireCenterOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWireCenterOfMass",e)}getWiresCentersOfMass(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWiresCentersOfMass",e)}reversedWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.reversedWire",e)}reversedWireFromReversedEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.reversedWireFromReversedEdges",e)}isWireClosed(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.isWireClosed",e)}getWireLength(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWireLength",e)}getWiresLengths(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.getWiresLengths",e)}placeWireOnFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.placeWireOnFace",e)}placeWiresOnFace(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.placeWiresOnFace",e)}closeOpenWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.closeOpenWire",e)}project(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.project",e)}projectWires(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.wire.projectWires",e)}}class ee{constructor(e){this.occWorkerManager=e}sewFaces(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shell.sewFaces",e)}getShellSurfaceArea(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shell.getShellSurfaceArea",e)}}class te{constructor(e){this.occWorkerManager=e}purgeInternalEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.purgeInternalEdges",e)}unifySameDomain(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.unifySameDomain",e)}isClosed(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isClosed",e)}isConvex(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isConvex",e)}isChecked(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isChecked",e)}isFree(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isFree",e)}isInfinite(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isInfinite",e)}isModified(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isModified",e)}isLocked(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isLocked",e)}isNull(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isNull",e)}isEqual(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isEqual",e)}isNotEqual(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isNotEqual",e)}isPartner(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isPartner",e)}isSame(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.isSame",e)}getOrientation(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.getOrientation",e)}getShapeType(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.shape.getShapeType",e)}}class re{constructor(e){this.occWorkerManager=e}vertexFromXYZ(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexFromXYZ",e)}vertexFromPoint(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexFromPoint",e)}verticesFromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesFromPoints",e)}verticesCompoundFromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesCompoundFromPoints",e)}getVertices(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.getVertices",e)}getVerticesAsPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.getVerticesAsPoints",e)}verticesToPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.verticesToPoints",e)}vertexToPoint(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.vertexToPoint",e)}projectPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("shapes.vertex.projectPoints",e)}}class ie{constructor(e){this.vertex=new re(e),this.edge=new X(e),this.wire=new J(e),this.face=new K(e),this.shell=new ee(e),this.solid=new $(e),this.compound=new Y(e),this.shape=new te(e)}}var oe=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ne{constructor(e){this.occWorkerManager=e}saveShapeSTEP(e){return oe(this,void 0,void 0,(function*(){this.saveSTEP(e)}))}saveShapeSTEPAndReturn(e){return oe(this,void 0,void 0,(function*(){return this.saveSTEP(e)}))}saveShapeStl(e){return oe(this,void 0,void 0,(function*(){this.saveStl(e)}))}saveShapeStlAndReturn(e){return oe(this,void 0,void 0,(function*(){return this.saveStl(e)}))}saveSTEP(e){return this.occWorkerManager.genericCallToWorkerPromise("io.saveShapeSTEP",e).then((t=>{if(e.tryDownload&&document){const r=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(r);let o=e.fileName?e.fileName:"bitbybit-dev.step";o.toLowerCase().includes(".step")||(o+=".step");const n=document.createElement("a");n.href=i,n.target="_self",n.download=o,n.click(),n.remove()}return t}))}saveStl(e){return this.occWorkerManager.genericCallToWorkerPromise("io.saveShapeStl",e).then((t=>{if(e.tryDownload&&document){const r=new Blob([t],{type:"application/stl"}),i=URL.createObjectURL(r),o=e.fileName?e.fileName:"bitbybit-dev.stl",n=document.createElement("a");n.href=i,n.target="_self",n.download=o,n.click(),n.remove()}return t}))}}class se{constructor(e){this.occWorkerManager=e}transform(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.transform",e)}rotate(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotate",e)}rotateAroundCenter(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateAroundCenter",e)}align(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.align",e)}alignNormAndAxis(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignNormAndAxis",e)}alignAndTranslate(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignAndTranslate",e)}translate(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.translate",e)}scale(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale",e)}scale3d(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale3d",e)}mirror(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirror",e)}mirrorAlongNormal(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorAlongNormal",e)}transformShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.transformShapes",e)}rotateShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateShapes",e)}rotateAroundCenterShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.rotateAroundCenterShapes",e)}alignShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignShapes",e)}alignAndTranslateShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.alignAndTranslateShapes",e)}translateShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.translateShapes",e)}scaleShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scaleShapes",e)}scale3dShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.scale3dShapes",e)}mirrorShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorShapes",e)}mirrorAlongNormalShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("transforms.mirrorAlongNormalShapes",e)}}class ae{constructor(e){this.occWorkerManager=e}loft(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.loft",e)}loftAdvanced(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.loftAdvanced",e)}closestPointsBetweenTwoShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsBetweenTwoShapes",e)}closestPointsOnShapeFromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsOnShapeFromPoints",e)}closestPointsOnShapesFromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.closestPointsOnShapesFromPoints",e)}distancesToShapeFromPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.distancesToShapeFromPoints",e)}boundingBoxOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxOfShape",e)}boundingBoxMinOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxMinOfShape",e)}boundingBoxMaxOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxMaxOfShape",e)}boundingBoxCenterOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxCenterOfShape",e)}boundingBoxSizeOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxSizeOfShape",e)}boundingBoxShapeOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingBoxShapeOfShape",e)}boundingSphereOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereOfShape",e)}boundingSphereCenterOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereCenterOfShape",e)}boundingSphereRadiusOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereRadiusOfShape",e)}boundingSphereShapeOfShape(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.boundingSphereShapeOfShape",e)}extrude(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.extrude",e)}extrudeShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.extrudeShapes",e)}splitShapeWithShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.splitShapeWithShapes",e)}revolve(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.revolve",e)}rotatedExtrude(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.rotatedExtrude",e)}pipe(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipe",e)}pipePolylineWireNGon(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipePolylineWireNGon",e)}pipeWiresCylindrical(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipeWiresCylindrical",e)}pipeWireCylindrical(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.pipeWireCylindrical",e)}offset(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.offset",e)}offsetAdv(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.offsetAdv",e)}makeThickSolidSimple(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.makeThickSolidSimple",e)}makeThickSolidByJoin(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.makeThickSolidByJoin",e)}slice(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.slice",e)}sliceInStepPattern(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.sliceInStepPattern",e)}offset3DWire(e){return this.occWorkerManager.genericCallToWorkerPromise("operations.offset3DWire",e)}}class ce{constructor(e){this.occWorkerManager=e}union(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.union",e)}difference(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.difference",e)}intersection(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.intersection",e)}meshMeshIntersectionWires(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionWires",e)}meshMeshIntersectionPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionPoints",e)}meshMeshIntersectionOfShapesWires(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionOfShapesWires",e)}meshMeshIntersectionOfShapesPoints(e){return this.occWorkerManager.genericCallToWorkerPromise("booleans.meshMeshIntersectionOfShapesPoints",e)}}class he{constructor(e){this.occWorkerManager=e}geom2dEllipse(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dEllipse",e)}geom2dTrimmedCurve(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dTrimmedCurve",e)}geom2dSegment(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geom2dSegment",e)}get2dPointFrom2dCurveOnParam(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.get2dPointFrom2dCurveOnParam",e)}geomCircleCurve(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geomCircleCurve",e)}geomEllipseCurve(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.curves.geomEllipseCurve",e)}}class le{constructor(e){this.occWorkerManager=e}cylindricalSurface(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.surfaces.cylindricalSurface",e)}surfaceFromFace(e){return this.occWorkerManager.genericCallToWorkerPromise("geom.surfaces.surfaceFromFace",e)}}class ue{constructor(e){this.curves=new he(e),this.surfaces=new le(e)}}class de{constructor(e){this.occWorkerManager=e}filletEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdges",e)}filletEdgesList(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesList",e)}filletEdgesListOneRadius(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesListOneRadius",e)}filletEdgeVariableRadius(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgeVariableRadius",e)}filletEdgesSameVariableRadius(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesSameVariableRadius",e)}filletEdgesVariableRadius(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletEdgesVariableRadius",e)}fillet3DWire(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet3DWire",e)}fillet3DWires(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet3DWires",e)}chamferEdges(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdges",e)}chamferEdgesList(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesList",e)}chamferEdgeTwoDistances(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgeTwoDistances",e)}chamferEdgesTwoDistances(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesTwoDistances",e)}chamferEdgesTwoDistancesLists(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesTwoDistancesLists",e)}chamferEdgeDistAngle(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgeDistAngle",e)}chamferEdgesDistAngle(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesDistAngle",e)}chamferEdgesDistsAngles(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.chamferEdgesDistsAngles",e)}fillet2d(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet2d",e)}fillet2dShapes(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.fillet2dShapes",e)}filletTwoEdgesInPlaneIntoAWire(e){return this.occWorkerManager.genericCallToWorkerPromise("fillets.filletTwoEdgesInPlaneIntoAWire",e)}}class pe{constructor(e){this.occWorkerManager=e}basicShapeRepair(e){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.basicShapeRepair",e)}fixSmallEdgeOnWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.fixSmallEdgeOnWire",e)}fixEdgeOrientationsAlongWire(e){return this.occWorkerManager.genericCallToWorkerPromise("shapeFix.fixEdgeOrientationsAlongWire",e)}}class fe{constructor(e){this.occWorkerManager=e}simpleLinearLengthDimension(e){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.simpleLinearLengthDimension",e)}simpleAngularDimension(e){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.simpleAngularDimension",e)}pinWithLabel(e){return this.occWorkerManager.genericCallToWorkerPromise("dimensions.pinWithLabel",e)}}var ve=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ge{constructor(e){this.occWorkerManager=e,this.shapes=new ie(e),this.geom=new ue(e),this.transforms=new se(e),this.operations=new ae(e),this.booleans=new ce(e),this.fillets=new de(e),this.shapeFix=new pe(e),this.dimensions=new fe(e),this.io=new ne(e)}shapeFacesToPolygonPoints(e){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapeFacesToPolygonPoints",e)}))}shapeToMesh(e){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapeToMesh",e)}))}shapesToMeshes(e){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("shapesToMeshes",e)}))}deleteShape(e){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("deleteShape",e)}))}deleteShapes(e){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("deleteShapes",e)}))}cleanAllCache(){return ve(this,void 0,void 0,(function*(){return yield this.occWorkerManager.genericCallToWorkerPromise("cleanAllCache",{})}))}}var me=function(e,t){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},me(e,t)};function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}me(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function ye(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,o,n=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function we(e,t,r){if(r||2===arguments.length)for(var i,o=0,n=t.length;o<n;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function Se(e){return"function"==typeof e}function ke(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Ce=ke((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Pe(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Me=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var s=ye(n),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else n.remove(this);var c=this.initialTeardown;if(Se(c))try{c()}catch(e){o=e instanceof Ce?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=ye(h),u=l.next();!u.done;u=l.next()){var d=u.value;try{_e(d)}catch(e){o=null!=o?o:[],e instanceof Ce?o=we(we([],xe(o)),xe(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}if(o)throw new Ce(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)_e(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Pe(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&Pe(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),Te=Me.EMPTY;function De(e){return e instanceof Me||e&&"closed"in e&&Se(e.remove)&&Se(e.add)&&Se(e.unsubscribe)}function _e(e){Se(e)?e():e.unsubscribe()}var Oe=null,Ee=null,We=void 0,Ae=!1,Ie=!1,Be={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=Be.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,we([e,t],xe(r))):setTimeout.apply(void 0,we([e,t],xe(r)))},clearTimeout:function(e){var t=Be.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Re(){}var Le=Fe("C",void 0,void 0);function Fe(e,t,r){return{kind:e,value:t,error:r}}var Ue=null;function ze(e){if(Ae){var t=!Ue;if(t&&(Ue={errorThrown:!1,error:null}),e(),t){var r=Ue,i=r.errorThrown,o=r.error;if(Ue=null,i)throw o}}else e()}var Ne=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,De(t)&&t.add(r)):r.destination=Ye,r}return be(t,e),t.create=function(e,t,r){return new je(e,t,r)},t.prototype.next=function(e){this.isStopped?Ze(function(e){return Fe("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Ze(Fe("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Ze(Le,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Me),Ge=Function.prototype.bind;function Ve(e,t){return Ge.call(e,t)}var He=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){qe(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){qe(e)}else qe(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){qe(e)}},e}(),je=function(e){function t(t,r,i){var o,n,s=e.call(this)||this;return Se(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:s&&Ie?((n=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&Ve(t.next,n),error:t.error&&Ve(t.error,n),complete:t.complete&&Ve(t.complete,n)}):o=t,s.destination=new He(o),s}return be(t,e),t}(Ne);function qe(e){var t;Ae?(t=e,Ae&&Ue&&(Ue.errorThrown=!0,Ue.error=t)):function(e){Be.setTimeout((function(){if(!Oe)throw e;Oe(e)}))}(e)}function Ze(e,t){var r=Ee;r&&Be.setTimeout((function(){return r(e,t)}))}var Ye={closed:!0,next:Re,error:function(e){throw e},complete:Re},Xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ke(e){return e}var $e=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,o=this,n=(i=e)&&i instanceof Ne||function(e){return e&&Se(e.next)&&Se(e.error)&&Se(e.complete)}(i)&&De(i)?e:new je(e,t,r);return ze((function(){var e=o,t=e.operator,r=e.source;n.add(t?t.call(n,r):r?o._subscribe(n):o._trySubscribe(n))})),n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Qe(t))((function(t,i){var o=new je({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Xe]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?Ke:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=Qe(e))((function(e,r){var i;t.subscribe((function(e){return i=e}),(function(e){return r(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function Qe(e){var t;return null!==(t=null!=e?e:We)&&void 0!==t?t:Promise}var Je,et,tt,rt,it,ot,nt,st,at,ct,ht,lt,ut,dt,pt,ft,vt,gt,mt,bt,yt,xt=ke((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),wt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return be(t,e),t.prototype.lift=function(e){var t=new St(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new xt},t.prototype.next=function(e){var t=this;ze((function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=ye(t.currentObservers),n=o.next();!n.done;n=o.next())n.value.next(e)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;ze((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;ze((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,i=r.hasError,o=r.isStopped,n=r.observers;return i||o?Te:(this.currentObservers=null,n.push(e),new Me((function(){t.currentObservers=null,Pe(n,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,i=t.thrownError,o=t.isStopped;r?e.error(i):o&&e.complete()},t.prototype.asObservable=function(){var e=new $e;return e.source=this,e},t.create=function(e,t){return new St(e,t)},t}($e),St=function(e){function t(t,r){var i=e.call(this)||this;return i.destination=t,i.source=r,i}return be(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Te},t}(wt);!function(e){e.loading="loading",e.loaded="loaded",e.initialised="initialised",e.computing="computing"}(Je||(Je={}));class kt{constructor(){this.occWorkerState$=new wt,this.promisesMade=[]}occWorkerAlreadyInitialised(){return!!this.occWorker}setOccWorker(e){this.occWorker=e,this.occWorker.onmessage=({data:e})=>{if("occ-initialised"===e)this.occWorkerState$.next({state:Je.initialised});else if("busy"===e)this.occWorkerState$.next({state:Je.computing});else{const t=this.promisesMade.find((t=>t.uid===e.uid));t&&void 0!==e.result&&!e.error?t.resolve(e.result):e.error&&(this.errorCallback&&this.errorCallback(e.error),t.reject(e.error)),this.promisesMade=this.promisesMade.filter((t=>t.uid!==e.uid)),0===this.promisesMade.length?this.occWorkerState$.next({state:Je.loaded}):this.occWorkerState$.next({state:Je.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(e,t){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((e,t)=>{i.resolve=e,i.reject=t}));return i.promise=o,this.promisesMade.push(i),this.occWorker.postMessage({action:{functionName:e,inputs:t},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}!function(e){let t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b;!function(e){e.arc="arc",e.intersection="intersection",e.tangent="tangent"}(t=e.joinTypeEnum||(e.joinTypeEnum={})),function(e){e.skin="skin",e.pipe="pipe",e.rectoVerso="rectoVerso"}(r=e.bRepOffsetModeEnum||(e.bRepOffsetModeEnum={})),function(e){e.approxChordLength="approxChordLength",e.approxCentripetal="approxCentripetal",e.approxIsoParametric="approxIsoParametric"}(i=e.approxParametrizationTypeEnum||(e.approxParametrizationTypeEnum={})),function(e){e.outside="outside",e.inside="inside",e.middle="middle"}(o=e.directionEnum||(e.directionEnum={})),function(e){e.iges="iges",e.step="step"}(n=e.fileTypeEnum||(e.fileTypeEnum={})),function(e){e.forward="forward",e.reversed="reversed",e.internal="internal",e.external="external"}(s=e.topAbsOrientationEnum||(e.topAbsOrientationEnum={})),function(e){e.in="in",e.out="out",e.on="on",e.unknown="unknown"}(a=e.topAbsStateEnum||(e.topAbsStateEnum={})),function(e){e.unknown="unknown",e.vertex="vertex",e.edge="edge",e.wire="wire",e.face="face",e.shell="shell",e.solid="solid",e.compSolid="compSolid",e.compound="compound",e.shape="shape"}(c=e.shapeTypeEnum||(e.shapeTypeEnum={})),function(e){e.unqualified="unqualified",e.enclosing="enclosing",e.enclosed="enclosed",e.outside="outside",e.noqualifier="noqualifier"}(h=e.gccEntPositionEnum||(e.gccEntPositionEnum={})),function(e){e.keepSide1="keepSide1",e.keepSide2="keepSide2",e.all="all"}(l=e.positionResultEnum||(e.positionResultEnum={})),function(e){e.none="none",e.keepSide1="keepSide1",e.keepSide2="keepSide2"}(u=e.circleInclusionEnum||(e.circleInclusionEnum={})),function(e){e.none="none",e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(d=e.twoCircleInclusionEnum||(e.twoCircleInclusionEnum={})),function(e){e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(p=e.fourSidesStrictEnum||(e.fourSidesStrictEnum={})),function(e){e.outside="outside",e.inside="inside"}(f=e.twoSidesStrictEnum||(e.twoSidesStrictEnum={})),function(e){e.allWithAll="allWithAll",e.inOrder="inOrder",e.inOrderClosed="inOrderClosed"}(v=e.combinationCirclesForFaceEnum||(e.combinationCirclesForFaceEnum={})),function(e){e[e.curve=0]="curve",e[e.edge=1]="edge",e[e.wire=2]="wire",e[e.face=3]="face"}(g=e.typeSpecificityEnum||(e.typeSpecificityEnum={})),function(e){e.all="all",e.closest="closest",e.furthest="furthest",e.closestAndFurthest="closestAndFurthest"}(m=e.pointProjectionTypeEnum||(e.pointProjectionTypeEnum={})),function(e){e.isCorrectedFrenet="isCorrectedFrenet",e.isFixed="isFixed",e.isFrenet="isFrenet",e.isConstantNormal="isConstantNormal",e.isDarboux="isDarboux",e.isGuideAC="isGuideAC",e.isGuidePlan="isGuidePlan",e.isGuideACWithContact="isGuideACWithContact",e.isGuidePlanWithContact="isGuidePlanWithContact",e.isDiscreteTrihedron="isDiscreteTrihedron"}(b=e.geomFillTrihedronEnum||(e.geomFillTrihedronEnum={})),e.DecomposedMeshDto=class{constructor(e,t){void 0!==e&&(this.faceList=e),void 0!==t&&(this.edgeList=t)}},e.DecomposedFaceDto=class{},e.DecomposedEdgeDto=class{},e.ShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.PointDto=class{constructor(e){this.point=[0,0,0],void 0!==e&&(this.point=e)}},e.XYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.ConstraintTanLinesFromPtToCircleDto=class{constructor(e,t,r,i,o){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=u.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==o&&(this.circleRemainder=o)}},e.ConstraintTanLinesFromTwoPtsToCircleDto=class{constructor(e,t,r,i,o,n){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=u.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point1=t),void 0!==r&&(this.point1=r),void 0!==i&&(this.tolerance=i),void 0!==o&&(this.positionResult=o),void 0!==n&&(this.circleRemainder=n)}},e.ConstraintTanLinesOnTwoCirclesDto=class{constructor(e,t,r,i,o){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainders=d.none,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==o&&(this.circleRemainders=o)}},e.ConstraintTanCirclesOnTwoCirclesDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.ConstraintTanCirclesOnCircleAndPntDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.CurveAndSurfaceDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.surface=t)}},e.FilletTwoEdgesInPlaneDto=class{constructor(e,t,r,i,o,n){this.planeOrigin=[0,0,0],this.planeDirection=[0,1,0],this.radius=.3,this.solution=-1,void 0!==e&&(this.edge1=e),void 0!==t&&(this.edge2=t),void 0!==r&&(this.planeOrigin=r),void 0!==i&&(this.planeDirection=i),void 0!==o&&(this.radius=o),void 0!==n&&(this.solution=n)}},e.ClosestPointsOnShapeFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.BoundingBoxDto=class{constructor(e){void 0!==e&&(this.bbox=e)}},e.BoundingBoxPropsDto=class{constructor(e,t,r,i){this.min=[0,0,0],this.max=[0,0,0],this.center=[0,0,0],this.size=[0,0,0],void 0!==e&&(this.min=e),void 0!==t&&(this.max=t),void 0!==r&&(this.center=r),void 0!==i&&(this.size=i)}},e.BoundingSpherePropsDto=class{constructor(e,t){this.center=[0,0,0],this.radius=0,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.SplitWireOnPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.ClosestPointsOnShapesFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t)}},e.ClosestPointsBetweenTwoShapesDto=class{constructor(e,t){void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t)}},e.FaceFromSurfaceAndWireDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.surface=e),void 0!==t&&(this.wire=t),void 0!==r&&(this.inside=r)}},e.WireOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t)}},e.DrawShapeDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shape=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==o&&(this.faceMaterial=o),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==u&&(this.vertexSize=u),void 0!==s&&(this.edgeWidth=s),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==d&&(this.precision=d),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==b&&(this.faceIndexColour=b)}},e.DrawShapesDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shapes=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==o&&(this.faceMaterial=o),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==u&&(this.vertexSize=u),void 0!==s&&(this.edgeWidth=s),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==d&&(this.precision=d),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==b&&(this.faceIndexColour=b)}},e.FaceSubdivisionDto=class{constructor(e,t,r,i,o,n,s,a,c){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepU=!1,this.removeStartEdgeU=!1,this.removeEndEdgeU=!1,this.shiftHalfStepV=!1,this.removeStartEdgeV=!1,this.removeEndEdgeV=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepU=i),void 0!==o&&(this.removeStartEdgeU=o),void 0!==n&&(this.removeEndEdgeU=n),void 0!==s&&(this.shiftHalfStepV=s),void 0!==a&&(this.removeStartEdgeV=a),void 0!==c&&(this.removeEndEdgeV=c)}},e.FaceSubdivisionToWiresDto=class{constructor(e,t,r,i,o,n){this.nrDivisions=10,this.isU=!0,this.shiftHalfStep=!1,this.removeStart=!1,this.removeEnd=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisions=t),void 0!==r&&(this.isU=r),void 0!==i&&(this.shiftHalfStep=i),void 0!==o&&(this.removeStart=o),void 0!==n&&(this.removeEnd=n)}},e.FaceSubdivideToRectangleWiresDto=class{constructor(e,t,r,i,o,n,s,a,c){this.nrRectanglesU=10,this.nrRectanglesV=10,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==o&&(this.scalePatternV=o),void 0!==n&&(this.filletPattern=n),void 0!==s&&(this.inclusionPattern=s),void 0!==a&&(this.offsetFromBorderU=a),void 0!==c&&(this.offsetFromBorderV=c)}},e.FaceSubdivideToHexagonWiresDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,this.extendUUp=!1,this.extendUBottom=!1,this.extendVUp=!1,this.extendVBottom=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==o&&(this.scalePatternU=o),void 0!==n&&(this.scalePatternV=n),void 0!==s&&(this.filletPattern=s),void 0!==a&&(this.inclusionPattern=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h),void 0!==l&&(this.extendUUp=l),void 0!==u&&(this.extendUBottom=u),void 0!==d&&(this.extendVUp=d),void 0!==p&&(this.extendVBottom=p)}},e.FaceSubdivideToHexagonHolesDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==o&&(this.holesToFaces=o),void 0!==n&&(this.scalePatternU=n),void 0!==s&&(this.scalePatternV=s),void 0!==a&&(this.filletPattern=a),void 0!==c&&(this.inclusionPattern=c),void 0!==h&&(this.offsetFromBorderU=h),void 0!==l&&(this.offsetFromBorderV=l)}},e.FaceSubdivideToRectangleHolesDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.nrRectanglesU=10,this.nrRectanglesV=10,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==o&&(this.scalePatternV=o),void 0!==n&&(this.filletPattern=n),void 0!==s&&(this.inclusionPattern=s),void 0!==a&&(this.holesToFaces=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h)}},e.FaceSubdivisionControlledDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepNthU=0,this.shiftHalfStepUOffsetN=0,this.removeStartEdgeNthU=0,this.removeStartEdgeUOffsetN=0,this.removeEndEdgeNthU=0,this.removeEndEdgeUOffsetN=0,this.shiftHalfStepNthV=0,this.shiftHalfStepVOffsetN=0,this.removeStartEdgeNthV=0,this.removeStartEdgeVOffsetN=0,this.removeEndEdgeNthV=0,this.removeEndEdgeVOffsetN=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepNthU=i),void 0!==o&&(this.shiftHalfStepUOffsetN=o),void 0!==n&&(this.removeStartEdgeNthU=n),void 0!==s&&(this.removeStartEdgeUOffsetN=s),void 0!==a&&(this.removeEndEdgeNthU=a),void 0!==c&&(this.removeEndEdgeUOffsetN=c),void 0!==h&&(this.shiftHalfStepNthV=h),void 0!==l&&(this.shiftHalfStepVOffsetN=l),void 0!==u&&(this.removeStartEdgeNthV=u),void 0!==d&&(this.removeStartEdgeVOffsetN=d),void 0!==p&&(this.removeEndEdgeNthV=p),void 0!==f&&(this.removeEndEdgeVOffsetN=f)}},e.FaceLinearSubdivisionDto=class{constructor(e,t,r,i,o,n,s){this.isU=!0,this.param=.5,this.nrPoints=10,this.shiftHalfStep=!1,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r),void 0!==i&&(this.nrPoints=i),void 0!==o&&(this.shiftHalfStep=o),void 0!==n&&(this.removeStartPoint=n),void 0!==s&&(this.removeEndPoint=s)}},e.WireAlongParamDto=class{constructor(e,t,r){this.isU=!0,this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r)}},e.WiresAlongParamsDto=class{constructor(e,t,r){this.isU=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.params=r)}},e.DataOnUVDto=class{constructor(e,t,r){this.paramU=.5,this.paramV=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.paramU=t),void 0!==r&&(this.paramV=r)}},e.DataOnUVsDto=class{constructor(e,t){this.paramsUV=[[.5,.5]],void 0!==e&&(this.shape=e),void 0!==t&&(this.paramsUV=t)}},e.PolygonDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolygonsDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polygons=e),void 0!==t&&(this.returnCompound=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolylineBaseDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesBaseDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.LineBaseDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.LinesBaseDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.SegmentBaseDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsBaseDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.TriangleBaseDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.MeshBaseDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.PolylinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.returnCompound=t)}},e.SquareDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.RectangleDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}},e.LPolygonDto=class{constructor(e,t,r,i,n,s,a,c){this.widthFirst=1,this.lengthFirst=2,this.widthSecond=.5,this.lengthSecond=2,this.align=o.outside,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.widthFirst=e),void 0!==t&&(this.lengthFirst=t),void 0!==r&&(this.widthSecond=r),void 0!==i&&(this.lengthSecond=i),void 0!==n&&(this.align=n),void 0!==s&&(this.rotation=s),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}},e.BoxDto=class{constructor(e,t,r,i,o){this.width=1,this.length=2,this.height=3,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.center=i),void 0!==o&&(this.originOnCenter=o)}},e.CubeDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.originOnCenter=r)}},e.BoxFromCornerDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.height=3,this.corner=[0,0,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.corner=i)}},e.SphereDto=class{constructor(e,t){this.radius=1,this.center=[0,0,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t)}},e.ConeDto=class{constructor(e,t,r,i,o,n){this.radius1=2,this.radius2=1,this.height=2,this.angle=360,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius1=e),void 0!==t&&(this.radius2=t),void 0!==r&&(this.height=r),void 0!==i&&(this.angle=i),void 0!==o&&(this.center=o),void 0!==n&&(this.direction=n)}},e.LineDto=class{constructor(e,t){this.start=[0,0,0],this.end=[0,1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineWithExtensionsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,1,0],this.extensionStart=.1,this.extensionEnd=.1,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.extensionStart=r),void 0!==i&&(this.extensionEnd=i)}},e.LinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.returnCompound=t)}},e.ArcEdgeTwoPointsTangentDto=class{constructor(e,t,r){this.start=[0,0,0],this.tangentVec=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.tangentVec=t),void 0!==r&&(this.end=r)}},e.ArcEdgeCircleTwoPointsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,0,1],this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.start=t),void 0!==r&&(this.end=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCircleTwoAnglesDto=class{constructor(e,t,r,i){this.alphaAngle1=0,this.alphaAngle2=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle1=t),void 0!==r&&(this.alphaAngle2=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCirclePointAngleDto=class{constructor(e,t,r,i){this.alphaAngle=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle=t),void 0!==i&&(this.sense=i)}},e.ArcEdgeThreePointsDto=class{constructor(e,t,r){this.start=[0,0,0],this.middle=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.middle=t),void 0!==r&&(this.end=r)}},e.CylinderDto=class{constructor(e,t,r,i,o,n){this.radius=1,this.height=2,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,this.originOnCenter=!1,void 0!==e&&(this.radius=e),void 0!==t&&(this.height=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i),void 0!==o&&(this.angle=o),void 0!==n&&(this.originOnCenter=n)}},e.CylindersOnLinesDto=class{constructor(e,t){void 0!==e&&(this.radius=e),void 0!==t&&(this.lines=t)}},e.FilletDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletShapesDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r)}},e.FilletEdgesListOneRadiusDto=class{constructor(e,t,r){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radius=r)}},e.FilletEdgeVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.FilletEdgesVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusLists=r),void 0!==i&&(this.paramsULists=i)}},e.FilletEdgesSameVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.Fillet3DWiresDto=class{constructor(e,t,r,i,o){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==o&&(this.indexes=o)}},e.Fillet3DWireDto=class{constructor(e,t,r,i,o){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==o&&(this.indexes=o)}},e.ChamferDto=class{constructor(e,t,r,i){this.distance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.distanceList=r),void 0!==i&&(this.indexes=i)}},e.ChamferEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.distanceList=r)}},e.ChamferEdgeDistAngleDto=class{constructor(e,t,r,i,o){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.angle=o)}},e.ChamferEdgeTwoDistancesDto=class{constructor(e,t,r,i,o){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance1=i),void 0!==o&&(this.distance2=o)}},e.ChamferEdgesTwoDistancesListsDto=class{constructor(e,t,r,i,o){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances1=i),void 0!==o&&(this.distances2=o)}},e.ChamferEdgesTwoDistancesDto=class{constructor(e,t,r,i,o){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance1=i),void 0!==o&&(this.distance2=o)}},e.ChamferEdgesDistsAnglesDto=class{constructor(e,t,r,i,o){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances=i),void 0!==o&&(this.angles=o)}},e.ChamferEdgesDistAngleDto=class{constructor(e,t,r,i,o){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.angle=o)}},e.BSplineDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BSplinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bSplines=e),void 0!==t&&(this.returnCompound=t)}},e.WireFromTwoCirclesTanDto=class{constructor(e,t,r,i,o){this.keepLines=f.outside,this.circleRemainders=p.outside,this.tolerance=1e-7,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.keepLines=r),void 0!==i&&(this.circleRemainders=i),void 0!==o&&(this.tolerance=o)}},e.FaceFromMultipleCircleTanWiresDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.circles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.FaceFromMultipleCircleTanWireCollectionsDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.listsOfCircles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.ZigZagBetweenTwoWiresDto=class{constructor(e,t,r,i,o,n){this.nrZigZags=20,this.divideByEqualDistance=!1,this.zigZagsPerEdge=!0,void 0!==e&&(this.wire1=e),void 0!==t&&(this.wire2=t),void 0!==r&&(this.nrZigZags=r),void 0!==i&&(this.inverse=i),void 0!==o&&(this.divideByEqualDistance=o),void 0!==n&&(this.zigZagsPerEdge=n)}},e.InterpolationDto=class{constructor(e,t,r){this.periodic=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.periodic=t),void 0!==r&&(this.tolerance=r)}},e.InterpolateWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.interpolations=e),void 0!==t&&(this.returnCompound=t)}},e.BezierDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BezierWeightsDto=class{constructor(e,t,r){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.weights=t),void 0!==r&&(this.closed=r)}},e.BezierWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bezierWires=e),void 0!==t&&(this.returnCompound=t)}},e.DivideDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.ProjectWireDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wire=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.ProjectPointsOnShapeDto=class{constructor(e,t,r,i){this.direction=[0,10,0],void 0!==e&&(this.points=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.projectionType=i)}},e.WiresToPointsDto=class{constructor(e,t,r,i,o,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==o&&(this.uTolerance=o),void 0!==n&&(this.minimumLength=n)}},e.EdgesToPointsDto=class{constructor(e,t,r,i,o,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==o&&(this.uTolerance=o),void 0!==n&&(this.minimumLength=n)}},e.ProjectWiresDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wires=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.DivideShapesDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.DataOnGeometryAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t)}},e.DataOnGeometryesAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.param=t)}},e.PointInFaceDto=class{constructor(e,t,r,i){this.tEdgeParam=.5,this.distance2DParam=.5,void 0!==e&&(this.face=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.tEdgeParam=r),void 0!==i&&(this.distance2DParam=i)}},e.PointsOnWireAtEqualLengthDto=class{constructor(e,t,r,i,o){this.length=.5,this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeFirst=i),void 0!==o&&(this.includeLast=o)}},e.PointsOnWireAtPatternOfLengthsDto=class{constructor(e,t,r,i,o){this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeLast=i),void 0!==o&&(this.includeLast=o)}},e.DataOnGeometryAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryesAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryAtLengthsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t)}},e.CircleDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.HexagonsInGridDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==o&&(this.flatTop=o),void 0!==n&&(this.extendTop=n),void 0!==s&&(this.extendBottom=s),void 0!==a&&(this.extendLeft=a),void 0!==c&&(this.extendRight=c),void 0!==h&&(this.scalePatternWidth=h),void 0!==l&&(this.scalePatternHeight=l),void 0!==u&&(this.filletPattern=u),void 0!==d&&(this.inclusionPattern=d)}},e.LoftDto=class{constructor(e,t){this.makeSolid=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t)}},e.LoftAdvancedDto=class{constructor(e,t,r,o,n,s,a,c,h,l,u,d){this.makeSolid=!1,this.closed=!1,this.periodic=!1,this.straight=!1,this.nrPeriodicSections=10,this.useSmoothing=!1,this.maxUDegree=3,this.tolerance=1e-7,this.parType=i.approxCentripetal,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t),void 0!==r&&(this.closed=r),void 0!==o&&(this.periodic=o),void 0!==n&&(this.straight=n),void 0!==s&&(this.nrPeriodicSections=s),void 0!==a&&(this.useSmoothing=a),void 0!==c&&(this.maxUDegree=c),void 0!==h&&(this.tolerance=h),void 0!==l&&(this.parType=l),void 0!==u&&(this.startVertex=u),void 0!==d&&(this.endVertex=d)}},e.OffsetDto=class{constructor(e,t,r,i){this.distance=.2,this.tolerance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.face=t),void 0!==r&&(this.distance=r),void 0!==i&&(this.tolerance=i)}},e.OffsetAdvancedDto=class{constructor(e,r,i,o,n,s){this.distance=.2,this.tolerance=.1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==o&&(this.tolerance=o),void 0!==n&&(this.joinType=n),void 0!==s&&(this.removeIntEdges=s)}},e.RevolveDto=class{constructor(e,t,r,i){this.angle=360,this.direction=[0,1,0],this.copy=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.copy=i)}},e.ShapeShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.WiresOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t)}},e.PipeWiresCylindricalDto=class{constructor(e,t,r,i,o){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==o&&(this.forceApproxC1=o)}},e.PipeWireCylindricalDto=class{constructor(e,t,r,i,o){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==o&&(this.forceApproxC1=o)}},e.PipePolygonWireNGonDto=class{constructor(e,t,r,i,o,n){this.radius=.1,this.nrCorners=6,this.makeSolid=!0,this.trihedronEnum=b.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.makeSolid=i),void 0!==o&&(this.trihedronEnum=o),void 0!==n&&(this.forceApproxC1=n)}},e.ExtrudeDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t)}},e.ExtrudeShapesDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.direction=t)}},e.SplitDto=class{constructor(e,t){this.localFuzzyTolerance=1e-4,this.nonDestructive=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.UnionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.DifferenceDto=class{constructor(e,t,r){this.keepEdges=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.keepEdges=r)}},e.IntersectionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.ShapeDto=class{constructor(e){void 0!==e&&(this.shape=e)}},e.MeshMeshIntersectionTwoShapesDto=class{constructor(e,t,r,i){this.precision1=.01,this.precision2=.01,void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t),void 0!==r&&(this.precision1=r),void 0!==i&&(this.precision2=i)}},e.MeshMeshesIntersectionOfShapesDto=class{constructor(e,t,r,i){this.precision=.01,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.precisionShapes=i)}},e.CompareShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.otherShape=t)}},e.FixSmallEdgesInWireDto=class{constructor(e,t,r){this.lockvtx=!1,this.precsmall=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.lockvtx=t),void 0!==r&&(this.precsmall=r)}},e.BasicShapeRepairDto=class{constructor(e,t,r,i){this.precision=.001,this.maxTolerance=.01,this.minTolerance=1e-4,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.maxTolerance=r),void 0!==i&&(this.minTolerance=i)}},e.FixClosedDto=class{constructor(e,t){this.precision=-.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t)}},e.ShapesWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.ShapeWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.tolerance=t)}},e.ShapeIndexDto=class{constructor(e,t){this.index=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.EdgeIndexDto=class{constructor(e,t){this.index=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.RotationExtrudeDto=class{constructor(e,t,r,i){this.height=1,this.angle=360,this.makeSolid=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.height=t),void 0!==r&&(this.angle=r),void 0!==i&&(this.makeSolid=i)}},e.ThickSolidByJoinDto=class{constructor(e,r,i,o,n,s,a,c){this.offset=1,this.tolerance=.001,this.intersection=!1,this.selfIntersection=!1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.shapes=r),void 0!==i&&(this.offset=i),void 0!==o&&(this.tolerance=o),void 0!==n&&(this.intersection=n),void 0!==s&&(this.selfIntersection=s),void 0!==a&&(this.joinType=a),void 0!==c&&(this.removeIntEdges=c)}},e.TransformDto=class{constructor(e,t,r,i,o){this.translation=[0,0,0],this.rotationAxis=[0,1,0],this.rotationAngle=0,this.scaleFactor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t),void 0!==r&&(this.rotationAxis=r),void 0!==i&&(this.rotationAngle=i),void 0!==o&&(this.scaleFactor=o)}},e.TransformShapesDto=class{constructor(e,t,r,i,o){this.translations=[[0,0,0]],this.rotationAxes=[[0,1,0]],this.rotationAngles=[0],this.scaleFactors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t),void 0!==r&&(this.rotationAxes=r),void 0!==i&&(this.rotationAngles=i),void 0!==o&&(this.scaleFactors=o)}},e.TranslateDto=class{constructor(e,t){this.translation=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t)}},e.TranslateShapesDto=class{constructor(e,t){this.translations=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t)}},e.AlignNormAndAxisDto=class{constructor(e,t,r,i,o,n,s){this.fromOrigin=[0,0,0],this.fromNorm=[1,0,0],this.fromAx=[0,0,1],this.toOrigin=[0,1,0],this.toNorm=[0,1,0],this.toAx=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromNorm=r),void 0!==i&&(this.fromAx=i),void 0!==o&&(this.toOrigin=o),void 0!==n&&(this.toNorm=n),void 0!==s&&(this.toAx=s)}},e.AlignDto=class{constructor(e,t,r,i,o){this.fromOrigin=[0,0,0],this.fromDirection=[0,0,1],this.toOrigin=[0,1,0],this.toDirection=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromDirection=r),void 0!==i&&(this.toOrigin=i),void 0!==o&&(this.toDirection=o)}},e.AlignShapesDto=class{constructor(e,t,r,i,o){this.fromOrigins=[[0,0,0]],this.fromDirections=[[0,0,1]],this.toOrigins=[[0,1,0]],this.toDirections=[[0,1,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.fromOrigins=t),void 0!==r&&(this.fromDirections=r),void 0!==i&&(this.toOrigins=i),void 0!==o&&(this.toDirections=o)}},e.MirrorDto=class{constructor(e,t,r){this.origin=[0,0,0],this.direction=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.direction=r)}},e.MirrorShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.directions=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.directions=r)}},e.MirrorAlongNormalDto=class{constructor(e,t,r){this.origin=[0,0,0],this.normal=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.normal=r)}},e.MirrorAlongNormalShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.normals=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.normals=r)}},e.AlignAndTranslateDto=class{constructor(e,t,r){this.direction=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.center=r)}},e.UnifySameDomainDto=class{constructor(e,t,r,i){this.unifyEdges=!0,this.unifyFaces=!0,this.concatBSplines=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.unifyEdges=t),void 0!==r&&(this.unifyFaces=r),void 0!==i&&(this.concatBSplines=i)}},e.FilterFacesPointsDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,this.flatPointsArray=!0,void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==o&&(this.gapTolerance=o),void 0!==n&&(this.keepIn=n),void 0!==s&&(this.keepOn=s),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c),void 0!==h&&(this.flatPointsArray=h)}},e.FilterFacePointsDto=class{constructor(e,t,r,i,o,n,s,a,c){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==o&&(this.gapTolerance=o),void 0!==n&&(this.keepIn=n),void 0!==s&&(this.keepOn=s),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c)}},e.FilterSolidPointsDto=class{constructor(e,t,r,i,o,n,s){this.tolerance=1e-4,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.keepIn=i),void 0!==o&&(this.keepOn=o),void 0!==n&&(this.keepOut=n),void 0!==s&&(this.keepUnknown=s)}},e.AlignAndTranslateShapesDto=class{constructor(e,t,r){this.directions=[[0,1,0]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.directions=t),void 0!==r&&(this.centers=r)}},e.RotateDto=class{constructor(e,t,r){this.axis=[0,0,1],this.angle=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.angle=r)}},e.RotateAroundCenterDto=class{constructor(e,t,r,i){this.angle=0,this.center=[0,0,0],this.axis=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.center=r),void 0!==i&&(this.axis=i)}},e.RotateShapesDto=class{constructor(e,t,r){this.angles=[0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.axes=t),void 0!==r&&(this.angles=r)}},e.RotateAroundCenterShapesDto=class{constructor(e,t,r,i){this.angles=[0],this.centers=[[0,0,0]],this.axes=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.angles=t),void 0!==r&&(this.centers=r),void 0!==i&&(this.axes=i)}},e.ScaleDto=class{constructor(e,t){this.factor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.factor=t)}},e.ScaleShapesDto=class{constructor(e,t){this.factors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.factors=t)}},e.Scale3DDto=class{constructor(e,t,r){this.scale=[1,1,1],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.scale=t),void 0!==r&&(this.center=r)}},e.Scale3DShapesDto=class{constructor(e,t,r){this.scales=[[1,1,1]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.scales=t),void 0!==r&&(this.centers=r)}},e.ShapeToMeshDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.ShapeFacesToPolygonPointsDto=class{constructor(e,t,r,i){this.precision=.01,this.adjustYtoZ=!1,this.reversedPoints=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.reversedPoints=i)}},e.ShapesToMeshesDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.SaveStepDto=class{constructor(e,t,r,i){this.fileName="shape.step",this.adjustYtoZ=!1,this.fromRightHanded=!1,this.tryDownload=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.tryDownload=i)}},e.SaveStlDto=class{constructor(e,t,r,i,o,n){this.fileName="shape.stl",this.precision=.01,this.adjustYtoZ=!1,this.tryDownload=!0,this.binary=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.adjustYtoZ=i),void 0!==o&&(this.tryDownload=o),void 0!==n&&(this.binary=n)}},e.ImportStepIgesFromTextDto=class{constructor(e,t,r){this.fileType=n.step,this.adjustZtoY=!0,void 0!==e&&(this.text=e),void 0!==t&&(this.fileType=t),void 0!==r&&(this.adjustZtoY=r)}},e.ImportStepIgesDto=class{constructor(e,t){this.adjustZtoY=!0,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.adjustZtoY=t)}},e.LoadStepOrIgesDto=class{constructor(e,t,r){this.fileName="shape.igs",this.adjustZtoY=!0,void 0!==e&&(this.filetext=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustZtoY=r)}},e.CompoundShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.ThisckSolidSimpleDto=class{constructor(e,t){this.offset=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t)}},e.Offset3DWireDto=class{constructor(e,t,r){this.offset=1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t),void 0!==r&&(this.direction=r)}},e.FaceFromWireDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.planar=t)}},e.FaceFromWireOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FacesFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FaceFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FacesFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FaceFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.SewDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.FaceIsoCurveAtParamDto=class{constructor(e,t,r){this.dir="u",void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t),void 0!==r&&(this.dir=r)}},e.DivideFaceToUVPointsDto=class{constructor(e,t,r,i){this.nrOfPointsU=10,this.nrOfPointsV=10,this.flat=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfPointsU=t),void 0!==r&&(this.nrOfPointsV=r),void 0!==i&&(this.flat=i)}},e.Geom2dEllipseDto=class{constructor(e,t,r,i,o){this.center=[0,0],this.direction=[1,0],this.radiusMinor=1,this.radiusMajor=2,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i),void 0!==o&&(this.sense=o)}},e.Geom2dCircleDto=class{constructor(e,t,r,i){this.center=[0,0],this.direction=[1,0],this.radius=1,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.sense=i)}},e.ChristmasTreeDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.height=6,this.innerDist=1.5,this.outerDist=3,this.nrSkirts=5,this.trunkHeight=1,this.trunkWidth=1,this.half=!1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.innerDist=t),void 0!==r&&(this.outerDist=r),void 0!==i&&(this.nrSkirts=i),void 0!==o&&(this.trunkHeight=o),void 0!==n&&(this.trunkWidth=n),void 0!==s&&(this.half=s),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c),void 0!==h&&(this.direction=h)}},e.StarDto=class{constructor(e,t,r,i,o,n,s){this.center=[0,0,0],this.direction=[0,1,0],this.numRays=7,this.half=!1,void 0!==e&&(this.outerRadius=e),void 0!==t&&(this.innerRadius=t),void 0!==r&&(this.numRays=r),void 0!==i&&(this.center=i),void 0!==o&&(this.direction=o),void 0!==n&&(this.offsetOuterEdges=n),void 0!==s&&(this.half=s)}},e.ParallelogramDto=class{constructor(e,t,r,i,o,n){this.center=[0,0,0],this.direction=[0,1,0],this.aroundCenter=!0,this.width=2,this.height=1,this.angle=15,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.aroundCenter=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o),void 0!==n&&(this.angle=n)}},e.Heart2DDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.rotation=0,this.sizeApprox=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.rotation=r),void 0!==i&&(this.sizeApprox=i)}},e.NGonWireDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.nrCorners=6,this.radius=1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.radius=i)}},e.EllipseDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.radiusMinor=1,this.radiusMajor=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i)}},e.TextWiresDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u){this.text="Hello World",this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=2,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.lineSpacing=o),void 0!==n&&(this.letterSpacing=n),void 0!==s&&(this.align=s),void 0!==a&&(this.extrudeOffset=a),void 0!==u&&(this.centerOnOrigin=u)}},e.GeomCylindricalSurfaceDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.Geom2dTrimmedCurveDto=class{constructor(e,t,r,i,o){this.u1=0,this.u2=1,this.sense=!0,this.adjustPeriodic=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.u1=t),void 0!==r&&(this.u2=r),void 0!==i&&(this.sense=i),void 0!==o&&(this.adjustPeriodic=o)}},e.Geom2dSegmentDto=class{constructor(e,t){this.start=[0,0],this.end=[1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.SliceDto=class{constructor(e,t,r){this.step=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.step=t),void 0!==r&&(this.direction=r)}},e.SliceInStepPatternDto=class{constructor(e,t,r){this.steps=[.1,.2],this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.steps=t),void 0!==r&&(this.direction=r)}},e.SimpleLinearLengthDimensionDto=class{constructor(e,t,r,i,o,n,s,a){this.offsetFromPoints=0,this.crossingSize=.2,this.decimalPlaces=2,this.labelSuffix="(cm)",this.labelSize=.1,this.labelOffset=.3,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromPoints=i),void 0!==o&&(this.crossingSize=o),void 0!==n&&(this.labelSuffix=n),void 0!==s&&(this.labelSize=s),void 0!==a&&(this.labelOffset=a)}},e.SimpleAngularDimensionDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.direction1=[1,0,0],this.direction2=[0,0,1],this.center=[0,0,0],this.radius=4,this.offsetFromCenter=.5,this.extraSize=0,this.decimalPlaces=2,this.labelSuffix="(deg)",this.labelSize=.1,this.labelOffset=.3,this.radians=!1,void 0!==e&&(this.direction1=e),void 0!==t&&(this.direction2=t),void 0!==r&&(this.center=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.offsetFromCenter=o),void 0!==n&&(this.extraSize=n),void 0!==s&&(this.radians=s),void 0!==a&&(this.labelSuffix=a),void 0!==c&&(this.labelSize=c),void 0!==h&&(this.labelOffset=h)}},e.PinWithLabelDto=class{constructor(e,t,r,i,o,n,s){this.startPoint=[0,0,0],this.endPoint=[0,5,2],this.direction=[0,0,1],this.offsetFromStart=0,this.label="Pin",this.labelOffset=.3,this.labelSize=.1,void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromStart=i),void 0!==o&&(this.label=o),void 0!==n&&(this.labelOffset=n),void 0!==s&&(this.labelSize=s)}}}(et||(et={})),function(e){let t;!function(e){e.left="left",e.center="center",e.right="right"}(t=e.horizontalAlignEnum||(e.horizontalAlignEnum={}))}(tt||(tt={}));class Ct{constructor(e){this.math=e}hexColor(e){return e.color}hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.color);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:void 0}rgbToHex(e){let t=e.r,r=e.g,i=e.b;return 255!==e.max&&(t=Math.round(this.math.remap({number:t,fromLow:e.min,fromHigh:e.max,toLow:0,toHigh:255})),r=Math.round(this.math.remap({number:r,fromLow:e.min,fromHigh:e.max,toLow:0,toHigh:255})),i=Math.round(this.math.remap({number:i,fromLow:e.min,fromHigh:e.max,toLow:0,toHigh:255}))),`#${Number(16777216+65536*t+256*r+i).toString(16).substring(1,7)}`}rgbObjToHex(e){return this.rgbToHex({r:e.rgb.r,g:e.rgb.g,b:e.rgb.b,min:e.min,max:e.max})}hexToRgbMapped(e){const t=this.hexToRgb(e);return{r:this.math.remap({number:t.r,fromLow:0,fromHigh:255,toLow:e.from,toHigh:e.to}),g:this.math.remap({number:t.g,fromLow:0,fromHigh:255,toLow:e.from,toHigh:e.to}),b:this.math.remap({number:t.b,fromLow:0,fromHigh:255,toLow:e.from,toHigh:e.to})}}getRedParam(e){return this.hexToRgbMapped(e).r}getGreenParam(e){return this.hexToRgbMapped(e).g}getBlueParam(e){return this.hexToRgbMapped(e).b}rgbToRed(e){return e.rgb.r}rgbToGreen(e){return e.rgb.g}rgbToBlue(e){return e.rgb.b}invert(e){const{r:t,g:r,b:i}=this.hexToRgbMapped({color:e.color,from:0,to:255});if(e.blackAndWhite)return.299*t+.587*r+.114*i>186?"#000000":"#ffffff";const o=255-t,n=255-r,s=255-i;return this.rgbToHex({r:o,g:n,b:s,min:0,max:255})}}!function(e){e.HexDto=class{constructor(e){this.color="#0000ff",void 0!==e&&(this.color=e)}},e.InvertHexDto=class{constructor(e){this.color="#0000ff",this.blackAndWhite=!1,void 0!==e&&(this.color=e)}},e.HexDtoMapped=class{constructor(e,t,r){this.color="#0000ff",this.from=0,this.to=255,void 0!==e&&(this.color=e),void 0!==t&&(this.from=t),void 0!==r&&(this.to=r)}},e.RGBObjectMaxDto=class{constructor(e,t){this.min=0,this.max=255,void 0!==e&&(this.rgb=e),void 0!==t&&(this.max=t)}},e.RGBMinMaxDto=class{constructor(e,t,r,i,o){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r),void 0!==i&&(this.min=i),void 0!==o&&(this.max=o)}},e.RGBObjectDto=class{constructor(e){void 0!==e&&(this.rgb=e)}}}(rt||(rt={})),function(e){let t;!function(e){e.first="first",e.last="last"}(t=e.firstLastEnum||(e.firstLastEnum={})),e.ListItemDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.SubListDto=class{constructor(e,t,r,i){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexStart=t),void 0!==r&&(this.indexEnd=r),void 0!==i&&(this.clone=i)}},e.ListCloneDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RepeatInPatternDto=class{constructor(e){this.clone=!0,this.lengthLimit=100,void 0!==e&&(this.list=e)}},e.SortDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.SortJsonDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.ListDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.GroupListDto=class{constructor(e,t,r){this.nrElements=2,this.keepRemainder=!1,void 0!==e&&(this.list=e),void 0!==t&&(this.nrElements=t),void 0!==r&&(this.keepRemainder=r)}},e.MultiplyItemDto=class{constructor(e,t){void 0!==e&&(this.item=e),void 0!==t&&(this.times=t)}},e.AddItemAtIndexDto=class{constructor(e,t,r,i){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.index=r),void 0!==i&&(this.clone=i)}},e.AddItemAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.AddItemsAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.items=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.RemoveItemAtIndexDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.RemoveItemsAtIndexesDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexes=t),void 0!==r&&(this.clone=r)}},e.RemoveNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.RandomThresholdDto=class{constructor(e,t,r){this.threshold=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.threshold=t),void 0!==r&&(this.clone=r)}},e.RemoveDuplicatesDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RemoveDuplicatesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.tolerance=r),void 0!==t&&(this.clone=t)}},e.GetByPatternDto=class{constructor(e,t){this.pattern=[!0,!0,!1],void 0!==e&&(this.list=e),void 0!==t&&(this.pattern=t)}},e.GetNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.GetLongestListLength=class{constructor(e){void 0!==e&&(this.lists=e)}},e.MergeElementsOfLists=class{constructor(e,t){this.level=0,void 0!==e&&(this.lists=e),void 0!==t&&(this.level=t)}},e.AddItemDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.clone=r)}},e.AddItemFirstLastDto=class{constructor(e,r,i,o){this.position=t.last,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.item=r),void 0!==i&&(this.position=i),void 0!==o&&(this.clone=o)}}}(it||(it={})),function(e){let t;!function(e){e.less="<",e.lessOrEqual="<=",e.greater=">",e.greaterOrEqual=">=",e.tripleEqual="===",e.tripleNotEqual="!==",e.equal="==",e.notEqual="!="}(t=e.BooleanOperatorsEnum||(e.BooleanOperatorsEnum={})),e.ComparisonDto=class{constructor(e,t,r){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operator=r)}},e.BooleanDto=class{constructor(e){this.boolean=!1,void 0!==e&&(this.boolean=e)}},e.BooleanListDto=class{constructor(e){void 0!==e&&(this.booleans=e)}},e.ValueGateDto=class{constructor(e,t){this.boolean=!1,void 0!==e&&(this.value=e),void 0!==t&&(this.boolean=t)}},e.TwoValueGateDto=class{constructor(e,t){void 0!==e&&(this.value1=e),void 0!==t&&(this.value2=t)}},e.RandomBooleansDto=class{constructor(e){this.length=10,this.trueThreshold=.5,void 0!==e&&(this.length=e)}},e.TwoThresholdRandomGradientDto=class{},e.ThresholdBooleanListDto=class{},e.ThresholdGapsBooleanListDto=class{}}(ot||(ot={})),function(e){let t,r,i;!function(e){e.add="add",e.subtract="subtract",e.multiply="multiply",e.divide="divide",e.power="power",e.modulus="modulus"}(t=e.mathTwoNrOperatorEnum||(e.mathTwoNrOperatorEnum={})),function(e){e.absolute="absolute",e.negate="negate",e.ln="ln",e.log10="log10",e.tenPow="tenPow",e.round="round",e.floor="floor",e.ceil="ceil",e.sqrt="sqrt",e.sin="sin",e.cos="cos",e.tan="tan",e.asin="asin",e.acos="acos",e.atan="atan",e.log="log",e.exp="exp",e.radToDeg="radToDeg",e.degToRad="degToRad"}(r=e.mathOneNrOperatorEnum||(e.mathOneNrOperatorEnum={})),function(e){e.easeInSine="easeInSine",e.easeOutSine="easeOutSine",e.easeInOutSine="easeInOutSine",e.easeInQuad="easeInQuad",e.easeOutQuad="easeOutQuad",e.easeInOutQuad="easeInOutQuad",e.easeInCubic="easeInCubic",e.easeOutCubic="easeOutCubic",e.easeInOutCubic="easeInOutCubic",e.easeInQuart="easeInQuart",e.easeOutQuart="easeOutQuart",e.easeInOutQuart="easeInOutQuart",e.easeInQuint="easeInQuint",e.easeOutQuint="easeOutQuint",e.easeInOutQuint="easeInOutQuint",e.easeInExpo="easeInExpo",e.easeOutExpo="easeOutExpo",e.easeInOutExpo="easeInOutExpo",e.easeInCirc="easeInCirc",e.easeOutCirc="easeOutCirc",e.easeInOutCirc="easeInOutCirc",e.easeInElastic="easeInElastic",e.easeOutElastic="easeOutElastic",e.easeInOutElastic="easeInOutElastic",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack",e.easeInBounce="easeInBounce",e.easeOutBounce="easeOutBounce",e.easeInOutBounce="easeInOutBounce"}(i=e.easeEnum||(e.easeEnum={})),e.ModulusDto=class{constructor(e,t){this.number=1,this.modulus=2,void 0!==e&&(this.number=e),void 0!==t&&(this.modulus=t)}},e.NumberDto=class{constructor(e){this.number=1,void 0!==e&&(this.number=e)}},e.EaseDto=class{constructor(e){this.x=.5,this.min=0,this.max=1,void 0!==e&&(this.x=e)}},e.RoundToDecimalsDto=class{constructor(e,t){this.number=1.123456,this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}},e.ActionOnTwoNumbersDto=class{constructor(e,t,r){this.first=1,this.second=1,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operation=r)}},e.TwoNumbersDto=class{constructor(e,t){this.first=1,this.second=2,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.ActionOnOneNumberDto=class{constructor(e,t){this.number=1,void 0!==e&&(this.number=e),void 0!==t&&(this.operation=t)}},e.RemapNumberDto=class{constructor(e,t,r,i,o){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==e&&(this.number=e),void 0!==t&&(this.fromLow=t),void 0!==r&&(this.fromHigh=r),void 0!==i&&(this.toLow=i),void 0!==o&&(this.toHigh=o)}},e.RandomNumberDto=class{constructor(e,t){this.low=0,this.high=1,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t)}},e.RandomNumbersDto=class{constructor(e,t,r){this.low=0,this.high=1,this.count=10,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t),void 0!==r&&(this.count=r)}},e.ToFixedDto=class{constructor(e,t){this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}}}(nt||(nt={})),(yt=st||(st={})).PointDto=class{constructor(e){void 0!==e&&(this.point=e)}},yt.PointXYZDto=class{constructor(e,t,r){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},yt.PointXYDto=class{constructor(e,t){this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},yt.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},yt.TwoPointsDto=class{constructor(e,t){void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t)}},yt.DrawPointDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.point=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.pointMesh=n)}},yt.DrawPointsDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.pointsMesh=n)}},yt.TransformPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.transformation=t)}},yt.TransformPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},yt.TranslatePointsWithVectorsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translations=t)}},yt.TranslatePointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translation=t)}},yt.TranslateXYZPointsDto=class{constructor(e,t,r,i){this.x=0,this.y=1,this.z=0,void 0!==e&&(this.points=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},yt.ScalePointsCenterXYZDto=class{constructor(e,t,r){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.scaleXyz=r)}},yt.StretchPointsDirFromCenterDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.scale=i)}},yt.RotatePointsCenterAxisDto=class{constructor(e,t,r,i){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.points=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.center=i)}},yt.TransformsForPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},yt.ThreePointsNormalDto=class{constructor(e,t,r,i){this.reverseNormal=!1,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.point3=r),void 0!==i&&(this.reverseNormal=i)}},yt.ThreePointsToleranceDto=class{constructor(e,t,r,i){this.tolerance=1e-7,void 0!==e&&(this.start=e),void 0!==t&&(this.center=t),void 0!==r&&(this.end=r),void 0!==i&&(this.tolerance=i)}},yt.PointsMaxFilletsHalfLineDto=class{constructor(e,t,r){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.checkLastWithFirst=t),void 0!==r&&(this.tolerance=r)}},yt.RemoveConsecutiveDuplicatesDto=class{constructor(e,t,r){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.tolerance=t),void 0!==r&&(this.checkFirstAndLast=r)}},yt.ClosestPointFromPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.point=t)}},yt.TwoPointsToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.tolerance=r)}},yt.StartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t)}},yt.StartEndPointsListDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoints=t)}},yt.MultiplyPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.amountOfPoints=t)}},yt.SpiralDto=class{constructor(e,t,r,i,o){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==e&&(this.radius=e),void 0!==t&&(this.numberPoints=t),void 0!==r&&(this.widening=r),void 0!==i&&(this.factor=i),void 0!==o&&(this.phi=o)}},yt.HexGridScaledToFitDto=class{constructor(e,t,r,i,o,n){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==o&&(this.centerGrid=o),void 0!==n&&(this.pointsOnGround=n)}},yt.HexGridCentersDto=class{constructor(e,t,r,i,o){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==e&&(this.nrHexagonsX=e),void 0!==t&&(this.nrHexagonsY=t),void 0!==r&&(this.radiusHexagon=r),void 0!==i&&(this.orientOnCenter=i),void 0!==o&&(this.pointsOnGround=o)}},function(e){e.TextDto=class{constructor(e){this.text="Hello World",void 0!==e&&(this.text=e)}},e.TextSplitDto=class{constructor(e,t){this.text="a,b,c",this.separator=",",void 0!==e&&(this.text=e),void 0!==t&&(this.separator=t)}},e.TextReplaceDto=class{constructor(e,t,r){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==e&&(this.text=e),void 0!==t&&(this.search=t),void 0!==r&&(this.replaceWith=r)}},e.TextJoinDto=class{constructor(e,t){this.separator=",",void 0!==e&&(this.list=e),void 0!==t&&(this.separator=t)}},e.ToStringDto=class{constructor(e){void 0!==e&&(this.item=e)}},e.ToStringEachDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.TextFormatDto=class{constructor(e,t){this.text="Hello {0}",this.values=["World"],void 0!==e&&(this.text=e),void 0!==t&&(this.values=t)}},e.VectorCharDto=class{constructor(e,t,r,i,o){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==e&&(this.char=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.extrudeOffset=o)}},e.VectorTextDto=class{constructor(e,t,r,i,o,n,s,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==o&&(this.lineSpacing=o),void 0!==n&&(this.letterSpacing=n),void 0!==s&&(this.align=s),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(at||(at={})),(bt=ct||(ct={})).RotationCenterAxisDto=class{constructor(e,t,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.center=r)}},bt.RotationCenterDto=class{constructor(e,t){this.angle=90,this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.center=t)}},bt.RotationCenterYawPitchRollDto=class{constructor(e,t,r,i){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==e&&(this.yaw=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.roll=r),void 0!==i&&(this.center=i)}},bt.ScaleXYZDto=class{constructor(e){this.scaleXyz=[1,1,1],void 0!==e&&(this.scaleXyz=e)}},bt.StretchDirCenterDto=class{constructor(e,t,r){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},bt.ScaleCenterXYZDto=class{constructor(e,t){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.center=e),void 0!==t&&(this.scaleXyz=t)}},bt.UniformScaleDto=class{constructor(e){this.scale=1,void 0!==e&&(this.scale=e)}},bt.UniformScaleFromCenterDto=class{constructor(e,t){this.scale=1,this.center=[0,0,0],void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t)}},bt.TranslationXYZDto=class{constructor(e){this.translation=[0,0,0],void 0!==e&&(this.translation=e)}},bt.TranslationsXYZDto=class{constructor(e){void 0!==e&&(this.translations=e)}},function(e){e.DateDto=class{constructor(e){void 0!==e&&(this.date=e)}},e.DateStringDto=class{constructor(e){void 0!==e&&(this.dateString=e)}},e.DateSecondsDto=class{constructor(e,t){this.seconds=30,void 0!==e&&(this.date=e),void 0!==t&&(this.seconds=t)}},e.DateDayDto=class{constructor(e,t){this.day=1,void 0!==e&&(this.date=e),void 0!==t&&(this.day=t)}},e.DateYearDto=class{constructor(e,t){this.year=1,void 0!==e&&(this.date=e),void 0!==t&&(this.year=t)}},e.DateMonthDto=class{constructor(e,t){this.month=1,void 0!==e&&(this.date=e),void 0!==t&&(this.month=t)}},e.DateHoursDto=class{constructor(e,t){this.hours=1,void 0!==e&&(this.date=e),void 0!==t&&(this.hours=t)}},e.DateMinutesDto=class{constructor(e,t){this.minutes=1,void 0!==e&&(this.date=e),void 0!==t&&(this.minutes=t)}},e.DateMillisecondsDto=class{constructor(e,t){this.milliseconds=1,void 0!==e&&(this.date=e),void 0!==t&&(this.milliseconds=t)}},e.DateTimeDto=class{constructor(e,t){this.time=1,void 0!==e&&(this.date=e),void 0!==t&&(this.time=t)}},e.CreateFromUnixTimeStampDto=class{constructor(e){this.unixTimeStamp=1,void 0!==e&&(this.unixTimeStamp=e)}},e.CreateDateDto=class{constructor(e,t,r,i,o,n,s){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==e&&(this.year=e),void 0!==t&&(this.month=t),void 0!==r&&(this.day=r),void 0!==i&&(this.hours=i),void 0!==o&&(this.minutes=o),void 0!==n&&(this.seconds=n),void 0!==s&&(this.milliseconds=s)}}}(ht||(ht={})),(mt=lt||(lt={})).LinePointsDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},mt.LineStartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoints=e),void 0!==t&&(this.endPoints=t)}},mt.DrawLineDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.line=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.lineMesh=n)}},mt.DrawLinesDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.linesMesh=n)}},mt.PointsLinesDto=class{constructor(e){void 0!==e&&(this.points=e)}},mt.LineDto=class{constructor(e){void 0!==e&&(this.line=e)}},mt.SegmentDto=class{constructor(e){void 0!==e&&(this.segment=e)}},mt.SegmentsDto=class{constructor(e){void 0!==e&&(this.segments=e)}},mt.LinesDto=class{constructor(e){void 0!==e&&(this.lines=e)}},mt.LineLineIntersectionDto=class{constructor(e,t,r){this.checkSegmentsOnly=!0,void 0!==e&&(this.line1=e),void 0!==t&&(this.line2=t),void 0!==r&&(this.tolerance=r)}},mt.PointOnLineDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.line=e),void 0!==t&&(this.param=t)}},mt.TransformLineDto=class{constructor(e,t){void 0!==e&&(this.line=e),void 0!==t&&(this.transformation=t)}},mt.TransformsLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}},mt.TransformLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}},(gt=ut||(ut={})).PolylineCreateDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},gt.PolylinePropertiesDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},gt.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},gt.PolylinesDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},gt.TransformPolylineDto=class{constructor(e,t){void 0!==e&&(this.polyline=e),void 0!==t&&(this.transformation=t)}},gt.DrawPolylineDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polyline=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.polylineMesh=n)}},gt.DrawPolylinesDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.polylinesMesh=n)}},gt.SegmentsToleranceDto=class{constructor(e){this.tolerance=1e-5,void 0!==e&&(this.segments=e)}},gt.PolylineToleranceDto=class{constructor(e,t){this.tolerance=1e-5,void 0!==e&&(this.polyline=e),void 0!==t&&(this.tolerance=t)}},gt.TwoPolylinesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-5,void 0!==e&&(this.polyline1=e),void 0!==t&&(this.polyline2=t),void 0!==r&&(this.tolerance=r)}},(vt=dt||(dt={})).SignedDistanceFromPlaneToPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.plane=t)}},vt.TriangleDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},vt.TriangleToleranceDto=class{constructor(e){this.tolerance=1e-7,void 0!==e&&(this.triangle=e)}},vt.TriangleTriangleToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.triangle1=e),void 0!==t&&(this.triangle2=t),void 0!==r&&(this.tolerance=r)}},vt.MeshMeshToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.mesh1=e),void 0!==t&&(this.mesh2=t),void 0!==r&&(this.tolerance=r)}},(ft=pt||(pt={})).TwoVectorsDto=class{constructor(e,t){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},ft.VectorBoolDto=class{constructor(e){void 0!==e&&(this.vector=e)}},ft.RemoveAllDuplicateVectorsDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.tolerance=t)}},ft.RemoveConsecutiveDuplicateVectorsDto=class{constructor(e,t,r){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.checkFirstAndLast=t),void 0!==r&&(this.tolerance=r)}},ft.VectorsTheSameDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.vec1=e),void 0!==t&&(this.vec2=t),void 0!==r&&(this.tolerance=r)}},ft.VectorDto=class{constructor(e){void 0!==e&&(this.vector=e)}},ft.Vector3Dto=class{constructor(e){void 0!==e&&(this.vector=e)}},ft.RangeMaxDto=class{constructor(e){void 0!==e&&(this.max=e)}},ft.VectorXYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},ft.VectorXYDto=class{constructor(e,t){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},ft.SpanDto=class{constructor(e,t,r){this.step=.1,this.min=0,this.max=1,void 0!==e&&(this.step=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},ft.SpanEaseItemsDto=class{constructor(e,t,r,i){this.nrItems=100,this.min=0,this.max=1,this.ease=nt.easeEnum.easeInSine,this.intervals=!1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r),void 0!==i&&(this.ease=i)}},ft.SpanLinearItemsDto=class{constructor(e,t,r){this.nrItems=100,this.min=0,this.max=1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},ft.RayPointDto=class{constructor(e,t,r){void 0!==e&&(this.point=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.vector=r)}},ft.VectorsDto=class{constructor(e){void 0!==e&&(this.vectors=e)}},ft.FractionTwoVectorsDto=class{constructor(e,t,r){this.fraction=.5,void 0!==e&&(this.fraction=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}},ft.VectorScalarDto=class{constructor(e,t){void 0!==e&&(this.scalar=e),void 0!==t&&(this.vector=t)}},ft.TwoVectorsReferenceDto=class{constructor(e,t,r){void 0!==e&&(this.reference=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}};class Pt{getItem(e){if(e.index<0||e.index>=e.list.length)throw new Error("Index out of bounds");let t;return t=e.clone?structuredClone(e.list[e.index]):e.list[e.index],t}randomGetThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()<e.threshold&&r.push(t[i]);return r}getSubList(e){let t;return t=e.clone?structuredClone(e.list.slice(e.indexStart,e.indexEnd)):e.list.slice(e.indexStart,e.indexEnd),t}getNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth==0&&r.push(t[i]);return r}getByPattern(e){const{list:t,pattern:r}=e;if(!r||0===r.length)throw new Error("Pattern is empty or does not exist");const i=r.length,o=t.length,n=[];if(i>=o)t.forEach(((e,t)=>{!0===r[t]&&n.push(e)}));else{const e=[],s=Math.ceil(o/i);for(let t=0;t<s;t++)e.push(...r);t.forEach(((t,r)=>{!0===e[r]&&n.push(t)}))}return n}mergeElementsOfLists(e){const t=e.lists,r=e.level,i=[],o=[];t.forEach((e=>{const t=e.flat(r);i.push(t)}));const n=this.getLongestListLength({lists:i});for(let e=0;e<n;e++){const t=[];for(let r=0;r<i.length;r++){const o=i[r][e];void 0!==o&&t.push(o)}t.length>0&&o.push(t)}let s=[];if(r>0)for(let e=0;e<r;e++)e===r-1&&0!==e?s[e-1].push(o):e===r-1?s.push(o):s.push([]);else s=o;return s}getLongestListLength(e){let t=0;return e.lists?(e.lists.forEach((e=>{e.length>t&&(t=e.length)})),t):void 0}reverse(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.reverse()}flipLists(e){if(e.list.length>0){const t=e.list[0].length;let r=!0;if(e.list.forEach((e=>{e.length!==t&&(r=!1)})),r){const r=[];for(let i=0;i<t;i++){const t=[];e.list.forEach((e=>{t.push(e[i])})),r.push(t)}return r}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(e){return(e=>{const{nrElements:t,list:r,keepRemainder:i}=e,o=t,n=[];let s=[];return r.forEach(((e,t)=>{s.push(e),(t+1)%o==0&&(n.push(s),s=[]),s.length>0&&i&&t===r.length-1&&n.push(s)})),n})(e)}getListDepth(e){let t=0,r=!0,i=e.list;for(;r;){let e=!1;for(let t=0;t<i.length;t++)Array.isArray(i[t])&&(e=!0);i=i.flat(),e?t++:(t++,r=!1)}return t}listLength(e){return e.list.length}addItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,0,e.item),t}addItemAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));let r=[...e.indexes];return r=r.filter((e=>e>=0&&e<=t.length)),r.sort(((e,t)=>e-t)),r.forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.item)})),t}addItemsAtIndexes(e){if(e.items.length!==e.indexes.length)throw new Error("Items and indexes must have the same length");for(let t=0;t<e.indexes.length;t++)if(t>0&&e.indexes[t-1]>e.indexes[t])throw new Error("Indexes must be in ascending order");let t=e.list;return e.clone&&(t=structuredClone(e.list)),[...e.indexes].forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.items[i])})),t}removeItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,1),t}removeItemsAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[...e.indexes];return r.sort(((e,t)=>t-e)),r.forEach((e=>{e>=0&&e<t.length&&t.splice(e,1)})),t}removeAllItems(e){return e.list.length=0,e.list}removeNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth!=0&&r.push(t[i]);return r}randomRemoveThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()>e.threshold&&r.push(t[i]);return r}removeDuplicateNumbers(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((e,t,r)=>r.indexOf(e)===t))}removeDuplicateNumbersTolerance(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((t,r,i)=>i.findIndex((r=>Math.abs(r-t)<e.tolerance))===r))}addItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.push(e.item),t}prependItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.unshift(e.item),t}addItemFirstLast(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.position===it.firstLastEnum.first?t.unshift(e.item):t.push(e.item),t}createEmptyList(){return[]}repeat(e){const t=[];for(let r=0;r<e.times;r++)t.push(e.item);return t}repeatInPattern(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];let i=0,o=0;for(;i<e.lengthLimit;)r.push(t[o]),o++,o===t.length&&(o=0),i++;return r}sortNumber(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((e,t)=>e-t)):t.sort(((e,t)=>t-e))}sortTexts(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort():t.sort().reverse()}sortByPropValue(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((t,r)=>t[e.property]-r[e.property])):t.sort(((t,r)=>r[e.property]-t[e.property]))}}class Mt{boolean(e){return e.boolean}randomBooleans(e){const t=[];for(let r=0;r<e.length;r++)t.push(Math.random()<e.trueThreshold);return t}twoThresholdRandomGradient(e){const t=[];return e.numbers.forEach((r=>{if(r<e.thresholdTotalTrue)t.push(!0);else if(r>e.thresholdTotalFalse)t.push(!1);else{const i=r-e.thresholdTotalTrue,o=(e.thresholdTotalFalse-e.thresholdTotalTrue)/e.nrLevels,n=Math.ceil(i/o)/e.nrLevels;Math.random()>n?t.push(!0):t.push(!1)}})),t}thresholdBooleanList(e){const t=[];return e.numbers.forEach((r=>{r<e.threshold?t.push(!0):t.push(!1)})),e.inverse?t.map((e=>!e)):t}thresholdGapsBooleanList(e){const t=[];return e.numbers.forEach((r=>{let i=!1;e.gapThresholds.forEach((e=>{const o=e[0],n=e[1];r>=o&&r<=n&&(t.push(!0),i=!0)})),i||t.push(!1)})),e.inverse?t.map((e=>!e)):t}not(e){return!e.boolean}notList(e){return e.booleans.map((e=>!e))}compare(e){switch(e.operator){case"==":return e.first==e.second;case"!=":return e.first!=e.second;case"===":return e.first===e.second;case"!==":return e.first!==e.second;case"<":return e.first<e.second;case"<=":return e.first<=e.second;case">":return e.first>e.second;case">=":return e.first>=e.second;default:return!1}}valueGate(e){return e.boolean?e.value:void 0}firstDefinedValueGate(e){let t;return t=void 0!==e.value1?e.value1:void 0!==e.value2?e.value2:void 0,t}}class Tt{number(e){return e.number}twoNrOperation(e){let t;switch(e.operation){case nt.mathTwoNrOperatorEnum.add:t=e.first+e.second;break;case nt.mathTwoNrOperatorEnum.subtract:t=e.first-e.second;break;case nt.mathTwoNrOperatorEnum.multiply:t=e.first*e.second;break;case nt.mathTwoNrOperatorEnum.divide:t=e.first/e.second;break;case nt.mathTwoNrOperatorEnum.power:t=Math.pow(e.first,e.second);break;case nt.mathTwoNrOperatorEnum.modulus:t=e.first%e.second}return t}modulus(e){return this.twoNrOperation({first:e.number,second:e.modulus,operation:nt.mathTwoNrOperatorEnum.modulus})}roundToDecimals(e){return Math.round(e.number*Math.pow(10,e.decimalPlaces))/Math.pow(10,e.decimalPlaces)}oneNrOperation(e){let t;switch(e.operation){case nt.mathOneNrOperatorEnum.absolute:t=Math.abs(e.number);break;case nt.mathOneNrOperatorEnum.negate:t=-e.number;break;case nt.mathOneNrOperatorEnum.ln:t=Math.log(e.number);break;case nt.mathOneNrOperatorEnum.log10:t=Math.log10(e.number);break;case nt.mathOneNrOperatorEnum.tenPow:t=Math.pow(10,e.number);break;case nt.mathOneNrOperatorEnum.round:t=Math.round(e.number);break;case nt.mathOneNrOperatorEnum.floor:t=Math.floor(e.number);break;case nt.mathOneNrOperatorEnum.ceil:t=Math.ceil(e.number);break;case nt.mathOneNrOperatorEnum.sqrt:t=Math.sqrt(e.number);break;case nt.mathOneNrOperatorEnum.sin:t=Math.sin(e.number);break;case nt.mathOneNrOperatorEnum.cos:t=Math.cos(e.number);break;case nt.mathOneNrOperatorEnum.tan:t=Math.tan(e.number);break;case nt.mathOneNrOperatorEnum.asin:t=Math.asin(e.number);break;case nt.mathOneNrOperatorEnum.acos:t=Math.acos(e.number);break;case nt.mathOneNrOperatorEnum.atan:t=Math.atan(e.number);break;case nt.mathOneNrOperatorEnum.log:t=Math.log(e.number);break;case nt.mathOneNrOperatorEnum.exp:t=Math.exp(e.number);break;case nt.mathOneNrOperatorEnum.degToRad:t=e.number*Math.PI/180;break;case nt.mathOneNrOperatorEnum.radToDeg:t=180*e.number/Math.PI}return t}remap(e){return(e.number-e.fromLow)*(e.toHigh-e.toLow)/(e.fromHigh-e.fromLow)+e.toLow}random(){return Math.random()}randomNumber(e){return Math.random()*(e.high-e.low)+e.low}randomNumbers(e){const t=[];for(let r=0;r<e.count;r++)t.push(this.randomNumber(e));return t}pi(){return Math.PI}toFixed(e){return e.number.toFixed(e.decimalPlaces)}add(e){return e.first+e.second}subtract(e){return e.first-e.second}multiply(e){return e.first*e.second}divide(e){return e.first/e.second}power(e){return Math.pow(e.first,e.second)}sqrt(e){return Math.sqrt(e.number)}abs(e){return Math.abs(e.number)}round(e){return Math.round(e.number)}floor(e){return Math.floor(e.number)}ceil(e){return Math.ceil(e.number)}negate(e){return-e.number}ln(e){return Math.log(e.number)}log10(e){return Math.log10(e.number)}tenPow(e){return Math.pow(10,e.number)}sin(e){return Math.sin(e.number)}cos(e){return Math.cos(e.number)}tan(e){return Math.tan(e.number)}asin(e){return Math.asin(e.number)}acos(e){return Math.acos(e.number)}atan(e){return Math.atan(e.number)}exp(e){return Math.exp(e.number)}degToRad(e){return e.number*Math.PI/180}radToDeg(e){return 180*e.number/Math.PI}ease(e){const t=e.x,r=e.min,i=e.max,o=this[e.ease](t);return this.remap({number:o,fromLow:0,fromHigh:1,toLow:r,toHigh:i})}easeInSine(e){return 1-Math.cos(e*Math.PI/2)}easeOutSine(e){return Math.sin(e*Math.PI/2)}easeInOutSine(e){return-(Math.cos(Math.PI*e)-1)/2}easeInQuad(e){return e*e}easeOutQuad(e){return 1-(1-e)*(1-e)}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}easeInCubic(e){return e*e*e}easeOutCubic(e){return 1-Math.pow(1-e,3)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}easeInQuart(e){return e*e*e*e}easeOutQuart(e){return 1-Math.pow(1-e,4)}easeInOutQuart(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}easeInQuint(e){return e*e*e*e*e}easeOutQuint(e){return 1-Math.pow(1-e,5)}easeInOutQuint(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}easeInExpo(e){return 0===e?0:Math.pow(2,10*e-10)}easeOutExpo(e){return 1===e?1:1-Math.pow(2,-10*e)}easeInOutExpo(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}easeInCirc(e){return 1-Math.sqrt(1-e*e)}easeOutCirc(e){return Math.sqrt(1-Math.pow(e-1,2))}easeInOutCirc(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}easeInBack(e){return 2.70158*e*e*e-1.70158*e*e}easeOutBack(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}easeInOutBack(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}easeInElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)}easeOutElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1}easeInOutElastic(e){const t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}easeInBounce(e){return 1-this.easeOutBounce(1-e)}easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375}easeInOutBounce(e){return e<.5?(1-this.easeOutBounce(1-2*e))/2:(1+this.easeOutBounce(2*e-1))/2}}class Dt{constructor(e,t,r,i){this.geometryHelper=e,this.transforms=t,this.vector=r,this.lists=i}transformPoint(e){const t=e.transformation;let r=[e.point];return r=this.geometryHelper.transformControlPoints(t,r),r[0]}transformPoints(e){return this.geometryHelper.transformControlPoints(e.transformation,e.points)}transformsForPoints(e){if(e.points.length!==e.transformation.length)throw new Error("You must provide equal nr of points and transformations");return e.points.map(((t,r)=>this.geometryHelper.transformControlPoints(e.transformation[r],[t])[0]))}translatePoints(e){const t=this.transforms.translationXYZ({translation:e.translation});return this.geometryHelper.transformControlPoints(t,e.points)}translatePointsWithVectors(e){if(e.points.length!==e.translations.length)throw new Error("You must provide equal nr of points and translations");const t=this.transforms.translationsXYZ({translations:e.translations});return e.points.map(((e,r)=>this.geometryHelper.transformControlPoints(t[r],[e])[0]))}translateXYZPoints(e){const t=this.transforms.translationXYZ({translation:[e.x,e.y,e.z]});return this.geometryHelper.transformControlPoints(t,e.points)}scalePointsCenterXYZ(e){const t=this.transforms.scaleCenterXYZ({center:e.center,scaleXyz:e.scaleXyz});return this.geometryHelper.transformControlPoints(t,e.points)}stretchPointsDirFromCenter(e){const t=this.transforms.stretchDirFromCenter({center:e.center,scale:e.scale,direction:e.direction});return this.geometryHelper.transformControlPoints(t,e.points)}rotatePointsCenterAxis(e){const t=this.transforms.rotationCenterAxis({center:e.center,axis:e.axis,angle:e.angle});return this.geometryHelper.transformControlPoints(t,e.points)}boundingBoxOfPoints(e){const t=[],r=[],i=[];e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])}));const o=[Math.min(...t),Math.min(...r),Math.min(...i)],n=[Math.max(...t),Math.max(...r),Math.max(...i)];return{min:o,max:n,center:[(o[0]+n[0])/2,(o[1]+n[1])/2,(o[2]+n[2])/2],width:n[0]-o[0],height:n[1]-o[1],length:n[2]-o[2]}}closestPointFromPointsDistance(e){return this.closestPointFromPointData(e).distance}closestPointFromPointsIndex(e){return this.closestPointFromPointData(e).index}closestPointFromPoints(e){return this.closestPointFromPointData(e).point}distance(e){const t=e.endPoint[0]-e.startPoint[0],r=e.endPoint[1]-e.startPoint[1],i=e.endPoint[2]-e.startPoint[2];return Math.sqrt(t*t+r*r+i*i)}distancesToPoints(e){return e.endPoints.map((t=>this.distance({startPoint:e.startPoint,endPoint:t})))}multiplyPoint(e){const t=[];for(let r=0;r<e.amountOfPoints;r++)t.push([e.point[0],e.point[1],e.point[2]]);return t}getX(e){return e.point[0]}getY(e){return e.point[1]}getZ(e){return e.point[2]}averagePoint(e){const t=[],r=[],i=[];return e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])})),[t.reduce(((e,t)=>e+t),0)/e.points.length,r.reduce(((e,t)=>e+t),0)/e.points.length,i.reduce(((e,t)=>e+t),0)/e.points.length]}pointXYZ(e){return[e.x,e.y,e.z]}pointXY(e){return[e.x,e.y]}spiral(e){const t=e.phi,r=Math.log(t)/(Math.PI/e.widening),i=[],o=e.radius/e.numberPoints;for(let t=0;t<e.radius;t+=o){const o=Math.log(t/e.factor)/r,n=t*Math.cos(o),s=t*Math.sin(o);i.push([n||0,s||0,0])}return i}hexGrid(e){const t=Math.sqrt(Math.pow(e.radiusHexagon,2)-Math.pow(e.radiusHexagon/2,2)),r=[];for(let i=0;i<e.nrHexagonsX;i++){const o=i*t*2;for(let i=0;i<e.nrHexagonsY;i++){const n=(e.radiusHexagon+e.radiusHexagon/2)*i,s=o+(i%2==0?0:t);r.push([s,n,0])}}if(e.orientOnCenter){const e=r[r.length-1][0]/2,t=r[r.length-1][1]/2;r.forEach(((i,o)=>{r[o]=[i[0]-e,i[1]-t,0]}))}return e.pointsOnGround&&r.forEach(((e,t)=>{r[t]=[e[0],0,e[1]]})),r}hexGridScaledToFit(e){var t,r,i,o;let n=e.width,s=e.height,a=e.nrHexagonsInHeight,c=e.nrHexagonsInWidth,h=null!==(t=e.extendTop)&&void 0!==t&&t,l=null!==(r=e.extendBottom)&&void 0!==r&&r,u=null!==(i=e.extendLeft)&&void 0!==i&&i,d=null!==(o=e.extendRight)&&void 0!==o&&o;const{flatTop:p=!1,centerGrid:f=!1,pointsOnGround:v=!1}=e;if(p){const t=n;n=e.height,s=t;const r=c;c=a,a=r;const i=h,o=l;h=u,l=d,u=o,d=i}if(n<=0||s<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const m=g.map((e=>this.getRegularHexagonVertices(e,1)));let b=1/0,y=-1/0,x=1/0,w=-1/0;for(const e of m)for(const t of e)t[0]<b&&(b=t[0]),t[0]>y&&(y=t[0]),t[1]<x&&(x=t[1]),t[1]>w&&(w=t[1]);const S=y-b,k=w-x,C=S>1e-9?n/S:1,P=k>1e-9?s/k:1;let M=g.map((e=>[(e[0]-b)*C,(e[1]-x)*P,0])),T=m.map((e=>e.map((e=>[(e[0]-b)*C,(e[1]-x)*P,0])))),D=1/0,_=-1/0,O=0;if(0!==T.length){const e=T[0];if(O=this.safestPointsMaxFilletHalfLine({points:e,checkLastWithFirst:!0,tolerance:1e-7}),e.forEach(((t,r)=>{const i=e[(r+1)%e.length],o=this.distance({startPoint:t,endPoint:i});o<D&&(D=o),o>_&&(_=o)})),h||l||u||d){const t=e[0],r=e[1],i=t[1]-r[1],o=r[0]-t[0];if(h&&!l){const e={center:[0,0,0],direction:[0,1,0],scale:s/(s-i)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}if(l&&!h){const e={center:[0,s,0],direction:[0,-1,0],scale:s/(s-i)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}if(h&&l){const e={center:[0,s/2,0],direction:[0,1,0],scale:s/(s-2*i)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}if(u&&!d){const e={center:[n,0,0],direction:[1,0,0],scale:n/(n-o)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}if(d&&!u){const e={center:[0,0,0],direction:[1,0,0],scale:n/(n-o)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}if(u&&d){const e={center:[n/2,0,0],direction:[1,0,0],scale:n/(n-2*o)};T=T.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=M,M=this.stretchPointsDirFromCenter(e)}}}if(p){M=this.rotatePointsCenterAxis({points:M,center:[n/2,s/2,0],axis:[0,0,1],angle:90}),T=T.map((e=>this.rotatePointsCenterAxis({points:e,center:[n/2,s/2,0],axis:[0,0,1],angle:90})));const e=this.vector.sub({first:[s/2,n/2,0],second:[n/2,s/2,0]});M=this.translatePoints({points:M,translation:e}),T=T.map((t=>this.translatePoints({points:t,translation:e})))}if(f){let e=n/2,t=s/2;p&&(e=s/2,t=n/2);for(let r=0;r<M.length;r++)M[r][0]-=e,M[r][1]-=t;for(let r=0;r<T.length;r++)for(let i=0;i<T[r].length;i++)T[r][i][0]-=e,T[r][i][1]-=t}if(v){for(let e=0;e<M.length;e++)M[e]=[M[e][0],0,M[e][1]];for(let e=0;e<T.length;e++)for(let t=0;t<T[e].length;t++)T[e][t]=[T[e][t][0],0,T[e][t][1]]}if(p){const t=this.lists.groupNth({list:T.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:t});r.forEach((e=>e.reverse())),T=r.flat();const i=this.lists.groupNth({list:M.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),o=this.lists.flipLists({list:i});o.forEach((e=>e.reverse())),M=o.flat()}return{centers:M,hexagons:T,shortestDistEdge:D,longestDistEdge:_,maxFilletRadius:O}}maxFilletRadius(e){const{start:t,center:r,end:i,tolerance:o=1e-7}=e,n=this.vector.sub({first:t,second:i}),s=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:n}),c=this.vector.length({vector:s});if(a<o||c<o)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:s});if(!h||!l)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(u>1-o)return 0;if(u<-1+o)return 0;const d=Math.acos(u),p=Math.tan(d/2);return p<o?0:Math.min(a,c)*p}maxFilletRadiusHalfLine(e){const{start:t,center:r,end:i,tolerance:o=1e-7}=e,n=this.vector.sub({first:t,second:i}),s=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:n}),c=this.vector.length({vector:s});if(a<o||c<o)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:s});if(!h||!l)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(u>1-o||u<-1+o)return 0;const d=Math.acos(u),p=Math.tan(d/2);return p<o?0:Math.min(a/2,c/2)*p}maxFilletsHalfLine(e){const{points:t,checkLastWithFirst:r=!1,tolerance:i=1e-7}=e,o=t.length,n=[];if(o<3)return n;for(let e=1;e<o-1;e++){const r=t[e-1],o=t[e],s={start:r,center:t[e+1],end:o,tolerance:i};n.push(this.maxFilletRadiusHalfLine(s))}if(r&&o>=3){const e=t[o-1],r=t[0],s={start:e,center:t[1],end:r,tolerance:i};n.push(this.maxFilletRadiusHalfLine(s));const a=t[o-2],c=t[o-1],h={start:a,center:t[0],end:c,tolerance:i};n.push(this.maxFilletRadiusHalfLine(h))}return n}safestPointsMaxFilletHalfLine(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}removeConsecutiveDuplicates(e){return this.geometryHelper.removeConsecutivePointDuplicates(e.points,e.checkFirstAndLast,e.tolerance)}normalFromThreePoints(e){const t=e.point1,r=e.point2,i=e.point3;if(!t||!r||!i||3!==t.length||3!==r.length||3!==i.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const o=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2],a=i[0]-t[0],c=i[1]-t[1],h=i[2]-t[2];let l=n*h-s*c,u=s*a-o*h,d=o*c-n*a;if(0!==l||0!==u||0!==d)return e.reverseNormal&&(l=-l,u=-u,d=-d),this.vector.normalized({vector:[l,u,d]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(e){let t,r,i=Number.MAX_SAFE_INTEGER;for(let o=0;o<e.points.length;o++){const n=e.points[o],s=this.distance({startPoint:e.point,endPoint:n});s<i&&(i=s,t=o,r=n)}return{index:t+1,distance:i,point:r}}twoPointsAlmostEqual(e){const t=e.point1,r=e.point2;return this.distance({startPoint:t,endPoint:r})<e.tolerance}sortPoints(e){return[...e.points].sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]))}getRegularHexagonVertices(e,t){const r=[],i=e[0],o=e[1],n=e[2],s=Math.PI/3;for(let e=0;e<6;e++){const a=s*e;r.push([i+t*Math.sin(a),o+t*Math.cos(a),n])}return r}}const _t={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class Ot{constructor(e){this.point=e}create(e){return e.text}split(e){return e.text.split(e.separator)}replaceAll(e){return e.text.split(e.search).join(e.replaceWith)}join(e){return e.list.join(e.separator)}toString(e){return e.item.toString()}toStringEach(e){return e.list.map((e=>e.toString()))}format(e){return e.text.replace(/{(\d+)}/g,((t,r)=>void 0!==e.values[r]?e.values[r]:t))}vectorChar(e){const{xOffset:t,yOffset:r,font:i,input:o,height:n,extrudeOffset:s}=this.vectorParamsChar(e);let a=o.charCodeAt(0);a&&i[a]||(a=63);const c=[].concat(i[a]),h=(n-s)/i.height,l=s/2,u=c.shift()*h,d=[];let p=[];for(let e=0,i=c.length;e<i;e+=2){const i=h*c[e]+t,o=h*c[e+1]+r+l;void 0===c[e]?(d.push(p),p=[],e--):p.push([i,0,o])}return p.length&&d.push(p),{width:u,height:n,paths:d}}vectorText(e){const{xOffset:t,yOffset:r,height:i,align:o,extrudeOffset:n,lineSpacing:s,letterSpacing:a}=Object.assign({},_t,e),c=e.text;if("string"!=typeof c)throw new Error("text must be a string");const h=i*a;let l=0,u={width:0,height:0,chars:[]},d=[];const p=()=>{l=Math.max(l,u.width),u.chars.length&&d.push(u),u={width:0,height:0,chars:[]}};let f,v=t,g=r;const m=c.length;for(let e=0;e<m;e++){const r=c[e];if("\n"===r){p(),v=t,g-=i*s;continue}f=this.vectorChar({xOffset:v,yOffset:g,height:i,extrudeOffset:n,char:r});const o=f.width+h;v+=o,u.width+=o,u.height=Math.max(u.height,f.height)," "!==r&&(u.chars=u.chars.concat(f))}if(u.chars.length&&p(),d=d.map((e=>{const t=l-e.width;return o===tt.horizontalAlignEnum.right?this.translateLine({x:t},e):o===tt.horizontalAlignEnum.center?this.translateLine({x:t/2},e):e})),e.centerOnOrigin){const e=[];d.forEach((t=>{t.chars.forEach((t=>{t.paths.forEach((t=>{e.push(...t)}))}))}));const t=this.point.boundingBoxOfPoints({points:e});d.forEach((e=>{e.chars.forEach((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[-t.center[0],-t.center[1],-t.center[2]]}))),e)))}))}return d}vectorParamsChar(e){const t=Object.assign({},_t,e);return t.input=e.char||t.char,t}translateLine(e,t){const{x:r,y:i}=Object.assign({x:0,y:0},e);return t.chars=t.chars.map((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[r,0,i]}))),e))),t}}class Et{toDateString(e){return e.date.toDateString()}toISOString(e){return e.date.toISOString()}toJSON(e){return e.date.toJSON()}toString(e){return e.date.toString()}toTimeString(e){return e.date.toTimeString()}toUTCString(e){return e.date.toUTCString()}now(){return new Date(Date.now())}createDate(e){return new Date(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.milliseconds)}createDateUTC(e){return new Date(Date.UTC(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.milliseconds))}createFromUnixTimeStamp(e){return new Date(e.unixTimeStamp)}parseDate(e){return Date.parse(e.dateString)}getDayOfMonth(e){return e.date.getDate()}getWeekday(e){return e.date.getDay()}getYear(e){return e.date.getFullYear()}getMonth(e){return e.date.getMonth()}getHours(e){return e.date.getHours()}getMinutes(e){return e.date.getMinutes()}getSeconds(e){return e.date.getSeconds()}getMilliseconds(e){return e.date.getMilliseconds()}getTime(e){return e.date.getTime()}getUTCYear(e){return e.date.getUTCFullYear()}getUTCMonth(e){return e.date.getUTCMonth()}getUTCDay(e){return e.date.getUTCDate()}getUTCHours(e){return e.date.getUTCHours()}getUTCMinutes(e){return e.date.getUTCMinutes()}getUTCSeconds(e){return e.date.getUTCSeconds()}getUTCMilliseconds(e){return e.date.getUTCMilliseconds()}setYear(e){const t=new Date(e.date.getTime());return t.setFullYear(e.year),t}setMonth(e){const t=new Date(e.date.getTime());return t.setMonth(e.month),t}setDayOfMonth(e){const t=new Date(e.date.getTime());return t.setDate(e.day),t}setHours(e){const t=new Date(e.date.getTime());return t.setHours(e.hours),t}setMinutes(e){const t=new Date(e.date.getTime());return t.setMinutes(e.minutes),t}setSeconds(e){const t=new Date(e.date.getTime());return t.setSeconds(e.seconds),t}setMilliseconds(e){const t=new Date(e.date.getTime());return t.setMilliseconds(e.milliseconds),t}setTime(e){const t=new Date(e.date.getTime());return t.setTime(e.time),t}setUTCYear(e){const t=new Date(e.date.getTime());return t.setUTCFullYear(e.year),t}setUTCMonth(e){const t=new Date(e.date.getTime());return t.setUTCMonth(e.month),t}setUTCDay(e){const t=new Date(e.date.getTime());return t.setUTCDate(e.day),t}setUTCHours(e){const t=new Date(e.date.getTime());return t.setUTCHours(e.hours),t}setUTCMinutes(e){const t=new Date(e.date.getTime());return t.setUTCMinutes(e.minutes),t}setUTCSeconds(e){const t=new Date(e.date.getTime());return t.setUTCSeconds(e.seconds),t}setUTCMilliseconds(e){const t=new Date(e.date.getTime());return t.setUTCMilliseconds(e.milliseconds),t}}class Wt{constructor(e,t){this.math=e,this.geometryHelper=t}removeAllDuplicateVectors(e){return this.geometryHelper.removeAllDuplicateVectors(e.vectors,e.tolerance)}removeConsecutiveDuplicateVectors(e){return this.geometryHelper.removeConsecutiveVectorDuplicates(e.vectors,e.checkFirstAndLast,e.tolerance)}vectorsTheSame(e){return this.geometryHelper.vectorsTheSame(e.vec1,e.vec2,e.tolerance)}angleBetween(e){return this.math.radToDeg({number:Math.acos(this.dot({first:e.first,second:e.second})/(this.norm({vector:e.first})*this.norm({vector:e.second})))})}angleBetweenNormalized2d(e){const t=e.first[0]*e.second[1]-e.first[1]*e.second[0];return this.math.radToDeg({number:Math.atan2(t,this.dot({first:e.first,second:e.second}))})}positiveAngleBetween(e){const t=this.signedAngleBetween(e);return t<0?360+t:t}addAll(e){const t=[];for(let r=0;r<e.vectors[0].length;r++){let i=0;for(const t of e.vectors)i+=t[r];t.push(i)}return t}add(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]+e.second[r]);return t}all(e){return e.vector.every((e=>e))}cross(e){const t=[];return t.push(e.first[1]*e.second[2]-e.first[2]*e.second[1]),t.push(e.first[2]*e.second[0]-e.first[0]*e.second[2]),t.push(e.first[0]*e.second[1]-e.first[1]*e.second[0]),t}distSquared(e){let t=0;for(let r=0;r<e.first.length;r++)t+=Math.pow(e.first[r]-e.second[r],2);return t}dist(e){return Math.sqrt(this.distSquared(e))}div(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]/e.scalar);return t}domain(e){return e.vector[e.vector.length-1]-e.vector[0]}dot(e){let t=0;for(let r=0;r<e.first.length;r++)t+=e.first[r]*e.second[r];return t}finite(e){return e.vector.map((e=>isFinite(e)))}isZero(e){return 0===this.norm({vector:e.vector})}lerp(e){return this.add({first:this.mul({vector:e.first,scalar:e.fraction}),second:this.mul({vector:e.second,scalar:1-e.fraction})})}max(e){return Math.max(...e.vector)}min(e){return Math.min(...e.vector)}mul(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]*e.scalar);return t}neg(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(-e.vector[r]);return t}normSquared(e){return this.dot({first:e.vector,second:e.vector})}norm(e){const t=this.normSquared(e);return 0!==t?Math.sqrt(t):t}normalized(e){if(!(this.length({vector:e.vector})<=1e-8))return this.div({scalar:this.norm(e),vector:e.vector})}onRay(e){return this.add({first:e.point,second:this.mul({vector:e.vector,scalar:e.distance})})}vectorXYZ(e){return[e.x,e.y,e.z]}vectorXY(e){return[e.x,e.y]}range(e){const t=[];for(let r=0;r<e.max;r++)t.push(r);return t}signedAngleBetween(e){const t=this.cross({first:e.first,second:e.second}),r=this.norm({vector:e.first})*this.norm({vector:e.second}),i=this.dot({first:e.first,second:e.second}),o=this.norm({vector:t})/r,n=i/r,s=Math.atan2(o,n),a=this.dot({first:e.reference,second:t})>0?s:2*Math.PI-s;return this.math.radToDeg({number:a})}span(e){const t=[];for(let r=e.min;r<=e.max;r+=e.step)t.push(r);return t}spanEaseItems(e){const t=[];for(let r=0;r<e.nrItems;r++){const i=1*r/(e.nrItems-1);t.push(this.math.ease({x:i,ease:e.ease,min:e.min,max:e.max}))}return e.intervals?t.map(((e,t,r)=>0===t?e:e-r[t-1])):t}spanLinearItems(e){const t=[],r=e.max-e.min;for(let i=0;i<e.nrItems;i++){const o=r*i/(e.nrItems-1);t.push(o+e.min)}return t}sub(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]-e.second[r]);return t}sum(e){return e.vector.reduce(((e,t)=>e+t),0)}lengthSq(e){const t=e.vector;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}length(e){return Math.sqrt(this.lengthSq(e))}}class At{constructor(e,t){this.vector=e,this.math=t}rotationCenterAxis(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationAxis(e.axis,this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterX(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationX(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterY(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationY(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationZ(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterYawPitchRoll(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:e.yaw}),this.math.degToRad({number:e.pitch}),this.math.degToRad({number:e.roll})),this.translation(e.center[0],e.center[1],e.center[2])]}scaleCenterXYZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]),this.translation(e.center[0],e.center[1],e.center[2])]}scaleXYZ(e){return[this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2])]}stretchDirFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.stretchDirection(e.direction,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}uniformScale(e){return[this.scaling(e.scale,e.scale,e.scale)]}uniformScaleFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scale,e.scale,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}translationXYZ(e){return[this.translation(e.translation[0],e.translation[1],e.translation[2])]}translationsXYZ(e){return e.translations.map((e=>[this.translation(e[0],e[1],e[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(e,t,r){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1]}scaling(e,t,r){return[e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1]}rotationAxis(e,t){const r=Math.sin(-t),i=Math.cos(-t),o=1-i,n=this.vector.normalized({vector:e}),s=n[0],a=n[1],c=n[2],h=this.identity();return h[0]=s*s*o+i,h[1]=s*a*o-c*r,h[2]=s*c*o+a*r,h[3]=0,h[4]=a*s*o+c*r,h[5]=a*a*o+i,h[6]=a*c*o-s*r,h[7]=0,h[8]=c*s*o-a*r,h[9]=c*a*o+s*r,h[10]=c*c*o+i,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}rotationX(e){const t=Math.sin(e),r=Math.cos(e);return[1,0,0,0,0,r,t,0,0,-t,r,0,0,0,0,1]}rotationY(e){const t=Math.sin(e),r=Math.cos(e);return[r,0,-t,0,0,1,0,0,t,0,r,0,0,0,0,1]}rotationZ(e){const t=Math.sin(e),r=Math.cos(e);return[r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(e,t,r){const i=.5*r,o=.5*t,n=.5*e,s=Math.sin(i),a=Math.cos(i),c=Math.sin(o),h=Math.cos(o),l=Math.sin(n),u=Math.cos(n),d=u*c*a+l*h*s,p=l*h*a-u*c*s,f=u*h*s-l*c*a,v=u*h*a+l*c*s;return this.rotationMatrixFromQuat(d,p,f,v)}rotationMatrixFromQuat(e,t,r,i){const o=e*e,n=t*t,s=r*r,a=e*t,c=r*i,h=r*e,l=t*i,u=t*r,d=e*i,p=this.identity();return p[0]=1-2*(n+s),p[1]=2*(a+c),p[2]=2*(h-l),p[3]=0,p[4]=2*(a-c),p[5]=1-2*(s+o),p[6]=2*(u+d),p[7]=0,p[8]=2*(h+l),p[9]=2*(u-d),p[10]=1-2*(n+o),p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}stretchDirection(e,t){const r=this.vector.normalized({vector:e}),[i,o,n]=r;if(isNaN(i)||0===i&&0===o&&0===n)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const s=t-1;return[1+s*i*i,s*o*i,s*n*i,0,s*i*o,1+s*o*o,s*n*o,0,s*i*n,s*o*n,1+s*n*n,0,0,0,0,1]}}class It{constructor(){this.getArrayDepth=e=>Array.isArray(e)?1+Math.max(...e.map(this.getArrayDepth)):0}transformControlPoints(e,t){return this.getFlatTransformations(e).forEach((e=>{t=this.transformPointsByMatrixArray(t,e)})),t}getFlatTransformations(e){let t=[];return 3===this.getArrayDepth(e)?e.forEach((e=>{t.push(...e)})):t=e,t}transformPointsByMatrixArray(e,t){return this.transformPointsCoordinates(e,t)}transformPointsCoordinates(e,t){const r=[];for(const i of e){const e=this.transformCoordinates(i[0],i[1],i[2],t);r.push(e)}return r}removeAllDuplicateVectors(e,t=1e-7){const r=[];return e.forEach((e=>{r.some((r=>this.vectorsTheSame(e,r,t)))||r.push(e)})),r}removeConsecutiveVectorDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const o=e[t],n=e[t-1];this.vectorsTheSame(o,n,r)||i.push(n),t===e.length-1&&i.push(o)}if(t){const e=i[0],t=i[i.length-1];this.vectorsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}vectorsTheSame(e,t,r){let i=!1;if(e.length!==t.length)return i;i=!0;for(let o=0;o<e.length;o++)if(!this.approxEq(e[o],t[o],r)){i=!1;break}return i}approxEq(e,t,r){return Math.abs(e-t)<r}removeConsecutivePointDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const o=e[t],n=e[t-1];this.arePointsTheSame(o,n,r)||i.push(n),t===e.length-1&&i.push(o)}if(t){const e=i[0],t=i[i.length-1];this.arePointsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}arePointsTheSame(e,t,r){let i=!1;return 2===e.length&&2===t.length?this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&(i=!0):3===e.length&&3===t.length&&this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&this.approxEq(e[2],t[2],r)&&(i=!0),i}transformCoordinates(e,t,r,i){const o=i,n=e*o[0]+t*o[4]+r*o[8]+o[12],s=e*o[1]+t*o[5]+r*o[9]+o[13],a=e*o[2]+t*o[6]+r*o[10]+o[14],c=1/(e*o[3]+t*o[7]+r*o[11]+o[15]);return[n*c,s*c,a*c]}}class Bt{constructor(e,t,r){this.vector=e,this.point=t,this.geometryHelper=r}getStartPoint(e){return e.line.start}getEndPoint(e){return e.line.end}length(e){return this.point.distance({startPoint:e.line.start,endPoint:e.line.end})}reverse(e){return{start:e.line.end,end:e.line.start}}transformLine(e){const t=e.transformation;let r=[e.line.start,e.line.end];return r=this.geometryHelper.transformControlPoints(t,r),{start:r[0],end:r[1]}}transformsForLines(e){return e.lines.map(((t,r)=>{const i=e.transformation[r];let o=[t.start,t.end];return o=this.geometryHelper.transformControlPoints(i,o),{start:o[0],end:o[1]}}))}create(e){return{start:e.start,end:e.end}}createSegment(e){return[e.start,e.end]}getPointOnLine(e){const t=e.line.start,r=e.line.end,i=e.param,o=[r[0]-t[0],r[1]-t[1],r[2]-t[2]];return[t[0]+i*o[0],t[1]+i*o[1],t[2]+i*o[2]]}linesBetweenPoints(e){const t=[];for(let r=1;r<e.points.length;r++){const i=e.points[r-1],o=e.points[r];t.push({start:i,end:o})}return t}linesBetweenStartAndEndPoints(e){return e.startPoints.map(((t,r)=>({start:t,end:e.endPoints[r]}))).filter((e=>0!==this.point.distance({startPoint:e.start,endPoint:e.end})))}lineToSegment(e){return[e.line.start,e.line.end]}linesToSegments(e){return e.lines.map((e=>[e.start,e.end]))}segmentToLine(e){return{start:e.segment[0],end:e.segment[1]}}segmentsToLines(e){return e.segments.map((e=>({start:e[0],end:e[1]})))}lineLineIntersection(e){const t=e.tolerance||1e-6,r=e.checkSegmentsOnly,i=e.line1,o=e.line2;if(!((null==i?void 0:i.start)&&i.end&&(null==o?void 0:o.start)&&o.end&&3===i.start.length&&3===i.end.length&&3===o.start.length&&3===o.end.length))return void console.error("Invalid line input to lineLineIntersection");const n=i.start,s=this.vector.sub({first:i.end,second:i.start}),a=o.start,c=this.vector.sub({first:o.end,second:o.start}),h=this.vector.sub({first:a,second:n}),l=this.vector.lengthSq({vector:s}),u=this.vector.lengthSq({vector:c});if(l<t*t||u<t*t)return;const d=this.vector.cross({first:s,second:c});if(this.vector.lengthSq({vector:d})<t*t){const e=this.vector.cross({first:h,second:s}),i=t*t*l;if(this.vector.lengthSq({vector:e})<i){if(r){const e=l<t*t?1:l,r=this.vector.dot({first:s,second:h})/e,i=this.vector.sub({first:o.end,second:n}),a=this.vector.dot({first:s,second:i})/e,c=[Math.min(r,a),Math.max(r,a)],u=[0,1];return Math.max(u[0],c[0]),void Math.min(u[1],c[1])}return n}return}const p=this.vector.dot({first:h,second:d}),f=t*t*t;if(Math.abs(p)>f)return;const v=l,g=u,m=this.vector.dot({first:s,second:c}),b=this.vector.dot({first:s,second:h}),y=this.vector.dot({first:c,second:h}),x=v*g-m*m;if(Math.abs(x)<t*t)return void console.error("Internal error: Denominator near zero after non-parallel check.");const w=(g*b-m*y)/x,S=(m*b-v*y)/x;if(r&&(w<-t||w>1+t||S<-t||S>1+t))return;const k=this.getPointOnLine({param:w,line:i});return[Math.abs(k[0])<t?0:k[0],Math.abs(k[1])<t?0:k[1],Math.abs(k[2])<t?0:k[2]]}}class Rt{constructor(e,t,r,i){this.vector=e,this.point=t,this.line=r,this.geometryHelper=i}length(e){let t=0;for(let r=1;r<e.polyline.points.length;r++){const i=e.polyline.points[r-1],o=e.polyline.points[r];t+=this.point.distance({startPoint:i,endPoint:o})}return t}countPoints(e){return e.polyline.points.length}getPoints(e){return e.polyline.points}reverse(e){return{points:e.polyline.points.reverse()}}transformPolyline(e){const t=e.transformation;let r=e.polyline.points;return r=this.geometryHelper.transformControlPoints(t,r),{points:r}}create(e){var t;return{points:e.points,isClosed:null!==(t=e.isClosed)&&void 0!==t&&t}}polylineToLines(e){return this.polylineToSegments(e).map((e=>({start:e[0],end:e[1]})))}polylineToSegments(e){const t=e.polyline,r=[],i=t.points,o=i.length;if(o<2)return r;for(let e=0;e<o-1;e++)r.push([i[e],i[e+1]]);return t.isClosed&&o>=2&&(this.point.twoPointsAlmostEqual({point1:i[o-1],point2:i[0],tolerance:1e-9})||r.push([i[o-1],i[0]])),r}polylineSelfIntersection(e){const{polyline:t,tolerance:r}=e,i=this.polylineToLines({polyline:t}),o=i.length;if(o<3)return[];const n=[],s=null!=r?r:1e-6;for(let e=0;e<o;e++)for(let r=e+1;r<o;r++){let a=r===e+1;if(!a&&t.isClosed&&0===e&&r===o-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:i[e],line2:i[r],checkSegmentsOnly:!0,tolerance:s});if(c){let e=!1;for(const t of n)if(this.point.twoPointsAlmostEqual({point1:c,point2:t,tolerance:s})){e=!0;break}e||n.push(c)}}return n}twoPolylineIntersection(e){const{polyline1:t,polyline2:r,tolerance:i}=e,o=this.polylineToLines({polyline:t}),n=this.polylineToLines({polyline:r}),s=[],a=null!=i?i:1e-6;for(const e of o)for(const t of n){const r=this.line.lineLineIntersection({line1:e,line2:t,checkSegmentsOnly:!0,tolerance:a});if(r){let e=!1;for(const t of s)if(this.point.twoPointsAlmostEqual({point1:r,point2:t,tolerance:a})){e=!0;break}e||s.push(r)}}return s}sortSegmentsIntoPolylines(e){var t;const r=null!==(t=e.tolerance)&&void 0!==t?t:1e-5,i=e.segments;if(!i||0===i.length)return[];const o=r*r,n=i.length,s=new Array(n).fill(!1),a=[],c=new Map,h=1/r,l=e=>`${Math.round(e[0]*h)},${Math.round(e[1]*h)},${Math.round(e[2]*h)}`;for(let e=0;e<n;e++){const t=i[e];if(this.point.twoPointsAlmostEqual({point1:t[0],point2:t[1],tolerance:r})){s[e]=!0;continue}const o=l(t[0]),n=l(t[1]),a={segmentIndex:e,endpointIndex:0,coords:t[0]},h={segmentIndex:e,endpointIndex:1,coords:t[1]};c.has(o)||c.set(o,[]),c.get(o).push(a),n!==o?(c.has(n)||c.set(n,[]),c.get(n).push(h)):c.get(o).push(h)}const u=e=>{const t=[],i=Math.round(e[0]*h),n=Math.round(e[1]*h),a=Math.round(e[2]*h);for(let e=-1;e<=1;e++)for(let r=-1;r<=1;r++)for(let o=-1;o<=1;o++)t.push(`${i+e},${n+r},${a+o}`);let l,u=o;for(const i of t){const t=c.get(i);if(t)for(const i of t)if(!s[i.segmentIndex]){const t=this.vector.sub({first:i.coords,second:e}),o=this.vector.lengthSq({vector:t});o<u&&this.point.twoPointsAlmostEqual({point1:i.coords,point2:e,tolerance:r})&&(l=i,u=o)}}if(l&&!s[l.segmentIndex])return l};for(let e=0;e<n;e++){if(s[e])continue;s[e]=!0;const t=i[e],o=[t[0],t[1]];let c=t[0],h=t[1],l=!1,d=0;for(;d++<n;){const e=u(h);if(!e)break;const t=i[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:c,tolerance:r})){l=!0,s[e.segmentIndex]=!0;break}s[e.segmentIndex]=!0,o.push(n),h=n}if(d=0,!l)for(;d++<n;){const e=u(c);if(!e)break;const t=i[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:h,tolerance:r})){l=!0,s[e.segmentIndex]=!0;break}s[e.segmentIndex]=!0,o.unshift(n),c=n}!l&&o.length>=2&&(l=this.point.twoPointsAlmostEqual({point1:c,point2:h,tolerance:r})),l&&o.length>2&&this.point.twoPointsAlmostEqual({point1:o[o.length-1],point2:o[0],tolerance:r})&&o.pop(),a.push({points:o,isClosed:l})}return a}maxFilletsHalfLine(e){return this.point.maxFilletsHalfLine({points:e.polyline.points,checkLastWithFirst:e.polyline.isClosed,tolerance:e.tolerance})}safestFilletRadius(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}}class Lt{constructor(e,t){this.vector=e,this.polyline=t}signedDistanceToPlane(e){return this.vector.dot({first:e.plane.normal,second:e.point})-e.plane.d}calculateTrianglePlane(e){const t=Math.pow(e.tolerance||1e-7,2),r=this.vector.sub({first:e.triangle[1],second:e.triangle[0]}),i=this.vector.sub({first:e.triangle[2],second:e.triangle[0]}),o=this.vector.cross({first:r,second:i});if(this.vector.lengthSq({vector:o})<t)return;const n=this.vector.normalized({vector:o});return{normal:n,d:this.vector.dot({first:n,second:e.triangle[0]})}}triangleTriangleIntersection(e){const t=e.triangle1,r=e.triangle2,i=e.tolerance||1e-7,o=t[0],n=t[1],s=t[2],a=r[0],c=r[1],h=r[2],l=this.calculateTrianglePlane({triangle:t,tolerance:i}),u=this.calculateTrianglePlane({triangle:r,tolerance:i});if(!l||!u)return;const d=[this.signedDistanceToPlane({point:a,plane:l}),this.signedDistanceToPlane({point:c,plane:l}),this.signedDistanceToPlane({point:h,plane:l})];if(d[0]>i&&d[1]>i&&d[2]>i||d[0]<-i&&d[1]<-i&&d[2]<-i)return;const p=[this.signedDistanceToPlane({point:o,plane:u}),this.signedDistanceToPlane({point:n,plane:u}),this.signedDistanceToPlane({point:s,plane:u})];if(p[0]>i&&p[1]>i&&p[2]>i||p[0]<-i&&p[1]<-i&&p[2]<-i)return;const f=p.every((e=>Math.abs(e)<i)),v=d.every((e=>Math.abs(e)<i));if(f&&v)return;const g=this.vector.cross({first:l.normal,second:u.normal}),m=this.vector.dot({first:g,second:g});if(m<i*i)return;const b=[],y=[],x=[[o,n],[n,s],[s,o]],w=p;for(let e=0;e<3;++e){const t=x[e][0],r=x[e][1],o=w[e],n=w[(e+1)%3];if(Math.abs(o)<i&&b.push(t),o*n<0&&Math.abs(o-n)>i){const e=o/(o-n);b.push(this.computeIntersectionPoint(t,r,e))}}const S=[[a,c],[c,h],[h,a]],k=d;for(let e=0;e<3;++e){const t=S[e][0],r=S[e][1],o=k[e],n=k[(e+1)%3];if(Math.abs(o)<i&&y.push(t),o*n<0&&Math.abs(o-n)>i){const e=o/(o-n);y.push(this.computeIntersectionPoint(t,r,e))}}if(b.length<2||y.length<2)return;const C=l.normal,P=u.normal,M=l.d,T=u.d,D=this.vector.mul({vector:P,scalar:M}),_=this.vector.mul({vector:C,scalar:T}),O=this.vector.sub({first:D,second:_}),E=this.vector.cross({first:O,second:g}),W=this.vector.mul({vector:E,scalar:1/m}),A=b.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:W}),second:g}))),I=y.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:W}),second:g}))),B=[Math.min(...A),Math.max(...A)],R=[Math.min(...I),Math.max(...I)],L=Math.max(B[0],R[0]),F=Math.min(B[1],R[1]);if(L<F-i*m){const e=this.vector.add({first:W,second:this.vector.mul({vector:g,scalar:L/m})}),t=this.vector.add({first:W,second:this.vector.mul({vector:g,scalar:F/m})}),r=this.vector.sub({first:e,second:t});return this.vector.lengthSq({vector:r})>i*i?[e,t]:void 0}}meshMeshIntersectionSegments(e){const t=e.mesh1,r=e.mesh2,i=[];for(let o=0;o<t.length;++o)for(let n=0;n<r.length;++n){const s=t[o],a=r[n],c=this.triangleTriangleIntersection({triangle1:s,triangle2:a,tolerance:e.tolerance});c&&i.push(c)}return i}meshMeshIntersectionPolylines(e){const t=this.meshMeshIntersectionSegments(e);return this.polyline.sortSegmentsIntoPolylines({segments:t,tolerance:e.tolerance})}meshMeshIntersectionPoints(e){return this.meshMeshIntersectionPolylines(e).map((e=>e.isClosed?[...e.points,e.points[0]]:e.points))}computeIntersectionPoint(e,t,r){return this.vector.add({first:e,second:this.vector.mul({vector:this.vector.sub({first:t,second:e}),scalar:r})})}}"undefined"!=typeof document&&document.currentScript&&document.currentScript.src;class Ft{constructor(e){this.context=e}create(e){const t=new q.Vector3(e.target[0],e.target[1],e.target[2]),r=new q.ArcRotateCamera(`arcRotateCamera${Math.random()}`,this.getRadians(e.alpha),this.getRadians(e.beta),e.radius,t,this.context.scene);void 0!==e.angularSensibilityX&&(r.angularSensibilityX=e.angularSensibilityX),void 0!==e.angularSensibilityY&&(r.angularSensibilityY=e.angularSensibilityY),void 0!==e.lowerRadiusLimit&&(r.lowerRadiusLimit=e.lowerRadiusLimit),void 0!==e.upperRadiusLimit&&(r.upperRadiusLimit=e.upperRadiusLimit),void 0!==e.lowerAlphaLimit&&(r.lowerAlphaLimit=this.getRadians(e.lowerAlphaLimit)),void 0!==e.upperAlphaLimit&&(r.upperAlphaLimit=this.getRadians(e.upperAlphaLimit)),void 0!==e.lowerBetaLimit&&(r.lowerBetaLimit=this.getRadians(e.lowerBetaLimit)),void 0!==e.upperBetaLimit&&(r.upperBetaLimit=this.getRadians(e.upperBetaLimit)),void 0!==e.panningSensibility&&(r.panningSensibility=e.panningSensibility),void 0!==e.wheelPrecision&&(r.wheelPrecision=e.wheelPrecision),void 0!==e.maxZ&&(r.maxZ=e.maxZ),r.minZ=0;const i=document.getElementById("renderCanvas");return r.attachControl(i,!0),r}getRadians(e){let t=q.Angle.FromDegrees(e).radians();return e<0&&(t=-t),t}}class Ut{constructor(e){this.context=e}create(e){const t=new q.Vector3(e.position[0],e.position[1],e.position[2]),r=new q.FreeCamera(`freeCamera${Math.random()}`,t,this.context.scene),i=new q.Vector3(e.target[0],e.target[1],e.target[2]);r.setTarget(i);const o=document.getElementById("renderCanvas");return r.attachControl(o,!0),r.minZ=0,r.maxZ=1e3,r}}class zt{constructor(e){this.context=e}create(e){const t=new q.Vector3(e.position[0],e.position[1],e.position[2]),r=new q.TargetCamera(`freeCamera${Math.random()}`,t,this.context.scene),i=new q.Vector3(e.target[0],e.target[1],e.target[2]);r.setTarget(i);const o=document.getElementById("renderCanvas");return r.attachControl(o,!0),r.minZ=0,r.maxZ=1e3,r}}class Nt{constructor(e){this.context=e,this.free=new Ut(this.context),this.arcRotate=new Ft(this.context),this.target=new zt(this.context)}freezeProjectionMatrix(e){e.camera.freezeProjectionMatrix()}unfreezeProjectionMatrix(e){e.camera.unfreezeProjectionMatrix()}setPosition(e){const t=new q.Vector3(e.position[0],e.position[1],e.position[2]);e.camera.position=t}getPosition(e){return[e.camera.position.x,e.camera.position.y,e.camera.position.z]}setTarget(e){const t=new q.Vector3(e.target[0],e.target[1],e.target[2]);e.camera.setTarget(t)}getTarget(e){return[e.camera.target.x,e.camera.target.y,e.camera.target.z]}setSpeed(e){e.camera.speed=e.speed}getSpeed(e){return[e.camera.target.x,e.camera.target.y,e.camera.target.z]}setMinZ(e){e.camera.minZ=e.minZ}setMaxZ(e){e.camera.maxZ=e.maxZ}makeCameraOrthographic(e){e.camera.mode=q.Camera.ORTHOGRAPHIC_CAMERA,e.camera.orthoBottom=e.orthoBottom||-1,e.camera.orthoTop=e.orthoTop||1,e.camera.orthoLeft=e.orthoLeft||-1,e.camera.orthoRight=e.orthoRight||1}makeCameraPerspective(e){e.camera.mode=q.Camera.PERSPECTIVE_CAMERA}}class Gt{constructor(e,t){this.context=e,this.color=t}create(e){const t=new q.PBRMetallicRoughnessMaterial(e.name,this.context.scene);return t.baseColor=q.Color3.FromHexString(e.baseColor),t.metallic=e.metallic,t.roughness=e.roughness,t.alpha=e.alpha,t.backFaceCulling=e.backFaceCulling,t.zOffset=e.zOffset,t.alphaMode=1,e.emissiveColor&&(t.emissiveColor=q.Color3.FromHexString(e.emissiveColor)),t}setBaseColor(e){e.material.baseColor=q.Color3.FromHexString(e.baseColor)}setMetallic(e){e.material.metallic=e.metallic}setRoughness(e){e.material.roughness=e.roughness}setAlpha(e){e.material.alpha=e.alpha}setBackFaceCulling(e){e.material.backFaceCulling=e.backFaceCulling}setBaseTexture(e){e.material.baseTexture=e.baseTexture}getBaseColor(e){const t=e.material,r=this.context.remap(t.baseColor.r,0,1,0,255),i=this.context.remap(t.baseColor.g,0,1,0,255),o=this.context.remap(t.baseColor.b,0,1,0,255);return this.color.rgbToHex({r,g:i,b:o,min:0,max:255})}getMetallic(e){return e.material.metallic}getRoughness(e){return e.material.roughness}getAlpha(e){return e.material.alpha}getBackFaceCulling(e){return e.material.backFaceCulling}getBaseTexture(e){return e.material.baseTexture}}var Vt=a(970);class Ht{constructor(e){this.context=e}create(e){const t=new Vt.SkyMaterial("bitbybit-skyMaterial",this.context.scene);return void 0!==e.luminance&&(t.luminance=e.luminance),void 0!==e.turbidity&&(t.turbidity=e.turbidity),void 0!==e.rayleigh&&(t.rayleigh=e.rayleigh),void 0!==e.mieCoefficient&&(t.mieCoefficient=e.mieCoefficient),void 0!==e.mieDirectionalG&&(t.mieDirectionalG=e.mieDirectionalG),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.inclination&&(t.inclination=e.inclination),void 0!==e.azimuth&&(t.azimuth=e.azimuth),void 0!==e.sunPosition&&(t.sunPosition=new q.Vector3(e.sunPosition[0],e.sunPosition[1],e.sunPosition[2])),void 0!==e.useSunPosition&&(t.useSunPosition=e.useSunPosition),void 0!==e.cameraOffset&&(t.cameraOffset=new q.Vector3(e.cameraOffset[0],e.cameraOffset[1],e.cameraOffset[2])),void 0!==e.up&&(t.up=new q.Vector3(e.up[0],e.up[1],e.up[2])),void 0!==e.dithering&&(t.dithering=e.dithering),t}setLuminance(e){e.material.luminance=e.luminance}setTurbidity(e){e.material.turbidity=e.turbidity}setRayleigh(e){e.material.rayleigh=e.rayleigh}setMieCoefficient(e){e.material.mieCoefficient=e.mieCoefficient}setMieDirectionalG(e){e.material.mieDirectionalG=e.mieDirectionalG}setDistance(e){e.material.distance=e.distance}setInclination(e){e.material.inclination=e.inclination}setAzimuth(e){e.material.azimuth=e.azimuth}setSunPosition(e){e.material.sunPosition=new q.Vector3(e.sunPosition[0],e.sunPosition[1],e.sunPosition[2])}setUseSunPosition(e){e.material.useSunPosition=e.useSunPosition}setCameraOffset(e){e.material.cameraOffset=new q.Vector3(e.cameraOffset[0],e.cameraOffset[1],e.cameraOffset[2])}setUp(e){e.material.up=new q.Vector3(e.up[0],e.up[1],e.up[2])}setDithering(e){e.material.dithering=e.dithering}getLuminance(e){return e.skyMaterial.luminance}getTurbidity(e){return e.skyMaterial.turbidity}getRayleigh(e){return e.skyMaterial.rayleigh}getMieCoefficient(e){return e.skyMaterial.mieCoefficient}getMieDirectionalG(e){return e.skyMaterial.mieDirectionalG}getDistance(e){return e.skyMaterial.distance}getInclination(e){return e.skyMaterial.inclination}getAzimuth(e){return e.skyMaterial.azimuth}getSunPosition(e){return e.skyMaterial.sunPosition.asArray()}getUseSunPosition(e){return e.skyMaterial.useSunPosition}getCameraOffset(e){return e.skyMaterial.cameraOffset.asArray()}getUp(e){return e.skyMaterial.up.asArray()}getDithering(e){return e.skyMaterial.dithering}}class jt{constructor(e,t){this.context=e,this.color=t,this.pbrMetallicRoughness=new Gt(e,t),this.skyMaterial=new Ht(e)}}var qt=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Zt{constructor(e){this.context=e}createImmersiveARExperience(){return qt(this,void 0,void 0,(function*(){if(yield q.WebXRSessionManager.IsSessionSupportedAsync("immersive-ar"))return yield this.context.scene.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"local-floor"},outputCanvasOptions:{canvasOptions:{framebufferScaleFactor:2,antialias:!0}},optionalFeatures:!0});throw new Error("AR is not supported on this device.")}))}createDefaultXRExperienceWithTeleportation(e){return qt(this,void 0,void 0,(function*(){this.createDefaultXRExperienceWithTeleportationReturn(e)}))}createDefaultXRExperienceWithTeleportationReturn(e){return qt(this,void 0,void 0,(function*(){const t=yield this.context.scene.createDefaultXRExperienceAsync();this.context.scene.metadata?this.context.scene.metadata.xr=t:this.context.scene.metadata={xr:t};const r=[];e.groundMeshes.forEach((e=>{e.getChildMeshes&&(null==e||e.getChildMeshes().forEach((e=>{e.isPickable=!0,r.push(e)}))),r.push(e),e.isPickable=!0}));const i=t.baseExperience.featuresManager,o=new q.PBRMetallicRoughnessMaterial("teleportation");o.baseColor=new q.Color3(0,0,1),o.metallic=0,o.roughness=1,i.enableFeature(q.WebXRFeatureName.TELEPORTATION,"stable",{xrInput:t.input,floorMeshes:r,defaultTargetMeshOptions:{torusArrowMaterial:o,disableLighting:!1}});const n=new Z.GUI3DManager(this.context.scene);this.context.scene.metadata.guiManager=n,n.useRealisticScaling=!0;const s=new Z.NearMenu("near");n.addControl(s);const a=new Z.TouchHolographicButton("button1"),c=new Z.TextBlock;return c.text="Exit VR",c.color="white",c.fontSize="48px",a.onPointerClickObservable.add((()=>qt(this,void 0,void 0,(function*(){yield t.baseExperience.exitXRAsync()})))),s.addButton(a),a.content=c,{xr:t,torusMat:o,manager:n,near:s,button:a,text:c,dispose:()=>{t.dispose(),o.dispose(),n.dispose(),s.dispose(),a.dispose(),c.dispose()}}}))}}class Yt{constructor(e){this.context=e,this.simple=new Zt(e)}}class Xt{constructor(e){this.context=e}getEngine(){return this.context.engine}getRenderingCanvas(){return this.context.engine.getRenderingCanvas()}}class Kt{constructor(e){this.context=e}create(e){return t=this,r=void 0,o=function*(){if(e.url)return q.SceneLoader.ImportMeshAsync(null,e.url,void 0,this.context.scene,void 0,".ply").then((e=>{const t=e.meshes[0];return t.name=`gaussian-splatting-${Math.random()}`,t}))},new((i=void 0)||(i=Promise))((function(e,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(t,r||[])).next())}));var t,r,i,o}clone(e){return e.babylonMesh.clone(`gaussian-splatting-${Math.random()}`)}getSplatPositions(e){const t=e.babylonMesh._splatPositions,r=[];for(let e=0;e<t.length;e+=3)r.push([t[e],t[e+1],t[e+2]]);return r}}var $t,Qt,Jt,er,tr,rr,ir,or,nr,sr,ar,cr,hr,lr,ur,dr,pr,fr,vr,gr,mr,br,yr,xr,wr,Sr,kr=a(953),Cr=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Pr{constructor(e){this.context=e,this.supportedFileFormats=["glb","gltf","stl","obj"]}loadAssetIntoScene(e){return Cr(this,void 0,void 0,(function*(){const t=e.assetFile.name.split(".").pop();if(!this.supportedFileFormats.includes(t.toLocaleLowerCase()))throw Error(`Unsupported file format detected: ${t}`);try{return yield this.loadAsset("","",e.assetFile,e.hidden)}catch(e){throw Error(e)}}))}loadAssetIntoSceneNoReturn(e){return Cr(this,void 0,void 0,(function*(){this.loadAssetIntoScene(e)}))}loadAssetIntoSceneFromRootUrl(e){return Cr(this,void 0,void 0,(function*(){const t=e.assetFile.split(".").pop();if(!this.supportedFileFormats.includes(t.toLocaleLowerCase()))throw Error(`Unsupported file format detected: ${t}`);try{return yield this.loadAsset("",e.rootUrl,e.assetFile,e.hidden)}catch(e){throw Error(e)}}))}loadAssetIntoSceneFromRootUrlNoReturn(e){return Cr(this,void 0,void 0,(function*(){this.loadAssetIntoSceneFromRootUrl(e)}))}exportBabylon(e){const t=this.context.scene.metadata;this.context.scene.metadata=void 0,this.objectUrl&&window.URL.revokeObjectURL(this.objectUrl);const r=q.SceneSerializer.Serialize(this.context.scene);this.context.scene.metadata=t;const i=JSON.stringify(r);let o=e.fileName;(o.toLowerCase().lastIndexOf(".babylon")!==o.length-8||o.length<9)&&(o+=".babylon");const n=new Blob([i],{type:"octet/stream"});this.objectUrl=(window.webkitURL||window.URL).createObjectURL(n);const s=document.createElement("a");s.href=this.objectUrl,s.target="_self",s.download=o,s.click(),s.remove()}exportGLB(e){let t;e.discardSkyboxAndGrid&&(t={shouldExportNode:e=>"bitbybit-hdrSkyBox"!==e.name&&!e.name.includes("bitbybit-ground")});const r=this.context.scene.metadata;delete this.context.scene.metadata,kr.GLTF2Export.GLBAsync(this.context.scene,e.fileName,t).then((e=>{e.downloadFiles(),this.context.scene.metadata=r}))}exportMeshToStl(e){return Cr(this,void 0,void 0,(function*(){const t=e.mesh.getChildMeshes();let r=[];t&&t.length>0&&(r=t.filter((e=>!(e instanceof q.LinesMesh||e instanceof q.GreasedLineMesh))));let i=[e.mesh,...r];return i=i.filter((e=>e.isVisible)),kr.STLExport.CreateSTL(i,!0,e.fileName,!0,!0,!0),Promise.resolve({})}))}exportMeshesToStl(e){return Cr(this,void 0,void 0,(function*(){let t;return e.meshes.forEach((e=>{const r=e.getChildMeshes();let i=[];r&&r.length>0&&(i=r.filter((e=>!(e instanceof q.LinesMesh||e instanceof q.GreasedLineMesh)))),t.push(e),i.length>0&&t.push(...i)})),kr.STLExport.CreateSTL(t,!0,e.fileName,!0,!0,!0),Promise.resolve({})}))}loadAsset(e,t,r,i){return Cr(this,void 0,void 0,(function*(){const e=yield q.SceneLoader.ImportMeshAsync("",t,r,this.context.scene),o=this.context.scene.metadata.shadowGenerators,n=new q.Mesh("ImportedMeshContainer"+Math.random(),this.context.scene);return o.length>0&&e.meshes.forEach((e=>{if(e.isPickable=!1,i&&(e.isVisible=!1),e.getChildMeshes().forEach((e=>{e.isPickable=!1,i&&(e.isVisible=!1)})),this.context.scene.metadata.shadowGenerators.length>0){try{e.receiveShadows=!0}catch(e){}o.forEach((t=>{t.addShadowCaster(e)})),e.getChildMeshes().forEach((e=>{try{e.receiveShadows=!0}catch(e){}o.forEach((t=>{t.addShadowCaster(e)}))}))}})),e.meshes.find((e=>"__root__"===e.name)).parent=n,n}))}}class Mr{constructor(e){this.context=e}setDirectionToTarget(e){e.shadowLight.setDirectionToTarget(new q.Vector3(e.target[0],e.target[1],e.target[2]))}setPosition(e){e.shadowLight.position=new q.Vector3(e.position[0],e.position[1],e.position[2])}}class Tr{constructor(e){this.context=e,this.shadowLight=new Mr(e)}}class Dr{constructor(e){this.context=e}createFullScreenUI(e){const t=q.Texture.BILINEAR_SAMPLINGMODE;return Z.AdvancedDynamicTexture.CreateFullscreenUI(e.name,e.foreground,this.context.scene,t,e.adaptiveScaling)}createForMesh(e){const t=this.context.getSamplingMode(e.sampling);return Z.AdvancedDynamicTexture.CreateForMesh(e.mesh,e.width,e.height,e.supportPointerMove,e.onlyAlphaTesting,e.invertY,void 0,t)}}class _r{constructor(e){this.context=e}createStackPanel(e){const t=new Z.StackPanel(e.name);return t.isVertical=e.isVertical,t.spacing=e.spacing,t.onDisposeObservable.add((e=>{e.clearControls()})),void 0!==e.width?t.width=e.width:t.width=1,void 0!==e.height&&(t.height=e.height),void 0!==e.color&&(t.color=e.color),void 0!==e.background&&(t.background=e.background),t}setIsVertical(e){return e.stackPanel.isVertical=e.isVertical,e.stackPanel}setSpacing(e){return e.stackPanel.spacing=e.spacing,e.stackPanel}setWidth(e){return e.stackPanel.width=e.width,e.stackPanel}setHeight(e){return e.stackPanel.height=e.height,e.stackPanel}getIsVertical(e){return e.stackPanel.isVertical}getSpacing(e){return e.stackPanel.spacing}getWidth(e){return e.stackPanel.width}getHeight(e){return e.stackPanel.height}}class Or{constructor(e){this.context=e}addControls(e){return e.clearControlsFirst&&e.container.clearControls&&e.container.clearControls(),e.controls.forEach((t=>e.container.addControl(t))),e.container}setBackground(e){return e.container.background=e.background,e.container}setIsReadonly(e){return e.container.isReadOnly=e.isReadOnly,e.container}getBackground(e){return e.container.background}getIsReadonly(e){return e.container.isReadOnly}}class Er{constructor(e){this.context=e}createSimpleButton(e){const t=Z.Button.CreateSimpleButton(e.name,e.label);return e.width?t.width=e.width:t.width=1,e.height?t.height=e.height:t.height="42px",t.color=e.color,t.fontSize=e.fontSize,t.background=e.background,t}setButtonText(e){return e.button.textBlock.text=e.text,e.button}getButtonText(e){return e.button.textBlock.text}}class Wr{constructor(e){this.context=e}changeControlPadding(e){return void 0!==e.paddingLeft&&(e.control.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(e.control.paddingRight=e.paddingRight),void 0!==e.paddingTop&&(e.control.paddingTop=e.paddingTop),void 0!==e.paddingBottom&&(e.control.paddingBottom=e.paddingBottom),e.control}changeControlAlignment(e){switch(e.horizontalAlignment){case"left":e.control.horizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_LEFT;break;case"right":e.control.horizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_RIGHT;break;case"center":e.control.horizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_CENTER}switch(e.verticalAlignment){case"top":e.control.verticalAlignment=Z.Control.VERTICAL_ALIGNMENT_TOP;break;case"bottom":e.control.verticalAlignment=Z.Control.VERTICAL_ALIGNMENT_BOTTOM;break;case"center":e.control.verticalAlignment=Z.Control.VERTICAL_ALIGNMENT_CENTER}return e.control}cloneControl(e){const t=e.control.clone(e.host);return e.container&&e.container.addControl(t),e.name&&(t.name=e.name),t}createControlObservableSelector(e){return e.selector}getControlByName(e){return e.container.children.find((t=>t.name===e.name))}setIsVisible(e){return e.control.isVisible=e.isVisible,e.control}setIsReadonly(e){return e.control.isReadOnly=e.isReadOnly,e.control}setIsEnabled(e){return e.control.isEnabled=e.isEnabled,e.control}setHeight(e){return e.control.height=e.height,e.control}setWidth(e){return e.control.width=e.width,e.control}setColor(e){return e.control.color=e.color,e.control}setFontSize(e){return e.control.fontSize=e.fontSize,e.control}getHeight(e){return e.control.height}getWidth(e){return e.control.width}getColor(e){return e.control.color}getFontSize(e){return e.control.fontSize}getIsVisible(e){return e.control.isVisible}getIsReadonly(e){return e.control.isReadOnly}getIsEnabled(e){return e.control.isEnabled}}class Ar{constructor(e){this.context=e}createSlider(e){const t=new Z.Slider(e.name);return t.minimum=e.minimum,t.maximum=e.maximum,t.value=e.value,t.step=e.step,t.isVertical=e.isVertical,t.displayThumb=e.displayThumb,t.thumbColor="white",e.isVertical?(e.height?t.height=e.height:t.height=1,e.width?t.width=e.width:t.width="42px"):(e.width?t.width=e.width:t.width=1,e.height?t.height=e.height:t.height="42px"),t.color=e.color,t.background=e.background,t}changeSliderThumb(e){return e.slider.thumbColor=e.thumbColor,e.slider.isThumbCircle=e.isThumbCircle,e.slider.isThumbClamped=e.isThumbClamped,e.slider.displayThumb=e.displayThumb,e.thumbWidth&&(e.slider.thumbWidth=e.thumbWidth),e.slider}setBorderColor(e){return e.slider.borderColor=e.borderColor,e.slider}setBackgroundColor(e){return e.slider.background=e.backgroundColor,e.slider}setMaximum(e){return e.slider.maximum=e.value,e.slider}setMinimum(e){return e.slider.minimum=e.value,e.slider}setStep(e){return e.slider.step=e.value,e.slider}setValue(e){return e.slider.value=e.value,e.slider}createSliderObservableSelector(e){return e.selector}getBorderColor(e){return e.slider.borderColor}getBackgroundColor(e){return e.slider.background}getMaximum(e){return e.slider.maximum}getMinimum(e){return e.slider.minimum}getStep(e){return e.slider.step}getValue(e){return e.slider.value}getThumbColor(e){return e.slider.thumbColor}getThumbWidth(e){return e.slider.thumbWidth}getIsVertical(e){return e.slider.isVertical}getDisplayThumb(e){return e.slider.displayThumb}getIsThumbCircle(e){return e.slider.isThumbCircle}getIsThumbClamped(e){return e.slider.isThumbClamped}}!function(e){e.ArcRotateCameraDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p){this.radius=20,this.target=[0,0,0],this.alpha=45,this.beta=70,this.lowerBetaLimit=1,this.upperBetaLimit=179,this.angularSensibilityX=1e3,this.angularSensibilityY=1e3,this.panningSensibility=1e3,this.wheelPrecision=3,this.maxZ=1e3,void 0!==e&&(this.radius=e),void 0!==t&&(this.alpha=t),void 0!==r&&(this.beta=r),void 0!==i&&(this.lowerRadiusLimit=i),void 0!==o&&(this.upperRadiusLimit=o),void 0!==n&&(this.lowerAlphaLimit=n),void 0!==s&&(this.upperAlphaLimit=s),void 0!==a&&(this.lowerBetaLimit=a),void 0!==c&&(this.upperBetaLimit=c),void 0!==h&&(this.angularSensibilityX=h),void 0!==l&&(this.angularSensibilityY=l),void 0!==u&&(this.panningSensibility=u),void 0!==d&&(this.wheelPrecision=d),void 0!==p&&(this.maxZ=p)}},e.FreeCameraDto=class{constructor(e,t){this.position=[20,20,20],this.target=[0,0,0],void 0!==e&&(this.position=e),void 0!==t&&(this.target=t)}},e.TargetCameraDto=class{constructor(e,t){this.position=[20,20,20],this.target=[0,0,0],void 0!==e&&(this.position=e),void 0!==t&&(this.target=t)}},e.PositionDto=class{constructor(e,t){this.position=[20,20,20],void 0!==e&&(this.camera=e),void 0!==t&&(this.position=t)}},e.SpeedDto=class{constructor(e,t){this.speed=1,void 0!==e&&(this.camera=e),void 0!==t&&(this.speed=t)}},e.TargetDto=class{constructor(e,t){this.target=[0,0,0],void 0!==e&&(this.camera=e),void 0!==t&&(this.target=t)}},e.MinZDto=class{constructor(e,t){this.minZ=0,void 0!==e&&(this.camera=e),void 0!==t&&(this.minZ=t)}},e.MaxZDto=class{constructor(e,t){this.maxZ=1e3,void 0!==e&&(this.camera=e),void 0!==t&&(this.maxZ=t)}},e.OrthographicDto=class{constructor(e,t,r,i,o){this.orthoLeft=-1,this.orthoRight=1,this.orthoBottom=-1,this.orthoTop=1,void 0!==e&&(this.camera=e),void 0!==t&&(this.orthoLeft=t),void 0!==r&&(this.orthoRight=r),void 0!==i&&(this.orthoTop=i),void 0!==o&&(this.orthoBottom=o)}},e.CameraDto=class{constructor(e){void 0!==e&&(this.camera=e)}}}($t||($t={})),function(e){e.ExportSceneGlbDto=class{constructor(e,t){this.fileName="bitbybit-scene",this.discardSkyboxAndGrid=!1,void 0!==e&&(this.fileName=e),void 0!==t&&(this.discardSkyboxAndGrid=t)}},e.ExportSceneDto=class{constructor(e){this.fileName="bitbybit-scene",void 0!==e&&(this.fileName=e)}},e.ExportMeshToStlDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.fileName=t)}},e.ExportMeshesToStlDto=class{constructor(e,t){void 0!==e&&(this.meshes=e),void 0!==t&&(this.fileName=t)}}}(Qt||(Qt={})),function(e){e.PBRMetallicRoughnessDto=class{constructor(e,t,r,i,o,n,s,a){this.name="Custom Material",this.baseColor="#0000ff",this.emissiveColor="#000000",this.metallic=.6,this.roughness=.5,this.alpha=1,this.backFaceCulling=!1,this.zOffset=0,void 0!==e&&(this.name=e),void 0!==t&&(this.baseColor=t),void 0!==r&&(this.emissiveColor=r),void 0!==i&&(this.metallic=i),void 0!==o&&(this.roughness=o),void 0!==n&&(this.alpha=n),void 0!==s&&(this.backFaceCulling=s),void 0!==a&&(this.zOffset=a)}},e.BaseColorDto=class{constructor(e,t){this.baseColor="#0000ff",void 0!==e&&(this.material=e),void 0!==t&&(this.baseColor=t)}},e.MaterialPropDto=class{constructor(e){void 0!==e&&(this.material=e)}},e.SkyMaterialPropDto=class{constructor(e){void 0!==e&&(this.skyMaterial=e)}},e.MetallicDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.metallic=t)}},e.RoughnessDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.roughness=t)}},e.AlphaDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.alpha=t)}},e.BackFaceCullingDto=class{constructor(e,t){this.backFaceCulling=!0,void 0!==e&&(this.material=e),void 0!==t&&(this.backFaceCulling=t)}},e.BaseTextureDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.baseTexture=t)}},e.SkyMaterialDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.luminance=1,this.turbidity=10,this.rayleigh=2,this.mieCoefficient=.005,this.mieDirectionalG=.8,this.distance=500,this.inclination=.49,this.azimuth=.25,this.useSunPosition=!1,this.up=[0,1,0],this.dithering=!1,void 0!==e&&(this.luminance=e),void 0!==t&&(this.turbidity=t),void 0!==r&&(this.rayleigh=r),void 0!==i&&(this.mieCoefficient=i),void 0!==o&&(this.mieDirectionalG=o),void 0!==n&&(this.distance=n),void 0!==s&&(this.inclination=s),void 0!==a&&(this.azimuth=a),void 0!==c&&(this.sunPosition=c),void 0!==h&&(this.useSunPosition=h),void 0!==l&&(this.cameraOffset=l),void 0!==u&&(this.up=u),void 0!==d&&(this.dithering=d)}},e.LuminanceDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.luminance=t)}},e.TurbidityDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.turbidity=t)}},e.RayleighDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.rayleigh=t)}},e.MieCoefficientDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.mieCoefficient=t)}},e.MieDirectionalGDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.mieDirectionalG=t)}},e.DistanceDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.distance=t)}},e.InclinationDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.inclination=t)}},e.AzimuthDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.azimuth=t)}},e.SunPositionDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.sunPosition=t)}},e.UseSunPositionDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.useSunPosition=t)}},e.CameraOffsetDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.cameraOffset=t)}},e.UpDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.up=t)}},e.DitheringDto=class{constructor(e,t){void 0!==e&&(this.material=e),void 0!==t&&(this.dithering=t)}}}(Jt||(Jt={})),function(e){e.ShadowLightDirectionToTargetDto=class{constructor(e,t){void 0!==e&&(this.shadowLight=e),void 0!==t&&(this.target=t)}},e.ShadowLightPositionDto=class{constructor(e,t){void 0!==e&&(this.shadowLight=e),void 0!==t&&(this.position=t)}}}(er||(er={})),function(e){let t;!function(e){e.nearest="nearest",e.bilinear="bilinear",e.trilinear="trilinear"}(t=e.samplingModeEnum||(e.samplingModeEnum={})),e.TextureSimpleDto=class{constructor(t,r,i,o,n,s,a,c,h,l){this.name="Custom Texture",this.invertY=!1,this.invertZ=!1,this.wAng=0,this.uScale=1,this.vScale=1,this.uOffset=0,this.vOffset=0,this.samplingMode=e.samplingModeEnum.nearest,void 0!==t&&(this.name=t),void 0!==r&&(this.url=r),void 0!==i&&(this.invertY=i),void 0!==o&&(this.invertZ=o),void 0!==n&&(this.wAng=n),void 0!==s&&(this.uScale=s),void 0!==a&&(this.vScale=a),void 0!==c&&(this.uOffset=c),void 0!==h&&(this.vOffset=h),void 0!==l&&(this.samplingMode=l)}}}(tr||(tr={})),function(e){let t,r,i,o,n,s,a,c,h;!function(e){e.left="left",e.center="center",e.right="right"}(t=e.horizontalAlignmentEnum||(e.horizontalAlignmentEnum={})),function(e){e.top="top",e.center="center",e.bottom="bottom"}(r=e.verticalAlignmentEnum||(e.verticalAlignmentEnum={})),function(e){e.onTextChangedObservable="onTextChangedObservable",e.onBeforeKeyAddObservable="onBeforeKeyAddObservable",e.onTextHighlightObservable="onTextHighlightObservable",e.onTextCopyObservable="onTextCopyObservable",e.onTextCutObservable="onTextCutObservable",e.onTextPasteObservable="onTextPasteObservable"}(i=e.inputTextObservableSelectorEnum||(e.inputTextObservableSelectorEnum={})),function(e){e.onValueChangedObservable="onValueChangedObservable"}(o=e.sliderObservableSelectorEnum||(e.sliderObservableSelectorEnum={})),function(e){e.onValueChangedObservable="onValueChangedObservable"}(n=e.colorPickerObservableSelectorEnum||(e.colorPickerObservableSelectorEnum={})),function(e){e.onTextChangedObservable="onTextChangedObservable"}(s=e.textBlockObservableSelectorEnum||(e.textBlockObservableSelectorEnum={})),function(e){e.onIsCheckedChangedObservable="onIsCheckedChangedObservable"}(a=e.checkboxObservableSelectorEnum||(e.checkboxObservableSelectorEnum={})),function(e){e.onIsCheckedChangedObservable="onIsCheckedChangedObservable"}(c=e.radioButtonObservableSelectorEnum||(e.radioButtonObservableSelectorEnum={})),function(e){e.onFocusObservable="onFocusObservable",e.onBlurObservable="onBlurObservable",e.onAccessibilityTagChangedObservable="onAccessibilityTagChangedObservable",e.onWheelObservable="onWheelObservable",e.onPointerMoveObservable="onPointerMoveObservable",e.onPointerOutObservable="onPointerOutObservable",e.onPointerDownObservable="onPointerDownObservable",e.onPointerUpObservable="onPointerUpObservable",e.onPointerClickObservable="onPointerClickObservable",e.onEnterPressedObservable="onEnterPressedObservable",e.onPointerEnterObservable="onPointerEnterObservable",e.onDirtyObservable="onDirtyObservable",e.onBeforeDrawObservable="onBeforeDrawObservable",e.onAfterDrawObservable="onAfterDrawObservable",e.onDisposeObservable="onDisposeObservable",e.onIsVisibleChangedObservable="onIsVisibleChangedObservable"}(h=e.controlObservableSelectorEnum||(e.controlObservableSelectorEnum={})),e.CreateFullScreenUIDto=class{constructor(e,t,r){this.name="fullscreen",void 0!==e&&(this.name=e),void 0!==t&&(this.foreground=t),void 0!==r&&(this.adaptiveScaling=r)}},e.CreateForMeshDto=class{constructor(e,t,r,i,o,n,s){this.supportPointerMove=!0,this.onlyAlphaTesting=!1,this.invertY=!0,this.sampling=tr.samplingModeEnum.trilinear,void 0!==e&&(this.mesh=e),void 0!==t&&(this.width=t),void 0!==r&&(this.height=r),void 0!==i&&(this.supportPointerMove=i),void 0!==o&&(this.onlyAlphaTesting=o),void 0!==n&&(this.invertY=n),void 0!==s&&(this.sampling=s)}},e.CreateStackPanelDto=class{constructor(e,t,r,i,o,n,s){this.name="stackPanel",this.isVertical=!0,this.spacing=0,this.color="#00000000",this.background="#00000055",void 0!==e&&(this.name=e),void 0!==t&&(this.isVertical=t),void 0!==r&&(this.spacing=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o),void 0!==n&&(this.color=n),void 0!==s&&(this.background=s)}},e.SetStackPanelIsVerticalDto=class{constructor(e,t){this.isVertical=!0,void 0!==e&&(this.stackPanel=e),void 0!==t&&(this.isVertical=t)}},e.SetStackPanelSpacingDto=class{constructor(e,t){this.spacing=0,void 0!==e&&(this.stackPanel=e),void 0!==t&&(this.spacing=t)}},e.SetStackPanelWidthDto=class{constructor(e,t){void 0!==e&&(this.stackPanel=e),void 0!==t&&(this.width=t)}},e.SetStackPanelHeightDto=class{constructor(e,t){void 0!==e&&(this.stackPanel=e),void 0!==t&&(this.height=t)}},e.StackPanelDto=class{constructor(e){void 0!==e&&(this.stackPanel=e)}},e.SliderObservableSelectorDto=class{constructor(e){this.selector=e}},e.ColorPickerObservableSelectorDto=class{constructor(e){this.selector=e}},e.InputTextObservableSelectorDto=class{constructor(e){this.selector=e}},e.RadioButtonObservableSelectorDto=class{constructor(e){this.selector=e}},e.CheckboxObservableSelectorDto=class{constructor(e){this.selector=e}},e.ControlObservableSelectorDto=class{constructor(e){this.selector=e}},e.TextBlockObservableSelectorDto=class{constructor(e){this.selector=e}},e.ContainerDto=class{constructor(e){void 0!==e&&(this.container=e)}},e.AddControlsToContainerDto=class{constructor(e,t,r){this.clearControlsFirst=!0,void 0!==e&&(this.container=e),void 0!==t&&(this.controls=t),void 0!==r&&(this.clearControlsFirst=r)}},e.GetControlByNameDto=class{constructor(e,t){this.name="controlName",void 0!==e&&(this.container=e),void 0!==t&&(this.name=t)}},e.SetControlIsVisibleDto=class{constructor(e,t){this.isVisible=!0,void 0!==e&&(this.control=e),void 0!==t&&(this.isVisible=t)}},e.SetControlIsReadonlyDto=class{constructor(e,t){this.isReadOnly=!1,void 0!==e&&(this.control=e),void 0!==t&&(this.isReadOnly=t)}},e.SetControlIsEnabledDto=class{constructor(e,t){this.isEnabled=!0,void 0!==e&&(this.control=e),void 0!==t&&(this.isEnabled=t)}},e.CreateImageDto=class{constructor(e,t,r,i,o){this.name="imageName",this.color="black",void 0!==e&&(this.name=e),void 0!==t&&(this.url=t),void 0!==r&&(this.color=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o)}},e.SetImageUrlDto=class{constructor(e,t){void 0!==e&&(this.image=e),void 0!==t&&(this.url=t)}},e.ImageDto=class{constructor(e){void 0!==e&&(this.image=e)}},e.CreateButtonDto=class{constructor(e,t,r,i,o,n,s){this.name="buttonName",this.label="Click me!",this.color="black",this.background="#f0cebb",this.fontSize=24,void 0!==e&&(this.name=e),void 0!==t&&(this.label=t),void 0!==r&&(this.color=r),void 0!==i&&(this.background=i),void 0!==o&&(this.width=o),void 0!==n&&(this.height=n),void 0!==s&&(this.fontSize=s)}},e.SetButtonTextDto=class{constructor(e,t){this.text="Click me!",void 0!==e&&(this.button=e),void 0!==t&&(this.text=t)}},e.ButtonDto=class{constructor(e){void 0!==e&&(this.button=e)}},e.CreateColorPickerDto=class{constructor(e,t,r,i,o,n){this.name="colorPickerName",this.defaultColor="#f0cebb",this.color="#f0cebb",void 0!==e&&(this.name=e),void 0!==this.defaultColor&&(this.defaultColor=t),void 0!==r&&(this.color=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o),void 0!==n&&(this.size=n)}},e.SetColorPickerValueDto=class{constructor(e,t){void 0!==e&&(this.colorPicker=e),void 0!==t&&(this.color=t)}},e.SetColorPickerSizeDto=class{constructor(e,t){void 0!==e&&(this.colorPicker=e),void 0!==t&&(this.size=t)}},e.ColorPickerDto=class{constructor(e){void 0!==e&&(this.colorPicker=e)}},e.CreateCheckboxDto=class{constructor(e,t,r,i,o,n,s){this.name="checkboxName",this.isChecked=!1,this.checkSizeRatio=.8,this.color="#f0cebb",this.background="black",void 0!==e&&(this.name=e),void 0!==t&&(this.isChecked=t),void 0!==r&&(this.checkSizeRatio=r),void 0!==i&&(this.color=i),void 0!==o&&(this.background=o),void 0!==n&&(this.width=n),void 0!==s&&(this.height=s)}},e.SetControlFontSizeDto=class{constructor(e,t){this.fontSize=24,void 0!==e&&(this.control=e),void 0!==t&&(this.fontSize=t)}},e.SetControlHeightDto=class{constructor(e,t){void 0!==e&&(this.control=e),void 0!==t&&(this.height=t)}},e.SetControlWidthDto=class{constructor(e,t){void 0!==e&&(this.control=e),void 0!==t&&(this.width=t)}},e.SetControlColorDto=class{constructor(e,t){this.color="#f0cebb",void 0!==e&&(this.control=e),void 0!==t&&(this.color=t)}},e.SetContainerBackgroundDto=class{constructor(e,t){this.background="black",void 0!==e&&(this.container=e),void 0!==t&&(this.background=t)}},e.SetContainerIsReadonlyDto=class{constructor(e,t){this.isReadOnly=!1,void 0!==e&&(this.container=e),void 0!==t&&(this.isReadOnly=t)}},e.SetCheckboxBackgroundDto=class{constructor(e,t){this.background="black",void 0!==e&&(this.checkbox=e),void 0!==t&&(this.background=t)}},e.SetCheckboxCheckSizeRatioDto=class{constructor(e,t){this.checkSizeRatio=.8,void 0!==e&&(this.checkbox=e),void 0!==t&&(this.checkSizeRatio=t)}},e.CheckboxDto=class{constructor(e){void 0!==e&&(this.checkbox=e)}},e.ControlDto=class{constructor(e){void 0!==e&&(this.control=e)}},e.SetCheckboxIsCheckedDto=class{constructor(e,t){this.isChecked=!1,void 0!==e&&(this.checkbox=e),void 0!==t&&(this.isChecked=t)}},e.CreateInputTextDto=class{constructor(e,t,r,i,o){this.name="inputName",this.color="#f0cebb",this.background="black",void 0!==e&&(this.name=e),void 0!==t&&(this.color=t),void 0!==r&&(this.background=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o)}},e.SetInputTextBackgroundDto=class{constructor(e,t){this.background="black",void 0!==e&&(this.inputText=e),void 0!==t&&(this.background=t)}},e.SetInputTextTextDto=class{constructor(e,t){void 0!==e&&(this.inputText=e),void 0!==t&&(this.text=t)}},e.SetInputTextPlaceholderDto=class{constructor(e,t){void 0!==e&&(this.inputText=e),void 0!==t&&(this.placeholder=t)}},e.InputTextDto=class{constructor(e){void 0!==e&&(this.inputText=e)}},e.CreateRadioButtonDto=class{constructor(e,t,r,i,o,n,s,a){this.name="radioBtnName",this.isChecked=!1,this.checkSizeRatio=.8,this.color="#f0cebb",this.background="black",void 0!==e&&(this.name=e),void 0!==t&&(this.group=t),void 0!==r&&(this.isChecked=r),void 0!==i&&(this.checkSizeRatio=i),void 0!==o&&(this.color=o),void 0!==n&&(this.background=n),void 0!==s&&(this.width=s),void 0!==a&&(this.height=a)}},e.SetRadioButtonCheckSizeRatioDto=class{constructor(e,t){this.checkSizeRatio=.8,void 0!==e&&(this.radioButton=e),void 0!==t&&(this.checkSizeRatio=t)}},e.SetRadioButtonGroupDto=class{constructor(e,t){void 0!==e&&(this.radioButton=e),void 0!==t&&(this.group=t)}},e.SetRadioButtonBackgroundDto=class{constructor(e,t){this.background="black",void 0!==e&&(this.radioButton=e),void 0!==t&&(this.background=t)}},e.RadioButtonDto=class{constructor(e){void 0!==e&&(this.radioButton=e)}},e.CreateSliderDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l){this.name="sliderName",this.minimum=0,this.maximum=10,this.value=5,this.step=.01,this.isVertical=!1,this.color="#f0cebb",this.background="black",this.displayThumb=!0,void 0!==e&&(this.name=e),void 0!==t&&(this.minimum=t),void 0!==r&&(this.maximum=r),void 0!==i&&(this.value=i),void 0!==o&&(this.step=o),void 0!==n&&(this.isVertical=n),void 0!==s&&(this.color=s),void 0!==a&&(this.background=a),void 0!==c&&(this.width=c),void 0!==h&&(this.height=h),void 0!==l&&(this.displayThumb=l)}},e.CreateTextBlockDto=class{constructor(e,t,r,i,o){this.name="textBlockName",this.text="Hello World!",this.color="#f0cebb",this.fontSize=24,void 0!==e&&(this.name=e),void 0!==t&&(this.text=t),void 0!==r&&(this.color=r),void 0!==i&&(this.width=i),void 0!==o&&(this.height=o)}},e.SetTextBlockTextDto=class{constructor(e,t){void 0!==e&&(this.textBlock=e),void 0!==t&&(this.text=t)}},e.SetTextBlockResizeToFitDto=class{constructor(e,t){this.resizeToFit=!1,void 0!==e&&(this.textBlock=e),void 0!==t&&(this.resizeToFit=t)}},e.SetTextBlockTextWrappingDto=class{constructor(e,t){void 0!==e&&(this.textBlock=e),void 0!==t&&(this.textWrapping=t)}},e.SetTextBlockLineSpacingDto=class{constructor(e,t){void 0!==e&&(this.textBlock=e),void 0!==t&&(this.lineSpacing=t)}},e.TextBlockDto=class{constructor(e){void 0!==e&&(this.textBlock=e)}},e.SliderThumbDto=class{constructor(e,t,r,i,o,n){this.isThumbCircle=!1,this.thumbColor="white",this.isThumbClamped=!1,this.displayThumb=!0,void 0!==e&&(this.slider=e),void 0!==t&&(this.isThumbCircle=t),void 0!==r&&(this.thumbColor=r),void 0!==i&&(this.thumbWidth=i),void 0!==o&&(this.isThumbClamped=o),void 0!==n&&(this.displayThumb=n)}},e.SliderDto=class{constructor(e){void 0!==e&&(this.slider=e)}},e.SliderBorderColorDto=class{constructor(e,t){this.borderColor="white",void 0!==e&&(this.slider=e),void 0!==t&&(this.borderColor=t)}},e.SliderBackgroundColorDto=class{constructor(e,t){this.backgroundColor="black",void 0!==e&&(this.slider=e),void 0!==t&&(this.backgroundColor=t)}},e.SetSliderValueDto=class{constructor(e,t){void 0!==e&&(this.slider=e),void 0!==t&&(this.value=t)}},e.PaddingLeftRightTopBottomDto=class{constructor(e,t,r,i,o){void 0!==e&&(this.control=e),void 0!==t&&(this.paddingLeft=t),void 0!==r&&(this.paddingRight=r),void 0!==i&&(this.paddingTop=i),void 0!==o&&(this.paddingBottom=o)}},e.CloneControlDto=class{constructor(e,t,r,i){this.name="clonedControl",void 0!==e&&(this.control=e),void 0!==t&&(this.container=t),void 0!==r&&(this.name=r),void 0!==i&&(this.host=i)}},e.AlignmentDto=class{constructor(e,t,r){void 0!==e&&(this.control=e),void 0!==t&&(this.horizontalAlignment=t),void 0!==r&&(this.verticalAlignment=r)}},e.SetTextBlockTextOutlineDto=class{constructor(e,t,r){void 0!==e&&(this.textBlock=e),void 0!==t&&(this.outlineWidth=t),void 0!==r&&(this.outlineColor=r)}}}(rr||(rr={})),function(e){e.CreateGaussianSplattingMeshDto=class{constructor(e){void 0!==e&&(this.url=e)}},e.GaussianSplattingMeshDto=class{constructor(e){void 0!==e&&(this.babylonMesh=e)}}}(ir||(ir={})),function(e){e.RotationCenterAxisDto=class{constructor(e,t,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.center=r)}},e.TransformBabylonMeshDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.transformation=t)}},e.RotationCenterDto=class{constructor(e,t){this.angle=90,this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.center=t)}},e.RotationCenterYawPitchRollDto=class{constructor(e,t,r,i){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==e&&(this.yaw=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.roll=r),void 0!==i&&(this.center=i)}},e.ScaleXYZDto=class{constructor(e){this.scaleXyz=[1,1,1],void 0!==e&&(this.scaleXyz=e)}},e.ScaleCenterXYZDto=class{constructor(e,t){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.center=e),void 0!==t&&(this.scaleXyz=t)}},e.UniformScaleDto=class{constructor(e){this.scale=1,void 0!==e&&(this.scale=e)}},e.UniformScaleFromCenterDto=class{constructor(e,t){this.scale=1,this.center=[0,0,0],void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t)}},e.TranslationXYZDto=class{constructor(e){this.translation=[0,0,0],void 0!==e&&(this.translation=e)}},e.TranslationsXYZDto=class{constructor(e){void 0!==e&&(this.translations=e)}}}(or||(or={})),function(e){let t;!function(e){e.frontside="frontside",e.backside="backside",e.doubleside="doubleside"}(t=e.sideOrientationEnum||(e.sideOrientationEnum={})),e.UpdateDrawnBabylonMesh=class{constructor(e,t,r,i,o){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.position=t),void 0!==r&&(this.rotation=r),void 0!==i&&(this.scaling=i),void 0!==o&&(this.colours=o)}},e.SetParentDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.parentMesh=t)}},e.UpdateDrawnBabylonMeshPositionDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.position=t)}},e.UpdateDrawnBabylonMeshRotationDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.rotation=t)}},e.UpdateDrawnBabylonMeshScaleDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.scale=t)}},e.IntersectsMeshDto=class{constructor(e,t,r,i){this.precise=!1,this.includeDescendants=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.babylonMesh2=t),void 0!==r&&(this.precise=r),void 0!==i&&(this.includeDescendants=i)}},e.IntersectsPointDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.point=t)}},e.BabylonMeshDto=class{constructor(e){void 0!==e&&(this.babylonMesh=e)}},e.CloneToPositionsDto=class{constructor(e,t){this.positions=[],void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.positions=t)}},e.MergeMeshesDto=class{constructor(e,t,r,i,o,n){this.disposeSource=!0,this.allow32BitsIndices=!1,this.subdivideWithSubMeshes=!1,this.multiMultiMaterials=!1,void 0!==e&&(this.arrayOfMeshes=e),void 0!==t&&(this.disposeSource=t),void 0!==r&&(this.allow32BitsIndices=r),void 0!==i&&(this.meshSubclass=i),void 0!==o&&(this.subdivideWithSubMeshes=o),void 0!==n&&(this.multiMultiMaterials=n)}},e.BabylonMeshWithChildrenDto=class{constructor(e){this.includeChildren=!0,void 0!==e&&(this.babylonMesh=e)}},e.ShowHideMeshDto=class{constructor(e,t){this.includeChildren=!0,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.includeChildren=t)}},e.CloneBabylonMeshDto=class{constructor(e){void 0!==e&&(this.babylonMesh=e)}},e.ChildMeshesBabylonMeshDto=class{constructor(e,t){this.directDescendantsOnly=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.directDescendantsOnly=t)}},e.TranslateBabylonMeshDto=class{constructor(e,t){this.distance=0,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.distance=t)}},e.NameBabylonMeshDto=class{constructor(e,t,r){this.includeChildren=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.name=t),void 0!==r&&(this.includeChildren=r)}},e.ByNameBabylonMeshDto=class{constructor(e){void 0!==e&&(this.name=e)}},e.MaterialBabylonMeshDto=class{constructor(e,t,r){this.includeChildren=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.material=t),void 0!==r&&(this.includeChildren=r)}},e.IdBabylonMeshDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.id=t)}},e.ByIdBabylonMeshDto=class{constructor(e){void 0!==e&&(this.id=e)}},e.UniqueIdBabylonMeshDto=class{constructor(e){void 0!==e&&(this.uniqueId=e)}},e.PickableBabylonMeshDto=class{constructor(e,t,r){this.pickable=!1,this.includeChildren=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.pickable=t),void 0!==r&&(this.includeChildren=r)}},e.CheckCollisionsBabylonMeshDto=class{constructor(e,t,r){this.checkCollisions=!1,this.includeChildren=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.checkCollisions=t),void 0!==r&&(this.includeChildren=r)}},e.RotateBabylonMeshDto=class{constructor(e,t){void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.rotate=t)}},e.SetMeshVisibilityDto=class{constructor(e,t,r){this.visibility=0,this.includeChildren=!1,void 0!==e&&(this.babylonMesh=e),void 0!==t&&(this.visibility=t),void 0!==r&&(this.includeChildren=r)}},e.MeshInstanceAndTransformDto=class{constructor(e,t,r,i){void 0!==e&&(this.mesh=e),void 0!==t&&(this.position=t),void 0!==r&&(this.rotation=r),void 0!==i&&(this.scaling=i)}},e.MeshInstanceDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.RotateAroundAxisNodeDto=class{constructor(e,t,r,i){this.position=[0,0,0],this.axis=[0,1,0],this.angle=0,void 0!==e&&(this.mesh=e),void 0!==t&&(this.position=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.angle=i)}}}(nr||(nr={})),function(e){e.RayDto=class{constructor(e){void 0!==e&&(this.ray=e)}},e.PickInfo=class{constructor(e){void 0!==e&&(this.pickInfo=e)}}}(sr||(sr={})),function(e){e.BaseRayDto=class{constructor(e,t,r){void 0!==e&&(this.origin=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.length=r)}},e.RayDto=class{constructor(e){void 0!==e&&(this.ray=e)}},e.FromToDto=class{constructor(e,t){void 0!==e&&(this.from=e),void 0!==t&&(this.to=t)}}}(ar||(ar={})),function(e){e.ScreenshotDto=class{constructor(e,t,r,i,o){this.width=1920,this.height=1080,this.quality=1,void 0!==e&&(this.camera=e),void 0!==i&&(this.mimeType=i),void 0!==o&&(this.quality=o),void 0!==t&&(this.width=t),void 0!==r&&(this.height=r)}}}(cr||(cr={})),function(e){e.CreateBoxDto=class{constructor(e,t,r,i,o){this.width=1,this.depth=1,this.height=1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.depth=t),void 0!==r&&(this.height=r),void 0!==i&&(this.sideOrientation=i),void 0!==o&&(this.enableShadows=o)}},e.CreateCubeDto=class{constructor(e,t,r){this.size=1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.sideOrientation=t),void 0!==r&&(this.enableShadows=r)}},e.CreateSquarePlaneDto=class{constructor(e,t,r){this.size=1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.sideOrientation=t),void 0!==r&&(this.enableShadows=r)}},e.CreateSphereDto=class{constructor(e,t,r,i){this.diameter=1,this.segments=32,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.diameter=e),void 0!==t&&(this.segments=t),void 0!==r&&(this.sideOrientation=r),void 0!==i&&(this.enableShadows=i)}},e.CreateIcoSphereDto=class{constructor(e,t,r,i,o,n,s,a){this.radius=1,this.radiusX=0,this.radiusY=0,this.radiusZ=0,this.flat=!1,this.subdivisions=4,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.radius=e),void 0!==t&&(this.radiusX=t),void 0!==r&&(this.radiusY=r),void 0!==i&&(this.radiusZ=i),void 0!==o&&(this.flat=o),void 0!==n&&(this.subdivisions=n),void 0!==s&&(this.sideOrientation=s),void 0!==a&&(this.enableShadows=a)}},e.CreateDiscDto=class{constructor(e,t,r,i){this.radius=1,this.tessellation=32,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.radius=e),void 0!==t&&(this.tessellation=t),void 0!==r&&(this.sideOrientation=r),void 0!==i&&(this.enableShadows=i)}},e.CreateRibbonDto=class{constructor(e,t,r,i,o,n,s){this.closeArray=!1,this.closePath=!1,this.offset=0,this.updatable=!1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.pathArray=e),void 0!==t&&(this.closeArray=t),void 0!==r&&(this.closePath=r),void 0!==i&&(this.offset=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.sideOrientation=n),void 0!==s&&(this.enableShadows=s)}},e.CreateTorusDto=class{constructor(e,t,r,i,o){this.diameter=1,this.thickness=.5,this.tessellation=32,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.diameter=e),void 0!==t&&(this.thickness=t),void 0!==r&&(this.tessellation=r),void 0!==i&&(this.sideOrientation=i),void 0!==o&&(this.enableShadows=o)}},e.CreateTorusKnotDto=class{constructor(e,t,r,i,o,n,s,a){this.radius=2,this.tube=.5,this.radialSegments=128,this.tubularSegments=32,this.p=2,this.q=3,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.radius=e),void 0!==t&&(this.tube=t),void 0!==r&&(this.radialSegments=r),void 0!==i&&(this.tubularSegments=i),void 0!==o&&(this.p=o),void 0!==n&&(this.q=n),void 0!==s&&(this.sideOrientation=s),void 0!==a&&(this.enableShadows=a)}},e.CreatePolygonDto=class{constructor(e,t,r,i,o,n,s){this.depth=0,this.smoothingThreshold=.01,this.sideOrientation=nr.sideOrientationEnum.frontside,this.wrap=!1,this.enableShadows=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.holes=t),void 0!==r&&(this.depth=r),void 0!==i&&(this.smoothingThreshold=i),void 0!==o&&(this.sideOrientation=o),void 0!==n&&(this.wrap=n),void 0!==s&&(this.enableShadows=s)}},e.ExtrudePolygonDto=class{constructor(e,t,r,i,o,n){this.depth=1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.wrap=!1,this.enableShadows=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.holes=t),void 0!==r&&(this.depth=r),void 0!==i&&(this.sideOrientation=i),void 0!==o&&(this.wrap=o),void 0!==n&&(this.enableShadows=n)}},e.CreatePolyhedronDto=class{constructor(e,t,r,i,o,n,s,a,c){this.size=1,this.type=0,this.sizeX=0,this.sizeY=0,this.sizeZ=0,this.flat=!1,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.type=t),void 0!==r&&(this.sizeX=r),void 0!==i&&(this.sizeY=i),void 0!==o&&(this.sizeZ=o),void 0!==n&&(this.custom=n),void 0!==s&&(this.flat=s),void 0!==a&&(this.sideOrientation=a),void 0!==c&&(this.enableShadows=c)}},e.CreateGeodesicDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.m=4,this.n=4,this.size=1,this.sizeX=0,this.sizeY=0,this.sizeZ=0,this.flat=!1,this.subdivisions=4,this.sideOrientation=nr.sideOrientationEnum.frontside,this.enableShadows=!0,void 0!==e&&(this.m=e),void 0!==t&&(this.n=t),void 0!==r&&(this.size=r),void 0!==i&&(this.sizeX=i),void 0!==o&&(this.sizeY=o),void 0!==n&&(this.sizeZ=n),void 0!==s&&(this.flat=s),void 0!==a&&(this.subdivisions=a),void 0!==c&&(this.sideOrientation=c),void 0!==h&&(this.enableShadows=h)}},e.CreateCapsuleDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u){this.subdivisions=2,this.tessellation=16,this.height=2,this.radius=1,this.capSubdivisions=6,this.radiusTop=.5,this.radiusBottom=.5,this.topCapSubdivisions=6,this.bottomCapSubdivisions=6,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.orientation=e),void 0!==t&&(this.subdivisions=t),void 0!==r&&(this.tessellation=r),void 0!==i&&(this.height=i),void 0!==o&&(this.radius=o),void 0!==n&&(this.capSubdivisions=n),void 0!==s&&(this.radiusTop=s),void 0!==a&&(this.radiusBottom=a),void 0!==c&&(this.topCapSubdivisions=c),void 0!==h&&(this.bottomCapSubdivisions=h),void 0!==l&&(this.sideOrientation=l),void 0!==u&&(this.enableShadows=u)}},e.CreateGoldbergDto=class{constructor(e,t,r,i,o,n,s,a){this.m=4,this.n=4,this.size=1,this.sizeX=0,this.sizeY=0,this.sizeZ=0,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.m=e),void 0!==t&&(this.n=t),void 0!==r&&(this.size=r),void 0!==i&&(this.sizeX=i),void 0!==o&&(this.sizeY=o),void 0!==n&&(this.sizeZ=n),void 0!==s&&(this.sideOrientation=s),void 0!==a&&(this.enableShadows=a)}},e.CreateTubeDto=class{constructor(e,t,r,i,o,n,s){this.radius=1,this.tessellation=32,this.cap=0,this.arc=1,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.path=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.tessellation=r),void 0!==i&&(this.cap=i),void 0!==o&&(this.arc=o),void 0!==n&&(this.sideOrientation=n),void 0!==s&&(this.enableShadows=s)}},e.CreateExtrudedShapeDto=class{constructor(e,t,r,i,o,n,s){this.scale=1,this.rotation=0,this.closeShape=!1,this.closePath=!1,this.cap=0,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.path=t),void 0!==r&&(this.scale=r),void 0!==i&&(this.rotation=i),void 0!==o&&(this.cap=o),void 0!==n&&(this.sideOrientation=n),void 0!==s&&(this.enableShadows=s)}},e.CreateCylinderDto=class{constructor(e,t,r,i,o,n,s){this.height=1,this.diameterTop=1,this.diameterBottom=1,this.tessellation=64,this.subdivisions=1,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.height=e),void 0!==t&&(this.diameterTop=t),void 0!==r&&(this.diameterBottom=r),void 0!==i&&(this.tessellation=i),void 0!==o&&(this.subdivisions=o),void 0!==n&&(this.sideOrientation=n),void 0!==s&&(this.enableShadows=s)}},e.CreateLatheDto=class{constructor(e,t,r,i,o,n,s){this.radius=1,this.tessellation=64,this.arc=1,this.closed=!0,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.tessellation=r),void 0!==i&&(this.arc=i),void 0!==o&&(this.closed=o),void 0!==n&&(this.sideOrientation=n),void 0!==s&&(this.enableShadows=s)}},e.CreateGroundDto=class{constructor(e,t,r,i,o,n){this.width=10,this.height=10,this.subdivisionsX=1,this.subdivisionsY=1,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.subdivisionsX=r),void 0!==i&&(this.subdivisionsY=i),void 0!==o&&(this.sideOrientation=o),void 0!==n&&(this.enableShadows=n)}},e.CreateRectanglePlaneDto=class{constructor(e,t,r,i){this.width=1,this.height=1,this.sideOrientation=nr.sideOrientationEnum.doubleside,this.enableShadows=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.sideOrientation=r),void 0!==i&&(this.enableShadows=i)}}}(hr||(hr={})),function(e){let t,r,i,o;!function(e){e.onDragStartObservable="onDragStartObservable",e.onDragObservable="onDragObservable",e.onDragEndObservable="onDragEndObservable"}(t=e.positionGizmoObservableSelectorEnum||(e.positionGizmoObservableSelectorEnum={})),function(e){e.onDragStartObservable="onDragStartObservable",e.onDragObservable="onDragObservable",e.onDragEndObservable="onDragEndObservable"}(r=e.rotationGizmoObservableSelectorEnum||(e.rotationGizmoObservableSelectorEnum={})),function(e){e.onDragStartObservable="onDragStartObservable",e.onDragObservable="onDragObservable",e.onDragEndObservable="onDragEndObservable"}(i=e.scaleGizmoObservableSelectorEnum||(e.scaleGizmoObservableSelectorEnum={})),function(e){e.onDragStartObservable="onDragStartObservable",e.onScaleBoxDragObservable="onScaleBoxDragObservable",e.onScaleBoxDragEndObservable="onScaleBoxDragEndObservable",e.onRotationSphereDragObservable="onRotationSphereDragObservable",e.onRotationSphereDragEndObservable="onRotationSphereDragEndObservable"}(o=e.boundingBoxGizmoObservableSelectorEnum||(e.boundingBoxGizmoObservableSelectorEnum={})),e.CreateGizmoDto=class{constructor(e,t,r,i,o,n,s,a){this.usePointerToAttachGizmos=!0,this.clearGizmoOnEmptyPointerEvent=!1,this.scaleRatio=1,void 0!==e&&(this.positionGizmoEnabled=e),void 0!==t&&(this.rotationGizmoEnabled=t),void 0!==r&&(this.scaleGizmoEnabled=r),void 0!==i&&(this.boundingBoxGizmoEnabled=i),void 0!==n&&(this.clearGizmoOnEmptyPointerEvent=n),void 0!==s&&(this.scaleRatio=s),void 0!==a&&(this.usePointerToAttachGizmos=a),void 0!==o&&(this.attachableMeshes=o)}},e.GizmoDto=class{constructor(e){void 0!==e&&(this.gizmo=e)}},e.SetGizmoScaleRatioDto=class{constructor(e,t){this.scaleRatio=1,void 0!==e&&(this.gizmo=e),void 0!==t&&(this.scaleRatio=t)}},e.GizmoManagerDto=class{constructor(e){void 0!==e&&(this.gizmoManager=e)}},e.PositionGizmoDto=class{constructor(e){void 0!==e&&(this.positionGizmo=e)}},e.SetPlanarGizmoEnabled=class{constructor(e,t){this.planarGizmoEnabled=!0,void 0!==e&&(this.positionGizmo=e),void 0!==t&&(this.planarGizmoEnabled=t)}},e.SetScaleGizmoSnapDistanceDto=class{constructor(e,t){this.snapDistance=0,void 0!==e&&(this.scaleGizmo=e),void 0!==t&&(this.snapDistance=t)}},e.SetScaleGizmoIncrementalSnapDto=class{constructor(e,t){this.incrementalSnap=!1,void 0!==e&&(this.scaleGizmo=e),void 0!==t&&(this.incrementalSnap=t)}},e.SetScaleGizmoSensitivityDto=class{constructor(e,t){this.sensitivity=1,void 0!==e&&(this.scaleGizmo=e),void 0!==t&&(this.sensitivity=t)}},e.ScaleGizmoDto=class{constructor(e){void 0!==e&&(this.scaleGizmo=e)}},e.BoundingBoxGizmoDto=class{constructor(e){void 0!==e&&(this.boundingBoxGizmo=e)}},e.SetBoundingBoxGizmoRotationSphereSizeDto=class{constructor(e,t){this.rotationSphereSize=.1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.rotationSphereSize=t)}},e.SetBoundingBoxGizmoFixedDragMeshScreenSizeDto=class{constructor(e,t){this.fixedDragMeshScreenSize=!1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.fixedDragMeshScreenSize=t)}},e.SetBoundingBoxGizmoFixedDragMeshBoundsSizeDto=class{constructor(e,t){this.fixedDragMeshBoundsSize=!1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.fixedDragMeshBoundsSize=t)}},e.SetBoundingBoxGizmoFixedDragMeshScreenSizeDistanceFactorDto=class{constructor(e,t){this.fixedDragMeshScreenSizeDistanceFactor=10,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.fixedDragMeshScreenSizeDistanceFactor=t)}},e.SetBoundingBoxGizmoScalingSnapDistanceDto=class{constructor(e,t){this.scalingSnapDistance=0,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.scalingSnapDistance=t)}},e.SetBoundingBoxGizmoRotationSnapDistanceDto=class{constructor(e,t){this.rotationSnapDistance=0,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.rotationSnapDistance=t)}},e.SetBoundingBoxGizmoScaleBoxSizeDto=class{constructor(e,t){this.scaleBoxSize=.1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.scaleBoxSize=t)}},e.SetBoundingBoxGizmoIncrementalSnapDto=class{constructor(e,t){this.incrementalSnap=!1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.incrementalSnap=t)}},e.SetBoundingBoxGizmoScalePivotDto=class{constructor(e,t){void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.scalePivot=t)}},e.SetBoundingBoxGizmoAxisFactorDto=class{constructor(e,t){void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.axisFactor=t)}},e.SetBoundingBoxGizmoScaleDragSpeedDto=class{constructor(e,t){this.scaleDragSpeed=1,void 0!==e&&(this.boundingBoxGizmo=e),void 0!==t&&(this.scaleDragSpeed=t)}},e.SetPositionGizmoSnapDistanceDto=class{constructor(e,t){this.snapDistance=0,void 0!==e&&(this.positionGizmo=e),void 0!==t&&(this.snapDistance=t)}},e.SetRotationGizmoSnapDistanceDto=class{constructor(e,t){this.snapDistance=0,void 0!==e&&(this.rotationGizmo=e),void 0!==t&&(this.snapDistance=t)}},e.SetRotationGizmoSensitivityDto=class{constructor(e,t){this.sensitivity=1,void 0!==e&&(this.rotationGizmo=e),void 0!==t&&(this.sensitivity=t)}},e.RotationGizmoDto=class{constructor(e){void 0!==e&&(this.rotationGizmo=e)}},e.AxisScaleGizmoDto=class{constructor(e){void 0!==e&&(this.axisScaleGizmo=e)}},e.SetIsEnabledAxisScaleGizmoDto=class{constructor(e,t){this.isEnabled=!0,void 0!==e&&(this.axisScaleGizmo=e),void 0!==t&&(this.isEnabled=t)}},e.AxisDragGizmoDto=class{constructor(e){void 0!==e&&(this.axisDragGizmo=e)}},e.SetIsEnabledAxisDragGizmoDto=class{constructor(e,t){this.isEnabled=!0,void 0!==e&&(this.axisDragGizmo=e),void 0!==t&&(this.isEnabled=t)}},e.SetIsEnabledPlaneRotationGizmoDto=class{constructor(e,t){this.isEnabled=!0,void 0!==e&&(this.planeRotationGizmo=e),void 0!==t&&(this.isEnabled=t)}},e.SetIsEnabledPlaneDragGizmoDto=class{constructor(e,t){this.isEnabled=!0,void 0!==e&&(this.planeDragGizmo=e),void 0!==t&&(this.isEnabled=t)}},e.PlaneDragGizmoDto=class{constructor(e){void 0!==e&&(this.planeDragGizmo=e)}},e.PlaneRotationGizmoDto=class{constructor(e){void 0!==e&&(this.planeRotationGizmo=e)}},e.AttachToMeshDto=class{constructor(e,t){this.mesh=e,this.gizmoManager=t}},e.PositionGizmoObservableSelectorDto=class{constructor(e){this.selector=e}},e.BoundingBoxGizmoObservableSelectorDto=class{constructor(e){this.selector=e}},e.RotationGizmoObservableSelectorDto=class{constructor(e){this.selector=e}},e.ScaleGizmoObservableSelectorDto=class{constructor(e){this.selector=e}}}(lr||(lr={})),function(e){e.WebXRDefaultExperienceOptions=class{constructor(e){void 0!==e&&(this.disableDefaultUI=e)}},e.DefaultWebXRWithTeleportationDto=class{constructor(e){void 0!==e&&(this.groundMeshes=e)}},e.WebXRDefaultExperienceDto=class{constructor(e){void 0!==e&&(this.webXRDefaultExperience=e)}},e.WebXRExperienceHelperDto=class{constructor(e){void 0!==e&&(this.baseExperience=e)}}}(ur||(ur={})),function(e){let t,r;!function(e){e.default="default",e.clearSky="clearSky",e.city="city",e.greyGradient="greyGradient"}(t=e.skyboxEnum||(e.skyboxEnum={})),function(e){e.none="none",e.exponential="exponential",e.exponentialSquared="exponentialSquared",e.linear="linear"}(r=e.fogModeEnum||(e.fogModeEnum={}))}(dr||(dr={})),function(e){e.SceneBackgroundColourDto=class{constructor(e){this.colour="#ffffff",void 0!==e&&(this.colour=e)}},e.SceneDto=class{constructor(e){void 0!==e&&(this.scene=e)}},e.EnablePhysicsDto=class{constructor(e){this.vector=[0,-9.81,0],void 0!==e&&(this.vector=e)}},e.PointLightDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p){this.position=[0,0,0],this.intensity=2e3,this.diffuse="#ffffff",this.specular="#ffffff",this.radius=.1,this.shadowGeneratorMapSize=1024,this.enableShadows=!0,this.shadowDarkness=0,this.shadowUsePercentageCloserFiltering=!0,this.shadowContactHardeningLightSizeUVRatio=.2,this.shadowBias=1e-4,this.shadowNormalBias=.002,this.shadowMaxZ=1e3,this.shadowMinZ=.1,void 0!==e&&(this.position=e),void 0!==t&&(this.intensity=t),void 0!==r&&(this.diffuse=r),void 0!==i&&(this.specular=i),void 0!==o&&(this.radius=o),void 0!==n&&(this.shadowGeneratorMapSize=n),void 0!==s&&(this.enableShadows=s),void 0!==a&&(this.shadowDarkness=a),void 0!==c&&(this.shadowUsePercentageCloserFiltering=c),void 0!==h&&(this.shadowContactHardeningLightSizeUVRatio=h),void 0!==l&&(this.shadowBias=l),void 0!==u&&(this.shadowNormalBias=u),void 0!==d&&(this.shadowMaxZ=d),void 0!==p&&(this.shadowMinZ=p)}},e.ActiveCameraDto=class{constructor(e){void 0!==e&&(this.camera=e)}},e.UseRightHandedSystemDto=class{constructor(e){this.use=!0,void 0!==e&&(this.use=e)}},e.DirectionalLightDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.direction=[-100,-100,-100],this.intensity=.5,this.diffuse="#ffffff",this.specular="#ffffff",this.shadowGeneratorMapSize=1024,this.enableShadows=!0,this.shadowDarkness=0,this.shadowUsePercentageCloserFiltering=!0,this.shadowContactHardeningLightSizeUVRatio=.2,this.shadowBias=1e-4,this.shadowNormalBias=.002,this.shadowMaxZ=1e3,this.shadowMinZ=0,void 0!==e&&(this.direction=e),void 0!==t&&(this.intensity=t),void 0!==r&&(this.diffuse=r),void 0!==i&&(this.specular=i),void 0!==o&&(this.shadowGeneratorMapSize=o),void 0!==n&&(this.enableShadows=n),void 0!==s&&(this.shadowDarkness=s),void 0!==a&&(this.shadowUsePercentageCloserFiltering=a),void 0!==c&&(this.shadowContactHardeningLightSizeUVRatio=c),void 0!==h&&(this.shadowBias=h),void 0!==l&&(this.shadowNormalBias=l),void 0!==u&&(this.shadowMaxZ=u),void 0!==d&&(this.shadowMinZ=d)}},e.CameraConfigurationDto=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.position=[10,10,10],this.lookAt=[0,0,0],this.lowerBetaLimit=1,this.upperBetaLimit=179,this.angularSensibilityX=1e3,this.angularSensibilityY=1e3,this.maxZ=1e3,this.panningSensibility=1e3,this.wheelPrecision=3,void 0!==e&&(this.position=e),void 0!==t&&(this.lookAt=t),void 0!==r&&(this.lowerRadiusLimit=r),void 0!==i&&(this.upperRadiusLimit=i),void 0!==o&&(this.lowerAlphaLimit=o),void 0!==n&&(this.upperAlphaLimit=n),void 0!==s&&(this.lowerBetaLimit=s),void 0!==a&&(this.upperBetaLimit=a),void 0!==c&&(this.angularSensibilityX=c),void 0!==h&&(this.angularSensibilityY=h),void 0!==l&&(this.maxZ=l),void 0!==u&&(this.panningSensibility=u),void 0!==d&&(this.wheelPrecision=d)}},e.SkyboxDto=class{constructor(e,t,r,i){this.skybox=dr.skyboxEnum.clearSky,this.size=1e3,this.blur=.1,this.environmentIntensity=.7,void 0!==e&&(this.skybox=e),void 0!==t&&(this.size=t),void 0!==r&&(this.blur=r),void 0!==i&&(this.environmentIntensity=i)}},e.PointerDto=class{},e.FogDto=class{constructor(e,t,r,i,o){this.color="#ffffff",this.density=.1,void 0!==e&&(this.mode=e),void 0!==t&&(this.color=t),void 0!==r&&(this.density=r),void 0!==i&&(this.start=i),void 0!==o&&(this.end=o)}}}(pr||(pr={})),function(e){e.NodeDto=class{constructor(e){void 0!==e&&(this.node=e)}},e.NodeTranslationDto=class{constructor(e,t,r){void 0!==e&&(this.node=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.distance=r)}},e.NodeParentDto=class{constructor(e,t){void 0!==e&&(this.node=e),void 0!==t&&(this.parentNode=t)}},e.NodeDirectionDto=class{constructor(e,t){void 0!==e&&(this.node=e),void 0!==t&&(this.direction=t)}},e.NodePositionDto=class{constructor(e,t){void 0!==e&&(this.node=e),void 0!==t&&(this.position=t)}},e.RotateNodeDto=class{constructor(e,t,r){this.axis=[0,1,0],this.angle=0,void 0!==e&&(this.node=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.angle=r)}},e.RotateAroundAxisNodeDto=class{constructor(e,t,r,i){this.position=[0,0,0],this.axis=[0,1,0],this.angle=0,void 0!==e&&(this.node=e),void 0!==t&&(this.position=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.angle=i)}},e.CreateNodeFromRotationDto=class{constructor(e,t,r){this.origin=[0,0,0],this.rotation=[0,0,0],void 0!==e&&(this.parent=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.rotation=r)}},e.DrawNodeDto=class{constructor(e,t,r,i,o){this.colorX="#ff0000",this.colorY="#00ff00",this.colorZ="#0000ff",this.size=2,void 0!==e&&(this.node=e),void 0!==t&&(this.colorX=t),void 0!==r&&(this.colorY=r),void 0!==i&&(this.colorZ=i),void 0!==o&&(this.size=o)}},e.DrawNodesDto=class{constructor(e,t,r,i,o){this.colorX="#ff0000",this.colorY="#00ff00",this.colorZ="#0000ff",this.size=2,void 0!==e&&(this.nodes=e),void 0!==t&&(this.colorX=t),void 0!==r&&(this.colorY=r),void 0!==i&&(this.colorZ=i),void 0!==o&&(this.size=o)}}}(fr||(fr={})),function(e){let t;e.DrawAny=class{constructor(e,t,r){void 0!==e&&(this.entity=e),void 0!==t&&(this.options=t),void 0!==r&&(this.babylonMesh=r)}},e.SceneDrawGridMeshDto=class{constructor(e,t,r,i,o,n,s,a,c,h){this.width=400,this.height=400,this.subdivisions=10,this.majorUnitFrequency=10,this.minorUnitVisibility=.45,this.gridRatio=.5,this.opacity=.5,this.backFaceCulling=!1,this.mainColor="#ffffff",this.secondaryColor="#ffffff",void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.subdivisions=r),void 0!==i&&(this.majorUnitFrequency=i),void 0!==o&&(this.minorUnitVisibility=o),void 0!==n&&(this.gridRatio=n),void 0!==s&&(this.opacity=s),void 0!==a&&(this.backFaceCulling=a),void 0!==c&&(this.mainColor=c),void 0!==h&&(this.secondaryColor=h)}},e.DrawBasicGeometryOptions=class{constructor(e,t,r,i,o){this.colours="#ff0000",this.size=.1,this.opacity=1,this.updatable=!1,this.hidden=!1,void 0!==e&&(this.colours=e),void 0!==t&&(this.size=t),void 0!==r&&(this.opacity=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o)}},e.DrawNodeOptions=class{constructor(e,t,r,i){this.colorX="#0000ff",this.colorY="#00ff00",this.colorZ="#ff0000",this.size=2,void 0!==e&&(this.colorX=e),void 0!==t&&(this.colorY=t),void 0!==r&&(this.colorZ=r),void 0!==i&&(this.size=i)}},e.DrawManifoldOrCrossSectionOptions=class{constructor(e,t,r,i,o,n,s){this.faceOpacity=1,this.faceColour="#ff0000",this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.computeNormals=!1,void 0!==e&&(this.faceOpacity=e),void 0!==t&&(this.faceMaterial=t),void 0!==r&&(this.faceColour=r),void 0!==i&&(this.crossSectionColour=i),void 0!==o&&(this.crossSectionWidth=o),void 0!==n&&(this.crossSectionOpacity=n),void 0!==s&&(this.computeNormals=s)}},e.DrawOcctShapeOptions=class{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.vertexColour="#ffaaff",this.edgeWidth=2,this.vertexSize=.03,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.faceOpacity=e),void 0!==t&&(this.edgeOpacity=t),void 0!==r&&(this.edgeColour=r),void 0!==i&&(this.faceMaterial=i),void 0!==o&&(this.faceColour=o),void 0!==h&&(this.vertexColour=h),void 0!==l&&(this.vertexSize=l),void 0!==n&&(this.edgeWidth=n),void 0!==s&&(this.drawEdges=s),void 0!==a&&(this.drawFaces=a),void 0!==c&&(this.drawVertices=c),void 0!==u&&(this.precision=u),void 0!==d&&(this.drawEdgeIndexes=d),void 0!==p&&(this.edgeIndexHeight=p),void 0!==f&&(this.edgeIndexColour=f),void 0!==v&&(this.drawFaceIndexes=v),void 0!==g&&(this.faceIndexHeight=g),void 0!==m&&(this.faceIndexColour=m)}},e.DrawOcctShapeSimpleOptions=class{constructor(e,t,r,i,o,n){this.precision=.01,this.drawFaces=!0,this.faceColour="#ff0000",this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=2,void 0!==e&&(this.precision=e),void 0!==t&&(this.drawFaces=t),void 0!==r&&(this.faceColour=r),void 0!==i&&(this.drawEdges=i),void 0!==o&&(this.edgeColour=o),void 0!==n&&(this.edgeWidth=n)}},e.DrawOcctShapeMaterialOptions=class{constructor(e,t,r,i,o){this.precision=.01,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=2,void 0!==e&&(this.precision=e),void 0!==t&&(this.faceMaterial=t),void 0!==r&&(this.drawEdges=r),void 0!==i&&(this.edgeColour=i),void 0!==o&&(this.edgeWidth=o)}},function(e){e[e.point=0]="point",e[e.points=1]="points",e[e.line=2]="line",e[e.lines=3]="lines",e[e.node=4]="node",e[e.nodes=5]="nodes",e[e.polyline=6]="polyline",e[e.polylines=7]="polylines",e[e.verbCurve=8]="verbCurve",e[e.verbCurves=9]="verbCurves",e[e.verbSurface=10]="verbSurface",e[e.verbSurfaces=11]="verbSurfaces",e[e.jscadMesh=12]="jscadMesh",e[e.jscadMeshes=13]="jscadMeshes",e[e.occt=14]="occt",e[e.manifold=15]="manifold",e[e.tag=16]="tag",e[e.tags=17]="tags"}(t=e.drawingTypes||(e.drawingTypes={}))}(vr||(vr={})),function(e){e.GetAssetDto=class{constructor(e){void 0!==e&&(this.fileName=e)}},e.FetchDto=class{constructor(e){void 0!==e&&(this.url=e)}},e.FileDto=class{constructor(e){void 0!==e&&(this.file=e)}},e.FilesDto=class{constructor(e){void 0!==e&&(this.files=e)}},e.AssetFileDto=class{constructor(e,t){this.hidden=!1,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.hidden=t)}},e.AssetFileByUrlDto=class{constructor(e,t,r){this.hidden=!1,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.rootUrl=t),void 0!==r&&(this.hidden=r)}}}(gr||(gr={})),function(e){e.StringifyDto=class{constructor(e){void 0!==e&&(this.json=e)}},e.ParseDto=class{constructor(e){this.text="[0, 0, 0]",void 0!==e&&(this.text=e)}},e.QueryDto=class{constructor(e,t){void 0!==e&&(this.json=e),void 0!==t&&(this.query=t)}},e.SetValueOnPropDto=class{constructor(e,t,r){this.property="propName",void 0!==e&&(this.json=e),void 0!==t&&(this.value=t),void 0!==r&&(this.property=r)}},e.GetJsonFromArrayByFirstPropMatchDto=class{constructor(e,t,r){this.property="propName",void 0!==e&&(this.jsonArray=e),void 0!==t&&(this.property=t),void 0!==r&&(this.match=r)}},e.GetValueOnPropDto=class{constructor(e,t){this.property="propName",void 0!==e&&(this.json=e),void 0!==t&&(this.property=t)}},e.SetValueDto=class{constructor(e,t,r,i){this.path="$.pathToParent",this.prop="propertyName",void 0!==e&&(this.json=e),void 0!==t&&(this.value=t),void 0!==r&&(this.path=r),void 0!==i&&(this.prop=i)}},e.SetValuesOnPathsDto=class{constructor(e,t,r,i){void 0!==e&&(this.json=e),void 0!==t&&(this.values=t),void 0!==r&&(this.paths=r),void 0!==i&&(this.props=i)}},e.PathsDto=class{constructor(e,t){void 0!==e&&(this.json=e),void 0!==t&&(this.query=t)}},e.JsonDto=class{constructor(e){void 0!==e&&(this.json=e)}}}(mr||(mr={})),function(e){e.DrawTagDto=class{constructor(e,t,r){this.updatable=!1,void 0!==e&&(this.tag=e),void 0!==t&&(this.updatable=t),void 0!==r&&(this.tagVariable=r)}},e.DrawTagsDto=class{constructor(e,t,r){this.updatable=!1,void 0!==e&&(this.tags=e),void 0!==t&&(this.updatable=t),void 0!==r&&(this.tagsVariable=r)}},e.TagDto=class{constructor(e,t,r,i,o,n,s){this.position=[0,0,0],this.colour="#444444",this.size=12,this.adaptDepth=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.position=t),void 0!==r&&(this.colour=r),void 0!==i&&(this.size=i),void 0!==o&&(this.adaptDepth=o),void 0!==n&&(this.needsUpdate=n),void 0!==s&&(this.id=s)}}}(br||(br={})),function(e){e.PostFromIframe=class{constructor(e,t){void 0!==e&&(this.data=e),void 0!==t&&(this.targetOrigin=t)}}}(yr||(yr={})),function(e){e.CurveDto=class{constructor(e){void 0!==e&&(this.curve=e)}},e.LineDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.LinesDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.CurvesDto=class{constructor(e){void 0!==e&&(this.curves=e)}},e.ClosestPointDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.point=t)}},e.ClosestPointsDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.points=t)}},e.BezierCurveDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.weights=t)}},e.DrawCurveDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.curve=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.curveMesh=n)}},e.CurveParameterDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.parameter=t)}},e.CurvesParameterDto=class{constructor(e,t){void 0!==e&&(this.curves=e),void 0!==t&&(this.parameter=t)}},e.CurveTransformDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.transformation=t)}},e.CurvesTransformDto=class{constructor(e,t){void 0!==e&&(this.curves=e),void 0!==t&&(this.transformation=t)}},e.CurveToleranceDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.tolerance=t)}},e.CurveLengthToleranceDto=class{constructor(e,t,r){void 0!==e&&(this.curve=e),void 0!==t&&(this.length=t),void 0!==r&&(this.tolerance=r)}},e.CurveDerivativesDto=class{constructor(e,t,r){void 0!==e&&(this.curve=e),void 0!==t&&(this.parameter=t),void 0!==r&&(this.numDerivatives=r)}},e.CurveSubdivisionsDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.subdivision=t)}},e.CurvesSubdivisionsDto=class{constructor(e,t){void 0!==e&&(this.curves=e),void 0!==t&&(this.subdivision=t)}},e.CurvesDivideLengthDto=class{constructor(e,t){void 0!==e&&(this.curves=e),void 0!==t&&(this.length=t)}},e.CurveDivideLengthDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.length=t)}},e.DrawCurvesDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.curves=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.curvesMesh=n)}},e.CurveNurbsDataDto=class{constructor(e,t,r,i){void 0!==e&&(this.degree=e),void 0!==t&&(this.weights=t),void 0!==r&&(this.knots=r),void 0!==i&&(this.points=i)}},e.CurvePathDataDto=class{constructor(e,t){void 0!==e&&(this.degree=e),void 0!==t&&(this.points=t)}},e.EllipseDto=class{constructor(e){void 0!==e&&(this.ellipse=e)}},e.CircleDto=class{constructor(e){void 0!==e&&(this.circle=e)}},e.ArcDto=class{constructor(e){void 0!==e&&(this.arc=e)}},e.EllipseParametersDto=class{constructor(e,t,r){void 0!==e&&(this.xAxis=e),void 0!==t&&(this.yAxis=t),void 0!==r&&(this.center=r)}},e.CircleParametersDto=class{constructor(e,t,r,i){void 0!==e&&(this.xAxis=e),void 0!==t&&(this.yAxis=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.center=i)}},e.ArcParametersDto=class{constructor(e,t,r,i,o,n){void 0!==e&&(this.minAngle=e),void 0!==t&&(this.maxAngle=t),void 0!==r&&(this.xAxis=r),void 0!==i&&(this.yAxis=i),void 0!==o&&(this.radius=o),void 0!==n&&(this.center=n)}},e.EllipseArcParametersDto=class{constructor(e,t,r,i,o){void 0!==e&&(this.minAngle=e),void 0!==t&&(this.maxAngle=t),void 0!==r&&(this.xAxis=r),void 0!==i&&(this.yAxis=i),void 0!==o&&(this.center=o)}},e.SurfaceDto=class{constructor(e){void 0!==e&&(this.surface=e)}},e.SurfaceTransformDto=class{constructor(e,t){void 0!==e&&(this.surface=e),void 0!==t&&(this.transformation=t)}},e.SurfaceParameterDto=class{constructor(e,t,r){void 0!==e&&(this.surface=e),void 0!==t&&(this.parameter=t),void 0!==r&&(this.useV=r)}},e.IsocurvesParametersDto=class{constructor(e,t,r){void 0!==e&&(this.surface=e),void 0!==t&&(this.parameters=t),void 0!==r&&(this.useV=r)}},e.IsocurveSubdivisionDto=class{constructor(e,t,r,i,o){this.useV=!1,this.includeLast=!0,this.includeFirst=!0,void 0!==e&&(this.surface=e),void 0!==t&&(this.useV=t),void 0!==r&&(this.includeLast=r),void 0!==i&&(this.includeFirst=i),void 0!==o&&(this.isocurveSegments=o)}},e.DerivativesDto=class{constructor(e,t,r,i){void 0!==e&&(this.surface=e),void 0!==t&&(this.u=t),void 0!==r&&(this.v=r),void 0!==i&&(this.numDerivatives=i)}},e.SurfaceLocationDto=class{constructor(e,t,r){void 0!==e&&(this.surface=e),void 0!==t&&(this.u=t),void 0!==r&&(this.v=r)}},e.CornersDto=class{constructor(e,t,r,i){void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.point3=r),void 0!==i&&(this.point4=i)}},e.SurfaceParamDto=class{constructor(e,t){void 0!==e&&(this.surface=e),void 0!==t&&(this.point=t)}},e.KnotsControlPointsWeightsDto=class{constructor(e,t,r,i,o,n){void 0!==e&&(this.degreeU=e),void 0!==t&&(this.degreeV=t),void 0!==r&&(this.knotsU=r),void 0!==i&&(this.knotsV=i),void 0!==o&&(this.points=o),void 0!==n&&(this.weights=n)}},e.LoftCurvesDto=class{constructor(e,t){void 0!==e&&(this.degreeV=e),void 0!==t&&(this.curves=t)}},e.DrawSurfaceDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==e&&(this.surface=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==n&&(this.surfaceMesh=n)}},e.DrawSurfacesDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==e&&(this.surfaces=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==n&&(this.surfacesMesh=n)}},e.DrawSurfacesColoursDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.updatable=!1,this.hidden=!1,void 0!==e&&(this.surfaces=e),void 0!==t&&(this.colours=t),void 0!==r&&(this.opacity=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==n&&(this.surfacesMesh=n)}},e.ConeAndCylinderParametersDto=class{constructor(e,t,r,i,o){this.axis=[0,1,0],this.xAxis=[1,0,0],this.base=[0,0,0],this.height=2,this.radius=1,void 0!==e&&(this.axis=e),void 0!==t&&(this.xAxis=t),void 0!==r&&(this.base=r),void 0!==i&&(this.height=i),void 0!==o&&(this.radius=o)}},e.ConeDto=class{constructor(e){void 0!==e&&(this.cone=e)}},e.CylinderDto=class{constructor(e){void 0!==e&&(this.cylinder=e)}},e.ExtrusionParametersDto=class{constructor(e,t){void 0!==e&&(this.profile=e),void 0!==t&&(this.direction=t)}},e.ExtrusionDto=class{constructor(e){void 0!==e&&(this.extrusion=e)}},e.SphericalParametersDto=class{constructor(e,t){void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t)}},e.SphereDto=class{constructor(e){void 0!==e&&(this.sphere=e)}},e.RevolutionParametersDto=class{constructor(e,t,r,i){void 0!==e&&(this.profile=e),void 0!==t&&(this.center=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.angle=i)}},e.RevolutionDto=class{constructor(e){void 0!==e&&(this.revolution=e)}},e.SweepParametersDto=class{constructor(e,t){void 0!==e&&(this.profile=e),void 0!==t&&(this.rail=t)}},e.SweepDto=class{constructor(e){void 0!==e&&(this.sweep=e)}},e.CurveCurveDto=class{constructor(e,t,r){void 0!==e&&(this.firstCurve=e),void 0!==t&&(this.secondCurve=t),void 0!==r&&(this.tolerance=r)}},e.CurveSurfaceDto=class{constructor(e,t,r){void 0!==e&&(this.curve=e),void 0!==t&&(this.surface=t),void 0!==r&&(this.tolerance=r)}},e.SurfaceSurfaceDto=class{constructor(e,t,r){void 0!==e&&(this.firstSurface=e),void 0!==t&&(this.secondSurface=t),void 0!==r&&(this.tolerance=r)}},e.CurveCurveIntersectionsDto=class{constructor(e){void 0!==e&&(this.intersections=e)}},e.CurveSurfaceIntersectionsDto=class{constructor(e){void 0!==e&&(this.intersections=e)}}}(xr||(xr={})),function(e){let t,r;e.PolylinePropertiesDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},function(e){e.edge="edge",e.round="round",e.chamfer="chamfer"}(t=e.solidCornerTypeEnum||(e.solidCornerTypeEnum={})),function(e){e.left="left",e.center="center",e.right="right"}(r=e.jscadTextAlignEnum||(e.jscadTextAlignEnum={})),e.MeshDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.MeshesDto=class{constructor(e){void 0!==e&&(this.meshes=e)}},e.DrawSolidMeshDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==e&&(this.mesh=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==n&&(this.jscadMesh=n)}},e.DrawSolidMeshesDto=class{constructor(e,t,r,i,o,n){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==e&&(this.meshes=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.updatable=i),void 0!==o&&(this.hidden=o),void 0!==n&&(this.jscadMesh=n)}},e.DrawPathDto=class{constructor(e,t,r,i,o,n){this.colour="#444444",this.opacity=1,this.width=10,this.updatable=!1,void 0!==e&&(this.path=e),void 0!==t&&(this.colour=t),void 0!==r&&(this.opacity=r),void 0!==i&&(this.width=i),void 0!==o&&(this.updatable=o),void 0!==n&&(this.pathMesh=n)}},e.TransformSolidsDto=class{constructor(e,t){void 0!==e&&(this.meshes=e),void 0!==t&&(this.transformation=t)}},e.TransformSolidDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.transformation=t)}},e.DownloadSolidDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.fileName=t)}},e.DownloadGeometryDto=class{constructor(e,t,r){this.fileName="jscad-geometry",void 0!==e&&(this.geometry=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.options=r)}},e.DownloadSolidsDto=class{constructor(e,t){void 0!==e&&(this.meshes=e),void 0!==t&&(this.fileName=t)}},e.ColorizeDto=class{constructor(e,t){this.color="#0000ff",void 0!==e&&(this.geometry=e),void 0!==t&&(this.color=t)}},e.BooleanObjectsDto=class{constructor(e){void 0!==e&&(this.meshes=e)}},e.BooleanTwoObjectsDto=class{constructor(e,t){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.BooleanObjectsFromDto=class{constructor(e,t){void 0!==e&&(this.from=e),void 0!==t&&(this.meshes=t)}},e.ExpansionDto=class{constructor(e,r,i,o){this.delta=.1,this.corners=t.edge,this.segments=24,void 0!==e&&(this.geometry=e),void 0!==r&&(this.delta=r),void 0!==i&&(this.corners=i),void 0!==o&&(this.segments=o)}},e.OffsetDto=class{constructor(e,r,i,o){this.delta=.1,this.corners=t.edge,this.segments=24,void 0!==e&&(this.geometry=e),void 0!==r&&(this.delta=r),void 0!==i&&(this.corners=i),void 0!==o&&(this.segments=o)}},e.ExtrudeLinearDto=class{constructor(e,t,r,i){this.height=1,this.twistAngle=90,this.twistSteps=15,void 0!==e&&(this.geometry=e),void 0!==t&&(this.height=t),void 0!==r&&(this.twistAngle=r),void 0!==i&&(this.twistSteps=i)}},e.HullDto=class{constructor(e){void 0!==e&&(this.meshes=e)}},e.ExtrudeRectangularDto=class{constructor(e,t,r){this.height=1,this.size=1,void 0!==e&&(this.geometry=e),void 0!==t&&(this.height=t),void 0!==r&&(this.size=r)}},e.ExtrudeRectangularPointsDto=class{constructor(e,t,r){this.height=1,this.size=1,void 0!==e&&(this.points=e),void 0!==t&&(this.height=t),void 0!==r&&(this.size=r)}},e.ExtrudeRotateDto=class{constructor(e,t,r,i){this.angle=90,this.startAngle=0,this.segments=24,void 0!==e&&(this.polygon=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.startAngle=r),void 0!==i&&(this.segments=i)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.CurveDto=class{constructor(e){void 0!==e&&(this.curve=e)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PathDto=class{constructor(e){void 0!==e&&(this.path=e)}},e.PathFromPointsDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.PathsFromPointsDto=class{constructor(e){void 0!==e&&(this.pointsLists=e)}},e.PathFromPolylineDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.polyline=e),void 0!==t&&(this.closed=t)}},e.PathAppendCurveDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.path=t)}},e.PathAppendPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.path=t)}},e.PathAppendPolylineDto=class{constructor(e,t){void 0!==e&&(this.polyline=e),void 0!==t&&(this.path=t)}},e.PathAppendArcDto=class{constructor(e,t,r,i,o,n,s,a){this.endPoint=[1,1],this.xAxisRotation=90,this.clockwise=!0,this.large=!1,this.segments=24,this.radiusX=1,this.radiusY=1,void 0!==e&&(this.path=e),void 0!==t&&(this.endPoint=t),void 0!==r&&(this.xAxisRotation=r),void 0!==i&&(this.clockwise=i),void 0!==o&&(this.large=o),void 0!==n&&(this.segments=n),void 0!==s&&(this.radiusX=s),void 0!==a&&(this.radiusY=a)}},e.CircleDto=class{constructor(e,t,r){this.center=[0,0],this.radius=1,this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.EllipseDto=class{constructor(e,t,r){this.center=[0,0],this.radius=[1,2],this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.SquareDto=class{constructor(e,t){this.center=[0,0],this.size=1,void 0!==e&&(this.center=e),void 0!==t&&(this.size=t)}},e.RectangleDto=class{constructor(e,t,r){this.center=[0,0],this.width=1,this.length=1,void 0!==e&&(this.center=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r)}},e.RoundedRectangleDto=class{constructor(e,t,r,i,o){this.center=[0,0],this.roundRadius=.2,this.segments=24,this.width=1,this.length=1,void 0!==e&&(this.center=e),void 0!==t&&(this.roundRadius=t),void 0!==r&&(this.segments=r),void 0!==i&&(this.width=i),void 0!==o&&(this.length=o)}},e.StarDto=class{constructor(e,t,r,i,o,n){this.center=[0,0],this.vertices=10,this.density=1,this.outerRadius=2,this.innerRadius=1,this.startAngle=0,void 0!==e&&(this.center=e),void 0!==t&&(this.vertices=t),void 0!==r&&(this.density=r),void 0!==i&&(this.outerRadius=i),void 0!==o&&(this.innerRadius=o),void 0!==n&&(this.startAngle=n)}},e.CubeDto=class{constructor(e,t){this.center=[0,0,0],this.size=1,void 0!==e&&(this.center=e),void 0!==t&&(this.size=t)}},e.CubeCentersDto=class{constructor(e,t){this.size=1,void 0!==e&&(this.centers=e),void 0!==t&&(this.size=t)}},e.CuboidDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.width=1,this.length=1,this.height=1,void 0!==e&&(this.center=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.height=i)}},e.CuboidCentersDto=class{constructor(e,t,r,i){this.width=1,this.length=1,this.height=1,void 0!==e&&(this.centers=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.height=i)}},e.RoundedCuboidDto=class{constructor(e,t,r,i,o,n){this.center=[0,0,0],this.roundRadius=1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.roundRadius=t),void 0!==r&&(this.width=r),void 0!==i&&(this.length=i),void 0!==o&&(this.height=o),void 0!==n&&(this.segments=n)}},e.RoundedCuboidCentersDto=class{constructor(e,t,r,i,o,n){this.roundRadius=.1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.roundRadius=t),void 0!==r&&(this.width=r),void 0!==i&&(this.length=i),void 0!==o&&(this.height=o),void 0!==n&&(this.segments=n)}},e.CylidnerEllipticDto=class{constructor(e,t,r,i,o){this.center=[0,0,0],this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.height=t),void 0!==r&&(this.startRadius=r),void 0!==i&&(this.endRadius=i),void 0!==o&&(this.segments=o)}},e.CylidnerCentersEllipticDto=class{constructor(e,t,r,i,o){this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.height=t),void 0!==r&&(this.startRadius=r),void 0!==i&&(this.endRadius=i),void 0!==o&&(this.segments=o)}},e.CylidnerDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.height=1,this.radius=1,this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.height=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.segments=i)}},e.RoundedCylidnerDto=class{constructor(e,t,r,i,o){this.center=[0,0,0],this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.roundRadius=t),void 0!==r&&(this.height=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.segments=o)}},e.EllipsoidDto=class{constructor(e,t,r){this.center=[0,0,0],this.radius=[1,2,3],this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.EllipsoidCentersDto=class{constructor(e,t,r){this.radius=[1,2,3],this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.GeodesicSphereDto=class{constructor(e,t,r){this.center=[0,0,0],this.radius=1,this.frequency=12,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.frequency=r)}},e.GeodesicSphereCentersDto=class{constructor(e,t,r){this.radius=1,this.frequency=12,void 0!==e&&(this.centers=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.frequency=r)}},e.CylidnerCentersDto=class{constructor(e,t,r,i){this.height=1,this.radius=1,this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.height=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.segments=i)}},e.RoundedCylidnerCentersDto=class{constructor(e,t,r,i,o){this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.roundRadius=t),void 0!==r&&(this.height=r),void 0!==i&&(this.radius=i),void 0!==o&&(this.segments=o)}},e.SphereDto=class{constructor(e,t,r){this.center=[0,0,0],this.radius=1,this.segments=24,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.SphereCentersDto=class{constructor(e,t,r){this.radius=1,this.segments=24,void 0!==e&&(this.centers=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.segments=r)}},e.TorusDto=class{constructor(e,t,r,i,o,n,s,a){this.center=[0,0,0],this.innerRadius=1,this.outerRadius=2,this.innerSegments=24,this.outerSegments=24,this.innerRotation=0,this.outerRotation=360,this.startAngle=0,void 0!==e&&(this.center=e),void 0!==t&&(this.innerRadius=t),void 0!==r&&(this.outerRadius=r),void 0!==i&&(this.innerSegments=i),void 0!==o&&(this.outerSegments=o),void 0!==n&&(this.innerRotation=n),void 0!==s&&(this.outerRotation=s),void 0!==a&&(this.startAngle=a)}},e.TextDto=class{constructor(e,t,i,o,n,s,a,c,h){this.text="Hello World",this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==e&&(this.text=e),void 0!==t&&(this.segments=t),void 0!==i&&(this.xOffset=i),void 0!==o&&(this.yOffset=o),void 0!==n&&(this.height=n),void 0!==s&&(this.lineSpacing=s),void 0!==a&&(this.letterSpacing=a),void 0!==c&&(this.align=c),void 0!==h&&(this.extrudeOffset=h)}},e.CylinderTextDto=class{constructor(e,t,i,o,n,s,a,c,h,l,u){this.text="Hello World",this.extrusionHeight=.5,this.extrusionSize=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==e&&(this.text=e),void 0!==t&&(this.extrusionHeight=t),void 0!==i&&(this.extrusionSize=i),void 0!==o&&(this.segments=o),void 0!==n&&(this.xOffset=n),void 0!==s&&(this.yOffset=s),void 0!==a&&(this.height=a),void 0!==c&&(this.lineSpacing=c),void 0!==h&&(this.letterSpacing=h),void 0!==l&&(this.align=l),void 0!==u&&(this.extrudeOffset=u)}},e.SphereTextDto=class{constructor(e,t,i,o,n,s,a,c,h,l){this.text="Hello World",this.radius=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=r.center,this.extrudeOffset=0,void 0!==e&&(this.text=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.segments=i),void 0!==o&&(this.xOffset=o),void 0!==n&&(this.yOffset=n),void 0!==s&&(this.height=s),void 0!==a&&(this.lineSpacing=a),void 0!==c&&(this.letterSpacing=c),void 0!==h&&(this.align=h),void 0!==l&&(this.extrudeOffset=l)}},e.FromPolygonPoints=class{constructor(e){void 0!==e&&(this.polygonPoints=e)}}}(wr||(wr={})),function(e){let t,r;!function(e){e.evenOdd="EvenOdd",e.nonZero="NonZero",e.positive="Positive",e.negative="Negative"}(t=e.fillRuleEnum||(e.fillRuleEnum={})),function(e){e.square="Square",e.round="Round",e.miter="Miter"}(r=e.manifoldJoinTypeEnum||(e.manifoldJoinTypeEnum={})),e.DecomposedManifoldMeshDto=class{},e.DrawManifoldOrCrossSectionDto=class{constructor(e,t,r,i,o,n,s,a){this.faceOpacity=1,this.faceColour="#ff0000",this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,void 0!==e&&(this.manifoldOrCrossSection=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.faceMaterial=r),void 0!==i&&(this.faceColour=i),void 0!==o&&(this.crossSectionColour=o),void 0!==n&&(this.crossSectionWidth=n),void 0!==s&&(this.crossSectionOpacity=s),void 0!==a&&(this.computeNormals=a)}},e.DrawManifoldsOrCrossSectionsDto=class{constructor(e,t,r,i,o,n,s,a){this.faceColour="#ff0000",this.faceOpacity=1,this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,void 0!==e&&(this.manifoldsOrCrossSections=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.faceMaterial=r),void 0!==i&&(this.faceColour=i),void 0!==o&&(this.crossSectionColour=o),void 0!==n&&(this.crossSectionWidth=n),void 0!==s&&(this.crossSectionOpacity=s),void 0!==a&&(this.computeNormals=a)}},e.CreateFromMeshDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.FromPolygonPointsDto=class{constructor(e){void 0!==e&&(this.polygonPoints=e)}},e.CubeDto=class{constructor(e,t){this.center=!0,this.size=1,void 0!==e&&(this.center=e),void 0!==t&&(this.size=t)}},e.CreateContourSectionDto=class{constructor(e,r){this.fillRule=t.evenOdd,void 0!==e&&(this.polygons=e),void 0!==r&&(this.fillRule=r)}},e.SquareDto=class{constructor(e,t){this.center=!1,this.size=1,void 0!==e&&(this.center=e),void 0!==t&&(this.size=t)}},e.SphereDto=class{constructor(e,t){this.radius=1,void 0!==e&&(this.radius=e),void 0!==t&&(this.circularSegments=t)}},e.CylinderDto=class{constructor(e,t,r,i,o){this.height=1,this.radiusLow=1,this.radiusHigh=1,this.circularSegments=32,this.center=!0,void 0!==e&&(this.height=e),void 0!==t&&(this.radiusLow=t),void 0!==r&&(this.radiusHigh=r),void 0!==i&&(this.circularSegments=i),void 0!==o&&(this.center=o)}},e.CircleDto=class{constructor(e,t){this.radius=1,this.circularSegments=32,void 0!==e&&(this.radius=e),void 0!==t&&(this.circularSegments=t)}},e.RectangleDto=class{constructor(e,t,r){this.length=1,this.height=1,this.center=!1,void 0!==e&&(this.length=e),void 0!==t&&(this.height=t),void 0!==r&&(this.center=r)}},e.ManifoldDto=class{constructor(e){void 0!==e&&(this.manifold=e)}},e.CalculateNormalsDto=class{constructor(e,t,r){this.normalIdx=0,this.minSharpAngle=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.normalIdx=t),void 0!==r&&(this.minSharpAngle=r)}},e.CalculateCurvatureDto=class{constructor(e){void 0!==e&&(this.manifold=e)}},e.CountDto=class{constructor(e){void 0!==e&&(this.count=e)}},e.ManifoldsMinGapDto=class{constructor(e,t,r){this.searchLength=100,void 0!==e&&(this.manifold1=e),void 0!==t&&(this.manifold2=t),void 0!==r&&(this.searchLength=r)}},e.ManifoldRefineToleranceDto=class{constructor(e,t){this.tolerance=1e-6,void 0!==e&&(this.manifold=e),void 0!==t&&(this.tolerance=t)}},e.ManifoldRefineLengthDto=class{constructor(e,t){this.length=.1,void 0!==e&&(this.manifold=e),void 0!==t&&(this.length=t)}},e.ManifoldRefineDto=class{constructor(e,t){this.number=1,void 0!==e&&(this.manifold=e),void 0!==t&&(this.number=t)}},e.ManifoldSmoothByNormalsDto=class{constructor(e,t){this.normalIdx=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.normalIdx=t)}},e.ManifoldSmoothOutDto=class{constructor(e,t,r){this.minSharpAngle=60,this.minSmoothness=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.minSharpAngle=t),void 0!==r&&(this.minSmoothness=r)}},e.HullPointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.SliceDto=class{constructor(e){this.height=.5,void 0!==e&&(this.manifold=e)}},e.MeshDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.MeshVertexIndexDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.vertexIndex=t)}},e.MeshTriangleRunIndexDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.triangleRunIndex=t)}},e.MeshHalfEdgeIndexDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.halfEdgeIndex=t)}},e.MeshTriangleIndexDto=class{constructor(e,t){void 0!==e&&(this.mesh=e),void 0!==t&&(this.triangleIndex=t)}},e.CrossSectionDto=class{constructor(e){void 0!==e&&(this.crossSection=e)}},e.CrossSectionsDto=class{constructor(e){void 0!==e&&(this.crossSections=e)}},e.ExtrudeDto=class{constructor(e){this.height=1,this.nDivisions=1,this.twistDegrees=0,this.scaleTopX=1,this.scaleTopY=1,this.center=!0,void 0!==e&&(this.crossSection=e)}},e.RevolveDto=class{constructor(e,t,r,i){this.matchProfile=!0,this.circularSegments=32,void 0!==e&&(this.crossSection=e),void 0!==t&&(this.revolveDegrees=t),void 0!==r&&(this.matchProfile=r),void 0!==i&&(this.circularSegments=i)}},e.OffsetDto=class{constructor(e,t,i,o,n){this.joinType=r.round,this.miterLimit=2,this.circularSegments=32,void 0!==e&&(this.crossSection=e),void 0!==t&&(this.delta=t),void 0!==i&&(this.joinType=i),void 0!==o&&(this.miterLimit=o),void 0!==n&&(this.circularSegments=n)}},e.SimplifyDto=class{constructor(e,t){this.epsilon=1e-6,void 0!==e&&(this.crossSection=e),void 0!==t&&(this.epsilon=t)}},e.ComposeDto=class{constructor(e){void 0!==e&&(this.polygons=e)}},e.MirrorCrossSectionDto=class{constructor(e,t){this.normal=[1,0],void 0!==e&&(this.crossSection=e),void 0!==t&&(this.normal=t)}},e.Scale2DCrossSectionDto=class{constructor(e,t){this.vector=[2,2],void 0!==e&&(this.crossSection=e),void 0!==t&&(this.vector=t)}},e.TranslateCrossSectionDto=class{constructor(e,t){void 0!==e&&(this.crossSection=e),void 0!==t&&(this.vector=t)}},e.RotateCrossSectionDto=class{constructor(e,t){void 0!==e&&(this.crossSection=e),void 0!==t&&(this.degrees=t)}},e.ScaleCrossSectionDto=class{constructor(e,t){this.factor=2,void 0!==e&&(this.crossSection=e),void 0!==t&&(this.factor=t)}},e.TranslateXYCrossSectionDto=class{constructor(e,t,r){this.x=0,this.y=0,void 0!==e&&(this.crossSection=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r)}},e.TransformCrossSectionDto=class{constructor(e,t){void 0!==e&&(this.crossSection=e),void 0!==t&&(this.transform=t)}},e.MirrorDto=class{constructor(e,t){this.normal=[1,0,0],void 0!==e&&(this.manifold=e),void 0!==t&&(this.normal=t)}},e.Scale3DDto=class{constructor(e,t){this.vector=[2,2,2],void 0!==e&&(this.manifold=e),void 0!==t&&(this.vector=t)}},e.TranslateDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.vector=t)}},e.TranslateByVectorsDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.vectors=t)}},e.RotateDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.vector=t)}},e.RotateXYZDto=class{constructor(e,t,r,i){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},e.ScaleDto=class{constructor(e,t){this.factor=2,void 0!==e&&(this.manifold=e),void 0!==t&&(this.factor=t)}},e.TranslateXYZDto=class{constructor(e,t,r,i){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},e.TransformDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.transform=t)}},e.TransformsDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.transforms=t)}},e.TwoCrossSectionsDto=class{constructor(e,t){void 0!==e&&(this.crossSection1=e),void 0!==t&&(this.crossSection2=t)}},e.TwoManifoldsDto=class{constructor(e,t){void 0!==e&&(this.manifold1=e),void 0!==t&&(this.manifold2=t)}},e.SplitManifoldsDto=class{constructor(e,t){void 0!==e&&(this.manifoldToSplit=e),void 0!==t&&(this.manifoldCutter=t)}},e.TrimByPlaneDto=class{constructor(e,t,r){this.normal=[1,0,0],this.originOffset=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.normal=t),void 0!==r&&(this.originOffset=r)}},e.SplitByPlaneDto=class{constructor(e,t,r){this.normal=[1,0,0],this.originOffset=0,void 0!==e&&(this.manifold=e),void 0!==t&&(this.normal=t),void 0!==r&&(this.originOffset=r)}},e.SplitByPlaneOnOffsetsDto=class{constructor(e,t,r){this.normal=[1,0,0],this.originOffsets=[0],void 0!==e&&(this.manifold=e),void 0!==t&&(this.normal=t),void 0!==r&&(this.originOffsets=r)}},e.ManifoldsDto=class{constructor(e){void 0!==e&&(this.manifolds=e)}},e.ManifoldToMeshDto=class{constructor(e,t){void 0!==e&&(this.manifold=e),void 0!==t&&(this.normalIdx=t)}},e.ManifoldsToMeshesDto=class{constructor(e,t){void 0!==e&&(this.manifolds=e),void 0!==t&&(this.normalIdx=t)}},e.DecomposeManifoldOrCrossSectionDto=class{constructor(e,t){void 0!==e&&(this.manifoldOrCrossSection=e),void 0!==t&&(this.normalIdx=t)}},e.ManifoldOrCrossSectionDto=class{constructor(e){void 0!==e&&(this.manifoldOrCrossSection=e)}},e.ManifoldsOrCrossSectionsDto=class{constructor(e){void 0!==e&&(this.manifoldsOrCrossSections=e)}},e.DecomposeManifoldsOrCrossSectionsDto=class{constructor(e,t){void 0!==e&&(this.manifoldsOrCrossSections=e),void 0!==t&&(this.normalIdx=t)}}}(Sr||(Sr={}));class Ir{constructor(e){this.context=e}createTextBlock(e){const t=new Z.TextBlock(e.name,e.text);return e.height?t.height=e.height:t.height=1,e.width?t.width=e.width:t.width="42px",e.width?t.width=e.width:t.width=1,e.height?t.height=e.height:t.height="42px",t.fontSize=e.fontSize,t.color=e.color,t}alignText(e){switch(e.horizontalAlignment){case rr.horizontalAlignmentEnum.left:e.control.textHorizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_LEFT;break;case rr.horizontalAlignmentEnum.right:e.control.textHorizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_RIGHT;break;case rr.horizontalAlignmentEnum.center:e.control.textHorizontalAlignment=Z.Control.HORIZONTAL_ALIGNMENT_CENTER}switch(e.verticalAlignment){case rr.verticalAlignmentEnum.top:e.control.textVerticalAlignment=Z.Control.VERTICAL_ALIGNMENT_TOP;break;case rr.verticalAlignmentEnum.bottom:e.control.textVerticalAlignment=Z.Control.VERTICAL_ALIGNMENT_BOTTOM;break;case rr.verticalAlignmentEnum.center:e.control.textVerticalAlignment=Z.Control.VERTICAL_ALIGNMENT_CENTER}return e.control}setTextOutline(e){return e.textBlock.outlineWidth=e.outlineWidth,e.textBlock.outlineColor=e.outlineColor,e.textBlock}setText(e){return e.textBlock.text=e.text,e.textBlock}setRsizeToFit(e){return e.textBlock.resizeToFit=e.resizeToFit,e.textBlock}setTextWrapping(e){return e.textBlock.textWrapping=e.textWrapping,e.textBlock}setLineSpacing(e){return e.textBlock.lineSpacing=e.lineSpacing,e.textBlock}getText(e){return e.textBlock.text}getTextWrapping(e){return e.textBlock.textWrapping}getLineSpacing(e){return e.textBlock.lineSpacing}getOutlineWidth(e){return e.textBlock.outlineWidth}getResizeToFit(e){return e.textBlock.resizeToFit}getTextHorizontalAlignment(e){return e.textBlock.textHorizontalAlignment}getTextVerticalAlignment(e){return e.textBlock.textVerticalAlignment}createTextBlockObservableSelector(e){return e.selector}}class Br{constructor(e){this.context=e}createRadioButton(e){const t=new Z.RadioButton(e.name);return e.height?t.height=e.height:t.height="32px",e.width?t.width=e.width:t.width="32px",t.checkSizeRatio=e.checkSizeRatio,t.group=e.group,t.color=e.color,t.isChecked=e.isChecked,t.background=e.background,t}setCheckSizeRatio(e){return e.radioButton.checkSizeRatio=e.checkSizeRatio,e.radioButton}setGroup(e){return e.radioButton.group=e.group,e.radioButton}setBackground(e){return e.radioButton.background=e.background,e.radioButton}getCheckSizeRatio(e){return e.radioButton.checkSizeRatio}getGroup(e){return e.radioButton.group}getBackground(e){return e.radioButton.background}createRadioButtonObservableSelector(e){return e.selector}}class Rr{constructor(e){this.context=e}createCheckbox(e){const t=new Z.Checkbox(e.name);return e.height?t.height=e.height:t.height="32px",e.width?t.width=e.width:t.width="32px",t.checkSizeRatio=e.checkSizeRatio,t.color=e.color,t.isChecked=e.isChecked,t.background=e.background,t}setBackground(e){return e.checkbox.background=e.background,e.checkbox}setCheckSizeRatio(e){return e.checkbox.checkSizeRatio=e.checkSizeRatio,e.checkbox}setIsChecked(e){return e.checkbox.isChecked=e.isChecked,e.checkbox}getCheckSizeRatio(e){return e.checkbox.checkSizeRatio}getIsChecked(e){return e.checkbox.isChecked}getBackground(e){return e.checkbox.background}createCheckboxObservableSelector(e){return e.selector}}class Lr{constructor(e){this.context=e}createInputText(e){const t=new Z.InputText(e.name);return e.height?t.height=e.height:t.height="56px",e.width?t.width=e.width:t.width=1,t.text=e.text,t.placeholderText=e.placeholder,t.color=e.color,t.background=e.background,t}setBackground(e){return e.inputText.background=e.background,e.inputText}setText(e){return e.inputText.text=e.text,e.inputText}setPlaceholder(e){return e.inputText.placeholderText=e.placeholder,e.inputText}getBackground(e){return e.inputText.background}getText(e){return e.inputText.text}getPlaceholder(e){return e.inputText.placeholderText}createInputTextObservableSelector(e){return e.selector}}class Fr{constructor(e){this.context=e}createColorPicker(e){const t=new Z.ColorPicker(e.name);return e.height?t.height=e.height:t.height="300px",e.width?t.width=e.width:t.width="300px",e.size&&(t.size=e.size),e.defaultColor&&(t.value=q.Color3.FromHexString(e.defaultColor)),t.color=e.color,t}setColorPickerValue(e){return e.colorPicker.value=q.Color3.FromHexString(e.color),e.colorPicker}setColorPickerSize(e){return e.colorPicker.size=e.size,e.colorPicker}getColorPickerValue(e){return e.colorPicker.value.toHexString()}getColorPickerSize(e){return e.colorPicker.size}createColorPickerObservableSelector(e){return e.selector}}class Ur{constructor(e){this.context=e}createImage(e){const t=new Z.Image(e.name,e.url);return e.width?t.width=e.width:t.width="200px",e.height?t.height=e.height:t.height="200px",t.color=e.color,t}setSourceUrl(e){return e.image.source=e.url,e.image}getSourceUrl(e){return e.image.source}}class zr{constructor(e){this.context=e,this.advancedDynamicTexture=new Dr(e),this.control=new Wr(e),this.container=new Or(e),this.stackPanel=new _r(e),this.button=new Er(e),this.slider=new Ar(e),this.textBlock=new Ir(e),this.radioButton=new Br(e),this.checkbox=new Rr(e),this.inputText=new Lr(e),this.colorPicker=new Fr(e),this.image=new Ur(e)}}class Nr{constructor(e){this.context=e}dispose(e){e.babylonMesh&&(e.babylonMesh.getScene().removeMesh(e.babylonMesh,!0),e.babylonMesh.dispose())}updateDrawn(e){const t=e.babylonMesh.metadata.type;e.babylonMesh.position=new q.Vector3(e.position[0],e.position[1],e.position[2]),e.babylonMesh.rotation=new q.Vector3(e.rotation[0],e.rotation[1],e.rotation[2]),e.babylonMesh.scaling=new q.Vector3(e.scaling[0],e.scaling[1],e.scaling[2]);const r=Array.isArray(e.colours);let i;if(e.babylonMesh.getChildMeshes&&(i=e.babylonMesh.getChildMeshes()),i&&i.length>0)r&&e.colours.length===i.length?i.forEach(((t,r)=>{const i=q.Color3.FromHexString(e.colours[r]);this.assignColorToMesh(t,i)})):r?i.forEach((t=>{const r=q.Color3.FromHexString(e.colours[0]);this.assignColorToMesh(t,r)})):i.forEach((t=>{const r=q.Color3.FromHexString(e.colours);this.assignColorToMesh(t,r)}));else{const t=r?q.Color3.FromHexString(e.colours[0]):q.Color3.FromHexString(e.colours);this.assignColorToMesh(e.babylonMesh,t)}if(null!==e.babylonMesh.edgesRenderer){const t=r?q.Color3.FromHexString(e.colours[0]):q.Color3.FromHexString(e.colours);e.babylonMesh.edgesColor=q.Color4.FromColor3(t)}if([vr.drawingTypes.point,vr.drawingTypes.points,vr.drawingTypes.line,vr.drawingTypes.lines,vr.drawingTypes.polyline,vr.drawingTypes.polylines].includes(t)){const t=e.babylonMesh.getVerticesData(q.VertexBuffer.ColorKind).length/4,i=[];if(r&&t===e.colours.length)for(let r=0;r<t;r++){const t=q.Color4.FromColor3(q.Color3.FromHexString(e.colours[r]));i.push(t.r,t.g,t.b,t.a)}else if(r){const r=q.Color4.FromColor3(q.Color3.FromHexString(e.colours[0]));for(let e=0;e<t;e++)i.push(r.r,r.g,r.b,r.a)}else{const r=q.Color4.FromColor3(q.Color3.FromHexString(e.colours));for(let e=0;e<t;e++)i.push(r.r,r.g,r.b,r.a)}e.babylonMesh.setVerticesData(q.VertexBuffer.ColorKind,i)}}setVisibility(e){e.babylonMesh.visibility=e.visibility,e.includeChildren&&e.babylonMesh.getChildMeshes&&e.babylonMesh.getChildMeshes().forEach((t=>{t.visibility=e.visibility}))}hide(e){e.babylonMesh.isVisible=!1,e.includeChildren&&e.babylonMesh.getChildMeshes&&e.babylonMesh.getChildMeshes().forEach((e=>{e.isVisible=!1}))}show(e){e.babylonMesh.isVisible=!0,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((e=>{e.isVisible=!0}))}setParent(e){e.babylonMesh.parent=e.parentMesh}getParent(e){return e.babylonMesh.parent}setCheckCollisions(e){e.babylonMesh.checkCollisions=e.checkCollisions,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((t=>{t.checkCollisions=e.checkCollisions}))}getCheckCollisions(e){return e.babylonMesh.checkCollisions}setPickable(e){e.babylonMesh.isPickable=e.pickable,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((t=>{t.isPickable=e.pickable}))}enablePointerMoveEvents(e){e.babylonMesh.enablePointerMoveEvents=!0,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((e=>{e.enablePointerMoveEvents=!1}))}disablePointerMoveEvents(e){e.babylonMesh.enablePointerMoveEvents=!1,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((e=>{e.enablePointerMoveEvents=!1}))}getPickable(e){return e.babylonMesh.isPickable}getMeshesWhereNameContains(e){return this.context.scene.meshes.filter((t=>t.name.includes(e.name)))}getChildMeshes(e){return e.babylonMesh.getChildMeshes(e.directDescendantsOnly)}getMeshesOfId(e){return this.context.scene.getMeshesById(e.id)}getMeshOfId(e){return this.context.scene.getMeshById(e.id)}getMeshOfUniqueId(e){return this.context.scene.getMeshByUniqueId(e.uniqueId)}mergeMeshes(e){return q.Mesh.MergeMeshes(e.arrayOfMeshes,e.disposeSource,e.allow32BitsIndices,e.meshSubclass,e.subdivideWithSubMeshes,e.multiMultiMaterials)}convertToFlatShadedMesh(e){return e.babylonMesh.convertToFlatShadedMesh()}clone(e){var t,r;const i=e.babylonMesh.clone();if(!e.babylonMesh.metadata||e.babylonMesh.metadata&&!1!==e.babylonMesh.metadata.shadows){const e=null===(r=null===(t=this.context.scene)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.shadowGenerators;e.length>0&&(i.getChildMeshes().forEach((t=>{t.receiveShadows=!0,e.forEach((e=>e.addShadowCaster(t)))})),i.receiveShadows=!0,e.forEach((e=>e.addShadowCaster(i))))}return i.metadata=Object.assign({},e.babylonMesh.metadata),i}cloneToPositions(e){const t=[];return e.positions.forEach((r=>{const i=e.babylonMesh.clone();i.position=new q.Vector3(r[0],r[1],r[2]),t.push(i)})),t}setId(e){e.babylonMesh.id=e.id}getId(e){return e.babylonMesh.id}getUniqueId(e){return e.babylonMesh.uniqueId}setName(e){e.babylonMesh.name=e.name,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((t=>{t.name=e.name}))}getVerticesAsPolygonPoints(e){const t=e.babylonMesh.getVerticesData(q.VertexBuffer.PositionKind),r=e.babylonMesh.getIndices(),i=[];for(let e=0;e<r.length;e+=3){const o=r[e],n=r[e+1],s=r[e+2];i.push([[t[3*o],t[3*o+1],t[3*o+2]],[t[3*n],t[3*n+1],t[3*n+2]],[t[3*s],t[3*s+1],t[3*s+2]]])}return i}getName(e){return e.babylonMesh.name}setMaterial(e){e.babylonMesh.material=e.material,e.includeChildren&&e.babylonMesh.getChildMeshes().forEach((t=>{t.material=e.material}))}getMaterial(e){return e.babylonMesh.material}getPosition(e){const t=e.babylonMesh;return[t.position.x,t.position.y,t.position.z]}getAbsolutePosition(e){const t=e.babylonMesh;return[t.absolutePosition.x,t.absolutePosition.y,t.absolutePosition.z]}getRotation(e){const t=e.babylonMesh;return[t.rotation.x,t.rotation.y,t.rotation.z]}getScale(e){const t=e.babylonMesh;return[t.scaling.x,t.scaling.y,t.scaling.z]}moveForward(e){const t=e.babylonMesh;t.translate(t.forward,e.distance,q.Space.WORLD)}moveBackward(e){const t=e.babylonMesh;t.translate(t.forward.negate(),e.distance,q.Space.WORLD)}moveUp(e){const t=e.babylonMesh;t.translate(t.up,e.distance,q.Space.WORLD)}moveDown(e){const t=e.babylonMesh;t.translate(t.up.negate(),e.distance,q.Space.WORLD)}moveRight(e){const t=e.babylonMesh;t.translate(t.right,e.distance,q.Space.WORLD)}moveLeft(e){const t=e.babylonMesh;t.translate(t.right.negate(),e.distance,q.Space.WORLD)}yaw(e){const t=e.babylonMesh,r=q.Angle.FromDegrees(e.rotate).radians();t.rotate(q.Axis.Y,r,q.Space.LOCAL)}pitch(e){const t=e.babylonMesh,r=q.Angle.FromDegrees(e.rotate).radians();t.rotate(q.Axis.X,r,q.Space.LOCAL)}roll(e){const t=e.babylonMesh,r=q.Angle.FromDegrees(e.rotate).radians();t.rotate(q.Axis.Z,r,q.Space.LOCAL)}rotateAroundAxisWithPosition(e){e.mesh.rotateAround(new q.Vector3(e.position[0],e.position[1],e.position[2]),new q.Vector3(e.axis[0],e.axis[1],e.axis[2]),q.Angle.FromDegrees(e.angle).radians())}setPosition(e){e.babylonMesh.position=new q.Vector3(e.position[0],e.position[1],e.position[2])}setRotation(e){const t=q.Angle.FromDegrees(e.rotation[0]).radians(),r=q.Angle.FromDegrees(e.rotation[1]).radians(),i=q.Angle.FromDegrees(e.rotation[2]).radians();e.babylonMesh.rotation=new q.Vector3(t,r,i)}setScale(e){e.babylonMesh.scaling=new q.Vector3(e.scale[0],e.scale[1],e.scale[2])}intersectsMesh(e){return e.babylonMesh.intersectsMesh(e.babylonMesh2,e.precise,e.includeDescendants)}intersectsPoint(e){const t=new q.Vector3(e.point[0],e.point[1],e.point[2]);return e.babylonMesh.intersectsPoint(t)}createMeshInstanceAndTransformNoReturn(e){this.createMeshInstanceAndTransform(e)}createMeshInstanceAndTransform(e){var t,r;const i=new q.Mesh("instanceContainer"+Math.random(),this.context.scene),o=null===(r=null===(t=this.context.scene)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.shadowGenerators;if(e.mesh&&e.mesh.getChildMeshes&&e.mesh.getChildMeshes().length>0)e.mesh.getChildMeshes(!1).forEach((t=>{const r=t.getTotalVertices();if(t.createInstance&&r>0){t.disableEdgesRendering();const r=t.createInstance(`InstanceMesh${Math.random()}`);r.position=new q.Vector3(e.position[0],e.position[1],e.position[2]),r.rotation=new q.Vector3(e.rotation[0],e.rotation[1],e.rotation[2]),r.scaling=new q.Vector3(e.scaling[0],e.scaling[1],e.scaling[2]),(!e.mesh.metadata||e.mesh.metadata&&!1!==e.mesh.metadata.shadows)&&o.length>0&&(o.forEach((e=>{e.addShadowCaster(r)})),r.receiveShadows=!0),i.metadata=e.mesh.metadata,r.parent=i}})),e.mesh.isVisible=!1;else if(e.mesh){e.mesh.isVisible=!1;const t=e.mesh.createInstance(`InstanceMesh${Math.random()}`);t.position=new q.Vector3(e.position[0],e.position[1],e.position[2]),t.rotation=new q.Vector3(q.Angle.FromDegrees(e.rotation[0]).radians(),q.Angle.FromDegrees(e.rotation[1]).radians(),q.Angle.FromDegrees(e.rotation[2]).radians()),t.scaling=new q.Vector3(e.scaling[0],e.scaling[1],e.scaling[2]),t.parent=i,(!e.mesh.metadata||e.mesh.metadata&&!1!==e.mesh.metadata.shadows)&&(o.length>0&&o.forEach((e=>{e.addShadowCaster(t)})),t.receiveShadows=!0),t.metadata=e.mesh.metadata}return i}createMeshInstance(e){let t;if(e.mesh&&e.mesh.getChildMeshes&&e.mesh.getChildMeshes().length>0){e.mesh.setParent(null);const r=new q.Mesh("meshCloneContainer"+Math.random());e.mesh.getChildMeshes(!1).forEach((e=>{e.createInstance&&e.getTotalVertices()>0&&e.getTotalIndices()>0&&(e.createInstance(`InstanceMesh${Math.random()}`).parent=r)})),t=r;const i=this.context.scene.metadata.shadowGenerators;(!e.mesh.metadata||e.mesh.metadata&&!1!==e.mesh.metadata.shadows)&&i.length>0&&(t.getChildMeshes().forEach((e=>{i.forEach((t=>t.addShadowCaster(e))),e.receiveShadows=!0})),i.forEach((e=>e.addShadowCaster(t))),t.receiveShadows=!0)}else if(e.mesh&&(e.mesh.setParent(null),e.mesh.getTotalVertices()>0)){const r=new q.Mesh("meshCloneContainer"+Math.random());e.mesh.createInstance(`InstanceMesh${Math.random()}`).parent=r,t=r}return t}getSideOrientation(e){switch(e){case nr.sideOrientationEnum.frontside:return q.Mesh.FRONTSIDE;case nr.sideOrientationEnum.backside:return q.Mesh.BACKSIDE;case nr.sideOrientationEnum.doubleside:return q.Mesh.DOUBLESIDE;default:return q.Mesh.FRONTSIDE}}assignColorToMesh(e,t){const r=e.material;r instanceof q.PBRMetallicRoughnessMaterial?r.baseColor=t:r instanceof q.StandardMaterial&&(r.diffuseColor=t)}}var Gr=a(570);class Vr{constructor(e,t){this.context=e,this.mesh=t}createBox(e){const t=q.MeshBuilder.CreateBox("BabylonMesh"+Math.random(),{width:e.width,height:e.height,depth:e.depth,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createCube(e){const t=q.MeshBuilder.CreateBox("BabylonMesh"+Math.random(),{size:e.size,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createSquarePlane(e){const t=q.MeshBuilder.CreatePlane("BabylonMesh"+Math.random(),{size:e.size,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createSphere(e){const t=q.MeshBuilder.CreateSphere("BabylonMesh"+Math.random(),{diameter:e.diameter,segments:e.segments,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createIcoSphere(e){const t=q.MeshBuilder.CreateIcoSphere("BabylonMesh"+Math.random(),{radius:e.radius,radiusX:e.radiusX,radiusY:e.radiusY,radiusZ:e.radiusZ,flat:e.flat,subdivisions:e.subdivisions,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createDisc(e){const t=q.MeshBuilder.CreateDisc("BabylonMesh"+Math.random(),{radius:e.radius,tessellation:e.tessellation,arc:e.arc,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createTorus(e){const t=q.MeshBuilder.CreateTorus("BabylonMesh"+Math.random(),{diameter:e.diameter,thickness:e.thickness,tessellation:e.tessellation,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createTorusKnot(e){const t=q.MeshBuilder.CreateTorusKnot("BabylonMesh"+Math.random(),{radius:e.radius,tube:e.tube,radialSegments:e.radialSegments,tubularSegments:e.tubularSegments,p:e.p,q:e.q,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createPolygon(e){var t;const r=q.MeshBuilder.CreatePolygon("BabylonMesh"+Math.random(),{shape:e.shape.map((e=>new q.Vector3(e[0],e[1],e[2]))),holes:null===(t=e.holes)||void 0===t?void 0:t.map((e=>e.map((e=>new q.Vector3(e[0],e[1],e[2]))))),depth:e.depth,smoothingThreshold:e.smoothingThreshold,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation),wrap:e.wrap},this.context.scene,Gr);return e.enableShadows?this.enableShadows(r):r.metadata={shadows:!1},r}extrudePolygon(e){var t;console.log(Gr);const r=q.MeshBuilder.ExtrudePolygon("BabylonMesh"+Math.random(),{shape:e.shape.map((e=>new q.Vector3(e[0],e[1],e[2]))),holes:null===(t=e.holes)||void 0===t?void 0:t.map((e=>e.map((e=>new q.Vector3(e[0],e[1],e[2]))))),depth:e.depth,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation),wrap:e.wrap},this.context.scene,Gr);return e.enableShadows?this.enableShadows(r):r.metadata={shadows:!1},r}createTube(e){const t=e.path.map((e=>new q.Vector3(e[0],e[1],e[2]))),r=q.MeshBuilder.CreateTube("BabylonMesh"+Math.random(),{path:t,radius:e.radius,tessellation:e.tessellation,cap:e.cap,arc:e.arc,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(r):r.metadata={shadows:!1},r}createPolyhedron(e){const t=q.MeshBuilder.CreatePolyhedron("BabylonMesh"+Math.random(),{type:e.type,size:e.size,sizeX:e.sizeX,sizeY:e.sizeY,sizeZ:e.sizeZ,custom:e.custom,flat:e.flat,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createGeodesic(e){const t=q.MeshBuilder.CreateGeodesic("BabylonMesh"+Math.random(),{m:e.m,n:e.n,size:e.size,sizeX:e.sizeX,sizeY:e.sizeY,sizeZ:e.sizeZ,flat:e.flat,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createGoldberg(e){const t=q.MeshBuilder.CreateGoldberg("BabylonMesh"+Math.random(),{n:e.n,m:e.m,size:e.size,sizeX:e.sizeX,sizeY:e.sizeY,sizeZ:e.sizeZ,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createCapsule(e){const t=q.MeshBuilder.CreateCapsule("BabylonMesh"+Math.random(),{orientation:new q.Vector3(...e.orientation),subdivisions:e.subdivisions,tessellation:e.tessellation,height:e.height,radius:e.radius,capSubdivisions:e.capSubdivisions,radiusTop:e.radiusTop,radiusBottom:e.radiusBottom,topCapSubdivisions:e.topCapSubdivisions,bottomCapSubdivisions:e.bottomCapSubdivisions},this.context.scene);return t.sideOrientation=this.mesh.getSideOrientation(e.sideOrientation),e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createCylinder(e){const t=q.MeshBuilder.CreateCylinder("BabylonMesh"+Math.random(),{height:e.height,diameterTop:e.diameterTop,diameterBottom:e.diameterBottom,tessellation:e.tessellation,subdivisions:e.subdivisions,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createExtrudedSahpe(e){const t=e.shape.map((e=>new q.Vector3(e[0],e[1],e[2]))),r=e.path.map((e=>new q.Vector3(e[0],e[1],e[2]))),i=q.MeshBuilder.ExtrudeShape("BabylonMesh"+Math.random(),{shape:t,path:r,scale:e.scale,rotation:e.rotation,closeShape:e.closeShape,closePath:e.closePath,cap:e.cap,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(i):i.metadata={shadows:!1},i}createRibbon(e){const t=e.pathArray.map((e=>e.map((e=>new q.Vector3(e[0],e[1],e[2]))))),r=q.MeshBuilder.CreateRibbon("BabylonMesh"+Math.random(),{pathArray:t,closeArray:e.closeArray,closePath:e.closePath,offset:e.offset,updatable:e.updatable,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(r):r.metadata={shadows:!1},r}createLathe(e){const t=e.shape.map((e=>new q.Vector3(e[0],e[1],e[2]))),r=q.MeshBuilder.CreateLathe("BabylonMesh"+Math.random(),{shape:t,radius:e.radius,tessellation:e.tessellation,arc:e.arc,closed:e.closed,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(r):r.metadata={shadows:!1},r}createGround(e){const t=q.MeshBuilder.CreateGround("BabylonMesh"+Math.random(),{width:e.width,height:e.height,subdivisionsX:e.subdivisionsX,subdivisionsY:e.subdivisionsY},this.context.scene);return t.sideOrientation=this.mesh.getSideOrientation(e.sideOrientation),e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}createRectanglePlane(e){const t=q.MeshBuilder.CreatePlane("BabylonMesh"+Math.random(),{width:e.width,height:e.height,sideOrientation:this.mesh.getSideOrientation(e.sideOrientation)},this.context.scene);return e.enableShadows?this.enableShadows(t):t.metadata={shadows:!1},t}enableShadows(e){this.context.scene.metadata.shadowGenerators&&(e.receiveShadows=!0,this.context.scene.metadata.shadowGenerators.forEach((t=>{t.addShadowCaster(e)})))}}class Hr{constructor(e,t){this.context=e,this.drawHelper=t}drawNode(e){this.drawHelper.localAxes(e.size,this.context.scene,e.colorX,e.colorY,e.colorZ).parent=e.node}drawNodes(e){e.nodes.forEach((t=>{this.drawHelper.localAxes(e.size,this.context.scene,e.colorX,e.colorY,e.colorZ).parent=t}))}createNodeFromRotation(e){const t=new q.TransformNode(`node${Math.random()}`,this.context.scene);return e.parent&&(t.parent=e.parent),t.position=new q.Vector3(e.origin[0],e.origin[1],e.origin[2]),t.rotation=new q.Vector3(q.Angle.FromDegrees(e.rotation[0]).radians(),q.Angle.FromDegrees(e.rotation[1]).radians(),q.Angle.FromDegrees(e.rotation[2]).radians()),t}createWorldNode(){const e=new q.TransformNode(`root${Math.random()}`,this.context.scene);return e.parent=this.context.scene.getTransformNodeByID("root"),e}getAbsoluteForwardVector(e){const t=e.node.forward;return[t.x,t.y,t.z]}getAbsoluteRightVector(e){const t=e.node.right;return[t.x,t.y,t.z]}getAbsoluteUpVector(e){const t=e.node.up;return[t.x,t.y,t.z]}getAbsolutePosition(e){const t=e.node.getAbsolutePosition();return[t.x,t.y,t.z]}getAbsoluteRotationTransformation(e){const t=new q.Matrix;return e.node.absoluteRotationQuaternion.toRotationMatrix(t),[...t.toArray()]}getRotationTransformation(e){const t=new q.Matrix;return e.node.rotationQuaternion.toRotationMatrix(t),[...t.toArray()]}getChildren(e){return e.node.getChildren()}getParent(e){return e.node.parent}getPositionExpressedInLocalSpace(e){const t=e.node.getPositionExpressedInLocalSpace();return[t.x,t.y,t.z]}getRootNode(){return this.context.scene.getTransformNodeByID("root")}getRotation(e){const t=e.node.rotation;return[q.Angle.FromRadians(t.x).degrees(),q.Angle.FromRadians(t.y).degrees(),q.Angle.FromRadians(t.z).degrees()]}rotateAroundAxisWithPosition(e){e.node.rotateAround(new q.Vector3(e.position[0],e.position[1],e.position[2]),new q.Vector3(e.axis[0],e.axis[1],e.axis[2]),q.Angle.FromDegrees(e.angle).radians())}rotate(e){e.node.rotate(new q.Vector3(e.axis[0],e.axis[1],e.axis[2]),q.Angle.FromDegrees(e.angle).radians())}setAbsolutePosition(e){e.node.setAbsolutePosition(new q.Vector3(e.position[0],e.position[1],e.position[2]))}setDirection(e){e.node.setDirection(new q.Vector3(e.direction[0],e.direction[1],e.direction[2]))}setParent(e){e.node.setParent(e.parentNode)}translate(e){e.node.translate(new q.Vector3(e.direction[0],e.direction[1],e.direction[2]),e.distance)}}class jr{constructor(e){this.context=e}pickWithRay(e){return this.context.scene.pickWithRay(e.ray)}pickWithPickingRay(){const e=this.context.scene,t=e.createPickingRay(e.pointerX,e.pointerY,q.Matrix.Identity(),this.context.scene.activeCamera,!1);return e.pickWithRay(t)}getDistance(e){return e.pickInfo.distance}getPickedMesh(e){return e.pickInfo.pickedMesh}getPickedPoint(e){const t=e.pickInfo.pickedPoint;return[t.x,t.y,t.z]}hit(e){return e.pickInfo.hit}getSubMeshId(e){return e.pickInfo.subMeshId}getSubMeshFaceId(e){return e.pickInfo.subMeshFaceId}getBU(e){return e.pickInfo.bu}getBV(e){return e.pickInfo.bv}getPickedSprite(e){return e.pickInfo.pickedSprite}}class qr{constructor(e){this.context=e}createPickingRay(){const e=this.context.scene;return e.createPickingRay(e.pointerX,e.pointerY,q.Matrix.Identity(),this.context.scene.activeCamera,!1)}createRay(e){const t=new q.Vector3(e.origin[0],e.origin[1],e.origin[2]),r=new q.Vector3(e.direction[0],e.direction[1],e.direction[2]);let i;return 0!==e.length&&(i=e.length),new q.Ray(t,r,i)}createRayFromTo(e){const t=new q.Vector3(e.from[0],e.from[1],e.from[2]),r=new q.Vector3(e.to[0],e.to[1],e.to[2]);return q.Ray.CreateNewFromTo(t,r)}getOrigin(e){const t=e.ray.origin;return[t.x,t.y,t.z]}getDirection(e){const t=e.ray.direction;return[t.x,t.y,t.z]}getLength(e){return e.ray.length}}class Zr{constructor(e){this.context=e}getScene(){return this.context.scene}setAndAttachScene(e){return e.scene.metadata={shadowGenerators:[]},new q.TransformNode("root",this.context.scene),this.context.scene=e.scene}backgroundColour(e){this.context.scene.clearColor=q.Color4.FromColor3(q.Color3.FromHexString(e.colour))}activateCamera(e){this.context.scene.activeCamera.detachControl(),this.context.scene.activeCamera=e.camera}useRightHandedSystem(e){this.context.scene.useRightHandedSystem=e.use,this.context.scene.activeCamera.getViewMatrix(!0),this.context.scene.activeCamera.getProjectionMatrix(!0)}drawPointLightNoReturn(e){this.drawPointLight(e)}getShadowGenerators(){return this.context.scene.metadata&&this.context.scene.metadata.shadowGenerators?this.context.scene.metadata.shadowGenerators:[]}drawPointLight(e){const t=new q.Vector3(e.position[0],e.position[1],e.position[2]),r=new q.PointLight(`pointLight${Math.random()}`,t,this.context.scene);if(e.enableShadows){r.shadowEnabled=!0;const t=new q.ShadowGenerator(e.shadowGeneratorMapSize,r);t.darkness=e.shadowDarkness,t.usePercentageCloserFiltering=e.shadowUsePercentageCloserFiltering,t.contactHardeningLightSizeUVRatio=e.shadowContactHardeningLightSizeUVRatio,t.bias=e.shadowBias,t.normalBias=e.shadowNormalBias,r.shadowMaxZ=e.shadowMaxZ,r.shadowMinZ=e.shadowMinZ,this.context.scene.metadata.shadowGenerators.push(t),this.context.scene.meshes.forEach((e=>{"bitbybit-hdrSkyBox"===e.name||e.name.includes("bitbybit-ground")||e.metadata&&(!e.metadata||!1===e.metadata.shadows)||(t.addShadowCaster(e,!0),e.receiveShadows=!0)}))}if(r.diffuse=q.Color3.FromHexString(e.diffuse),r.specular=q.Color3.FromHexString(e.specular),r.intensityMode=q.Light.INTENSITYMODE_LUMINOUSPOWER,r.intensity=e.intensity,e.radius>0){const t=q.MeshBuilder.CreateSphere(`PointLightSphere${Math.random()}`,{diameter:2*e.radius},this.context.scene);t.metadata={shadows:!1};const i=new q.StandardMaterial(`LightMaterial${Math.random()}`,this.context.scene);i.diffuseColor=r.diffuse,i.specularColor=r.diffuse,i.emissiveColor=r.diffuse,t.material=i,t.parent=r}return r}drawDirectionalLightNoReturn(e){this.drawDirectionalLight(e)}drawDirectionalLight(e){const t=new q.Vector3(e.direction[0],e.direction[1],e.direction[2]),r=new q.DirectionalLight(`directionalLight${Math.random()}`,t,this.context.scene);if(e.enableShadows){r.shadowEnabled=!0;const t=new q.ShadowGenerator(e.shadowGeneratorMapSize,r);t.darkness=e.shadowDarkness,t.usePercentageCloserFiltering=e.shadowUsePercentageCloserFiltering,t.contactHardeningLightSizeUVRatio=e.shadowContactHardeningLightSizeUVRatio,t.bias=e.shadowBias,t.normalBias=e.shadowNormalBias,r.shadowMaxZ=e.shadowMaxZ,r.shadowMinZ=e.shadowMinZ,this.context.scene.metadata.shadowGenerators.push(t),this.context.scene.meshes.forEach((e=>{"bitbybit-hdrSkyBox"===e.name||e.name.includes("bitbybit-ground")||e.metadata&&(!e.metadata||!1===e.metadata.shadows)||(t.addShadowCaster(e,!0),e.receiveShadows=!0)}))}return r.diffuse=q.Color3.FromHexString(e.diffuse),r.specular=q.Color3.FromHexString(e.specular),r.intensity=e.intensity,r.shadowMaxZ=e.shadowMaxZ,r}getActiveCamera(){return this.context.scene.activeCamera}adjustActiveArcRotateCamera(e){const t=this.context.scene.getCameraByName("Camera");t.position=new q.Vector3(e.position[0],e.position[1],e.position[2]),t.target=new q.Vector3(e.lookAt[0],e.lookAt[1],e.lookAt[2]);const r=q.Vector3.Distance(t.position,t.target);t.radius=r,void 0!==e.lowerRadiusLimit&&(t.lowerRadiusLimit=e.lowerRadiusLimit),void 0!==e.upperRadiusLimit&&(t.upperRadiusLimit=e.upperRadiusLimit),void 0!==e.lowerAlphaLimit&&(t.lowerAlphaLimit=this.getRadians(e.lowerAlphaLimit)),void 0!==e.upperAlphaLimit&&(t.upperAlphaLimit=this.getRadians(e.upperAlphaLimit)),void 0!==e.lowerBetaLimit&&(t.lowerBetaLimit=this.getRadians(e.lowerBetaLimit)),void 0!==e.upperBetaLimit&&(t.upperBetaLimit=this.getRadians(e.upperBetaLimit)),void 0!==e.angularSensibilityX&&(t.angularSensibilityX=e.angularSensibilityX),void 0!==e.angularSensibilityY&&(t.angularSensibilityY=e.angularSensibilityY),void 0!==e.panningSensibility&&(t.panningSensibility=e.panningSensibility),void 0!==e.wheelPrecision&&(t.wheelPrecision=e.wheelPrecision),void 0!==e.maxZ&&(t.maxZ=e.maxZ)}clearAllDrawn(){const e=this.context.scene;if(e&&(e.environmentTexture&&e.environmentTexture.dispose(),e.environmentTexture=null,e.fogMode=q.Scene.FOGMODE_NONE,e.meshes.forEach((e=>e.dispose())),e.meshes=[],e.materials.forEach((e=>e.dispose())),e.textures.forEach((e=>e.dispose())),e.materials=[],e.textures=[],e.useRightHandedSystem=!1,e.geometries.forEach((e=>{e.meshes&&e.meshes.forEach((e=>e.dispose())),e.dispose&&e.dispose()})),e.geometries=[],e.lights.forEach((e=>{"HemiLight"!==e.name&&e.dispose()})),e.lights=e.lights.filter((e=>"HemiLight"===e.name)),e.transformNodes&&e.transformNodes.forEach((e=>{e&&"root"!==e.name&&e.dispose()})),e.metadata&&(e.metadata.shadowGenerators.length>0&&(e.metadata.shadowGenerators.forEach((e=>e.dispose())),e.metadata.shadowGenerators=[]),e.metadata.xr&&e.metadata.xr.dispose(),e.metadata.guiManager&&e.metadata.guiManager.dispose()),e.transformNodes=[e.getTransformNodeByName("root")],e.activeCamera&&"Camera"!==e.activeCamera.name)){e.cameras.forEach((e=>e.dispose()));const t=new q.ArcRotateCamera("Camera",0,10,10,new q.Vector3(0,0,0),e);t.lowerRadiusLimit=0,e.setActiveCameraByName(t.name),t.setPosition(new q.Vector3(0,10,20));const r=document.getElementById("renderCanvas");t.attachControl(r,!0),t.minZ=0}}enableSkybox(e){var t;let r;e.skybox===dr.skyboxEnum.default?r=new q.CubeTexture("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/textures/skybox/default_skybox/skybox",this.context.scene):e.skybox===dr.skyboxEnum.greyGradient?r=new q.CubeTexture("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/textures/skybox/grey_gradient/skybox",this.context.scene):e.skybox===dr.skyboxEnum.clearSky?r=q.CubeTexture.CreateFromPrefilteredData("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/textures/skybox/clear_sky/environment.env",this.context.scene,!1,!1):e.skybox===dr.skyboxEnum.city&&(r=q.CubeTexture.CreateFromPrefilteredData("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/textures/skybox/city/environmentSpecular.env",this.context.scene,!1,!1)),null===(t=this.context.scene.getMeshByName("bitbybit-hdrSkyBox"))||void 0===t||t.dispose(!1,!0),this.context.scene.createDefaultSkybox(r,!0,e.size,e.blur,!0).name="bitbybit-hdrSkyBox",this.context.scene.environmentIntensity=e.environmentIntensity}onPointerDown(e){this.context.scene.onPointerDown=e.statement_update}onPointerUp(e){this.context.scene.onPointerUp=e.statement_update}onPointerMove(e){this.context.scene.onPointerMove=e.statement_update}fog(e){switch(e.mode){case dr.fogModeEnum.none:this.context.scene.fogMode=0;break;case dr.fogModeEnum.exponential:this.context.scene.fogMode=1;break;case dr.fogModeEnum.exponentialSquared:this.context.scene.fogMode=2;break;case dr.fogModeEnum.linear:this.context.scene.fogMode=3}this.context.scene.fogDensity=e.density,this.context.scene.fogStart=e.start,this.context.scene.fogEnd=e.end,this.context.scene.fogColor=q.Color3.FromHexString(e.color)}enablePhysics(e){this.context.scene.enablePhysics(new q.Vector3(e.vector[0],e.vector[1],e.vector[2]),this.context.havokPlugin)}getRadians(e){let t=q.Angle.FromDegrees(e).radians();return e<0&&(t=-t),t}}class Yr{constructor(e){this.context=e}createSimple(e){const t=new q.Texture(e.url,this.context.scene,void 0,e.invertY,this.context.getSamplingMode(e.samplingMode));return t.uScale=e.uScale,t.vScale=e.vScale,t.wAng=e.wAng,t.invertZ=e.invertZ,t.uOffset=e.uOffset,t.vOffset=e.vOffset,t}}var Xr=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Kr{constructor(e){this.context=e}createScreenshot(e){return Xr(this,void 0,void 0,(function*(){const t=e.camera?e.camera:this.context.scene.activeCamera;return q.Tools.CreateScreenshotAsync(this.context.engine,t,{width:e.width,height:e.height},e.mimeType,e.quality)}))}createScreenshotAndDownload(e){return Xr(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const i=e.camera?e.camera:this.context.scene.activeCamera;return q.Tools.CreateScreenshot(this.context.engine,i,{width:e.width,height:e.height},(()=>{t("done")}),e.mimeType,!0,e.quality)}))}))}}class $r{rotationCenterAxis(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.RotationAxis(new q.Vector3(e.axis[0],e.axis[1],e.axis[2]),q.Angle.FromDegrees(e.angle).radians()).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}rotationCenterX(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.RotationX(q.Angle.FromDegrees(e.angle).radians()).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}rotationCenterY(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.RotationY(q.Angle.FromDegrees(e.angle).radians()).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}rotationCenterZ(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.RotationZ(q.Angle.FromDegrees(e.angle).radians()).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}rotationCenterYawPitchRoll(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.RotationYawPitchRoll(q.Angle.FromDegrees(e.yaw).radians(),q.Angle.FromDegrees(e.pitch).radians(),q.Angle.FromDegrees(e.roll).radians()).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}scaleCenterXYZ(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.Scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}scaleXYZ(e){return[[...q.Matrix.Scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]).asArray()]]}uniformScale(e){return[[...q.Matrix.Scaling(e.scale,e.scale,e.scale).asArray()]]}uniformScaleFromCenter(e){return[[...q.Matrix.Translation(-e.center[0],-e.center[1],-e.center[2]).asArray()],[...q.Matrix.Scaling(e.scale,e.scale,e.scale).asArray()],[...q.Matrix.Translation(e.center[0],e.center[1],e.center[2]).asArray()]]}translationXYZ(e){return[[...q.Matrix.Translation(e.translation[0],e.translation[1],e.translation[2]).asArray()]]}translationsXYZ(e){return e.translations.map((e=>[[...q.Matrix.Translation(e[0],e[1],e[2]).asArray()]]))}}class Qr{constructor(e){this.context=e}createGizmoManager(e){const t=new q.GizmoManager(this.context.scene);return t.positionGizmoEnabled=e.positionGizmoEnabled,t.rotationGizmoEnabled=e.rotationGizmoEnabled,t.scaleGizmoEnabled=e.scaleGizmoEnabled,t.boundingBoxGizmoEnabled=e.boundingBoxGizmoEnabled,e.attachableMeshes&&e.attachableMeshes.length>0&&(t.attachableMeshes=e.attachableMeshes),t.clearGizmoOnEmptyPointerEvent=e.clearGizmoOnEmptyPointerEvent,t.scaleRatio=e.scaleRatio,t.usePointerToAttachGizmos=e.usePointerToAttachGizmos,t}getPositionGizmo(e){return e.gizmoManager.gizmos.positionGizmo}getRotationGizmo(e){return e.gizmoManager.gizmos.rotationGizmo}getScaleGizmo(e){return e.gizmoManager.gizmos.scaleGizmo}getBoundingBoxGizmo(e){return e.gizmoManager.gizmos.boundingBoxGizmo}attachToMesh(e){return e.gizmoManager.attachToMesh(e.mesh),e.gizmoManager}detachMesh(e){return e.gizmoManager.attachToMesh(null),e.gizmoManager}}class Jr{constructor(e){this.context=e}planarGizmoEnabled(e){return e.positionGizmo.planarGizmoEnabled=e.planarGizmoEnabled,e.positionGizmo}snapDistance(e){return e.positionGizmo.snapDistance=e.snapDistance,e.positionGizmo}getAttachedMesh(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.attachedMesh}getAttachedNode(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.attachedNode}getXGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.xGizmo}getYGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.yGizmo}getZGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.zGizmo}getXPlaneGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.xPlaneGizmo}getYPlaneGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.yPlaneGizmo}getZPlaneGizmo(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.zPlaneGizmo}getPlanarGizmoEnabled(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.planarGizmoEnabled}getSnapDistance(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.snapDistance}getIsDragging(e){var t;return null===(t=e.positionGizmo)||void 0===t?void 0:t.isDragging}createPositionGizmoObservableSelector(e){return e.selector}}class ei{constructor(e){this.context=e}setIsEnabled(e){return e.axisDragGizmo.isEnabled=e.isEnabled,e.axisDragGizmo}getIsEnabled(e){return e.axisDragGizmo.isEnabled}}class ti{constructor(e){this.context=e}setIsEnabled(e){return e.planeDragGizmo.isEnabled=e.isEnabled,e.planeDragGizmo}getIsEnabled(e){return e.planeDragGizmo.isEnabled}}class ri{constructor(e){this.context=e}snapDistance(e){return e.rotationGizmo.snapDistance=e.snapDistance,e.rotationGizmo}sensitivity(e){return e.rotationGizmo.sensitivity=e.sensitivity,e.rotationGizmo}getAttachedMesh(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.attachedMesh}getAttachedNode(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.attachedNode}getXGizmo(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.xGizmo}getYGizmo(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.yGizmo}getZGizmo(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.zGizmo}getSnapDistance(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.snapDistance}getSensitivity(e){var t;return null===(t=e.rotationGizmo)||void 0===t?void 0:t.sensitivity}createRotationGizmoObservableSelector(e){return e.selector}}class ii{constructor(e){this.context=e}getXGizmo(e){var t;return null===(t=e.scaleGizmo)||void 0===t?void 0:t.xGizmo}getYGizmo(e){var t;return null===(t=e.scaleGizmo)||void 0===t?void 0:t.yGizmo}getZGizmo(e){var t;return null===(t=e.scaleGizmo)||void 0===t?void 0:t.zGizmo}snapDistance(e){return e.scaleGizmo.snapDistance=e.snapDistance,e.scaleGizmo}setIncrementalSnap(e){return e.scaleGizmo.incrementalSnap=e.incrementalSnap,e.scaleGizmo}sensitivity(e){return e.scaleGizmo.sensitivity=e.sensitivity,e.scaleGizmo}getIncrementalSnap(e){return e.scaleGizmo.incrementalSnap}getSnapDistance(e){return e.scaleGizmo.snapDistance}getSensitivity(e){return e.scaleGizmo.sensitivity}createScaleGizmoObservableSelector(e){return e.selector}}class oi{constructor(e){this.context=e}setIsEnabled(e){return e.axisScaleGizmo.isEnabled=e.isEnabled,e.axisScaleGizmo}getIsEnabled(e){return e.axisScaleGizmo.isEnabled}}class ni{constructor(e){this.context=e}setRotationSphereSize(e){return e.boundingBoxGizmo.rotationSphereSize=e.rotationSphereSize,e.boundingBoxGizmo}setFixedDragMeshScreenSize(e){return e.boundingBoxGizmo.fixedDragMeshScreenSize=e.fixedDragMeshScreenSize,e.boundingBoxGizmo}setFixedDragMeshBoundsSize(e){return e.boundingBoxGizmo.fixedDragMeshBoundsSize=e.fixedDragMeshBoundsSize,e.boundingBoxGizmo}setFixedDragMeshScreenSizeDistanceFactor(e){return e.boundingBoxGizmo.fixedDragMeshScreenSizeDistanceFactor=e.fixedDragMeshScreenSizeDistanceFactor,e.boundingBoxGizmo}setScalingSnapDistance(e){return e.boundingBoxGizmo.scalingSnapDistance=e.scalingSnapDistance,e.boundingBoxGizmo}setRotationSnapDistance(e){return e.boundingBoxGizmo.rotationSnapDistance=e.rotationSnapDistance,e.boundingBoxGizmo}setScaleBoxSize(e){return e.boundingBoxGizmo.scaleBoxSize=e.scaleBoxSize,e.boundingBoxGizmo}setIncrementalSnap(e){return e.boundingBoxGizmo.incrementalSnap=e.incrementalSnap,e.boundingBoxGizmo}setScalePivot(e){return e.boundingBoxGizmo.scalePivot=new q.Vector3(...e.scalePivot),e.boundingBoxGizmo}setAxisFactor(e){return e.boundingBoxGizmo.axisFactor=new q.Vector3(...e.axisFactor),e.boundingBoxGizmo}setScaleDragSpeed(e){return e.boundingBoxGizmo.scaleDragSpeed=e.scaleDragSpeed,e.boundingBoxGizmo}getRotationSphereSize(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.rotationSphereSize}getScaleBoxSize(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.scaleBoxSize}getFixedDragMeshScreenSize(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.fixedDragMeshScreenSize}getFixedDragMeshBoundsSize(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.fixedDragMeshBoundsSize}getFixedDragMeshScreenSizeDistanceFactor(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.fixedDragMeshScreenSizeDistanceFactor}getScalingSnapDistance(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.scalingSnapDistance}getRotationSnapDistance(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.rotationSnapDistance}getIncrementalSnap(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.incrementalSnap}getScalePivot(e){var t,r;return null===(r=null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.scalePivot)||void 0===r?void 0:r.asArray()}getAxisFactor(e){var t,r;return null===(r=null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.axisFactor)||void 0===r?void 0:r.asArray()}getScaleDragSpeed(e){var t;return null===(t=e.boundingBoxGizmo)||void 0===t?void 0:t.scaleDragSpeed}createBoundingBoxGizmoObservableSelector(e){return e.selector}}class si{constructor(e){this.context=e}setIsEnabled(e){return e.planeRotationGizmo.isEnabled=e.isEnabled,e.planeRotationGizmo}getIsEnabled(e){return e.planeRotationGizmo.isEnabled}}class ai{constructor(e){this.context=e}scaleRatio(e){return e.gizmo.scaleRatio=e.scaleRatio,e.gizmo}getScaleRatio(e){var t;return null===(t=e.gizmo)||void 0===t?void 0:t.scaleRatio}}class ci{constructor(e){this.context=e,this.manager=new Qr(e),this.base=new ai(e),this.positionGizmo=new Jr(e),this.rotationGizmo=new ri(e),this.scaleGizmo=new ii(e),this.boundingBoxGizmo=new ni(e),this.axisDragGizmo=new ei(e),this.axisScaleGizmo=new oi(e),this.planeDragGizmo=new ti(e),this.planeRotationGizmo=new si(e)}}class hi{constructor(e,t,r){this.mesh=new Nr(e),this.camera=new Nt(e),this.gaussianSplatting=new Kt(e),this.node=new Hr(e,t),this.scene=new Zr(e),this.webXr=new Yt(e),this.gui=new zr(e),this.transforms=new $r,this.io=new Pr(e),this.ray=new qr(e),this.pick=new jr(e),this.material=new jt(e,r),this.lights=new Tr(e),this.texture=new Yr(e),this.meshBuilder=new Vr(e,this.mesh),this.tools=new Kr(e),this.engine=new Xt(e),this.gizmo=new ci(e)}}class li extends ne{constructor(e,t){super(e),this.occWorkerManager=e,this.context=t}loadSTEPorIGES(e){return this.context.getFile(e.assetFile).then((t=>this.occWorkerManager.genericCallToWorkerPromise("io.loadSTEPorIGES",new et.LoadStepOrIgesDto(t,e.assetFile.name,e.adjustZtoY))))}loadSTEPorIGESFromText(e){return this.occWorkerManager.genericCallToWorkerPromise("io.loadSTEPorIGES",new et.LoadStepOrIgesDto(e.text,`fake.${e.fileType}`,e.adjustZtoY))}}class ui extends ge{constructor(e,t){super(t),this.context=e,this.occWorkerManager=t,this.io=new li(t,e)}}class di{constructor(e,t){this.context=e,this.math=t}createCircle(e){return new this.context.verb.geom.Circle(e.center,e.xAxis,e.yAxis,e.radius)}createArc(e){return new this.context.verb.geom.Arc(e.center,e.xAxis,e.yAxis,e.radius,this.math.degToRad({number:e.minAngle}),this.math.degToRad({number:e.maxAngle}))}center(e){return e.circle.center()}radius(e){return e.circle.radius()}maxAngle(e){return this.math.radToDeg({number:e.circle.maxAngle()})}minAngle(e){return this.math.radToDeg({number:e.circle.minAngle()})}xAxis(e){return e.circle.xaxis()}yAxis(e){return e.circle.yaxis()}}class pi{constructor(e,t){this.context=e,this.math=t}createEllipse(e){return new this.context.verb.geom.Ellipse(e.center,e.xAxis,e.yAxis)}createArc(e){return new this.context.verb.geom.EllipseArc(e.center,e.xAxis,e.yAxis,this.math.degToRad({number:e.minAngle}),this.math.degToRad({number:e.maxAngle}))}center(e){return e.ellipse.center()}maxAngle(e){return this.math.radToDeg({number:e.ellipse.maxAngle()})}minAngle(e){return this.math.radToDeg({number:e.ellipse.minAngle()})}xAxis(e){return e.ellipse.xaxis()}yAxis(e){return e.ellipse.yaxis()}}class fi{constructor(e,t,r){this.context=e,this.geometryHelper=t,this.math=r,this.circle=new di(e,this.math),this.ellipse=new pi(e,this.math)}createCurveByKnotsControlPointsWeights(e){return this.context.verb.geom.NurbsCurve.byKnotsControlPointsWeights(e.degree,e.knots,e.points,e.weights)}createCurveByPoints(e){return this.context.verb.geom.NurbsCurve.byPoints(e.points,e.degree)}convertLinesToNurbsCurves(e){return e.lines.map((e=>new this.context.verb.geom.Line(e.start,e.end)))}convertLineToNurbsCurve(e){return new this.context.verb.geom.Line(e.line.start,e.line.end)}convertPolylineToNurbsCurve(e){return this.context.verb.geom.NurbsCurve.byPoints(e.polyline.points,1)}convertPolylinesToNurbsCurves(e){return e.polylines.map((e=>this.convertPolylineToNurbsCurve({polyline:e})))}createBezierCurve(e){return new this.context.verb.geom.BezierCurve(e.points,e.weights)}clone(e){return e.curve.clone()}closestParam(e){return e.curve.closestParam(e.point)}closestParams(e){return e.points.map((t=>e.curve.closestParam(t)))}closestPoint(e){return e.curve.closestPoint(e.point)}closestPoints(e){return e.points.map((t=>e.curve.closestPoint(t)))}controlPoints(e){return e.curve.controlPoints()}degree(e){return e.curve.degree()}derivatives(e){return e.curve.derivatives(e.parameter,e.numDerivatives)}divideByEqualArcLengthToParams(e){return e.curve.divideByEqualArcLength(e.subdivision).map((e=>e.u))}divideByEqualArcLengthToPoints(e){return e.curve.divideByEqualArcLength(e.subdivision).map((t=>e.curve.point(t.u)))}divideByArcLengthToParams(e){return e.curve.divideByArcLength(e.length).map((e=>e.u))}divideByArcLengthToPoints(e){return e.curve.divideByArcLength(e.length).map((t=>e.curve.point(t.u)))}divideCurvesByEqualArcLengthToPoints(e){return e.curves.map((t=>this.divideByEqualArcLengthToPoints({curve:t,subdivision:e.subdivision})))}divideCurvesByArcLengthToPoints(e){return e.curves.map((t=>this.divideByArcLengthToPoints({curve:t,length:e.length})))}domain(e){return e.curve.domain()}startPoint(e){return e.curve.point(e.curve.domain().min)}endPoint(e){return e.curve.point(e.curve.domain().max)}startPoints(e){return e.curves.map((e=>this.startPoint({curve:e})))}endPoints(e){return e.curves.map((e=>this.endPoint({curve:e})))}knots(e){return e.curve.knots()}lengthAtParam(e){return e.curve.lengthAtParam(e.parameter)}length(e){return e.curve.length()}paramAtLength(e){return e.curve.paramAtLength(e.length,e.tolerance)}pointAtParam(e){return e.curve.point(e.parameter)}pointsAtParam(e){return e.curves.map((t=>this.pointAtParam({curve:t,parameter:e.parameter})))}reverse(e){return e.curve.reverse()}split(e){return e.curve.split(e.parameter)}tangent(e){return e.curve.tangent(e.parameter)}tessellate(e){return e.curve.tessellate(e.tolerance)}transform(e){const t=e.curve.controlPoints(),r=this.geometryHelper.transformControlPoints(e.transformation,t);return this.context.verb.geom.NurbsCurve.byKnotsControlPointsWeights(e.curve.degree(),e.curve.knots(),r,e.curve.weights())}transformCurves(e){return e.curves.map((t=>this.transform({curve:t,transformation:e.transformation})))}weights(e){return e.curve.weights()}}class vi{constructor(e,t){this.context=e,this.geometryHelper=t}curves(e){return this.context.verb.geom.Intersect.curves(e.firstCurve,e.secondCurve,e.tolerance)}curveAndSurface(e){return this.context.verb.geom.Intersect.curveAndSurface(e.curve,e.surface,e.tolerance)}surfaces(e){return this.context.verb.geom.Intersect.surfaces(e.firstSurface,e.secondSurface)}curveCurveFirstParams(e){return e.intersections.filter((e=>e.u0>=0&&e.u0<=1)).map((e=>e.u0))}curveCurveSecondParams(e){return e.intersections.filter((e=>e.u1>=0&&e.u1<=1)).map((e=>e.u1))}curveCurveFirstPoints(e){return e.intersections.filter((e=>e.u0>=0&&e.u0<=1)).map((e=>e.point0))}curveCurveSecondPoints(e){return e.intersections.filter((e=>e.u1>=0&&e.u1<=1)).map((e=>e.point1))}curveSurfaceCurveParams(e){return e.intersections.filter((e=>e.u>=0&&e.u<=1)).map((e=>e.u))}curveSurfaceSurfaceParams(e){return e.intersections.map((e=>e.uv))}curveSurfaceCurvePoints(e){return e.intersections.filter((e=>e.u>=0&&e.u<=1)).map((e=>e.curvePoint))}curveSurfaceSurfacePoints(e){return e.intersections.map((e=>e.surfacePoint))}}class gi{constructor(e){this.context=e}create(e){return new this.context.verb.geom.ConicalSurface(e.axis,e.xAxis,e.base,e.height,e.radius)}axis(e){return e.cone.axis()}base(e){return e.cone.base()}height(e){return e.cone.height()}radius(e){return e.cone.radius()}xAxis(e){return e.cone.xaxis()}}class mi{constructor(e){this.context=e}create(e){return new this.context.verb.geom.CylindricalSurface(e.axis,e.xAxis,e.base,e.height,e.radius)}axis(e){return e.cylinder.axis()}base(e){return e.cylinder.base()}height(e){return e.cylinder.height()}radius(e){return e.cylinder.radius()}xAxis(e){return e.cylinder.xaxis()}}class bi{constructor(e){this.context=e}create(e){return new this.context.verb.geom.ExtrudedSurface(e.profile,e.direction)}direction(e){return e.extrusion.direction()}profile(e){return e.extrusion.profile()}}class yi{constructor(e,t){this.context=e,this.math=t}create(e){return new this.context.verb.geom.RevolvedSurface(e.profile,e.center,e.axis,this.math.degToRad({number:e.angle}))}profile(e){return e.revolution.profile()}center(e){return e.revolution.center()}axis(e){return e.revolution.axis()}angle(e){return this.math.radToDeg({number:e.revolution.angle()})}}class xi{constructor(e){this.context=e}create(e){return new this.context.verb.geom.SphericalSurface(e.center,e.radius)}radius(e){return e.sphere.radius()}center(e){return e.sphere.center()}}class wi{constructor(e){this.context=e}create(e){return new this.context.verb.geom.SweptSurface(e.profile,e.rail)}profile(e){return e.sweep.profile()}rail(e){return e.sweep.rail()}}class Si{constructor(e,t,r){this.context=e,this.geometryHelper=t,this.math=r,this.cone=new gi(e),this.cylinder=new mi(e),this.extrusion=new bi(e),this.sphere=new xi(e),this.revolved=new yi(e,r),this.sweep=new wi(e)}boundaries(e){return e.surface.boundaries()}createSurfaceByCorners(e){return this.context.verb.geom.NurbsSurface.byCorners(e.point1,e.point2,e.point3,e.point4)}createSurfaceByKnotsControlPointsWeights(e){return this.context.verb.geom.NurbsSurface.byKnotsControlPointsWeights(e.degreeU,e.degreeV,e.knotsU,e.knotsV,e.points,e.weights)}createSurfaceByLoftingCurves(e){return this.context.verb.geom.NurbsSurface.byLoftingCurves(e.curves,e.degreeV)}clone(e){return e.surface.clone()}closestParam(e){return e.surface.closestParam(e.point)}closestPoint(e){return e.surface.closestPoint(e.point)}controlPoints(e){return e.surface.controlPoints()}degreeU(e){return e.surface.degreeU()}degreeV(e){return e.surface.degreeV()}derivatives(e){return e.surface.derivatives(e.u,e.v,e.numDerivatives)}domainU(e){return e.surface.domainU()}domainV(e){return e.surface.domainV()}isocurve(e){return e.surface.isocurve(e.parameter,e.useV)}isocurvesSubdivision(e){const t=.999999/e.isocurveSegments,r=this.context.verb.core.Vec.span(1e-7,.9999999,t);return e.includeLast||r.pop(),e.includeFirst||r.shift(),r.map((t=>e.surface.isocurve(t,e.useV)))}isocurvesAtParams(e){return e.parameters.map((t=>e.surface.isocurve(t,e.useV)))}knotsU(e){return e.surface.knotsU()}knotsV(e){return e.surface.knotsV()}normal(e){return e.surface.normal(e.u,e.v)}point(e){return e.surface.point(e.u,e.v)}reverse(e){return e.surface.reverse()}split(e){return e.surface.split(e.parameter,e.useV)}transformSurface(e){const t=e.surface.controlPoints(),r=e.transformation,i=[];return t.forEach((e=>{let t=e;t=this.geometryHelper.transformControlPoints(r,t),i.push(t)})),this.context.verb.geom.NurbsSurface.byKnotsControlPointsWeights(e.surface.degreeU(),e.surface.degreeV(),e.surface.knotsU(),e.surface.knotsV(),i,e.surface.weights())}weights(e){return e.surface.weights()}}class ki{constructor(e,t,r){this.math=r,this.curve=new fi(e,t,this.math),this.surface=new Si(e,t,this.math),this.intersect=new vi(e,t)}}class Ci{}var Pi,Mi,Ti=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Di{constructor(){this.assetManager=new Ci}getFile(e){return this.assetManager.getAsset(e.fileName)}getLocalFile(e){return this.assetManager.getLocalAsset(e.fileName)}fetchBlob(e){return Ti(this,void 0,void 0,(function*(){return(yield fetch(e.url)).blob()}))}fetchFile(e){return Ti(this,void 0,void 0,(function*(){const t=yield fetch(e.url),r=yield t.blob();return new File([r],e.url.split("/").pop().split("?")[0])}))}fetchJSON(e){return Ti(this,void 0,void 0,(function*(){return(yield fetch(e.url)).json()}))}fetchText(e){return Ti(this,void 0,void 0,(function*(){return(yield fetch(e.url)).text()}))}createObjectURL(e){return URL.createObjectURL(e.file)}createObjectURLs(e){return e.files.map((e=>URL.createObjectURL(e)))}}!function(e){e.IntervalDto=class{constructor(){this.min=0,this.max=1}},e.UVDto=class{constructor(){this.u=0,this.v=0}},e.CurveCurveIntersection=class{},e.CurveSurfaceIntersection=class{},e.SurfaceSurfaceIntersectionPoint=class{}}(Pi||(Pi={}));class _i{constructor(e){this.context=e}stringify(e){return JSON.stringify(e.json)}parse(e){return JSON.parse(e.text)}query(e){return this.context.jsonpath({path:e.query,json:e.json})}setValueOnProp(e){const t=Object.assign({},structuredClone(e.json));return t[e.property]=e.value,t}getJsonFromArrayByFirstPropMatch(e){return e.jsonArray.find((t=>t[e.property]===e.match))}getValueOnProp(e){try{return Object.assign({},structuredClone(e.json))[e.property]}catch(t){return e.json[e.property]}}setValue(e){if(e.json instanceof Object){const t=Object.assign({},structuredClone(e.json)),r=t=>(t[e.prop]=e.value,t);return this.context.jsonpath({path:e.path,json:t,callback:r}),t}throw new Error("Json must be an object")}setValuesOnPaths(e){let t=Object.assign({},structuredClone(e.json));return e.paths.forEach(((r,i)=>{t=this.setValue({json:t,path:r,value:e.values[i],prop:e.props[i]})})),t}paths(e){return this.context.jsonpath({json:e.json,path:e.query,resultType:"path"})}createEmpty(){return{}}previewAndSaveJson(e){e.json&&this.context.promptPrintSave({text:e.json,isJson:!0,hidden:!1})}previewJson(e){e.json&&this.context.promptPrint({text:e.json,isJson:!0,hidden:!1})}}class Oi{constructor(e){this.context=e}create(e){const t=new br.TagDto;return t.text=e.text,t.position=e.position,t.colour=e.colour,t.size=e.size,t.adaptDepth=e.adaptDepth,t}drawTag(e){if(e.tagVariable&&e.updatable){const t=this.context.tagBag.find((t=>t.id===e.tagVariable.id));Object.keys(e.tag).forEach((r=>{t[r]=e.tag[r]})),t.needsUpdate=!0}else{const t=document.createElement("span"),r="_tag"+(new Date).getTime()+this.context.tagBag.length;e.tag.id=r,t.id=r,t.textContent=e.tag.text,document.querySelector("."+this.context.canvasZoneClass).appendChild(t),e.tag.needsUpdate=!0,this.context.tagBag.push(e.tag)}return e.tag}drawTags(e){if(e.tagsVariable&&e.updatable){if(e.tagsVariable.length<e.tags.length)for(let t=e.tagsVariable.length-1;t<e.tags.length-1;t++){const r=e.tags[t],i=document.createElement("span"),o="_tag"+(new Date).getTime()+this.context.tagBag.length;r.id=o,i.id=o,document.querySelector("."+this.context.canvasZoneClass).appendChild(i),r.needsUpdate=!0,this.context.tagBag.push(r),e.tagsVariable.push(r)}e.tagsVariable.forEach(((t,r)=>{const i=this.context.tagBag.find((e=>e.id===t.id)),o=e.tags[r];if(o)Object.keys(o).forEach((e=>{i[e]=o[e]})),i.needsUpdate=!0;else{this.context.tagBag=this.context.tagBag.filter((e=>e.id!==i.id));const e=document.getElementById(i.id);e.parentNode.removeChild(e)}}))}else{const t=[];e.tags.forEach(((r,i)=>{const o=document.createElement("span"),n="_tag"+(new Date).getTime()+this.context.tagBag.length;r.id=n,o.id=n,o.textContent=r.text,document.querySelector("."+this.context.canvasZoneClass).appendChild(o),r.needsUpdate=!0,this.context.tagBag.push(r),t.push(r),e.tagsVariable=t}))}return e.tagsVariable}}class Ei{constructor(e){this.context=e}registerRenderFunction(e){this.context.renderLoopBag.push((t=>{e(t)}))}}class Wi{constructor(){this.canvasZoneClass="canvasZone",this.tolerance=1e-5,this.snapTolerance=1e-5,this.tagBag=[],this.timeoutBag=[],this.intervalBag=[],this.renderLoopBag=[],this.keyDownBag=[],this.keyUpBag=[],this.keyPressBag=[],this.currentlyPressedKeys=[]}getFile(e){return new Promise(((t,r)=>{if(e){const i=new FileReader;i.readAsText(e,"UTF-8"),i.onload=e=>{const r=e.target.result;t(r)},i.onerror=e=>{r()}}else r()}))}remap(e,t,r,i,o){return(e-t)/(r-t)*(o-i)+i}}class Ai{detectPoint(e){return Array.isArray(e)&&3===e.length&&this.checkIfElementsInArrayAreNumbers(e)}detectPoints(e){return Array.isArray(e)&&this.checkIfElementsInArrayAreArrays(e)&&this.arraysInChildrenArraysContainNumbers(e)&&this.arraysInChildrenArraysAreOfLength3(e)}detectLine(e){return e.start&&e.end&&Array.isArray(e.start)&&Array.isArray(e.end)||Array.isArray(e)&&2===e.length&&this.checkIfElementsInArrayAreNumbers(e[0])&&3===e[0].length&&this.checkIfElementsInArrayAreNumbers(e[1])&&3===e[1].length}detectLines(e){return Array.isArray(e)&&!e.some((e=>!this.detectLine(e)))}detectPolyline(e){return e.points&&Array.isArray(e.points)}detectPolylines(e){return Array.isArray(e)&&!e.some((e=>!this.detectPolyline(e)))}detectNode(e){return!Array.isArray(e)&&e.id&&e.id.includes("node")}detectNodes(e){return Array.isArray(e)&&!e.some((e=>!this.detectNode(e)))}detectVerbCurve(e){return!Array.isArray(e)&&e._data&&e._data.controlPoints&&e._data.knots&&e._data.degree}detectVerbSurface(e){return!Array.isArray(e)&&e._data&&e._data.controlPoints&&e._data.degreeU&&e._data.degreeV&&e._data.knotsU&&e._data.knotsV}detectVerbCurves(e){return Array.isArray(e)&&!e.some((e=>!this.detectVerbCurve(e)))}detectVerbSurfaces(e){return Array.isArray(e)&&!e.some((e=>!this.detectVerbSurface(e)))}detectJscadMesh(e){return!Array.isArray(e)&&(e.sides||e.polygons)}detectJscadMeshes(e){return Array.isArray(e)&&!e.some((e=>!this.detectJscadMesh(e)))}detectOcctShape(e){return"occ-shape"===(null==e?void 0:e.type)}detectOcctShapes(e){return Array.isArray(e)&&!e.some((e=>!this.detectOcctShape(e)))}detectManifoldShape(e){return"manifold-shape"===(null==e?void 0:e.type)}detectManifoldShapes(e){return Array.isArray(e)&&!e.some((e=>!this.detectManifoldShape(e)))}detectTag(e){return!Array.isArray(e)&&e.text}detectTags(e){return Array.isArray(e)&&!e.some((e=>!this.detectTag(e)))}checkIfElementsInArrayAreNumbers(e){return!e.some((e=>isNaN(e)))}checkIfElementsInArrayAreArrays(e){return!e.some((e=>!Array.isArray(e)))}arraysInChildrenArraysContainNumbers(e){return!e.some((e=>!this.checkIfElementsInArrayAreNumbers(e)))}arraysInChildrenArraysAreOfLength3(e){return!e.some((e=>3!==e.length))}}class Ii{constructor(e){this.vector=e}computeEdgeMiddlePos(e){let t;if(2===e.vertex_coord.length){const r=e.vertex_coord[0],i=e.vertex_coord[1];t=this.vector.lerp({first:r,second:i,fraction:.5})}else if(3===e.vertex_coord.length)t=e.vertex_coord[1];else{const r=e.vertex_coord[Math.floor(e.vertex_coord.length/2)],i=e.vertex_coord[Math.floor(e.vertex_coord.length/2+1)];t=this.vector.lerp({first:r,second:i,fraction:.5})}return t}computeFaceMiddlePos(e){let t=0,r=0,i=0,o=0;return e.forEach((e=>{t+=e[0],r+=e[1],i+=e[2],o++})),[t/o,r/o,i/o]}}!function(e){let t,r;!function(e){e.default="default",e.clearSky="clearSky",e.city="city",e.greyGradient="greyGradient"}(t=e.skyboxEnum||(e.skyboxEnum={})),function(e){e.none="none",e.exponential="exponential",e.exponentialSquared="exponentialSquared",e.linear="linear"}(r=e.fogModeEnum||(e.fogModeEnum={}))}(Mi||(Mi={}));var Bi=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ri extends Ai{constructor(e,t,r,i){super(),this.drawHelper=e,this.node=t,this.tag=r,this.context=i,this.defaultBasicOptions=new vr.DrawBasicGeometryOptions,this.defaultPolylineOptions=Object.assign(Object.assign({},new vr.DrawBasicGeometryOptions),{size:2,colours:"#ff00ff"}),this.defaultNodeOptions={colorX:"#ff0000",colorY:"#00ff00",colorZ:"#0000ff",size:2}}drawAnyAsyncNoReturn(e){return Bi(this,void 0,void 0,(function*(){this.drawAnyAsync(e)}))}drawAnyAsync(e){return Bi(this,void 0,void 0,(function*(){const t=e.entity;return void 0===t||Array.isArray(t)&&0===t.length?Promise.resolve(void 0):this.detectJscadMesh(t)?this.handleJscadMesh(e):this.detectOcctShape(t)?this.handleOcctShape(e):this.detectOcctShapes(t)?this.handleOcctShapes(e):this.detectJscadMeshes(t)?this.handleJscadMeshes(e):this.detectManifoldShape(t)?this.handleManifoldShape(e):this.detectManifoldShapes(t)?this.handleManifoldShapes(e):Promise.resolve(this.drawAny(e))}))}updateAny(e){let t;if(e.babylonMesh&&e.babylonMesh.metadata)switch(e.babylonMesh.metadata.type){case vr.drawingTypes.point:t=this.handlePoint(e);break;case vr.drawingTypes.points:t=this.handlePoints(e);break;case vr.drawingTypes.line:t=this.handleLine(e);break;case vr.drawingTypes.lines:t=this.handleLines(e);break;case vr.drawingTypes.polyline:t=this.handlePolyline(e);break;case vr.drawingTypes.polylines:t=this.handlePolylines(e);break;case vr.drawingTypes.verbCurve:t=this.handleVerbCurve(e);break;case vr.drawingTypes.verbCurves:t=this.handleVerbCurves(e);break;case vr.drawingTypes.verbSurface:t=this.handleVerbSurface(e);break;case vr.drawingTypes.verbSurfaces:t=this.handleVerbSurfaces(e);break;case vr.drawingTypes.tag:t=this.handleTag(e);break;case vr.drawingTypes.tags:t=this.handleTags(e);break;case vr.drawingTypes.node:t=this.handleNode(e);break;case vr.drawingTypes.nodes:t=this.handleNodes(e)}return t}drawAnyNoReturn(e){this.drawAny(e)}drawAny(e){let t;const r=e.entity;return e.babylonMesh||r instanceof q.Mesh?t=this.updateAny(e):this.detectLine(r)?t=this.handleLine(e):this.detectPoint(r)?t=this.handlePoint(e):this.detectPolyline(r)?t=this.handlePolyline(e):this.detectNode(r)?t=this.handleNode(e):this.detectVerbCurve(r)?t=this.handleVerbCurve(e):this.detectVerbSurface(r)?t=this.handleVerbSurface(e):this.detectPolylines(r)?t=this.handlePolylines(e):this.detectLines(r)?t=this.handleLines(e):this.detectPoints(r)?t=this.handlePoints(e):this.detectNodes(r)?t=this.handleNodes(e):this.detectVerbCurves(r)?t=this.handleVerbCurves(e):this.detectVerbSurfaces(r)?t=this.handleVerbSurfaces(e):this.detectTag(r)?t=this.handleTag(e):this.detectTags(r)&&(t=this.handleTags(e)),t}drawGridMeshNoReturn(e){this.drawGridMesh(e)}drawGridMesh(e){try{const t=new Vt.GridMaterial(`groundMaterial${Math.random()}`,this.context.scene);t.majorUnitFrequency=e.majorUnitFrequency,t.minorUnitVisibility=e.minorUnitVisibility,t.gridRatio=e.gridRatio,t.backFaceCulling=e.backFaceCulling,t.mainColor=q.Color3.FromHexString(e.mainColor),t.lineColor=q.Color3.FromHexString(e.secondaryColor),t.opacity=e.opacity;const r=q.MeshBuilder.CreateGround(`bitbybit-ground${Math.random()}`,{width:e.width,height:e.height,subdivisions:e.subdivisions,updatable:!1},this.context.scene);return r.material=t,r}catch(e){return console.log("Error happened: ",e),new q.Mesh("error-ground",this.context.scene)}}optionsSimple(e){return e}optionsOcctShape(e){return e}optionsOcctShapeSimple(e){return e}optionsOcctShapeMaterial(e){return e}optionsManifoldShapeMaterial(e){return e}optionsBabylonNode(e){return e}handleTags(e){const t=e.options?e.options:{updatable:!1},r=this.tag.drawTags(Object.assign({tagsVariable:e.babylonMesh,tags:e.entity},t));return r.metadata={type:vr.drawingTypes.tags,options:t},r}handleTag(e){let t=e.options?e.options:{updatable:!1};!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.tag.drawTag(Object.assign({tagVariable:e.babylonMesh,tag:e.entity},t));return r.metadata={type:vr.drawingTypes.tag,options:t},r}handleVerbSurfaces(e){let t=e.options?e.options:this.defaultBasicOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawSurfacesMultiColour(Object.assign({surfacesMesh:e.babylonMesh,surfaces:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.verbSurfaces,t,r),r}handleVerbCurves(e){let t=e.options?e.options:this.defaultBasicOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawCurves(Object.assign({curvesMesh:e.babylonMesh,curves:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.verbCurves,t,r),r}handleNodes(e){let t=e.options?e.options:this.defaultNodeOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=e.entity;return this.node.drawNodes(Object.assign({nodes:e.entity},t)),this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.nodes,t,r),r}handlePoints(e){let t=e.options?e.options:this.defaultBasicOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawPoints(Object.assign({pointsMesh:e.babylonMesh,points:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.points,t,r),r}handleLines(e){let t=e.options?e.options:this.defaultPolylineOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=e.entity,i=[];r&&r[0]&&r[0].start?r.forEach((e=>{i.push([e.start,e.end])})):r.forEach((e=>{i.push(e)}));const o=this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:e.babylonMesh,polylines:i.map((e=>({points:[...e]})))},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.lines,t,o),o}handlePolylines(e){let t=e.options?e.options:this.defaultPolylineOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:e.babylonMesh,polylines:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.polylines,t,r),r}handleVerbSurface(e){let t=e.options?e.options:this.defaultBasicOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawSurface(Object.assign({surfaceMesh:e.babylonMesh,surface:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.verbSurface,t,r),r}handleVerbCurve(e){let t=e.options?e.options:this.defaultPolylineOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawCurve(Object.assign({curveMesh:e.babylonMesh,curve:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.verbCurve,t,r),r}handleNode(e){let t=e.options?e.options:this.defaultNodeOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=e.entity;return this.node.drawNode(Object.assign({node:e.entity},t)),this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.node,t,r),r}handlePolyline(e){let t=e.options?e.options:this.defaultPolylineOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawPolylineClose(Object.assign({polylineMesh:e.babylonMesh,polyline:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.polyline,t,r),r}handlePoint(e){let t=e.options?e.options:this.defaultBasicOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=this.drawHelper.drawPoint(Object.assign({pointMesh:e.babylonMesh,point:e.entity},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.point,t,r),r}handleLine(e){let t=e.options?e.options:this.defaultPolylineOptions;!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options);const r=e.entity,i=[];r&&r.start?i.push(r.start,r.end):i.push(...r);const o=this.drawHelper.drawPolylinesWithColours(Object.assign({polylinesMesh:e.babylonMesh,polylines:[{points:i}]},t));return this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.line,t,o),o}handleJscadMeshes(e){let t=e.options?e.options:this.defaultPolylineOptions;return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawSolidOrPolygonMeshes(Object.assign({jscadMesh:e.babylonMesh,meshes:e.entity},t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.jscadMeshes,t,e),e)))}handleManifoldShape(e){let t=e.options?e.options:new Sr.DrawManifoldOrCrossSectionDto(e.entity);return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawManifoldOrCrossSection(Object.assign(Object.assign({manifoldOrCrossSection:e.entity},new vr.DrawManifoldOrCrossSectionOptions),t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.manifold,t,e),e)))}handleManifoldShapes(e){let t=e.options?e.options:new Sr.DrawManifoldOrCrossSectionDto(e.entity);return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawManifoldsOrCrossSections(Object.assign(Object.assign({manifoldsOrCrossSections:e.entity},new Sr.DrawManifoldOrCrossSectionDto),t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.manifold,t,e),e)))}handleOcctShape(e){let t=e.options?e.options:new et.DrawShapeDto(e.entity);return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawShape(Object.assign(Object.assign({shape:e.entity},new vr.DrawOcctShapeOptions),t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.occt,t,e),e)))}handleOcctShapes(e){let t=e.options?e.options:new et.DrawShapeDto(e.entity);return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawShapes(Object.assign(Object.assign({shapes:e.entity},new vr.DrawOcctShapeOptions),t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.occt,t,e),e)))}handleJscadMesh(e){let t=e.options?e.options:this.defaultBasicOptions;return!e.options&&e.babylonMesh&&e.babylonMesh.metadata.options&&(t=e.babylonMesh.metadata.options),this.drawHelper.drawSolidOrPolygonMesh(Object.assign({jscadMesh:e.babylonMesh,mesh:e.entity},t)).then((e=>(this.applyGlobalSettingsAndMetadataAndShadowCasting(vr.drawingTypes.jscadMesh,t,e),e)))}applyGlobalSettingsAndMetadataAndShadowCasting(e,t,r){if(r){const i={type:e,options:t},o=this.context.scene.metadata.shadowGenerators;r.isPickable=!1,r.getChildMeshes().forEach((e=>{e.isPickable=!1}));let n=!0;r.metadata&&!1===r.metadata.shadows&&(n=!1),n&&o.length>0&&(r.receiveShadows=!0,o.forEach((e=>e.addShadowCaster(r))),r.getChildMeshes().forEach((e=>{e.receiveShadows=!0,o.forEach((t=>t.addShadowCaster(e)))}))),r.metadata=r.metadata?Object.assign(Object.assign({},r.metadata),i):i}}}class Li extends Wi{getSamplingMode(e){switch(e){case tr.samplingModeEnum.nearest:return q.Texture.NEAREST_SAMPLINGMODE;case tr.samplingModeEnum.bilinear:return q.Texture.BILINEAR_SAMPLINGMODE;case tr.samplingModeEnum.trilinear:return q.Texture.TRILINEAR_SAMPLINGMODE;default:return q.Texture.NEAREST_SAMPLINGMODE}}}var Fi=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ui extends Ii{constructor(e,t,r,i,o,n){super(r),this.context=e,this.solidText=t,this.vector=r,this.jscadWorkerManager=i,this.manifoldWorkerManager=o,this.occWorkerManager=n,this.usedMaterials=[]}createOrUpdateSurfacesMesh(e,t,r,i,o,n){const s=()=>{const i=e.pop(),o=new q.VertexData;o.positions=i.positions,o.indices=i.indices,o.normals=i.normals,o.uvs=i.uvs;const n=[];e.forEach((e=>{const t=new q.VertexData;t.positions=e.positions,t.indices=e.indices,t.normals=e.normals,e.uvs&&(t.uvs=e.uvs),n.push(t)})),o.merge(n),o.applyToMesh(t,r)};if(t&&r)t.dispose(),s(),t.flipFaces(!1);else{let e=null;o&&(e=this.context.scene),t=new q.Mesh(`surface${Math.random()}`,e),s(),t.flipFaces(!1),i&&(t.material=i)}return i&&(t.material=i),n&&(t.isVisible=!1),t.isPickable=!1,t}edgesRendering(e,t,r,i){e.enableEdgesRendering(),e.edgesWidth=t;const o=Array.isArray(i)?q.Color3.FromHexString(i[0]):q.Color3.FromHexString(i);e.color=o,e.edgesColor=new q.Color4(o.r,o.g,o.b,r)}drawLines(e){const t=[],r=[];return e.lines.forEach(((i,o)=>{let n;t.push([new q.Vector3(i.start[0],i.start[1],i.start[2]),new q.Vector3(i.end[0],i.end[1],i.end[2])]),n=Array.isArray(e.colours)&&e.colours.length===e.lines.length?q.Color3.FromHexString(e.colours[o]):Array.isArray(e.colours)?q.Color3.FromHexString(e.colours[0]):q.Color3.FromHexString(e.colours),r.push([new q.Color4(n.r,n.g,n.b,e.opacity),new q.Color4(n.r,n.g,n.b,e.opacity)])})),e.linesMesh&&e.updatable?e.linesMesh.getTotalVertices()/2===t.length?e.linesMesh=q.MeshBuilder.CreateLineSystem(null,{lines:t,instance:e.linesMesh,colors:r,useVertexAlpha:!0,updatable:e.updatable},null):(e.linesMesh.dispose(),e.linesMesh=this.createLineSystemMesh(e.updatable,t,r)):e.linesMesh=this.createLineSystemMesh(e.updatable,t,r),this.edgesRendering(e.linesMesh,e.size,e.opacity,e.colours),e.linesMesh}drawPolylineClose(e){const t=e.polyline.points;return e.polyline.isClosed&&t.push(t[0]),this.drawPolyline(e.polylineMesh,t,e.updatable,e.size,e.opacity,e.colours)}drawCurve(e){const t=e.curve.tessellate();return this.drawPolyline(e.curveMesh,t,e.updatable,e.size,e.opacity,e.colours)}drawSurface(e){const t=e.surface.tessellate(),r={positions:[],indices:[],normals:[]};let i=0;t.faces.forEach((e=>{i=this.parseFaces(e,t,r,i)}));const o=new q.PBRMetallicRoughnessMaterial("pbr"+Math.random(),this.context.scene);return o.baseColor=q.Color3.FromHexString(Array.isArray(e.colours)?e.colours[0]:e.colours),o.metallic=1,o.roughness=.6,o.alpha=e.opacity,o.alphaMode=1,o.backFaceCulling=!1,o.doubleSided=!0,this.createOrUpdateSurfacesMesh([r],e.surfaceMesh,e.updatable,o,!0,e.hidden)}drawSurfaces(e){const t=[];e.surfaces.forEach((e=>{t.push(e.tessellate())}));const r={positions:[],indices:[],normals:[]};let i=0;t.forEach((e=>{e.faces.forEach((t=>{i=this.parseFaces(t,e,r,i)}))}));const o=new q.PBRMetallicRoughnessMaterial("pbr"+Math.random(),this.context.scene);return o.baseColor=q.Color3.FromHexString(Array.isArray(e.colours)?e.colours[0]:e.colours),o.metallic=1,o.roughness=.6,o.alpha=e.opacity,o.alphaMode=1,o.backFaceCulling=!0,o.doubleSided=!1,this.createOrUpdateSurfacesMesh([r],e.surfacesMesh,e.updatable,o,!0,e.hidden)}drawSurfacesMultiColour(e){return e.surfacesMesh&&e.updatable&&e.surfacesMesh.getChildren().forEach((e=>e.dispose())),e.surfacesMesh=new q.Mesh(`ColouredSurfaces${Math.random()}`,this.context.scene),Array.isArray(e.colours)?e.surfaces.forEach(((t,r)=>{const i=this.drawSurface({surface:t,colours:e.colours[r]?e.colours[r]:e.colours[0],updatable:e.updatable,opacity:e.opacity,hidden:e.hidden});e.surfacesMesh.addChild(i)})):e.surfaces.forEach(((t,r)=>{const i=this.drawSurface({surface:t,colours:e.colours,updatable:e.updatable,opacity:e.opacity,hidden:e.hidden});e.surfacesMesh.addChild(i)})),e.surfacesMesh}drawCurves(e){const t=e.curves.map((e=>e.tessellate()));return this.drawPolylines(e.curvesMesh,t,e.updatable,e.size,e.opacity,e.colours)}drawPolyline(e,t,r,i,o,n){return this.drawPolylines(e,[t],r,i,o,n)}drawPolylinesWithColours(e){let t=e.colours;const r=e.polylines.map(((e,r)=>{const i=e.points;return e.isClosed&&i.push(i[0]),e.color&&(Array.isArray(t)||(t=[]),Array.isArray(e.color)?t[r]=q.Color3.FromArray(e.color).toHexString():t[r]=e.color),i}));return this.drawPolylines(e.polylinesMesh,r,e.updatable,e.size,e.opacity,t)}drawPolylines(e,t,r,i,o,n){var s;const a=[];if(t&&t.length>0){t.forEach((e=>{const t=e.map((e=>2===e.length?[e[0],e[1],0]:e));a.push(t.flat())}));const c=i/100,h=Array.isArray(n)?q.Color3.FromHexString(n[0]):q.Color3.FromHexString(n);if(e&&r){if(!(null===(s=null==e?void 0:e.metadata)||void 0===s?void 0:s.linesForRenderLengths.some(((e,t)=>e!==a[t].length))))return e.setPoints(a),e;e.dispose(),(e=this.createGreasedPolylines(r,a,c,h,o)).metadata={linesForRenderLengths:a.map((e=>e.length))}}else(e=this.createGreasedPolylines(r,a,c,h,o)).metadata={linesForRenderLengths:a.map((e=>e.length))};return e}}createGreasedPolylines(e,t,r,i,o){const n=q.CreateGreasedLine(`lineSystem${Math.random()}`,{points:t,updatable:e},{width:r,materialType:q.GreasedLineMeshMaterialType.MATERIAL_TYPE_PBR,color:i,createAndAssignMaterial:!0},this.context.scene);return n.material.albedoColor=i,n.material.alpha=o,n}localAxes(e,t,r,i,o){const n=q.MeshBuilder.CreateLines("pilot_local_axisX"+Math.random(),{points:[q.Vector3.Zero(),new q.Vector3(e,0,0),new q.Vector3(.95*e,.05*e,0),new q.Vector3(e,0,0),new q.Vector3(.95*e,-.05*e,0)]},t),s=q.Color3.FromHexString(r);n.color=s;const a=q.MeshBuilder.CreateLines("pilot_local_axisY"+Math.random(),{points:[q.Vector3.Zero(),new q.Vector3(0,e,0),new q.Vector3(-.05*e,.95*e,0),new q.Vector3(0,e,0),new q.Vector3(.05*e,.95*e,0)]},t),c=q.Color3.FromHexString(i);a.color=c;const h=q.MeshBuilder.CreateLines("pilot_local_axisZ"+Math.random(),{points:[q.Vector3.Zero(),new q.Vector3(0,0,e),new q.Vector3(0,-.05*e,.95*e),new q.Vector3(0,0,e),new q.Vector3(0,.05*e,.95*e)]},t),l=q.Color3.FromHexString(o);h.color=l;const u=new q.Mesh("local_origin"+Math.random(),t);return u.isVisible=!1,n.parent=u,a.parent=u,h.parent=u,u}drawPoint(e){const t=[e.point];let r=[];return r=Array.isArray(e.colours)?e.colours:[e.colours],e.pointMesh&&e.updatable?this.updatePointsInstances(e.pointMesh,t):e.pointMesh=this.createPointSpheresMesh(`poinsMesh${Math.random()}`,t,r,e.opacity,e.size,e.updatable),e.pointMesh}drawPoints(e){const t=e.points;let r=[];return Array.isArray(e.colours)?(r=e.colours,1===r.length&&(r=e.points.map((()=>r[0])))):r=e.points.map((()=>e.colours)),e.pointsMesh&&e.updatable?e.pointsMesh.getChildMeshes().length===t.length?this.updatePointsInstances(e.pointsMesh,t):(e.pointsMesh.dispose(),e.pointsMesh=this.createPointSpheresMesh(`pointsMesh${Math.random()}`,t,r,e.opacity,e.size,e.updatable)):e.pointsMesh=this.createPointSpheresMesh(`pointsMesh${Math.random()}`,t,r,e.opacity,e.size,e.updatable),e.pointsMesh}updatePointsInstances(e,t){const r=e.getChildMeshes(),i={};t.forEach(((e,t)=>{i[t]=new q.Vector3(e[0],e[1],e[2])})),r.forEach((e=>{e.position=i[e.metadata.index]}))}createPointSpheresMesh(e,t,r,i,o,n){const s=t.map(((e,t)=>({position:e,color:r[t],index:t}))),a=Array.from(new Set(r)),c=a.map(((e,t)=>{const r=new q.StandardMaterial(`mat${Math.random()}`,this.context.scene);r.disableLighting=!0,r.emissiveColor=q.Color3.FromHexString(e),r.alpha=i;const o=s.filter((t=>t.color===e));return{hex:a,material:r,positions:o}})),h=new q.Mesh(e,this.context.scene);return c.forEach((e=>{const t=e.positions.length>1e3?1:6;let r;r=e.positions.length<1e4?q.MeshBuilder.CreateSphere(`point${Math.random()}`,{diameter:o,segments:t,updatable:n},this.context.scene):q.MeshBuilder.CreateBox(`point${Math.random()}`,{size:o,updatable:n},this.context.scene),r.material=e.material,r.isVisible=!1,e.positions.forEach(((e,t)=>{const i=r.createInstance(`point-${t}-${Math.random()}`);i.position=new q.Vector3(e.position[0],e.position[1],e.position[2]),i.metadata={index:e.index},i.parent=h,i.isVisible=!0}))})),h}drawSolidOrPolygonMesh(e){return Fi(this,void 0,void 0,(function*(){const t=yield this.jscadWorkerManager.genericCallToWorkerPromise("shapeToMesh",e);let r,i;r=e.jscadMesh&&e.updatable?e.jscadMesh:new q.Mesh(`jscadMesh${Math.random()}`,this.context.scene),i=e.mesh.color&&e.mesh.color.length>0?q.Color3.FromArray(e.mesh.color).toHexString():Array.isArray(e.colours)?e.colours[0]:e.colours;const o=this.makeMesh(Object.assign(Object.assign({},e),{colour:i}),r,t);return e.jscadMesh=o,o}))}makeMesh(e,t,r){this.createMesh(r.positions,r.indices,r.normals,t,r.transforms,e.updatable),t.material=new q.PBRMetallicRoughnessMaterial(`jscadMaterial${Math.random()}`,this.context.scene),t.flipFaces(!1);const i=t.material;return i.baseColor=q.Color3.FromHexString(e.colour),i.metallic=1,i.roughness=.6,i.alpha=e.opacity,i.alphaMode=1,i.backFaceCulling=!0,i.zOffset=0,t.isPickable=!1,e.hidden&&(t.isVisible=!1),t}drawSolidOrPolygonMeshes(e){return Fi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapesToMeshes",e).then((t=>{let r;e.jscadMesh&&e.updatable?(r=e.jscadMesh,r.getChildMeshes().forEach((e=>{e.dispose(),r.removeChild(e)}))):r=new q.Mesh("local_origin"+Math.random(),this.context.scene),r.isVisible=!1;const i=Array.isArray(e.colours)&&e.colours.length===t.length,o=Array.isArray(e.colours);return t.map(((t,n)=>{const s=new q.Mesh(`jscadMesh${Math.random()}`,this.context.scene);let a;a=t.color?q.Color3.FromArray(t.color).toHexString():i?e.colours[n]:o?e.colours[0]:e.colours,this.makeMesh(Object.assign(Object.assign({},e),{colour:a}),s,t).parent=r})),e.jscadMesh=r,r}))}))}drawPath(e){return Fi(this,void 0,void 0,(function*(){return new Promise((t=>{if(e.path.points&&e.path.isClosed){const t=e.path.points[0];e.path.points.push([t[0],0,t[1]])}let r=e.colour;e.path.color&&(r=q.Color3.FromArray(e.path.color).toHexString()),t(this.drawPolyline(e.pathMesh,e.path.points,e.updatable,e.width,e.opacity,r))}))}))}drawManifoldsOrCrossSections(e){return Fi(this,void 0,void 0,(function*(){const t=this.deleteFaceMaterialForWorker(e),r=(yield this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldsOrCrossSections",e)).map((e=>this.handleDecomposedManifold(e,t))),i=new q.Mesh("manifoldMeshContainer"+Math.random(),this.context.scene);return r.filter((e=>void 0!==e)).forEach((e=>{e.parent=i})),i}))}drawManifoldOrCrossSection(e){return Fi(this,void 0,void 0,(function*(){const t=this.deleteFaceMaterialForWorker(e),r=yield this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldOrCrossSection",e);return this.handleDecomposedManifold(r,t)}))}drawShape(e){return Fi(this,void 0,void 0,(function*(){const t=this.deleteFaceMaterialForWorker(e),r=yield this.occWorkerManager.genericCallToWorkerPromise("shapeToMesh",e);return this.handleDecomposedMesh(e,r,t)}))}drawShapes(e){return Fi(this,void 0,void 0,(function*(){const t=this.deleteFaceMaterialForWorker(e),r=yield this.occWorkerManager.genericCallToWorkerPromise("shapesToMeshes",e),i=yield Promise.all(r.map((r=>Fi(this,void 0,void 0,(function*(){return this.handleDecomposedMesh(e,r,t)}))))),o=new q.Mesh("shapesMeshContainer"+Math.random(),this.context.scene);return i.forEach((e=>{e.parent=o})),o}))}handleDecomposedMesh(e,t,r){return Fi(this,void 0,void 0,(function*(){const i=new q.Mesh("brepMesh"+Math.random(),this.context.scene);let o;if(i.isVisible=!1,e.drawFaces&&t&&t.faceList&&t.faceList.length){let n;if(r.faceMaterial)n=r.faceMaterial;else{const t=Array.isArray(e.faceColour)?e.faceColour[0]:e.faceColour,r=e.faceOpacity,i=e.drawEdges?2:0,o=this.usedMaterials.find((e=>e.sceneId===this.context.scene.uid&&e.hex===t&&e.alpha===r&&e.zOffset===i));if(this.usedMaterials=this.usedMaterials.filter((e=>e.sceneId===this.context.scene.uid)),o)n=o.material;else{const e=new q.PBRMetallicRoughnessMaterial("pbr"+Math.random(),this.context.scene);e.baseColor=q.Color3.FromHexString(t),e.metallic=1,e.roughness=.6,e.alpha=r,e.alphaMode=1,e.backFaceCulling=!0,e.doubleSided=!1,e.zOffset=i,this.usedMaterials.push({sceneId:this.context.scene.uid,hex:t,alpha:r,zOffset:i,material:e}),n=e}}const s=t.faceList.map((e=>({positions:e.vertex_coord,normals:e.normal_coord,indices:e.tri_indexes,uvs:e.uvs})));this.createOrUpdateSurfacesMesh(s,o,!1,n,!0,!1).parent=i}if(e.drawEdges&&t&&t.edgeList&&t.edgeList.length){const r=[];t.edgeList.forEach((e=>{const t=e.vertex_coord.filter((e=>void 0!==e));r.push(t)})),this.drawPolylines(o,r,!1,e.edgeWidth,e.edgeOpacity,e.edgeColour).parent=i}if(e.drawVertices&&t&&t.pointsList&&t.pointsList.length&&(this.drawPoints({pointsMesh:o,points:t.pointsList,opacity:1,size:e.vertexSize,colours:e.vertexColour,updatable:!1}).parent=i),e.drawEdgeIndexes){const r=t.edgeList.map((t=>Fi(this,void 0,void 0,(function*(){let r=t.middle_point;void 0===r&&(r=this.computeEdgeMiddlePos(t));const i=new wr.TextDto;return i.text=`${t.edge_index+1}`,i.height=e.edgeIndexHeight,i.lineSpacing=1.5,(yield this.solidText.createVectorText(i)).map((e=>e.map((e=>[e[0],e[1]+.05,0])).map((e=>this.vector.add({first:e,second:r})))))})))),o=yield Promise.all(r),n=this.drawPolylines(null,o.flat(),!1,.2,1,e.edgeIndexColour);n.parent=i,n.material.zOffset=-2}if(e.drawFaceIndexes){const r=t.faceList.map((t=>Fi(this,void 0,void 0,(function*(){let r=t.center_point;void 0===r&&(r=this.computeFaceMiddlePos(t.vertex_coord_vec));const i=new wr.TextDto;return i.text=`${t.face_index}`,i.height=e.faceIndexHeight,i.lineSpacing=1.5,(yield this.solidText.createVectorText(i)).map((e=>e.map((e=>[e[0],e[1]+.05,0])).map((e=>this.vector.add({first:e,second:r})))))})))),o=yield Promise.all(r),n=this.drawPolylines(null,o.flat(),!1,.2,1,e.faceIndexColour);n.parent=i,e.drawEdges&&(n.material.zOffset=-2)}return i}))}handleDecomposedManifold(e,t){if(e.vertProperties){const r=e;if(r.triVerts.length>0){const e=new q.Mesh(`manifoldMesh-${Math.random()}`,this.context.scene),i=new q.VertexData;i.indices=r.triVerts.length>65535?new Uint32Array(r.triVerts):new Uint16Array(r.triVerts);for(let e=0;e<r.triVerts.length;e+=3)i.indices[e]=r.triVerts[e+2],i.indices[e+1]=r.triVerts[e+1],i.indices[e+2]=r.triVerts[e];const o=r.vertProperties.length/r.numProp;let n=0;for(let e=0;e<1;e++){const e={stride:3,kind:"position"},t=new Float32Array(o*e.stride);for(let i=0;i<o;i++)for(let o=0;o<e.stride;o++)t[i*e.stride+o]=r.vertProperties[i*r.numProp+n+o];i.set(t,e.kind),n+=e.stride}if(t.computeNormals){const e=[];q.VertexData.ComputeNormals(i.positions,i.indices,e),i.normals=e}if(i.applyToMesh(e,!1),void 0===t.faceMaterial){const r=new q.PBRMetallicRoughnessMaterial("pbr"+Math.random(),this.context.scene);r.baseColor=q.Color3.FromHexString(t.faceColour),r.metallic=1,r.roughness=.6,r.alpha=t.faceOpacity,r.alphaMode=1,r.backFaceCulling=!0,r.doubleSided=!1,e.material=r}else e.material=t.faceMaterial;return e}}else if(e.length>0){const r=new q.Mesh(`manifoldCrossSection-${Math.random()}`,this.context.scene),i=e.map((e=>({points:e.map((e=>[e[0],e[1],0])),isClosed:!0})));return this.drawPolylinesWithColours({polylinesMesh:void 0,polylines:i,updatable:!1,size:t.crossSectionWidth,opacity:t.crossSectionOpacity,colours:t.crossSectionColour}).parent=r,r}}createLineSystemMesh(e,t,r){return q.MeshBuilder.CreateLineSystem(`lines${Math.random()}`,{lines:t,colors:r,useVertexAlpha:!0,updatable:e},this.context.scene)}createMesh(e,t,r,i,o,n){const s=new q.VertexData;s.positions=e,s.indices=t,q.VertexData.ComputeNormals(e,t,r,{useRightHandedSystem:!0}),s.normals=r,s.applyToMesh(i,n),i.setPreTransformMatrix(q.Matrix.FromArray(o))}parseFaces(e,t,r,i){return e.reverse().forEach((e=>{const o=t.normals[e];r.normals.push(o[0],o[1],o[2]);const n=t.points[e];r.positions.push(n[0],n[1],n[2]),r.indices.push(i),i++})),i}deleteFaceMaterialForWorker(e){const t=Object.assign({},e);return e.faceMaterial&&delete e.faceMaterial,t}}class zi{static get version(){return"1.3.9"}static toString(){return"JavaScript Expression Parser (JSEP) v"+zi.version}static addUnaryOp(e){return zi.max_unop_len=Math.max(e.length,zi.max_unop_len),zi.unary_ops[e]=1,zi}static addBinaryOp(e,t,r){return zi.max_binop_len=Math.max(e.length,zi.max_binop_len),zi.binary_ops[e]=t,r?zi.right_associative.add(e):zi.right_associative.delete(e),zi}static addIdentifierChar(e){return zi.additional_identifier_chars.add(e),zi}static addLiteral(e,t){return zi.literals[e]=t,zi}static removeUnaryOp(e){return delete zi.unary_ops[e],e.length===zi.max_unop_len&&(zi.max_unop_len=zi.getMaxKeyLen(zi.unary_ops)),zi}static removeAllUnaryOps(){return zi.unary_ops={},zi.max_unop_len=0,zi}static removeIdentifierChar(e){return zi.additional_identifier_chars.delete(e),zi}static removeBinaryOp(e){return delete zi.binary_ops[e],e.length===zi.max_binop_len&&(zi.max_binop_len=zi.getMaxKeyLen(zi.binary_ops)),zi.right_associative.delete(e),zi}static removeAllBinaryOps(){return zi.binary_ops={},zi.max_binop_len=0,zi}static removeLiteral(e){return delete zi.literals[e],zi}static removeAllLiterals(){return zi.literals={},zi}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new zi(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map((e=>e.length)))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return zi.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!zi.binary_ops[String.fromCharCode(e)]||zi.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return zi.isIdentifierStart(e)||zi.isDecimalDigit(e)}throwError(e){const t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(zi.hooks[e]){const r={context:this,node:t};return zi.hooks.run(e,r),r.node}return t}searchHook(e){if(zi.hooks[e]){const t={context:this};return zi.hooks[e].find((function(e){return e.call(t.context,t),t.node})),t.node}}gobbleSpaces(){let e=this.code;for(;e===zi.SPACE_CODE||e===zi.TAB_CODE||e===zi.LF_CODE||e===zi.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:zi.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,r,i=[];for(;this.index<this.expr.length;)if(t=this.code,t===zi.SEMCOL_CODE||t===zi.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())i.push(r);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,zi.max_binop_len),t=e.length;for(;t>0;){if(zi.binary_ops.hasOwnProperty(e)&&(!zi.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!zi.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,r,i,o,n,s,a,c;if(n=this.gobbleToken(),!n)return n;if(t=this.gobbleBinaryOp(),!t)return n;for(o={value:t,prec:zi.binaryPrecedence(t),right_a:zi.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),i=[n,o,s];t=this.gobbleBinaryOp();){if(r=zi.binaryPrecedence(t),0===r){this.index-=t.length;break}o={value:t,prec:r,right_a:zi.right_associative.has(t)},c=t;const a=e=>o.right_a&&e.right_a?r>e.prec:r<=e.prec;for(;i.length>2&&a(i[i.length-2]);)s=i.pop(),t=i.pop().value,n=i.pop(),e={type:zi.BINARY_EXP,operator:t,left:n,right:s},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),i.push(o,e)}for(a=i.length-1,e=i[a];a>1;)e={type:zi.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:e},a-=2;return e}gobbleToken(){let e,t,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,zi.isDecimalDigit(e)||e===zi.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===zi.SQUOTE_CODE||e===zi.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===zi.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,zi.max_unop_len),r=t.length;r>0;){if(zi.unary_ops.hasOwnProperty(t)&&(!zi.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!zi.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=r;const e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:zi.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--r)}zi.isIdentifierStart(e)?(i=this.gobbleIdentifier(),zi.literals.hasOwnProperty(i.name)?i={type:zi.LITERAL,value:zi.literals[i.name],raw:i.name}:i.name===zi.this_str&&(i={type:zi.THIS_EXP})):e===zi.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===zi.PERIOD_CODE||t===zi.OBRACK_CODE||t===zi.OPAREN_CODE||t===zi.QUMARK_CODE;){let r;if(t===zi.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==zi.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===zi.OBRACK_CODE?((e={type:zi.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),t=this.code,t!==zi.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===zi.OPAREN_CODE?e={type:zi.CALL_EXP,arguments:this.gobbleArguments(zi.CPAREN_CODE),callee:e}:(t===zi.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),e={type:zi.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),r&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,r="";for(;zi.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(this.code===zi.PERIOD_CODE)for(r+=this.expr.charAt(this.index++);zi.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(r+=this.expr.charAt(this.index++),e=this.char,"+"!==e&&"-"!==e||(r+=this.expr.charAt(this.index++));zi.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);zi.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+r+this.char+")")}return t=this.code,zi.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+r+this.char+")"):(t===zi.PERIOD_CODE||1===r.length&&r.charCodeAt(0)===zi.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:zi.LITERAL,value:parseFloat(r),raw:r}}gobbleStringLiteral(){let e="";const t=this.index,r=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===r){i=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:zi.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(zi.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,zi.isIdentifierPart(e));)this.index++;return{type:zi.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){const t=[];let r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===e){r=!0,this.index++,e===zi.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(o===zi.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===zi.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===zi.CBRACK_CODE)for(let e=t.length;e<i;e++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{const e=this.gobbleExpression();e&&e.type!==zi.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return r||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(zi.CPAREN_CODE);if(this.code===zi.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:zi.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:zi.ARRAY_EXP,elements:this.gobbleArguments(zi.CBRACK_CODE)}}}const Ni=new class{add(e,t,r){if("string"!=typeof arguments[0])for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else(Array.isArray(e)?e:[e]).forEach((function(e){this[e]=this[e]||[],t&&this[e][r?"unshift":"push"](t)}),this)}run(e,t){this[e]=this[e]||[],this[e].forEach((function(e){e.call(t&&t.context?t.context:t,t)}))}};Object.assign(zi,{hooks:Ni,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)}))}}(zi),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),zi.max_unop_len=zi.getMaxKeyLen(zi.unary_ops),zi.max_binop_len=zi.getMaxKeyLen(zi.binary_ops);const Gi=e=>new zi(e).parse(),Vi=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(zi).filter((e=>!Vi.includes(e)&&void 0===Gi[e])).forEach((e=>{Gi[e]=zi[e]})),Gi.Jsep=zi;var Hi={name:"ternary",init(e){e.hooks.add("after-expression",(function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;const r=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:r,consequent:i,alternate:o},r.operator&&e.binary_ops[r.operator]<=.9){let i=r;for(;i.right.operator&&e.binary_ops[i.right.operator]<=.9;)i=i.right;t.node.test=i.right,i.right=t.node,t.node=r}}else this.throwError("Expected :")}}))}};Gi.plugins.register(Hi);var ji={name:"regex",init(e){e.hooks.add("gobble-token",(function(t){if(47===this.code){const r=++this.index;let i=!1;for(;this.index<this.expr.length;){if(47===this.code&&!i){const i=this.expr.slice(r,this.index);let o,n="";for(;++this.index<this.expr.length;){const e=this.code;if(!(e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57))break;n+=this.char}try{o=new RegExp(i,n)}catch(e){this.throwError(e.message)}return t.node={type:e.LITERAL,value:o,raw:this.expr.slice(r-1,this.index)},t.node=this.gobbleTokenProperty(t.node),t.node}this.code===e.OBRACK_CODE?i=!0:i&&this.code===e.CBRACK_CODE&&(i=!1),this.index+=92===this.code?2:1}this.throwError("Unclosed Regex")}}))}};const qi={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|="]),updateOperators:[43,45],assignmentPrecedence:.9,init(e){const t=[e.IDENTIFIER,e.MEMBER_EXP];function r(e){qi.assignmentOperators.has(e.operator)?(e.type="AssignmentExpression",r(e.left),r(e.right)):e.operator||Object.values(e).forEach((e=>{e&&"object"==typeof e&&r(e)}))}qi.assignmentOperators.forEach((t=>e.addBinaryOp(t,qi.assignmentPrecedence,!0))),e.hooks.add("gobble-token",(function(e){const r=this.code;qi.updateOperators.some((e=>e===r&&e===this.expr.charCodeAt(this.index+1)))&&(this.index+=2,e.node={type:"UpdateExpression",operator:43===r?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},e.node.argument&&t.includes(e.node.argument.type)||this.throwError(`Unexpected ${e.node.operator}`))})),e.hooks.add("after-token",(function(e){if(e.node){const r=this.code;qi.updateOperators.some((e=>e===r&&e===this.expr.charCodeAt(this.index+1)))&&(t.includes(e.node.type)||this.throwError(`Unexpected ${e.node.operator}`),this.index+=2,e.node={type:"UpdateExpression",operator:43===r?"++":"--",argument:e.node,prefix:!1})}})),e.hooks.add("after-expression",(function(e){e.node&&r(e.node)}))}};Gi.plugins.register(ji,qi),Gi.addUnaryOp("typeof"),Gi.addLiteral("null",null),Gi.addLiteral("undefined",void 0);const Zi={evalAst(e,t){switch(e.type){case"BinaryExpression":case"LogicalExpression":return Zi.evalBinaryExpression(e,t);case"Compound":return Zi.evalCompound(e,t);case"ConditionalExpression":return Zi.evalConditionalExpression(e,t);case"Identifier":return Zi.evalIdentifier(e,t);case"Literal":return Zi.evalLiteral(e,t);case"MemberExpression":return Zi.evalMemberExpression(e,t);case"UnaryExpression":return Zi.evalUnaryExpression(e,t);case"ArrayExpression":return Zi.evalArrayExpression(e,t);case"CallExpression":return Zi.evalCallExpression(e,t);case"AssignmentExpression":return Zi.evalAssignmentExpression(e,t);default:throw SyntaxError("Unexpected expression",e)}},evalBinaryExpression:(e,t)=>({"||":(e,t)=>e||t(),"&&":(e,t)=>e&&t(),"|":(e,t)=>e|t(),"^":(e,t)=>e^t(),"&":(e,t)=>e&t(),"==":(e,t)=>e==t(),"!=":(e,t)=>e!=t(),"===":(e,t)=>e===t(),"!==":(e,t)=>e!==t(),"<":(e,t)=>e<t(),">":(e,t)=>e>t(),"<=":(e,t)=>e<=t(),">=":(e,t)=>e>=t(),"<<":(e,t)=>e<<t(),">>":(e,t)=>e>>t(),">>>":(e,t)=>e>>>t(),"+":(e,t)=>e+t(),"-":(e,t)=>e-t(),"*":(e,t)=>e*t(),"/":(e,t)=>e/t(),"%":(e,t)=>e%t()}[e.operator](Zi.evalAst(e.left,t),(()=>Zi.evalAst(e.right,t)))),evalCompound(e,t){let r;for(let i=0;i<e.body.length;i++){"Identifier"===e.body[i].type&&["var","let","const"].includes(e.body[i].name)&&e.body[i+1]&&"AssignmentExpression"===e.body[i+1].type&&(i+=1);const o=e.body[i];r=Zi.evalAst(o,t)}return r},evalConditionalExpression:(e,t)=>Zi.evalAst(e.test,t)?Zi.evalAst(e.consequent,t):Zi.evalAst(e.alternate,t),evalIdentifier(e,t){if(e.name in t)return t[e.name];throw ReferenceError(`${e.name} is not defined`)},evalLiteral:e=>e.value,evalMemberExpression(e,t){if("Identifier"===e.property.type&&"constructor"===e.property.name||"Identifier"===e.object.type&&"constructor"===e.object.name)throw new Error("'constructor' property is disabled");const r=e.computed?Zi.evalAst(e.property):e.property.name,i=Zi.evalAst(e.object,t),o=i[r];if("function"==typeof o){if(i===Function&&"bind"===r)throw new Error("Function.prototype.bind is disabled");if(i===Function&&("call"===r||"apply"===r))throw new Error("Function.prototype.call and Function.prototype.apply are disabled");return o===Function?o:o.bind(i)}return o},evalUnaryExpression:(e,t)=>({"-":e=>-Zi.evalAst(e,t),"!":e=>!Zi.evalAst(e,t),"~":e=>~Zi.evalAst(e,t),"+":e=>+Zi.evalAst(e,t),typeof:e=>typeof Zi.evalAst(e,t)}[e.operator](e.argument)),evalArrayExpression:(e,t)=>e.elements.map((e=>Zi.evalAst(e,t))),evalCallExpression(e,t){const r=e.arguments.map((e=>Zi.evalAst(e,t))),i=Zi.evalAst(e.callee,t);if(i===Function)throw new Error("Function constructor is disabled");return i(...r)},evalAssignmentExpression(e,t){if("Identifier"!==e.left.type)throw SyntaxError("Invalid left-hand side in assignment");const r=e.left.name;if("__proto__"===r)throw new Error("Assignment to __proto__ is disabled");const i=Zi.evalAst(e.right,t);return t[r]=i,t[r]}};function Yi(e,t){return(e=e.slice()).push(t),e}function Xi(e,t){return(t=t.slice()).unshift(e),t}class Ki extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function $i(e,t,r,i,o){if(!(this instanceof $i))try{return new $i(e,t,r,i,o)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(o=i,i=r,r=t,t=e,e=null);const n=e&&"object"==typeof e;if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!Object.hasOwn(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.eval=void 0===e.eval?"safe":e.eval,this.ignoreEvalErrors=void 0!==e.ignoreEvalErrors&&e.ignoreEvalErrors,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||i||null,this.otherTypeCallback=e.otherTypeCallback||o||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){const i={path:n?e.path:t};n?"json"in e&&(i.json=e.json):i.json=r;const o=this.evaluate(i);if(!o||"object"!=typeof o)throw new Ki(o);return o}}$i.prototype.evaluate=function(e,t,r,i){let o=this.parent,n=this.parentProperty,{flatten:s,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"==typeof e&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),s=Object.hasOwn(e,"flatten")?e.flatten:s,this.currResultType=Object.hasOwn(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Object.hasOwn(e,"sandbox")?e.sandbox:this.currSandbox,a=Object.hasOwn(e,"wrap")?e.wrap:a,this.currEval=Object.hasOwn(e,"eval")?e.eval:this.currEval,r=Object.hasOwn(e,"callback")?e.callback:r,this.currOtherTypeCallback=Object.hasOwn(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,o=Object.hasOwn(e,"parent")?e.parent:o,n=Object.hasOwn(e,"parentProperty")?e.parentProperty:n,e=e.path}if(o=o||null,n=n||null,Array.isArray(e)&&(e=$i.toPathString(e)),!e&&""!==e||!t)return;const c=$i.toPathArray(e);"$"===c[0]&&c.length>1&&c.shift(),this._hasParentSelector=null;const h=this._trace(c,t,["$"],o,n,r).filter((function(e){return e&&!e.isParentSelector}));return h.length?a||1!==h.length||h[0].hasArrExpr?h.reduce(((e,t)=>{const r=this._getPreferredOutput(t);return s&&Array.isArray(r)?e=e.concat(r):e.push(r),e}),[]):this._getPreferredOutput(h[0]):a?[]:void 0},$i.prototype._getPreferredOutput=function(e){const t=this.currResultType;switch(t){case"all":{const t=Array.isArray(e.path)?e.path:$i.toPathArray(e.path);return e.pointer=$i.toPointer(t),e.path="string"==typeof e.path?e.path:$i.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return $i.toPathString(e[t]);case"pointer":return $i.toPointer(e.path);default:throw new TypeError("Unknown result type")}},$i.prototype._handleCallback=function(e,t,r){if(t){const i=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:$i.toPathString(e.path),t(i,r,e)}},$i.prototype._trace=function(e,t,r,i,o,n,s,a){let c;if(!e.length)return c={path:r,value:t,parent:i,parentProperty:o,hasArrExpr:s},this._handleCallback(c,n,"value"),c;const h=e[0],l=e.slice(1),u=[];function d(e){Array.isArray(e)?e.forEach((e=>{u.push(e)})):u.push(e)}if(("string"!=typeof h||a)&&t&&Object.hasOwn(t,h))d(this._trace(l,t[h],Yi(r,h),t,h,n,s));else if("*"===h)this._walk(t,(e=>{d(this._trace(l,t[e],Yi(r,e),t,e,n,!0,!0))}));else if(".."===h)d(this._trace(l,t,r,i,o,n,s)),this._walk(t,(i=>{"object"==typeof t[i]&&d(this._trace(e.slice(),t[i],Yi(r,i),t,i,n,!0))}));else{if("^"===h)return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:l,isParentSelector:!0};if("~"===h)return c={path:Yi(r,h),value:o,parent:i,parentProperty:null},this._handleCallback(c,n,"property"),c;if("$"===h)d(this._trace(l,t,r,null,null,n,s));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(h))d(this._slice(h,l,t,r,i,o,n));else if(0===h.indexOf("?(")){if(!1===this.currEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const e=h.replace(/^\?\((.*?)\)$/u,"$1"),s=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(e);s?this._walk(t,(e=>{const a=[s[2]],c=s[1]?t[e][s[1]]:t[e];this._trace(a,c,r,i,o,n,!0).length>0&&d(this._trace(l,t[e],Yi(r,e),t,e,n,!0))})):this._walk(t,(s=>{this._eval(e,t[s],s,r,i,o)&&d(this._trace(l,t[s],Yi(r,s),t,s,n,!0))}))}else if("("===h[0]){if(!1===this.currEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(Xi(this._eval(h,t,r.at(-1),r.slice(0,-1),i,o),l),t,r,i,o,n,s))}else if("@"===h[0]){let e=!1;const s=h.slice(1,-2);switch(s){case"scalar":t&&["object","function"].includes(typeof t)||(e=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===s&&(e=!0);break;case"integer":!Number.isFinite(t)||t%1||(e=!0);break;case"number":Number.isFinite(t)&&(e=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(e=!0);break;case"object":t&&typeof t===s&&(e=!0);break;case"array":Array.isArray(t)&&(e=!0);break;case"other":e=this.currOtherTypeCallback(t,r,i,o);break;case"null":null===t&&(e=!0);break;default:throw new TypeError("Unknown value type "+s)}if(e)return c={path:r,value:t,parent:i,parentProperty:o},this._handleCallback(c,n,"value"),c}else if("`"===h[0]&&t&&Object.hasOwn(t,h.slice(1))){const e=h.slice(1);d(this._trace(l,t[e],Yi(r,e),t,e,n,s,!0))}else if(h.includes(",")){const e=h.split(",");for(const s of e)d(this._trace(Xi(s,l),t,r,i,o,n,!0))}else!a&&t&&Object.hasOwn(t,h)&&d(this._trace(l,t[h],Yi(r,h),t,h,n,s,!0))}if(this._hasParentSelector)for(let e=0;e<u.length;e++){const r=u[e];if(r&&r.isParentSelector){const a=this._trace(r.expr,t,r.path,i,o,n,s);if(Array.isArray(a)){u[e]=a[0];const t=a.length;for(let r=1;r<t;r++)e++,u.splice(e,0,a[r])}else u[e]=a}}return u},$i.prototype._walk=function(e,t){if(Array.isArray(e)){const r=e.length;for(let e=0;e<r;e++)t(e)}else e&&"object"==typeof e&&Object.keys(e).forEach((e=>{t(e)}))},$i.prototype._slice=function(e,t,r,i,o,n,s){if(!Array.isArray(r))return;const a=r.length,c=e.split(":"),h=c[2]&&Number.parseInt(c[2])||1;let l=c[0]&&Number.parseInt(c[0])||0,u=c[1]&&Number.parseInt(c[1])||a;l=l<0?Math.max(0,l+a):Math.min(a,l),u=u<0?Math.max(0,u+a):Math.min(a,u);const d=[];for(let e=l;e<u;e+=h)this._trace(Xi(e,t),r,i,o,n,s,!0).forEach((e=>{d.push(e)}));return d},$i.prototype._eval=function(e,t,r,i,o,n){this.currSandbox._$_parentProperty=n,this.currSandbox._$_parent=o,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;const s=e.includes("@path");s&&(this.currSandbox._$_path=$i.toPathString(i.concat([r])));const a=this.currEval+"Script:"+e;if(!$i.cache[a]){let t=e.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(s&&(t=t.replaceAll("@path","_$_path")),"safe"===this.currEval||!0===this.currEval||void 0===this.currEval)$i.cache[a]=new this.safeVm.Script(t);else if("native"===this.currEval)$i.cache[a]=new this.vm.Script(t);else if("function"==typeof this.currEval&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const e=this.currEval;$i.cache[a]=new e(t)}else{if("function"!=typeof this.currEval)throw new TypeError(`Unknown "eval" property "${this.currEval}"`);$i.cache[a]={runInNewContext:e=>this.currEval(t,e)}}}try{return $i.cache[a].runInNewContext(this.currSandbox)}catch(t){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+t.message+": "+e)}},$i.cache={},$i.toPathString=function(e){const t=e,r=t.length;let i="$";for(let e=1;e<r;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(i+=/^[0-9*]+$/u.test(t[e])?"["+t[e]+"]":"['"+t[e]+"']");return i},$i.toPointer=function(e){const t=e,r=t.length;let i="";for(let e=1;e<r;e++)/^(~|\^|@.*?\(\))$/u.test(t[e])||(i+="/"+t[e].toString().replaceAll("~","~0").replaceAll("/","~1"));return i},$i.toPathArray=function(e){const{cache:t}=$i;if(t[e])return t[e].concat();const r=[],i=e.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,(function(e,t){return"[#"+(r.push(t)-1)+"]"})).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,(function(e,t){return"['"+t.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"})).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,(function(e,t){return";"+t.split("").join(";")+";"})).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map((function(e){const t=e.match(/#(\d+)/u);return t&&t[1]?r[t[1]]:e}));return t[e]=i,t[e].concat()},$i.prototype.safeVm={Script:class{constructor(e){this.code=e,this.ast=Gi(this.code)}runInNewContext(e){const t={...e};return Zi.evalAst(this.ast,t)}}},$i.prototype.vm={Script:class{constructor(e){this.code=e}runInNewContext(e){let t=this.code;const r=Object.keys(e),i=[];!function(t,r,i){const o=t.length;for(let i=0;i<o;i++)n=t[i],"function"==typeof e[n]&&r.push(t.splice(i--,1)[0]);var n}(r,i);const o=r.map((t=>e[t]));t=i.reduce(((t,r)=>{let i=e[r].toString();return/function/u.test(i)||(i="function "+i),"var "+r+"="+i+";"+t}),"")+t,/(['"])use strict\1/u.test(t)||r.includes("arguments")||(t="var arguments = undefined;"+t),t=t.replace(/;\s*$/u,"");const n=t.lastIndexOf(";"),s=n>-1?t.slice(0,n+1)+" return "+t.slice(n+1):" return "+t;return new Function(...r,s)(...o)}}};var Qi=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ji{constructor(e){this.jscadWorkerManager=e}intersect(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.intersect",e)}))}subtract(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtract",e)}))}union(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.union",e)}))}intersectTwo(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.intersectTwo",e)}))}subtractTwo(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtractTwo",e)}))}unionTwo(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.unionTwo",e)}))}subtractFrom(e){return Qi(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("booleans.subtractFrom",e)}))}}var eo=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class to{constructor(e){this.jscadWorkerManager=e}expand(e){return eo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("expansions.expand",e)}))}offset(e){return eo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("expansions.offset",e)}))}}var ro=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class io{constructor(e){this.jscadWorkerManager=e}extrudeLinear(e){return ro(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeLinear",e)}))}extrudeRectangular(e){return ro(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRectangular",e)}))}extrudeRectangularPoints(e){return ro(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRectangularPoints",e)}))}extrudeRotate(e){return ro(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("extrusions.extrudeRotate",e)}))}}var oo=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class no{constructor(e){this.jscadWorkerManager=e}hullChain(e){return oo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("hulls.hullChain",e)}))}hull(e){return oo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("hulls.hullChain",e)}))}}var so=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ao{constructor(e){this.jscadWorkerManager=e}createFromPoints(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createFromPoints",e)}))}createPathsFromPoints(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createPathsFromPoints",e)}))}createFromPolyline(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createFromPolyline",e)}))}createEmpty(){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.createEmpty",{})}))}close(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.close",e)}))}appendPoints(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendPoints",e)}))}appendPolyline(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendPolyline",e)}))}appendArc(e){return so(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("path.appendArc",e)}))}}var co=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ho{constructor(e){this.jscadWorkerManager=e}createFromPoints(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPoints",e)}))}createFromPolyline(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPolyline",e)}))}createFromCurve(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromCurve",e)}))}createFromPath(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.createFromPath",e)}))}circle(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.circle",e)}))}ellipse(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.ellipse",e)}))}rectangle(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.rectangle",e)}))}roundedRectangle(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.roundedRectangle",e)}))}square(e){return co(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("polygon.square",e)}))}star(e){return co(this,void 0,void 0,(function*(){return yield this.jscadWorkerManager.genericCallToWorkerPromise("polygon.star",e)}))}}var lo=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class uo{constructor(e){this.jscadWorkerManager=e}cube(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cube",e)}))}cubesOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cubesOnCenterPoints",e)}))}cuboid(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cuboid",e)}))}cuboidsOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cuboidsOnCenterPoints",e)}))}cylinderElliptic(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinderElliptic",e)}))}cylinderEllipticOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinderEllipticOnCenterPoints",e)}))}cylinder(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylinder",e)}))}cylindersOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.cylindersOnCenterPoints",e)}))}ellipsoid(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.ellipsoid",e)}))}ellipsoidsOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.ellipsoidsOnCenterPoints",e)}))}geodesicSphere(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.geodesicSphere",e)}))}geodesicSpheresOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.geodesicSpheresOnCenterPoints",e)}))}roundedCuboid(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCuboid",e)}))}roundedCuboidsOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCuboidsOnCenterPoints",e)}))}roundedCylinder(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCylinder",e)}))}roundedCylindersOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.roundedCylindersOnCenterPoints",e)}))}sphere(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.sphere",e)}))}spheresOnCenterPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.spheresOnCenterPoints",e)}))}torus(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.torus",e)}))}fromPolygonPoints(e){return lo(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("shapes.fromPolygonPoints",e)}))}}var po=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class fo{constructor(e){this.jscadWorkerManager=e}cylindricalText(e){return po(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.cylindricalText",e)}))}sphericalText(e){return po(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.sphericalText",e)}))}createVectorText(e){return po(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("text.createVectorText",e)}))}}class vo{constructor(e){this.jscadWorkerManager=e}colorize(e){return t=this,r=void 0,o=function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("colors.colorize",e)},new((i=void 0)||(i=Promise))((function(e,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(t,r||[])).next())}));var t,r,i,o}}var go=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class mo{constructor(e){this.jscadWorkerManager=e,this.booleans=new Ji(e),this.expansions=new to(e),this.extrusions=new io(e),this.hulls=new no(e),this.path=new ao(e),this.polygon=new ho(e),this.shapes=new uo(e),this.text=new fo(e),this.colors=new vo(e)}toPolygonPoints(e){return go(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("toPolygonPoints",e)}))}transformSolids(e){return go(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("transformSolids",e)}))}transformSolid(e){return go(this,void 0,void 0,(function*(){return this.jscadWorkerManager.genericCallToWorkerPromise("transformSolid",e)}))}downloadSolidSTL(e){return go(this,void 0,void 0,(function*(){const t=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadSolidSTL",e);this.downloadFile(t.blob,e.fileName,"stl")}))}downloadSolidsSTL(e){return go(this,void 0,void 0,(function*(){const t=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadSolidsSTL",e);this.downloadFile(t.blob,e.fileName,"stl")}))}downloadGeometryDxf(e){return go(this,void 0,void 0,(function*(){const t=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadGeometryDxf",e);this.downloadFile(t.blob,e.fileName,"dxf")}))}downloadGeometry3MF(e){return go(this,void 0,void 0,(function*(){const t=yield this.jscadWorkerManager.genericCallToWorkerPromise("downloadGeometry3MF",e);this.downloadFile(t.blob,e.fileName,"3mf")}))}downloadFile(e,t,r){const i=URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.target="_self",o.download=t+"."+r,o.click(),o.remove()}}function bo(e){return"function"==typeof e}function yo(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xo=yo((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function wo(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var So=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var s=ye(n),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else n.remove(this);var c=this.initialTeardown;if(bo(c))try{c()}catch(e){o=e instanceof xo?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=ye(h),u=l.next();!u.done;u=l.next()){var d=u.value;try{Po(d)}catch(e){o=null!=o?o:[],e instanceof xo?o=we(we([],xe(o)),xe(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}if(o)throw new xo(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Po(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&wo(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&wo(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),ko=So.EMPTY;function Co(e){return e instanceof So||e&&"closed"in e&&bo(e.remove)&&bo(e.add)&&bo(e.unsubscribe)}function Po(e){bo(e)?e():e.unsubscribe()}var Mo=null,To=null,Do=void 0,_o=!1,Oo=!1,Eo={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=Eo.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,we([e,t],xe(r))):setTimeout.apply(void 0,we([e,t],xe(r)))},clearTimeout:function(e){var t=Eo.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Wo(){}var Ao=Io("C",void 0,void 0);function Io(e,t,r){return{kind:e,value:t,error:r}}var Bo=null;function Ro(e){if(_o){var t=!Bo;if(t&&(Bo={errorThrown:!1,error:null}),e(),t){var r=Bo,i=r.errorThrown,o=r.error;if(Bo=null,i)throw o}}else e()}var Lo=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Co(t)&&t.add(r)):r.destination=Ho,r}return be(t,e),t.create=function(e,t,r){return new No(e,t,r)},t.prototype.next=function(e){this.isStopped?Vo(function(e){return Io("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Vo(Io("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Vo(Ao,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(So),Fo=Function.prototype.bind;function Uo(e,t){return Fo.call(e,t)}var zo=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Go(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Go(e)}else Go(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Go(e)}},e}(),No=function(e){function t(t,r,i){var o,n,s=e.call(this)||this;return bo(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:s&&Oo?((n=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&Uo(t.next,n),error:t.error&&Uo(t.error,n),complete:t.complete&&Uo(t.complete,n)}):o=t,s.destination=new zo(o),s}return be(t,e),t}(Lo);function Go(e){var t;_o?(t=e,_o&&Bo&&(Bo.errorThrown=!0,Bo.error=t)):function(e){Eo.setTimeout((function(){if(!Mo)throw e;Mo(e)}))}(e)}function Vo(e,t){var r=To;r&&Eo.setTimeout((function(){return r(e,t)}))}var Ho={closed:!0,next:Wo,error:function(e){throw e},complete:Wo},jo="function"==typeof Symbol&&Symbol.observable||"@@observable";function qo(e){return e}var Zo=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,o=this,n=(i=e)&&i instanceof Lo||function(e){return e&&bo(e.next)&&bo(e.error)&&bo(e.complete)}(i)&&Co(i)?e:new No(e,t,r);return Ro((function(){var e=o,t=e.operator,r=e.source;n.add(t?t.call(n,r):r?o._subscribe(n):o._trySubscribe(n))})),n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Yo(t))((function(t,i){var o=new No({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[jo]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?qo:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=Yo(e))((function(e,r){var i;t.subscribe((function(e){return i=e}),(function(e){return r(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function Yo(e){var t;return null!==(t=null!=e?e:Do)&&void 0!==t?t:Promise}var Xo,Ko=yo((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),$o=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return be(t,e),t.prototype.lift=function(e){var t=new Qo(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Ko},t.prototype.next=function(e){var t=this;Ro((function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=ye(t.currentObservers),n=o.next();!n.done;n=o.next())n.value.next(e)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;Ro((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Ro((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,i=r.hasError,o=r.isStopped,n=r.observers;return i||o?ko:(this.currentObservers=null,n.push(e),new So((function(){t.currentObservers=null,wo(n,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,i=t.thrownError,o=t.isStopped;r?e.error(i):o&&e.complete()},t.prototype.asObservable=function(){var e=new Zo;return e.source=this,e},t.create=function(e,t){return new Qo(e,t)},t}(Zo),Qo=function(e){function t(t,r){var i=e.call(this)||this;return i.destination=t,i.source=r,i}return be(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ko},t}($o);!function(e){e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.initialised=2]="initialised",e[e.computing=3]="computing"}(Xo||(Xo={}));class Jo{constructor(){this.jscadWorkerState$=new $o,this.promisesMade=[]}jscadWorkerAlreadyInitialised(){return!!this.jscadWorker}setJscadWorker(e){this.jscadWorker=e,this.jscadWorker.onmessage=({data:e})=>{if("jscad-initialised"===e)this.jscadWorkerState$.next({state:Xo.initialised});else if("busy"===e)this.jscadWorkerState$.next({state:Xo.computing});else{const t=this.promisesMade.find((t=>t.uid===e.uid));t&&e.result&&!e.error?t.resolve(e.result):e.error&&(this.errorCallback&&this.errorCallback(e.error),t.reject(e.error)),this.promisesMade=this.promisesMade.filter((t=>t.uid!==e.uid)),0===this.promisesMade.length?this.jscadWorkerState$.next({state:Xo.loaded}):this.jscadWorkerState$.next({state:Xo.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(e,t){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((e,t)=>{i.resolve=e,i.reject=t}));return i.promise=o,this.promisesMade.push(i),this.jscadWorker.postMessage({action:{functionName:e,inputs:t},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}var en=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class tn{constructor(e){this.manifoldWorkerManager=e}manifoldFromMesh(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.manifoldFromMesh",e)}fromPolygonPoints(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.fromPolygonPoints",e)}cube(e){return en(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.cube",e)}))}sphere(e){return en(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.sphere",e)}))}tetrahedron(){return en(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.tetrahedron",{})}))}cylinder(e){return en(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.shapes.cylinder",e)}))}}var rn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class on{constructor(e){this.manifoldWorkerManager=e}subtract(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.subtract",e)}))}add(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.add",e)}))}intersect(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersect",e)}))}differenceTwo(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.differenceTwo",e)}))}unionTwo(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.unionTwo",e)}))}intersectionTwo(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersectionTwo",e)}))}difference(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.difference",e)}))}union(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.union",e)}))}intersection(e){return rn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.intersection",e)}))}split(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.split",e)}splitByPlane(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.splitByPlane",e)}splitByPlaneOnOffsets(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.splitByPlaneOnOffsets",e)}trimByPlane(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.booleans.trimByPlane",e)}}var nn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class sn{constructor(e){this.manifoldWorkerManager=e}hull(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.hull",e)}))}hullPoints(e){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.hullPoints",e)}slice(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.slice",e)}))}project(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.project",e)}))}setTolerance(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.setTolerance",e)}))}reserveIds(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.reserveIds",e)}))}asOriginal(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.asOriginal",e)}))}compose(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.compose",e)}))}decompose(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.decompose",e)}))}calculateNormals(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.calculateNormals",e)}))}calculateCurvature(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.calculateCurvature",e)}))}refineToTolerance(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refineToTolerance",e)}))}refineToLength(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refineToLength",e)}))}refine(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.refine",e)}))}smoothOut(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.smoothOut",e)}))}smoothByNormals(e){return nn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.operations.smoothByNormals",e)}))}}var an=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class cn{constructor(e){this.manifoldWorkerManager=e}scale3D(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.scale3D",e)}))}scale(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.scale",e)}))}mirror(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.mirror",e)}))}translate(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translate",e)}))}translateByVectors(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translateByVectors",e)}))}translateXYZ(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.translateXYZ",e)}))}rotate(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.rotate",e)}))}rotateXYZ(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.rotateXYZ",e)}))}transform(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.transform",e)}))}transforms(e){return an(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.transforms.transforms",e)}))}}var hn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ln{constructor(e){this.manifoldWorkerManager=e}surfaceArea(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.surfaceArea",e)}))}volume(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.volume",e)}))}isEmpty(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.isEmpty",e)}))}numVert(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numVert",e)}))}numTri(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numTri",e)}))}numEdge(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numEdge",e)}))}numProp(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numProp",e)}))}numPropVert(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.numPropVert",e)}))}boundingBox(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.boundingBox",e)}))}tolerance(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.tolerance",e)}))}genus(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.genus",e)}))}minGap(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.minGap",e)}))}originalID(e){return hn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.evaluate.originalID",e)}))}}var un=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class dn{constructor(e){this.manifoldWorkerManager=e,this.shapes=new tn(e),this.booleans=new on(e),this.operations=new sn(e),this.transforms=new cn(e),this.evaluate=new ln(e)}manifoldToMesh(e){return un(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.manifoldToMesh",e)}))}manifoldsToMeshes(e){return un(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifold.manifoldsToMeshes",e)}))}}var pn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class fn{constructor(e){this.manifoldWorkerManager=e}hull(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.hull",e)}))}extrude(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.extrude",e)}))}revolve(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.revolve",e)}))}offset(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.offset",e)}))}simplify(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.simplify",e)}))}compose(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.compose",e)}))}decompose(e){return pn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.operations.decompose",e)}))}}var vn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class gn{constructor(e){this.manifoldWorkerManager=e}create(e){return vn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.create",e)}))}square(e){return vn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.square",e)}))}circle(e){return vn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.circle",e)}))}rectangle(e){return vn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.shapes.rectangle",e)}))}}var mn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class bn{constructor(e){this.manifoldWorkerManager=e}scale2D(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.scale2D",e)}))}scale(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.scale",e)}))}mirror(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.mirror",e)}))}translate(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.translate",e)}))}translateXY(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.translateXY",e)}))}rotate(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.rotate",e)}))}transform(e){return mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.transforms.transform",e)}))}}var yn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class xn{constructor(e){this.manifoldWorkerManager=e}subtract(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.subtract",e)}))}add(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.add",e)}))}intersect(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersect",e)}))}differenceTwo(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.differenceTwo",e)}))}unionTwo(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.unionTwo",e)}))}intersectionTwo(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersectionTwo",e)}))}difference(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.difference",e)}))}union(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.union",e)}))}intersection(e){return yn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.booleans.intersection",e)}))}}var wn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Sn{constructor(e){this.manifoldWorkerManager=e}area(e){return wn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.area",e)}))}isEmpty(e){return wn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.isEmpty",e)}))}numVert(e){return wn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.numVert",e)}))}numContour(e){return wn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.numContour",e)}))}bounds(e){return wn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.evaluate.bounds",e)}))}}var kn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Cn{constructor(e){this.manifoldWorkerManager=e,this.shapes=new gn(e),this.operations=new fn(e),this.booleans=new xn(e),this.transforms=new bn(e),this.evaluate=new Sn(e)}crossSectionToPolygons(e){return kn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionToPolygons",e)}))}crossSectionsToPolygons(e){return kn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("crossSection.crossSectionsToPolygons",e)}))}}class Pn{constructor(e){this.manifoldWorkerManager=e}merge(e){return t=this,r=void 0,o=function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.operations.merge",e)},new((i=void 0)||(i=Promise))((function(e,n){function s(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(t,r||[])).next())}));var t,r,i,o}}var Mn=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Tn{constructor(e){this.manifoldWorkerManager=e}position(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.position",e)}))}verts(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.verts",e)}))}tangent(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.tangent",e)}))}extras(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.extras",e)}))}transform(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.transform",e)}))}numProp(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numProp",e)}))}numVert(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numVert",e)}))}numTri(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numTri",e)}))}numRun(e){return Mn(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("mesh.evaluate.numRun",e)}))}}class Dn{constructor(e){this.manifoldWorkerManager=e,this.operations=new Pn(e),this.evaluate=new Tn(e)}}var _n=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class On{constructor(e){this.manifoldWorkerManager=e,this.manifold=new dn(e),this.crossSection=new Cn(e),this.mesh=new Dn(e)}manifoldToMeshPointer(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("manifoldToMeshPointer",e)}))}decomposeManifoldOrCrossSection(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldOrCrossSection",e)}))}toPolygonPoints(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("toPolygonPoints",e)}))}decomposeManifoldsOrCrossSections(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("decomposeManifoldsOrCrossSections",e)}))}deleteManifoldOrCrossSection(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("deleteManifoldOrCrossSection",e)}))}deleteManifoldsOrCrossSections(e){return _n(this,void 0,void 0,(function*(){return this.manifoldWorkerManager.genericCallToWorkerPromise("deleteManifoldsOrCrossSections",e)}))}}function En(e){return"function"==typeof e}function Wn(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var An=Wn((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function In(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Bn=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var s=ye(n),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else n.remove(this);var c=this.initialTeardown;if(En(c))try{c()}catch(e){o=e instanceof An?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=ye(h),u=l.next();!u.done;u=l.next()){var d=u.value;try{Fn(d)}catch(e){o=null!=o?o:[],e instanceof An?o=we(we([],xe(o)),xe(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}if(o)throw new An(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Fn(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&In(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&In(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),Rn=Bn.EMPTY;function Ln(e){return e instanceof Bn||e&&"closed"in e&&En(e.remove)&&En(e.add)&&En(e.unsubscribe)}function Fn(e){En(e)?e():e.unsubscribe()}var Un=null,zn=null,Nn=void 0,Gn=!1,Vn=!1,Hn={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=Hn.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,we([e,t],xe(r))):setTimeout.apply(void 0,we([e,t],xe(r)))},clearTimeout:function(e){var t=Hn.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function jn(){}var qn=Zn("C",void 0,void 0);function Zn(e,t,r){return{kind:e,value:t,error:r}}var Yn=null;function Xn(e){if(Gn){var t=!Yn;if(t&&(Yn={errorThrown:!1,error:null}),e(),t){var r=Yn,i=r.errorThrown,o=r.error;if(Yn=null,i)throw o}}else e()}var Kn=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Ln(t)&&t.add(r)):r.destination=is,r}return be(t,e),t.create=function(e,t,r){return new es(e,t,r)},t.prototype.next=function(e){this.isStopped?rs(function(e){return Zn("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?rs(Zn("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?rs(qn,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Bn),$n=Function.prototype.bind;function Qn(e,t){return $n.call(e,t)}var Jn=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ts(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ts(e)}else ts(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ts(e)}},e}(),es=function(e){function t(t,r,i){var o,n,s=e.call(this)||this;return En(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:s&&Vn?((n=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&Qn(t.next,n),error:t.error&&Qn(t.error,n),complete:t.complete&&Qn(t.complete,n)}):o=t,s.destination=new Jn(o),s}return be(t,e),t}(Kn);function ts(e){var t;Gn?(t=e,Gn&&Yn&&(Yn.errorThrown=!0,Yn.error=t)):function(e){Hn.setTimeout((function(){if(!Un)throw e;Un(e)}))}(e)}function rs(e,t){var r=zn;r&&Hn.setTimeout((function(){return r(e,t)}))}var is={closed:!0,next:jn,error:function(e){throw e},complete:jn},os="function"==typeof Symbol&&Symbol.observable||"@@observable";function ns(e){return e}var ss=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,o=this,n=(i=e)&&i instanceof Kn||function(e){return e&&En(e.next)&&En(e.error)&&En(e.complete)}(i)&&Ln(i)?e:new es(e,t,r);return Xn((function(){var e=o,t=e.operator,r=e.source;n.add(t?t.call(n,r):r?o._subscribe(n):o._trySubscribe(n))})),n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=as(t))((function(t,i){var o=new es({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[os]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?ns:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=as(e))((function(e,r){var i;t.subscribe((function(e){return i=e}),(function(e){return r(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function as(e){var t;return null!==(t=null!=e?e:Nn)&&void 0!==t?t:Promise}var cs,hs=Wn((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),ls=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return be(t,e),t.prototype.lift=function(e){var t=new us(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new hs},t.prototype.next=function(e){var t=this;Xn((function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=ye(t.currentObservers),n=o.next();!n.done;n=o.next())n.value.next(e)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;Xn((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Xn((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,i=r.hasError,o=r.isStopped,n=r.observers;return i||o?Rn:(this.currentObservers=null,n.push(e),new Bn((function(){t.currentObservers=null,In(n,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,i=t.thrownError,o=t.isStopped;r?e.error(i):o&&e.complete()},t.prototype.asObservable=function(){var e=new ss;return e.source=this,e},t.create=function(e,t){return new us(e,t)},t}(ss),us=function(e){function t(t,r){var i=e.call(this)||this;return i.destination=t,i.source=r,i}return be(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Rn},t}(ls);!function(e){e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.initialised=2]="initialised",e[e.computing=3]="computing"}(cs||(cs={}));class ds{constructor(){this.manifoldWorkerState$=new ls,this.promisesMade=[]}manifoldWorkerAlreadyInitialised(){return!!this.manifoldWorker}setManifoldWorker(e){this.manifoldWorker=e,this.manifoldWorker.onmessage=({data:e})=>{if("manifold-initialised"===e)this.manifoldWorkerState$.next({state:cs.initialised});else if("busy"===e)this.manifoldWorkerState$.next({state:cs.computing});else{const t=this.promisesMade.find((t=>t.uid===e.uid));t&&void 0!==e.result&&!e.error?t.resolve(e.result):e.error&&(this.errorCallback&&this.errorCallback(e.error),t.reject(e.error)),this.promisesMade=this.promisesMade.filter((t=>t.uid!==e.uid)),0===this.promisesMade.length?this.manifoldWorkerState$.next({state:cs.loaded}):this.manifoldWorkerState$.next({state:cs.computing})}}}cleanPromisesMade(){this.promisesMade=[]}genericCallToWorkerPromise(e,t){const r=`call${Math.random()}${Date.now()}`,i={uid:r},o=new Promise(((e,t)=>{i.resolve=e,i.reject=t}));return i.promise=o,this.promisesMade.push(i),this.manifoldWorker.postMessage({action:{functionName:e,inputs:t},uid:r}),o}startedTheRun(){return this.genericCallToWorkerPromise("startedTheRun",{})}cleanAllCache(){return this.genericCallToWorkerPromise("cleanAllCache",{})}}var ps=a(258);class fs{constructor(){this.context=new Li,this.jscadWorkerManager=new Jo,this.manifoldWorkerManager=new ds,this.occtWorkerManager=new kt,this.jscad=new mo(this.jscadWorkerManager),this.manifold=new On(this.manifoldWorkerManager);const e=new It;this.math=new Tt,this.vector=new Wt(this.math,e);const t=new Ui(this.context,this.jscad.text,this.vector,this.jscadWorkerManager,this.manifoldWorkerManager,this.occtWorkerManager);this.babylon=new hi(this.context,t,this.color),this.tag=new Oi(this.context),this.draw=new Ri(t,this.babylon.node,this.tag,this.context),this.lists=new Pt,this.color=new Ct(this.math),this.transforms=new At(this.vector,this.math),this.point=new Dt(e,this.transforms,this.vector,this.lists),this.line=new Bt(this.vector,this.point,e),this.polyline=new Rt(this.vector,this.point,this.line,e),this.verb=new ki(this.context,e,this.math),this.time=new Ei(this.context),this.occt=new ui(this.context,this.occtWorkerManager),this.asset=new Di,this.logic=new Mt,this.json=new _i(this.context),this.text=new Ot(this.point),this.dates=new Et,this.mesh=new Lt(this.vector,this.polyline)}init(e,t,r,i,o){this.context.scene=e,o&&(this.context.havokPlugin=o);const n={geom:ps.geom,core:ps.core};this.context.verb=n,this.context.jsonpath=$i,t&&this.occtWorkerManager.setOccWorker(t),r&&this.jscadWorkerManager.setJscadWorker(r),i&&this.manifoldWorkerManager.setManifoldWorker(i)}}const vs="assets/textures";class gs{constructor(e){this.name="",this.scene=void 0,this.wAng=0,this.uScale=1,this.vScale=1,this.color=void 0,this.albedoTextureUrl=void 0,this.microSurfaceTextureUrl=void 0,this.bumpTextureUrl=void 0,this.metallic=.1,this.roughness=.9,this.zOffset=2,Object.keys(this).forEach((t=>this[t]=e[t]))}}class ms{static simpleBlackMaterial(e){const t=new q.PBRMaterial("blackMaterial"+Math.random(),e);return t.albedoColor=new q.Color3(0,0,0),t.metallic=0,t.roughness=.7,t.zOffset=2,t}static rock1Material(e,t,r){const i=new gs({name:"wood1",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.rock1.default.albedo,bumpTextureUrl:ms.textures.rock1.microSurfaceTexture,microSurfaceTextureUrl:ms.textures.rock1.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static wood1Material(e,t,r){const i=new gs({name:"wood1",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.wood1.light.albedo,bumpTextureUrl:ms.textures.wood1.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static wood2Material(e,t,r){const i=new gs({name:"wood2",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.wood2.light.albedo,microSurfaceTextureUrl:ms.textures.wood2.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static wood3Material(e,t,r){const i=new gs({name:"wood3",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.wood1.dark.albedo,microSurfaceTextureUrl:ms.textures.wood1.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static brownPlanks(e,t,r){const i=new gs({name:"brownPlanks",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.brownPlanks.light.albedo,microSurfaceTextureUrl:ms.textures.brownPlanks.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static woodenPlanks(e,t,r){const i=new gs({name:"woodenPlanks",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.woodenPlanks.light.albedo,microSurfaceTextureUrl:ms.textures.woodenPlanks.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static glass(e,t){const r=new q.PBRMaterial("faceGlassMaterial"+Math.random(),e);return r.albedoColor=q.Color3.FromHexString(t),r.ambientColor=q.Color3.FromHexString("#ffffff"),r.metallic=.8,r.roughness=.1,r.zOffset=1,r.alpha=.5,r}static brushedConcrete(e,t,r){const i=new gs({name:"brushedConcrete",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.brushedConcrete.grey.albedo,microSurfaceTextureUrl:ms.textures.brushedConcrete.microSurfaceTexture,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(i)}static metal1(e,t,r){const i=new gs({name:"metal1",scene:e,wAng:t,uScale:r,vScale:r,albedoTextureUrl:ms.textures.metal1.light.albedo,microSurfaceTextureUrl:ms.textures.metal1.microSurfaceTexture,bumpTextureUrl:ms.textures.metal1.light.roughness,metallic:.3,roughness:.6,zOffset:2});return ms.createMaterial(i)}static roughPlastic(e,t){const r=new gs({name:"roughPlastic-"+t,color:t,scene:e,metallic:.1,roughness:.9,zOffset:2});return ms.createMaterial(r)}static createMaterial(e){const t=new q.PBRMaterial(e.name,e.scene);return e.color&&(t.albedoColor=q.Color3.FromHexString(e.color)),e.albedoTextureUrl&&(t.albedoTexture=ms.createTexture(e.albedoTextureUrl,e)),e.microSurfaceTextureUrl&&(t.microSurfaceTexture=ms.createTexture(e.microSurfaceTextureUrl,e)),e.bumpTextureUrl&&(t.bumpTexture=ms.createTexture(e.bumpTextureUrl,e)),t.metallic=e.metallic,t.roughness=e.roughness,t.zOffset=e.zOffset,t}static createTexture(e,t){const r=new q.Texture(e,t.scene);return r.uScale=t.uScale,r.vScale=t.vScale,r.wAng=t.wAng,r}}ms.textures={wood1:{microSurfaceTexture:`${vs}/Wood048_1K/Wood048_1K_NormalGL.jpg`,light:{albedo:`${vs}/Wood048_1K/Wood048_1K_Light.jpg`},dark:{albedo:`${vs}/Wood048_1K/Wood048_1K_Color_Dark.jpg`}},wood2:{microSurfaceTexture:`${vs}/Wood084_1K/Wood084A_1K_NormalGL.jpg`,light:{albedo:`${vs}/Wood084_1K/Wood084A_1K_Color.jpg`}},metal1:{microSurfaceTexture:`${vs}/metal_1/Metal029_1K_Displacement.jpg`,light:{albedo:`${vs}/metal_1/Metal029_1K_Color.jpg`,normalGL:`${vs}/metal_1/Metal029_1K_NormalGL.jpg`,roughness:`${vs}/metal_1/Metal029_1K_Roughness.jpg`,metalness:`${vs}/metal_1/Metal029_1K_Metalness.jpg`}},brownPlanks:{microSurfaceTexture:`${vs}/brown_planks/brown_planks_05_nor_gl_1k.jpg`,light:{albedo:`${vs}/brown_planks/brown_planks_05_diff_1k.jpg`}},woodenPlanks:{microSurfaceTexture:`${vs}/wooden_planks/wooden_planks_nor_gl_1k.jpg`,light:{albedo:`${vs}/wooden_planks/wooden_planks_diff_1k.jpg`}},brushedConcrete:{microSurfaceTexture:`${vs}/brushed_concrete/brushed_concrete_03_nor_gl_1k.jpg`,sand:{albedo:`${vs}/brushed_concrete/brushed_concrete_03_diff_1k.jpg`},grey:{albedo:`${vs}/brushed_concrete/brushed_concrete_03_diff_grey_1k.jpg`}},rock1:{microSurfaceTexture:`${vs}/Rock044_1K/Rock044_1K_NormalGL.jpg`,default:{albedo:`${vs}/Rock044_1K/Rock044_1K_Color.jpg`,roughness:`${vs}/Rock044_1K/Rock044_1K_Roughness.jpg`}}};var bs=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ys{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return bs(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.wingtipVilla",e);if(t){const e=t.shapes.find((e=>e.id===t.data.roof.compound)),r=t.shapes.find((e=>e.id===t.data.walls.compound));return{type:t.data.type,name:t.data.name,compound:t.compound,roof:{compound:e.shape,shapes:t.shapes.filter((e=>t.data.roof.shapes.includes(e.id))).map((e=>e.shape))},walls:{compound:r.shape,shapes:t.shapes.filter((e=>t.data.walls.shapes.includes(e.id))).map((e=>e.shape))},stick:{shape:t.shapes.find((e=>e.id===t.data.stick.shape)).shape},floor:{shape:t.shapes.find((e=>e.id===t.data.floor.shape)).shape},chimney:{shape:t.shapes.find((e=>e.id===t.data.chimney.shape)).shape},basicPoints:t.data.basicPoints}}}))}drawModel(e){return bs(this,void 0,void 0,(function*(){const t=new q.Mesh("brepMesh"+Math.random(),this.context.scene),r=new vr.DrawOcctShapeOptions;r.faceOpacity=0,r.edgeColour="#ffffff";const i=yield this.draw.drawAnyAsync({entity:e.roof.compound,options:r}),o=i.getChildMeshes(),n=o[0],s=o[1],a=yield this.draw.drawAnyAsync({entity:e.walls.compound,options:r}),c=a.getChildMeshes(),h=c[0],l=c[1],u=yield this.draw.drawAnyAsync({entity:e.floor.shape,options:r}),d=u.getChildMeshes(),p=d[0],f=d[1],v=yield this.draw.drawAnyAsync({entity:e.stick.shape,options:r}),g=v.getChildMeshes(),m=g[0],b=g[1],y=yield this.draw.drawAnyAsync({entity:e.chimney.shape,options:r}),x=y.getChildMeshes(),w=x[0],S=x[1],k=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_Red.jpg",this.context.scene),C=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_Color_Dark.jpg",this.context.scene),P=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_NormalGL.jpg",this.context.scene);k.uScale=.3,k.vScale=.3,k.wAng=Math.PI/2,C.uScale=.3,C.vScale=.3,C.wAng=Math.PI/2,P.uScale=.3,P.vScale=.3,P.wAng=Math.PI/2;const M=new q.PBRMaterial("wood-red",this.context.scene);M.albedoTexture=k,M.microSurfaceTexture=P,M.metallic=0,M.roughness=1,M.zOffset=2;const T=new q.PBRMaterial("wood-dark",this.context.scene);return T.albedoTexture=C,T.microSurfaceTexture=P,T.metallic=0,T.roughness=1,T.zOffset=2,n.material=M,h.material=ms.wood1Material(this.context.scene,Math.PI/2,.3),p.material=M,m.material=M,w.material=T,n.parent=t,h.parent=t,p.parent=t,m.parent=t,w.parent=t,s.parent=t,l.parent=t,f.parent=t,b.parent=t,S.parent=t,i.dispose(),u.dispose(),a.dispose(),v.dispose(),y.dispose(),t}))}dispose(e){return bs(this,void 0,void 0,(function*(){const t=[e.compound,e.chimney.shape,e.floor.shape,...e.roof.shapes,...e.walls.shapes,e.stick.shape];yield this.occt.deleteShapes({shapes:t})}))}}var xs=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ws{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}dispose(e){return xs(this,void 0,void 0,(function*(){const t=[e.compound,e.floor.shape,...e.roof.shapes,...e.walls.shapes,e.stick.shape];yield this.occt.deleteShapes({shapes:t})}))}create(e){return xs(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.chirpyChalet",e);if(t){const e=t.shapes.find((e=>e.id===t.data.roof.compound)),r=t.shapes.find((e=>e.id===t.data.walls.compound));return{type:t.data.type,name:t.data.name,compound:t.compound,roof:{compound:e.shape,shapes:t.shapes.filter((e=>t.data.roof.shapes.includes(e.id))).map((e=>e.shape))},walls:{compound:r.shape,shapes:t.shapes.filter((e=>t.data.walls.shapes.includes(e.id))).map((e=>e.shape))},stick:{shape:t.shapes.find((e=>e.id===t.data.stick.shape)).shape},floor:{shape:t.shapes.find((e=>e.id===t.data.floor.shape)).shape},basicPoints:t.data.basicPoints}}}))}drawModel(e){return xs(this,void 0,void 0,(function*(){const t=new q.Mesh("brepMesh"+Math.random(),this.context.scene),r=new vr.DrawOcctShapeOptions;r.faceOpacity=0,r.edgeColour="#ffffff";const i=yield this.draw.drawAnyAsync({entity:e.roof.compound,options:r}),o=i.getChildMeshes()[0],n=yield this.draw.drawAnyAsync({entity:e.walls.compound,options:r}),s=n.getChildMeshes()[0],a=yield this.draw.drawAnyAsync({entity:e.floor.shape,options:r}),c=a.getChildMeshes()[0],h=yield this.draw.drawAnyAsync({entity:e.stick.shape,options:r}),l=h.getChildMeshes()[0],u=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_Color.jpg",this.context.scene),d=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_Light.jpg",this.context.scene),p=new q.Texture("assets/textures/Wood048_1K/Wood048_1K_NormalGL.jpg",this.context.scene);d.uScale=.3,d.vScale=.3,d.wAng=Math.PI/2,u.uScale=.3,u.vScale=.3,u.wAng=Math.PI/2,p.uScale=.3,p.vScale=.3,p.wAng=Math.PI/2;const f=new q.PBRMaterial("roof",this.context.scene);f.albedoTexture=u,f.microSurfaceTexture=p,f.metallic=0,f.roughness=1,f.zOffset=2;const v=new q.PBRMaterial("walls",this.context.scene);return v.albedoTexture=d,v.microSurfaceTexture=p,v.metallic=0,v.roughness=1,v.zOffset=2,o.material=f,s.material=v,c.material=f,l.material=f,i.setParent(t),a.setParent(t),n.setParent(t),h.setParent(t),t}))}}class Ss{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.wingtipVilla=new ys(this.occWorkerManager,this.context,this.draw,this.occt),this.chirpyChalet=new ws(this.occWorkerManager,this.context,this.draw,this.occt)}}class ks{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.birdhouses=new Ss(this.occWorkerManager,this.context,this.draw,this.occt)}}var Cs,Ps,Ms,Ts,Ds,_s,Os=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Es{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Os(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.serenitySwirl",e);return t?{type:t.data.type,name:t.data.name,compound:t.compound}:void 0}))}drawModel(e,t=.003){return Os(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;i.faceOpacity=0,i.edgeColour="#bc7e5b",i.edgeWidth=.6,i.precision=t;const o=yield this.draw.drawAnyAsync({entity:e.compound,options:i}),n=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return n.albedoColor=new q.Color3(1,1,1),n.ambientColor=q.Color3.FromHexString("#ffffff"),n.metallic=0,n.roughness=.7,n.zOffset=1,o.getChildMeshes()[0].material=n,o.material=n,o.parent=r,r}))}dispose(e){return Os(this,void 0,void 0,(function*(){const t=[e.compound];yield this.occt.deleteShapes({shapes:t})}))}}!function(e){e.low="low",e.middle="middle",e.high="high"}(Cs||(Cs={}));class Ws{constructor(){this.lod=Cs.low}}class As{}class Is{constructor(e,t,r,i,o,n,s,a,c){this.swirl=.6,this.nrOfDivisions=10,this.addRadiusNarrow=.4,this.addRadiusWide=.2,this.addMiddleHeight=1.6,this.addTopHeight=1.5,this.thickness=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.swirl=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.addRadiusNarrow=r),void 0!==i&&(this.addRadiusWide=i),void 0!==o&&(this.addMiddleHeight=o),void 0!==n&&(this.addTopHeight=n),void 0!==s&&(this.thickness=s),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c)}}class Bs{constructor(){this.type="parametric-model",this.name="serenitySwirl"}}class Rs{}class Ls{constructor(e,t,r,i,o,n,s,a,c,h,l,u){this.profilePoints=[[2,0,0],[4,5,0],[1.5,10,0],[3,14,0]],this.nrOfSides=6,this.nrOfVerticalArches=4,this.archCenterThickness=.8,this.edgesThickness=.2,this.thickness=1,this.baseHeight=.4,this.patchHoles=!0,this.lod=Cs.high,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.nrOfSides=e),void 0!==t&&(this.nrOfVerticalArches=t),void 0!==r&&(this.archCenterThickness=r),void 0!==i&&(this.edgesThickness=i),void 0!==o&&(this.thickness=o),void 0!==n&&(this.baseHeight=n),void 0!==s&&(this.patchHoles=s),void 0!==a&&(this.lod=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.origin=h),void 0!==l&&(this.direction=l),void 0!==u&&(this.scale=u)}}class Fs{constructor(){this.type="parametric-model",this.name="arabicArchway"}}class Us{}class zs{}class Ns{}class Gs{constructor(e,t,r,i,o,n,s,a){this.textHeading="LOVE YOU",this.textName="NORA",this.fullModel=!0,this.thickness=6,this.decorationThickness=1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textHeading=e),void 0!==t&&(this.textName=t),void 0!==r&&(this.fullModel=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.decorationThickness=o),void 0!==n&&(this.rotation=n),void 0!==s&&(this.origin=s),void 0!==a&&(this.direction=a)}}class Vs{constructor(){this.type="parametric-model",this.name="eternalLove"}}class Hs{}class js{constructor(e,t,r,i,o,n,s,a,c,h,l,u){this.height=6,this.radiusBottom=4,this.radiusTopOffset=2,this.thickness=.6,this.fillet=.2,this.nrOfHandles=1,this.handleDist=2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.fillet=o),void 0!==n&&(this.nrOfHandles=n),void 0!==s&&(this.handleDist=s),void 0!==a&&(this.precision=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.scale=h),void 0!==l&&(this.origin=l),void 0!==u&&(this.direction=u)}}class qs{constructor(){this.type="parametric-model",this.name="calmCup"}}class Zs{}class Ys{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b,y,x){this.height=8,this.radiusBottom=4,this.radiusTopOffset=2,this.radiusMidOffset=2,this.rotationTopAngle=20,this.rotationMidAngle=20,this.nrSkinCellsVertical=5,this.nrSkinCellsHorizontal=10,this.nrSkinCellDivisionsTop=1,this.nrSkinCellDivisionsBottom=3,this.skinCellOuterHeight=.4,this.skinCellInnerHeight=.3,this.skinCellBottomHeight=.4,this.skinCellTopHeight=.4,this.thickness=.6,this.bottomThickness=1,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.radiusMidOffset=i),void 0!==o&&(this.rotationTopAngle=o),void 0!==n&&(this.rotationMidAngle=n),void 0!==s&&(this.nrSkinCellsVertical=s),void 0!==a&&(this.nrSkinCellsHorizontal=a),void 0!==c&&(this.nrSkinCellDivisionsTop=c),void 0!==h&&(this.nrSkinCellDivisionsBottom=h),void 0!==l&&(this.skinCellOuterHeight=l),void 0!==u&&(this.skinCellInnerHeight=u),void 0!==d&&(this.skinCellBottomHeight=d),void 0!==p&&(this.skinCellTopHeight=p),void 0!==f&&(this.thickness=f),void 0!==v&&(this.bottomThickness=v),void 0!==g&&(this.precision=g),void 0!==m&&(this.rotation=m),void 0!==b&&(this.scale=b),void 0!==y&&(this.origin=y),void 0!==x&&(this.direction=x)}}class Xs{constructor(){this.type="parametric-model",this.name="dragonCup"}}class Ks{}class $s{}class Qs{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m){this.heightBottom=5,this.heightTop=16,this.widthBack=25,this.widthFront=10,this.length=16,this.backOffset=6,this.thickness=.4,this.applyOrnaments=!1,this.filletRadius=2,this.phoneHeight=16.8,this.phoneWidth=7.8,this.phoneThickness=.7,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.heightBottom=e),void 0!==t&&(this.heightTop=t),void 0!==r&&(this.widthBack=r),void 0!==i&&(this.widthFront=i),void 0!==o&&(this.length=o),void 0!==n&&(this.backOffset=n),void 0!==s&&(this.thickness=s),void 0!==a&&(this.applyOrnaments=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.phoneHeight=h),void 0!==l&&(this.phoneWidth=l),void 0!==u&&(this.phoneThickness=u),void 0!==d&&(this.precision=d),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Js{constructor(){this.type="parametric-model",this.name="phoneNest"}}class ea extends As{}class ta{}class ra extends As{}class ia{}class oa{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class na{}class sa{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b){this.textTop="Pepper",this.textFront="For Your Spicy Needs",this.nrSides=4,this.nrOffsets=1,this.height=6,this.radiusBase=4,this.radiusOffset=2,this.coverHeight=1,this.baseHeight=1,this.thickness=.6,this.ornamentalThickness=.1,this.nrOrnamnetsPerSide=10,this.invertOrnaments=!1,this.fillet=.2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textTop=e),void 0!==t&&(this.textFront=t),void 0!==r&&(this.nrSides=r),void 0!==i&&(this.nrOffsets=i),void 0!==o&&(this.height=o),void 0!==n&&(this.coverHeight=n),void 0!==s&&(this.baseHeight=s),void 0!==a&&(this.radiusBase=a),void 0!==c&&(this.radiusOffset=c),void 0!==h&&(this.thickness=h),void 0!==l&&(this.ornamentalThickness=l),void 0!==u&&(this.nrOrnamnetsPerSide=u),void 0!==d&&(this.invertOrnaments=d),void 0!==p&&(this.fillet=p),void 0!==f&&(this.precision=f),void 0!==v&&(this.rotation=v),void 0!==g&&(this.scale=g),void 0!==m&&(this.origin=m),void 0!==b&&(this.direction=b)}}class aa{constructor(){this.type="parametric-model",this.name="spicyBox"}}class ca{}class ha{}class la{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b,y,x,w,S,k,C){this.title="Your Name",this.subtitle="And Message",this.includeLogo=!0,this.thickness=.4,this.kerf=.01,this.phoneWidth=8,this.phoneHeight=16,this.phoneThickness=1,this.backLength=10,this.angle=20,this.offsetAroundPhone=.5,this.penShelf=1,this.phoneLockHeight=.5,this.filletRadius=.3,this.includePattern=!1,this.densityPattern=.4,this.holesForWire=!0,this.wireInputThickness=1.5,this.includeModel=!0,this.includeDrawings=!0,this.spacingDrawings=.5,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.title=e),void 0!==t&&(this.subtitle=t),void 0!==r&&(this.includeLogo=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.kerf=o),void 0!==n&&(this.phoneWidth=n),void 0!==s&&(this.phoneHeight=s),void 0!==a&&(this.phoneThickness=a),void 0!==c&&(this.backLength=c),void 0!==h&&(this.angle=h),void 0!==l&&(this.offsetAroundPhone=l),void 0!==u&&(this.penShelf=u),void 0!==d&&(this.phoneLockHeight=d),void 0!==p&&(this.filletRadius=p),void 0!==f&&(this.includePattern=f),void 0!==v&&(this.densityPattern=v),void 0!==g&&(this.holesForWire=g),void 0!==m&&(this.wireInputThickness=m),void 0!==b&&(this.includeModel=b),void 0!==y&&(this.includeDrawings=y),void 0!==x&&(this.spacingDrawings=x),void 0!==w&&(this.rotation=w),void 0!==S&&(this.origin=S),void 0!==k&&(this.direction=k),void 0!==C&&(this.scale=C)}}class ua{}class da{constructor(){this.cutWiresColor="#000000",this.engravingWiresColor="#0000ff",this.fileName="bitbybit-droplets-phone-holder",this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7}}class pa{constructor(){this.fileName="bitbybit-droplets-phone-holder",this.adjustYZ=!0}}class fa{constructor(){this.type="parametric-model",this.name="dropletsPhoneHolder"}}class va{}class ga{}class ma{}class ba{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m,b,y,x,w,S,k,C,P,M,T,D,_){this.widthFirstWing=4,this.lengthFirstWing=10,this.terraceWidth=3,this.widthSecondWing=5,this.lengthSecondWing=10,this.heightWalls=3,this.roofAngleFirstWing=15,this.roofAngleSecondWing=25,this.roofOffset=.5,this.roofInsideOverhang=.5,this.roofMaxDistAttachmentBeams=.8,this.roofAttachmentBeamWidth=.2,this.roofAttachmentBeamHeight=.05,this.roofOutsideOverhang=.5,this.columnSize=.3,this.ceilingBeamHeight=.25,this.ceilingBeamWidth=.1,this.nrCeilingBeamsBetweenColumns=3,this.distBetweenColumns=2,this.floorHeight=.1,this.groundLevel=.6,this.facadePanelThickness=.05,this.windowWidthOffset=.1,this.windowHeightOffset=.2,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05,this.lod=Cs.high,this.skinOpacity=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.widthFirstWing=e),void 0!==t&&(this.lengthFirstWing=t),void 0!==r&&(this.terraceWidth=r),void 0!==i&&(this.widthSecondWing=i),void 0!==o&&(this.lengthSecondWing=o),void 0!==n&&(this.heightWalls=n),void 0!==s&&(this.roofAngleFirstWing=s),void 0!==a&&(this.roofAngleSecondWing=a),void 0!==c&&(this.roofOffset=c),void 0!==h&&(this.roofInsideOverhang=h),void 0!==l&&(this.roofMaxDistAttachmentBeams=l),void 0!==u&&(this.roofAttachmentBeamWidth=u),void 0!==d&&(this.roofAttachmentBeamHeight=d),void 0!==p&&(this.roofOutsideOverhang=p),void 0!==f&&(this.columnSize=f),void 0!==v&&(this.ceilingBeamHeight=v),void 0!==g&&(this.ceilingBeamWidth=g),void 0!==m&&(this.nrCeilingBeamsBetweenColumns=m),void 0!==b&&(this.distBetweenColumns=b),void 0!==y&&(this.floorHeight=y),void 0!==x&&(this.groundLevel=x),void 0!==w&&(this.facadePanelThickness=w),void 0!==S&&(this.windowWidthOffset=S),void 0!==k&&(this.windowHeightOffset=k),void 0!==C&&(this.windowFrameThickness=C),void 0!==P&&(this.windowGlassFrameThickness=P),void 0!==M&&(this.lod=M),void 0!==T&&(this.skinOpacity=T),void 0!==D&&(this.rotation=D),void 0!==_&&(this.origin=_)}}class ya{constructor(){this.type="parametric-model",this.name="zenHideout"}}class xa{}class wa{}class Sa{constructor(){this.wallThickness=.4,this.facadePanelThickness=.05,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThckness=.05,this.height=3,this.lengthFirst=1,this.lengthSecond=2,this.rotation=0}}class ka{constructor(){this.thickness=.3,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThickness=.05,this.height=3,this.width=1,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0]}}class Ca extends ka{}class Pa extends Sa{}class Ma{constructor(){this.name="sandwitch-panel",this.createWindow=!0,this.createInnerPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelWidth=.4,this.exteriorPanelHeight=3,this.exteriorPanelThickness=.05,this.exteriorPanelBottomOffset=0,this.interiorPanelWidth=.4,this.interiorPanelHeight=3,this.interiorPanelThickness=.05,this.interiorPanelBottomOffset=0,this.windowWidthOffset=0,this.windowHeightOffset=0,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05}}class Ta{constructor(){this.name="sandwitch-panel-flex",this.createInteriorPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelThickness=.05,this.interiorPanelThickness=.05,this.interiorPanelPolygonPoints=[],this.exteriorPanelPolygonPoints=[]}}class Da extends Ma{}class _a extends Ta{}class Oa{}class Ea{}class Wa{}class Aa{}class Ia{}class Ba{}class Ra{constructor(){this.invert=!1,this.widthFirstLanding=1,this.widthSecondLanding=1,this.lengthFirstWing=2,this.lengthSecondWing=1,this.maxWishedStepHeight=.25,this.stepHeightWidthProportion=1.35,this.totalHeight=1,this.rotation=0,this.origin=[0,0,0]}}class La extends Ra{}class Fa{}class Ua{constructor(){this.name="roof-cover",this.roofAngle=15,this.roofLength=3,this.roofWidth=3,this.roofOutsideOverhang=.5,this.roofInsideOverhang=1,this.roofOverhangFacade=.1,this.roofThickness=.05,this.roofCoverHeight=.3,this.rotation=0,this.lod=Cs.high,this.center=[0,0,0],this.direction=[0,1,0]}}class za extends Ua{}class Na{}class Ga{}class Va{constructor(){this.widthFirstWing=1,this.widthSecondWing=2,this.lengthStairFirstWing=2,this.lengthStairSecondWing=1,this.lengthWallFirstWing=2,this.lengthWallSecondWing=1,this.facadePanelThickness=.05,this.wallThickness=3,this.wallHeightExterior=3,this.wallHeightInterior=3,this.windowFrameOffsetTop=.3,this.windowFrameThickness=.1,this.glassFrameThickness=.05,this.doorWidth=1,this.windowWidthOffset=.3,this.stairTotalHeight=1,this.createStair=!1,this.flipDirection=!1,this.rotation=0,this.origin=[0,0,0]}}class Ha{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.5,this.holeDiameter=1.5,this.holeDistToBottom=2.5,this.stickLength=1.2,this.stickDiameter=.5,this.baseAttachmentHeight=2,this.roofOverhang=1,this.rotation=0,this.chimneyHeight=1,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.holeDiameter=o),void 0!==n&&(this.holeDistToBottom=n),void 0!==s&&(this.stickLength=s),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.rotation=l),void 0!==u&&(this.chimneyHeight=u),void 0!==d&&(this.origin=d)}}class ja{constructor(){this.type="parametric-model",this.name="wingtipVilla"}}class qa{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.3,this.holeDiameter=1.2,this.holeDistToBottom=2.5,this.stickLength=.9,this.stickDiameter=.3,this.baseAttachmentHeight=2,this.roofOverhang=.5,this.roofAngle=20,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==o&&(this.holeDiameter=o),void 0!==n&&(this.holeDistToBottom=n),void 0!==s&&(this.stickLength=s),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.roofAngle=l),void 0!==u&&(this.rotation=u),void 0!==d&&(this.origin=d)}}class Za{constructor(){this.type="parametric-model",this.name="chirpyChalet"}}class Ya{}class Xa{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f){this.sittingHeight=.45,this.backRestOffset=.1,this.backRestHeight=.7,this.width=.45,this.length=.45,this.thickness=.05,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.sittingHeight=e),void 0!==t&&(this.backRestOffset=t),void 0!==r&&(this.backRestHeight=r),void 0!==i&&(this.width=i),void 0!==o&&(this.length=o),void 0!==n&&(this.thickness=n),void 0!==s&&(this.nrOrnamentPlanks=s),void 0!==a&&(this.ornamentDepth=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.precision=h),void 0!==l&&(this.drawEdges=l),void 0!==u&&(this.rotation=u),void 0!==d&&(this.scale=d),void 0!==p&&(this.origin=p),void 0!==f&&(this.direction=f)}}class Ka{constructor(){this.type="parametric-model",this.name="snakeChair"}}class $a extends As{}class Qa{}class Ja extends As{}class ec{}class tc{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class rc{}class ic{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v){this.height=.74,this.width=1,this.length=2,this.topThickness=.02,this.topOffset=.03,this.bottomThickness=.05,this.minFillet=.2,this.radiusLegTop=.03,this.radiusLegBottom=.01,this.nrLegPairs=2,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.topThickness=i),void 0!==o&&(this.topOffset=o),void 0!==n&&(this.bottomThickness=n),void 0!==s&&(this.minFillet=s),void 0!==a&&(this.radiusLegTop=a),void 0!==c&&(this.radiusLegBottom=c),void 0!==h&&(this.nrLegPairs=h),void 0!==l&&(this.precision=l),void 0!==u&&(this.drawEdges=u),void 0!==d&&(this.rotation=d),void 0!==p&&(this.scale=p),void 0!==f&&(this.origin=f),void 0!==v&&(this.direction=v)}}class oc{constructor(){this.type="parametric-model",this.name="elegantTable"}}class nc extends As{}class sc{}class ac extends As{}class cc extends As{}class hc{constructor(){this.index=0}}class lc{}class uc{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class dc{}class pc{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g,m){this.height=.4,this.width=1,this.length=1.2,this.chamfer=.01,this.topThickness=.05,this.topGlassOffset=.2,this.glassThickness=.005,this.glassHolderLength=.02,this.shelfTopOffset=.15,this.shelfThickness=.03,this.legWidth=.1,this.legDepth=.05,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.chamfer=i),void 0!==o&&(this.topThickness=o),void 0!==n&&(this.topGlassOffset=n),void 0!==s&&(this.glassThickness=s),void 0!==a&&(this.glassHolderLength=a),void 0!==c&&(this.shelfTopOffset=c),void 0!==h&&(this.shelfThickness=h),void 0!==l&&(this.legWidth=l),void 0!==u&&(this.legDepth=u),void 0!==d&&(this.precision=d),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class fc{constructor(){this.type="parametric-model",this.name="goodCoffeeTable"}}class vc extends As{}class gc{}class mc extends As{}class bc extends As{}class yc extends As{}class xc{constructor(){this.index=0}}class wc{}class Sc{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class kc{}class Cc{constructor(e,t,r,i,o,n,s,a,c,h,l,u,d,p,f,v,g){this.height=.74,this.width=1,this.length=2,this.supportLength=.5,this.shelfHeight=.2,this.thickness=.05,this.glassThickness=.005,this.glassOffset=0,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.supportLength=i),void 0!==o&&(this.shelfHeight=o),void 0!==n&&(this.thickness=n),void 0!==s&&(this.glassThickness=s),void 0!==a&&(this.glassOffset=a),void 0!==c&&(this.nrOrnamentPlanks=c),void 0!==h&&(this.ornamentDepth=h),void 0!==l&&(this.filletRadius=l),void 0!==u&&(this.precision=u),void 0!==d&&(this.drawEdges=d),void 0!==p&&(this.rotation=p),void 0!==f&&(this.scale=f),void 0!==v&&(this.origin=v),void 0!==g&&(this.direction=g)}}class Pc{constructor(){this.type="parametric-model",this.name="snakeTable"}}class Mc extends As{}class Tc{}class Dc extends As{}class _c{}class Oc{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}!function(e){e.Aboreto="Aboreto",e.Bungee="Bungee",e.IndieFlower="IndieFlower",e.Lugrasimo="Lugrasimo",e.Orbitron="Orbitron",e.Roboto="Roboto",e.RobotoSlab="RobotoSlab",e.Silkscreen="Silkscreen",e.Tektur="Tektur",e.Workbench="Workbench"}(Ps||(Ps={})),function(e){e.Regular="Regular",e.Black="Black",e.Bold="Bold",e.ExtraBold="ExtraBold",e.Medium="Medium",e.SemiBold="SemiBold",e.BlackItalic="BlackItalic",e.BoldItalic="BoldItalic",e.Italic="Italic",e.Light="Light",e.LightItalic="LightItalic",e.MediumItalic="MediumItalic",e.Thin="Thin",e.ThinItalic="ThinItalic",e.ExtraLight="ExtraLight"}(Ms||(Ms={})),function(e){e.separatedExtrusion="separatedExtrusion",e.integratedExtrusion="integratedExtrusion",e.cutout="cutout"}(Ts||(Ts={})),function(e){e.compound="compound",e.cutout="originalCutout",e.cutoutInsideCharacter="cutoutInsideCharacter"}(Ds||(Ds={})),function(e){e.leftTop="leftTop",e.leftMiddle="leftMiddle",e.leftBottom="leftBottom",e.centerTop="centerTop",e.centerMiddle="centerMiddle",e.centerBottom="centerBottom",e.rightTop="rightTop",e.rightMiddle="rightMiddle",e.rightBottom="rightBottom"}(_s||(_s={}));const Ec=[{key:"Aboreto",variants:["Regular"]},{key:"Bungee",variants:["Regular"]},{key:"IndieFlower",variants:["Regular"]},{key:"Lugrasimo",variants:["Regular"]},{key:"Orbitron",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Roboto",variants:["Black","BlackItalic","Bold","BoldItalic","Italic","Light","LightItalic","Medium","MediumItalic","Regular","Thin","ThinItalic"]},{key:"RobotoSlab",variants:["Black","Bold","ExtraBold","ExtraLight","Light","Medium","Regular","SemiBold","Thin"]},{key:"Silkscreen",variants:["Bold","Regular"]},{key:"Tektur",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Workbench",variants:["Regular"]}];class Wc{constructor(e,t,r,i,o,n,s,a,c){this.text="bitbybit.dev",this.fontType=Ps.Roboto,this.fontVariant=Ms.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=_s.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontType=t),void 0!==r&&(this.fontVariant=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==n&&(this.rotation=n),void 0!==s&&(this.origin=s),void 0!==a&&(this.direction=a),void 0!==c&&(this.originAlignment=c)}}class Ac{constructor(e,t,r,i,o,n,s,a){this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=_s.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontUrl=t),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==o&&(this.rotation=o),void 0!==n&&(this.origin=n),void 0!==s&&(this.direction=s),void 0!==a&&(this.originAlignment=a)}}class Ic{constructor(e,t,r,i,o,n,s,a){this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=_s.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.letterPaths=t),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==o&&(this.rotation=o),void 0!==n&&(this.origin=n),void 0!==s&&(this.direction=s),void 0!==a&&(this.originAlignment=a)}}class Bc{constructor(e,t,r,i,o,n,s,a,c,h,l,u){this.facePlanar=!1,this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontType=Ps.Roboto,this.fontVariant=Ms.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.fontType=o),void 0!==n&&(this.fontVariant=n),void 0!==s&&(this.fontSize=s),void 0!==a&&(this.height=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.originParamU=h),void 0!==l&&(this.originParamV=l),void 0!==u&&(this.originAlignment=u)}}class Rc{constructor(e,t,r,i,o,n,s,a,c,h,l){this.facePlanar=!1,this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.fontUrl=o),void 0!==n&&(this.fontSize=n),void 0!==s&&(this.height=s),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class Lc{constructor(e,t,r,i,o,n,s,a,c,h,l){this.facePlanar=!1,this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==o&&(this.letterPaths=o),void 0!==n&&(this.fontSize=n),void 0!==s&&(this.height=s),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class Fc{constructor(){this.type="parametric-model",this.name="text3d"}}class Uc{constructor(){this.index=0}}class zc{}class Nc{}class Gc{constructor(e,t,r,i,o,n,s,a,c,h){this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontType=Ps.Roboto,this.fontVariant=Ms.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.fontType=r),void 0!==i&&(this.fontVariant=i),void 0!==o&&(this.fontSize=o),void 0!==n&&(this.height=n),void 0!==s&&(this.rotation=s),void 0!==a&&(this.originParamU=a),void 0!==c&&(this.originParamV=c),void 0!==h&&(this.originAlignment=h)}}class Vc{constructor(e,t,r,i,o,n,s,a,c){this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.fontUrl=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==n&&(this.rotation=n),void 0!==s&&(this.originParamU=s),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class Hc{constructor(e,t,r,i,o,n,s,a,c){this.faceTextVar=Ts.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=_s.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.letterPaths=r),void 0!==i&&(this.fontSize=i),void 0!==o&&(this.height=o),void 0!==n&&(this.rotation=n),void 0!==s&&(this.originParamU=s),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class jc{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class qc{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class Zc{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class Yc{constructor(e,t,r,i){this.uNumber=10,this.vNumber=10,this.height=.2,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==i&&(this.height=i)}}class Xc{constructor(e,t,r,i,o,n,s){this.uNumber=10,this.vNumber=5,this.defaultHeight=.2,this.affectMinHeight=0,this.affectMaxHeight=1,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==t&&(this.affectorPoints=t),void 0!==r&&(this.uNumber=r),void 0!==i&&(this.vNumber=i),void 0!==o&&(this.affectMinHeight=o),void 0!==n&&(this.affectMaxHeight=n),void 0!==s&&(this.precision=s)}}class Kc{constructor(){this.type="parametric-model",this.name="patternsFacePatternPyramidSimple"}}class $c{constructor(){this.index=0}}class Qc{}class Jc{}class eh{}class th{}class rh{constructor(){this.faceIndex=0}}class ih{constructor(){this.faceIndex=0,this.uIndex=0,this.vIndex=0}}class oh{constructor(){this.faceIndex=0,this.uIndex=0}}class nh{constructor(){this.faceIndex=0,this.vIndex=0}}class sh{}class ah{}var ch;!function(e){e.wire="wire",e.face="face",e.solid="solid"}(ch||(ch={}));var hh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class lh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return hh(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.arabicArchway",e);if(t){const e=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},e),{type:t.data.type,name:t.data.name,compound:t.compound,shapes:t.shapes,originalInputs:t.data.originalInputs})}}))}drawModel(e,t=.003){return hh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;this.materials||(this.materials=this.createMaterials(e.originalInputs.lod)),i.faceOpacity=0,i.edgeColour="#bc7e5b",i.edgeWidth=.6,i.precision=t;const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?e.originalInputs.lod===Cs.high&&"compound"===t?r(void 0):this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)})):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,t)=>{const i=s[t];if(i){if(i.parent=r,void 0!==this.materials[e]){const t=i.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}i.name=e,i.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=i}})),r}))}dispose(e){return hh(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}disposeMaterials(){this.materials&&Object.keys(this.materials).forEach((e=>{const t=this.materials[e];t&&t.dispose()}))}createMaterials(e){const t=new zs;return e===Cs.high?t.compound=this.createBaseMaterial():t.compound=this.createOpaqueMaterial(),t.vasePartsCompound=this.createBaseMaterial(),t.glassPartsCompound=this.createGlassMaterial(),t.vaseBaseCompound=this.createBaseMaterial(),t}createOpaqueMaterial(){const e=new q.PBRMaterial("opaqueMat"+Math.random(),this.context.scene);return e.albedoColor=new q.Color3(1,1,1),e.ambientColor=q.Color3.FromHexString("#ffffff"),e.metallic=0,e.roughness=.7,e.zOffset=1,e.backFaceCulling=!1,e.alpha=.3,e}createBaseMaterial(){const e=new q.PBRMaterial("faceMaterial"+Math.random(),this.context.scene);return e.albedoColor=new q.Color3(1,1,1),e.ambientColor=q.Color3.FromHexString("#ffffff"),e.metallic=0,e.roughness=.7,e.zOffset=1,e}createGlassMaterial(){const e=new q.PBRMaterial("faceGlassMaterial"+Math.random(),this.context.scene);return e.albedoColor=new q.Color3(0,0,.05),e.ambientColor=q.Color3.FromHexString("#ffffff"),e.metallic=.8,e.roughness=.1,e.zOffset=1,e.alpha=.5,e}}class uh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.serenitySwirl=new Es(this.occWorkerManager,this.context,this.draw,this.occt),this.arabicArchway=new lh(this.occWorkerManager,this.context,this.draw,this.occt)}}var dh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class ph{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return dh(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.eternalLove",e);return t?{type:t.data.type,originalInputs:t.data.originalInputs,name:t.data.name,compound:t.compound}:void 0}))}drawModel(e,t=.003){return dh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;i.faceOpacity=0,i.edgeColour="#bc7e5b",i.edgeWidth=.6,i.precision=t;const o=yield this.draw.drawAnyAsync({entity:e.compound,options:i}),n=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return n.albedoColor=new q.Color3(1,.9,1),n.ambientColor=q.Color3.FromHexString("#ff00ff"),n.metallic=.8,n.roughness=.7,n.zOffset=1,o.getChildMeshes()[0].material=n,o.material=n,o.parent=r,r}))}dispose(e){return dh(this,void 0,void 0,(function*(){const t=[e.compound];yield this.occt.deleteShapes({shapes:t})}))}}class fh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.eternalLove=new ph(this.occWorkerManager,this.context,this.draw,this.occt)}}var vh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class gh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return vh(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.calmCup",e);return t?{type:t.data.type,originalInputs:t.data.originalInputs,name:t.data.name,compound:t.compound}:void 0}))}drawModel(e){return vh(this,void 0,void 0,(function*(){const t=new q.Mesh("brepMesh"+Math.random(),this.context.scene),r=new vr.DrawOcctShapeOptions;r.faceOpacity=0,r.edgeColour="#bc7e5b",r.edgeWidth=.6*e.originalInputs.scale,r.precision=e.originalInputs.precision*e.originalInputs.scale;const i=yield this.draw.drawAnyAsync({entity:e.compound,options:r}),o=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return o.albedoColor=new q.Color3(1,1,1),o.ambientColor=q.Color3.FromHexString("#ffffff"),o.metallic=.8,o.roughness=.7,o.zOffset=2,i.getChildMeshes()[0].material=o,i.material=o,i.parent=t,t}))}dispose(e){return vh(this,void 0,void 0,(function*(){const t=[e.compound];yield this.occt.deleteShapes({shapes:t})}))}}var mh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class bh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return mh(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.dragonCup",e);return t?{type:t.data.type,originalInputs:t.data.originalInputs,name:t.data.name,compound:t.compound}:void 0}))}getCompoundShape(e){return e.model.compound}drawModel(e){return mh(this,void 0,void 0,(function*(){const t=new q.Mesh("brepMesh"+Math.random(),this.context.scene),r=new vr.DrawOcctShapeOptions;r.faceOpacity=0,r.edgeColour="#617bff",r.edgeWidth=.6*e.originalInputs.scale,r.precision=e.originalInputs.precision*e.originalInputs.scale;const i=yield this.draw.drawAnyAsync({entity:e.compound,options:r}),o=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return o.albedoColor=q.Color3.FromHexString("#2b00ff"),o.ambientColor=q.Color3.FromHexString("#ffffff"),o.metallic=.9,o.roughness=.3,o.zOffset=2,i.getChildMeshes()[0].material=o,i.material=o,i.parent=t,t}))}}class yh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.calmCup=new gh(this.occWorkerManager,this.context,this.draw,this.occt),this.dragonCup=new bh(this.occWorkerManager,this.context,this.draw,this.occt)}}var xh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class wh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return xh(this,void 0,void 0,(function*(){void 0!==this.materials&&void 0!==this.context.scene.materials.find((e=>e.name===this.materials.main.name))||(this.materials=this.createMaterials());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.phoneNest",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}getCompoundShape(e){return e.model.compound}drawOptions(e){return e}drawModel(e,t){return xh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;t?(i.drawEdges=t.drawEdges,i.drawFaces=t.drawFaces,i.edgeColour=t.edgeColour,i.edgeWidth=t.edgeWidth,i.precision=t.precision):(i.faceOpacity=0,i.drawEdges=e.originalInputs.drawEdges,i.edgeColour="#ffffff",i.edgeWidth=.06*e.originalInputs.scale,i.precision=e.originalInputs.precision*e.originalInputs.scale);const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?("phone"===t&&(i.edgeColour="#000000"),this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)}))):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const n=s[i];if(n){if(n.parent=r,t&&t.drawFaces){const r=n.getChildMeshes()[0];void 0!==r&&(r.material=this.materials[e]),t[e+"Material"]&&(r.material=t[e+"Material"])}else if(!t&&void 0!==this.materials[e]){const t=n.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}n.name=e,n.isVisible=!0,n.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=n}})),r}))}dispose(e){return xh(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e="phone-nest-",t=new ta,r=ms.wood3Material(this.context.scene,Math.PI/2,1);r.name=e+r.name,t.main=r;const i=ms.glass(this.context.scene,"#000000");return i.name=e+i.name,t.phone=i,t}}class Sh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.phoneNest=new wh(this.occWorkerManager,this.context,this.draw,this.occt)}}class kh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.vases=new uh(this.occWorkerManager,this.context,this.draw,this.occt),this.cups=new yh(this.occWorkerManager,this.context,this.draw,this.occt),this.medals=new fh(this.occWorkerManager,this.context,this.draw,this.occt),this.desktop=new Sh(this.occWorkerManager,this.context,this.draw,this.occt)}}var Ch=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ph{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Ch(this,void 0,void 0,(function*(){void 0===this.materials&&(this.materials=this.createMaterials()),void 0===this.skin&&(this.skin=this.createSkin());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.zenHideout",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}drawModel(e,t=.003){return Ch(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;if(i.faceOpacity=0,i.edgeColour="#bc7e5b",i.edgeWidth=.06,i.precision=t,e.originalInputs.lod===Cs.high&&e.drawingPart){const t={},o=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((i=>{i.isVisible=!1,i.getChildMeshes().forEach((e=>e.isVisible=!1)),!0===this.skin[t]&&(i.visibility=e.originalInputs.skinOpacity,i.getChildMeshes().forEach((t=>t.visibility=e.originalInputs.skinOpacity))),r(i)}),(()=>{r(void 0)})):r(void 0)})))),n=yield Promise.all(o);Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const o=n[i];if(o){if(o.parent=r,void 0!==this.materials[e]){const t=o.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}o.name=e,o.isVisible=!0,o.getChildMeshes().forEach((e=>e.isVisible=!0)),t[e]=o}}))}else if(e.originalInputs.lod===Cs.middle){const t=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);t.albedoColor=new q.Color3(0,0,0),t.metallic=0,t.roughness=.7,t.zOffset=2;const o=yield this.draw.drawAnyAsync({entity:e.compound,options:i});o.getChildMeshes()[0].material=t,o.material=t,o.parent=r}else e.originalInputs.lod===Cs.low&&(i.edgeColour="#e89668",i.edgeWidth=10,(yield this.draw.drawAnyAsync({entity:e.compound,options:i})).parent=r);return r}))}dispose(e){return Ch(this,void 0,void 0,(function*(){const t=e.shapes.map((e=>e.shape));yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e="zen-hideout-",t=new wa,r=new q.PBRMetallicRoughnessMaterial(e+"windowGlassCompound",this.context.scene);r.alpha=.2,r.metallic=.9,r.roughness=.1,r.baseColor=new q.Color3(.9,.9,1),r.zOffset=2,t.windowGlassCompound=r;const i=new q.PBRMetallicRoughnessMaterial(e+"windowGlassCompound",this.context.scene);i.metallic=.1,i.roughness=.8,i.baseColor=new q.Color3(.05,.05,.05),i.zOffset=2,t.windowFrameCompound=i;const o=new q.PBRMetallicRoughnessMaterial(e+"glassFramesCompound",this.context.scene);o.metallic=.1,o.roughness=.8,o.baseColor=new q.Color3(0,0,0),o.zOffset=2,t.glassFramesCompound=o;const n=ms.metal1(this.context.scene,0,.3);t.roofCoverFirstCompound=n,t.roofCoverSecondCompound=n;const s=ms.wood1Material(this.context.scene,0,1);t.beamsCompound=s,t.columnsCompound=s;const a=ms.woodenPlanks(this.context.scene,0,1);t.firstFloorExteriorPanelsCompound=a;const c=new q.PBRMetallicRoughnessMaterial(e+"firstFloorInteriorPanelsCompound",this.context.scene);c.metallic=.1,c.roughness=.8,c.baseColor=new q.Color3(.1,.1,.1),c.zOffset=2,t.firstFloorInteriorPanelsCompound=c;const h=ms.wood3Material(this.context.scene,Math.PI/2,1);t.roofExteriorPanelsCompound=h;const l=new q.PBRMetallicRoughnessMaterial(e+"roofInteriorPanelsCompound",this.context.scene);l.metallic=.1,l.roughness=.8,l.baseColor=new q.Color3(.3,.3,.3),l.zOffset=2,t.roofInteriorPanelsCompound=l;const u=ms.wood2Material(this.context.scene,0,.5);t.floorCompound=u;const d=new q.PBRMetallicRoughnessMaterial(e+"ceilingCompound",this.context.scene);d.metallic=.3,d.roughness=.7,d.baseColor=new q.Color3(1,1,1),d.zOffset=2,t.ceilingCompound=d;const p=ms.brushedConcrete(this.context.scene,0,1);return t.stairsCompound=p,t}createSkin(){return{windowGlassCompound:!0,glassFramesCompound:!1,windowFrameCompound:!1,beamsCompound:!1,columnsCompound:!1,firstFloorExteriorPanelsCompound:!0,firstFloorInteriorPanelsCompound:!0,roofExteriorPanelsCompound:!0,roofInteriorPanelsCompound:!0,roofCoverFirstCompound:!0,roofCoverSecondCompound:!0,floorCompound:!0,ceilingCompound:!0,stairsCompound:!1}}}class Mh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.zenHideout=new Ph(this.occWorkerManager,this.context,this.draw,this.occt)}}class Th{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.houses=new Mh(this.occWorkerManager,this.context,this.draw,this.occt)}}class Dh{lodEnum(e){return e.lod}}var _h=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Oh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return _h(this,void 0,void 0,(function*(){void 0!==this.materials&&void 0!==this.context.scene.materials.find((e=>e.name===this.materials.top.name))||(this.materials=this.createMaterials());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.elegantTable",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}getCompoundShape(e){return e.model.compound}getLegShapes(e){return e.model.legParts.map((e=>e.shapes.leg))}getLegShapeByIndex(e){return e.index>=0&&e.index<e.model.legParts.length?e.model.legParts[e.index].shapes.leg:void 0}getTopPanelShape(e){return e.model.topPart.shapes.topPanel}getTopPanelWireShape(e){return e.model.topPart.shapes.topWire}getBottomPanelWireShape(e){return e.model.topPart.shapes.bottomWire}getBottomPanelShape(e){return e.model.topPart.shapes.bottomPanel}getLegsCompoundShape(e){return e.model.drawingPart.shapes.legs}getTableTopCenterPoint(e){return e.model.topPart.topCenter}getTableBottomCenterPoint(e){return e.model.topPart.bottomCenter}getLegBottomPoints(e){return e.model.legParts.map((e=>e.bottomCenter))}getLegTopPoints(e){return e.model.legParts.map((e=>e.topCenter))}drawOptions(e){return e}drawModel(e,t){return _h(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;t?(i.drawEdges=t.drawEdges,i.drawFaces=t.drawFaces,i.edgeColour=t.edgeColour,i.edgeWidth=t.edgeWidth,i.precision=t.precision):(i.faceOpacity=0,i.drawEdges=e.originalInputs.drawEdges,i.edgeColour="#bc7e5b",i.edgeWidth=.06*e.originalInputs.scale,i.precision=e.originalInputs.precision*e.originalInputs.scale);const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)})):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const n=s[i];if(n){if(n.parent=r,t&&t.drawFaces){const r=n.getChildMeshes()[0];void 0!==r&&(r.material=this.materials[e]),t[e+"Material"]&&(r.material=t[e+"Material"])}else if(!t&&void 0!==this.materials[e]){const t=n.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}n.name=e,n.isVisible=!0,n.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=n}})),r}))}dispose(e){return _h(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e="elegant-table-",t=new sc,r=ms.wood3Material(this.context.scene,Math.PI/2,2);r.name=e+r.name,t.top=r;const i=ms.wood1Material(this.context.scene,Math.PI/2,2);i.name=e+r.name,t.topBase=i;const o=ms.wood1Material(this.context.scene,0,1);return o.name=e+r.name,t.legs=o,t}}var Eh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Wh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Eh(this,void 0,void 0,(function*(){void 0!==this.materials&&void 0!==this.context.scene.materials.find((e=>e.name===this.materials.top.name))||(this.materials=this.createMaterials());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.goodCoffeeTable",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}getCompoundShape(e){return e.model.compound}getLegShapes(e){return e.model.legParts.map((e=>e.shapes.leg))}getLegShapeByIndex(e){return e.index>=0&&e.index<e.model.legParts.length?e.model.legParts[e.index].shapes.leg:void 0}getTopPanelShape(e){return e.model.topPart.shapes.topFrame}getTopPanelWireShape(e){return e.model.topPart.shapes.topWire}getGlassPanelShape(e){return e.model.topPart.shapes.glassPanel}getGlassPanelWireShape(e){return e.model.topPart.shapes.glassWire}getShelfShape(e){return e.model.shelfPart.shapes.compound}getShelfTopWireShape(e){return e.model.shelfPart.shapes.topWire}getLegsCompoundShape(e){return e.model.drawingPart.shapes.legs}getTableTopCenterPoint(e){return e.model.topPart.topCenter}getTableShelfTopCenterPoint(e){return e.model.shelfPart.topCenter}getLegBottomPoints(e){return e.model.legParts.map((e=>e.bottomCenter))}getLegTopPoints(e){return e.model.legParts.map((e=>e.topCenter))}drawOptions(e){return e}drawModel(e,t){return Eh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;t?(i.drawEdges=t.drawEdges,i.drawFaces=t.drawFaces,i.edgeColour=t.edgeColour,i.edgeWidth=t.edgeWidth,i.precision=t.precision):(i.faceOpacity=0,i.drawEdges=e.originalInputs.drawEdges,i.edgeColour="#bc7e5b",i.edgeWidth=.06*e.originalInputs.scale,i.precision=e.originalInputs.precision*e.originalInputs.scale);const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)})):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const n=s[i];if(n){if(n.parent=r,t&&t.drawFaces){const r=n.getChildMeshes()[0];void 0!==r&&(r.material=this.materials[e]),t[e+"Material"]&&(r.material=t[e+"Material"])}else if(!t&&void 0!==this.materials[e]){const t=n.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}n.name=e,n.isVisible=!0,n.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=n}})),r}))}dispose(e){return Eh(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e="good-coffee-table-",t=new gc,r=ms.wood3Material(this.context.scene,Math.PI/2,2);r.name=e+r.name,t.top=r,t.legs=r,t.shelf=r;const i=ms.glass(this.context.scene,"#000000");return i.name=e+r.name,t.topGlass=i,t}}var Ah=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Ih{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Ah(this,void 0,void 0,(function*(){void 0!==this.materials&&void 0!==this.context.scene.materials.find((e=>e.name===this.materials.main.name))||(this.materials=this.createMaterials());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.snakeTable",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}getCompoundShape(e){return e.model.compound}getGlassShape(e){return e.model.mainPart.shapes.glass}getMainShape(e){return e.model.mainPart.shapes.main}getTopCenterPoint(e){return e.model.mainPart.topCenter}drawOptions(e){return e}drawModel(e,t){return Ah(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;t?(i.drawEdges=t.drawEdges,i.drawFaces=t.drawFaces,i.edgeColour=t.edgeColour,i.edgeWidth=t.edgeWidth,i.precision=t.precision):(i.faceOpacity=0,i.drawEdges=e.originalInputs.drawEdges,i.edgeColour="#000000",i.edgeWidth=.06*e.originalInputs.scale,i.precision=e.originalInputs.precision*e.originalInputs.scale);const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)})):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const n=s[i];if(n){if(n.parent=r,t&&t.drawFaces){const r=n.getChildMeshes()[0];void 0!==r&&(r.material=this.materials[e]),t[e+"Material"]&&(r.material=t[e+"Material"])}else if(!t&&void 0!==this.materials[e]){const t=n.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}n.name=e,n.isVisible=!0,n.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=n}})),r}))}dispose(e){return Ah(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e="snake-table-",t=new Tc,r=ms.roughPlastic(this.context.scene,"#ffffff");r.name=e+r.name,t.main=r;const i=ms.glass(this.context.scene,"#000000");return i.name=e+i.name,t.glass=i,t}}class Bh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.elegantTable=new Oh(this.occWorkerManager,this.context,this.draw,this.occt),this.goodCoffeeTable=new Wh(this.occWorkerManager,this.context,this.draw,this.occt),this.snakeTable=new Ih(this.occWorkerManager,this.context,this.draw,this.occt)}}var Rh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Lh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Rh(this,void 0,void 0,(function*(){void 0!==this.materials&&void 0!==this.context.scene.materials.find((e=>e.name===this.materials.main.name))||(this.materials=this.createMaterials());const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.snakeChair",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}getCompoundShape(e){return e.model.compound}getSittingWireShape(e){return e.model.mainPart.shapes.sittingWire}getSittingAreaCenterPoint(e){return e.model.mainPart.sittingCenter}drawOptions(e){return e}drawModel(e,t){return Rh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;t?(i.drawEdges=t.drawEdges,i.drawFaces=t.drawFaces,i.edgeColour=t.edgeColour,i.edgeWidth=t.edgeWidth,i.precision=t.precision):(i.faceOpacity=0,i.drawEdges=e.originalInputs.drawEdges,i.edgeColour="#000000",i.edgeWidth=.06*e.originalInputs.scale,i.precision=e.originalInputs.precision*e.originalInputs.scale);const o={},n=Object.keys(e.drawingPart.shapes).map((t=>new Promise((r=>{e.drawingPart.shapes[t]?this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:i}).then((e=>{e.isVisible=!1,e.getChildMeshes().forEach((e=>e.isVisible=!1)),r(e)}),(()=>{r(void 0)})):r(void 0)})))),s=yield Promise.all(n);return Object.keys(e.drawingPart.shapes).forEach(((e,i)=>{const n=s[i];if(n){if(n.parent=r,t&&t.drawFaces){const r=n.getChildMeshes()[0];void 0!==r&&(r.material=this.materials[e]),t[e+"Material"]&&(r.material=t[e+"Material"])}else if(!t&&void 0!==this.materials[e]){const t=n.getChildMeshes()[0];void 0!==t&&(t.material=this.materials[e])}n.name=e,n.isVisible=!0,n.getChildMeshes().forEach((e=>e.isVisible=!0)),o[e]=n}})),r}))}dispose(e){return Rh(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}createMaterials(){const e=new Qa,t=ms.roughPlastic(this.context.scene,"#ffffff");return t.name="snake-chair-"+t.name,e.main=t,e}}class Fh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.snakeChair=new Lh(this.occWorkerManager,this.context,this.draw,this.occt)}}class Uh{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.chairs=new Fh(this.occWorkerManager,this.context,this.draw,this.occt),this.tables=new Bh(this.occWorkerManager,this.context,this.draw,this.occt)}}var zh,Nh,Gh=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Vh{constructor(e,t,r,i,o){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.jscad=o}create(e){return Gh(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.things.dropletsPhoneHolder",e);if(t){const e=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},e),{type:t.data.type,name:t.data.name,compound:t.compound,shapes:t.shapes,originalInputs:t.data.originalInputs})}}))}getCompoundShape(e){return e.model.compound}getCutWiresCompound(e){var t,r;return null===(r=null===(t=e.model.drawingPart)||void 0===t?void 0:t.shapes)||void 0===r?void 0:r.cutWiresCompound}getEngravingWiresCompound(e){var t,r;return null===(r=null===(t=e.model.drawingPart)||void 0===t?void 0:t.shapes)||void 0===r?void 0:r.engravingWiresCompound}downloadDXFDrawings(e){var t,r,i,o,n,s;return Gh(this,void 0,void 0,(function*(){if(null===(i=null===(r=null===(t=e.model)||void 0===t?void 0:t.drawingPart)||void 0===r?void 0:r.shapes)||void 0===i?void 0:i.cutWiresCompound){const t=[],r=yield this.occt.transforms.rotate({shape:e.model.drawingPart.shapes.cutWiresCompound,angle:180,axis:[0,1,0]});t.push(r);const i=yield this.occt.transforms.rotate({shape:r,angle:90,axis:[-1,0,0]});t.push(i);const a=new et.WiresToPointsDto;a.shape=i,a.angularDeflection=e.angularDeflection,a.curvatureDeflection=e.curvatureDeflection,a.minimumLength=e.minimumLength,a.minimumOfPoints=e.minimumOfPoints,a.uTolerance=e.uTolerance;const c=yield this.occt.shapes.wire.wiresToPoints(a),h=yield this.jscad.path.createPathsFromPoints({pointsLists:c}),l=yield this.jscad.colors.colorize({geometry:h,color:e.cutWiresColor});let u=[];if(null===(s=null===(n=null===(o=e.model)||void 0===o?void 0:o.drawingPart)||void 0===n?void 0:n.shapes)||void 0===s?void 0:s.engravingWiresCompound){const r=yield this.occt.transforms.rotate({shape:e.model.drawingPart.shapes.engravingWiresCompound,angle:180,axis:[0,1,0]});t.push(r);const i=yield this.occt.transforms.rotate({shape:r,angle:90,axis:[-1,0,0]});t.push(i);const o=new et.WiresToPointsDto;o.shape=i,o.angularDeflection=e.angularDeflection,o.curvatureDeflection=e.curvatureDeflection,o.minimumLength=e.minimumLength,o.minimumOfPoints=e.minimumOfPoints,o.uTolerance=e.uTolerance;const n=yield this.occt.shapes.wire.wiresToPoints(o),s=yield this.jscad.path.createPathsFromPoints({pointsLists:n});u=yield this.jscad.colors.colorize({geometry:s,color:e.engravingWiresColor})}const d=[...l,...u];this.jscad.downloadGeometryDxf({geometry:d,fileName:e.fileName,options:void 0}),yield this.occt.deleteShapes({shapes:t})}}))}downloadSTEPDrawings(e){var t,r,i;return Gh(this,void 0,void 0,(function*(){if(null===(i=null===(r=null===(t=e.model)||void 0===t?void 0:t.drawingPart)||void 0===r?void 0:r.shapes)||void 0===i?void 0:i.cutWiresCompound){const t=[e.model.drawingPart.shapes.cutWiresCompound];e.model.drawingPart.shapes.engravingWiresCompound&&t.push(e.model.drawingPart.shapes.engravingWiresCompound);const r=new et.SaveStepDto;r.fileName=e.fileName,r.adjustYtoZ=e.adjustYZ,r.tryDownload=!0,r.shape=yield this.occt.shapes.compound.makeCompound({shapes:t}),this.occt.io.saveShapeSTEP(r)}}))}download3dSTEPModel(e){var t,r,i,o,n,s;return Gh(this,void 0,void 0,(function*(){if(null===(i=null===(r=null===(t=e.model)||void 0===t?void 0:t.drawingPart)||void 0===r?void 0:r.shapes)||void 0===i?void 0:i.phoneHolderCompound){const t=new et.SaveStepDto;t.fileName=e.fileName,t.adjustYtoZ=e.adjustYZ,t.tryDownload=!0,t.shape=null===(s=null===(n=null===(o=e.model)||void 0===o?void 0:o.drawingPart)||void 0===n?void 0:n.shapes)||void 0===s?void 0:s.phoneHolderCompound,this.occt.io.saveShapeSTEP(t)}}))}drawModel(e,t=.3){return Gh(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;this.drawOptions||(this.drawOptions=this.createDrawOptions(t)),i.edgeColour="#000000",i.edgeWidth=2,i.precision=t;const o=Object.keys(e.drawingPart.shapes).filter((e=>"compound"!==e)).map((t=>this.draw.drawAnyAsync({entity:e.drawingPart.shapes[t],options:this.drawOptions[t]||i}))),n=yield Promise.all(o);return Object.keys(e.drawingPart.shapes).forEach(((e,t)=>{const i=n[t];i&&(i.parent=r,i.name=e)})),r}))}dispose(e){return Gh(this,void 0,void 0,(function*(){const t=[...e.shapes.map((e=>e.shape))];yield this.occt.deleteShapes({shapes:t})}))}disposeMaterials(){this.drawOptions&&Object.keys(this.drawOptions).forEach((e=>{const t=this.drawOptions[e];t&&t.dispose()}))}createDrawOptions(e){const t=new ga;return t.compound=new vr.DrawOcctShapeOptions,t.phoneHolderCompound=new vr.DrawOcctShapeOptions,t.phoneHolderCompound.faceColour="#aa00ff",t.phoneHolderCompound.edgeColour="#ffffff",t.phoneHolderCompound.precision=e,t.engravingWiresCompound=new vr.DrawOcctShapeOptions,t.engravingWiresCompound.drawFaces=!1,t.engravingWiresCompound.edgeColour="#ff00ff",t.engravingWiresCompound.precision=e,t.cutWiresCompound=new vr.DrawOcctShapeOptions,t.cutWiresCompound.drawFaces=!1,t.cutWiresCompound.edgeColour="#ffffff",t.cutWiresCompound.precision=e,t}}class Hh{constructor(e,t,r,i,o){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.jscad=o,this.dropletsPhoneHolder=new Vh(this.occWorkerManager,this.context,this.draw,this.occt,this.jscad)}}class jh{constructor(e,t,r,i,o){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.jscad=o,this.gadgets=new Hh(this.occWorkerManager,this.context,this.draw,this.occt,this.jscad)}}class qh{constructor(e,t,r,i,o){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.jscad=o,this.kidsCorner=new ks(this.occWorkerManager,this.context,this.draw,this.occt),this.threeDPrinting=new kh(this.occWorkerManager,this.context,this.draw,this.occt),this.laserCutting=new jh(this.occWorkerManager,this.context,this.draw,this.occt,this.jscad),this.architecture=new Th(this.occWorkerManager,this.context,this.draw,this.occt),this.furniture=new Uh(this.occWorkerManager,this.context,this.draw,this.occt),this.enums=new Dh}}String.prototype.codePointAt||(Nh=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=r)){var o,n=t.charCodeAt(i);return n>=55296&&n<=56319&&r>i+1&&(o=t.charCodeAt(i+1))>=56320&&o<=57343?1024*(n-55296)+o-56320+65536:n}},(zh=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}())?zh(String.prototype,"codePointAt",{value:Nh,configurable:!0,writable:!0}):String.prototype.codePointAt=Nh);function Zh(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Yh(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Zh,this.dtree=new Zh}var Xh=new Zh,Kh=new Zh,$h=new Uint8Array(30),Qh=new Uint16Array(30),Jh=new Uint8Array(30),el=new Uint16Array(30),tl=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rl=new Zh,il=new Uint8Array(320);function ol(e,t,r,i){var o,n;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(n=i,o=0;o<30;++o)t[o]=n,n+=1<<e[o]}var nl=new Uint16Array(16);function sl(e,t,r,i){var o,n;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<i;++o)e.table[t[r+o]]++;for(e.table[0]=0,n=0,o=0;o<16;++o)nl[o]=n,n+=e.table[o];for(o=0;o<i;++o)t[r+o]&&(e.trans[nl[t[r+o]]++]=o)}function al(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function cl(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+r}function hl(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,i=0,o=0,n=e.tag;do{i=2*i+(1&n),n>>>=1,++o,r+=t.table[o],i-=t.table[o]}while(i>=0);return e.tag=n,e.bitcount-=o,t.trans[r+i]}function ll(e,t,r){var i,o,n,s,a,c;for(i=cl(e,5,257),o=cl(e,5,1),n=cl(e,4,4),s=0;s<19;++s)il[s]=0;for(s=0;s<n;++s){var h=cl(e,3,0);il[tl[s]]=h}for(sl(rl,il,0,19),a=0;a<i+o;){var l=hl(e,rl);switch(l){case 16:var u=il[a-1];for(c=cl(e,2,3);c;--c)il[a++]=u;break;case 17:for(c=cl(e,3,3);c;--c)il[a++]=0;break;case 18:for(c=cl(e,7,11);c;--c)il[a++]=0;break;default:il[a++]=l}}sl(t,il,0,i),sl(r,il,i,o)}function ul(e,t,r){for(;;){var i,o,n,s,a=hl(e,t);if(256===a)return 0;if(a<256)e.dest[e.destLen++]=a;else for(i=cl(e,$h[a-=257],Qh[a]),o=hl(e,r),s=n=e.destLen-cl(e,Jh[o],el[o]);s<n+i;++s)e.dest[e.destLen++]=e.dest[s]}}function dl(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(Xh,Kh),ol($h,Qh,4,3),ol(Jh,el,2,1),$h[28]=0,Qh[28]=258;var pl=function(e,t){var r,i,o=new Yh(e,t);do{switch(r=al(o),cl(o,2,0)){case 0:i=dl(o);break;case 1:i=ul(o,Xh,Kh);break;case 2:ll(o,o.ltree,o.dtree),i=ul(o,o.ltree,o.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!r);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest};function fl(e,t,r,i,o){return Math.pow(1-o,3)*e+3*Math.pow(1-o,2)*o*t+3*(1-o)*Math.pow(o,2)*r+Math.pow(o,3)*i}function vl(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function gl(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ml(e){throw new Error(e)}function bl(e,t){e||ml(t)}vl.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},vl.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},vl.prototype.addX=function(e){this.addPoint(e,null)},vl.prototype.addY=function(e){this.addPoint(null,e)},vl.prototype.addBezier=function(e,t,r,i,o,n,s,a){var c=[e,t],h=[r,i],l=[o,n],u=[s,a];this.addPoint(e,t),this.addPoint(s,a);for(var d=0;d<=1;d++){var p=6*c[d]-12*h[d]+6*l[d],f=-3*c[d]+9*h[d]-9*l[d]+3*u[d],v=3*h[d]-3*c[d];if(0!==f){var g=Math.pow(p,2)-4*v*f;if(!(g<0)){var m=(-p+Math.sqrt(g))/(2*f);0<m&&m<1&&(0===d&&this.addX(fl(c[d],h[d],l[d],u[d],m)),1===d&&this.addY(fl(c[d],h[d],l[d],u[d],m)));var b=(-p-Math.sqrt(g))/(2*f);0<b&&b<1&&(0===d&&this.addX(fl(c[d],h[d],l[d],u[d],b)),1===d&&this.addY(fl(c[d],h[d],l[d],u[d],b)))}}else{if(0===p)continue;var y=-v/p;0<y&&y<1&&(0===d&&this.addX(fl(c[d],h[d],l[d],u[d],y)),1===d&&this.addY(fl(c[d],h[d],l[d],u[d],y)))}}},vl.prototype.addQuad=function(e,t,r,i,o,n){var s=e+2/3*(r-e),a=t+2/3*(i-t),c=s+1/3*(o-e),h=a+1/3*(n-t);this.addBezier(e,t,s,a,c,h,o,n)},gl.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},gl.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},gl.prototype.curveTo=gl.prototype.bezierCurveTo=function(e,t,r,i,o,n){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:i,x:o,y:n})},gl.prototype.quadTo=gl.prototype.quadraticCurveTo=function(e,t,r,i){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:i})},gl.prototype.close=gl.prototype.closePath=function(){this.commands.push({type:"Z"})},gl.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof vl){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},gl.prototype.getBoundingBox=function(){for(var e=new vl,t=0,r=0,i=0,o=0,n=0;n<this.commands.length;n++){var s=this.commands[n];switch(s.type){case"M":e.addPoint(s.x,s.y),t=i=s.x,r=o=s.y;break;case"L":e.addPoint(s.x,s.y),i=s.x,o=s.y;break;case"Q":e.addQuad(i,o,s.x1,s.y1,s.x,s.y),i=s.x,o=s.y;break;case"C":e.addBezier(i,o,s.x1,s.y1,s.x2,s.y2,s.x,s.y),i=s.x,o=s.y;break;case"Z":i=t,o=r;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e},gl.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},gl.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e=arguments,r="",i=0;i<arguments.length;i+=1){var o=e[i];o>=0&&i>0&&(r+=" "),r+=t(o)}return r}e=void 0!==e?e:2;for(var i="",o=0;o<this.commands.length;o+=1){var n=this.commands[o];"M"===n.type?i+="M"+r(n.x,n.y):"L"===n.type?i+="L"+r(n.x,n.y):"C"===n.type?i+="C"+r(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?i+="Q"+r(n.x1,n.y1,n.x,n.y):"Z"===n.type&&(i+="Z")}return i},gl.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},gl.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var yl={fail:ml,argument:bl,assert:bl},xl=2147483648,wl={},Sl={},kl={};function Cl(e){return function(){return e}}Sl.BYTE=function(e){return yl.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},kl.BYTE=Cl(1),Sl.CHAR=function(e){return[e.charCodeAt(0)]},kl.CHAR=Cl(1),Sl.CHARARRAY=function(e){void 0===e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},kl.CHARARRAY=function(e){return void 0===e?0:e.length},Sl.USHORT=function(e){return[e>>8&255,255&e]},kl.USHORT=Cl(2),Sl.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},kl.SHORT=Cl(2),Sl.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},kl.UINT24=Cl(3),Sl.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},kl.ULONG=Cl(4),Sl.LONG=function(e){return e>=xl&&(e=-(2*xl-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},kl.LONG=Cl(4),Sl.FIXED=Sl.ULONG,kl.FIXED=kl.ULONG,Sl.FWORD=Sl.SHORT,kl.FWORD=kl.SHORT,Sl.UFWORD=Sl.USHORT,kl.UFWORD=kl.USHORT,Sl.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},kl.LONGDATETIME=Cl(8),Sl.TAG=function(e){return yl.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},kl.TAG=Cl(4),Sl.Card8=Sl.BYTE,kl.Card8=kl.BYTE,Sl.Card16=Sl.USHORT,kl.Card16=kl.USHORT,Sl.OffSize=Sl.BYTE,kl.OffSize=kl.BYTE,Sl.SID=Sl.USHORT,kl.SID=kl.USHORT,Sl.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?Sl.NUMBER16(e):Sl.NUMBER32(e)},kl.NUMBER=function(e){return Sl.NUMBER(e).length},Sl.NUMBER16=function(e){return[28,e>>8&255,255&e]},kl.NUMBER16=Cl(3),Sl.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},kl.NUMBER32=Cl(5),Sl.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var i=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*i)/i).toString()}for(var o="",n=0,s=t.length;n<s;n+=1){var a=t[n];o+="e"===a?"-"===t[++n]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var c=[30],h=0,l=(o+=1&o.length?"f":"ff").length;h<l;h+=2)c.push(parseInt(o.substr(h,2),16));return c},kl.REAL=function(e){return Sl.REAL(e).length},Sl.NAME=Sl.CHARARRAY,kl.NAME=kl.CHARARRAY,Sl.STRING=Sl.CHARARRAY,kl.STRING=kl.CHARARRAY,wl.UTF8=function(e,t,r){for(var i=[],o=r,n=0;n<o;n++,t+=1)i[n]=e.getUint8(t);return String.fromCharCode.apply(null,i)},wl.UTF16=function(e,t,r){for(var i=[],o=r/2,n=0;n<o;n++,t+=2)i[n]=e.getUint16(t);return String.fromCharCode.apply(null,i)},Sl.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var i=e.charCodeAt(r);t[t.length]=i>>8&255,t[t.length]=255&i}return t},kl.UTF16=function(e){return 2*e.length};var Pl={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};wl.MACSTRING=function(e,t,r,i){var o=Pl[i];if(void 0!==o){for(var n="",s=0;s<r;s++){var a=e.getUint8(t+s);n+=a<=127?String.fromCharCode(a):o[127&a]}return n}};var Ml,Tl="function"==typeof WeakMap&&new WeakMap;function Dl(e){return e>=-128&&e<=127}function _l(e,t,r){for(var i=0,o=e.length;t<o&&i<64&&0===e[t];)++t,++i;return r.push(128|i-1),t}function Ol(e,t,r){for(var i=0,o=e.length,n=t;n<o&&i<64;){var s=e[n];if(!Dl(s))break;if(0===s&&n+1<o&&0===e[n+1])break;++n,++i}r.push(i-1);for(var a=t;a<n;++a)r.push(e[a]+256&255);return n}function El(e,t,r){for(var i=0,o=e.length,n=t;n<o&&i<64;){var s=e[n];if(0===s)break;if(Dl(s)&&n+1<o&&Dl(e[n+1]))break;++n,++i}r.push(64|i-1);for(var a=t;a<n;++a){var c=e[a];r.push(c+65536>>8&255,c+256&255)}return n}Sl.MACSTRING=function(e,t){var r=function(e){if(!Ml)for(var t in Ml={},Pl)Ml[t]=new String(t);var r=Ml[e];if(void 0!==r){if(Tl){var i=Tl.get(r);if(void 0!==i)return i}var o=Pl[e];if(void 0!==o){for(var n={},s=0;s<o.length;s++)n[o.charCodeAt(s)]=s+128;return Tl&&Tl.set(r,n),n}}}(t);if(void 0!==r){for(var i=[],o=0;o<e.length;o++){var n=e.charCodeAt(o);if(n>=128&&void 0===(n=r[n]))return;i[o]=n}return i}},kl.MACSTRING=function(e,t){var r=Sl.MACSTRING(e,t);return void 0!==r?r.length:0},Sl.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var i=e[t];t=0===i?_l(e,t,r):i>=-128&&i<=127?Ol(e,t,r):El(e,t,r)}return r},Sl.INDEX=function(e){for(var t=1,r=[t],i=[],o=0;o<e.length;o+=1){var n=Sl.OBJECT(e[o]);Array.prototype.push.apply(i,n),t+=n.length,r.push(t)}if(0===i.length)return[0,0];for(var s=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,c=[void 0,Sl.BYTE,Sl.USHORT,Sl.UINT24,Sl.ULONG][a],h=0;h<r.length;h+=1){var l=c(r[h]);Array.prototype.push.apply(s,l)}return Array.prototype.concat(Sl.Card16(e.length),Sl.OffSize(a),s,i)},kl.INDEX=function(e){return Sl.INDEX(e).length},Sl.DICT=function(e){for(var t=[],r=Object.keys(e),i=r.length,o=0;o<i;o+=1){var n=parseInt(r[o],0),s=e[n];t=(t=t.concat(Sl.OPERAND(s.value,s.type))).concat(Sl.OPERATOR(n))}return t},kl.DICT=function(e){return Sl.DICT(e).length},Sl.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},Sl.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)yl.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(Sl.OPERAND(e[i],t[i]));else if("SID"===t)r=r.concat(Sl.NUMBER(e));else if("offset"===t)r=r.concat(Sl.NUMBER32(e));else if("number"===t)r=r.concat(Sl.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(Sl.REAL(e))}return r},Sl.OP=Sl.BYTE,kl.OP=kl.BYTE;var Wl="function"==typeof WeakMap&&new WeakMap;function Al(e,t,r){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var i=0;i<t.length;i+=1){var o=t[i];this[o.name]=o.value}if(this.tableName=e,this.fields=t,r)for(var n=Object.keys(r),s=0;s<n.length;s+=1){var a=n[s],c=r[a];void 0!==this[a]&&(this[a]=c)}}function Il(e,t,r){void 0===r&&(r=t.length);var i=new Array(t.length+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<t.length;o++)i[o+1]={name:e+o,type:"USHORT",value:t[o]};return i}function Bl(e,t,r){var i=t.length,o=new Array(i+1);o[0]={name:e+"Count",type:"USHORT",value:i};for(var n=0;n<i;n++)o[n+1]={name:e+n,type:"TABLE",value:r(t[n],n)};return o}function Rl(e,t,r){var i=t.length,o=[];o[0]={name:e+"Count",type:"USHORT",value:i};for(var n=0;n<i;n++)o=o.concat(r(t[n],n));return o}function Ll(e){1===e.format?Al.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Il("glyph",e.glyphs))):2===e.format?Al.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Rl("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):yl.assert(!1,"Coverage format must be 1 or 2.")}function Fl(e){Al.call(this,"scriptListTable",Rl("scriptRecord",e,(function(e,t){var r=e.script,i=r.defaultLangSys;return yl.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Al("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Al("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Il("featureIndex",i.featureIndexes)))}].concat(Rl("langSys",r.langSysRecords,(function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Al("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Il("featureIndex",r.featureIndexes)))}]}))))}]})))}function Ul(e){Al.call(this,"featureListTable",Rl("featureRecord",e,(function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Al("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(Il("lookupListIndex",r.lookupListIndexes)))}]})))}function zl(e,t){Al.call(this,"lookupListTable",Bl("lookup",e,(function(e){var r=t[e.lookupType];return yl.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Al("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(Bl("subtable",e.subtables,r)))})))}Sl.CHARSTRING=function(e){if(Wl){var t=Wl.get(e);if(void 0!==t)return t}for(var r=[],i=e.length,o=0;o<i;o+=1){var n=e[o];r=r.concat(Sl[n.type](n.value))}return Wl&&Wl.set(e,r),r},kl.CHARSTRING=function(e){return Sl.CHARSTRING(e).length},Sl.OBJECT=function(e){var t=Sl[e.type];return yl.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},kl.OBJECT=function(e){var t=kl[e.type];return yl.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},Sl.TABLE=function(e){for(var t=[],r=e.fields.length,i=[],o=[],n=0;n<r;n+=1){var s=e.fields[n],a=Sl[s.type];yl.argument(void 0!==a,"No encoding function for field type "+s.type+" ("+s.name+")");var c=e[s.name];void 0===c&&(c=s.value);var h=a(c);"TABLE"===s.type?(o.push(t.length),t=t.concat([0,0]),i.push(h)):t=t.concat(h)}for(var l=0;l<i.length;l+=1){var u=o[l],d=t.length;yl.argument(d<65536,"Table "+e.tableName+" too big."),t[u]=d>>8,t[u+1]=255&d,t=t.concat(i[l])}return t},kl.TABLE=function(e){for(var t=0,r=e.fields.length,i=0;i<r;i+=1){var o=e.fields[i],n=kl[o.type];yl.argument(void 0!==n,"No sizeOf function for field type "+o.type+" ("+o.name+")");var s=e[o.name];void 0===s&&(s=o.value),t+=n(s),"TABLE"===o.type&&(t+=2)}return t},Sl.RECORD=Sl.TABLE,kl.RECORD=kl.TABLE,Sl.LITERAL=function(e){return e},kl.LITERAL=function(e){return e.length},Al.prototype.encode=function(){return Sl.TABLE(this)},Al.prototype.sizeOf=function(){return kl.TABLE(this)},Ll.prototype=Object.create(Al.prototype),Ll.prototype.constructor=Ll,Fl.prototype=Object.create(Al.prototype),Fl.prototype.constructor=Fl,Ul.prototype=Object.create(Al.prototype),Ul.prototype.constructor=Ul,zl.prototype=Object.create(Al.prototype),zl.prototype.constructor=zl;var Nl={Table:Al,Record:Al,Coverage:Ll,ScriptList:Fl,FeatureList:Ul,LookupList:zl,ushortList:Il,tableList:Bl,recordList:Rl};function Gl(e,t){return e.getUint8(t)}function Vl(e,t){return e.getUint16(t,!1)}function Hl(e,t){return e.getUint32(t,!1)}function jl(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var ql={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Zl(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Zl.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Zl.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Zl.prototype.parseCard8=Zl.prototype.parseByte,Zl.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Zl.prototype.parseCard16=Zl.prototype.parseUShort,Zl.prototype.parseSID=Zl.prototype.parseUShort,Zl.prototype.parseOffset16=Zl.prototype.parseUShort,Zl.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Zl.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},Zl.prototype.parseULong=function(){var e=Hl(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Zl.prototype.parseOffset32=Zl.prototype.parseULong,Zl.prototype.parseFixed=function(){var e=jl(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Zl.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,i="";this.relativeOffset+=e;for(var o=0;o<e;o++)i+=String.fromCharCode(t.getUint8(r+o));return i},Zl.prototype.parseTag=function(){return this.parseString(4)},Zl.prototype.parseLongDateTime=function(){var e=Hl(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},Zl.prototype.parseVersion=function(e){var t=Vl(this.data,this.offset+this.relativeOffset),r=Vl(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},Zl.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=ql[e]*t},Zl.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint32(i),i+=4;return this.relativeOffset+=4*e,t},Zl.prototype.parseOffset16List=Zl.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint16(i),i+=2;return this.relativeOffset+=2*e,t},Zl.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getInt16(i),i+=2;return this.relativeOffset+=2*e,t},Zl.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint8(i++);return this.relativeOffset+=e,t},Zl.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Zl.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Zl.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=Object.keys(t),o=0;o<e;o++){for(var n={},s=0;s<i.length;s++){var a=i[s],c=t[a];n[a]=c.call(this)}r[o]=n}return r},Zl.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=Object.keys(t),o=0;o<e;o++){for(var n={},s=0;s<i.length;s++){var a=i[s],c=t[a];n[a]=c.call(this)}r[o]=n}return r},Zl.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var o=t[i],n=e[o];r[o]=n.call(this)}return r},Zl.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},Zl.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),i=0;i<t;i++)r[i]=this.parseValueRecord(e);return r},Zl.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new Zl(this.data,this.offset+t).parseStruct(e)},Zl.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new Zl(this.data,this.offset+t).parseStruct(e)},Zl.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,i=this.relativeOffset,o=new Array(r),n=0;n<r;n++){var s=t[n];if(0!==s)if(this.relativeOffset=s,e){for(var a=this.parseOffset16List(),c=new Array(a.length),h=0;h<a.length;h++)this.relativeOffset=s+a[h],c[h]=e.call(this);o[n]=c}else o[n]=this.parseUShortList();else o[n]=void 0}return this.relativeOffset=i,o},Zl.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var i=new Array(r),o=0;o<r;o++)i[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},Zl.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Zl.uShort,end:Zl.uShort,classId:Zl.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},Zl.list=function(e,t){return function(){return this.parseList(e,t)}},Zl.list32=function(e,t){return function(){return this.parseList32(e,t)}},Zl.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},Zl.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},Zl.pointer=function(e){return function(){return this.parsePointer(e)}},Zl.pointer32=function(e){return function(){return this.parsePointer32(e)}},Zl.tag=Zl.prototype.parseTag,Zl.byte=Zl.prototype.parseByte,Zl.uShort=Zl.offset16=Zl.prototype.parseUShort,Zl.uShortList=Zl.prototype.parseUShortList,Zl.uLong=Zl.offset32=Zl.prototype.parseULong,Zl.uLongList=Zl.prototype.parseULongList,Zl.struct=Zl.prototype.parseStruct,Zl.coverage=Zl.prototype.parseCoverage,Zl.classDef=Zl.prototype.parseClassDef;var Yl={reserved:Zl.uShort,reqFeatureIndex:Zl.uShort,featureIndexes:Zl.uShortList};Zl.prototype.parseScriptList=function(){return this.parsePointer(Zl.recordList({tag:Zl.tag,script:Zl.pointer({defaultLangSys:Zl.pointer(Yl),langSysRecords:Zl.recordList({tag:Zl.tag,langSys:Zl.pointer(Yl)})})}))||[]},Zl.prototype.parseFeatureList=function(){return this.parsePointer(Zl.recordList({tag:Zl.tag,feature:Zl.pointer({featureParams:Zl.offset16,lookupListIndexes:Zl.uShortList})}))||[]},Zl.prototype.parseLookupList=function(e){return this.parsePointer(Zl.list(Zl.pointer((function(){var t=this.parseUShort();yl.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),i=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(Zl.pointer(e[t])),markFilteringSet:i?this.parseUShort():void 0}}))))||[]},Zl.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return yl.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Zl.offset32,featureTableSubstitutionOffset:Zl.offset32})}))||[]};var Xl={getByte:Gl,getCard8:Gl,getUShort:Vl,getCard16:Vl,getShort:function(e,t){return e.getInt16(t,!1)},getULong:Hl,getFixed:jl,getTag:function(e,t){for(var r="",i=t;i<t+4;i+=1)r+=String.fromCharCode(e.getInt8(i));return r},getOffset:function(e,t,r){for(var i=0,o=0;o<r;o+=1)i<<=8,i+=e.getUint8(t+o);return i},getBytes:function(e,t,r){for(var i=[],o=t;o<r;o+=1)i.push(e.getUint8(o));return i},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:Zl};function Kl(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}var $l={parse:function(e,t){var r={};r.version=Xl.getUShort(e,t),yl.argument(0===r.version,"cmap table version should be 0."),r.numTables=Xl.getUShort(e,t+2);for(var i=-1,o=r.numTables-1;o>=0;o-=1){var n=Xl.getUShort(e,t+4+8*o),s=Xl.getUShort(e,t+4+8*o+2);if(3===n&&(0===s||1===s||10===s)||0===n&&(0===s||1===s||2===s||3===s||4===s)){i=Xl.getULong(e,t+4+8*o+4);break}}if(-1===i)throw new Error("No valid cmap sub-tables found.");var a=new Xl.Parser(e,t+i);if(r.format=a.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var i=0;i<r;i+=1)for(var o=t.parseULong(),n=t.parseULong(),s=t.parseULong(),a=o;a<=n;a+=1)e.glyphIndexMap[a]=s,s++}(r,a);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,i,o){var n;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=n=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var s=new Xl.Parser(r,i+o+14),a=new Xl.Parser(r,i+o+16+2*n),c=new Xl.Parser(r,i+o+16+4*n),h=new Xl.Parser(r,i+o+16+6*n),l=i+o+16+8*n,u=0;u<n-1;u+=1)for(var d=void 0,p=s.parseUShort(),f=a.parseUShort(),v=c.parseShort(),g=h.parseUShort(),m=f;m<=p;m+=1)0!==g?(l=h.offset+h.relativeOffset-2,l+=g,l+=2*(m-f),0!==(d=Xl.getUShort(r,l))&&(d=d+v&65535)):d=m+v&65535,e.glyphIndexMap[m]=d}(r,a,e,t,i)}return r},make:function(e){var t,r=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var o=new Nl.Table("cmap",i);for(o.segments=[],t=0;t<e.length;t+=1){for(var n=e.get(t),s=0;s<n.unicodes.length;s+=1)Kl(o,n.unicodes[s],t);o.segments=o.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(o);var a=o.segments.length,c=0,h=[],l=[],u=[],d=[],p=[],f=[];for(t=0;t<a;t+=1){var v=o.segments[t];v.end<=65535&&v.start<=65535?(h=h.concat({name:"end_"+t,type:"USHORT",value:v.end}),l=l.concat({name:"start_"+t,type:"USHORT",value:v.start}),u=u.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):c+=1,r||void 0===v.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(o.segCountX2=2*(a-c),o.searchRange=2*Math.pow(2,Math.floor(Math.log(a-c)/Math.log(2))),o.entrySelector=Math.log(o.searchRange/2)/Math.log(2),o.rangeShift=o.segCountX2-o.searchRange,o.fields=o.fields.concat(h),o.fields.push({name:"reservedPad",type:"USHORT",value:0}),o.fields=o.fields.concat(l),o.fields=o.fields.concat(u),o.fields=o.fields.concat(d),o.fields=o.fields.concat(p),o.cmap4Length=14+2*h.length+2+2*l.length+2*u.length+2*d.length+2*p.length,!r){var g=16+4*f.length;o.cmap12Offset=20+o.cmap4Length,o.fields=o.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),o.fields=o.fields.concat(f)}return o}},Ql=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Jl=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],eu=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],tu=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ru(e){this.font=e}function iu(e){this.cmap=e}function ou(e,t){this.encoding=e,this.charset=t}function nu(e){switch(e.version){case 1:this.names=tu.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<tu.length?this.names[t]=tu[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-tu.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=tu[r+e.glyphNameIndex[r]];break;default:this.names=[]}}ru.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var i=0;i<r.length;i+=1)for(var o=r.get(i),n=0;n<o.unicodes.length;n+=1)if(o.unicodes[n]===t)return i;return null},iu.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ou.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},nu.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},nu.prototype.glyphIndexToName=function(e){return this.names[e]};var su=function(e,t,r,i,o){e.beginPath(),e.moveTo(t,r),e.lineTo(i,o),e.stroke()};function au(e){this.bindConstructorValues(e)}function cu(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function hu(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];i.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=i}this.length=t&&t.length||0}au.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||new gl,{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},au.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},au.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},au.prototype.getPath=function(e,t,r,i,o){var n,s;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72,i||(i={});var a=i.xScale,c=i.yScale;if(i.hinting&&o&&o.hinting&&(s=this.path&&o.hinting.exec(this,r)),s)n=o.hinting.getCommands(s),e=Math.round(e),t=Math.round(t),a=c=1;else{n=this.path.commands;var h=1/(this.path.unitsPerEm||1e3)*r;void 0===a&&(a=h),void 0===c&&(c=h)}for(var l=new gl,u=0;u<n.length;u+=1){var d=n[u];"M"===d.type?l.moveTo(e+d.x*a,t+-d.y*c):"L"===d.type?l.lineTo(e+d.x*a,t+-d.y*c):"Q"===d.type?l.quadraticCurveTo(e+d.x1*a,t+-d.y1*c,e+d.x*a,t+-d.y*c):"C"===d.type?l.curveTo(e+d.x1*a,t+-d.y1*c,e+d.x2*a,t+-d.y2*c,e+d.x*a,t+-d.y*c):"Z"===d.type&&l.closePath()}return l},au.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var i=this.points[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return yl.argument(0===t.length,"There are still points left in the current contour."),e},au.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],i=0;i<e.length;i+=1){var o=e[i];"Z"!==o.type&&(t.push(o.x),r.push(o.y)),"Q"!==o.type&&"C"!==o.type||(t.push(o.x1),r.push(o.y1)),"C"===o.type&&(t.push(o.x2),r.push(o.y2))}var n={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(n.xMin)||(n.xMin=0),isFinite(n.xMax)||(n.xMax=this.advanceWidth),isFinite(n.yMin)||(n.yMin=0),isFinite(n.yMax)||(n.yMax=0),n.rightSideBearing=this.advanceWidth-n.leftSideBearing-(n.xMax-n.xMin),n},au.prototype.draw=function(e,t,r,i,o){this.getPath(t,r,i,o).draw(e)},au.prototype.drawPoints=function(e,t,r,i){function o(t,r,i,o){e.beginPath();for(var n=0;n<t.length;n+=1)e.moveTo(r+t[n].x*o,i+t[n].y*o),e.arc(r+t[n].x*o,i+t[n].y*o,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24;for(var n=1/this.path.unitsPerEm*i,s=[],a=[],c=this.path,h=0;h<c.commands.length;h+=1){var l=c.commands[h];void 0!==l.x&&s.push({x:l.x,y:-l.y}),void 0!==l.x1&&a.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&a.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",o(s,t,r,n),e.fillStyle="red",o(a,t,r,n)},au.prototype.drawMetrics=function(e,t,r,i){var o;t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24,o=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",su(e,t,-1e4,t,1e4),su(e,-1e4,r,1e4,r);var n=this.xMin||0,s=this.yMin||0,a=this.xMax||0,c=this.yMax||0,h=this.advanceWidth||0;e.strokeStyle="blue",su(e,t+n*o,-1e4,t+n*o,1e4),su(e,t+a*o,-1e4,t+a*o,1e4),su(e,-1e4,r+-s*o,1e4,r+-s*o),su(e,-1e4,r+-c*o,1e4,r+-c*o),e.strokeStyle="green",su(e,t+h*o,-1e4,t+h*o,1e4)},hu.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var i=0;i<r.unicodes.length;i++)t.addUnicode(r.unicodes[i]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},hu.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var lu={GlyphSet:hu,glyphLoader:function(e,t){return new au({index:t,font:e})},ttfGlyphLoader:function(e,t,r,i,o,n){return function(){var s=new au({index:t,font:e});return s.path=function(){r(s,i,o);var t=n(e.glyphs,s);return t.unitsPerEm=e.unitsPerEm,t},cu(s,"xMin","_xMin"),cu(s,"xMax","_xMax"),cu(s,"yMin","_yMin"),cu(s,"yMax","_yMax"),s}},cffGlyphLoader:function(e,t,r,i){return function(){var o=new au({index:t,font:e});return o.path=function(){var t=r(e,o,i);return t.unitsPerEm=e.unitsPerEm,t},o}}};function uu(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!uu(e[r],t[r]))return!1;return!0}return!1}function du(e){return e.length<1240?107:e.length<33900?1131:32768}function pu(e,t,r){var i,o,n=[],s=[],a=Xl.getCard16(e,t);if(0!==a){var c=Xl.getByte(e,t+2);i=t+(a+1)*c+2;for(var h=t+3,l=0;l<a+1;l+=1)n.push(Xl.getOffset(e,h,c)),h+=c;o=i+n[a]}else o=t+2;for(var u=0;u<n.length-1;u+=1){var d=Xl.getBytes(e,i+n[u],i+n[u+1]);r&&(d=r(d)),s.push(d)}return{objects:s,startOffset:t,endOffset:o}}function fu(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),o=i>>4,n=15&i;if(15===o)break;if(t+=r[o],15===n)break;t+=r[n]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function vu(e,t,r){t=void 0!==t?t:0;var i=new Xl.Parser(e,t),o=[],n=[];for(r=void 0!==r?r:e.length;i.relativeOffset<r;){var s=i.parseByte();s<=21?(12===s&&(s=1200+i.parseByte()),o.push([s,n]),n=[]):n.push(fu(i,s))}return function(e){for(var t={},r=0;r<e.length;r+=1){var i,o=e[r][0],n=e[r][1];if(i=1===n.length?n[0]:n,t.hasOwnProperty(o)&&!isNaN(t[o]))throw new Error("Object "+t+" already has key "+o);t[o]=i}return t}(o)}function gu(e,t){return t<=390?Ql[t]:e[t-391]}function mu(e,t,r){for(var i,o={},n=0;n<t.length;n+=1){var s=t[n];if(Array.isArray(s.type)){var a=[];a.length=s.type.length;for(var c=0;c<s.type.length;c++)void 0===(i=void 0!==e[s.op]?e[s.op][c]:void 0)&&(i=void 0!==s.value&&void 0!==s.value[c]?s.value[c]:null),"SID"===s.type[c]&&(i=gu(r,i)),a[c]=i;o[s.name]=a}else void 0===(i=e[s.op])&&(i=void 0!==s.value?s.value:null),"SID"===s.type&&(i=gu(r,i)),o[s.name]=i}return o}var bu=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],yu=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function xu(e,t){return mu(vu(e,0,e.byteLength),bu,t)}function wu(e,t,r,i){return mu(vu(e,t,r),yu,i)}function Su(e,t,r,i){for(var o=[],n=0;n<r.length;n+=1){var s=xu(new DataView(new Uint8Array(r[n]).buffer),i);s._subrs=[],s._subrsBias=0,s._defaultWidthX=0,s._nominalWidthX=0;var a=s.private[0],c=s.private[1];if(0!==a&&0!==c){var h=wu(e,c+t,a,i);if(s._defaultWidthX=h.defaultWidthX,s._nominalWidthX=h.nominalWidthX,0!==h.subrs){var l=pu(e,c+h.subrs+t);s._subrs=l.objects,s._subrsBias=du(s._subrs)}s._privateDict=h}o.push(s)}return o}function ku(e,t,r){var i,o,n,s,a,c,h,l,u=new gl,d=[],p=0,f=!1,v=!1,g=0,m=0;if(e.isCIDFont){var b=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[b];a=y._subrs,c=y._subrsBias,h=y._defaultWidthX,l=y._nominalWidthX}else a=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,h=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var x=h;function w(e,t){v&&u.closePath(),u.moveTo(e,t),v=!0}function S(){d.length%2!=0&&!f&&(x=d.shift()+l),p+=d.length>>1,d.length=0,f=!0}return function r(h){for(var b,y,k,C,P,M,T,D,_,O,E,W,A=0;A<h.length;){var I=h[A];switch(A+=1,I){case 1:case 3:case 18:case 23:S();break;case 4:d.length>1&&!f&&(x=d.shift()+l,f=!0),m+=d.pop(),w(g,m);break;case 5:for(;d.length>0;)g+=d.shift(),m+=d.shift(),u.lineTo(g,m);break;case 6:for(;d.length>0&&(g+=d.shift(),u.lineTo(g,m),0!==d.length);)m+=d.shift(),u.lineTo(g,m);break;case 7:for(;d.length>0&&(m+=d.shift(),u.lineTo(g,m),0!==d.length);)g+=d.shift(),u.lineTo(g,m);break;case 8:for(;d.length>0;)i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s+d.shift(),u.curveTo(i,o,n,s,g,m);break;case 10:P=d.pop()+c,(M=a[P])&&r(M);break;case 11:return;case 12:switch(I=h[A],A+=1,I){case 35:i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),T=n+d.shift(),D=s+d.shift(),_=T+d.shift(),O=D+d.shift(),E=_+d.shift(),W=O+d.shift(),g=E+d.shift(),m=W+d.shift(),d.shift(),u.curveTo(i,o,n,s,T,D),u.curveTo(_,O,E,W,g,m);break;case 34:i=g+d.shift(),o=m,n=i+d.shift(),s=o+d.shift(),T=n+d.shift(),D=s,_=T+d.shift(),O=s,E=_+d.shift(),W=m,g=E+d.shift(),u.curveTo(i,o,n,s,T,D),u.curveTo(_,O,E,W,g,m);break;case 36:i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),T=n+d.shift(),D=s,_=T+d.shift(),O=s,E=_+d.shift(),W=O+d.shift(),g=E+d.shift(),u.curveTo(i,o,n,s,T,D),u.curveTo(_,O,E,W,g,m);break;case 37:i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),T=n+d.shift(),D=s+d.shift(),_=T+d.shift(),O=D+d.shift(),E=_+d.shift(),W=O+d.shift(),Math.abs(E-g)>Math.abs(W-m)?g=E+d.shift():m=W+d.shift(),u.curveTo(i,o,n,s,T,D),u.curveTo(_,O,E,W,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+I),d.length=0}break;case 14:d.length>0&&!f&&(x=d.shift()+l,f=!0),v&&(u.closePath(),v=!1);break;case 19:case 20:S(),A+=p+7>>3;break;case 21:d.length>2&&!f&&(x=d.shift()+l,f=!0),m+=d.pop(),w(g+=d.pop(),m);break;case 22:d.length>1&&!f&&(x=d.shift()+l,f=!0),w(g+=d.pop(),m);break;case 24:for(;d.length>2;)i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s+d.shift(),u.curveTo(i,o,n,s,g,m);g+=d.shift(),m+=d.shift(),u.lineTo(g,m);break;case 25:for(;d.length>6;)g+=d.shift(),m+=d.shift(),u.lineTo(g,m);i=g+d.shift(),o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s+d.shift(),u.curveTo(i,o,n,s,g,m);break;case 26:for(d.length%2&&(g+=d.shift());d.length>0;)i=g,o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n,m=s+d.shift(),u.curveTo(i,o,n,s,g,m);break;case 27:for(d.length%2&&(m+=d.shift());d.length>0;)i=g+d.shift(),o=m,n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s,u.curveTo(i,o,n,s,g,m);break;case 28:b=h[A],y=h[A+1],d.push((b<<24|y<<16)>>16),A+=2;break;case 29:P=d.pop()+e.gsubrsBias,(M=e.gsubrs[P])&&r(M);break;case 30:for(;d.length>0&&(i=g,o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s+(1===d.length?d.shift():0),u.curveTo(i,o,n,s,g,m),0!==d.length);)i=g+d.shift(),o=m,n=i+d.shift(),s=o+d.shift(),m=s+d.shift(),g=n+(1===d.length?d.shift():0),u.curveTo(i,o,n,s,g,m);break;case 31:for(;d.length>0&&(i=g+d.shift(),o=m,n=i+d.shift(),s=o+d.shift(),m=s+d.shift(),g=n+(1===d.length?d.shift():0),u.curveTo(i,o,n,s,g,m),0!==d.length);)i=g,o=m+d.shift(),n=i+d.shift(),s=o+d.shift(),g=n+d.shift(),m=s+(1===d.length?d.shift():0),u.curveTo(i,o,n,s,g,m);break;default:I<32?console.log("Glyph "+t.index+": unknown operator "+I):I<247?d.push(I-139):I<251?(b=h[A],A+=1,d.push(256*(I-247)+b+108)):I<255?(b=h[A],A+=1,d.push(256*-(I-251)-b-108)):(b=h[A],y=h[A+1],k=h[A+2],C=h[A+3],A+=4,d.push((b<<24|y<<16|k<<8|C)/65536))}}}(r),t.advanceWidth=x,u}function Cu(e,t){var r,i=Ql.indexOf(e);return i>=0&&(r=i),(i=t.indexOf(e))>=0?r=i+Ql.length:(r=Ql.length+t.length,t.push(e)),r}function Pu(e,t,r){for(var i={},o=0;o<e.length;o+=1){var n=e[o],s=t[n.name];void 0===s||uu(s,n.value)||("SID"===n.type&&(s=Cu(s,r)),i[n.op]={name:n.name,type:n.type,value:s})}return i}function Mu(e,t){var r=new Nl.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Pu(bu,e,t),r}function Tu(e){var t=new Nl.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Du(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,o=0,n=0;n<r.commands.length;n+=1){var s=void 0,a=void 0,c=r.commands[n];if("Q"===c.type){var h=1/3,l=2/3;c={type:"C",x:c.x,y:c.y,x1:Math.round(h*i+l*c.x1),y1:Math.round(h*o+l*c.y1),x2:Math.round(h*c.x+l*c.x1),y2:Math.round(h*c.y+l*c.y1)}}if("M"===c.type)s=Math.round(c.x-i),a=Math.round(c.y-o),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(c.x),o=Math.round(c.y);else if("L"===c.type)s=Math.round(c.x-i),a=Math.round(c.y-o),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(c.x),o=Math.round(c.y);else if("C"===c.type){var u=Math.round(c.x1-i),d=Math.round(c.y1-o),p=Math.round(c.x2-c.x1),f=Math.round(c.y2-c.y1);s=Math.round(c.x-c.x2),a=Math.round(c.y-c.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:d}),t.push({name:"dx2",type:"NUMBER",value:p}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(c.x),o=Math.round(c.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var _u={parse:function(e,t,r,i){r.tables.cff={};var o=function(e,t){var r={};return r.formatMajor=Xl.getCard8(e,t),r.formatMinor=Xl.getCard8(e,t+1),r.size=Xl.getCard8(e,t+2),r.offsetSize=Xl.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}(e,t),n=pu(e,o.endOffset,Xl.bytesToString),s=pu(e,n.endOffset),a=pu(e,s.endOffset,Xl.bytesToString),c=pu(e,a.endOffset);r.gsubrs=c.objects,r.gsubrsBias=du(r.gsubrs);var h=Su(e,t,s.objects,a.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var l=h[0];if(r.tables.cff.topDict=l,l._privateDict&&(r.defaultWidthX=l._privateDict.defaultWidthX,r.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var u=l.fdArray,d=l.fdSelect;if(0===u||0===d)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=pu(e,u+=t),f=Su(e,t,p.objects,a.objects);l._fdArray=f,d+=t,l._fdSelect=function(e,t,r,i){var o,n=[],s=new Xl.Parser(e,t),a=s.parseCard8();if(0===a)for(var c=0;c<r;c++){if((o=s.parseCard8())>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+i+")");n.push(o)}else{if(3!==a)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);var h,l=s.parseCard16(),u=s.parseCard16();if(0!==u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var d=0;d<l;d++){if(o=s.parseCard8(),h=s.parseCard16(),o>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+i+")");if(h>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;u<h;u++)n.push(o);u=h}if(h!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return n}(e,d,r.numGlyphs,f.length)}var v,g=t+l.private[1],m=wu(e,g,l.private[0],a.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var b=g+m.subrs,y=pu(e,b);r.subrs=y.objects,r.subrsBias=du(r.subrs)}else r.subrs=[],r.subrsBias=0;i.lowMemory?(v=function(e,t){var r,i,o=[],n=Xl.getCard16(e,t);if(0!==n){var s=Xl.getByte(e,t+2);r=t+(n+1)*s+2;for(var a=t+3,c=0;c<n+1;c+=1)o.push(Xl.getOffset(e,a,s)),a+=s;i=r+o[n]}else i=t+2;return{offsets:o,startOffset:t,endOffset:i}}(e,t+l.charStrings),r.nGlyphs=v.offsets.length):(v=pu(e,t+l.charStrings),r.nGlyphs=v.objects.length);var x=function(e,t,r,i){var o,n,s=new Xl.Parser(e,t);r-=1;var a=[".notdef"],c=s.parseCard8();if(0===c)for(var h=0;h<r;h+=1)o=s.parseSID(),a.push(gu(i,o));else if(1===c)for(;a.length<=r;){o=s.parseSID(),n=s.parseCard8();for(var l=0;l<=n;l+=1)a.push(gu(i,o)),o+=1}else{if(2!==c)throw new Error("Unknown charset format "+c);for(;a.length<=r;){o=s.parseSID(),n=s.parseCard16();for(var u=0;u<=n;u+=1)a.push(gu(i,o)),o+=1}}return a}(e,t+l.charset,r.nGlyphs,a.objects);if(0===l.encoding?r.cffEncoding=new ou(Jl,x):1===l.encoding?r.cffEncoding=new ou(eu,x):r.cffEncoding=function(e,t,r){var i,o={},n=new Xl.Parser(e,t),s=n.parseCard8();if(0===s)for(var a=n.parseCard8(),c=0;c<a;c+=1)o[i=n.parseCard8()]=c;else{if(1!==s)throw new Error("Unknown encoding format "+s);var h=n.parseCard8();i=1;for(var l=0;l<h;l+=1)for(var u=n.parseCard8(),d=n.parseCard8(),p=u;p<=u+d;p+=1)o[p]=i,i+=1}return new ou(o,r)}(e,t+l.encoding,x),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new lu.GlyphSet(r),i.lowMemory)r._push=function(i){var o=function(e,t,r,i,o){var n=Xl.getCard16(r,i),s=0;0!==n&&(s=i+(n+1)*Xl.getByte(r,i+2)+2);var a=Xl.getBytes(r,s+t[e],s+t[e+1]);return a}(i,v.offsets,e,t+l.charStrings);r.glyphs.push(i,lu.cffGlyphLoader(r,i,ku,o))};else for(var w=0;w<r.nGlyphs;w+=1){var S=v.objects[w];r.glyphs.push(w,lu.cffGlyphLoader(r,w,ku,S))}},make:function(e,t){for(var r,i=new Nl.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),o=1/t.unitsPerEm,n={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[o,0,0,o,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s=[],a=1;a<e.length;a+=1)r=e.get(a),s.push(r.name);var c=[];i.header=new Nl.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),i.nameIndex=function(e){var t=new Nl.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var h=Mu(n,c);i.topDictIndex=Tu(h),i.globalSubrIndex=new Nl.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),i.charsets=function(e,t){for(var r=new Nl.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var o=Cu(e[i],t);r.fields.push({name:"glyph_"+i,type:"SID",value:o})}return r}(s,c),i.charStringsIndex=function(e){for(var t=new Nl.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var i=e.get(r),o=Du(i);t.charStrings.push({name:i.name,type:"CHARSTRING",value:o})}return t}(e),i.privateDict=function(e,t){var r=new Nl.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Pu(yu,{},t),r}(0,c),i.stringIndex=function(e){var t=new Nl.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(c);var l=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();return n.charset=l,n.encoding=0,n.charStrings=n.charset+i.charsets.sizeOf(),n.private[1]=n.charStrings+i.charStringsIndex.sizeOf(),h=Mu(n,c),i.topDictIndex=Tu(h),i}},Ou={parse:function(e,t){var r={},i=new Xl.Parser(e,t);return r.version=i.parseVersion(),r.fontRevision=Math.round(1e3*i.parseFixed())/1e3,r.checkSumAdjustment=i.parseULong(),r.magicNumber=i.parseULong(),yl.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=i.parseUShort(),r.unitsPerEm=i.parseUShort(),r.created=i.parseLongDateTime(),r.modified=i.parseLongDateTime(),r.xMin=i.parseShort(),r.yMin=i.parseShort(),r.xMax=i.parseShort(),r.yMax=i.parseShort(),r.macStyle=i.parseUShort(),r.lowestRecPPEM=i.parseUShort(),r.fontDirectionHint=i.parseShort(),r.indexToLocFormat=i.parseShort(),r.glyphDataFormat=i.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new Nl.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Eu={parse:function(e,t){var r={},i=new Xl.Parser(e,t);return r.version=i.parseVersion(),r.ascender=i.parseShort(),r.descender=i.parseShort(),r.lineGap=i.parseShort(),r.advanceWidthMax=i.parseUShort(),r.minLeftSideBearing=i.parseShort(),r.minRightSideBearing=i.parseShort(),r.xMaxExtent=i.parseShort(),r.caretSlopeRise=i.parseShort(),r.caretSlopeRun=i.parseShort(),r.caretOffset=i.parseShort(),i.relativeOffset+=8,r.metricDataFormat=i.parseShort(),r.numberOfHMetrics=i.parseUShort(),r},make:function(e){return new Nl.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Wu={parse:function(e,t,r,i,o,n,s){s.lowMemory?function(e,t,r,i,o){var n,s;e._hmtxTableData={};for(var a=new Xl.Parser(t,r),c=0;c<o;c+=1)c<i&&(n=a.parseUShort(),s=a.parseShort()),e._hmtxTableData[c]={advanceWidth:n,leftSideBearing:s}}(e,t,r,i,o):function(e,t,r,i,o){for(var n,s,a=new Xl.Parser(e,t),c=0;c<i;c+=1){c<r&&(n=a.parseUShort(),s=a.parseShort());var h=o.get(c);h.advanceWidth=n,h.leftSideBearing=s}}(t,r,i,o,n)},make:function(e){for(var t=new Nl.Table("hmtx",[]),r=0;r<e.length;r+=1){var i=e.get(r),o=i.advanceWidth||0,n=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:o}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:n})}return t}},Au={make:function(e){for(var t=new Nl.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",i=12+4*e.length,o=0;o<e.length;++o){var n=r.indexOf(e[o]);n<0&&(n=r.length,r+=e[o]),t.fields.push({name:"offset "+o,type:"USHORT",value:i+n}),t.fields.push({name:"length "+o,type:"USHORT",value:e[o].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new Xl.Parser(e,t),i=r.parseULong();yl.argument(1===i,"Unsupported ltag table version."),r.skip("uLong",1);for(var o=r.parseULong(),n=[],s=0;s<o;s++){for(var a="",c=t+r.parseUShort(),h=r.parseUShort(),l=c;l<c+h;++l)a+=String.fromCharCode(e.getInt8(l));n.push(a)}return n}},Iu={parse:function(e,t){var r={},i=new Xl.Parser(e,t);return r.version=i.parseVersion(),r.numGlyphs=i.parseUShort(),1===r.version&&(r.maxPoints=i.parseUShort(),r.maxContours=i.parseUShort(),r.maxCompositePoints=i.parseUShort(),r.maxCompositeContours=i.parseUShort(),r.maxZones=i.parseUShort(),r.maxTwilightPoints=i.parseUShort(),r.maxStorage=i.parseUShort(),r.maxFunctionDefs=i.parseUShort(),r.maxInstructionDefs=i.parseUShort(),r.maxStackElements=i.parseUShort(),r.maxSizeOfInstructions=i.parseUShort(),r.maxComponentElements=i.parseUShort(),r.maxComponentDepth=i.parseUShort()),r},make:function(e){return new Nl.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Bu=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ru={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Lu={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Fu={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Uu(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return Ru[t];case 3:return Fu[t]}}var zu="utf-16",Nu={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Gu={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Vu(e,t,r){switch(e){case 0:return zu;case 1:return Gu[r]||Nu[t];case 3:if(1===t||10===t)return zu}}function Hu(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function ju(e,t,r,i,o,n){return new Nl.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:n}])}function qu(e,t){var r=function(e,t){var r=e.length,i=t.length-r+1;e:for(var o=0;o<i;o++)for(;o<i;o++){for(var n=0;n<r;n++)if(t[o+n]!==e[n])continue e;return o}return-1}(e,t);if(r<0){r=t.length;for(var i=0,o=e.length;i<o;++i)t.push(e[i])}return r}var Zu={parse:function(e,t,r){for(var i={},o=new Xl.Parser(e,t),n=o.parseUShort(),s=o.parseUShort(),a=o.offset+o.parseUShort(),c=0;c<s;c++){var h=o.parseUShort(),l=o.parseUShort(),u=o.parseUShort(),d=o.parseUShort(),p=Bu[d]||d,f=o.parseUShort(),v=o.parseUShort(),g=Uu(h,u,r),m=Vu(h,l,u);if(void 0!==m&&void 0!==g){var b;if(b=m===zu?wl.UTF16(e,a+v,f):wl.MACSTRING(e,a+v,f,m)){var y=i[p];void 0===y&&(y=i[p]={}),y[g]=b}}}return 1===n&&o.parseUShort(),i},make:function(e,t){var r,i=[],o={},n=Hu(Bu);for(var s in e){var a=n[s];if(void 0===a&&(a=s),r=parseInt(a),isNaN(r))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');o[r]=e[s],i.push(r)}for(var c=Hu(Ru),h=Hu(Fu),l=[],u=[],d=0;d<i.length;d++){var p=o[r=i[d]];for(var f in p){var v=p[f],g=1,m=c[f],b=Lu[m],y=Vu(g,b,m),x=Sl.MACSTRING(v,y);void 0===x&&(g=0,(m=t.indexOf(f))<0&&(m=t.length,t.push(f)),b=4,x=Sl.UTF16(v));var w=qu(x,u);l.push(ju(g,b,m,r,x.length,w));var S=h[f];if(void 0!==S){var k=Sl.UTF16(v),C=qu(k,u);l.push(ju(3,1,S,r,k.length,C))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var P=new Nl.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),M=0;M<l.length;M++)P.fields.push({name:"record_"+M,type:"RECORD",value:l[M]});return P.fields.push({name:"strings",type:"LITERAL",value:u}),P}},Yu=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Xu={parse:function(e,t){var r={},i=new Xl.Parser(e,t);r.version=i.parseUShort(),r.xAvgCharWidth=i.parseShort(),r.usWeightClass=i.parseUShort(),r.usWidthClass=i.parseUShort(),r.fsType=i.parseUShort(),r.ySubscriptXSize=i.parseShort(),r.ySubscriptYSize=i.parseShort(),r.ySubscriptXOffset=i.parseShort(),r.ySubscriptYOffset=i.parseShort(),r.ySuperscriptXSize=i.parseShort(),r.ySuperscriptYSize=i.parseShort(),r.ySuperscriptXOffset=i.parseShort(),r.ySuperscriptYOffset=i.parseShort(),r.yStrikeoutSize=i.parseShort(),r.yStrikeoutPosition=i.parseShort(),r.sFamilyClass=i.parseShort(),r.panose=[];for(var o=0;o<10;o++)r.panose[o]=i.parseByte();return r.ulUnicodeRange1=i.parseULong(),r.ulUnicodeRange2=i.parseULong(),r.ulUnicodeRange3=i.parseULong(),r.ulUnicodeRange4=i.parseULong(),r.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),r.fsSelection=i.parseUShort(),r.usFirstCharIndex=i.parseUShort(),r.usLastCharIndex=i.parseUShort(),r.sTypoAscender=i.parseShort(),r.sTypoDescender=i.parseShort(),r.sTypoLineGap=i.parseShort(),r.usWinAscent=i.parseUShort(),r.usWinDescent=i.parseUShort(),r.version>=1&&(r.ulCodePageRange1=i.parseULong(),r.ulCodePageRange2=i.parseULong()),r.version>=2&&(r.sxHeight=i.parseShort(),r.sCapHeight=i.parseShort(),r.usDefaultChar=i.parseUShort(),r.usBreakChar=i.parseUShort(),r.usMaxContent=i.parseUShort()),r},make:function(e){return new Nl.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Yu,getUnicodeRange:function(e){for(var t=0;t<Yu.length;t+=1){var r=Yu[t];if(e>=r.begin&&e<r.end)return t}return-1}},Ku={parse:function(e,t){var r={},i=new Xl.Parser(e,t);switch(r.version=i.parseVersion(),r.italicAngle=i.parseFixed(),r.underlinePosition=i.parseShort(),r.underlineThickness=i.parseShort(),r.isFixedPitch=i.parseULong(),r.minMemType42=i.parseULong(),r.maxMemType42=i.parseULong(),r.minMemType1=i.parseULong(),r.maxMemType1=i.parseULong(),r.version){case 1:r.names=tu.slice();break;case 2:r.numberOfGlyphs=i.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var o=0;o<r.numberOfGlyphs;o++)r.glyphNameIndex[o]=i.parseUShort();r.names=[];for(var n=0;n<r.numberOfGlyphs;n++)if(r.glyphNameIndex[n]>=tu.length){var s=i.parseChar();r.names.push(i.parseString(s))}break;case 2.5:r.numberOfGlyphs=i.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.offset[a]=i.parseChar()}return r},make:function(){return new Nl.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},$u=new Array(9);$u[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Zl.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(Zl.coverage),substitute:this.parseOffset16List()}:void yl.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},$u[2]=function(){var e=this.parseUShort();return yl.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Zl.coverage),sequences:this.parseListOfLists()}},$u[3]=function(){var e=this.parseUShort();return yl.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Zl.coverage),alternateSets:this.parseListOfLists()}},$u[4]=function(){var e=this.parseUShort();return yl.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Zl.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var Qu={sequenceIndex:Zl.uShort,lookupListIndex:Zl.uShort};$u[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(Zl.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Qu)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(Zl.coverage),classDef:this.parsePointer(Zl.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Qu)}}))};if(3===t){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,Zl.pointer(Zl.coverage)),lookupRecords:this.parseRecordList(i,Qu)}}yl.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},$u[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Zl.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Qu)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(Zl.coverage),backtrackClassDef:this.parsePointer(Zl.classDef),inputClassDef:this.parsePointer(Zl.classDef),lookaheadClassDef:this.parsePointer(Zl.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Qu)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(Zl.pointer(Zl.coverage)),inputCoverage:this.parseList(Zl.pointer(Zl.coverage)),lookaheadCoverage:this.parseList(Zl.pointer(Zl.coverage)),lookupRecords:this.parseRecordList(Qu)}:void yl.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},$u[7]=function(){var e=this.parseUShort();yl.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new Zl(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:$u[t].call(r)}},$u[8]=function(){var e=this.parseUShort();return yl.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Zl.coverage),backtrackCoverage:this.parseList(Zl.pointer(Zl.coverage)),lookaheadCoverage:this.parseList(Zl.pointer(Zl.coverage)),substitutes:this.parseUShortList()}};var Ju=new Array(9);Ju[1]=function(e){return 1===e.substFormat?new Nl.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Nl.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)}].concat(Nl.ushortList("substitute",e.substitute)))},Ju[2]=function(e){return yl.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new Nl.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)}].concat(Nl.tableList("seqSet",e.sequences,(function(e){return new Nl.Table("sequenceSetTable",Nl.ushortList("sequence",e))}))))},Ju[3]=function(e){return yl.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Nl.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)}].concat(Nl.tableList("altSet",e.alternateSets,(function(e){return new Nl.Table("alternateSetTable",Nl.ushortList("alternate",e))}))))},Ju[4]=function(e){return yl.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Nl.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)}].concat(Nl.tableList("ligSet",e.ligatureSets,(function(e){return new Nl.Table("ligatureSetTable",Nl.tableList("ligature",e,(function(e){return new Nl.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Nl.ushortList("component",e.components,e.components.length+1)))})))}))))},Ju[6]=function(e){if(1===e.substFormat){var t=new Nl.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new Nl.Coverage(e.coverage)}].concat(Nl.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new Nl.Table("chainRuleSetTable",Nl.tableList("chainRule",e,(function(e){var t=Nl.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(Nl.ushortList("inputGlyph",e.input,e.input.length+1)).concat(Nl.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(Nl.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,r){t=t.concat({name:"sequenceIndex"+r,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:e.lookupListIndex})})),new Nl.Table("chainRuleTable",t)})))}))));return t}if(2===e.substFormat)yl.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,t){r.push({name:"backtrackCoverage"+t,type:"TABLE",value:new Nl.Coverage(e)})})),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,t){r.push({name:"inputCoverage"+t,type:"TABLE",value:new Nl.Coverage(e)})})),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,t){r.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new Nl.Coverage(e)})})),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,t){r=r.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})})),new Nl.Table("chainContextTable",r)}yl.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var ed={parse:function(e,t){var r=new Zl(e,t=t||0),i=r.parseVersion(1);return yl.argument(1===i||1.1===i,"Unsupported GSUB table version."),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList($u)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList($u),variations:r.parseFeatureVariationsList()}},make:function(e){return new Nl.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Nl.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Nl.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Nl.LookupList(e.lookups,Ju)}])}},td={parse:function(e,t){var r=new Xl.Parser(e,t),i=r.parseULong();yl.argument(1===i,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var o=r.parseULong(),n={},s=0;s<o;s++){var a=r.parseTag(),c=r.parseULong(),h=r.parseULong(),l=wl.UTF8(e,t+c,h);n[a]=l}return n},make:function(e){var t=Object.keys(e).length,r="",i=16+12*t,o=new Nl.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var n in e){var s=r.length;r+=e[n],o.fields.push({name:"tag "+n,type:"TAG",value:n}),o.fields.push({name:"offset "+n,type:"ULONG",value:i+s}),o.fields.push({name:"length "+n,type:"ULONG",value:e[n].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o}};function rd(e){return Math.log(e)/Math.log(2)|0}function id(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%Math.pow(2,32)}function od(e,t,r,i){return new Nl.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==i?i:0}])}function nd(e){var t=new Nl.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,rd(t.numTables));t.searchRange=16*r,t.entrySelector=rd(r),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],o=[],n=t.sizeOf()+od().sizeOf()*t.numTables;n%4!=0;)n+=1,o.push({name:"padding",type:"BYTE",value:0});for(var s=0;s<e.length;s+=1){var a=e[s];yl.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid.");var c=a.sizeOf(),h=od(a.tableName,id(a.encode()),n,c);for(i.push({name:h.tag+" Table Record",type:"RECORD",value:h}),o.push({name:a.tableName+" table",type:"RECORD",value:a}),n+=c,yl.argument(!isNaN(n),"Something went wrong calculating the offset.");n%4!=0;)n+=1,o.push({name:"padding",type:"BYTE",value:0})}return i.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(i),t.fields=t.fields.concat(o),t}function sd(e,t,r){for(var i=0;i<t.length;i+=1){var o=e.charToGlyphIndex(t[i]);if(o>0)return e.glyphs.get(o).getMetrics()}return r}function ad(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}var cd=function(e){for(var t,r=[],i=[],o=[],n=[],s=[],a=[],c=[],h=0,l=0,u=0,d=0,p=0,f=0;f<e.glyphs.length;f+=1){var v=e.glyphs.get(f),g=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+f+"): advanceWidth is not a number.");(t>g||void 0===t)&&g>0&&(t=g),h<g&&(h=g);var m=Xu.getUnicodeRange(g);if(m<32)l|=1<<m;else if(m<64)u|=1<<m-32;else if(m<96)d|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<m-96}if(".notdef"!==v.name){var b=v.getMetrics();r.push(b.xMin),i.push(b.yMin),o.push(b.xMax),n.push(b.yMax),a.push(b.leftSideBearing),c.push(b.rightSideBearing),s.push(v.advanceWidth)}}var y={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,n),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:ad(s),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,c)};y.ascender=e.ascender,y.descender=e.descender;var x=Ou.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),w=Eu.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),S=Iu.make(e.glyphs.length),k=Xu.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:h,ulUnicodeRange1:l,ulUnicodeRange2:u,ulUnicodeRange3:d,ulUnicodeRange4:p,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:sd(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:sd(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),C=Wu.make(e.glyphs),P=$l.make(e.glyphs),M=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),D=M+" "+T,_=e.getEnglishName("postScriptName");_||(_=M.replace(/\s/g,"")+"-"+T);var O={};for(var E in e.names)O[E]=e.names[E];O.uniqueID||(O.uniqueID={en:e.getEnglishName("manufacturer")+":"+D}),O.postScriptName||(O.postScriptName={en:_}),O.preferredFamily||(O.preferredFamily=e.names.fontFamily),O.preferredSubfamily||(O.preferredSubfamily=e.names.fontSubfamily);var W=[],A=Zu.make(O,W),I=W.length>0?Au.make(W):void 0,B=Ku.make(),R=_u.make(e.glyphs,{version:e.getEnglishName("version"),fullName:D,familyName:M,weightName:T,postScriptName:_,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),L=e.metas&&Object.keys(e.metas).length>0?td.make(e.metas):void 0,F=[x,w,S,k,A,P,B,R,C];I&&F.push(I),e.tables.gsub&&F.push(ed.make(e.tables.gsub)),L&&F.push(L);for(var U=nd(F),z=id(U.encode()),N=U.fields,G=!1,V=0;V<N.length;V+=1)if("head table"===N[V].name){N[V].value.checkSumAdjustment=2981146554-z,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return U};function hd(e,t){for(var r=0,i=e.length-1;r<=i;){var o=r+i>>>1,n=e[o].tag;if(n===t)return o;n<t?r=o+1:i=o-1}return-r-1}function ld(e,t){for(var r=0,i=e.length-1;r<=i;){var o=r+i>>>1,n=e[o];if(n===t)return o;n<t?r=o+1:i=o-1}return-r-1}function ud(e,t){for(var r,i=0,o=e.length-1;i<=o;){var n=i+o>>>1,s=(r=e[n]).start;if(s===t)return r;s<t?i=n+1:o=n-1}if(i>0)return t>(r=e[i-1]).end?0:r}function dd(e,t){this.font=e,this.tableName=t}function pd(e){dd.call(this,e,"gpos")}function fd(e){dd.call(this,e,"gsub")}function vd(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function gd(e,t,r){for(var i=e.subtables,o=0;o<i.length;o++){var n=i[o];if(n.substFormat===t)return n}if(r)return i.push(r),r}function md(e,t){if(!e)throw t}function bd(e,t,r,i,o){var n;return(t&i)>0?(n=e.parseByte(),t&o||(n=-n),n=r+n):n=(t&o)>0?r:r+e.parseShort(),n}function yd(e,t,r){var i,o,n=new Xl.Parser(t,r);if(e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort(),e.numberOfContours>0){for(var s=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)s.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var c=0;c<e.instructionLength;c+=1)e.instructions.push(n.parseByte());var h=s[s.length-1]+1;i=[];for(var l=0;l<h;l+=1)if(o=n.parseByte(),i.push(o),(8&o)>0)for(var u=n.parseByte(),d=0;d<u;d+=1)i.push(o),l+=1;if(yl.argument(i.length===h,"Bad flags."),s.length>0){var p,f=[];if(h>0){for(var v=0;v<h;v+=1)o=i[v],(p={}).onCurve=!!(1&o),p.lastPointOfContour=s.indexOf(v)>=0,f.push(p);for(var g=0,m=0;m<h;m+=1)o=i[m],(p=f[m]).x=bd(n,o,g,2,16),g=p.x;for(var b=0,y=0;y<h;y+=1)o=i[y],(p=f[y]).y=bd(n,o,b,4,32),b=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){i=n.parseUShort();var w={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(w.dx=n.parseShort(),w.dy=n.parseShort()):w.matchedPoints=[n.parseUShort(),n.parseUShort()]:(2&i)>0?(w.dx=n.parseChar(),w.dy=n.parseChar()):w.matchedPoints=[n.parseByte(),n.parseByte()],(8&i)>0?w.xScale=w.yScale=n.parseF2Dot14():(64&i)>0?(w.xScale=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()):(128&i)>0&&(w.xScale=n.parseF2Dot14(),w.scale01=n.parseF2Dot14(),w.scale10=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()),e.components.push(w),x=!!(32&i)}if(256&i){e.instructionLength=n.parseUShort(),e.instructions=[];for(var S=0;S<e.instructionLength;S+=1)e.instructions.push(n.parseByte())}}}function xd(e,t){for(var r=[],i=0;i<e.length;i+=1){var o=e[i],n={x:t.xScale*o.x+t.scale01*o.y+t.dx,y:t.scale10*o.x+t.yScale*o.y+t.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};r.push(n)}return r}function wd(e){var t=new gl;if(!e)return t;for(var r=function(e){for(var t=[],r=[],i=0;i<e.length;i+=1){var o=e[i];r.push(o),o.lastPointOfContour&&(t.push(r),r=[])}return yl.argument(0===r.length,"There are still points left in the current contour."),t}(e),i=0;i<r.length;++i){var o=r[i],n=null,s=o[o.length-1],a=o[0];if(s.onCurve)t.moveTo(s.x,s.y);else if(a.onCurve)t.moveTo(a.x,a.y);else{var c={x:.5*(s.x+a.x),y:.5*(s.y+a.y)};t.moveTo(c.x,c.y)}for(var h=0;h<o.length;++h)if(n=s,s=a,a=o[(h+1)%o.length],s.onCurve)t.lineTo(s.x,s.y);else{var l=a;n.onCurve||(s.x,n.x,s.y,n.y),a.onCurve||(l={x:.5*(s.x+a.x),y:.5*(s.y+a.y)}),t.quadraticCurveTo(s.x,s.y,l.x,l.y)}t.closePath()}return t}function Sd(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var i=t.components[r],o=e.get(i.glyphIndex);if(o.getPath(),o.points){var n=void 0;if(void 0===i.matchedPoints)n=xd(o.points,i);else{if(i.matchedPoints[0]>t.points.length-1||i.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+t.name);var s=t.points[i.matchedPoints[0]],a=o.points[i.matchedPoints[1]],c={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};a=xd([a],c)[0],c.dx=s.x-a.x,c.dy=s.y-a.y,n=xd(o.points,c)}t.points=t.points.concat(n)}}return wd(t.points)}dd.prototype={searchTag:hd,binSearch:ld,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var i=e.scripts[r].tag;if("DFLT"===i)return i;"latn"===i&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var i=r.scripts,o=hd(r.scripts,e);if(o>=0)return i[o].script;if(t){var n={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-o,0,n),n.script}}},getLangSysTable:function(e,t,r){var i=this.getScriptTable(e,r);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var o=hd(i.langSysRecords,t);if(o>=0)return i.langSysRecords[o].langSys;if(r){var n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-o,0,n),n.langSys}}},getFeatureTable:function(e,t,r,i){var o=this.getLangSysTable(e,t,i);if(o){for(var n,s=o.featureIndexes,a=this.font.tables[this.tableName].features,c=0;c<s.length;c++)if((n=a[s[c]]).tag===r)return n.feature;if(i){var h=a.length;return yl.assert(0===h||r>=a[h-1].tag,"Features must be added in alphabetical order."),n={tag:r,feature:{params:0,lookupListIndexes:[]}},a.push(n),s.push(h),n.feature}}},getLookupTables:function(e,t,r,i,o){var n=this.getFeatureTable(e,t,r,o),s=[];if(n){for(var a,c=n.lookupListIndexes,h=this.font.tables[this.tableName].lookups,l=0;l<c.length;l++)(a=h[c[l]]).lookupType===i&&s.push(a);if(0===s.length&&o){a={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var u=h.length;return h.push(a),c.push(u),[a]}}return s},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=ud(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=ld(e.glyphs,t);return r>=0?r:-1;case 2:var i=ud(e.ranges,t);return i?i.index+t-i.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,i=0;i<r.length;i++)for(var o=r[i],n=o.start,s=o.end,a=n;a<=s;a++)t.push(a);return t}},pd.prototype=dd.prototype,pd.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},pd.prototype.getKerningValue=function(e,t,r){for(var i=0;i<e.length;i++)for(var o=e[i].subtables,n=0;n<o.length;n++){var s=o[n],a=this.getCoverageIndex(s.coverage,t);if(!(a<0))switch(s.posFormat){case 1:for(var c=s.pairSets[a],h=0;h<c.length;h++){var l=c[h];if(l.secondGlyph===r)return l.value1&&l.value1.xAdvance||0}break;case 2:var u=this.getGlyphClass(s.classDef1,t),d=this.getGlyphClass(s.classDef2,r),p=s.classRecords[u][d];return p.value1&&p.value1.xAdvance||0}}return 0},pd.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},fd.prototype=dd.prototype,fd.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},fd.prototype.getSingle=function(e,t,r){for(var i=[],o=this.getLookupTables(t,r,e,1),n=0;n<o.length;n++)for(var s=o[n].subtables,a=0;a<s.length;a++){var c=s[a],h=this.expandCoverage(c.coverage),l=void 0;if(1===c.substFormat){var u=c.deltaGlyphId;for(l=0;l<h.length;l++){var d=h[l];i.push({sub:d,by:d+u})}}else{var p=c.substitute;for(l=0;l<h.length;l++)i.push({sub:h[l],by:p[l]})}}return i},fd.prototype.getMultiple=function(e,t,r){for(var i=[],o=this.getLookupTables(t,r,e,2),n=0;n<o.length;n++)for(var s=o[n].subtables,a=0;a<s.length;a++){var c=s[a],h=this.expandCoverage(c.coverage),l=void 0;for(l=0;l<h.length;l++){var u=h[l],d=c.sequences[l];i.push({sub:u,by:d})}}return i},fd.prototype.getAlternates=function(e,t,r){for(var i=[],o=this.getLookupTables(t,r,e,3),n=0;n<o.length;n++)for(var s=o[n].subtables,a=0;a<s.length;a++)for(var c=s[a],h=this.expandCoverage(c.coverage),l=c.alternateSets,u=0;u<h.length;u++)i.push({sub:h[u],by:l[u]});return i},fd.prototype.getLigatures=function(e,t,r){for(var i=[],o=this.getLookupTables(t,r,e,4),n=0;n<o.length;n++)for(var s=o[n].subtables,a=0;a<s.length;a++)for(var c=s[a],h=this.expandCoverage(c.coverage),l=c.ligatureSets,u=0;u<h.length;u++)for(var d=h[u],p=l[u],f=0;f<p.length;f++){var v=p[f];i.push({sub:[d].concat(v.components),by:v.ligGlyph})}return i},fd.prototype.addSingle=function(e,t,r,i){var o=gd(this.getLookupTables(r,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});yl.assert(1===o.coverage.format,"Single: unable to modify coverage table format "+o.coverage.format);var n=t.sub,s=this.binSearch(o.coverage.glyphs,n);s<0&&(s=-1-s,o.coverage.glyphs.splice(s,0,n),o.substitute.splice(s,0,0)),o.substitute[s]=t.by},fd.prototype.addMultiple=function(e,t,r,i){yl.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var o=gd(this.getLookupTables(r,i,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});yl.assert(1===o.coverage.format,"Multiple: unable to modify coverage table format "+o.coverage.format);var n=t.sub,s=this.binSearch(o.coverage.glyphs,n);s<0&&(s=-1-s,o.coverage.glyphs.splice(s,0,n),o.sequences.splice(s,0,0)),o.sequences[s]=t.by},fd.prototype.addAlternate=function(e,t,r,i){var o=gd(this.getLookupTables(r,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});yl.assert(1===o.coverage.format,"Alternate: unable to modify coverage table format "+o.coverage.format);var n=t.sub,s=this.binSearch(o.coverage.glyphs,n);s<0&&(s=-1-s,o.coverage.glyphs.splice(s,0,n),o.alternateSets.splice(s,0,0)),o.alternateSets[s]=t.by},fd.prototype.addLigature=function(e,t,r,i){var o=this.getLookupTables(r,i,e,4,!0)[0],n=o.subtables[0];n||(n={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=n),yl.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format);var s=t.sub[0],a=t.sub.slice(1),c={ligGlyph:t.by,components:a},h=this.binSearch(n.coverage.glyphs,s);if(h>=0){for(var l=n.ligatureSets[h],u=0;u<l.length;u++)if(vd(l[u].components,a))return;l.push(c)}else h=-1-h,n.coverage.glyphs.splice(h,0,s),n.ligatureSets.splice(h,0,[c])},fd.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r);case"ccmp":return this.getMultiple(e,t,r).concat(this.getLigatures(e,t,r));case"stch":return this.getMultiple(e,t,r)}},fd.prototype.add=function(e,t,r,i){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,i);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,i):this.addAlternate(e,t,r,i);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,i);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,r,i):this.addLigature(e,t,r,i)}};var kd,Cd,Pd,Md,Td={getPath:wd,parse:function(e,t,r,i,o){return o.lowMemory?function(e,t,r,i){var o=new lu.GlyphSet(i);return i._push=function(n){var s=r[n];s!==r[n+1]?o.push(n,lu.ttfGlyphLoader(i,n,yd,e,t+s,Sd)):o.push(n,lu.glyphLoader(i,n))},o}(e,t,r,i):function(e,t,r,i){for(var o=new lu.GlyphSet(i),n=0;n<r.length-1;n+=1){var s=r[n];s!==r[n+1]?o.push(n,lu.ttfGlyphLoader(i,n,yd,e,t+s,Sd)):o.push(n,lu.glyphLoader(i,n))}return o}(e,t,r,i)}};function Dd(e){this.font=e,this.getCommands=function(e){return Td.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function _d(e){return e}function Od(e){return Math.sign(e)*Math.round(Math.abs(e))}function Ed(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Wd(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ad(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Id(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Bd=function(e){var t=this.srPeriod,r=this.srPhase,i=1;return e<0&&(e=-e,i=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*i:e*i},Rd={x:1,y:0,axis:"x",distance:function(e,t,r,i){return(r?e.xo:e.x)-(i?t.xo:t.x)},interpolate:function(e,t,r,i){var o,n,s,a,c,h,l;if(!i||i===this)return o=e.xo-t.xo,n=e.xo-r.xo,c=t.x-t.xo,h=r.x-r.xo,0===(l=(s=Math.abs(o))+(a=Math.abs(n)))?void(e.x=e.xo+(c+h)/2):void(e.x=e.xo+(c*a+h*s)/l);o=i.distance(e,t,!0,!0),n=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(s=Math.abs(o))+(a=Math.abs(n)))?Rd.setRelative(e,e,(c*a+h*s)/l,i,!0):Rd.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,i,o){if(i&&i!==this){var n=o?t.xo:t.x,s=o?t.yo:t.y,a=n+r*i.x,c=s+r*i.y;e.x=a+(e.y-c)/i.normalSlope}else e.x=(o?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Ld={x:0,y:1,axis:"y",distance:function(e,t,r,i){return(r?e.yo:e.y)-(i?t.yo:t.y)},interpolate:function(e,t,r,i){var o,n,s,a,c,h,l;if(!i||i===this)return o=e.yo-t.yo,n=e.yo-r.yo,c=t.y-t.yo,h=r.y-r.yo,0===(l=(s=Math.abs(o))+(a=Math.abs(n)))?void(e.y=e.yo+(c+h)/2):void(e.y=e.yo+(c*a+h*s)/l);o=i.distance(e,t,!0,!0),n=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(s=Math.abs(o))+(a=Math.abs(n)))?Ld.setRelative(e,e,(c*a+h*s)/l,i,!0):Ld.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:0,setRelative:function(e,t,r,i,o){if(i&&i!==this){var n=o?t.xo:t.x,s=o?t.yo:t.y,a=n+r*i.x,c=s+r*i.y;e.y=c+i.normalSlope*(e.x-a)}else e.y=(o?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Fd(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Ud(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1==(e/=r)&&0===t?Rd:0===e&&1===t?Ld:new Fd(e,t)}function zd(e,t,r,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Rd),Object.freeze(Ld),Fd.prototype.distance=function(e,t,r,i){return this.x*Rd.distance(e,t,r,i)+this.y*Ld.distance(e,t,r,i)},Fd.prototype.interpolate=function(e,t,r,i){var o,n,s,a,c,h,l;s=i.distance(e,t,!0,!0),a=i.distance(e,r,!0,!0),o=i.distance(t,t,!1,!0),n=i.distance(r,r,!1,!0),0!==(l=(c=Math.abs(s))+(h=Math.abs(a)))?this.setRelative(e,e,(o*h+n*c)/l,i,!0):this.setRelative(e,e,(o+n)/2,i,!0)},Fd.prototype.setRelative=function(e,t,r,i,o){i=i||this;var n=o?t.xo:t.x,s=o?t.yo:t.y,a=n+r*i.x,c=s+r*i.y,h=i.normalSlope,l=this.slope,u=e.x,d=e.y;e.x=(l*u-h*a+c-d)/(l-h),e.y=l*(e.x-u)+d},Fd.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},zd.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},zd.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Nd=Object.freeze(new zd(0,0)),Gd={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Vd(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Rd,this.round=Od}}function Hd(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new zd(0,0)}function jd(e,t){var r,i=e.prog,o=e.ip,n=1;do{if(88===(r=i[++o]))n++;else if(89===r)n--;else if(64===r)o+=i[o+1]+1;else if(65===r)o+=2*i[o+1]+1;else if(r>=176&&r<=183)o+=r-176+1;else if(r>=184&&r<=191)o+=2*(r-184+1);else if(t&&1===n&&27===r)break}while(n>0);e.ip=o}function qd(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function Zd(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Yd(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function Xd(e,t){var r,i,o=t.stack,n=o.pop(),s=o.pop(),a=t.z2[n],c=t.z1[s];exports.DEBUG&&console.log("SPVTL["+e+"]",n,s),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.pv=t.dpv=Ud(r,i)}function Kd(e,t){var r,i,o=t.stack,n=o.pop(),s=o.pop(),a=t.z2[n],c=t.z1[s];exports.DEBUG&&console.log("SFVTL["+e+"]",n,s),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.fv=Ud(r,i)}function $d(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Qd(e,t){var r=t.stack.pop(),i=t.z0[r],o=t.fv,n=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var s=n.distance(i,Nd);e&&(s=t.round(s)),o.setRelative(i,Nd,s,n),o.touch(i),t.rp0=t.rp1=r}function Jd(e,t){var r,i,o,n=t.z2,s=n.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<s;a++)r=n[a],e.touched(r)||(i=r.prevTouched(e))!==r&&(i===(o=r.nextTouched(e))&&e.setRelative(r,r,e.distance(i,i,!1,!0),e,!0),e.interpolate(r,i,o,e))}function ep(e,t){for(var r=t.stack,i=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[i],n=t.fv,s=t.pv,a=t.loop,c=t.z2;a--;){var h=r.pop(),l=c[h],u=s.distance(o,o,!1,!0);n.setRelative(l,l,u,s),n.touch(l),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",h)}t.loop=1}function tp(e,t){var r=t.stack,i=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[i],n=t.fv,s=t.pv,a=r.pop(),c=t.z2[t.contours[a]],h=c;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",a);var l=s.distance(o,o,!1,!0);do{h!==o&&n.setRelative(h,h,l,s),h=h.nextPointOnContour}while(h!==c)}function rp(e,t){var r,i,o=t.stack,n=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[n],a=t.fv,c=t.pv,h=o.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",h),h){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=c.distance(s,s,!1,!0),u=r.length-2,d=0;d<u;d++)i=r[d],a.setRelative(i,i,l,c)}function ip(e,t){var r=t.stack,i=r.pop()/64,o=r.pop(),n=t.z1[o],s=t.z0[t.rp0],a=t.fv,c=t.pv;a.setRelative(n,s,i,c),a.touch(n),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",i,o),t.rp1=t.rp0,t.rp2=o,e&&(t.rp0=o)}function op(e,t){var r=t.stack,i=r.pop(),o=r.pop(),n=t.z0[o],s=t.fv,a=t.pv,c=t.cvt[i];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",i,"(",c,")",o);var h=a.distance(n,Nd);e&&(Math.abs(h-c)<t.cvCutIn&&(h=c),h=t.round(h)),s.setRelative(n,Nd,h,a),0===t.zp0&&(n.xo=n.x,n.yo=n.y),s.touch(n),t.rp0=t.rp1=o}function np(e,t){var r=t.stack,i=r.pop(),o=t.z2[i];exports.DEBUG&&console.log(t.step,"GC["+e+"]",i),r.push(64*t.dpv.distance(o,Nd,e,!1))}function sp(e,t){var r=t.stack,i=r.pop(),o=r.pop(),n=t.z1[i],s=t.z0[o],a=t.dpv.distance(s,n,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",i,o,"->",a),t.stack.push(Math.round(64*a))}function ap(e,t){var r=t.stack,i=r.pop(),o=t.fv,n=t.pv,s=t.ppem,a=t.deltaBase+16*(e-1),c=t.deltaShift,h=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",i,r);for(var l=0;l<i;l++){var u=r.pop(),d=r.pop();if(a+((240&d)>>4)===s){var p=(15&d)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",u,"by",p*c);var f=h[u];o.setRelative(f,f,p*c,n)}}}function cp(e,t){var r=t.stack,i=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(i/64))}function hp(e,t){var r=t.stack,i=r.pop(),o=t.ppem,n=t.deltaBase+16*(e-1),s=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",i,r);for(var a=0;a<i;a++){var c=r.pop(),h=r.pop();if(n+((240&h)>>4)===o){var l=(15&h)-8;l>=0&&l++;var u=l*s;exports.DEBUG&&console.log(t.step,"DELTACFIX",c,"by",u),t.cvt[c]+=u}}}function lp(e,t){var r,i,o=t.stack,n=o.pop(),s=o.pop(),a=t.z2[n],c=t.z1[s];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,s),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.dpv=Ud(r,i)}function up(e,t){var r=t.stack,i=t.prog,o=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var n=0;n<e;n++)r.push(i[++o]);t.ip=o}function dp(e,t){var r=t.ip,i=t.prog,o=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var n=0;n<e;n++){var s=i[++r]<<8|i[++r];32768&s&&(s=-(1+(65535^s))),o.push(s)}t.ip=r}function pp(e,t,r,i,o,n){var s,a,c,h,l=n.stack,u=e&&l.pop(),d=l.pop(),p=n.rp0,f=n.z0[p],v=n.z1[d],g=n.minDis,m=n.fv,b=n.dpv;c=(a=s=b.distance(v,f,!0,!0))>=0?1:-1,a=Math.abs(a),e&&(h=n.cvt[u],i&&Math.abs(a-h)<n.cvCutIn&&(a=h)),r&&a<g&&(a=g),i&&(a=n.round(a)),m.setRelative(v,f,c*a,b),m.touch(v),exports.DEBUG&&console.log(n.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(i?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?u+"("+n.cvt[u]+","+h+")":"",d,"(d =",s,"->",c*a,")"),n.rp1=n.rp0,n.rp2=d,t&&(n.rp0=d)}function fp(e){this.char=e,this.state={},this.activeState=null}function vp(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function gp(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function mp(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function bp(e){this.eventId=e,this.subscribers=[]}function yp(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach((function(e){Object.defineProperty(t.events,e,{value:new bp(e)})})),e&&r.forEach((function(r){var i=e[r];"function"==typeof i&&t.events[r].subscribe(i)})),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function xp(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],yp.call(this,e)}function wp(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Sp(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function kp(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function Cp(e){return/[A-z]/.test(e)}function Pp(e){this.font=e,this.features={}}function Mp(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function Tp(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,i=0;i<r.length;i++){var o=r[i];if(e>=o.start&&e<=o.end){var n=e-o.start;return o.index+n}}break;default:return-1}return-1}function Dp(e,t){return-1===Tp(e,t.coverage)?null:e+t.deltaGlyphId}function _p(e,t){var r=Tp(e,t.coverage);return-1===r?null:t.substitute[r]}function Op(e,t){for(var r=[],i=0;i<e.length;i++){var o=e[i],n=t.current,s=Tp(n=Array.isArray(n)?n[0]:n,o);-1!==s&&r.push(s)}return r.length!==e.length?-1:r}function Ep(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var i=Op(t.inputCoverage,e);if(-1===i)return[];var o=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var n=e.lookahead.slice(o);n.length&&kp(n[0].char);)n.shift();var s=new mp(n,0),a=Op(t.lookaheadCoverage,s),c=[].concat(e.backtrack);for(c.reverse();c.length&&kp(c[0].char);)c.shift();if(c.length<t.backtrackCoverage.length)return[];var h=new mp(c,0),l=Op(t.backtrackCoverage,h),u=[];if(i.length===t.inputCoverage.length&&a.length===t.lookaheadCoverage.length&&l.length===t.backtrackCoverage.length)for(var d=0;d<t.lookupRecords.length;d++)for(var p=t.lookupRecords[d].lookupListIndex,f=this.getLookupByIndex(p),v=0;v<f.subtables.length;v++){var g=f.subtables[v],m=this.getLookupMethod(f,g);if("12"===this.getSubstitutionType(f,g))for(var b=0;b<i.length;b++){var y=m(e.get(b));y&&u.push(y)}}return u}function Wp(e,t){var r,i=Tp(e.current,t.coverage);if(-1===i)return null;for(var o=t.ligatureSets[i],n=0;n<o.length;n++){r=o[n];for(var s=0;s<r.components.length&&e.lookahead[s]===r.components[s];s++)if(s===r.components.length-1)return r}return null}function Ap(e,t){var r=Tp(e,t.coverage);return-1===r?null:t.sequences[r]}Dd.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,i=this._prepState;if(!i||i.ppem!==t){var o=this._fpgmState;if(!o){Vd.prototype=Gd,(o=this._fpgmState=new Vd("fpgm",r.tables.fpgm)).funcs=[],o.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{Cd(o)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Vd.prototype=o,(i=this._prepState=new Vd("prep",r.tables.prep)).ppem=t;var n=r.tables.cvt;if(n)for(var s=i.cvt=new Array(n.length),a=t/r.unitsPerEm,c=0;c<n.length;c++)s[c]=n[c]*a;else i.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{Cd(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return Pd(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Pd=function(e,t){var r,i,o,n=t.ppem/t.font.unitsPerEm,s=n,a=e.components;if(Vd.prototype=t,a){var c=t.font;i=[],r=[];for(var h=0;h<a.length;h++){var l=a[h],u=c.glyphs.get(l.glyphIndex);o=new Vd("glyf",u.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+h+"---"),o.step=-1),Md(u,o,n,s);for(var d=Math.round(l.dx*n),p=Math.round(l.dy*s),f=o.gZone,v=o.contours,g=0;g<f.length;g++){var m=f[g];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+d,m.yo=m.y=m.y+p}var b=i.length;i.push.apply(i,f);for(var y=0;y<v.length;y++)r.push(v[y]+b)}e.instructions&&!o.inhibitGridFit&&((o=new Vd("glyf",e.instructions)).gZone=o.z0=o.z1=o.z2=i,o.contours=r,i.push(new zd(0,0),new zd(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),o.step=-1),Cd(o),i.length-=2)}else o=new Vd("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),o.step=-1),Md(e,o,n,s),i=o.gZone;return i},Md=function(e,t,r,i){for(var o,n,s,a=e.points||[],c=a.length,h=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[],u=0;u<c;u++)o=a[u],h[u]=new zd(o.x*r,o.y*i,o.lastPointOfContour,o.onCurve);for(var d=0;d<c;d++)o=h[d],n||(n=o,l.push(d)),o.lastPointOfContour?(o.nextPointOnContour=n,n.prevPointOnContour=o,n=void 0):(s=h[d+1],o.nextPointOnContour=s,s.prevPointOnContour=o);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var p=0;p<c;p++)console.log(p,h[p].x,h[p].y)}if(h.push(new zd(0,0),new zd(Math.round(e.advanceWidth*r),0)),Cd(t),h.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var f=0;f<c;f++)console.log(f,h[f].x,h[f].y)}}},Cd=function(e){var t=e.prog;if(t){var r,i=t.length;for(e.ip=0;e.ip<i;e.ip++){if(exports.DEBUG&&e.step++,!(r=kd[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}},kd=[qd.bind(void 0,Ld),qd.bind(void 0,Rd),Zd.bind(void 0,Ld),Zd.bind(void 0,Rd),Yd.bind(void 0,Ld),Yd.bind(void 0,Rd),Xd.bind(void 0,0),Xd.bind(void 0,1),Kd.bind(void 0,0),Kd.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.pv=e.dpv=Ud(i,r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.fv=Ud(i,r)},function(e){var t=e.stack,r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){var t=e.stack,r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop(),o=t.pop(),n=t.pop(),s=t.pop(),a=e.z0,c=e.z1,h=a[r],l=a[i],u=c[o],d=c[n],p=e.z2[s];exports.DEBUG&&console.log("ISECT[], ",r,i,o,n,s);var f=h.x,v=h.y,g=l.x,m=l.y,b=u.x,y=u.y,x=d.x,w=d.y,S=(f-g)*(y-w)-(v-m)*(b-x),k=f*m-v*g,C=b*w-y*x;p.x=(k*(b-x)-C*(f-g))/S,p.y=(k*(y-w)-C*(v-m))/S},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||Hd(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||Hd(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||Hd(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||Hd(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=Od},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Wd},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),jd(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},$d,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(i)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,i);var o=e.ip,n=e.prog;e.prog=e.funcs[r];for(var s=0;s<i;s++)Cd(e),exports.DEBUG&&console.log(++e.step,s+1<i?"next loopcall":"done loopcall",s);e.ip=o,e.prog=n},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,i=e.prog;e.prog=e.funcs[t],Cd(e),e.ip=r,e.prog=i,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,i=e.ip,o=t.pop(),n=i;for(exports.DEBUG&&console.log(e.step,"FDEF[]",o);45!==r[++i];);e.ip=i,e.funcs[o]=r.slice(n+1,i)},void 0,Qd.bind(void 0,0),Qd.bind(void 0,1),Jd.bind(void 0,Ld),Jd.bind(void 0,Rd),ep.bind(void 0,0),ep.bind(void 0,1),tp.bind(void 0,0),tp.bind(void 0,1),rp.bind(void 0,0),rp.bind(void 0,1),function(e){for(var t=e.stack,r=e.loop,i=e.fv,o=t.pop()/64,n=e.z2;r--;){var s=t.pop(),a=n[s];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,o),i.setRelative(a,a,o),i.touch(a)}e.loop=1},function(e){for(var t=e.stack,r=e.rp1,i=e.rp2,o=e.loop,n=e.z0[r],s=e.z1[i],a=e.fv,c=e.dpv,h=e.z2;o--;){var l=t.pop(),u=h[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"IP[]",l,r,"<->",i),a.interpolate(u,n,s,c),a.touch(u)}e.loop=1},ip.bind(void 0,0),ip.bind(void 0,1),function(e){for(var t=e.stack,r=e.rp0,i=e.z0[r],o=e.loop,n=e.fv,s=e.pv,a=e.z1;o--;){var c=t.pop(),h=a[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),n.setRelative(h,i,0,s),n.touch(h)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Ed},op.bind(void 0,0),op.bind(void 0,1),function(e){var t=e.prog,r=e.ip,i=e.stack,o=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var n=0;n<o;n++)i.push(t[++r]);e.ip=r},function(e){var t=e.ip,r=e.prog,i=e.stack,o=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var n=0;n<o;n++){var s=r[++t]<<8|r[++t];32768&s&&(s=-(1+(65535^s))),i.push(s)}e.ip=t},function(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var i=t.pop(),o=t.pop();exports.DEBUG&&console.log(e.step,"WS",i,o),r[o]=i},function(e){var t=e.stack,r=e.store,i=t.pop();exports.DEBUG&&console.log(e.step,"RS",i);var o=r&&r[i]||0;t.push(o)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,i),e.cvt[i]=r/64},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])},np.bind(void 0,0),np.bind(void 0,1),void 0,sp.bind(void 0,0),sp.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,i),t.push(i<r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,i),t.push(i<=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,i),t.push(i>r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,i),t.push(i>=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,i),t.push(r===i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,i),t.push(r!==i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(jd(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,i),t.push(r&&i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,i),t.push(r||i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)},ap.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,i),t.push(i+r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,i),t.push(i-r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,i),t.push(64*i/r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,i),t.push(i*r/64)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64))},cp.bind(void 0,0),cp.bind(void 0,1),cp.bind(void 0,2),cp.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,i),e.cvt[i]=r*e.ppem/e.font.unitsPerEm},ap.bind(void 0,2),ap.bind(void 0,3),hp.bind(void 0,1),hp.bind(void 0,2),hp.bind(void 0,3),function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Bd,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Bd,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=_d},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ad},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Id},$d,$d,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},lp.bind(void 0,0),lp.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(i=35),32&r&&(i|=4096),t.push(i)},void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop(),o=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(i),t.push(r),t.push(o)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,i),t.push(Math.max(i,r))},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,i),t.push(Math.min(i,r))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,up.bind(void 0,1),up.bind(void 0,2),up.bind(void 0,3),up.bind(void 0,4),up.bind(void 0,5),up.bind(void 0,6),up.bind(void 0,7),up.bind(void 0,8),dp.bind(void 0,1),dp.bind(void 0,2),dp.bind(void 0,3),dp.bind(void 0,4),dp.bind(void 0,5),dp.bind(void 0,6),dp.bind(void 0,7),dp.bind(void 0,8),pp.bind(void 0,0,0,0,0,0),pp.bind(void 0,0,0,0,0,1),pp.bind(void 0,0,0,0,0,2),pp.bind(void 0,0,0,0,0,3),pp.bind(void 0,0,0,0,1,0),pp.bind(void 0,0,0,0,1,1),pp.bind(void 0,0,0,0,1,2),pp.bind(void 0,0,0,0,1,3),pp.bind(void 0,0,0,1,0,0),pp.bind(void 0,0,0,1,0,1),pp.bind(void 0,0,0,1,0,2),pp.bind(void 0,0,0,1,0,3),pp.bind(void 0,0,0,1,1,0),pp.bind(void 0,0,0,1,1,1),pp.bind(void 0,0,0,1,1,2),pp.bind(void 0,0,0,1,1,3),pp.bind(void 0,0,1,0,0,0),pp.bind(void 0,0,1,0,0,1),pp.bind(void 0,0,1,0,0,2),pp.bind(void 0,0,1,0,0,3),pp.bind(void 0,0,1,0,1,0),pp.bind(void 0,0,1,0,1,1),pp.bind(void 0,0,1,0,1,2),pp.bind(void 0,0,1,0,1,3),pp.bind(void 0,0,1,1,0,0),pp.bind(void 0,0,1,1,0,1),pp.bind(void 0,0,1,1,0,2),pp.bind(void 0,0,1,1,0,3),pp.bind(void 0,0,1,1,1,0),pp.bind(void 0,0,1,1,1,1),pp.bind(void 0,0,1,1,1,2),pp.bind(void 0,0,1,1,1,3),pp.bind(void 0,1,0,0,0,0),pp.bind(void 0,1,0,0,0,1),pp.bind(void 0,1,0,0,0,2),pp.bind(void 0,1,0,0,0,3),pp.bind(void 0,1,0,0,1,0),pp.bind(void 0,1,0,0,1,1),pp.bind(void 0,1,0,0,1,2),pp.bind(void 0,1,0,0,1,3),pp.bind(void 0,1,0,1,0,0),pp.bind(void 0,1,0,1,0,1),pp.bind(void 0,1,0,1,0,2),pp.bind(void 0,1,0,1,0,3),pp.bind(void 0,1,0,1,1,0),pp.bind(void 0,1,0,1,1,1),pp.bind(void 0,1,0,1,1,2),pp.bind(void 0,1,0,1,1,3),pp.bind(void 0,1,1,0,0,0),pp.bind(void 0,1,1,0,0,1),pp.bind(void 0,1,1,0,0,2),pp.bind(void 0,1,1,0,0,3),pp.bind(void 0,1,1,0,1,0),pp.bind(void 0,1,1,0,1,1),pp.bind(void 0,1,1,0,1,2),pp.bind(void 0,1,1,0,1,3),pp.bind(void 0,1,1,1,0,0),pp.bind(void 0,1,1,1,0,1),pp.bind(void 0,1,1,1,0,2),pp.bind(void 0,1,1,1,0,3),pp.bind(void 0,1,1,1,1,0),pp.bind(void 0,1,1,1,1,1),pp.bind(void 0,1,1,1,1,2),pp.bind(void 0,1,1,1,1,3)],fp.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},fp.prototype.getState=function(e){return this.state[e]||null},xp.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},xp.prototype.composeRUD=function(e){var t=this,r=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),i=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter((function(e){return!i(e)}))])},xp.prototype.replaceRange=function(e,t,r,i){t=null!==t?t:this.tokens.length;var o=r.every((function(e){return e instanceof fp}));if(!isNaN(e)&&this.inboundIndex(e)&&o){var n=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return i||this.dispatch("replaceToken",[e,t,r]),[n,r]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},xp.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof fp){var i=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[i[0],t]}return{FAIL:"replaceToken: invalid token or index."}},xp.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var i=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[i,e,t]),i},xp.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}return{FAIL:"removeToken: invalid token index."}},xp.prototype.insertToken=function(e,t,r){return e.every((function(e){return e instanceof fp}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},xp.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe((function(i,o){var n=[i,o],s=[i,o];if(null===t||!0===t.apply(this,n)){var a=r.apply(this,s);i.setState(e,a)}})),this.registeredModifiers.push(e)},bp.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},bp.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},mp.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},mp.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},xp.prototype.rangeToText=function(e){if(e instanceof vp)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},xp.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},xp.prototype.getContext=function(e){return this.registeredContexts[e]||null},xp.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},xp.prototype.dispatch=function(e,t){var r=this,i=this.events[e];i instanceof bp&&i.subscribers.forEach((function(e){e.apply(r,t||[])}))},xp.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof r)return{FAIL:"missing context end check."};var i=new gp(e,t,r);return this.registeredContexts[e]=i,this.contextCheckers.push(i),i},xp.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},xp.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},xp.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)e.hasOwnProperty(t)&&(e[t].ranges=[])},xp.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var r=new mp(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},xp.prototype.setEndOffset=function(e,t){var r=new vp(this.getContext(t).openRange.startIndex,e,t),i=this.getContext(t).ranges;return r.rangeId=t+"."+i.length,i.push(r),this.getContext(t).openRange=null,r},xp.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach((function(i){var o=i.contextName,n=t.getContext(o).openRange;if(!n&&i.checkStart(e)&&(n=new vp(r,null,o),t.getContext(o).openRange=n,t.dispatch("contextStart",[o,r])),n&&i.checkEnd(e)){var s=r-n.startIndex+1,a=t.setEndOffset(s,o);t.dispatch("contextEnd",[o,a])}}))},xp.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var i=t[r],o=new mp(t,r);this.dispatch("next",[o]),this.runContextCheck(o);var n=new fp(i);this.tokens.push(n),this.dispatch("newToken",[n,o])}return this.dispatch("end",[this.tokens]),this.tokens},Pp.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if("DFLT"===r.tag)return r.script.defaultLangSys.featureIndexes}return[]},Pp.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===e&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var o=i.langSysRecords;if(o)for(var n=0;n<o.length;n++){var s=o[n];if(s.tag===e)return s.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Pp.prototype.mapTagsToFeatures=function(e,t){for(var r={},i=0;i<e.length;i++){var o=e[i].tag,n=e[i].feature;r[o]=n}this.features[t].tags=r},Pp.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var i=this.font.tables.gsub;return t=r.map((function(e){return i.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Pp.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Pp.prototype.getLookupMethod=function(e,t){var r=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return Dp.apply(r,[e,t])};case"12":return function(e){return _p.apply(r,[e,t])};case"63":return function(e){return Ep.apply(r,[e,t])};case"41":return function(e){return Wp.apply(r,[e,t])};case"21":return function(e){return Ap.apply(r,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Pp.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,i=this.getFeature({tag:e.tag,script:e.script});if(!i)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var o=this.getFeatureLookups(i),n=[].concat(t.context),s=0;s<o.length;s++)for(var a=o[s],c=this.getLookupSubtables(a),h=0;h<c.length;h++){var l=c[h],u=this.getSubstitutionType(a,l),d=this.getLookupMethod(a,l),p=void 0;switch(u){case"11":(p=d(t.current))&&n.splice(r,1,new Mp({id:11,tag:e.tag,substitution:p}));break;case"12":(p=d(t.current))&&n.splice(r,1,new Mp({id:12,tag:e.tag,substitution:p}));break;case"63":p=d(t),Array.isArray(p)&&p.length&&n.splice(r,1,new Mp({id:63,tag:e.tag,substitution:p}));break;case"41":(p=d(t))&&n.splice(r,1,new Mp({id:41,tag:e.tag,substitution:p}));break;case"21":(p=d(t.current))&&n.splice(r,1,new Mp({id:21,tag:e.tag,substitution:p}))}t=new mp(n,r),Array.isArray(p)&&!p.length||(p=null)}return n.length?n:null},Pp.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&r},Pp.prototype.getLookupSubtables=function(e){return e.subtables||null},Pp.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Pp.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Pp.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var Ip={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&wp(t)||!wp(r)&&wp(t)},endCheck:function(e){var t=e.get(1);return null===t||!wp(t)}},Bp={startCheck:function(e){var t=e.current,r=e.get(-1);return(wp(t)||kp(t))&&!wp(r)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!wp(t)&&!kp(t):var r=/\s/.test(t);if(!r)return!0;if(r)if(!e.lookahead.some((function(e){return wp(e)||kp(e)})))return!0;break;default:return!1}}},Rp={11:function(e,t,r){t[r].setState(e.tag,e.substitution)},12:function(e,t,r){t[r].setState(e.tag,e.substitution)},63:function(e,t,r){e.substitution.forEach((function(i,o){t[r+o].setState(e.tag,i)}))},41:function(e,t,r){var i=t[r];i.setState(e.tag,e.substitution.ligGlyph);for(var o=e.substitution.components.length,n=0;n<o;n++)(i=t[r+n+1]).setState("deleted",!0)}};function Lp(e,t,r){e instanceof Mp&&Rp[e.id]&&Rp[e.id](e,t,r)}function Fp(e){var t=this,r="arab",i=this.featuresTags[r],o=this.tokenizer.getRangeTokens(e);if(1!==o.length){var n=new mp(o.map((function(e){return e.getState("glyphIndex")})),0),s=new mp(o.map((function(e){return e.char})),0);o.forEach((function(e,a){if(!kp(e.char)){n.setCurrentIndex(a),s.setCurrentIndex(a);var c,h=0;switch(function(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var i=t[r],o=Sp(i),n=kp(i);if(!o&&!n)return!0;if(o)return!1}return!1}(s)&&(h|=1),function(e){if(Sp(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!kp(e.lookahead[t]))return!0;return!1}(s)&&(h|=2),h){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi"}if(-1!==i.indexOf(c)){var l=t.query.lookupFeature({tag:c,script:r,contextParams:n});if(l instanceof Error)return console.info(l.message);l.forEach((function(e,t){e instanceof Mp&&(Lp(e,o,t),n.context[t]=e.substitution)}))}}}))}}function Up(e,t){return new mp(e.map((function(e){return e.activeState.value})),t||0)}function zp(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=Up(r);i.context.forEach((function(e,o){i.setCurrentIndex(o);var n=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:i});n.length&&(n.forEach((function(e){return Lp(e,r,o)})),i=Up(r))}))}var Np={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&Cp(t)||!Cp(r)&&Cp(t)},endCheck:function(e){var t=e.get(1);return null===t||!Cp(t)}};function Gp(e,t){return new mp(e.map((function(e){return e.activeState.value})),t||0)}function Vp(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=Gp(r);i.context.forEach((function(e,o){i.setCurrentIndex(o);var n=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:i});n.length&&(n.forEach((function(e){return Lp(e,r,o)})),i=Gp(r))}))}function Hp(e){this.baseDir=e||"ltr",this.tokenizer=new xp,this.featuresTags={}}function jp(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function qp(){return jp.call(this,"latinWord"),jp.call(this,"arabicWord"),jp.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Zp(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var r=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())}))}function Yp(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Xp(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(Yp.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Fp.call(e,t)})))}function Kp(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("rlig")&&(Yp.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){zp.call(e,t)})))}function $p(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("liga")&&(Yp.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){Vp.call(e,t)})))}function Qp(e){(e=e||{}).tables=e.tables||{},e.empty||(md(e.familyName,"When creating a new Font object, familyName is required."),md(e.styleName,"When creating a new Font object, styleName is required."),md(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),md(e.ascender,"When creating a new Font object, ascender is required."),md(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new lu.GlyphSet(this,e.glyphs||[]),this.encoding=new ru(this),this.position=new pd(this),this.substitution=new fd(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Dd(this):void 0}})}function Jp(e,t){var r=JSON.stringify(e),i=256;for(var o in t){var n=parseInt(o);if(n&&!(n<256)){if(JSON.stringify(t[o])===r)return n;i<=n&&(i=n+1)}}return t[i]=e,i}function ef(e,t,r){var i=Jp(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function tf(e,t,r){var i={},o=new Xl.Parser(e,t);return i.tag=o.parseTag(),i.minValue=o.parseFixed(),i.defaultValue=o.parseFixed(),i.maxValue=o.parseFixed(),o.skip("uShort",1),i.name=r[o.parseUShort()]||{},i}function rf(e,t,r,i){for(var o=[{name:"nameID_"+e,type:"USHORT",value:Jp(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],n=0;n<r.length;++n){var s=r[n].tag;o.push({name:"axis_"+e+" "+s,type:"FIXED",value:t.coordinates[s]<<16})}return o}function of(e,t,r,i){var o={},n=new Xl.Parser(e,t);o.name=i[n.parseUShort()]||{},n.skip("uShort",1),o.coordinates={};for(var s=0;s<r.length;++s)o.coordinates[r[s].tag]=n.parseFixed();return o}Hp.prototype.setText=function(e){this.text=e},Hp.prototype.contextChecks={latinWordCheck:Np,arabicWordCheck:Ip,arabicSentenceCheck:Bp},Hp.prototype.registerFeatures=function(e,t){var r=this,i=t.filter((function(t){return r.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(i):this.featuresTags[e]=i},Hp.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Pp(e));for(var r=0;r<t.length;r++){var i=t[r];this.query.supports({script:i.script})&&this.registerFeatures(i.script,i.tags)}},Hp.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)},Hp.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},Hp.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Xp.call(this),Kp.call(this)),this.checkContextReady("latinWord")&&$p.call(this),this.checkContextReady("arabicSentence")&&Zp.call(this)},Hp.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),qp.call(this),this.applyFeaturesToContexts())},Hp.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},Hp.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var i=this.tokenizer.tokens[r];if(!i.state.deleted){var o=i.activeState.value;t.push(Array.isArray(o)?o[0]:o)}}return t},Qp.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Qp.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Qp.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Qp.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},Qp.prototype.stringToGlyphs=function(e,t){var r=this,i=new Hp;i.registerModifier("glyphIndex",null,(function(e){return r.charToGlyphIndex(e.char)}));var o=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;i.applyFeatures(this,o);for(var n=i.getTextGlyphs(e),s=n.length,a=new Array(s),c=this.glyphs.get(0),h=0;h<s;h+=1)a[h]=this.glyphs.get(n[h])||c;return a},Qp.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Qp.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Qp.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Qp.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},Qp.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Qp.prototype.forEachGlyph=function(e,t,r,i,o,n){t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:72,o=Object.assign({},this.defaultRenderOptions,o);var s,a=1/this.unitsPerEm*i,c=this.stringToGlyphs(e,o);if(o.kerning){var h=o.script||this.position.getDefaultScriptName();s=this.position.getKerningTables(h,o.language)}for(var l=0;l<c.length;l+=1){var u=c[l];n.call(this,u,t,r,i,o),u.advanceWidth&&(t+=u.advanceWidth*a),o.kerning&&l<c.length-1&&(t+=(s?this.position.getKerningValue(s,u.index,c[l+1].index):this.getKerningValue(u,c[l+1]))*a),o.letterSpacing?t+=o.letterSpacing*i:o.tracking&&(t+=o.tracking/1e3*i)}return t},Qp.prototype.getPath=function(e,t,r,i,o){var n=new gl;return this.forEachGlyph(e,t,r,i,o,(function(e,t,r,i){var s=e.getPath(t,r,i,o,this);n.extend(s)})),n},Qp.prototype.getPaths=function(e,t,r,i,o){var n=[];return this.forEachGlyph(e,t,r,i,o,(function(e,t,r,i){var s=e.getPath(t,r,i,o,this);n.push(s)})),n},Qp.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,(function(){}))},Qp.prototype.draw=function(e,t,r,i,o,n){this.getPath(t,r,i,o,n).draw(e)},Qp.prototype.drawPoints=function(e,t,r,i,o,n){this.forEachGlyph(t,r,i,o,n,(function(t,r,i,o){t.drawPoints(e,r,i,o)}))},Qp.prototype.drawMetrics=function(e,t,r,i,o,n){this.forEachGlyph(t,r,i,o,n,(function(t,r,i,o){t.drawMetrics(e,r,i,o)}))},Qp.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Qp.prototype.validate=function(){var e=this;function t(t){var r=e.getEnglishName(t);r&&r.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Qp.prototype.toTables=function(){return cd(this)},Qp.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Qp.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t},Qp.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var i=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var o=new DataView(i),n=new Blob([o],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(n),s.download=e;var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),s.dispatchEvent(c)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=a(256),l=function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),i=0;i<t.length;++i)t[i]=r[i];return t}(i);h.writeFileSync(e,l)}},Qp.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Qp.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Qp.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var nf={make:function(e,t){var r=new Nl.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var i=0;i<e.axes.length;i++)r.fields=r.fields.concat(ef(i,e.axes[i],t));for(var o=0;o<e.instances.length;o++)r.fields=r.fields.concat(rf(o,e.instances[o],e.axes,t));return r},parse:function(e,t,r){var i=new Xl.Parser(e,t),o=i.parseULong();yl.argument(65536===o,"Unsupported fvar table version.");var n=i.parseOffset16();i.skip("uShort",1);for(var s=i.parseUShort(),a=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),l=[],u=0;u<s;u++)l.push(tf(e,t+n+u*a,r));for(var d=[],p=t+n+s*a,f=0;f<c;f++)d.push(of(e,p+f*h,l,r));return{axes:l,instances:d}}},sf=function(){return{coverage:this.parsePointer(Zl.coverage),attachPoints:this.parseList(Zl.pointer(Zl.uShortList))}},af=function(){var e=this.parseUShort();return yl.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},cf=function(){return this.parseList(Zl.pointer(af))},hf=function(){return{coverage:this.parsePointer(Zl.coverage),ligGlyphs:this.parseList(Zl.pointer(cf))}},lf=function(){return this.parseUShort(),this.parseList(Zl.pointer(Zl.coverage))},uf={parse:function(e,t){var r=new Zl(e,t=t||0),i=r.parseVersion(1);yl.argument(1===i||1.2===i||1.3===i,"Unsupported GDEF table version.");var o={version:i,classDef:r.parsePointer(Zl.classDef),attachList:r.parsePointer(sf),ligCaretList:r.parsePointer(hf),markAttachClassDef:r.parsePointer(Zl.classDef)};return i>=1.2&&(o.markGlyphSets=r.parsePointer(lf)),o}},df=new Array(10);df[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(Zl.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(Zl.coverage),values:this.parseValueRecordList()}:void yl.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},df[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();yl.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(Zl.coverage),i=this.parseUShort(),o=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,pairSets:this.parseList(Zl.pointer(Zl.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}}))))};if(2===t){var n=this.parsePointer(Zl.classDef),s=this.parsePointer(Zl.classDef),a=this.parseUShort(),c=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,classDef1:n,classDef2:s,class1Count:a,class2Count:c,classRecords:this.parseList(a,Zl.list(c,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}})))}}},df[3]=function(){return{error:"GPOS Lookup 3 not supported"}},df[4]=function(){return{error:"GPOS Lookup 4 not supported"}},df[5]=function(){return{error:"GPOS Lookup 5 not supported"}},df[6]=function(){return{error:"GPOS Lookup 6 not supported"}},df[7]=function(){return{error:"GPOS Lookup 7 not supported"}},df[8]=function(){return{error:"GPOS Lookup 8 not supported"}},df[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var pf=new Array(10),ff={parse:function(e,t){var r=new Zl(e,t=t||0),i=r.parseVersion(1);return yl.argument(1===i||1.1===i,"Unsupported GPOS table version "+i),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(df)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(df),variations:r.parseFeatureVariationsList()}},make:function(e){return new Nl.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Nl.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Nl.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Nl.LookupList(e.lookups,pf)}])}},vf={parse:function(e,t){var r=new Xl.Parser(e,t),i=r.parseUShort();if(0===i)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();yl.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var o=0;o<i;o+=1){var n=e.parseUShort(),s=e.parseUShort(),a=e.parseShort();t[n+","+s]=a}return t}(r);if(1===i)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0===r){var i=e.parseUShort();e.skip("uShort",3);for(var o=0;o<i;o+=1){var n=e.parseUShort(),s=e.parseUShort(),a=e.parseShort();t[n+","+s]=a}}return t}(r);throw new Error("Unsupported kern table version ("+i+").")}},gf={parse:function(e,t,r,i){for(var o=new Xl.Parser(e,t),n=i?o.parseUShort:o.parseULong,s=[],a=0;a<r+1;a+=1){var c=n.call(o);i&&(c*=2),s.push(c)}return s}};function mf(e,t){a(256).readFile(e,(function(e,r){if(e)return t(e.message);t(null,function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;++i)r[i]=e[i];return t}(r))}))}function bf(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function yf(e,t){for(var r=[],i=12,o=0;o<t;o+=1){var n=Xl.getTag(e,i),s=Xl.getULong(e,i+4),a=Xl.getULong(e,i+8),c=Xl.getULong(e,i+12);r.push({tag:n,checksum:s,offset:a,length:c,compression:!1}),i+=16}return r}function xf(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if(pl(r,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function wf(e,t){var r,i;t=null==t?{}:t;var o,n,s,a,c,h,l,u,d,p,f,v,g,m=new Qp({empty:!0}),b=new DataView(e,0),y=[],x=Xl.getTag(b,0);if(x===String.fromCharCode(0,1,0,0)||"true"===x||"typ1"===x)m.outlinesFormat="truetype",y=yf(b,o=Xl.getUShort(b,4));else if("OTTO"===x)m.outlinesFormat="cff",y=yf(b,o=Xl.getUShort(b,4));else{if("wOFF"!==x)throw new Error("Unsupported OpenType signature "+x);var w=Xl.getTag(b,4);if(w===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+x);m.outlinesFormat="cff"}y=function(e,t){for(var r=[],i=44,o=0;o<t;o+=1){var n,s=Xl.getTag(e,i),a=Xl.getULong(e,i+4),c=Xl.getULong(e,i+8),h=Xl.getULong(e,i+12);n=c<h&&"WOFF",r.push({tag:s,offset:a,compression:n,compressedLength:c,length:h}),i+=20}return r}(b,o=Xl.getUShort(b,12))}for(var S=0;S<o;S+=1){var k=y[S],C=void 0;switch(k.tag){case"cmap":C=xf(b,k),m.tables.cmap=$l.parse(C.data,C.offset),m.encoding=new iu(m.tables.cmap);break;case"cvt ":C=xf(b,k),g=new Xl.Parser(C.data,C.offset),m.tables.cvt=g.parseShortList(k.length/2);break;case"fvar":s=k;break;case"fpgm":C=xf(b,k),g=new Xl.Parser(C.data,C.offset),m.tables.fpgm=g.parseByteList(k.length);break;case"head":C=xf(b,k),m.tables.head=Ou.parse(C.data,C.offset),m.unitsPerEm=m.tables.head.unitsPerEm,r=m.tables.head.indexToLocFormat;break;case"hhea":C=xf(b,k),m.tables.hhea=Eu.parse(C.data,C.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":u=k;break;case"ltag":C=xf(b,k),i=Au.parse(C.data,C.offset);break;case"maxp":C=xf(b,k),m.tables.maxp=Iu.parse(C.data,C.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":f=k;break;case"OS/2":C=xf(b,k),m.tables.os2=Xu.parse(C.data,C.offset);break;case"post":C=xf(b,k),m.tables.post=Ku.parse(C.data,C.offset),m.glyphNames=new nu(m.tables.post);break;case"prep":C=xf(b,k),g=new Xl.Parser(C.data,C.offset),m.tables.prep=g.parseByteList(k.length);break;case"glyf":a=k;break;case"loca":p=k;break;case"CFF ":n=k;break;case"kern":d=k;break;case"GDEF":c=k;break;case"GPOS":h=k;break;case"GSUB":l=k;break;case"meta":v=k}}var P=xf(b,f);if(m.tables.name=Zu.parse(P.data,P.offset,i),m.names=m.tables.name,a&&p){var M=0===r,T=xf(b,p),D=gf.parse(T.data,T.offset,m.numGlyphs,M),_=xf(b,a);m.glyphs=Td.parse(_.data,_.offset,D,m,t)}else{if(!n)throw new Error("Font doesn't contain TrueType or CFF outlines.");var O=xf(b,n);_u.parse(O.data,O.offset,m,t)}var E=xf(b,u);if(Wu.parse(m,E.data,E.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),function(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),i=0;i<r.length;i+=1){var o=r[i],n=t[o];void 0===e._IndexToUnicodeMap[n]?e._IndexToUnicodeMap[n]={unicodes:[parseInt(o)]}:e._IndexToUnicodeMap[n].unicodes.push(parseInt(o))}}(e):function(e){for(var t,r=e.tables.cmap.glyphIndexMap,i=Object.keys(r),o=0;o<i.length;o+=1){var n=i[o],s=r[n];(t=e.glyphs.get(s)).addUnicode(parseInt(n))}for(var a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?e.isCIDFont?t.name="gid"+a:t.name=e.cffEncoding.charset[a]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(a))}(e)}(m,t),d){var W=xf(b,d);m.kerningPairs=vf.parse(W.data,W.offset)}else m.kerningPairs={};if(c){var A=xf(b,c);m.tables.gdef=uf.parse(A.data,A.offset)}if(h){var I=xf(b,h);m.tables.gpos=ff.parse(I.data,I.offset),m.position.init()}if(l){var B=xf(b,l);m.tables.gsub=ed.parse(B.data,B.offset)}if(s){var R=xf(b,s);m.tables.fvar=nf.parse(R.data,R.offset,m.names)}if(v){var L=xf(b,v);m.tables.meta=td.parse(L.data,L.offset),m.metas=m.tables.meta}return m}var Sf=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class kf{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}create(e){return Sf(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3d",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}createWithUrl(e){return Sf(this,void 0,void 0,(function*(){const{letterPaths:t,advanceWidth:r,boundingBox:i}=yield Cf(e.fontUrl,e.fontSize,e.text,e.originAlignment),o=Object.assign(Object.assign({},e),{letterPaths:t}),n=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3dUrl",o);n.data.advanceWidth=r,n.data.boundingBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2};const s=Q.parse(n.data,n.shapes);return Object.assign(Object.assign({},s),{type:n.data.type,name:n.data.name,shapes:n.shapes,compound:n.compound})}))}createTextOnFace(e){return Sf(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3dFace",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}createTextOnFaceUrl(e){return Sf(this,void 0,void 0,(function*(){const{letterPaths:t,advanceWidth:r,boundingBox:i}=yield Cf(e.fontUrl,e.fontSize,e.text,e.originAlignment),o=Object.assign(Object.assign({},e),{letterPaths:t}),n=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.text3dFaceUrl",o);n.data.advanceWidth=r,n.data.boundingBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2};const s=Q.parse(n.data,n.shapes);return Object.assign(Object.assign({},s),{type:n.data.type,name:n.data.name,shapes:n.shapes,compound:n.compound})}))}createTextsOnFace(e){return Sf(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.texts3dFace",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}createTextsOnFaceUrl(e){return Sf(this,void 0,void 0,(function*(){const t=yield Promise.all(e.definitions.map((e=>Sf(this,void 0,void 0,(function*(){const{letterPaths:t}=yield Cf(e.fontUrl,e.fontSize,e.text,e.originAlignment);return Object.assign(Object.assign({},e),{letterPaths:t})}))))),r=Object.assign(Object.assign({},e),{definitions:t}),i=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.texts3dFaceUrl",r),o=Q.parse(i.data,i.shapes);return Object.assign(Object.assign({},o),{type:i.data.type,name:i.data.name,shapes:i.shapes,compound:i.compound})}))}definition3dTextOnFace(e){return e}definition3dTextOnFaceUrl(e){return e}drawModel(e,t=.003){return Sf(this,void 0,void 0,(function*(){const r=new q.Mesh("brepMesh"+Math.random(),this.context.scene),i=new vr.DrawOcctShapeOptions;i.faceOpacity=0,i.edgeColour="#bc7e5b",i.edgeWidth=.6,i.precision=t;const o=yield this.draw.drawAnyAsync({entity:e.compound,options:i}),n=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return n.albedoColor=new q.Color3(1,1,1),n.ambientColor=q.Color3.FromHexString("#ffffff"),n.metallic=0,n.roughness=.7,n.zOffset=1,o.getChildMeshes()[0].material=n,o.material=n,o.parent=r,r}))}getCompoundShape(e){return e.model.compound}getCharacterShape(e){if(e.index<0||e.index>=e.model.characterParts.length)throw new Error("Index is out of bounds.");return e.model.characterParts[e.index].shapes.compound}getCharacterShapes(e){return e.model.characterParts.map((e=>e.shapes.compound))}getCharacterCenterCoordinates(e){return e.model.characterCenterCoordinates}getFaceCutout(e){if(e.model.faceParts){const t=e.model.faceParts.filter((e=>e.type===Ds.cutout)).map((e=>e.shapes.face));if(t.length>0)return t[0];throw new Error("No cutout was found.")}throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getAllFacesOfCutout(e){if(e.model.faceParts)return e.model.faceParts.filter((e=>e.type===Ds.cutout||e.type===Ds.cutoutInsideCharacter)).map((e=>e.shapes.face));throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getCutoutsInsideCharacters(e){if(e.model.faceParts)return e.model.faceParts.filter((e=>e.type===Ds.cutoutInsideCharacter)).map((e=>e.shapes.face));throw new Error("It seems this text was not created on the face, so there is no face cutout.")}getAdvanceWidth(e){return e.model.advanceWidth}}function Cf(e,t,r,i){return Sf(this,void 0,void 0,(function*(){if(!e)throw new Error("You must provide either fontUrl to create 3d text with URL.");const o=yield new Promise(((t,r)=>{!function(e,t,r){r=null==r?{}:r;var i="undefined"!=typeof window||r.isUrl?bf:mf;new Promise((function(o,n){i(e,(function(e,i){if(e){if(t)return t(e);n(e)}var s;try{s=wf(i,r)}catch(e){if(t)return t(e,null);n(e)}if(t)return t(null,s);o(s)}))}))}(e,((e,i)=>{e?r(e):t(i)}),{isUrl:!0})})),n=o.getPath(r,0,0,t);let s=o.getPaths(r,0,0,t,{});const a=o.getAdvanceWidth(r,t),c=n.getBoundingBox();switch(i){case _s.leftBottom:break;case _s.leftMiddle:s=o.getPaths(r,0,(c.y2-c.y1)/2,t,{});break;case _s.leftTop:s=o.getPaths(r,0,c.y2-c.y1,t,{});break;case _s.centerBottom:s=o.getPaths(r,-(c.x2-c.x1)/2,0,t,{});break;case _s.centerMiddle:s=o.getPaths(r,-(c.x2-c.x1)/2,(c.y2-c.y1)/2,t,{});break;case _s.centerTop:s=o.getPaths(r,-(c.x2-c.x1)/2,c.y2-c.y1,t,{});break;case _s.rightBottom:s=o.getPaths(r,-(c.x2-c.x1),0,t,{});break;case _s.rightMiddle:s=o.getPaths(r,-(c.x2-c.x1),(c.y2-c.y1)/2,t,{});break;case _s.rightTop:s=o.getPaths(r,-(c.x2-c.x1),c.y2-c.y1,t,{})}return{letterPaths:s,advanceWidth:a,boundingBox:c}}))}var Pf,Mf=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class Tf{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i}createPyramidSimple(e){return Mf(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.pyramidSimple",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}createPyramidSimpleAffectors(e){return Mf(this,void 0,void 0,(function*(){const t=yield this.occWorkerManager.genericCallToWorkerPromise("plugins.advanced.pyramidSimpleAffectors",e),r=Q.parse(t.data,t.shapes);return Object.assign(Object.assign({},r),{type:t.data.type,name:t.data.name,shapes:t.shapes,compound:t.compound})}))}drawModel(e){return Mf(this,void 0,void 0,(function*(){const t=new q.Mesh("brepMesh"+Math.random(),this.context.scene),r=new vr.DrawOcctShapeOptions;r.faceOpacity=0,r.edgeColour="#bc7e5b",r.edgeWidth=1,r.precision=e.originalInputs.precision;const i=yield this.draw.drawAnyAsync({entity:e.compound,options:r}),o=new q.PBRMaterial("brepMaterial"+Math.random(),this.context.scene);return o.albedoColor=new q.Color3(1,1,1),o.ambientColor=q.Color3.FromHexString("#ffffff"),o.metallic=.3,o.roughness=.6,o.zOffset=2,i.getChildMeshes()[0].material=o,i.material=o,i.parent=t,t}))}getCompoundShape(e){return e.model.compound}getCompoundShapeOnFace(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.compound;throw new Error("Face index is out of range")}getCompoundShapeCellOnFace(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length){if(e.uIndex<e.model.originalInputs.uNumber&&e.vIndex<e.model.originalInputs.vNumber){const t=e.model.faceParts[e.faceIndex].cells.find((t=>t.uIndex===e.uIndex&&t.vIndex===e.vIndex));if(t)return t.shapes.compound;throw new Error("Cell does not exist on the face")}throw new Error("Cell u or v index is out of range")}throw new Error("Face index is out of range")}getAllPyramidCells(e){return e.model.faceParts.map((e=>e.cells)).flat()}getAllPyramidCellsOnFace(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].cells;throw new Error("Face index is out of range")}getAllPyramidUCellsOnFace(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].cells;throw new Error("Face index is out of range")}getAllPyramidUCellsOnFaceAtU(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].cells.filter((t=>t.uIndex===e.uIndex));throw new Error("Face index is out of range")}getAllPyramidUCellsOnFaceAtV(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].cells.filter((t=>t.vIndex===e.vIndex));throw new Error("Face index is out of range")}getCellOnIndex(e){if(e.model.faceParts&&e.faceIndex<e.model.faceParts.length){if(e.uIndex<e.model.originalInputs.uNumber&&e.vIndex<e.model.originalInputs.vNumber){const t=e.model.faceParts[e.faceIndex].cells.find((t=>t.uIndex===e.uIndex&&t.vIndex===e.vIndex));if(t)return t;throw new Error("Cell does not exist on the face")}throw new Error("Cell u or v index is out of range")}throw new Error("Face index is out of range")}getTopPointsOfCells(e){return e.cells.map((e=>e.topPoint))}getCenterPointsOfCells(e){return e.cells.map((e=>e.centerPoint))}getCornerPointsOfCells(e){return e.cells.map((e=>[e.cornerPoint1,e.cornerPoint2,e.cornerPoint3,e.cornerPoint4].filter((e=>void 0!==e))))}getCornerPointOfCells(e){if(e.index>=0&&e.index<=3)return e.cells.map((t=>0===e.index?t.cornerPoint1:1===e.index?t.cornerPoint2:2===e.index?t.cornerPoint3:3===e.index?t.cornerPoint4:void 0));throw new Error("Corner index is out of range")}getCornerNormalOfCells(e){if(e.index>=0&&e.index<=3)return e.cells.map((t=>0===e.index?t.cornerNormal1:1===e.index?t.cornerNormal2:2===e.index?t.cornerNormal3:3===e.index?t.cornerNormal4:void 0));throw new Error("Corner index is out of range")}getCornerNormalsOfCells(e){return e.cells.map((e=>[e.cornerNormal1,e.cornerNormal2,e.cornerNormal3,e.cornerNormal4].filter((e=>void 0!==e))))}getCompoundShapesOfCells(e){return e.cells.map((e=>e.shapes.compound))}getFaceShapesOfCells(e){if(e.index>=0&&e.index<=3)return e.cells.map((t=>0===e.index?t.shapes.face1:1===e.index?t.shapes.face2:2===e.index?t.shapes.face3:3===e.index?t.shapes.face4:void 0));throw new Error("Face index is out of range")}getWireShapesOfCells(e){if(e.index>=0&&e.index<=3)return e.cells.map((t=>0===e.index?t.shapes.wire1:1===e.index?t.shapes.wire2:2===e.index?t.shapes.wire3:3===e.index?t.shapes.wire4:void 0));throw new Error("Wire index is out of range")}getStartPolylineWireU(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.startPolylineWireU;throw new Error("Face index is out of bounds")}getEndPolylineWireU(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.endPolylineWireU;throw new Error("Face index is out of bounds")}getStartPolylineWireV(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.startPolylineWireV;throw new Error("Face index is out of bounds")}getEndPolylineWireV(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.endPolylineWireV;throw new Error("Face index is out of bounds")}getPolylineWiresUCompound(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.compoundPolylineWiresU;throw new Error("Face index is out of bounds")}getPolylineWiresVCompound(e){if(e.faceIndex>=0&&e.faceIndex<e.model.faceParts.length)return e.model.faceParts[e.faceIndex].shapes.compoundPolylineWiresV;throw new Error("Face index is out of bounds")}}class Df{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.pyramidSimple=new Tf(this.occWorkerManager,this.context,this.draw,this.occt)}}class _f{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.facePatterns=new Df(this.occWorkerManager,this.context,this.draw,this.occt)}}class Of{constructor(e,t,r,i){this.occWorkerManager=e,this.context=t,this.draw=r,this.occt=i,this.text3d=new kf(this.occWorkerManager,this.context,this.draw,this.occt),this.patterns=new _f(this.occWorkerManager,this.context,this.draw,this.occt)}}!function(e){e.wingtipVilla="wingtipVilla",e.chirpyChalet="chirpyChalet",e.serenitySwirl="serenitySwirl",e.arabicArchway="arabicArchway",e.zenHideout="zenHideout",e.dropletsPhoneHolder="dropletsPhoneHolder",e.calmCup="calmCup",e.dragonCup="dragonCup",e.spicyBox="spicyBox",e.phoneNest="phoneNest",e.elegantTable="elegantTable",e.goodCoffeeTable="goodCoffeeTable",e.snakeChair="snakeChair",e.snakeTable="snakeTable",e.eternalLove="eternalLove",e.text3d="text3d",e.patternsFacePatternPyramidSimple="patternsFacePatternPyramidSimple"}(Pf||(Pf={}));class Ef{constructor(e,t,r){void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.paths=r)}}class Wf{constructor(e,t,r){void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.chars=r)}}class Af{}class If{}class Bf{}class Rf{constructor(){this.type="text",this.name="text"}}class Lf{}class Ff extends Ri{constructor(e,t,r,i,o,n){super(e,t,r,n),this.drawHelper=e,this.node=t,this.tag=r,this.things=i,this.advanced=o,this.context=n}drawAnyAsync(e){const t=e.entity;if(!t||!t.type||"parametric-model"!==t.type)return super.drawAnyAsync(e);{const r=e.options;switch(t.name){case Pf.wingtipVilla:return this.things.kidsCorner.birdhouses.wingtipVilla.drawModel(t);case Pf.chirpyChalet:return this.things.kidsCorner.birdhouses.chirpyChalet.drawModel(t);case Pf.serenitySwirl:return this.things.threeDPrinting.vases.serenitySwirl.drawModel(t);case Pf.arabicArchway:return this.things.threeDPrinting.vases.arabicArchway.drawModel(t);case Pf.eternalLove:return this.things.threeDPrinting.medals.eternalLove.drawModel(t);case Pf.zenHideout:return this.things.architecture.houses.zenHideout.drawModel(t);case Pf.calmCup:return this.things.threeDPrinting.cups.calmCup.drawModel(t);case Pf.dragonCup:return this.things.threeDPrinting.cups.dragonCup.drawModel(t);case Pf.phoneNest:return this.things.threeDPrinting.desktop.phoneNest.drawModel(t,r);case Pf.elegantTable:return this.things.furniture.tables.elegantTable.drawModel(t,r);case Pf.goodCoffeeTable:return this.things.furniture.tables.goodCoffeeTable.drawModel(t,r);case Pf.snakeTable:return this.things.furniture.tables.snakeTable.drawModel(t,r);case Pf.dropletsPhoneHolder:return this.things.laserCutting.gadgets.dropletsPhoneHolder.drawModel(t,r);case Pf.snakeChair:return this.things.furniture.chairs.snakeChair.drawModel(t,r);case Pf.text3d:return this.advanced.text3d.drawModel(t);case Pf.patternsFacePatternPyramidSimple:return this.advanced.patterns.facePatterns.pyramidSimple.drawModel(t);default:throw new Error(`Unknown parametric model "${t.name}"`)}}}drawGridMesh(e){return super.drawGridMesh(e)}optionsSimple(e){return super.optionsSimple(e)}optionsOcctShape(e){return super.optionsOcctShape(e)}optionsBabylonNode(e){return super.optionsBabylonNode(e)}}class Uf extends fs{constructor(){super(),this.things=new qh(this.occtWorkerManager,this.context,this.draw,this.occt,this.jscad),this.advanced=new Of(this.occtWorkerManager,this.context,this.draw,this.occt);const e=new Ui(this.context,this.jscad.text,this.vector,this.jscadWorkerManager,this.manifoldWorkerManager,this.occtWorkerManager);this.draw=new Ff(e,this.babylon.node,this.tag,this.things,this.advanced,this.context)}}var zf,Nf=function(){return Nf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nf.apply(this,arguments)},Gf=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Vf=function(e,t){var r,i,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(s=0)),s;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};!function(e){e.flat="flat"}(zf||(zf={}));var Hf=function(){function e(){}return e.handleBlock=function(e,t,r){},e.inputAwaiter=function(t,r,i){return Gf(this,void 0,void 0,(function(){var o,n;return Vf(this,(function(s){return o=Object.keys(t),n=[],o.forEach((function(e){if(t[e])if(t[e].then)t[e].then((function(r){return t[e]=r,r})),n.push(t[e]);else if(t[e].length&&t[e].length>0&&"string"!=typeof t[e])for(var r=function(r){var i=t[e][r];"object"==typeof i&&null!==i&&i.then&&(i.then((function(i){return t[e][r]=i,i})),n.push(t[e][r]))},i=0;i<t[e].length;i++)r(i)})),n.length>0&&e.startedAsyncTask(r,i,"#eeeeff"),n.length>0?[2,Promise.all(n).then((function(t){return e.finishedAsyncTask(r,i),t}))]:[2,null]}))}))},e.finishedAsyncTask=function(e,t){},e.startedAsyncTask=function(e,t,r){},e.runtimeValidation=function(e,t){},e.validate=function(e,t,r){},e.handleBlockException=function(e,t){},e.errorHappened=function(e,t,r){},e.updateListInputs=function(e){Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var r=[];e[t].forEach((function(e){if(e&&e.result){var t=e.result;e.transformers&&e.transformers.length&&e.transformers.forEach((function(e){e.type===zf.flat&&(t=t.flat())})),t instanceof Array?r.push.apply(r,t):r.push(t)}})),e[t]=r}}))},e.executeBasedOnTypeAsync=function(e,t,r){return Gf(this,void 0,void 0,(function(){var i,o,n,s,a,c,h,l,u;return Vf(this,(function(d){switch(d.label){case 0:if(t)return[3,5];c=this.performActionOnAllVariationsSimplified(e,r),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(c)];case 2:return i=d.sent(),[3,4];case 3:throw o=d.sent(),new Error(o);case 4:return[3,9];case 5:if(!t)return[3,9];for(n=Object.keys(e),s=n.map((function(t){return e[t]})),a=this.normalizeListsToEqualLength(s),c=[],h=function(e){var t={};n.forEach((function(r,i){t[r]=s[i][e]})),c.push(r(t,e))},l=0;l<a;l++)h(l);d.label=6;case 6:return d.trys.push([6,8,,9]),[4,Promise.all(c)];case 7:return i=d.sent(),[3,9];case 8:throw u=d.sent(),new Error(u);case 9:return[2,i]}}))}))},e.executeBasedOnType=function(e,t,r){var i;if(t){if(t){var o=Object.keys(e),n=o.map((function(t){return e[t]})),s=this.normalizeListsToEqualLength(n);try{i=[];for(var a=function(e){var t={};o.forEach((function(r,i){t[r]=n[i][e]})),i.push(r(t))},c=0;c<s;c++)a(c)}catch(e){throw new Error(e)}}}else try{i=this.performActionOnAllVariationsSimplified(e,r)}catch(e){throw new Error(e)}return i},e.performActionOnAllVariationsSimplified=function(e,t){var r=Object.keys(e),i=[],o=function(n,s){var a,c=0;if(n===r.length)return i.push(t(s,c)),void c++;for(var h=r[n],l=0,u=e[h];l<u.length;l++){var d=u[l],p=Nf(Nf({},s),((a={})[h]=d,a));o(n+1,p)}};return o(0,e),i},e.normalizeListsToEqualLength=function(e){var t=this.getLongestListLength(e);return e.forEach((function(e){if(e.length<t)for(var r=e[e.length-1],i=t-e.length,o=0;o<i;o++)e.push(r)})),t},e.getLongestListLength=function(e){var t=0;return e.forEach((function(e){e.length>t&&(t=e.length)})),t},e.drawNodeMeshes=function(e,t){return Gf(this,void 0,void 0,(function(){var r,i=this;return Vf(this,(function(o){switch(o.label){case 0:return r=e.map((function(e){return Gf(i,void 0,void 0,(function(){var r,i,o;return Vf(this,(function(n){switch(n.label){case 0:return r=e.result,i=[],r instanceof Array&&r.length>0&&r[0]&&r[0].hash?r.forEach((function(e){var r=t.draw.drawAnyAsync({entity:e,options:void 0});i.push(r)})):(o=t.draw.drawAnyAsync({entity:r,options:void 0}),i.push(o)),[4,Promise.all(i)];case 1:return[2,n.sent()]}}))}))})),[4,Promise.all(r)];case 1:return o.sent(),[2]}}))}))},e}(),jf=function(){function e(e){this.context=e}return e.prototype.handleTags=function(e,t,r,i){var o=this;!t&&this.context.tagBag.length>0&&this.context.tagBag.find((function(e){return e.needsUpdate}))&&(t=!0),t&&this.context.tagBag.length>0&&this.context.tagBag.forEach((function(t){var n=document.querySelector("#"+t.id),s=new q.Vector3(t.position[0],t.position[1],t.position[2]);n.textContent=t.text;var a=r.getRenderWidth()/2,c=r.getRenderHeight()/2,h=q.Vector3.Project(s,q.Matrix.IdentityReadOnly,i.getTransformMatrix(),e.viewport.toGlobal(a,c)),l=q.Vector3.Distance(e.position,s),u=t.adaptDepth?Math.ceil(o.context.remap(l,0,100,t.size,3)):t.size;h.x>0&&h.x<a&&h.y>0&&h.y<c&&h.z>0&&h.z<1&&u>3?n.style="".concat("position: absolute; transform: translate(-50%, -50%); font-weight: 300;"," font-size: ").concat(u,"px; color: ").concat(t.colour,"; left: ").concat(h.x,"px; top: ").concat(h.y,"px; display: inline;"):n.style="display: none;"}))},e.prototype.removeTagsIfNeeded=function(){this.tagsExist()&&this.context.tagBag.forEach((function(e){var t=document.getElementById(e.id);t.parentNode.removeChild(t)})),this.context.tagBag=[]},e.prototype.tagsExist=function(){return this.context.tagBag.length>0},e}();function qf(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Zf=qf((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Yf(e){return"function"==typeof e}function Xf(e){return function(t){if(function(e){return Yf(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Kf=qf((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function $f(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Qf=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var s=ye(n),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else n.remove(this);var c=this.initialTeardown;if(Yf(c))try{c()}catch(e){o=e instanceof Kf?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=ye(h),u=l.next();!u.done;u=l.next()){var d=u.value;try{ev(d)}catch(e){o=null!=o?o:[],e instanceof Kf?o=we(we([],xe(o)),xe(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}if(o)throw new Kf(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)ev(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&$f(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&$f(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}();function Jf(e){return e instanceof Qf||e&&"closed"in e&&Yf(e.remove)&&Yf(e.add)&&Yf(e.unsubscribe)}function ev(e){Yf(e)?e():e.unsubscribe()}Qf.EMPTY;var tv=null,rv=null,iv=void 0,ov=!1,nv=!1,sv={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=sv.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,we([e,t],xe(r))):setTimeout.apply(void 0,we([e,t],xe(r)))},clearTimeout:function(e){var t=sv.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function av(){}var cv=hv("C",void 0,void 0);function hv(e,t,r){return{kind:e,value:t,error:r}}var lv=null,uv=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Jf(t)&&t.add(r)):r.destination=bv,r}return be(t,e),t.create=function(e,t,r){return new vv(e,t,r)},t.prototype.next=function(e){this.isStopped?mv(function(e){return hv("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?mv(hv("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?mv(cv,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Qf),dv=Function.prototype.bind;function pv(e,t){return dv.call(e,t)}var fv=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){gv(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){gv(e)}else gv(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){gv(e)}},e}(),vv=function(e){function t(t,r,i){var o,n,s=e.call(this)||this;return Yf(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:s&&nv?((n=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&pv(t.next,n),error:t.error&&pv(t.error,n),complete:t.complete&&pv(t.complete,n)}):o=t,s.destination=new fv(o),s}return be(t,e),t}(uv);function gv(e){var t;ov?(t=e,ov&&lv&&(lv.errorThrown=!0,lv.error=t)):function(e){sv.setTimeout((function(){if(!tv)throw e;tv(e)}))}(e)}function mv(e,t){var r=rv;r&&sv.setTimeout((function(){return r(e,t)}))}var bv={closed:!0,next:av,error:function(e){throw e},complete:av};function yv(e,t,r,i,o){return new xv(e,t,r,i,o)}var xv=function(e){function t(t,r,i,o,n,s){var a=e.call(this,t)||this;return a.onFinalize=n,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return be(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(uv),wv="function"==typeof Symbol&&Symbol.observable||"@@observable";function Sv(e){return e}var kv=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,o=this,n=(i=e)&&i instanceof uv||function(e){return e&&Yf(e.next)&&Yf(e.error)&&Yf(e.complete)}(i)&&Jf(i)?e:new vv(e,t,r);return function(e){if(ov){var t=!lv;if(t&&(lv={errorThrown:!1,error:null}),e(),t){var r=lv,i=r.errorThrown,o=r.error;if(lv=null,i)throw o}}else e()}((function(){var e=o,t=e.operator,r=e.source;n.add(t?t.call(n,r):r?o._subscribe(n):o._trySubscribe(n))})),n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Cv(t))((function(t,i){var o=new vv({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[wv]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?Sv:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=Cv(e))((function(e,r){var i;t.subscribe((function(e){return i=e}),(function(e){return r(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function Cv(e){var t;return null!==(t=null!=e?e:iv)&&void 0!==t?t:Promise}var Pv=new kv((function(e){return e.complete()}));function Mv(){return new Zf}function Tv(e,t){var r=arguments.length>=2;return function(i){return i.pipe(e?function(e,t){return Xf((function(t,r){var i=0;t.subscribe(yv(r,(function(t){return e.call(undefined,t,i++)&&r.next(t)})))}))}((function(t,r){return e(t,r,i)})):Sv,1<=0?function(){return Pv}:Xf((function(e,t){var r=0;e.subscribe(yv(t,(function(e){++r<=1&&(t.next(e),1<=r&&t.complete())})))})),r?function(e){return Xf((function(t,r){var i=!1;t.subscribe(yv(r,(function(e){i=!0,r.next(e)}),(function(){i||r.next(e),r.complete()})))}))}(t):(void 0===(o=function(){return new Zf})&&(o=Mv),Xf((function(e,t){var r=!1;e.subscribe(yv(t,(function(e){r=!0,t.next(e)}),(function(){return r?t.complete():t.error(o())})))}))));var o}}var Dv,_v,Ov=function(){return Ov=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ov.apply(this,arguments)},Ev=function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function s(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},Wv=function(e,t){var r,i,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(s=0)),s;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};!function(e){e.rete="rete",e.blockly="blockly",e.typescript="typescript"}(Dv||(Dv={})),function(e){e.Aboreto="Aboreto",e.Bungee="Bungee",e.IndieFlower="IndieFlower",e.Lugrasimo="Lugrasimo",e.Orbitron="Orbitron",e.Roboto="Roboto",e.RobotoSlab="RobotoSlab",e.Silkscreen="Silkscreen",e.Tektur="Tektur",e.Workbench="Workbench"}(_v||(_v={}));var Av=function(){this.canvasZoneClass="canvasZone",this.enableJSCAD=!0,this.enableOCCT=!0,this.enableManifold=!0,this.enablePhysics=!0,this.enableKeyEventListeners=!0,this.cameraPosition=[0,10,-20],this.cameraTarget=[0,0,0],this.backgroundColor="#ffffff",this.loadFonts=Object.keys(_v)},Iv={Things:I,Advanced:z,Inputs:j,Models:H};function Bv(){return new Rv}var Rv=function(){function e(){var e=this;this.bitbybit=new Uf,this.tagService=new jf(this.bitbybit.context),this.tagsNeedUpdate=!1,this.timePassedFromPreviousIteration=0,this.onResize=function(){var t=e.bitbybit.context.engine;t&&t.resize()},this.renderLoopFunction=function(){var t;null===(t=e.bitbybit.context.scene)||void 0===t||t.render(!0,!1)},this.registerBeforeRender=function(){var t=Date.now(),r=t-e.timePassedFromPreviousIteration;e.timePassedFromPreviousIteration=t,e.bitbybit.context.renderLoopBag.forEach((function(e){return e(r)}))},this.initWithExternalScene=function(t){new q.TransformNode("root",t);var r=t.activeCamera;return t.metadata={shadowGenerators:[]},e.bitbybit.context.scene=t,e.bitbybit.context.engine=t.getEngine(),e.tagsNeedUpdate=!1,r.onProjectionMatrixChangedObservable.add((function(){e.tagsNeedUpdate=!0})),r.onViewMatrixChangedObservable.add((function(){e.tagsNeedUpdate=!0})),t.registerBeforeRender(e.registerBeforeRender),t.registerAfterRender((function(){e.tagService.handleTags(r,e.tagsNeedUpdate,e.bitbybit.context.engine,t),e.tagsNeedUpdate=!1})),{scene:t,camera:r}},this.initScene=function(t,r){var i=new q.Scene(t);i.clearColor=q.Color4.FromHexString(e.options.backgroundColor),new q.TransformNode("root",i);var o=new q.ArcRotateCamera("Camera",0,10,10,new q.Vector3(0,0,0),i),n=e.options.cameraPosition;o.setPosition(new q.Vector3(n[0],n[1],n[2]));var s=e.options.cameraTarget;o.setTarget(new q.Vector3(s[0],s[1],s[2])),o.attachControl(r,!0),o.lowerRadiusLimit=0,o.minZ=0;var a=new q.HemisphericLight("HemiLight",new q.Vector3(0,1,0),i);return a.intensityMode=q.Light.INTENSITYMODE_ILLUMINANCE,a.intensity=1,i.ambientColor=q.Color3.FromHexString(e.options.backgroundColor),i.metadata={shadowGenerators:[]},e.bitbybit.context.scene=i,e.bitbybit.context.engine=t,e.tagsNeedUpdate=!1,o.onProjectionMatrixChangedObservable.add((function(){e.tagsNeedUpdate=!0})),o.onViewMatrixChangedObservable.add((function(){e.tagsNeedUpdate=!0})),i.registerBeforeRender(e.registerBeforeRender),i.registerAfterRender((function(){e.tagService.handleTags(o,e.tagsNeedUpdate,e.bitbybit.context.engine,i),e.tagsNeedUpdate=!1})),{scene:i,camera:o}}}return e.prototype.run=function(e){return Ev(this,void 0,void 0,(function(){var t,r,i,o=this;return Wv(this,(function(n){switch(n.label){case 0:return this.options=Ov(Ov({},new Av),e),r=new Promise((function(e,t){if(o.options.enablePhysics){var r=document.createElement("script");r.onload=function(){return Ev(this,void 0,void 0,(function(){var t;return Wv(this,(function(r){switch(r.label){case 0:return[4,window.HavokPhysics()];case 1:return t=r.sent(),e(t),[2]}}))}))},r.onerror=function(){t("Something went wrong when loading Havok physics engine.")},r.src="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/havok/HavokPhysics_umd.js",document.getElementsByTagName("head")[0].appendChild(r)}else e(void 0)})),i=this,[4,r];case 1:return i.havok=n.sent(),[2,new Promise((function(e,r){function i(e){var t='importScripts( "'.concat(e,'" );');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}try{if(o.options.enableOCCT){var n=i("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/workers/bitbybit-occt-webworker.js"),s=new Worker(n);s.postMessage({type:"initialise",loadFonts:o.options.loadFonts}),URL.revokeObjectURL(n),o.bitbybit.occtWorkerManager.setOccWorker(s)}if(o.options.enableJSCAD){var a=i("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/workers/bitbybit-jscad-webworker.js"),c=new Worker(a);URL.revokeObjectURL(a),o.bitbybit.jscadWorkerManager.setJscadWorker(c)}if(o.options.enableManifold){var h=i("https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.5/workers/bitbybit-manifold-webworker.js"),l=new Worker(h);URL.revokeObjectURL(h),o.bitbybit.manifoldWorkerManager.setManifoldWorker(l)}if(o.options.enablePhysics&&void 0!==o.havok){var u=new q.HavokPlugin(!0,o.havok);o.bitbybit.context.havokPlugin=u}var d;if(o.options.externalBabylonJSSettings){var p=o.initWithExternalScene(o.options.externalBabylonJSSettings.scene);d=p.scene,t=p.scene.getEngine()}else{var f=document.getElementById(o.options.canvasId);f.addEventListener("wheel",(function(e){return e.preventDefault()})),(t=new q.Engine(f,!0)).setHardwareScalingLevel(.5),p=o.initScene(t,f),d=p.scene}o.bitbybit.init(d),o.bitbybit.context.canvasZoneClass=o.options.canvasZoneClass,o.bitbybit.context.promptPrintSave=function(e){return console.log("Print save dialog can not be opened in the runner.")},o.bitbybit.context.promptPrint=function(e){return console.log("Print dialog can not be opened in the runner.")},window.addEventListener("resize",(function(){return o.onResize()}),!1),o.options.enableKeyEventListeners&&(document.addEventListener("keypress",(function(e){o.bitbybit.context.keyPressBag.forEach((function(t){t.key===e.key&&t.fn()}))})),document.addEventListener("keydown",(function(e){o.bitbybit.context.currentlyPressedKeys.includes(e.key)||o.bitbybit.context.currentlyPressedKeys.push(e.key),o.bitbybit.context.keyDownBag.forEach((function(t){t.key===e.key&&t.fn()}))})),document.addEventListener("keyup",(function(e){o.bitbybit.context.currentlyPressedKeys.includes(e.key)&&(o.bitbybit.context.currentlyPressedKeys=o.bitbybit.context.currentlyPressedKeys.filter((function(t){return e.key!==t}))),o.bitbybit.context.keyUpBag.forEach((function(t){t.key===e.key&&t.fn()}))})));var v=o.bitbybit.occtWorkerManager.occWorkerState$,g=o.bitbybit.jscadWorkerManager.jscadWorkerState$,m=o.bitbybit.manifoldWorkerManager.manifoldWorkerState$,b=0,y=0,x=function(){b===y&&e({bitbybit:o.bitbybit,Bit:Iv,scene:d,engine:t,BABYLON:q,GUI:Z})};o.options.enableOCCT&&(y++,v.pipe(Tv()).subscribe((function(e){e.state===Je.initialised&&(b++,x())}))),o.options.enableJSCAD&&(y++,g.pipe(Tv()).subscribe((function(e){e.state===Xo.initialised&&(b++,x())}))),o.options.enableManifold&&(y++,m.pipe(Tv()).subscribe((function(e){e.state===cs.initialised&&(b++,x())}))),0===y&&e({bitbybit:o.bitbybit,Bit:Iv,scene:d,engine:t,BABYLON:q,GUI:Z}),t.runRenderLoop(o.renderLoopFunction)}catch(e){r(e)}}))]}}))}))},e.prototype.executeScript=function(e,t){return Ev(this,void 0,void 0,(function(){var r,i,o,n,s;return Wv(this,(function(a){return r=JSON.parse(e),i=function(e){throw new Error(e)},o='\n            "use strict";\n    \n            // make all global things undefined\n    \n            const bitbybitRunnerStart = async () => {\n    \n                const bitbybitRunnerInputs = '.concat(t&&Object.keys(t).length>0?JSON.stringify(t):"{}",';\n                let bitbybitRunnerResult = {};\n                const runContext = "runner";\n                const mockBitbybitRunnerInputs = (inputs) => {\n                }\n                const getBitbybitRunnerInputs = () => {\n                    return bitbybitRunnerInputs;\n                }\n                const setBitbybitRunnerResult = (result) => {\n                    bitbybitRunnerResult = result;\n                }\n                const setBitbybitRunnerResultValue = (prop, value) => {\n                    bitbybitRunnerResult[prop] = value;\n                }\n    \n                const bitbybit = this.bitbybit;\n                const Bit = this.Bit;\n                Bit.mockBitbybitRunnerInputs = mockBitbybitRunnerInputs;\n                Bit.getBitbybitRunnerInputs = getBitbybitRunnerInputs;\n                Bit.setBitbybitRunnerResult = setBitbybitRunnerResult;\n                Bit.setBitbybitRunnerResultValue = setBitbybitRunnerResultValue;\n    \n                const BitByBit = this.BitByBit;\n                const errorHandle = this.errorHandle;\n                const BABYLON = this.BABYLON;\n                BABYLON.GUI = this.GUI;\n                const resolve = this.resolve;\n    \n                await ').concat(r.script,"\n                if(bitbybitRunnerResult !== undefined){\n                    resolve(bitbybitRunnerResult);\n                } else {\n                    resolve(undefined);\n                }\n            }\n            \n            bitbybitRunnerStart();\n        "),n={HS:Hf,BitByBitContextHelperService:this.bitbybit.context},s={bitbybit:this.bitbybit,BABYLON:q,GUI:Z,Bit:Iv,BitByBit:n,errorHandle:i},[2,new Promise((function(e){return s.resolve=e,new Function(o).apply(s)}))]}))}))},e.prototype.resetRunnerContext=function(e){if(void 0===e&&(e=!0),e&&this.bitbybit.context.scene.dispose(),this.options.enablePhysics){var t=new q.HavokPlugin(!0,this.havok);this.bitbybit.context.havokPlugin=t}var r=document.getElementById(this.options.canvasId),i=this.bitbybit.context.engine;this.initScene(i,r),this.tagService.removeTagsIfNeeded(),this.bitbybit.context.intervalBag.forEach((function(e){return clearInterval(e)})),this.bitbybit.context.timeoutBag.forEach((function(e){return clearTimeout(e)})),this.bitbybit.context.intervalBag.length=0,this.bitbybit.context.timeoutBag.length=0,this.bitbybit.context.renderLoopBag.length=0,this.bitbybit.context.keyPressBag.length=0,this.bitbybit.context.keyDownBag.length=0,this.bitbybit.context.keyUpBag.length=0},e.prototype.cleanOCCTCache=function(){return Ev(this,void 0,void 0,(function(){return Wv(this,(function(e){return[2,this.bitbybit.occtWorkerManager.cleanAllCache()]}))}))},e.prototype.cleanJSCADCache=function(){return Ev(this,void 0,void 0,(function(){return Wv(this,(function(e){return[2,this.bitbybit.jscadWorkerManager.cleanAllCache()]}))}))},e.prototype.cleanManifoldCache=function(){return Ev(this,void 0,void 0,(function(){return Wv(this,(function(e){return[2,this.bitbybit.manifoldWorkerManager.cleanAllCache()]}))}))},e}()})(),c})()));