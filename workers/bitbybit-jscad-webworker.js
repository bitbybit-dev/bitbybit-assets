(()=>{"use strict";var t={903:(t,e,n)=>{let o;function r(){return o}n.r(e),n.d(e,{default:()=>r}),function t(e,n,o){function r(i,a){if(!n[i]){if(!e[i]){if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};e[i][0].call(l.exports,(function(t){return r(e[i][1][t]||t)}),l,l.exports,t,e,n,o)}return n[i].exports}for(var s=void 0,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(t,e,n){o=t("./node_modules/@jscad/modeling/src/index.js"),o.IOUTILS=t("./node_modules/@jscad/io-utils/index.js"),o.STLSERIALIZER=t("./node_modules/@jscad/stl-serializer/index.js"),o.DXFSERIALIZER=t("./node_modules/@jscad/dxf-serializer/index.js"),o.THREEMFSERIALIZER=t("./node_modules/@jscad/3mf-serializer/src/index.js")},{"./node_modules/@jscad/3mf-serializer/src/index.js":2,"./node_modules/@jscad/dxf-serializer/index.js":13,"./node_modules/@jscad/io-utils/index.js":418,"./node_modules/@jscad/modeling/src/index.js":511,"./node_modules/@jscad/stl-serializer/index.js":826}],2:[function(t,e,n){const o=t("fflate").zipSync,r=t("fflate").strToU8,s=t("onml/lib/stringify"),{colors:i,geometries:a,modifiers:c}=t("@jscad/modeling"),{flatten:l,toArray:u}=t("@jscad/array-utils"),h=(t,e)=>{let n=["basematerials",{id:"0"}];const o=[];return t.forEach(((t,n)=>{let r=i.rgbToHex(e.defaultcolor).toUpperCase();t.color&&(r=i.rgbToHex(t.color).toUpperCase()),o.push(["base",{name:`mat${n}`,displaycolor:r}])})),n=n.concat(o),n},p=(t,e)=>{const n=[];return t.forEach(((t,o)=>{a.geom3.isA(t)&&a.geom3.toPolygons(t).length>0&&(e.id=o,n.push(m(t,e)))})),n},m=(t,e)=>{const n=t.name?t.name:`Part ${e.id}`;return["object",{id:`${e.id+1}`,type:"model",pid:"0",pindex:`${e.id}`,name:n},d(t,e)]},d=(t,e)=>["mesh",{},f(t,e),v(t,e)],f=(t,e)=>{const n=[];return a.geom3.toPolygons(t).forEach((t=>{for(let o=0;o<t.vertices.length;o++)n.push(g(t.vertices[o],e))})),["vertices",{}].concat(n)},g=(t,e)=>["vertex",{x:t[0],y:t[1],z:t[2]}],v=(t,e)=>{let n=0;const o=a.geom3.toPolygons(t);let r=["triangles",{}];return o.forEach((t=>{if(t.vertices.length<3)return;const e=y(t,n);r=r.concat(e),n+=t.vertices.length})),r},y=(t,e)=>{const n=[];for(let o=0;o<t.vertices.length-2;o++){const t=["triangle",{v1:e,v2:e+o+1,v3:e+o+2}];n.push(t)}return n};e.exports={serialize:(t,...e)=>{t=Object.assign({},{unit:"millimeter",metadata:!0,defaultcolor:[1,160/255,0,1],compress:!0},t);let n=(e=l(e)).filter((t=>a.geom3.isA(t)));if(0===n.length)throw new Error("only 3D geometries can be serialized to 3MF");e.length!==n.length&&console.warn("some objects could not be serialized to 3MF"),e=u(c.generalize({snap:!0,triangulate:!0},n));const i=["model",{unit:t.unit,"xml:lang":"und"},["metadata",{name:"Application"},"JSCAD"]];t.metadata&&i.push(["metadata",{name:"CreationDate"},(new Date).toISOString()]),i.push(((t,e)=>{let n=["resources",{},h(t,e)];return n=n.concat(p(t,e)),n})(e,t)),i.push(((t,e)=>{let n=["build",{}];const o=[];return t.forEach(((t,e)=>{o.push(["item",{objectid:`${e+1}`}])})),n=n.concat(o),n})(e));const m=`<?xml version="1.0" encoding="UTF-8"?>\n${s(i,2)}`;if(t.compress){const t={"3D":{"3dmodel.model":r(m)},_rels:{".rels":r('<?xml version="1.0" encoding="UTF-8" ?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  <Relationship Target="/3D/3dmodel.model" Id="rel0" Type="http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel">\n  </Relationship>\n</Relationships>')},"[Content_Types].xml":r('<?xml version="1.0" encoding="UTF-8" ?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml">\n  </Default>\n  <Default Extension="model" ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml">\n  </Default>\n</Types>')};return[o(t,{comment:"created by JSCAD"}).buffer]}return[m]},mimeType:"model/3mf",fileExtension:"3mf"}},{"@jscad/array-utils":6,"@jscad/modeling":511,fflate:827,"onml/lib/stringify":829}],3:[function(t,e,n){const o=t=>t.reduce(((t,e)=>Array.isArray(e)?t.concat(o(e)):t.concat(e)),[]);e.exports=o},{}],4:[function(t,e,n){e.exports=(t,e)=>t-e},{}],5:[function(t,e,n){e.exports=t=>{if(Array.isArray(t)&&0!==t.length)return t[0]}},{}],6:[function(t,e,n){e.exports={flatten:t("./flatten"),fnNumberSort:t("./fnNumberSort"),head:t("./head"),insertSorted:t("./insertSorted"),nth:t("./nth"),padToLength:t("./padToLength"),toArray:t("./toArray")}},{"./flatten":3,"./fnNumberSort":4,"./head":5,"./insertSorted":7,"./nth":8,"./padToLength":9,"./toArray":10}],7:[function(t,e,n){e.exports=(t,e,n)=>{let o=0,r=t.length;for(;r>o;){const s=Math.floor((o+r)/2);n(e,t[s])>0?o=s+1:r=s}return t.splice(o,0,e),t}},{}],8:[function(t,e,n){e.exports=(t,e)=>{if(Array.isArray(t)&&!(t.length<e))return t[e]}},{}],9:[function(t,e,n){e.exports=(t,e,n)=>{for(t=t.slice();t.length<n;)t.push(e);return t}},{}],10:[function(t,e,n){e.exports=t=>Array.isArray(t)?t:null==t?[]:[t]},{}],11:[function(t,e,n){e.exports={dxfHeaders:function(){return"  0\nSECTION\n  2\nHEADER\n  9\n$ACADVER\n  1\nAC1027\n  9\n$ACADMAINTVER\n 70\n8\n  9\n$DWGCODEPAGE\n  3\nANSI_1252\n  9\n$LASTSAVEDBY\n  1\nunknown\n  9\n$REQUIREDVERSIONS\n160\n0\n  9\n$INSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$EXTMIN\n 10\n1e+20\n 20\n1e+20\n 30\n1e+20\n  9\n$EXTMAX\n 10\n-1e+20\n 20\n-1e+20\n 30\n-1e+20\n  9\n$LIMMIN\n 10\n0.0\n 20\n0.0\n  9\n$LIMMAX\n 10\n12.0\n 20\n9.0\n  9\n$ORTHOMODE\n 70\n0\n  9\n$REGENMODE\n 70\n1\n  9\n$FILLMODE\n 70\n1\n  9\n$QTEXTMODE\n 70\n0\n  9\n$MIRRTEXT\n 70\n0\n  9\n$LTSCALE\n 40\n1.0\n  9\n$ATTMODE\n 70\n1\n  9\n$TEXTSIZE\n 40\n0.2\n  9\n$TRACEWID\n 40\n0.05\n  9\n$TEXTSTYLE\n  7\nNotes\n  9\n$CLAYER\n  8\n0\n  9\n$CELTYPE\n  6\nByLayer\n  9\n$CECOLOR\n 62\n256\n  9\n$CELTSCALE\n 40\n1.0\n  9\n$DISPSILH\n 70\n0\n  9\n$DIMSCALE\n 40\n1.0\n  9\n$DIMASZ\n 40\n3.0\n  9\n$DIMEXO\n 40\n1.5\n  9\n$DIMDLI\n 40\n6.0\n  9\n$DIMRND\n 40\n0.0\n  9\n$DIMDLE\n 40\n0.0\n  9\n$DIMEXE\n 40\n3.0\n  9\n$DIMTP\n 40\n0.0\n  9\n$DIMTM\n 40\n0.0\n  9\n$DIMTXT\n 40\n3.0\n  9\n$DIMCEN\n 40\n3.0\n  9\n$DIMTSZ\n 40\n0.0\n  9\n$DIMTOL\n 70\n0\n  9\n$DIMLIM\n 70\n0\n  9\n$DIMTIH\n 70\n0\n  9\n$DIMTOH\n 70\n0\n  9\n$DIMSE1\n 70\n0\n  9\n$DIMSE2\n 70\n0\n  9\n$DIMTAD\n 70\n1\n  9\n$DIMZIN\n 70\n3\n  9\n$DIMBLK\n  1\n\n  9\n$DIMASO\n 70\n1\n  9\n$DIMSHO\n 70\n1\n  9\n$DIMPOST\n  1\n\n  9\n$DIMAPOST\n  1\n\n  9\n$DIMALT\n 70\n0\n  9\n$DIMALTD\n 70\n2\n  9\n$DIMALTF\n 40\n25.4\n  9\n$DIMLFAC\n 40\n1.0\n  9\n$DIMTOFL\n 70\n0\n  9\n$DIMTVP\n 40\n0.0\n  9\n$DIMTIX\n 70\n0\n  9\n$DIMSOXD\n 70\n0\n  9\n$DIMSAH\n 70\n0\n  9\n$DIMBLK1\n  1\n\n  9\n$DIMBLK2\n  1\n\n  9\n$DIMSTYLE\n  2\nCivil-Metric\n  9\n$DIMCLRD\n 70\n0\n  9\n$DIMCLRE\n 70\n0\n  9\n$DIMCLRT\n 70\n0\n  9\n$DIMTFAC\n 40\n1.0\n  9\n$DIMGAP\n 40\n2.0\n  9\n$DIMJUST\n 70\n0\n  9\n$DIMSD1\n 70\n0\n  9\n$DIMSD2\n 70\n0\n  9\n$DIMTOLJ\n 70\n1\n  9\n$DIMTZIN\n 70\n0\n  9\n$DIMALTZ\n 70\n0\n  9\n$DIMALTTZ\n 70\n0\n  9\n$DIMUPT\n 70\n0\n  9\n$DIMDEC\n 70\n2\n  9\n$DIMTDEC\n 70\n2\n  9\n$DIMALTU\n 70\n2\n  9\n$DIMALTTD\n 70\n2\n  9\n$DIMTXSTY\n  7\nStandard\n  9\n$DIMAUNIT\n 70\n0\n  9\n$DIMADEC\n 70\n2\n  9\n$DIMALTRND\n 40\n0.0\n  9\n$DIMAZIN\n 70\n2\n  9\n$DIMDSEP\n 70\n46\n  9\n$DIMATFIT\n 70\n3\n  9\n$DIMFRAC\n 70\n1\n  9\n$DIMLDRBLK\n  1\n\n  9\n$DIMLUNIT\n 70\n2\n  9\n$DIMLWD\n 70\n-2\n  9\n$DIMLWE\n 70\n-2\n  9\n$DIMTMOVE\n 70\n0\n  9\n$DIMFXL\n 40\n1.0\n  9\n$DIMFXLON\n 70\n0\n  9\n$DIMJOGANG\n 40\n0.785398163397\n  9\n$DIMTFILL\n 70\n0\n  9\n$DIMTFILLCLR\n 70\n0\n  9\n$DIMARCSYM\n 70\n0\n  9\n$DIMLTYPE\n  6\n\n  9\n$DIMLTEX1\n  6\n\n  9\n$DIMLTEX2\n  6\n\n  9\n$DIMTXTDIRECTION\n 70\n0\n  9\n$LUNITS\n 70\n2\n  9\n$LUPREC\n 70\n4\n  9\n$SKETCHINC\n 40\n0.1\n  9\n$FILLETRAD\n 40\n0.0\n  9\n$AUNITS\n 70\n4\n  9\n$AUPREC\n 70\n5\n  9\n$MENU\n  1\n.\n  9\n$ELEVATION\n 40\n0.0\n  9\n$PELEVATION\n 40\n0.0\n  9\n$THICKNESS\n 40\n0.0\n  9\n$LIMCHECK\n 70\n0\n  9\n$CHAMFERA\n 40\n0.0\n  9\n$CHAMFERB\n 40\n0.0\n  9\n$CHAMFERC\n 40\n0.0\n  9\n$CHAMFERD\n 40\n0.0\n  9\n$SKPOLY\n 70\n0\n  9\n$TDCREATE\n 40\n2457986.69756\n  9\n$TDUCREATE\n 40\n2455631.2632\n  9\n$TDUPDATE\n 40\n2457986.69756\n  9\n$TDUUPDATE\n 40\n2456436.43179\n  9\n$TDINDWG\n 40\n0.0003490741\n  9\n$TDUSRTIMER\n 40\n0.0003487153\n  9\n$USRTIMER\n 70\n1\n  9\n$ANGBASE\n 50\n0.0\n  9\n$ANGDIR\n 70\n0\n  9\n$PDMODE\n 70\n0\n  9\n$PDSIZE\n 40\n0.0\n  9\n$PLINEWID\n 40\n0.0\n  9\n$SPLFRAME\n 70\n0\n  9\n$SPLINETYPE\n 70\n6\n  9\n$SPLINESEGS\n 70\n8\n  9\n$HANDSEED\n  5\n5C7\n  9\n$SURFTAB1\n 70\n6\n  9\n$SURFTAB2\n 70\n6\n  9\n$SURFTYPE\n 70\n6\n  9\n$SURFU\n 70\n6\n  9\n$SURFV\n 70\n6\n  9\n$UCSBASE\n  2\n\n  9\n$UCSNAME\n  2\n\n  9\n$UCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$UCSORTHOREF\n  2\n\n  9\n$UCSORTHOVIEW\n 70\n0\n  9\n$UCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSBASE\n  2\n\n  9\n$PUCSNAME\n  2\n\n  9\n$PUCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$PUCSORTHOREF\n  2\n\n  9\n$PUCSORTHOVIEW\n 70\n0\n  9\n$PUCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$USERI1\n 70\n0\n  9\n$USERI2\n 70\n0\n  9\n$USERI3\n 70\n0\n  9\n$USERI4\n 70\n0\n  9\n$USERI5\n 70\n0\n  9\n$USERR1\n 40\n0.0\n  9\n$USERR2\n 40\n0.0\n  9\n$USERR3\n 40\n0.0\n  9\n$USERR4\n 40\n0.0\n  9\n$USERR5\n 40\n0.0\n  9\n$WORLDVIEW\n 70\n1\n  9\n$SHADEDGE\n 70\n3\n  9\n$SHADEDIF\n 70\n70\n  9\n$TILEMODE\n 70\n1\n  9\n$MAXACTVP\n 70\n64\n  9\n$PINSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PLIMCHECK\n 70\n0\n  9\n$PEXTMIN\n 10\n0.628866766397\n 20\n0.799999952316\n 30\n0.0\n  9\n$PEXTMAX\n 10\n9.02886638493\n 20\n7.19999957085\n 30\n0.0\n  9\n$PLIMMIN\n 10\n-0.700541819174\n 20\n-0.228100386192\n  9\n$PLIMMAX\n 10\n10.2994579405\n 20\n8.27189937351\n  9\n$UNITMODE\n 70\n0\n  9\n$VISRETAIN\n 70\n1\n  9\n$PLINEGEN\n 70\n0\n  9\n$PSLTSCALE\n 70\n1\n  9\n$TREEDEPTH\n 70\n3020\n  9\n$CMLSTYLE\n  2\nStandard\n  9\n$CMLJUST\n 70\n0\n  9\n$CMLSCALE\n 40\n1.0\n  9\n$PROXYGRAPHICS\n 70\n1\n  9\n$MEASUREMENT\n 70\n1\n  9\n$CELWEIGHT\n370\n-1\n  9\n$ENDCAPS\n280\n0\n  9\n$JOINSTYLE\n280\n0\n  9\n$LWDISPLAY\n290\n0\n  9\n$INSUNITS\n 70\n4\n  9\n$HYPERLINKBASE\n  1\n\n  9\n$STYLESHEET\n  1\n\n  9\n$XEDIT\n290\n1\n  9\n$CEPSNTYPE\n380\n0\n  9\n$PSTYLEMODE\n290\n1\n  9\n$FINGERPRINTGUID\n  2\n{39DB1BDD-BC6C-46D3-A333-DFCC0DC4782D}\n  9\n$VERSIONGUID\n  2\n{69EEBB2D-7039-498F-9366-3F994E4A07E7}\n  9\n$EXTNAMES\n290\n1\n  9\n$PSVPSCALE\n 40\n0.0\n  9\n$OLESTARTUP\n290\n0\n  9\n$SORTENTS\n280\n127\n  9\n$INDEXCTL\n280\n0\n  9\n$HIDETEXT\n280\n1\n  9\n$XCLIPFRAME\n280\n0\n  9\n$HALOGAP\n280\n0\n  9\n$OBSCOLOR\n 70\n257\n  9\n$OBSLTYPE\n280\n0\n  9\n$INTERSECTIONDISPLAY\n280\n0\n  9\n$INTERSECTIONCOLOR\n 70\n257\n  9\n$DIMASSOC\n280\n2\n  9\n$PROJECTNAME\n  1\n\n  9\n$CAMERADISPLAY\n290\n0\n  9\n$LENSLENGTH\n 40\n50.0\n  9\n$CAMERAHEIGHT\n 40\n0.0\n  9\n$STEPSPERSEC\n 40\n2.0\n  9\n$STEPSIZE\n 40\n6.0\n  9\n$3DDWFPREC\n 40\n2.0\n  9\n$PSOLWIDTH\n 40\n0.25\n  9\n$PSOLHEIGHT\n 40\n4.0\n  9\n$LOFTANG1\n 40\n1.57079632679\n  9\n$LOFTANG2\n 40\n1.57079632679\n  9\n$LOFTMAG1\n 40\n0.0\n  9\n$LOFTMAG2\n 40\n0.0\n  9\n$LOFTPARAM\n 70\n7\n  9\n$LOFTNORMALS\n280\n1\n  9\n$LATITUDE\n 40\n37.795\n  9\n$LONGITUDE\n 40\n-122.394\n  9\n$NORTHDIRECTION\n 40\n0.0\n  9\n$TIMEZONE\n 70\n-8000\n  9\n$LIGHTGLYPHDISPLAY\n280\n1\n  9\n$TILEMODELIGHTSYNCH\n280\n1\n  9\n$CMATERIAL\n347\n96\n  9\n$SOLIDHIST\n280\n1\n  9\n$SHOWHIST\n280\n1\n  9\n$DWFFRAME\n280\n2\n  9\n$DGNFRAME\n280\n0\n  9\n$REALWORLDSCALE\n290\n1\n  9\n$INTERFERECOLOR\n 62\n1\n  9\n$INTERFEREOBJVS\n345\nA3\n  9\n$INTERFEREVPVS\n346\nA0\n  9\n$CSHADOW\n280\n0\n  9\n$SHADOWPLANELOCATION\n 40\n0.0\n  0\nENDSEC"},dxfClasses:function(){return'  0\nSECTION\n  2\nCLASSES\n  0\nCLASS\n  1\nACDBDICTIONARYWDFLT\n  2\nAcDbDictionaryWithDefault\n  3\nObjectDBX Classes\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nDICTIONARYVAR\n  2\nAcDbDictionaryVar\n  3\nObjectDBX Classes\n 90\n0\n 91\n15\n280\n0\n281\n0\n  0\nCLASS\n  1\nTABLESTYLE\n  2\nAcDbTableStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nMATERIAL\n  2\nAcDbMaterial\n  3\nObjectDBX Classes\n 90\n1153\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nVISUALSTYLE\n  2\nAcDbVisualStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n26\n280\n0\n281\n0\n  0\nCLASS\n  1\nSCALE\n  2\nAcDbScale\n  3\nObjectDBX Classes\n 90\n1153\n 91\n17\n280\n0\n281\n0\n  0\nCLASS\n  1\nMLEADERSTYLE\n  2\nAcDbMLeaderStyle\n  3\nACDB_MLEADERSTYLE_CLASS\n 90\n4095\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nCELLSTYLEMAP\n  2\nAcDbCellStyleMap\n  3\nObjectDBX Classes\n 90\n1152\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nEXACXREFPANELOBJECT\n  2\nExAcXREFPanelObject\n  3\nEXAC_ESW\n 90\n1025\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nNPOCOLLECTION\n  2\nAcDbImpNonPersistentObjectsCollection\n  3\nObjectDBX Classes\n 90\n1153\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nLAYER_INDEX\n  2\nAcDbLayerIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nSPATIAL_INDEX\n  2\nAcDbSpatialIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nIDBUFFER\n  2\nAcDbIdBuffer\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nDIMASSOC\n  2\nAcDbDimAssoc\n  3\n"AcDbDimAssoc|Product Desc:     AcDim ARX App For Dimension|Company:          Autodesk, Inc.|WEB Address:      www.autodesk.com"\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBSECTIONVIEWSTYLE\n  2\nAcDbSectionViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBDETAILVIEWSTYLE\n  2\nAcDbDetailViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF\n  2\nAcDbRasterImageDef\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nRASTERVARIABLES\n  2\nAcDbRasterVariables\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF_REACTOR\n  2\nAcDbRasterImageDefReactor\n  3\nISM\n 90\n1\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGE\n  2\nAcDbRasterImage\n  3\nISM\n 90\n2175\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nPDFDEFINITION\n  2\nAcDbPdfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nPDFUNDERLAY\n  2\nAcDbPdfReference\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDWFDEFINITION\n  2\nAcDbDwfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDWFUNDERLAY\n  2\nAcDbDwfReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDGNDEFINITION\n  2\nAcDbDgnDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDGNUNDERLAY\n  2\nAcDbDgnReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nENDSEC'},dxfTables:function(){return"  0\nSECTION\n  2\nTABLES\n  0\nTABLE\n  2\nVPORT\n  5\n8\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLTYPE\n  5\n5F\n330\n0\n100\nAcDbSymbolTable\n 70\n7\n  0\nLTYPE\n  5\n14\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByBlock\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n15\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByLayer\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n16\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nContinuous\n 70\n0\n  3\nSolid line\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n1B1\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nCENTER\n 70\n0\n  3\nCenter ____ _ ____ _ ____ _ ____ _ ____ _ ____\n 72\n65\n 73\n4\n 40\n2.0\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B2\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nDASHED\n 70\n0\n  3\nDashed __ __ __ __ __ __ __ __ __ __ __ __ __ _\n 72\n65\n 73\n2\n 40\n0.75\n 49\n0.5\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B3\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nPHANTOM\n 70\n0\n  3\nPhantom ______  __  __  ______  __  __  ______\n 72\n65\n 73\n6\n 40\n2.5\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n39E\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nHIDDEN\n 70\n0\n  3\nHidden __ __ __ __ __ __ __ __ __ __ __ __ __ __\n 72\n65\n 73\n2\n 40\n9.525\n 49\n6.35\n 74\n0\n 49\n-3.175\n 74\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLAYER\n  5\n2\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nLAYER\n  5\n10\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\n0\n 70\n0\n  6\nContinuous\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n1B4\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nView Port\n 70\n0\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n21D\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nDefpoints\n 70\n0\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nSTYLE\n  5\n3\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nSTYLE\n  5\n11\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nStandard\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\nDC\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\n178\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nNotes\n 70\n0\n 40\n3.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nENDTAB\n  0\nTABLE\n  2\nVIEW\n  5\n6\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nUCS\n  5\n7\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nAPPID\n  5\n9\n330\n0\n100\nAcDbSymbolTable\n 70\n12\n  0\nAPPID\n  5\n12\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD\n 70\n0\n  0\nAPPID\n  5\nDD\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnoPO\n 70\n0\n  0\nAPPID\n  5\nDE\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnotative\n 70\n0\n  0\nAPPID\n  5\nDF\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMJAG\n 70\n0\n  0\nAPPID\n  5\nE0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMTALN\n 70\n0\n  0\nAPPID\n  5\n107\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_MLEADERVER\n 70\n0\n  0\nAPPID\n  5\n1B5\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcAecLayerStandard\n 70\n0\n  0\nAPPID\n  5\n1BA\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_EXEMPT_FROM_CAD_STANDARDS\n 70\n0\n  0\nAPPID\n  5\n237\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMBREAK\n 70\n0\n  0\nAPPID\n  5\n28E\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_PSEXT\n 70\n0\n  0\nAPPID\n  5\n4B0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_NAV_VCDISPLAY\n 70\n0\n  0\nAPPID\n  5\n4E3\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nHATCHBACKGROUNDCOLOR\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nDIMSTYLE\n  5\nA\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n100\nAcDbDimStyleTable\n 71\n3\n340\n242\n340\n27\n340\nE1\n  0\nDIMSTYLE\n105\n27\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nStandard\n 70\n0\n 41\n3.0\n 42\n2.0\n 43\n9.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\nE1\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n3.0\n 42\n2.5\n 43\n10.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nAcadAnnotative\n1000\nAnnotativeData\n1002\n{\n1070\n1\n1070\n1\n1002\n}\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\n242\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nCivil-Metric\n 70\n0\n 41\n3.0\n 42\n1.5\n 43\n6.0\n 44\n3.0\n 73\n0\n 74\n0\n 77\n1\n 78\n3\n 79\n2\n140\n3.0\n141\n3.0\n147\n2.0\n179\n2\n271\n2\n272\n2\n276\n1\n340\n11\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n3.0\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nBLOCK_RECORD\n  5\n1\n330\n0\n100\nAcDbSymbolTable\n 70\n4\n  0\nBLOCK_RECORD\n  5\n1F\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Model_Space\n340\n530\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n58\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Paper_Space\n340\n531\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n238\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_ArchTick\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n23C\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_Open30\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nENDTAB\n  0\nENDSEC"},dxfBlocks:function(){return"  0\nSECTION\n  2\nBLOCKS\n  0\nBLOCK\n  5\n23A\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_ArchTick\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_ArchTick\n  1\n\n  0\nENDBLK\n  5\n23B\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n20\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Model_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Model_Space\n  1\n\n  0\nENDBLK\n  5\n21\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n5A\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Paper_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Paper_Space\n  1\n\n  0\nENDBLK\n  5\n5B\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n240\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_Open30\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_Open30\n  1\n\n  0\nENDBLK\n  5\n241\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nENDSEC"},dxfObjects:function(){return"  0\nSECTION\n  2\nOBJECTS\n  0\nDICTIONARY\n  5\nC\n330\n0\n100\nAcDbDictionary\n281\n1\n  3\nACAD_COLOR\n350\n524\n  3\nACAD_GROUP\n350\n525\n  3\nACAD_LAYOUT\n350\n526\n  3\nACAD_MATERIAL\n350\n527\n  3\nACAD_MLEADERSTYLE\n350\n528\n  3\nACAD_MLINESTYLE\n350\n529\n  3\nACAD_PLOTSETTINGS\n350\n52A\n  3\nACAD_PLOTSTYLENAME\n350\n52C\n  3\nACAD_SCALELIST\n350\n52D\n  3\nACAD_TABLESTYLE\n350\n52E\n  3\nACAD_VISUALSTYLE\n350\n52F\n  0\nDICTIONARY\n  5\n524\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n525\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n526\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nModel\n350\n530\n  3\nLayout1\n350\n531\n  0\nDICTIONARY\n  5\n527\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n528\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n529\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52A\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nACDBPLACEHOLDER\n  5\n52B\n330\n52C\n  0\nACDBDICTIONARYWDFLT\n  5\n52C\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nNormal\n350\n52B\n100\nAcDbDictionaryWithDefault\n340\n52B\n  0\nDICTIONARY\n  5\n52D\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52E\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52F\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nLAYOUT\n  5\n530\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n14.53\n 70\n11952\n 72\n0\n 73\n1\n 74\n0\n  7\n\n 75\n0\n147\n0.069\n148\n114.98\n149\n300.29\n100\nAcDbLayout\n  1\nModel\n 70\n1\n 71\n0\n 10\n0.0\n 20\n0.0\n 11\n12.0\n 21\n9.0\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.0\n 24\n0.0\n 34\n0.0\n 15\n0.0\n 25\n0.0\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n1F\n  0\nLAYOUT\n  5\n531\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n1.0\n 70\n688\n 72\n0\n 73\n1\n 74\n5\n  7\nacad.ctb\n 75\n16\n147\n1.0\n148\n0.0\n149\n0.0\n100\nAcDbLayout\n  1\nLayout1\n 70\n1\n 71\n1\n 10\n-0.7\n 20\n-0.23\n 11\n10.3\n 21\n8.27\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.63\n 24\n0.8\n 34\n0.0\n 15\n9.0\n 25\n7.2\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n58\n  0\nENDSEC"}}},{}],12:[function(t,e,n){e.exports=[[0,0,0,255],[255,0,0,255],[255,255,0,255],[0,255,0,255],[0,255,255,255],[0,0,255,255],[255,0,255,255],[255,255,255,255],[128,128,128,255],[192,192,192,255],[255,0,0,255],[255,127,127,255],[165,0,0,255],[165,82,82,255],[127,0,0,255],[127,63,63,255],[76,0,0,255],[76,38,38,255],[38,0,0,255],[38,19,19,255],[255,63,0,255],[255,159,127,255],[165,41,0,255],[165,103,82,255],[127,31,0,255],[127,79,63,255],[76,19,0,255],[76,47,38,255],[38,9,0,255],[38,28,19,255],[255,127,0,255],[255,191,127,255],[165,82,0,255],[165,124,82,255],[127,63,0,255],[127,95,63,255],[76,38,0,255],[76,57,38,255],[38,19,0,255],[38,28,19,255],[255,191,0,255],[255,223,127,255],[165,124,0,255],[165,145,82,255],[127,95,0,255],[127,111,63,255],[76,57,0,255],[76,66,38,255],[38,28,0,255],[38,33,19,255],[255,255,0,255],[255,255,127,255],[165,165,0,255],[165,165,82,255],[127,127,0,255],[127,127,63,255],[76,76,0,255],[76,76,38,255],[38,38,0,255],[38,38,19,255],[191,255,0,255],[223,255,127,255],[124,165,0,255],[145,165,82,255],[95,127,0,255],[111,127,63,255],[57,76,0,255],[66,76,38,255],[28,38,0,255],[33,38,19,255],[127,255,0,255],[191,255,127,255],[82,165,0,255],[124,165,82,255],[63,127,0,255],[95,127,63,255],[38,76,0,255],[57,76,38,255],[19,38,0,255],[28,38,19,255],[63,255,0,255],[159,255,127,255],[41,165,0,255],[103,165,82,255],[31,127,0,255],[79,127,63,255],[19,76,0,255],[47,76,38,255],[9,38,0,255],[23,38,19,255],[0,255,0,255],[125,255,127,255],[0,165,0,255],[82,165,82,255],[0,127,0,255],[63,127,63,255],[0,76,0,255],[38,76,38,255],[0,38,0,255],[19,38,19,255],[0,255,63,255],[127,255,159,255],[0,165,41,255],[82,165,103,255],[0,127,31,255],[63,127,79,255],[0,76,19,255],[38,76,47,255],[0,38,9,255],[19,88,23,255],[0,255,127,255],[127,255,191,255],[0,165,82,255],[82,165,124,255],[0,127,63,255],[63,127,95,255],[0,76,38,255],[38,76,57,255],[0,38,19,255],[19,88,28,255],[0,255,191,255],[127,255,223,255],[0,165,124,255],[82,165,145,255],[0,127,95,255],[63,127,111,255],[0,76,57,255],[38,76,66,255],[0,38,28,255],[19,88,88,255],[0,255,255,255],[127,255,255,255],[0,165,165,255],[82,165,165,255],[0,127,127,255],[63,127,127,255],[0,76,76,255],[38,76,76,255],[0,38,38,255],[19,88,88,255],[0,191,255,255],[127,223,255,255],[0,124,165,255],[82,145,165,255],[0,95,127,255],[63,111,217,255],[0,57,76,255],[38,66,126,255],[0,28,38,255],[19,88,88,255],[0,127,255,255],[127,191,255,255],[0,82,165,255],[82,124,165,255],[0,63,127,255],[63,95,127,255],[0,38,76,255],[38,57,126,255],[0,19,38,255],[19,28,88,255],[0,63,255,255],[127,159,255,255],[0,41,165,255],[82,103,165,255],[0,31,127,255],[63,79,127,255],[0,19,76,255],[38,47,126,255],[0,9,38,255],[19,23,88,255],[0,0,255,255],[127,127,255,255],[0,0,165,255],[82,82,165,255],[0,0,127,255],[63,63,127,255],[0,0,76,255],[38,38,126,255],[0,0,38,255],[19,19,88,255],[63,0,255,255],[159,127,255,255],[41,0,165,255],[103,82,165,255],[31,0,127,255],[79,63,127,255],[19,0,76,255],[47,38,126,255],[9,0,38,255],[23,19,88,255],[127,0,255,255],[191,127,255,255],[165,0,82,255],[124,82,165,255],[63,0,127,255],[95,63,127,255],[38,0,76,255],[57,38,126,255],[19,0,38,255],[28,19,88,255],[191,0,255,255],[223,127,255,255],[124,0,165,255],[142,82,165,255],[95,0,127,255],[111,63,127,255],[57,0,76,255],[66,38,76,255],[28,0,38,255],[88,19,88,255],[255,0,255,255],[255,127,255,255],[165,0,165,255],[165,82,165,255],[127,0,127,255],[127,63,127,255],[76,0,76,255],[76,38,76,255],[38,0,38,255],[88,19,88,255],[255,0,191,255],[255,127,223,255],[165,0,124,255],[165,82,145,255],[127,0,95,255],[127,63,111,255],[76,0,57,255],[76,38,66,255],[38,0,28,255],[88,19,88,255],[255,0,127,255],[255,127,191,255],[165,0,82,255],[165,82,124,255],[127,0,63,255],[127,63,95,255],[76,0,38,255],[76,38,57,255],[38,0,19,255],[88,19,28,255],[255,0,63,255],[255,127,159,255],[165,0,41,255],[165,82,103,255],[127,0,31,255],[127,63,79,255],[76,0,19,255],[76,38,47,255],[38,0,9,255],[88,19,23,255],[0,0,0,255],[101,101,101,255],[102,102,102,255],[153,153,153,255],[204,204,204,255],[255,255,255,255]]},{}],13:[function(t,e,n){const{geometries:o,modifiers:r}=t("@jscad/modeling"),{geom3:s,geom2:i,path2:a}=o,{flatten:c,toArray:l}=t("@jscad/array-utils"),{dxfHeaders:u,dxfClasses:h,dxfTables:p,dxfBlocks:m,dxfObjects:d}=t("./autocad_AC2017"),f=t("./colorindex2017"),g=(t,e)=>{const n=t.map(((t,n)=>{if(i.isA(t)){const n=t.color,o=t.name,r=i.toOutlines(t).map((t=>({closed:!0,points:t,color:n,name:o})));return"polyline"===e.geom2To?y(r,e):v(r,e)}if(s.isA(t))return"polyline"===e.geom3To?E(t,e):b(t,e);if(a.isA(t)){const n=t.color,o=t.name,r={closed:t.isClosed,points:a.toPoints(t),color:n,name:o};return v([r],e)}return""}));let o="  0\nSECTION\n  2\nENTITIES\n";return n.forEach((t=>{t&&(o+=t)})),o+="  0\nENDSEC",o},v=(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});let n="";return t.forEach(((o,r)=>{if(o.points.length<1)return;const s=o.points.length+(o.closed?1:0);n+=`  0\nLWPOLYLINE\n  5\n${D(e)}\n  100\nAcDbEntity\n  3\n${P(o,e)}\n  8\n0\n  67\n0\n  62\n${S(o,e)}\n  100\nAcDbPolyline\n  90\n${s}\n  70\n${o.closed?1:0}\n`;for(let t=0;t<s;t++){let e=t;e>=o.points.length&&(e-=o.points.length);const r=o.points[e];n+=`  10\n${r[0]}\n  20\n${r[1]}\n`}e.statusCallback&&e.statusCallback({progress:100*r/t.length})})),e.statusCallback&&e.statusCallback({progress:100}),[n]},y=(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});let n="";return t.forEach(((o,r)=>{const s=o.points.length+(o.closed?1:0);n+=`  0\nPOLYLINE\n  5\n${D(e)}\n  100\nAcDbEntity\n  3\n${P(o,e)}\n  8\n0\n  62\n${S(o,e)}\n  100\nAcDb2dPolyline\n`;for(let t=0;t<s;t++){let r=t;r>=o.points.length&&(r-=o.points.length);const s=o.points[r];n+=`  0\nVERTEX\n  5\n${D(e)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb2dVertex\n 10\n${s[0]}\n 20\n${s[1]}\n`}n+=`  0\nSEQEND\n  5\n${D(e)}\n  100\nAcDbEntity\n`,e.statusCallback&&e.statusCallback({progress:100*r/t.length})})),e.statusCallback&&e.statusCallback({progress:100}),[n]},b=(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});let n="";const o=s.toPolygons(t),r=S(t,e);return o.forEach(((t,o)=>{const s=t.color?S(t,e):r;x(t).forEach(((t,o)=>{n+=A(t,e,s)}))})),e.statusCallback&&e.statusCallback({progress:100}),[n]},x=t=>{const e=t.vertices.length-2;if(e<1)return[];const n=t.vertices[0],o=[];for(let r=0;r<e;r++)o.push([n,t.vertices[r+1],t.vertices[r+2]]);return o},A=(t,e,n)=>{const o=t[0],r=t[1],s=t[2],i=t[2];return`  0\n3DFACE\n  5\n${D(e)}\n  100\nAcDbEntity\n  8\n0\n  62\n${n}\n  100\nAcDbFace\n  70\n0\n  10\n${o[0]}\n  20\n${o[1]}\n  30\n${o[2]}\n  11\n${r[0]}\n  21\n${r[1]}\n  31\n${r[2]}\n  12\n${s[0]}\n  22\n${s[1]}\n  32\n${s[2]}\n  13\n${i[0]}\n  23\n${i[1]}\n  33\n${i[2]}\n`},E=(t,e)=>{let n="";const o=w(s.toPolygons(t));return o.faces.length>0&&(n+=`  0\nPOLYLINE\n  5\n${D(e)}\n  100\nAcDbEntity\n  3\n${P(t,e)}\n  8\n0\n  62\n${S(t,e)}\n  100\nAcDb3dPolyline\n  70\n64\n  71\n${o.vertices.length}\n  72\n${o.faces.length}\n`,o.vertices.forEach((t=>{n+=`  0\nVERTEX\n  5\n${D(e)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n${t[0]}\n  20\n${t[1]}\n  30\n${t[2]}\n  70\n192\n`})),o.faces.forEach((t=>{n+=`  0\nVERTEX\n  5\n${D(e)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n0\n  20\n0\n  30\n0\n  70\n128\n  71\n${t[0]}\n  72\n${t[1]}\n  73\n${t[2]}\n  74\n${t[3]}\n`}))),[n]},w=t=>{const e=[],n=[];for(let o=0;o<t.length;++o){const r=t[o],s=[];for(let t=0;t<r.vertices.length;++t){const e=r.vertices[t];n.push([e[0],e[1],e[2]]),s.push(n.length)}for(;s.length<4;)s.push(0);e.push(s)}return{faces:e,vertices:n}},D=t=>{t.entityId++;const e="00000"+t.entityId.toString(16).toUpperCase();return"CAD"+e.substr(e.length-5)},P=(t,e)=>{if(t.name)return t.name;const n="00000"+e.entityId.toString(16).toUpperCase();return"CAD"+n.substr(n.length-5)},S=(t,e)=>{let n=256;if(t.color){const o=Math.floor(255*t.color[0]),r=Math.floor(255*t.color[1]),s=Math.floor(255*t.color[2]),i=e.colorIndex;let a=765;for(let t=1;t<i.length;t++){const e=i[t],c=Math.abs(o-e[0])+Math.abs(r-e[1])+Math.abs(s-e[2]);if(c<a){if(n=t,0===c)break;a=c}}}return n};e.exports={serialize:(t,...e)=>{const n={geom2To:"lwpolyline",geom3To:"3dface",pathTo:"lwpolyline",statusCallback:null,colorIndex:f};if((t=Object.assign({},n,t)).entityId=0,0===(e=(e=c(e)).filter((t=>s.isA(t)||i.isA(t)||a.isA(t)))).length)throw new Error("only JSCAD geometries can be serialized to DXF");return e=l(r.generalize({snap:!0,triangulate:!0},e)),[`999\nCreated by JSCAD\n${u(t)}\n${h(t)}\n${p(t)}\n${m(t)}\n${g(e,t)}\n${d(t)}\n  0\nEOF\n`]},mimeType:"application/dxf"}},{"./autocad_AC2017":11,"./colorindex2017":12,"@jscad/array-utils":6,"@jscad/modeling":104}],14:[function(t,e,n){const o=t("./cssColors");e.exports=t=>o[t.toLowerCase()]},{"./cssColors":16}],15:[function(t,e,n){const o=t("../utils/flatten"),r=t("../geometries/geom2"),s=t("../geometries/geom3"),i=t("../geometries/path2"),a=t("../geometries/poly3");e.exports=(t,...e)=>{if(!Array.isArray(t))throw new Error("color must be an array");if(t.length<3)throw new Error("color must contain R, G and B values");if(3===t.length&&(t=[t[0],t[1],t[2],1]),0===(e=o(e)).length)throw new Error("wrong number of arguments");const n=e.map((e=>r.isA(e)?((t,e)=>{const n=r.clone(e);return n.color=t,n})(t,e):s.isA(e)?((t,e)=>{const n=s.clone(e);return n.color=t,n})(t,e):i.isA(e)?((t,e)=>{const n=i.clone(e);return n.color=t,n})(t,e):a.isA(e)?((t,e)=>{const n=a.clone(e);return n.color=t,n})(t,e):(e.color=t,e)));return 1===n.length?n[0]:n}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74,"../geometries/poly3":91,"../utils/flatten":408}],16:[function(t,e,n){e.exports={black:[0,0,0],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[1,1,1],maroon:[128/255,0,0],red:[1,0,0],purple:[128/255,0,128/255],fuchsia:[1,0,1],green:[0,128/255,0],lime:[0,1,0],olive:[128/255,128/255,0],yellow:[1,1,0],navy:[0,0,128/255],blue:[0,0,1],teal:[0,128/255,128/255],aqua:[0,1,1],aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],blanchedalmond:[1,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]}},{}],17:[function(t,e,n){e.exports=t=>{if((t=t.replace("#","")).length<6)throw new Error("the given notation must contain 3 or more hex values");const e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255;return t.length>=8?[e,n,o,parseInt(t.substring(6,8),16)/255]:[e,n,o]}},{}],18:[function(t,e,n){const o=t("../utils/flatten"),r=t("./hueToColorComponent");e.exports=(...t)=>{if((t=o(t)).length<3)throw new Error("values must contain H, S and L values");const e=t[0],n=t[1],s=t[2];let i=s,a=s,c=s;if(0!==n){const t=s<.5?s*(1+n):s+n-s*n,o=2*s-t;i=r(o,t,e+1/3),a=r(o,t,e),c=r(o,t,e-1/3)}return t.length>3?[i,a,c,t[3]]:[i,a,c]}},{"../utils/flatten":408,"./hueToColorComponent":20}],19:[function(t,e,n){const o=t("../utils/flatten");e.exports=(...t)=>{if((t=o(t)).length<3)throw new Error("values must contain H, S and V values");const e=t[0],n=t[1],r=t[2];let s=0,i=0,a=0;const c=Math.floor(6*e),l=6*e-c,u=r*(1-n),h=r*(1-l*n),p=r*(1-(1-l)*n);switch(c%6){case 0:s=r,i=p,a=u;break;case 1:s=h,i=r,a=u;break;case 2:s=u,i=r,a=p;break;case 3:s=u,i=h,a=r;break;case 4:s=p,i=u,a=r;break;case 5:s=r,i=u,a=h}return t.length>3?[s,i,a,t[3]]:[s,i,a]}},{"../utils/flatten":408}],20:[function(t,e,n){e.exports=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t)},{}],21:[function(t,e,n){e.exports={colorize:t("./colorize"),colorNameToRgb:t("./colorNameToRgb"),cssColors:t("./cssColors"),hexToRgb:t("./hexToRgb"),hslToRgb:t("./hslToRgb"),hsvToRgb:t("./hsvToRgb"),hueToColorComponent:t("./hueToColorComponent"),rgbToHex:t("./rgbToHex"),rgbToHsl:t("./rgbToHsl"),rgbToHsv:t("./rgbToHsv")}},{"./colorNameToRgb":14,"./colorize":15,"./cssColors":16,"./hexToRgb":17,"./hslToRgb":18,"./hsvToRgb":19,"./hueToColorComponent":20,"./rgbToHex":22,"./rgbToHsl":23,"./rgbToHsv":24}],22:[function(t,e,n){const o=t("../utils/flatten");e.exports=(...t)=>{if((t=o(t)).length<3)throw new Error("values must contain R, G and B values");const e=255*t[0],n=255*t[1],r=255*t[2];let s=`#${Number(16777216+65536*e+256*n+r).toString(16).substring(1,7)}`;return t.length>3&&(s+=Number(255*t[3]).toString(16)),s}},{"../utils/flatten":408}],23:[function(t,e,n){const o=t("../utils/flatten");e.exports=(...t)=>{if((t=o(t)).length<3)throw new Error("values must contain R, G and B values");const e=t[0],n=t[1],r=t[2],s=Math.max(e,n,r),i=Math.min(e,n,r);let a,c;const l=(s+i)/2;if(s===i)a=c=0;else{const t=s-i;switch(c=l>.5?t/(2-s-i):t/(s+i),s){case e:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-e)/t+2;break;case r:a=(e-n)/t+4}a/=6}return t.length>3?[a,c,l,t[3]]:[a,c,l]}},{"../utils/flatten":408}],24:[function(t,e,n){const o=t("../utils/flatten");e.exports=(...t)=>{if((t=o(t)).length<3)throw new Error("values must contain R, G and B values");const e=t[0],n=t[1],r=t[2],s=Math.max(e,n,r),i=Math.min(e,n,r);let a;const c=s,l=s-i,u=0===s?0:l/s;if(s===i)a=0;else{switch(s){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4}a/=6}return t.length>3?[a,u,c,t[3]]:[a,u,c]}},{"../utils/flatten":408}],25:[function(t,e,n){const o=t("./lengths");e.exports=(t,e)=>{const{distance:n,segments:r}=Object.assign({},{distance:0,segments:100},t),s=o(r,e);let i=0,a=r;for(;i<=a;){const t=Math.floor(i+(a-i)/2),e=s[t]-n;if(e<0)i=t+1;else{if(!(e>0)){a=t;break}a=t-1}}const c=a;if(s[c]===n)return c/r;const l=s[c];return(c+(n-l)/(s[c+1]-l))/r}},{"./lengths":29}],26:[function(t,e,n){const o=function(t){const e=[];for(let n=0;n<=t;n++)e.push(r(t)/(r(n)*r(t-n)));return e},r=function(t){let e=1;for(let n=2;n<=t;n++)e*=n;return e};e.exports=t=>{if(!Array.isArray(t))throw new Error("Bezier points must be a valid array/");if(t.length<2)throw new Error("Bezier points must contain at least 2 values.");const e=function(t){let e=null;return t.forEach((t=>{let n="";if(Number.isFinite(t))n="float_single";else{if(!Array.isArray(t))throw new Error("Bezier points must all be numbers or arrays of number.");t.forEach((t=>{if(!Number.isFinite(t))throw new Error("Bezier point values must all be numbers.")})),n="float_"+t.length}if(null==e)e=n;else if(e!==n)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")})),e}(t);return{points:t,pointType:e,dimensions:"float_single"===e?0:t[0].length,permutations:o(t.length-1),tangentPermutations:o(t.length-2)}}},{}],27:[function(t,e,n){e.exports={create:t("./create"),valueAt:t("./valueAt"),tangentAt:t("./tangentAt"),lengths:t("./lengths"),length:t("./length"),arcLengthToT:t("./arcLengthToT")}},{"./arcLengthToT":25,"./create":26,"./length":28,"./lengths":29,"./tangentAt":30,"./valueAt":31}],28:[function(t,e,n){const o=t("./lengths");e.exports=(t,e)=>o(t,e)[t]},{"./lengths":29}],29:[function(t,e,n){const o=t("./valueAt"),r=(t,e)=>{if(Number.isFinite(t)&&Number.isFinite(e))return Math.abs(t-e);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("The operands must have the same number of dimensions.");let n=0;for(let o=0;o<t.length;o++)n+=(e[o]-t[o])*(e[o]-t[o]);return Math.sqrt(n)}throw new Error("The operands must be of the same type, either number or array.")};e.exports=(t,e)=>{let n=0;const s=[0];let i=o(0,e);for(let a=1;a<=t;a++){const c=o(a/t,e);n+=r(c,i),s.push(n),i=c}return s}},{"./valueAt":31}],30:[function(t,e,n){const o=function(t,e,n){const o=e.length-1;let r=0;for(let s=0;s<o;s++){const i=o*(e[s+1]-e[s]);r+=t.tangentPermutations[s]*Math.pow(1-n,o-1-s)*Math.pow(n,s)*i}return r};e.exports=(t,e)=>{if(t<0||t>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if("float_single"===e.pointType)return o(e,e.points,t);{const n=[];for(let r=0;r<e.dimensions;r++){const s=[];for(let t=0;t<e.points.length;t++)s.push(e.points[t][r]);n.push(o(e,s,t))}return n}}},{}],31:[function(t,e,n){const o=function(t,e,n){const o=e.length-1;let r=0;for(let s=0;s<=o;s++)r+=t.permutations[s]*Math.pow(1-n,o-s)*Math.pow(n,s)*e[s];return r};e.exports=(t,e)=>{if(t<0||t>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if("float_single"===e.pointType)return o(e,e.points,t);{const n=[];for(let r=0;r<e.dimensions;r++){const s=[];for(let t=0;t<e.points.length;t++)s.push(e.points[t][r]);n.push(o(e,s,t))}return n}}},{}],32:[function(t,e,n){e.exports={bezier:t("./bezier")}},{"./bezier":27}],33:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec2");e.exports=t=>(o.isIdentity(t.transforms)||(t.sides=t.sides.map((e=>[r.transform(r.create(),e[0],t.transforms),r.transform(r.create(),e[1],t.transforms)])),t.transforms=o.create()),t)},{"../../maths/mat4":155,"../../maths/vec2":202}],34:[function(t,e,n){e.exports=t=>Object.assign({},t)},{}],35:[function(t,e,n){const o=t("../../maths/mat4");e.exports=t=>(void 0===t&&(t=[]),{sides:t,transforms:o.create()})},{"../../maths/mat4":155}],36:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec2"),s=t("./create");e.exports=t=>{if(0!==t[0])throw new Error("invalid compact binary data");const e=s();e.transforms=o.clone(t.slice(1,17));for(let n=21;n<t.length;n+=4){const o=r.fromValues(t[n+0],t[n+1]),s=r.fromValues(t[n+2],t[n+3]);e.sides.push([o,s])}return t[17]>=0&&(e.color=[t[17],t[18],t[19],t[20]]),e}},{"../../maths/mat4":155,"../../maths/vec2":202,"./create":35}],37:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./create");e.exports=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");let e=t.length;if(e<3)throw new Error("the given points must define a closed geometry with three or more points");o.equals(t[0],t[e-1])&&--e;const n=[];let s=t[e-1];for(let r=0;r<e;r++){const e=t[r];n.push([o.clone(s),o.clone(e)]),s=e}return r(n)}},{"../../maths/vec2":202,"./create":35}],38:[function(t,e,n){e.exports={clone:t("./clone"),create:t("./create"),fromPoints:t("./fromPoints"),fromCompactBinary:t("./fromCompactBinary"),isA:t("./isA"),reverse:t("./reverse"),toOutlines:t("./toOutlines"),toPoints:t("./toPoints"),toSides:t("./toSides"),toString:t("./toString"),toCompactBinary:t("./toCompactBinary"),transform:t("./transform"),validate:t("./validate")}},{"./clone":34,"./create":35,"./fromCompactBinary":36,"./fromPoints":37,"./isA":39,"./reverse":40,"./toCompactBinary":41,"./toOutlines":42,"./toPoints":43,"./toSides":44,"./toString":45,"./transform":46,"./validate":47}],39:[function(t,e,n){e.exports=t=>!!(t&&"object"==typeof t&&"sides"in t&&"transforms"in t&&Array.isArray(t.sides)&&"length"in t.transforms)},{}],40:[function(t,e,n){const o=t("./create"),r=t("./toSides");e.exports=t=>{const e=r(t).map((t=>[t[1],t[0]]));return e.reverse(),o(e)}},{"./create":35,"./toSides":44}],41:[function(t,e,n){e.exports=t=>{const e=t.sides,n=t.transforms;let o=[-1,-1,-1,-1];t.color&&(o=t.color);const r=new Float32Array(21+4*e.length);r[0]=0,r[1]=n[0],r[2]=n[1],r[3]=n[2],r[4]=n[3],r[5]=n[4],r[6]=n[5],r[7]=n[6],r[8]=n[7],r[9]=n[8],r[10]=n[9],r[11]=n[10],r[12]=n[11],r[13]=n[12],r[14]=n[13],r[15]=n[14],r[16]=n[15],r[17]=o[0],r[18]=o[1],r[19]=o[2],r[20]=o[3];for(let t=0;t<e.length;t++){const n=4*t+21,o=e[t][0],s=e[t][1];r[n+0]=o[0],r[n+1]=o[1],r[n+2]=s[0],r[n+3]=s[1]}return r}},{}],42:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./toSides"),s=(t,e)=>{if(1===e.length)return e.pop();const n=o.create(),r=o.angleDegrees(o.subtract(n,t[1],t[0]));let s,i;e.forEach(((t,e)=>{let a=o.angleDegrees(o.subtract(n,t[1],t[0]))-r;a<-180&&(a+=360),a>=180&&(a-=360),(void 0===i||a>s)&&(i=e,s=a)}));const a=e[i];return e.splice(i,1),a};e.exports=t=>{const e=(t=>{const e=new Map;return(t=>{const e=new Map,n=t=>{const n=t.toString();return e.has(n)?e.get(n):(e.set(n,t),t)};return t.map((t=>t.map(n)))})(t).forEach((t=>{e.has(t[0])?e.get(t[0]).push(t):e.set(t[0],[t])})),e})(r(t)),n=[];for(;;){let t;for(const[n,o]of e){if(t=o.shift(),t)break;e.delete(n)}if(void 0===t)break;const o=[],r=t[0];for(;;){o.push(t[0]);const n=t[1];if(n===r)break;const i=e.get(n);if(!i)throw new Error(`geometry is not closed at vertex ${n}`);const a=s(t,i);0===i.length&&e.delete(n),t=a}o.length>0&&o.push(o.shift()),n.push(o)}return e.clear(),n}},{"../../maths/vec2":202,"./toSides":44}],43:[function(t,e,n){const o=t("./toSides");e.exports=t=>{const e=o(t).map((t=>t[0]));return e.length>0&&e.push(e.shift()),e}},{"./toSides":44}],44:[function(t,e,n){const o=t("./applyTransforms");e.exports=t=>o(t).sides},{"./applyTransforms":33}],45:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./toSides");e.exports=t=>{const e=r(t);let n="geom2 ("+e.length+" sides):\n[\n";return e.forEach((t=>{n+="  ["+o.toString(t[0])+", "+o.toString(t[1])+"]\n"})),n+="]\n",n}},{"../../maths/vec2":202,"./toSides":44}],46:[function(t,e,n){const o=t("../../maths/mat4");e.exports=(t,e)=>{const n=o.multiply(o.create(),t,e.transforms);return Object.assign({},e,{transforms:n})}},{"../../maths/mat4":155}],47:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./isA"),s=t("./toOutlines");e.exports=t=>{if(!r(t))throw new Error("invalid geom2 structure");if(s(t),t.sides.forEach((t=>{if(o.equals(t[0],t[1]))throw new Error(`geom2 self-edge ${t[0]}`)})),!t.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${t.transforms}`)}},{"../../maths/vec2":202,"./isA":39,"./toOutlines":42}],48:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../poly3");e.exports=t=>(o.isIdentity(t.transforms)||(t.polygons=t.polygons.map((e=>r.transform(t.transforms,e))),t.transforms=o.create()),t)},{"../../maths/mat4":155,"../poly3":91}],49:[function(t,e,n){e.exports=t=>Object.assign({},t)},{}],50:[function(t,e,n){const o=t("../../maths/mat4");e.exports=t=>(void 0===t&&(t=[]),{polygons:t,transforms:o.create()})},{"../../maths/mat4":155}],51:[function(t,e,n){const o=t("../../maths/vec3"),r=t("../../maths/mat4"),s=t("../poly3"),i=t("./create");e.exports=t=>{if(1!==t[0])throw new Error("invalid compact binary data");const e=i();e.transforms=r.clone(t.slice(1,17));const n=t[21];let a=22,c=t.length-3*n;for(;c<t.length;){const n=t[a];a++;const r=[];for(let e=0;e<n;e++)r.push(o.fromValues(t[c],t[c+1],t[c+2])),c+=3;e.polygons.push(s.create(r))}return t[17]>=0&&(e.color=[t[17],t[18],t[19],t[20]]),e}},{"../../maths/mat4":155,"../../maths/vec3":233,"../poly3":91,"./create":50}],52:[function(t,e,n){const o=t("../poly3"),r=t("./create");e.exports=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");const e=t.map(((t,e)=>o.create(t)));return r(e)}},{"../poly3":91,"./create":50}],53:[function(t,e,n){e.exports={clone:t("./clone"),create:t("./create"),fromPoints:t("./fromPoints"),fromCompactBinary:t("./fromCompactBinary"),invert:t("./invert"),isA:t("./isA"),toPoints:t("./toPoints"),toPolygons:t("./toPolygons"),toString:t("./toString"),toCompactBinary:t("./toCompactBinary"),transform:t("./transform"),validate:t("./validate")}},{"./clone":49,"./create":50,"./fromCompactBinary":51,"./fromPoints":52,"./invert":54,"./isA":55,"./toCompactBinary":56,"./toPoints":57,"./toPolygons":58,"./toString":59,"./transform":60,"./validate":61}],54:[function(t,e,n){const o=t("../poly3"),r=t("./create"),s=t("./toPolygons");e.exports=t=>{const e=s(t).map((t=>o.invert(t)));return r(e)}},{"../poly3":91,"./create":50,"./toPolygons":58}],55:[function(t,e,n){e.exports=t=>!!(t&&"object"==typeof t&&"polygons"in t&&"transforms"in t&&Array.isArray(t.polygons)&&"length"in t.transforms)},{}],56:[function(t,e,n){const o=t("../poly3");e.exports=t=>{const e=t.polygons,n=t.transforms,r=e.length,s=e.reduce(((t,e)=>t+e.vertices.length),0);let i=[-1,-1,-1,-1];t.color&&(i=t.color);const a=new Float32Array(22+r+3*s);a[0]=1,a[1]=n[0],a[2]=n[1],a[3]=n[2],a[4]=n[3],a[5]=n[4],a[6]=n[5],a[7]=n[6],a[8]=n[7],a[9]=n[8],a[10]=n[9],a[11]=n[10],a[12]=n[11],a[13]=n[12],a[14]=n[13],a[15]=n[14],a[16]=n[15],a[17]=i[0],a[18]=i[1],a[19]=i[2],a[20]=i[3],a[21]=s;let c=22,l=c+r;return e.forEach((t=>{const e=o.toPoints(t);a[c]=e.length,c++;for(let t=0;t<e.length;t++){const n=e[t];a[l+0]=n[0],a[l+1]=n[1],a[l+2]=n[2],l+=3}})),a}},{"../poly3":91}],57:[function(t,e,n){const o=t("../poly3"),r=t("./toPolygons");e.exports=t=>r(t).map((t=>o.toPoints(t)))},{"../poly3":91,"./toPolygons":58}],58:[function(t,e,n){const o=t("./applyTransforms");e.exports=t=>o(t).polygons},{"./applyTransforms":48}],59:[function(t,e,n){const o=t("../poly3"),r=t("./toPolygons");e.exports=t=>{const e=r(t);let n="geom3 ("+e.length+" polygons):\n";return e.forEach((t=>{n+="  "+o.toString(t)+"\n"})),n}},{"../poly3":91,"./toPolygons":58}],60:[function(t,e,n){const o=t("../../maths/mat4");e.exports=(t,e)=>{const n=o.multiply(o.create(),t,e.transforms);return Object.assign({},e,{transforms:n})}},{"../../maths/mat4":155}],61:[function(t,e,n){const o=t("../poly3"),r=t("./isA");e.exports=t=>{if(!r(t))throw new Error("invalid geom3 structure");if(t.polygons.forEach(o.validate),(t=>{const e=new Map;t.polygons.forEach((({vertices:t})=>{t.forEach(((n,o)=>{const r=`${n}/${t[(o+1)%t.length]}`,s=e.has(r)?e.get(r):0;e.set(r,s+1)}))}));const n=[];if(e.forEach(((t,o)=>{const r=o.split("/").reverse().join("/");t!==e.get(r)&&n.push(o.replace("/"," -> "))})),n.length>0)throw new Error(`non-manifold edges ${n.length}\n${n.join("\n")}`)})(t),!t.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${t.transforms}`)}},{"../poly3":91,"./isA":55}],62:[function(t,e,n){e.exports={geom2:t("./geom2"),geom3:t("./geom3"),path2:t("./path2"),poly2:t("./poly2"),poly3:t("./poly3")}},{"./geom2":38,"./geom3":53,"./path2":74,"./poly2":85,"./poly3":91}],63:[function(t,e,n){const{TAU:o}=t("../../maths/constants"),r=t("../../maths/vec2"),s=t("./fromPoints"),i=t("./toPoints");e.exports=(t,e)=>{let{endpoint:n,radius:a,xaxisrotation:c,clockwise:l,large:u,segments:h}=Object.assign({},{radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},t);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=r.clone(n),!Array.isArray(a))throw new Error("radius must be an array of X and Y values");if(a.length<2)throw new Error("radius must contain X and Y values");if(h<4)throw new Error("segments must be four or more");const p=1e5;if(e.isClosed)throw new Error("the given path cannot be closed");const m=i(e);if(m.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let d=a[0],f=a[1];const g=m[m.length-1];d=Math.round(d*p)/p,f=Math.round(f*p)/p,n=r.fromValues(Math.round(n[0]*p)/p,Math.round(n[1]*p)/p);const v=!l;let y=[];if(0===d||0===f)y.push(n);else{d=Math.abs(d),f=Math.abs(f);const e=c,s=Math.cos(e),i=Math.sin(e),a=r.subtract(r.create(),g,n);r.scale(a,a,.5);const l=Math.round((s*a[0]+i*a[1])*p)/p,m=Math.round((-i*a[0]+s*a[1])*p)/p,b=r.fromValues(l,m),x=b[0]*b[0]/(d*d)+b[1]*b[1]/(f*f);if(x>1){const t=Math.sqrt(x);d*=t,f*=t,d=Math.round(d*p)/p,f=Math.round(f*p)/p}let A=Math.sqrt((d*d*f*f-d*d*b[1]*b[1]-f*f*b[0]*b[0])/(d*d*b[1]*b[1]+f*f*b[0]*b[0]));v===u&&(A=-A);const E=r.fromValues(d*b[1]/f,-f*b[0]/d);r.scale(E,E,A);let w=r.fromValues(s*E[0]-i*E[1],i*E[0]+s*E[1]);w=r.add(w,w,r.scale(r.create(),r.add(r.create(),g,n),.5));const D=r.fromValues((b[0]-E[0])/d,(b[1]-E[1])/f),P=r.fromValues((-b[0]-E[0])/d,(-b[1]-E[1])/f),S=r.angleRadians(D);let T=r.angleRadians(P)-S;T%=o,!v&&T>0?T-=o:v&&T<0&&(T+=o);let C=Math.ceil(Math.abs(T)/o*h)+1;C<1&&(C=1);for(let t=1;t<C;t++){const e=S+t/C*T,n=Math.cos(e),o=Math.sin(e),a=r.fromValues(s*d*n-i*f*o,i*d*n+s*f*o);r.add(a,a,w),y.push(a)}C&&y.push(t.endpoint)}return y=m.concat(y),s({},y)}},{"../../maths/constants":106,"../../maths/vec2":202,"./fromPoints":73,"./toPoints":78}],64:[function(t,e,n){const{TAU:o}=t("../../maths/constants"),r=t("../../maths/vec2"),s=t("../../maths/vec2"),i=t("./appendPoints"),a=t("./toPoints");e.exports=(t,e)=>{let{controlPoints:n,segments:c}=Object.assign({},{segments:16},t);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(c<4)throw new Error("segments must be four or more");if(e.isClosed)throw new Error("the given geometry cannot be closed");const l=a(e);if(l.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),null===n[0]){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let t=l[l.length-2];if("lastBezierControlPoint"in e&&(t=e.lastBezierControlPoint),!Array.isArray(t))throw new Error("the given path must contain TWO or more points if given a null control point");const o=r.scale(r.create(),l[l.length-1],2);r.subtract(o,o,t),n[0]=o}n.unshift(l[l.length-1]);const u=n.length-1,h=[];let p=1;for(let t=0;t<=u;++t)t>0&&(p*=t),h.push(p);const m=[];for(let t=0;t<=u;++t){const e=h[u]/(h[t]*h[u-t]);m.push(e)}const d=r.create(),f=r.create(),g=s.create(),v=t=>{let e=1,o=Math.pow(1-t,u);const s=1!==t?1/(1-t):1,i=r.create();for(let a=0;a<=u;++a){a===u&&(o=1);const c=m[a]*e*o,l=r.scale(d,n[a],c);r.add(i,i,l),e*=t,o*=s}return i},y=[],b=[],x=u+1;for(let t=0;t<x;++t){const e=t/(x-1),n=v(e);y.push(n),b.push(e)}let A=1;const E=o/c,w=Math.sin(E);for(;A<y.length-1;){const t=r.subtract(d,y[A],y[A-1]);r.normalize(t,t);const e=r.subtract(f,y[A+1],y[A]);r.normalize(e,e);const n=r.cross(g,t,e);if(Math.abs(n[2])>w){const t=b[A-1],e=b[A+1],n=t+1*(e-t)/3,o=t+2*(e-t)/3,r=v(n),s=v(o);y.splice(A,1,r,s),b.splice(A,1,n,o),A--,A<1&&(A=1)}else++A}y.shift();const D=i(y,e);return D.lastBezierControlPoint=n[n.length-2],D}},{"../../maths/constants":106,"../../maths/vec2":202,"./appendPoints":65,"./toPoints":78}],65:[function(t,e,n){const o=t("./concat"),r=t("./create");e.exports=(t,e)=>o(e,r(t))},{"./concat":69,"./create":70}],66:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec2");e.exports=t=>(o.isIdentity(t.transforms)||(t.points=t.points.map((e=>r.transform(r.create(),e,t.transforms))),t.transforms=o.create()),t)},{"../../maths/mat4":155,"../../maths/vec2":202}],67:[function(t,e,n){e.exports=t=>Object.assign({},t)},{}],68:[function(t,e,n){const{EPS:o}=t("../../maths/constants"),r=t("../../maths/vec2"),s=t("./clone");e.exports=t=>{if(t.isClosed)return t;const e=s(t);if(e.isClosed=!0,e.points.length>1){const t=e.points,n=t[0];let s=t[t.length-1];for(;r.distance(n,s)<o*o&&(t.pop(),1!==t.length);)s=t[t.length-1]}return e}},{"../../maths/constants":106,"../../maths/vec2":202,"./clone":67}],69:[function(t,e,n){const o=t("./fromPoints"),r=t("./toPoints"),{equals:s}=t("../../maths/vec2");e.exports=(...t)=>{let e=!1,n=[];return t.forEach(((t,o)=>{const i=r(t).slice();if(n.length>0&&i.length>0&&s(i[0],n[n.length-1])&&i.shift(),i.length>0&&e)throw new Error(`Cannot concatenate to a closed path; check the ${o}th path`);e=t.isClosed,n=n.concat(i)})),o({closed:e},n)}},{"../../maths/vec2":202,"./fromPoints":73,"./toPoints":78}],70:[function(t,e,n){const o=t("../../maths/mat4");e.exports=t=>(void 0===t&&(t=[]),{points:t,isClosed:!1,transforms:o.create()})},{"../../maths/mat4":155}],71:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./toPoints");e.exports=(t,e)=>{if(t.isClosed!==e.isClosed)return!1;if(t.points.length!==e.points.length)return!1;const n=r(t),s=r(e),i=n.length;let a=0;do{let e=!1;for(let t=0;t<i;t++)if(!o.equals(n[t],s[(t+a)%i])){e=!0;break}if(!1===e)return!0;if(!t.isClosed)return!1}while(++a<i);return!1}},{"../../maths/vec2":202,"./toPoints":78}],72:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec2"),s=t("./create");e.exports=t=>{if(2!==t[0])throw new Error("invalid compact binary data");const e=s();e.transforms=o.clone(t.slice(1,17)),e.isClosed=!!t[17];for(let n=22;n<t.length;n+=2){const o=r.fromValues(t[n],t[n+1]);e.points.push(o)}return t[18]>=0&&(e.color=[t[18],t[19],t[20],t[21]]),e}},{"../../maths/mat4":155,"../../maths/vec2":202,"./create":70}],73:[function(t,e,n){const{EPS:o}=t("../../maths/constants"),r=t("../../maths/vec2"),s=t("./close"),i=t("./create");e.exports=(t,e)=>{let{closed:n}=Object.assign({},{closed:!1},t),a=i();if(a.points=e.map((t=>r.clone(t))),a.points.length>1){const t=a.points[0],e=a.points[a.points.length-1];r.distance(t,e)<o*o&&(n=!0)}return!0===n&&(a=s(a)),a}},{"../../maths/constants":106,"../../maths/vec2":202,"./close":68,"./create":70}],74:[function(t,e,n){e.exports={appendArc:t("./appendArc"),appendBezier:t("./appendBezier"),appendPoints:t("./appendPoints"),clone:t("./clone"),close:t("./close"),concat:t("./concat"),create:t("./create"),equals:t("./equals"),fromPoints:t("./fromPoints"),fromCompactBinary:t("./fromCompactBinary"),isA:t("./isA"),reverse:t("./reverse"),toPoints:t("./toPoints"),toString:t("./toString"),toCompactBinary:t("./toCompactBinary"),transform:t("./transform"),validate:t("./validate")}},{"./appendArc":63,"./appendBezier":64,"./appendPoints":65,"./clone":67,"./close":68,"./concat":69,"./create":70,"./equals":71,"./fromCompactBinary":72,"./fromPoints":73,"./isA":75,"./reverse":76,"./toCompactBinary":77,"./toPoints":78,"./toString":79,"./transform":80,"./validate":81}],75:[function(t,e,n){e.exports=t=>!!(t&&"object"==typeof t&&"points"in t&&"transforms"in t&&"isClosed"in t&&Array.isArray(t.points)&&"length"in t.transforms)},{}],76:[function(t,e,n){const o=t("./clone");e.exports=t=>{const e=o(t);return e.points=t.points.slice().reverse(),e}},{"./clone":67}],77:[function(t,e,n){e.exports=t=>{const e=t.points,n=t.transforms;let o=[-1,-1,-1,-1];t.color&&(o=t.color);const r=new Float32Array(22+2*e.length);r[0]=2,r[1]=n[0],r[2]=n[1],r[3]=n[2],r[4]=n[3],r[5]=n[4],r[6]=n[5],r[7]=n[6],r[8]=n[7],r[9]=n[8],r[10]=n[9],r[11]=n[10],r[12]=n[11],r[13]=n[12],r[14]=n[13],r[15]=n[14],r[16]=n[15],r[17]=t.isClosed?1:0,r[18]=o[0],r[19]=o[1],r[20]=o[2],r[21]=o[3];for(let t=0;t<e.length;t++){const n=2*t+22,o=e[t];r[n]=o[0],r[n+1]=o[1]}return r}},{}],78:[function(t,e,n){const o=t("./applyTransforms");e.exports=t=>o(t).points},{"./applyTransforms":66}],79:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./toPoints");e.exports=t=>{const e=r(t);let n="path ("+e.length+" points, "+t.isClosed+"):\n[\n";return e.forEach((t=>{n+="  "+o.toString(t)+",\n"})),n+="]\n",n}},{"../../maths/vec2":202,"./toPoints":78}],80:[function(t,e,n){const o=t("../../maths/mat4");e.exports=(t,e)=>{const n=o.multiply(o.create(),t,e.transforms);return Object.assign({},e,{transforms:n})}},{"../../maths/mat4":155}],81:[function(t,e,n){const o=t("../../maths/vec2"),r=t("./isA");e.exports=t=>{if(!r(t))throw new Error("invalid path2 structure");if(t.points.length>1)for(let e=0;e<t.points.length;e++)if(o.equals(t.points[e],t.points[(e+1)%t.points.length]))throw new Error(`path2 duplicate points ${t.points[e]}`);if(t.points.forEach((t=>{if(!t.every(Number.isFinite))throw new Error(`path2 invalid point ${t}`)})),!t.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${t.transforms}`)}},{"../../maths/vec2":202,"./isA":75}],82:[function(t,e,n){const o=t("./measureArea"),r=t("./flip");e.exports=(t,e)=>{if(0===t.length)return 0;const n=e.vertices;return n.length<3?0:(o(e)<0&&(e=r(e)),t.reduce(((t,e)=>t+((t,e)=>{const n=e.length,o=t[0],r=t[1];let s=e[n-1],i=e[0],a=s[1]>r,c=0,l=0;for(let t=n+1;--t;){const t=i[1]>r;if(a!==t){const t=s[0]>o,e=i[0]>o;(t&&e||i[0]-(i[1]-r)*(s[0]-i[0])/(s[1]-i[1])>=o)&&(c=!c)}a=t,s=i,i=e[++l]}return c})(e,n)),0)===t.length?1:0)}},{"./flip":84,"./measureArea":86}],83:[function(t,e,n){e.exports=t=>((void 0===t||t.length<3)&&(t=[]),{vertices:t})},{}],84:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=t.vertices.slice().reverse();return o(e)}},{"./create":83}],85:[function(t,e,n){e.exports={arePointsInside:t("./arePointsInside"),create:t("./create"),flip:t("./flip"),measureArea:t("./measureArea")}},{"./arePointsInside":82,"./create":83,"./flip":84,"./measureArea":86}],86:[function(t,e,n){const o=t("../../maths/utils/area");e.exports=t=>o(t.vertices)},{"../../maths/utils/area":179}],87:[function(t,e,n){const o=t("./create"),r=t("../../maths/vec3");e.exports=(...t)=>{let e,n;return 1===t.length?(e=o(),n=t[0]):(e=t[0],n=t[1]),e.vertices=n.vertices.map((t=>r.clone(t))),e}},{"../../maths/vec3":233,"./create":88}],88:[function(t,e,n){e.exports=t=>((void 0===t||t.length<3)&&(t=[]),{vertices:t})},{}],89:[function(t,e,n){const o=t("../../maths/vec3"),r=t("./create");e.exports=t=>{const e=t.map((t=>o.clone(t)));return r(e)}},{"../../maths/vec3":233,"./create":88}],90:[function(t,e,n){const o=t("./create");e.exports=(t,e)=>{const n=o(t);return n.plane=e,n}},{"./create":88}],91:[function(t,e,n){e.exports={clone:t("./clone"),create:t("./create"),fromPoints:t("./fromPoints"),fromPointsAndPlane:t("./fromPointsAndPlane"),invert:t("./invert"),isA:t("./isA"),isConvex:t("./isConvex"),measureArea:t("./measureArea"),measureBoundingBox:t("./measureBoundingBox"),measureBoundingSphere:t("./measureBoundingSphere"),measureSignedVolume:t("./measureSignedVolume"),plane:t("./plane"),toPoints:t("./toPoints"),toString:t("./toString"),transform:t("./transform"),validate:t("./validate")}},{"./clone":87,"./create":88,"./fromPoints":89,"./fromPointsAndPlane":90,"./invert":92,"./isA":93,"./isConvex":94,"./measureArea":95,"./measureBoundingBox":96,"./measureBoundingSphere":97,"./measureSignedVolume":98,"./plane":99,"./toPoints":100,"./toString":101,"./transform":102,"./validate":103}],92:[function(t,e,n){const o=t("../../maths/plane"),r=t("./create");e.exports=t=>{const e=t.vertices.slice().reverse(),n=r(e);return t.plane&&(n.plane=o.flip(o.create(),t.plane)),n}},{"../../maths/plane":174,"./create":88}],93:[function(t,e,n){e.exports=t=>!!(t&&"object"==typeof t&&"vertices"in t&&Array.isArray(t.vertices))},{}],94:[function(t,e,n){const o=t("../../maths/plane"),r=t("../../maths/vec3"),s=(t,e,n,o)=>{const s=r.cross(r.create(),r.subtract(r.create(),e,t),r.subtract(r.create(),n,e));return r.dot(s,o)>=0};e.exports=t=>(t=>{const e=t.length;if(e>2){const n=o.fromPoints(o.create(),...t);let r=t[e-2],i=t[e-1];for(let o=0;o<e;o++){const e=t[o];if(!s(r,i,e,n))return!1;r=i,i=e}}return!0})(t.vertices)},{"../../maths/plane":174,"../../maths/vec3":233}],95:[function(t,e,n){const o=t("./plane");e.exports=t=>{const e=t.vertices.length;if(e<3)return 0;const n=t.vertices,r=o(t),s=Math.abs(r[0]),i=Math.abs(r[1]),a=Math.abs(r[2]);if(s+i+a===0)return 0;let c=3;s>i&&s>a?c=1:i>a&&(c=2);let l=0,u=0,h=1,p=2;switch(c){case 1:for(h=1;h<e;h++)u=h-1,p=(h+1)%e,l+=n[h][1]*(n[p][2]-n[u][2]);l+=n[0][1]*(n[1][2]-n[e-1][2]),l/=2*r[0];break;case 2:for(h=1;h<e;h++)u=h-1,p=(h+1)%e,l+=n[h][2]*(n[p][0]-n[u][0]);l+=n[0][2]*(n[1][0]-n[e-1][0]),l/=2*r[1];break;default:for(h=1;h<e;h++)u=h-1,p=(h+1)%e,l+=n[h][0]*(n[p][1]-n[u][1]);l+=n[0][0]*(n[1][1]-n[e-1][1]),l/=2*r[2]}return l}},{"./plane":99}],96:[function(t,e,n){const o=t("../../maths/vec3");e.exports=t=>{const e=t.vertices,n=e.length,r=0===n?o.create():o.clone(e[0]),s=o.clone(r);for(let t=1;t<n;t++)o.min(r,r,e[t]),o.max(s,s,e[t]);return[r,s]}},{"../../maths/vec3":233}],97:[function(t,e,n){const o=t("../../maths/vec4"),r=new WeakMap;e.exports=t=>{const e=r.get(t);if(e)return e;const n=t.vertices,s=o.create();if(0===n.length)return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s;let i=n[0],a=i,c=i,l=i,u=i,h=i;n.forEach((t=>{i[0]>t[0]&&(i=t),a[1]>t[1]&&(a=t),c[2]>t[2]&&(c=t),l[0]<t[0]&&(l=t),u[1]<t[1]&&(u=t),h[2]<t[2]&&(h=t)})),s[0]=.5*(i[0]+l[0]),s[1]=.5*(a[1]+u[1]),s[2]=.5*(c[2]+h[2]);const p=s[0]-l[0],m=s[1]-u[1],d=s[2]-h[2];return s[3]=Math.sqrt(p*p+m*m+d*d),r.set(t,s),s}},{"../../maths/vec4":259}],98:[function(t,e,n){const o=t("../../maths/vec3");e.exports=t=>{let e=0;const n=t.vertices,r=o.create();for(let t=0;t<n.length-2;t++)o.cross(r,n[t+1],n[t+2]),e+=o.dot(n[0],r);return e/=6,e}},{"../../maths/vec3":233}],99:[function(t,e,n){const o=t("../../maths/plane/");e.exports=t=>(t.plane||(t.plane=o.fromPoints(o.create(),...t.vertices)),t.plane)},{"../../maths/plane/":174}],100:[function(t,e,n){e.exports=t=>t.vertices},{}],101:[function(t,e,n){const o=t("../../maths/vec3/");e.exports=t=>{let e="poly3: vertices: [";return t.vertices.forEach((t=>{e+=`${o.toString(t)}, `})),e+="]",e}},{"../../maths/vec3/":233}],102:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec3"),s=t("./create");e.exports=(t,e)=>{const n=e.vertices.map((e=>r.transform(r.create(),e,t)));return o.isMirroring(t)&&n.reverse(),s(n)}},{"../../maths/mat4":155,"../../maths/vec3":233,"./create":88}],103:[function(t,e,n){const o=t("../../maths/plane/signedDistanceToPoint"),{NEPS:r}=t("../../maths/constants"),s=t("../../maths/vec3"),i=t("./isA"),a=t("./isConvex"),c=t("./measureArea"),l=t("./plane");e.exports=t=>{if(!i(t))throw new Error("invalid poly3 structure");if(t.vertices.length<3)throw new Error(`poly3 not enough vertices ${t.vertices.length}`);if(c(t)<=0)throw new Error("poly3 area must be greater than zero");for(let e=0;e<t.vertices.length;e++)if(s.equals(t.vertices[e],t.vertices[(e+1)%t.vertices.length]))throw new Error(`poly3 duplicate vertex ${t.vertices[e]}`);if(!a(t))throw new Error("poly3 must be convex");if(t.vertices.forEach((t=>{if(!t.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${t}`)})),t.vertices.length>3){const e=l(t);t.vertices.forEach((t=>{const n=Math.abs(o(e,t));if(n>r)throw new Error(`poly3 must be coplanar: vertex ${t} distance ${n}`)}))}}},{"../../maths/constants":106,"../../maths/plane/signedDistanceToPoint":176,"../../maths/vec3":233,"./isA":93,"./isConvex":94,"./measureArea":95,"./plane":99}],104:[function(t,e,n){e.exports={colors:t("./colors"),curves:t("./curves"),geometries:t("./geometries"),maths:t("./maths"),measurements:t("./measurements"),primitives:t("./primitives"),text:t("./text"),utils:t("./utils"),booleans:t("./operations/booleans"),expansions:t("./operations/expansions"),extrusions:t("./operations/extrusions"),hulls:t("./operations/hulls"),modifiers:t("./operations/modifiers"),transforms:t("./operations/transforms")}},{"./colors":21,"./curves":32,"./geometries":62,"./maths":107,"./measurements":263,"./operations/booleans":277,"./operations/expansions":306,"./operations/extrusions":329,"./operations/hulls":351,"./operations/modifiers":362,"./operations/transforms":372,"./primitives":388,"./text":402,"./utils":410}],105:[function(t,e,n){const o=t("./mat4"),r=t("./vec2"),s=t("./vec3"),i=function(t,e){arguments.length<2&&(e=s.orthogonal(s.create(),t)),this.v=s.normalize(s.create(),s.cross(s.create(),t,e)),this.u=s.cross(s.create(),this.v,t),this.plane=t,this.planeorigin=s.scale(s.create(),t,t[3])};i.GetCartesian=function(t,e){const n=t+"/"+e;let o,r;if("X/Y"===n)o=[0,0,1],r=[1,0,0];else if("Y/-X"===n)o=[0,0,1],r=[0,1,0];else if("-X/-Y"===n)o=[0,0,1],r=[-1,0,0];else if("-Y/X"===n)o=[0,0,1],r=[0,-1,0];else if("-X/Y"===n)o=[0,0,-1],r=[-1,0,0];else if("-Y/-X"===n)o=[0,0,-1],r=[0,-1,0];else if("X/-Y"===n)o=[0,0,-1],r=[1,0,0];else if("Y/X"===n)o=[0,0,-1],r=[0,1,0];else if("X/Z"===n)o=[0,-1,0],r=[1,0,0];else if("Z/-X"===n)o=[0,-1,0],r=[0,0,1];else if("-X/-Z"===n)o=[0,-1,0],r=[-1,0,0];else if("-Z/X"===n)o=[0,-1,0],r=[0,0,-1];else if("-X/Z"===n)o=[0,1,0],r=[-1,0,0];else if("-Z/-X"===n)o=[0,1,0],r=[0,0,-1];else if("X/-Z"===n)o=[0,1,0],r=[1,0,0];else if("Z/X"===n)o=[0,1,0],r=[0,0,1];else if("Y/Z"===n)o=[1,0,0],r=[0,1,0];else if("Z/-Y"===n)o=[1,0,0],r=[0,0,1];else if("-Y/-Z"===n)o=[1,0,0],r=[0,-1,0];else if("-Z/Y"===n)o=[1,0,0],r=[0,0,-1];else if("-Y/Z"===n)o=[-1,0,0],r=[0,-1,0];else if("-Z/-Y"===n)o=[-1,0,0],r=[0,0,-1];else if("Y/-Z"===n)o=[-1,0,0],r=[0,1,0];else{if("Z/Y"!==n)throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");o=[-1,0,0],r=[0,0,1]}return new i(new Plane(new Vector3D(o),0),new Vector3D(r))},i.Z0Plane=function(){const t=new Plane(new Vector3D([0,0,1]),0);return new i(t,new Vector3D([1,0,0]))},i.prototype={getProjectionMatrix:function(){return o.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const t=s.scale(s.create(),this.plane,this.plane[3]);return o.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,t[0],t[1],t[2],1)},to2D:function(t){return r.fromValues(s.dot(t,this.u),s.dot(t,this.v))},to3D:function(t){const e=s.scale(s.create(),this.u,t[0]),n=s.scale(s.create(),this.v,t[1]),o=s.add(e,e,this.planeorigin);return s.add(n,n,o)},line3Dto2D:function(t){const e=t.point,n=t.direction.plus(e),o=this.to2D(e),r=this.to2D(n);return Line2D.fromPoints(o,r)},line2Dto3D:function(t){const e=t.origin(),n=t.direction().plus(e),o=this.to3D(e),r=this.to3D(n);return Line3D.fromPoints(o,r)},transform:function(t){const e=this.plane.transform(t),n=this.u.transform(t),o=new Vector3D(0,0,0).transform(t),r=n.minus(o);return new i(e,r)}},e.exports=i},{"./mat4":155,"./vec2":202,"./vec3":233}],106:[function(t,e,n){const o=2*Math.PI;e.exports={EPS:1e-5,NEPS:1e-13,TAU:o,spatialResolution:1e5}},{}],107:[function(t,e,n){e.exports={constants:t("./constants"),line2:t("./line2"),line3:t("./line3"),mat4:t("./mat4"),plane:t("./plane"),utils:t("./utils"),vec2:t("./vec2"),vec3:t("./vec3"),vec4:t("./vec4")}},{"./constants":106,"./line2":117,"./line3":134,"./mat4":155,"./plane":174,"./utils":180,"./vec2":202,"./vec3":233,"./vec4":259}],108:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=o();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{"./create":111}],109:[function(t,e,n){const o=t("../vec2"),r=t("./direction"),s=t("./origin");e.exports=(t,e)=>{const n=s(t),i=r(t),a=o.subtract(o.create(),e,n),c=o.dot(a,i);return o.scale(a,i,c),o.add(a,a,n),a}},{"../vec2":202,"./direction":112,"./origin":119}],110:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t)},{}],111:[function(t,e,n){e.exports=()=>[0,1,0]},{}],112:[function(t,e,n){const o=t("../vec2");e.exports=t=>{const e=o.normal(o.create(),t);return o.negate(e,e),e}},{"../vec2":202}],113:[function(t,e,n){const o=t("../vec2");e.exports=(t,e)=>{let n=o.dot(e,t);return n=Math.abs(n-t[2]),n}},{"../vec2":202}],114:[function(t,e,n){e.exports=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},{}],115:[function(t,e,n){const o=t("../vec2");e.exports=(t,e,n)=>{const r=o.subtract(o.create(),n,e);o.normal(r,r),o.normalize(r,r);const s=o.dot(e,r);return t[0]=r[0],t[1]=r[1],t[2]=s,t}},{"../vec2":202}],116:[function(t,e,n){const o=t("./create");e.exports=(t,e,n)=>{const r=o();return r[0]=t,r[1]=e,r[2]=n,r}},{"./create":111}],117:[function(t,e,n){e.exports={clone:t("./clone"),closestPoint:t("./closestPoint"),copy:t("./copy"),create:t("./create"),direction:t("./direction"),distanceToPoint:t("./distanceToPoint"),equals:t("./equals"),fromPoints:t("./fromPoints"),fromValues:t("./fromValues"),intersectPointOfLines:t("./intersectPointOfLines"),origin:t("./origin"),reverse:t("./reverse"),toString:t("./toString"),transform:t("./transform"),xAtY:t("./xAtY")}},{"./clone":108,"./closestPoint":109,"./copy":110,"./create":111,"./direction":112,"./distanceToPoint":113,"./equals":114,"./fromPoints":115,"./fromValues":116,"./intersectPointOfLines":118,"./origin":119,"./reverse":120,"./toString":121,"./transform":122,"./xAtY":123}],118:[function(t,e,n){const o=t("../vec2"),{solve2Linear:r}=t("../utils");e.exports=(t,e)=>{const n=r(t[0],t[1],e[0],e[1],t[2],e[2]);return o.clone(n)}},{"../utils":180,"../vec2":202}],119:[function(t,e,n){const o=t("../vec2");e.exports=t=>o.scale(o.create(),t,t[2])},{"../vec2":202}],120:[function(t,e,n){const o=t("../vec2"),r=t("./copy"),s=t("./fromValues");e.exports=(t,e)=>{const n=o.negate(o.create(),e),i=-e[2];return r(t,s(n[0],n[1],i))}},{"../vec2":202,"./copy":110,"./fromValues":116}],121:[function(t,e,n){e.exports=t=>`line2: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)})`},{}],122:[function(t,e,n){const o=t("../vec2"),r=t("./fromPoints"),s=t("./origin"),i=t("./direction");e.exports=(t,e,n)=>{const a=s(e),c=i(e);return o.transform(a,a,n),o.transform(c,c,n),r(t,a,c)}},{"../vec2":202,"./direction":112,"./fromPoints":115,"./origin":119}],123:[function(t,e,n){const o=t("./origin");e.exports=(t,e)=>{let n=(t[2]-t[1]*e)/t[0];return Number.isNaN(n)&&(n=o(t)[0]),n}},{"./origin":119}],124:[function(t,e,n){const o=t("../vec3"),r=t("./create");e.exports=t=>{const e=r();return o.copy(e[0],t[0]),o.copy(e[1],t[1]),e}},{"../vec3":233,"./create":127}],125:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>{const n=t[0],r=t[1],s=o.dot(o.subtract(o.create(),e,n),r)/o.dot(r,r),i=o.scale(o.create(),r,s);return o.add(i,i,n),i}},{"../vec3":233}],126:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>(o.copy(t[0],e[0]),o.copy(t[1],e[1]),t)},{"../vec3":233}],127:[function(t,e,n){const o=t("../vec3");e.exports=()=>[o.fromValues(0,0,0),o.fromValues(0,0,1)]},{"../vec3":233}],128:[function(t,e,n){e.exports=t=>t[1]},{}],129:[function(t,e,n){const o=t("../vec3"),r=t("./closestPoint");e.exports=(t,e)=>{const n=r(t,e),s=o.subtract(o.create(),e,n);return o.length(s)}},{"../vec3":233,"./closestPoint":125}],130:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>!!o.equals(t[1],e[1])&&!!o.equals(t[0],e[0])},{"../vec3":233}],131:[function(t,e,n){const o=t("../vec3"),{solve2Linear:r}=t("../utils"),{EPS:s}=t("../constants"),i=t("./fromPointAndDirection");e.exports=(t,e,n)=>{let a=o.cross(o.create(),e,n),c=o.length(a);if(c<s)throw new Error("parallel planes do not intersect");c=1/c,a=o.scale(a,a,c);const l=Math.abs(a[0]),u=Math.abs(a[1]),h=Math.abs(a[2]);let p,m;return l>=u&&l>=h?(m=r(e[1],e[2],n[1],n[2],e[3],n[3]),p=o.fromValues(0,m[0],m[1])):u>=l&&u>=h?(m=r(e[0],e[2],n[0],n[2],e[3],n[3]),p=o.fromValues(m[0],0,m[1])):(m=r(e[0],e[1],n[0],n[1],e[3],n[3]),p=o.fromValues(m[0],m[1],0)),i(t,p,a)}},{"../constants":106,"../utils":180,"../vec3":233,"./fromPointAndDirection":132}],132:[function(t,e,n){const o=t("../vec3");e.exports=(t,e,n)=>{const r=o.normalize(o.create(),n);return o.copy(t[0],e),o.copy(t[1],r),t}},{"../vec3":233}],133:[function(t,e,n){const o=t("../vec3"),r=t("./fromPointAndDirection");e.exports=(t,e,n)=>{const s=o.subtract(o.create(),n,e);return r(t,e,s)}},{"../vec3":233,"./fromPointAndDirection":132}],134:[function(t,e,n){e.exports={clone:t("./clone"),closestPoint:t("./closestPoint"),copy:t("./copy"),create:t("./create"),direction:t("./direction"),distanceToPoint:t("./distanceToPoint"),equals:t("./equals"),fromPlanes:t("./fromPlanes"),fromPointAndDirection:t("./fromPointAndDirection"),fromPoints:t("./fromPoints"),intersectPointOfLineAndPlane:t("./intersectPointOfLineAndPlane"),origin:t("./origin"),reverse:t("./reverse"),toString:t("./toString"),transform:t("./transform")}},{"./clone":124,"./closestPoint":125,"./copy":126,"./create":127,"./direction":128,"./distanceToPoint":129,"./equals":130,"./fromPlanes":131,"./fromPointAndDirection":132,"./fromPoints":133,"./intersectPointOfLineAndPlane":135,"./origin":136,"./reverse":137,"./toString":138,"./transform":139}],135:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>{const n=e,r=e[3],s=t[0],i=t[1],a=(r-o.dot(n,s))/o.dot(n,i);return o.add(o.create(),s,o.scale(o.create(),i,a))}},{"../vec3":233}],136:[function(t,e,n){e.exports=t=>t[0]},{}],137:[function(t,e,n){const o=t("../vec3"),r=t("./fromPointAndDirection");e.exports=(t,e)=>{const n=o.clone(e[0]),s=o.negate(o.create(),e[1]);return r(t,n,s)}},{"../vec3":233,"./fromPointAndDirection":132}],138:[function(t,e,n){e.exports=t=>{const e=t[0],n=t[1];return`line3: point: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}) direction: (${n[0].toFixed(7)}, ${n[1].toFixed(7)}, ${n[2].toFixed(7)})`}},{}],139:[function(t,e,n){const o=t("../vec3"),r=t("./fromPointAndDirection");e.exports=(t,e,n)=>{const s=e[0],i=e[1],a=o.add(o.create(),s,i),c=o.transform(o.create(),s,n),l=o.transform(a,a,n),u=o.subtract(l,l,c);return r(t,c,u)}},{"../vec3":233,"./fromPointAndDirection":132}],140:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t)},{}],141:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=o();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{"./create":143}],142:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t)},{}],143:[function(t,e,n){e.exports=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},{}],144:[function(t,e,n){e.exports=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},{}],145:[function(t,e,n){const{EPS:o}=t("../constants"),{sin:r,cos:s}=t("../utils/trigonometry"),i=t("./identity");e.exports=(t,e,n)=>{let[a,c,l]=n;const u=a*a+c*c+l*l;if(Math.abs(u)<o)return i(t);const h=1/Math.sqrt(u);a*=h,c*=h,l*=h;const p=r(e),m=s(e),d=1-m;return t[0]=a*a*d+m,t[1]=c*a*d+l*p,t[2]=l*a*d-c*p,t[3]=0,t[4]=a*c*d-l*p,t[5]=c*c*d+m,t[6]=l*c*d+a*p,t[7]=0,t[8]=a*l*d+c*p,t[9]=c*l*d-a*p,t[10]=l*l*d+m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../constants":106,"../utils/trigonometry":184,"./identity":154}],146:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},{}],147:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e,n,s)=>{const i=o(e),a=r(e),c=o(n),l=r(n),u=o(s),h=r(s);return t[0]=l*a,t[1]=l*i,t[2]=-c,t[3]=0,t[4]=u*c*a-h*i,t[5]=h*a+u*c*i,t[6]=u*l,t[7]=0,t[8]=u*i+h*c*a,t[9]=h*c*i-u*a,t[10]=h*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../utils/trigonometry":184}],148:[function(t,e,n){e.exports=(t,e)=>(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t)},{}],149:[function(t,e,n){const o=t("./create");e.exports=(t,e,n,r,s,i,a,c,l,u,h,p,m,d,f,g)=>{const v=o();return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=s,v[5]=i,v[6]=a,v[7]=c,v[8]=l,v[9]=u,v[10]=h,v[11]=p,v[12]=m,v[13]=d,v[14]=f,v[15]=g,v}},{"./create":143}],150:[function(t,e,n){const o=t("../vec3"),r=t("./fromRotation");e.exports=(t,e,n)=>{const s=o.normalize(o.create(),e),i=o.normalize(o.create(),n),a=o.cross(o.create(),i,s),c=o.dot(i,s);if(-1===c)return r(t,Math.PI,o.orthogonal(a,s));const l=1/(1+c);return t[0]=a[0]*a[0]*l+c,t[1]=a[1]*a[0]*l-a[2],t[2]=a[2]*a[0]*l+a[1],t[3]=0,t[4]=a[0]*a[1]*l+a[2],t[5]=a[1]*a[1]*l+c,t[6]=a[2]*a[1]*l-a[0],t[7]=0,t[8]=a[0]*a[2]*l-a[1],t[9]=a[1]*a[2]*l+a[0],t[10]=a[2]*a[2]*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../vec3":233,"./fromRotation":145}],151:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e)=>{const n=o(e),s=r(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../utils/trigonometry":184}],152:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e)=>{const n=o(e),s=r(e);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../utils/trigonometry":184}],153:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e)=>{const n=o(e),s=r(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{"../utils/trigonometry":184}],154:[function(t,e,n){e.exports=t=>(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},{}],155:[function(t,e,n){e.exports={add:t("./add"),clone:t("./clone"),copy:t("./copy"),create:t("./create"),invert:t("./invert"),equals:t("./equals"),fromRotation:t("./fromRotation"),fromScaling:t("./fromScaling"),fromTaitBryanRotation:t("./fromTaitBryanRotation"),fromTranslation:t("./fromTranslation"),fromValues:t("./fromValues"),fromVectorRotation:t("./fromVectorRotation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),identity:t("./identity"),isIdentity:t("./isIdentity"),isOnlyTransformScale:t("./isOnlyTransformScale"),isMirroring:t("./isMirroring"),mirrorByPlane:t("./mirrorByPlane"),multiply:t("./multiply"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),scale:t("./scale"),subtract:t("./subtract"),toString:t("./toString"),translate:t("./translate")}},{"./add":140,"./clone":141,"./copy":142,"./create":143,"./equals":144,"./fromRotation":145,"./fromScaling":146,"./fromTaitBryanRotation":147,"./fromTranslation":148,"./fromValues":149,"./fromVectorRotation":150,"./fromXRotation":151,"./fromYRotation":152,"./fromZRotation":153,"./identity":154,"./invert":156,"./isIdentity":157,"./isMirroring":158,"./isOnlyTransformScale":159,"./mirrorByPlane":160,"./multiply":161,"./rotate":162,"./rotateX":163,"./rotateY":164,"./rotateZ":165,"./scale":166,"./subtract":167,"./toString":168,"./translate":169}],156:[function(t,e,n){e.exports=(t,e)=>{const n=e[0],o=e[1],r=e[2],s=e[3],i=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],p=e[10],m=e[11],d=e[12],f=e[13],g=e[14],v=e[15],y=n*a-o*i,b=n*c-r*i,x=n*l-s*i,A=o*c-r*a,E=o*l-s*a,w=r*l-s*c,D=u*f-h*d,P=u*g-p*d,S=u*v-m*d,T=h*g-p*f,C=h*v-m*f,M=p*v-m*g;let R=y*M-b*C+x*T+A*S-E*P+w*D;return R?(R=1/R,t[0]=(a*M-c*C+l*T)*R,t[1]=(r*C-o*M-s*T)*R,t[2]=(f*w-g*E+v*A)*R,t[3]=(p*E-h*w-m*A)*R,t[4]=(c*S-i*M-l*P)*R,t[5]=(n*M-r*S+s*P)*R,t[6]=(g*x-d*w-v*b)*R,t[7]=(u*w-p*x+m*b)*R,t[8]=(i*C-a*S+l*D)*R,t[9]=(o*S-n*C-s*D)*R,t[10]=(d*E-f*x+v*y)*R,t[11]=(h*x-u*E-m*y)*R,t[12]=(a*P-i*T-c*D)*R,t[13]=(n*T-o*P+r*D)*R,t[14]=(f*b-d*A-g*y)*R,t[15]=(u*A-h*b+p*y)*R,t):null}},{}],157:[function(t,e,n){e.exports=t=>1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},{}],158:[function(t,e,n){e.exports=t=>{const e=t[4]*t[9]-t[8]*t[5],n=t[8]*t[1]-t[0]*t[9],o=t[0]*t[5]-t[4]*t[1];return e*t[2]+n*t[6]+o*t[10]<0}},{}],159:[function(t,e,n){const o=t=>Math.abs(t)<Number.EPSILON;e.exports=t=>o(t[1])&&o(t[2])&&o(t[3])&&o(t[4])&&o(t[6])&&o(t[7])&&o(t[8])&&o(t[9])&&o(t[11])&&1===t[15]},{}],160:[function(t,e,n){e.exports=(t,e)=>{const[n,o,r,s]=e;return t[0]=1-2*n*n,t[1]=-2*o*n,t[2]=-2*r*n,t[3]=0,t[4]=-2*n*o,t[5]=1-2*o*o,t[6]=-2*r*o,t[7]=0,t[8]=-2*n*r,t[9]=-2*o*r,t[10]=1-2*r*r,t[11]=0,t[12]=2*n*s,t[13]=2*o*s,t[14]=2*r*s,t[15]=1,t}},{}],161:[function(t,e,n){e.exports=(t,e,n)=>{const o=e[0],r=e[1],s=e[2],i=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],d=e[11],f=e[12],g=e[13],v=e[14],y=e[15];let b=n[0],x=n[1],A=n[2],E=n[3];return t[0]=b*o+x*a+A*h+E*f,t[1]=b*r+x*c+A*p+E*g,t[2]=b*s+x*l+A*m+E*v,t[3]=b*i+x*u+A*d+E*y,b=n[4],x=n[5],A=n[6],E=n[7],t[4]=b*o+x*a+A*h+E*f,t[5]=b*r+x*c+A*p+E*g,t[6]=b*s+x*l+A*m+E*v,t[7]=b*i+x*u+A*d+E*y,b=n[8],x=n[9],A=n[10],E=n[11],t[8]=b*o+x*a+A*h+E*f,t[9]=b*r+x*c+A*p+E*g,t[10]=b*s+x*l+A*m+E*v,t[11]=b*i+x*u+A*d+E*y,b=n[12],x=n[13],A=n[14],E=n[15],t[12]=b*o+x*a+A*h+E*f,t[13]=b*r+x*c+A*p+E*g,t[14]=b*s+x*l+A*m+E*v,t[15]=b*i+x*u+A*d+E*y,t}},{}],162:[function(t,e,n){const{EPS:o}=t("../constants"),{sin:r,cos:s}=t("../utils/trigonometry"),i=t("./copy");e.exports=(t,e,n,a)=>{let[c,l,u]=a;const h=c*c+l*l+u*u;if(Math.abs(h)<o)return i(t,e);const p=1/Math.sqrt(h);c*=p,l*=p,u*=p;const m=r(n),d=s(n),f=1-d,g=e[0],v=e[1],y=e[2],b=e[3],x=e[4],A=e[5],E=e[6],w=e[7],D=e[8],P=e[9],S=e[10],T=e[11],C=c*c*f+d,M=l*c*f+u*m,R=u*c*f-l*m,O=c*l*f-u*m,I=l*l*f+d,L=u*l*f+c*m,B=c*u*f+l*m,N=l*u*f-c*m,k=u*u*f+d;return t[0]=g*C+x*M+D*R,t[1]=v*C+A*M+P*R,t[2]=y*C+E*M+S*R,t[3]=b*C+w*M+T*R,t[4]=g*O+x*I+D*L,t[5]=v*O+A*I+P*L,t[6]=y*O+E*I+S*L,t[7]=b*O+w*I+T*L,t[8]=g*B+x*N+D*k,t[9]=v*B+A*N+P*k,t[10]=y*B+E*N+S*k,t[11]=b*B+w*N+T*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}},{"../constants":106,"../utils/trigonometry":184,"./copy":142}],163:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e,n)=>{const s=o(n),i=r(n),a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+h*s,t[5]=c*i+p*s,t[6]=l*i+m*s,t[7]=u*i+d*s,t[8]=h*i-a*s,t[9]=p*i-c*s,t[10]=m*i-l*s,t[11]=d*i-u*s,t}},{"../utils/trigonometry":184}],164:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e,n)=>{const s=o(n),i=r(n),a=e[0],c=e[1],l=e[2],u=e[3],h=e[8],p=e[9],m=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-h*s,t[1]=c*i-p*s,t[2]=l*i-m*s,t[3]=u*i-d*s,t[8]=a*s+h*i,t[9]=c*s+p*i,t[10]=l*s+m*i,t[11]=u*s+d*i,t}},{"../utils/trigonometry":184}],165:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e,n)=>{const s=o(n),i=r(n),a=e[0],c=e[1],l=e[2],u=e[3],h=e[4],p=e[5],m=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+h*s,t[1]=c*i+p*s,t[2]=l*i+m*s,t[3]=u*i+d*s,t[4]=h*i-a*s,t[5]=p*i-c*s,t[6]=m*i-l*s,t[7]=d*i-u*s,t}},{"../utils/trigonometry":184}],166:[function(t,e,n){e.exports=(t,e,n)=>{const o=n[0],r=n[1],s=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],167:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t)},{}],168:[function(t,e,n){e.exports=t=>t.map((t=>t.toFixed(7))).toString()},{}],169:[function(t,e,n){e.exports=(t,e,n)=>{const o=n[0],r=n[1],s=n[2];let i,a,c,l,u,h,p,m,d,f,g,v;return e===t?(t[12]=e[0]*o+e[4]*r+e[8]*s+e[12],t[13]=e[1]*o+e[5]*r+e[9]*s+e[13],t[14]=e[2]*o+e[6]*r+e[10]*s+e[14],t[15]=e[3]*o+e[7]*r+e[11]*s+e[15]):(i=e[0],a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],p=e[6],m=e[7],d=e[8],f=e[9],g=e[10],v=e[11],t[0]=i,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=h,t[6]=p,t[7]=m,t[8]=d,t[9]=f,t[10]=g,t[11]=v,t[12]=i*o+u*r+d*s+e[12],t[13]=a*o+h*r+f*s+e[13],t[14]=c*o+p*r+g*s+e[14],t[15]=l*o+m*r+v*s+e[15]),t}},{}],170:[function(t,e,n){e.exports=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t)},{}],171:[function(t,e,n){const o=t("../vec3");e.exports=(t,e,n)=>{const r=o.normalize(o.create(),e),s=o.dot(n,r);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=s,t}},{"../vec3":233}],172:[function(t,e,n){const o=t("../vec3");e.exports=(t,...e)=>{const n=e.length,r=o.create(),s=o.create(),i=t=>{const i=e[t],a=e[(t+1)%n],c=e[(t+2)%n];return o.subtract(r,a,i),o.subtract(s,c,i),o.cross(r,r,s),o.normalize(r,r),r};return t[0]=0,t[1]=0,t[2]=0,3===n?o.copy(t,i(0)):(e.forEach(((e,n)=>{o.add(t,t,i(n))})),o.normalize(t,t)),t[3]=o.dot(t,e[0]),t}},{"../vec3":233}],173:[function(t,e,n){const{EPS:o}=t("../constants"),r=t("../vec3");e.exports=(t,e,n,s)=>{let i=r.subtract(r.create(),n,e),a=r.subtract(r.create(),s,e);r.length(i)<o&&(i=r.orthogonal(i,a)),r.length(a)<o&&(a=r.orthogonal(a,i));let c=r.cross(r.create(),i,a);r.length(c)<o&&(a=r.orthogonal(a,i),c=r.cross(c,i,a)),c=r.normalize(c,c);const l=r.dot(c,e);return t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=l,t}},{"../constants":106,"../vec3":233}],174:[function(t,e,n){e.exports={clone:t("../vec4/clone"),copy:t("../vec4/copy"),create:t("../vec4/create"),equals:t("../vec4/equals"),flip:t("./flip"),fromNormalAndPoint:t("./fromNormalAndPoint"),fromValues:t("../vec4/fromValues"),fromPoints:t("./fromPoints"),fromPointsRandom:t("./fromPointsRandom"),projectionOfPoint:t("./projectionOfPoint"),signedDistanceToPoint:t("./signedDistanceToPoint"),toString:t("../vec4/toString"),transform:t("./transform")}},{"../vec4/clone":252,"../vec4/copy":253,"../vec4/create":254,"../vec4/equals":256,"../vec4/fromValues":258,"../vec4/toString":260,"./flip":170,"./fromNormalAndPoint":171,"./fromPoints":172,"./fromPointsRandom":173,"./projectionOfPoint":175,"./signedDistanceToPoint":176,"./transform":177}],175:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>{const n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3],r=e[0]-n*t[0],s=e[1]-n*t[1],i=e[2]-n*t[2];return o.fromValues(r,s,i)}},{"../vec3":233}],176:[function(t,e,n){const o=t("../vec3");e.exports=(t,e)=>o.dot(t,e)-t[3]},{"../vec3":233}],177:[function(t,e,n){const o=t("../mat4"),r=t("../vec3"),s=t("./fromPoints"),i=t("./flip");e.exports=(t,e,n)=>{const a=o.isMirroring(n),c=r.orthogonal(r.create(),e),l=r.cross(c,e,c),u=r.cross(r.create(),e,l);let h=r.fromScalar(r.create(),e[3]);r.multiply(h,h,e);let p=r.add(r.create(),h,l),m=r.add(r.create(),h,u);return h=r.transform(h,h,n),p=r.transform(p,p,n),m=r.transform(m,m,n),s(t,h,p,m),a&&i(t,t),t}},{"../mat4":155,"../vec3":233,"./flip":170,"./fromPoints":172}],178:[function(t,e,n){const{NEPS:o}=t("../constants");e.exports=(t,e)=>Math.abs(t[0]-e[0])<=o&&Math.abs(t[1]-e[1])<=o&&Math.abs(t[2]-e[2])<=o},{"../constants":106}],179:[function(t,e,n){e.exports=t=>{let e=0;for(let n=0;n<t.length;n++){const o=(n+1)%t.length;e+=t[n][0]*t[o][1],e-=t[o][0]*t[n][1]}return e/2}},{}],180:[function(t,e,n){e.exports={aboutEqualNormals:t("./aboutEqualNormals"),area:t("./area"),cos:t("./trigonometry").cos,interpolateBetween2DPointsForY:t("./interpolateBetween2DPointsForY"),intersect:t("./intersect"),sin:t("./trigonometry").sin,solve2Linear:t("./solve2Linear")}},{"./aboutEqualNormals":178,"./area":179,"./interpolateBetween2DPointsForY":181,"./intersect":182,"./solve2Linear":183,"./trigonometry":184}],181:[function(t,e,n){e.exports=(t,e,n)=>{let o,r=n-t[1],s=e[1]-t[1];return s<0&&(r=-r,s=-s),o=r<=0?0:r>=s?1:s<1e-10?.5:r/s,t[0]+o*(e[0]-t[0])}},{}],182:[function(t,e,n){e.exports=(t,e,n,o)=>{if(t[0]===e[0]&&t[1]===e[1]||n[0]===o[0]&&n[1]===o[1])return;const r=(o[1]-n[1])*(e[0]-t[0])-(o[0]-n[0])*(e[1]-t[1]);if(Math.abs(r)<Number.MIN_VALUE)return;const s=((o[0]-n[0])*(t[1]-n[1])-(o[1]-n[1])*(t[0]-n[0]))/r,i=((e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]))/r;return s<0||s>1||i<0||i>1?void 0:[t[0]+s*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]}},{}],183:[function(t,e,n){e.exports=(t,e,n,o,r,s)=>{const i=1/(t*o-e*n);let a=r*o-e*s,c=-r*n+t*s;return a*=i,c*=i,[a,c]}},{}],184:[function(t,e,n){const{NEPS:o}=t("../constants"),r=t=>Math.abs(t)<o?0:t;e.exports={sin:t=>r(Math.sin(t)),cos:t=>r(Math.cos(t))}},{"../constants":106}],185:[function(t,e,n){e.exports=(t,e)=>(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t)},{}],186:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t)},{}],187:[function(t,e,n){e.exports=t("./angleRadians")},{"./angleRadians":189}],188:[function(t,e,n){const o=t("./angleRadians");e.exports=t=>57.29577951308232*o(t)},{"./angleRadians":189}],189:[function(t,e,n){e.exports=t=>Math.atan2(t[1],t[0])},{}],190:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=o();return e[0]=t[0],e[1]=t[1],e}},{"./create":192}],191:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=e[1],t)},{}],192:[function(t,e,n){e.exports=()=>[0,0]},{}],193:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=0,t[1]=0,t[2]=e[0]*n[1]-e[1]*n[0],t)},{}],194:[function(t,e,n){e.exports=(t,e)=>{const n=e[0]-t[0],o=e[1]-t[1];return Math.sqrt(n*n+o*o)}},{}],195:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]/n[0],t[1]=e[1]/n[1],t)},{}],196:[function(t,e,n){e.exports=(t,e)=>t[0]*e[0]+t[1]*e[1]},{}],197:[function(t,e,n){e.exports=(t,e)=>t[0]===e[0]&&t[1]===e[1]},{}],198:[function(t,e,n){const o=t("./fromAngleRadians");e.exports=(t,e)=>o(t,.017453292519943295*e)},{"./fromAngleRadians":199}],199:[function(t,e,n){const{sin:o,cos:r}=t("../utils/trigonometry");e.exports=(t,e)=>(t[0]=r(e),t[1]=o(e),t)},{"../utils/trigonometry":184}],200:[function(t,e,n){e.exports=(t,e)=>(t[0]=e,t[1]=e,t)},{}],201:[function(t,e,n){const o=t("./create");e.exports=(t,e)=>{const n=o();return n[0]=t,n[1]=e,n}},{"./create":192}],202:[function(t,e,n){e.exports={abs:t("./abs"),add:t("./add"),angle:t("./angle"),angleDegrees:t("./angleDegrees"),angleRadians:t("./angleRadians"),clone:t("./clone"),copy:t("./copy"),create:t("./create"),cross:t("./cross"),distance:t("./distance"),divide:t("./divide"),dot:t("./dot"),equals:t("./equals"),fromAngleDegrees:t("./fromAngleDegrees"),fromAngleRadians:t("./fromAngleRadians"),fromScalar:t("./fromScalar"),fromValues:t("./fromValues"),length:t("./length"),lerp:t("./lerp"),max:t("./max"),min:t("./min"),multiply:t("./multiply"),negate:t("./negate"),normal:t("./normal"),normalize:t("./normalize"),rotate:t("./rotate"),scale:t("./scale"),snap:t("./snap"),squaredDistance:t("./squaredDistance"),squaredLength:t("./squaredLength"),subtract:t("./subtract"),toString:t("./toString"),transform:t("./transform")}},{"./abs":185,"./add":186,"./angle":187,"./angleDegrees":188,"./angleRadians":189,"./clone":190,"./copy":191,"./create":192,"./cross":193,"./distance":194,"./divide":195,"./dot":196,"./equals":197,"./fromAngleDegrees":198,"./fromAngleRadians":199,"./fromScalar":200,"./fromValues":201,"./length":203,"./lerp":204,"./max":205,"./min":206,"./multiply":207,"./negate":208,"./normal":209,"./normalize":210,"./rotate":211,"./scale":212,"./snap":213,"./squaredDistance":214,"./squaredLength":215,"./subtract":216,"./toString":217,"./transform":218}],203:[function(t,e,n){e.exports=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1])},{}],204:[function(t,e,n){e.exports=(t,e,n,o)=>{const r=e[0],s=e[1];return t[0]=r+o*(n[0]-r),t[1]=s+o*(n[1]-s),t}},{}],205:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t)},{}],206:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t)},{}],207:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]*n[0],t[1]=e[1]*n[1],t)},{}],208:[function(t,e,n){e.exports=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t)},{}],209:[function(t,e,n){const{TAU:o}=t("../constants"),r=t("./create"),s=t("./rotate");e.exports=(t,e)=>s(t,e,r(),o/4)},{"../constants":106,"./create":192,"./rotate":211}],210:[function(t,e,n){e.exports=(t,e)=>{const n=e[0],o=e[1];let r=n*n+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=n*r,t[1]=o*r,t}},{}],211:[function(t,e,n){e.exports=(t,e,n,o)=>{const r=e[0]-n[0],s=e[1]-n[1],i=Math.cos(o),a=Math.sin(o);return t[0]=r*i-s*a+n[0],t[1]=r*a+s*i+n[1],t}},{}],212:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]*n,t[1]=e[1]*n,t)},{}],213:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.round(e[0]/n)*n+0,t[1]=Math.round(e[1]/n)*n+0,t)},{}],214:[function(t,e,n){e.exports=(t,e)=>{const n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o}},{}],215:[function(t,e,n){e.exports=t=>{const e=t[0],n=t[1];return e*e+n*n}},{}],216:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t)},{}],217:[function(t,e,n){e.exports=t=>`[${t[0].toFixed(7)}, ${t[1].toFixed(7)}]`},{}],218:[function(t,e,n){e.exports=(t,e,n)=>{const o=e[0],r=e[1];return t[0]=n[0]*o+n[4]*r+n[12],t[1]=n[1]*o+n[5]*r+n[13],t}},{}],219:[function(t,e,n){e.exports=(t,e)=>(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t)},{}],220:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t)},{}],221:[function(t,e,n){const o=t("./dot");e.exports=(t,e)=>{const n=t[0],r=t[1],s=t[2],i=e[0],a=e[1],c=e[2],l=Math.sqrt(n*n+r*r+s*s)*Math.sqrt(i*i+a*a+c*c),u=l&&o(t,e)/l;return Math.acos(Math.min(Math.max(u,-1),1))}},{"./dot":228}],222:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=o();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{"./create":224}],223:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t)},{}],224:[function(t,e,n){e.exports=()=>[0,0,0]},{}],225:[function(t,e,n){e.exports=(t,e,n)=>{const o=e[0],r=e[1],s=e[2],i=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*i-o*c,t[2]=o*a-r*i,t}},{}],226:[function(t,e,n){e.exports=(t,e)=>{const n=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+o*o+r*r)}},{}],227:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t)},{}],228:[function(t,e,n){e.exports=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},{}],229:[function(t,e,n){e.exports=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},{}],230:[function(t,e,n){e.exports=(t,e)=>(t[0]=e,t[1]=e,t[2]=e,t)},{}],231:[function(t,e,n){const o=t("./create");e.exports=(t,e,n)=>{const r=o();return r[0]=t,r[1]=e,r[2]=n,r}},{"./create":224}],232:[function(t,e,n){e.exports=(t,e,n=0)=>(t[0]=e[0],t[1]=e[1],t[2]=n,t)},{}],233:[function(t,e,n){e.exports={abs:t("./abs"),add:t("./add"),angle:t("./angle"),clone:t("./clone"),copy:t("./copy"),create:t("./create"),cross:t("./cross"),distance:t("./distance"),divide:t("./divide"),dot:t("./dot"),equals:t("./equals"),fromScalar:t("./fromScalar"),fromValues:t("./fromValues"),fromVec2:t("./fromVec2"),length:t("./length"),lerp:t("./lerp"),max:t("./max"),min:t("./min"),multiply:t("./multiply"),negate:t("./negate"),normalize:t("./normalize"),orthogonal:t("./orthogonal"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),scale:t("./scale"),snap:t("./snap"),squaredDistance:t("./squaredDistance"),squaredLength:t("./squaredLength"),subtract:t("./subtract"),toString:t("./toString"),transform:t("./transform")}},{"./abs":219,"./add":220,"./angle":221,"./clone":222,"./copy":223,"./create":224,"./cross":225,"./distance":226,"./divide":227,"./dot":228,"./equals":229,"./fromScalar":230,"./fromValues":231,"./fromVec2":232,"./length":234,"./lerp":235,"./max":236,"./min":237,"./multiply":238,"./negate":239,"./normalize":240,"./orthogonal":241,"./rotateX":242,"./rotateY":243,"./rotateZ":244,"./scale":245,"./snap":246,"./squaredDistance":247,"./squaredLength":248,"./subtract":249,"./toString":250,"./transform":251}],234:[function(t,e,n){e.exports=t=>{const e=t[0],n=t[1],o=t[2];return Math.sqrt(e*e+n*n+o*o)}},{}],235:[function(t,e,n){e.exports=(t,e,n,o)=>(t[0]=e[0]+o*(n[0]-e[0]),t[1]=e[1]+o*(n[1]-e[1]),t[2]=e[2]+o*(n[2]-e[2]),t)},{}],236:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t)},{}],237:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t)},{}],238:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t)},{}],239:[function(t,e,n){e.exports=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t)},{}],240:[function(t,e,n){e.exports=(t,e)=>{const n=e[0],o=e[1],r=e[2];let s=n*n+o*o+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=o*s,t[2]=r*s,t}},{}],241:[function(t,e,n){const o=t("./abs"),r=t("./create"),s=t("./cross");e.exports=(t,e)=>{const n=o(r(),e),i=0+(n[0]<n[1]&&n[0]<n[2]),a=0+(n[1]<=n[0]&&n[1]<n[2]),c=0+(n[2]<=n[0]&&n[2]<=n[1]);return s(t,e,[i,a,c])}},{"./abs":219,"./create":224,"./cross":225}],242:[function(t,e,n){e.exports=(t,e,n,o)=>{const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(o)-r[2]*Math.sin(o),s[2]=r[1]*Math.sin(o)+r[2]*Math.cos(o),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}},{}],243:[function(t,e,n){e.exports=(t,e,n,o)=>{const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(o)+r[0]*Math.cos(o),s[1]=r[1],s[2]=r[2]*Math.cos(o)-r[0]*Math.sin(o),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}},{}],244:[function(t,e,n){e.exports=(t,e,n,o)=>{const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],s[0]=r[0]*Math.cos(o)-r[1]*Math.sin(o),s[1]=r[0]*Math.sin(o)+r[1]*Math.cos(o),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=e[2],t}},{}],245:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t)},{}],246:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=Math.round(e[0]/n)*n+0,t[1]=Math.round(e[1]/n)*n+0,t[2]=Math.round(e[2]/n)*n+0,t)},{}],247:[function(t,e,n){e.exports=(t,e)=>{const n=e[0]-t[0],o=e[1]-t[1],r=e[2]-t[2];return n*n+o*o+r*r}},{}],248:[function(t,e,n){e.exports=t=>{const e=t[0],n=t[1],o=t[2];return e*e+n*n+o*o}},{}],249:[function(t,e,n){e.exports=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t)},{}],250:[function(t,e,n){e.exports=t=>`[${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}]`},{}],251:[function(t,e,n){e.exports=(t,e,n)=>{const o=e[0],r=e[1],s=e[2];let i=n[3]*o+n[7]*r+n[11]*s+n[15];return i=i||1,t[0]=(n[0]*o+n[4]*r+n[8]*s+n[12])/i,t[1]=(n[1]*o+n[5]*r+n[9]*s+n[13])/i,t[2]=(n[2]*o+n[6]*r+n[10]*s+n[14])/i,t}},{}],252:[function(t,e,n){const o=t("./create");e.exports=t=>{const e=o();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{"./create":254}],253:[function(t,e,n){e.exports=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t)},{}],254:[function(t,e,n){e.exports=()=>[0,0,0,0]},{}],255:[function(t,e,n){e.exports=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},{}],256:[function(t,e,n){e.exports=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},{}],257:[function(t,e,n){e.exports=(t,e)=>(t[0]=e,t[1]=e,t[2]=e,t[3]=e,t)},{}],258:[function(t,e,n){const o=t("./create");e.exports=(t,e,n,r)=>{const s=o();return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s}},{"./create":254}],259:[function(t,e,n){e.exports={clone:t("./clone"),copy:t("./copy"),create:t("./create"),dot:t("./dot"),equals:t("./equals"),fromScalar:t("./fromScalar"),fromValues:t("./fromValues"),toString:t("./toString"),transform:t("./transform")}},{"./clone":252,"./copy":253,"./create":254,"./dot":255,"./equals":256,"./fromScalar":257,"./fromValues":258,"./toString":260,"./transform":261}],260:[function(t,e,n){e.exports=t=>`(${t[0].toFixed(9)}, ${t[1].toFixed(9)}, ${t[2].toFixed(9)}, ${t[3].toFixed(9)})`},{}],261:[function(t,e,n){e.exports=(t,e,n)=>{const[o,r,s,i]=e;return t[0]=n[0]*o+n[4]*r+n[8]*s+n[12]*i,t[1]=n[1]*o+n[5]*r+n[9]*s+n[13]*i,t[2]=n[2]*o+n[6]*r+n[10]*s+n[14]*i,t[3]=n[3]*o+n[7]*r+n[11]*s+n[15]*i,t}},{}],262:[function(t,e,n){const{EPS:o}=t("../maths/constants");e.exports=(t,e)=>{let n=0;for(let o=0;o<e;o++)n+=t[1][o]-t[0][o];return o*n/e}},{"../maths/constants":106}],263:[function(t,e,n){e.exports={measureAggregateArea:t("./measureAggregateArea"),measureAggregateBoundingBox:t("./measureAggregateBoundingBox"),measureAggregateEpsilon:t("./measureAggregateEpsilon"),measureAggregateVolume:t("./measureAggregateVolume"),measureArea:t("./measureArea"),measureBoundingBox:t("./measureBoundingBox"),measureBoundingSphere:t("./measureBoundingSphere"),measureCenter:t("./measureCenter"),measureCenterOfMass:t("./measureCenterOfMass"),measureDimensions:t("./measureDimensions"),measureEpsilon:t("./measureEpsilon"),measureVolume:t("./measureVolume")}},{"./measureAggregateArea":264,"./measureAggregateBoundingBox":265,"./measureAggregateEpsilon":266,"./measureAggregateVolume":267,"./measureArea":268,"./measureBoundingBox":269,"./measureBoundingSphere":270,"./measureCenter":271,"./measureCenterOfMass":272,"./measureDimensions":273,"./measureEpsilon":274,"./measureVolume":275}],264:[function(t,e,n){const o=t("../utils/flatten"),r=t("./measureArea");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("measureAggregateArea: no geometries supplied");const e=r(t);return 1===t.length?e:e.reduce(((t,e)=>t+e),0)}},{"../utils/flatten":408,"./measureArea":268}],265:[function(t,e,n){const o=t("../utils/flatten"),r=t("../maths/vec3/min"),s=t("../maths/vec3/max"),i=t("./measureBoundingBox");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("measureAggregateBoundingBox: no geometries supplied");const e=i(t);if(1===t.length)return e;const n=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return e.reduce(((t,e)=>[r(t[0],t[0],e[0]),s(t[1],t[1],e[1])]),n)}},{"../maths/vec3/max":236,"../maths/vec3/min":237,"../utils/flatten":408,"./measureBoundingBox":269}],266:[function(t,e,n){const o=t("../utils/flatten"),r=t("./measureAggregateBoundingBox"),s=t("./calculateEpsilonFromBounds"),{geom2:i,geom3:a,path2:c}=t("../geometries");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("measureAggregateEpsilon: no geometries supplied");const e=r(t);let n=0;return n=t.reduce(((t,e)=>c.isA(e)||i.isA(e)?Math.max(t,2):a.isA(e)?Math.max(t,3):0),n),s(e,n)}},{"../geometries":62,"../utils/flatten":408,"./calculateEpsilonFromBounds":262,"./measureAggregateBoundingBox":265}],267:[function(t,e,n){const o=t("../utils/flatten"),r=t("./measureVolume");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("measureAggregateVolume: no geometries supplied");const e=r(t);return 1===t.length?e:e.reduce(((t,e)=>t+e),0)}},{"../utils/flatten":408,"./measureVolume":275}],268:[function(t,e,n){const o=t("../utils/flatten"),r=t("../geometries/geom2"),s=t("../geometries/geom3"),i=t("../geometries/path2"),a=t("../geometries/poly3"),c=new WeakMap;e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>i.isA(t)?0:r.isA(t)?(t=>{let e=c.get(t);return e||(e=r.toSides(t).reduce(((t,e)=>t+(e[0][0]*e[1][1]-e[0][1]*e[1][0])),0),e*=.5,c.set(t,e),e)})(t):s.isA(t)?(t=>{let e=c.get(t);return e||(e=s.toPolygons(t).reduce(((t,e)=>t+a.measureArea(e)),0),c.set(t,e),e)})(t):0));return 1===e.length?e[0]:e}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74,"../geometries/poly3":91,"../utils/flatten":408}],269:[function(t,e,n){const o=t("../utils/flatten"),r=t("../maths/vec2"),s=t("../maths/vec3"),i=t("../geometries/geom2"),a=t("../geometries/geom3"),c=t("../geometries/path2"),l=t("../geometries/poly3"),u=new WeakMap;e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>c.isA(t)?(t=>{let e=u.get(t);if(e)return e;const n=c.toPoints(t);let o;o=0===n.length?r.create():r.clone(n[0]);let s=r.clone(o);return n.forEach((t=>{r.min(o,o,t),r.max(s,s,t)})),o=[o[0],o[1],0],s=[s[0],s[1],0],e=[o,s],u.set(t,e),e})(t):i.isA(t)?(t=>{let e=u.get(t);if(e)return e;const n=i.toPoints(t);let o;o=0===n.length?r.create():r.clone(n[0]);let s=r.clone(o);return n.forEach((t=>{r.min(o,o,t),r.max(s,s,t)})),o=[o[0],o[1],0],s=[s[0],s[1],0],e=[o,s],u.set(t,e),e})(t):a.isA(t)?(t=>{let e=u.get(t);if(e)return e;const n=a.toPolygons(t);let o=s.create();if(n.length>0){const t=l.toPoints(n[0]);s.copy(o,t[0])}let r=s.clone(o);return n.forEach((t=>{l.toPoints(t).forEach((t=>{s.min(o,o,t),s.max(r,r,t)}))})),o=[o[0],o[1],o[2]],r=[r[0],r[1],r[2]],e=[o,r],u.set(t,e),e})(t):[[0,0,0],[0,0,0]]));return 1===e.length?e[0]:e}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74,"../geometries/poly3":91,"../maths/vec2":202,"../maths/vec3":233,"../utils/flatten":408}],270:[function(t,e,n){const o=t("../utils/flatten"),r=t("../maths/vec2"),s=t("../maths/vec3"),i=t("../geometries/geom2"),a=t("../geometries/geom3"),c=t("../geometries/path2"),l=t("../geometries/poly3"),u=new WeakMap;e.exports=(...t)=>{const e=(t=o(t)).map((t=>c.isA(t)?(t=>{let e=u.get(t);if(void 0!==e)return e;const n=s.create();let o=0;const i=c.toPoints(t);if(i.length>0){let t=0;const e=s.create();i.forEach((o=>{s.add(n,n,s.fromVec2(e,o,0)),t++})),s.scale(n,n,1/t),i.forEach((t=>{o=Math.max(o,r.squaredDistance(n,t))})),o=Math.sqrt(o)}return e=[n,o],u.set(t,e),e})(t):i.isA(t)?(t=>{let e=u.get(t);if(void 0!==e)return e;const n=s.create();let o=0;const a=i.toSides(t);if(a.length>0){let t=0;const e=s.create();a.forEach((o=>{s.add(n,n,s.fromVec2(e,o[0],0)),t++})),s.scale(n,n,1/t),a.forEach((t=>{o=Math.max(o,r.squaredDistance(n,t[0]))})),o=Math.sqrt(o)}return e=[n,o],u.set(t,e),e})(t):a.isA(t)?(t=>{let e=u.get(t);if(void 0!==e)return e;const n=s.create();let o=0;const r=a.toPolygons(t);if(r.length>0){let t=0;r.forEach((e=>{l.toPoints(e).forEach((e=>{s.add(n,n,e),t++}))})),s.scale(n,n,1/t),r.forEach((t=>{l.toPoints(t).forEach((t=>{o=Math.max(o,s.squaredDistance(n,t))}))})),o=Math.sqrt(o)}return e=[n,o],u.set(t,e),e})(t):[[0,0,0],0]));return 1===e.length?e[0]:e}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74,"../geometries/poly3":91,"../maths/vec2":202,"../maths/vec3":233,"../utils/flatten":408}],271:[function(t,e,n){const o=t("../utils/flatten"),r=t("./measureBoundingBox");e.exports=(...t)=>{const e=(t=o(t)).map((t=>{const e=r(t);return[e[0][0]+(e[1][0]-e[0][0])/2,e[0][1]+(e[1][1]-e[0][1])/2,e[0][2]+(e[1][2]-e[0][2])/2]}));return 1===e.length?e[0]:e}},{"../utils/flatten":408,"./measureBoundingBox":269}],272:[function(t,e,n){const o=t("../utils/flatten"),r=t("../maths/vec3"),s=t("../geometries/geom2"),i=t("../geometries/geom3"),a=new WeakMap;e.exports=(...t)=>{const e=(t=o(t)).map((t=>s.isA(t)?(t=>{let e=a.get(t);if(void 0!==e)return e;const n=s.toSides(t);let o=0,i=0,c=0;if(n.length>0){for(let t=0;t<n.length;t++){const e=n[t][0],r=n[t][1],s=e[0]*r[1]-e[1]*r[0];o+=s,i+=(e[0]+r[0])*s,c+=(e[1]+r[1])*s}o/=2;const t=1/(6*o);i*=t,c*=t}return e=r.fromValues(i,c,0),a.set(t,e),e})(t):i.isA(t)?(t=>{let e=a.get(t);if(void 0!==e)return e;e=r.create();const n=i.toPolygons(t);if(0===n.length)return e;let o=0;const s=r.create();return n.forEach((t=>{const n=t.vertices;for(let t=0;t<n.length-2;t++){r.cross(s,n[t+1],n[t+2]);const i=r.dot(n[0],s)/6;o+=i,r.add(s,n[0],n[t+1]),r.add(s,s,n[t+2]);const a=r.scale(s,s,1/4*i);r.add(e,e,a)}})),r.scale(e,e,1/o),a.set(t,e),e})(t):[0,0,0]));return 1===e.length?e[0]:e}},{"../geometries/geom2":38,"../geometries/geom3":53,"../maths/vec3":233,"../utils/flatten":408}],273:[function(t,e,n){const o=t("../utils/flatten"),r=t("./measureBoundingBox");e.exports=(...t)=>{const e=(t=o(t)).map((t=>{const e=r(t);return[e[1][0]-e[0][0],e[1][1]-e[0][1],e[1][2]-e[0][2]]}));return 1===e.length?e[0]:e}},{"../utils/flatten":408,"./measureBoundingBox":269}],274:[function(t,e,n){const o=t("../utils/flatten"),{geom2:r,geom3:s,path2:i}=t("../geometries"),a=t("./calculateEpsilonFromBounds"),c=t("./measureBoundingBox");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>i.isA(t)||r.isA(t)?(t=>a(c(t),2))(t):s.isA(t)?(t=>a(c(t),3))(t):0));return 1===e.length?e[0]:e}},{"../geometries":62,"../utils/flatten":408,"./calculateEpsilonFromBounds":262,"./measureBoundingBox":269}],275:[function(t,e,n){const o=t("../utils/flatten"),r=t("../geometries/geom2"),s=t("../geometries/geom3"),i=t("../geometries/path2"),a=t("../geometries/poly3"),c=new WeakMap;e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>i.isA(t)||r.isA(t)?0:s.isA(t)?(t=>{let e=c.get(t);return e||(e=s.toPolygons(t).reduce(((t,e)=>t+a.measureSignedVolume(e)),0),c.set(t,e),e)})(t):0));return 1===e.length?e[0]:e}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74,"../geometries/poly3":91,"../utils/flatten":408}],276:[function(t,e,n){const o=t("../../maths/vec2"),r=t("../../geometries/geom2");e.exports=(t,e)=>{const n=e.map((e=>((t,e)=>{if(e.vertices.length<4)return null;const n=[],r=e.vertices.filter(((t,e)=>t[2]>0&&(n.push(e),!0)));if(2!==r.length)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const s=r.map((e=>{const n=Math.round(e[0]/t)*t+0,r=Math.round(e[1]/t)*t+0;return o.fromValues(n,r)}));if(o.equals(s[0],s[1]))return null;const i=n[1]-n[0];if(1!==i&&3!==i)throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return 1===i&&s.reverse(),s})(t,e))).filter((t=>null!==t));return r.create(n)}},{"../../geometries/geom2":38,"../../maths/vec2":202}],277:[function(t,e,n){e.exports={intersect:t("./intersect"),scission:t("./scission"),subtract:t("./subtract"),union:t("./union")}},{"./intersect":278,"./scission":283,"./subtract":285,"./union":296}],278:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../utils/areAllShapesTheSameType"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("./intersectGeom2"),c=t("./intersectGeom3");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");if(!r(t))throw new Error("only intersect of the types are supported");const e=t[0];return s.isA(e)?a(t):i.isA(e)?c(t):e}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../utils/areAllShapesTheSameType":406,"../../utils/flatten":408,"./intersectGeom2":279,"./intersectGeom3":280}],279:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("../../measurements/measureEpsilon"),i=t("./fromFakePolygons"),a=t("./to3DWalls"),c=t("./intersectGeom3");e.exports=(...t)=>{const e=(t=o(t)).map((t=>a({z0:-1,z1:1},t))),n=c(e),l=s(n);return i(l,r.toPolygons(n))}},{"../../geometries/geom3":53,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"./fromFakePolygons":276,"./intersectGeom3":280,"./to3DWalls":289}],280:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../modifiers/retessellate"),s=t("./intersectGeom3Sub");e.exports=(...t)=>{let e=(t=o(t)).shift();return t.forEach((t=>{e=s(e,t)})),e=r(e),e}},{"../../utils/flatten":408,"../modifiers/retessellate":366,"./intersectGeom3Sub":281}],281:[function(t,e,n){const o=t("../../geometries/geom3"),r=t("./mayOverlap"),{Tree:s}=t("./trees");e.exports=(t,e)=>{if(!r(t,e))return o.create();const n=new s(o.toPolygons(t)),i=new s(o.toPolygons(e));n.invert(),i.clipTo(n),i.invert(),n.clipTo(i),i.clipTo(n),n.addPolygons(i.allPolygons()),n.invert();const a=n.allPolygons();return o.create(a)}},{"../../geometries/geom3":53,"./mayOverlap":282,"./trees":293}],282:[function(t,e,n){const{EPS:o}=t("../../maths/constants"),r=t("../../measurements/measureBoundingBox");e.exports=(t,e)=>{if(0===t.polygons.length||0===e.polygons.length)return!1;const n=r(t),s=n[0],i=n[1],a=r(e),c=a[0],l=a[1];return!(c[0]-i[0]>o||s[0]-l[0]>o||c[1]-i[1]>o||s[1]-l[1]>o||c[2]-i[2]>o||s[2]-l[2]>o)}},{"../../maths/constants":106,"../../measurements/measureBoundingBox":269}],283:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("./scissionGeom3");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>r.isA(t)?s(t):t));return 1===e.length?e[0]:e}},{"../../geometries/geom3":53,"../../utils/flatten":408,"./scissionGeom3":284}],284:[function(t,e,n){const o=t("../../maths/vec3"),r=t("../../measurements/measureEpsilon"),s=t("../../geometries/geom3");e.exports=t=>{const e=r(t),n=s.toPolygons(t),i=n.length,a=new Map,c=o.create();n.forEach(((t,n)=>{t.vertices.forEach((t=>{((t,e,n)=>{const o=`${e}`,r=t.get(o);void 0===r?t.set(o,[n]):r.push(n)})(a,o.snap(c,t,e),n)}))}));const l=n.map((t=>{let n=[];return t.vertices.forEach((t=>{n=n.concat(((t,e)=>{const n=`${e}`;return t.get(n)})(a,o.snap(c,t,e)))})),{e:1,d:(r=n,r.sort(((t,e)=>t-e)).filter(((t,e,n)=>!e||t!==n[e-1])))};var r}));a.clear();let u=0;const h=l.length;for(let t=0;t<h;t++){const e=l[t];if(e.e>0){const n=new Array(i);n[t]=!0;do{u=0,n.forEach(((t,e)=>{const o=l[e];if(o.e>0){o.e=-1;for(let t=0;t<o.d.length;t++)n[o.d[t]]=!0;u++}}))}while(u>0);e.indexes=n}}const p=[];for(let t=0;t<h;t++)if(l[t].indexes){const e=[];l[t].indexes.forEach(((t,o)=>e.push(n[o]))),p.push(s.create(e))}return p}},{"../../geometries/geom3":53,"../../maths/vec3":233,"../../measurements/measureEpsilon":274}],285:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../utils/areAllShapesTheSameType"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("./subtractGeom2"),c=t("./subtractGeom3");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");if(!r(t))throw new Error("only subtract of the types are supported");const e=t[0];return s.isA(e)?a(t):i.isA(e)?c(t):e}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../utils/areAllShapesTheSameType":406,"../../utils/flatten":408,"./subtractGeom2":286,"./subtractGeom3":287}],286:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("../../measurements/measureEpsilon"),i=t("./fromFakePolygons"),a=t("./to3DWalls"),c=t("./subtractGeom3");e.exports=(...t)=>{const e=(t=o(t)).map((t=>a({z0:-1,z1:1},t))),n=c(e),l=s(n);return i(l,r.toPolygons(n))}},{"../../geometries/geom3":53,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"./fromFakePolygons":276,"./subtractGeom3":287,"./to3DWalls":289}],287:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../modifiers/retessellate"),s=t("./subtractGeom3Sub");e.exports=(...t)=>{let e=(t=o(t)).shift();return t.forEach((t=>{e=s(e,t)})),e=r(e),e}},{"../../utils/flatten":408,"../modifiers/retessellate":366,"./subtractGeom3Sub":288}],288:[function(t,e,n){const o=t("../../geometries/geom3"),r=t("./mayOverlap"),{Tree:s}=t("./trees");e.exports=(t,e)=>{if(!r(t,e))return o.clone(t);const n=new s(o.toPolygons(t)),i=new s(o.toPolygons(e));n.invert(),n.clipTo(i),i.clipTo(n,!0),n.addPolygons(i.allPolygons()),n.invert();const a=n.allPolygons();return o.create(a)}},{"../../geometries/geom3":53,"./mayOverlap":282,"./trees":293}],289:[function(t,e,n){const o=t("../../maths/vec3"),r=t("../../geometries/geom2"),s=t("../../geometries/geom3"),i=t("../../geometries/poly3");e.exports=(t,e)=>{const n=r.toSides(e).map((e=>((t,e,n)=>{const r=[o.fromVec2(o.create(),n[0],t),o.fromVec2(o.create(),n[1],t),o.fromVec2(o.create(),n[1],e),o.fromVec2(o.create(),n[0],e)];return i.create(r)})(t.z0,t.z1,e)));return s.create(n)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/vec3":233}],290:[function(t,e,n){const o=t("../../../maths/plane"),r=t("../../../geometries/poly3");class s{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){const t=[this];let e;for(let n=0;n<t.length;n++){e=t[n],e.plane&&(e.plane=o.flip(o.create(),e.plane)),e.front&&t.push(e.front),e.back&&t.push(e.back);const r=e.front;e.front=e.back,e.back=r}}clipPolygons(t,e){let n,o={node:this,polygontreenodes:t};const r=[];do{if(n=o.node,t=o.polygontreenodes,n.plane){const o=n.plane,s=[],i=[],a=e?s:i,c=t.length;for(let e=0;e<c;e++){const n=t[e];n.isRemoved()||n.splitByPlane(o,a,s,i,s)}n.front&&i.length>0&&r.push({node:n.front,polygontreenodes:i});const l=s.length;if(n.back&&l>0)r.push({node:n.back,polygontreenodes:s});else for(let t=0;t<l;t++)s[t].remove()}o=r.pop()}while(void 0!==o)}clipTo(t,e){let n=this;const o=[];do{n.polygontreenodes.length>0&&t.rootnode.clipPolygons(n.polygontreenodes,e),n.front&&o.push(n.front),n.back&&o.push(n.back),n=o.pop()}while(void 0!==n)}addPolygonTreeNodes(t){let e={node:this,polygontreenodes:t};const n=[];do{const t=e.node,o=e.polygontreenodes;if(0===o.length){e=n.pop();continue}if(!t.plane){let e=0;e=Math.floor(o.length/2);const n=o[e].getPolygon();t.plane=r.plane(n)}const i=[],a=[],c=o.length;for(let e=0;e<c;++e)o[e].splitByPlane(t.plane,t.polygontreenodes,a,i,a);i.length>0&&(t.front||(t.front=new s(t)),c===i.length&&0===a.length?t.front.polygontreenodes=i:n.push({node:t.front,polygontreenodes:i})),a.length>0&&(t.back||(t.back=new s(t)),c===a.length&&0===i.length?t.back.polygontreenodes=a:n.push({node:t.back,polygontreenodes:a})),e=n.pop()}while(void 0!==e)}}e.exports=s},{"../../../geometries/poly3":91,"../../../maths/plane":174}],291:[function(t,e,n){const{EPS:o}=t("../../../maths/constants"),r=t("../../../maths/vec3"),s=t("../../../geometries/poly3"),i=t("./splitPolygonByPlane");class a{constructor(t,e){this.parent=t,this.children=[],this.polygon=e,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");const e=this;t.forEach((t=>{e.addChild(t)}))}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const t=this.parent.children,e=t.indexOf(this);if(e<0)throw new Error("Assertion failed");t.splice(e,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let e=[this];const n=[e];let o,r,s,i;for(o=0;o<n.length;++o)for(e=n[o],r=0,s=e.length;r<s;r++)i=e[r],i.polygon?t.push(i.polygon):i.children.length>0&&n.push(i.children)}splitByPlane(t,e,n,o,r){if(this.children.length){const s=[this.children];let i,a,c,l,u;for(i=0;i<s.length;i++)for(u=s[i],a=0,c=u.length;a<c;a++)l=u[a],l.children.length>0?s.push(l.children):l._splitByPlane(t,e,n,o,r)}else this._splitByPlane(t,e,n,o,r)}_splitByPlane(t,e,n,a,c){const l=this.polygon;if(l){const u=s.measureBoundingSphere(l),h=u[3]+o,p=u,m=r.dot(t,p)-t[3];if(m>h)a.push(this);else if(m<-h)c.push(this);else{const o=i(t,l);switch(o.type){case 0:e.push(this);break;case 1:n.push(this);break;case 2:a.push(this);break;case 3:c.push(this);break;case 4:if(o.front){const t=this.addChild(o.front);a.push(t)}if(o.back){const t=this.addChild(o.back);c.push(t)}}}}}addChild(t){const e=new a(this,t);return this.children.push(e),e}invertSub(){let t=[this];const e=[t];let n,o,r,i;for(n=0;n<e.length;n++)for(t=e[n],o=0,r=t.length;o<r;o++)i=t[o],i.polygon&&(i.polygon=s.invert(i.polygon)),i.children.length>0&&e.push(i.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let t=[this];const e=[t];for(let n=0;n<e.length;++n){t=e[n];const o=t.length;for(let n=0;n<o;n++){const o=t[n];o.polygon&&(o.polygon=null),o.parent&&(o.parent=null),o.children.length>0&&e.push(o.children),o.children=[]}}}toString(){let t="",e=[this];const n=[e];let o,r,s,i;for(o=0;o<n.length;++o){e=n[o];const a=" ".repeat(o);for(r=0,s=e.length;r<s;r++)i=e[r],t+=`${a}PolygonTreeNode (${i.isRootNode()}): ${i.children.length}`,i.polygon?t+=`\n ${a}polygon: ${i.polygon.vertices}\n`:t+="\n",i.children.length>0&&n.push(i.children)}return t}}e.exports=a},{"../../../geometries/poly3":91,"../../../maths/constants":106,"../../../maths/vec3":233,"./splitPolygonByPlane":295}],292:[function(t,e,n){const o=t("./Node"),r=t("./PolygonTreeNode");e.exports=class{constructor(t){this.polygonTree=new r,this.rootnode=new o(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,e=!1){this.rootnode.clipTo(t,e)}allPolygons(){const t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=this.polygonTree.addChild(t[n]);this.rootnode.addPolygonTreeNodes(e)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}}},{"./Node":290,"./PolygonTreeNode":291}],293:[function(t,e,n){e.exports={Tree:t("./Tree")}},{"./Tree":292}],294:[function(t,e,n){const o=t("../../../maths/vec3");e.exports=(t,e,n)=>{const r=o.subtract(o.create(),n,e);let s=(t[3]-o.dot(t,e))/o.dot(t,r);return Number.isNaN(s)&&(s=0),s>1&&(s=1),s<0&&(s=0),o.scale(r,r,s),o.add(r,e,r),r}},{"../../../maths/vec3":233}],295:[function(t,e,n){const{EPS:o}=t("../../../maths/constants"),r=t("../../../maths/plane"),s=t("../../../maths/vec3"),i=t("../../../geometries/poly3"),a=t("./splitLineSegmentByPlane");e.exports=(t,e)=>{const n={type:null,front:null,back:null},c=e.vertices,l=c.length,u=i.plane(e);if(r.equals(u,t))n.type=0;else{let e=!1,r=!1;const h=[],p=-o;for(let n=0;n<l;n++){const i=s.dot(t,c[n])-t[3],a=i<p;h.push(a),i>o&&(e=!0),i<p&&(r=!0)}if(e||r)if(r)if(e){n.type=4;const e=[],r=[];let p=h[0];for(let n=0;n<l;n++){const o=c[n];let s=n+1;s>=l&&(s=0);const i=h[s];if(p===i)p?r.push(o):e.push(o);else{const n=c[s],i=a(t,o,n);p?(r.push(o),r.push(i),e.push(i)):(e.push(o),e.push(i),r.push(i))}p=i}const m=o*o;if(r.length>=3){let t=r[r.length-1];for(let e=0;e<r.length;e++){const n=r[e];s.squaredDistance(n,t)<m&&(r.splice(e,1),e--),t=n}}if(e.length>=3){let t=e[e.length-1];for(let n=0;n<e.length;n++){const o=e[n];s.squaredDistance(o,t)<m&&(e.splice(n,1),n--),t=o}}e.length>=3&&(n.front=i.fromPointsAndPlane(e,u)),r.length>=3&&(n.back=i.fromPointsAndPlane(r,u))}else n.type=3;else n.type=2;else{const e=s.dot(t,u);n.type=e>=0?0:1}}return n}},{"../../../geometries/poly3":91,"../../../maths/constants":106,"../../../maths/plane":174,"../../../maths/vec3":233,"./splitLineSegmentByPlane":294}],296:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../utils/areAllShapesTheSameType"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("./unionGeom2"),c=t("./unionGeom3");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");if(!r(t))throw new Error("only unions of the same type are supported");const e=t[0];return s.isA(e)?a(t):i.isA(e)?c(t):e}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../utils/areAllShapesTheSameType":406,"../../utils/flatten":408,"./unionGeom2":297,"./unionGeom3":298}],297:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("../../measurements/measureEpsilon"),i=t("./fromFakePolygons"),a=t("./to3DWalls"),c=t("./unionGeom3");e.exports=(...t)=>{const e=(t=o(t)).map((t=>a({z0:-1,z1:1},t))),n=c(e),l=s(n);return i(l,r.toPolygons(n))}},{"../../geometries/geom3":53,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"./fromFakePolygons":276,"./to3DWalls":289,"./unionGeom3":298}],298:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../modifiers/retessellate"),s=t("./unionGeom3Sub");e.exports=(...t)=>{let e;for(t=o(t),e=1;e<t.length;e+=2)t.push(s(t[e-1],t[e]));let n=t[e-1];return n=r(n),n}},{"../../utils/flatten":408,"../modifiers/retessellate":366,"./unionGeom3Sub":299}],299:[function(t,e,n){const o=t("../../geometries/geom3"),r=t("./mayOverlap"),{Tree:s}=t("./trees");e.exports=(t,e)=>{if(!r(t,e))return((t,e)=>{let n=o.toPolygons(t);return n=n.concat(o.toPolygons(e)),o.create(n)})(t,e);const n=new s(o.toPolygons(t)),i=new s(o.toPolygons(e));n.clipTo(i,!1),i.clipTo(n),i.invert(),i.clipTo(n),i.invert();const a=n.allPolygons().concat(i.allPolygons());return o.create(a)}},{"../../geometries/geom3":53,"./mayOverlap":282,"./trees":293}],300:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/geom3"),i=t("../../geometries/path2"),a=t("./expandGeom2"),c=t("./expandGeom3"),l=t("./expandPath2");e.exports=(t,...e)=>{if(0===(e=o(e)).length)throw new Error("wrong number of arguments");const n=e.map((e=>i.isA(e)?l(t,e):r.isA(e)?a(t,e):s.isA(e)?c(t,e):e));return 1===n.length?n[0]:n}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../utils/flatten":408,"./expandGeom2":301,"./expandGeom3":302,"./expandPath2":303}],301:[function(t,e,n){const o=t("../../geometries/geom2"),r=t("./offsetFromPoints");e.exports=(t,e)=>{const{delta:n,corners:s,segments:i}=Object.assign({},{delta:1,corners:"edge",segments:16},t);if("edge"!==s&&"chamfer"!==s&&"round"!==s)throw new Error('corners must be "edge", "chamfer", or "round"');const a=o.toOutlines(e).map((e=>r(t={delta:n,corners:s,closed:!0,segments:i},e))).reduce(((t,e)=>t.concat(o.toSides(o.fromPoints(e)))),[]);return o.create(a)}},{"../../geometries/geom2":38,"./offsetFromPoints":308}],302:[function(t,e,n){const o=t("../../geometries/geom3"),r=t("../booleans/union"),s=t("./expandShell");e.exports=(t,e)=>{const{delta:n,corners:i,segments:a}=Object.assign({},{delta:1,corners:"round",segments:12},t);if("round"!==i)throw new Error('corners must be "round" for 3D geometries');if(0===o.toPolygons(e).length)throw new Error("the given geometry cannot be empty");const c=s(t={delta:n,corners:i,segments:a},e);return r(e,c)}},{"../../geometries/geom3":53,"../booleans/union":296,"./expandShell":304}],303:[function(t,e,n){const o=t("../../maths/utils/area"),r=t("../../maths/vec2"),s=t("../../geometries/geom2"),i=t("../../geometries/path2"),a=t("./offsetFromPoints");e.exports=(t,e)=>{t=Object.assign({},{delta:1,corners:"edge",segments:16},t);const{delta:n,corners:c,segments:l}=t;if(n<=0)throw new Error("the given delta must be positive for paths");if("edge"!==c&&"chamfer"!==c&&"round"!==c)throw new Error('corners must be "edge", "chamfer", or "round"');const u=e.isClosed,h=i.toPoints(e);if(0===h.length)throw new Error("the given geometry cannot be empty");const p={points:h,external:a({delta:n,corners:c,segments:l,closed:u},h),internal:a({delta:-n,corners:c,segments:l,closed:u},h)};return e.isClosed?(t=>{let{external:e,internal:n}=t;o(e)<0?e=e.reverse():n=n.reverse();const r=i.fromPoints({closed:!0},e),a=i.fromPoints({closed:!0},n),c=s.toSides(s.fromPoints(i.toPoints(r))),l=s.toSides(s.fromPoints(i.toPoints(a)));return c.push(...l),s.create(c)})(p):((t,e,n,o)=>{const{points:i,external:a,internal:c}=t,l=Math.floor(e/2),u=[],h=[];if("round"===n&&l>0){const t=Math.PI/l,e=i[i.length-1],n=r.angle(r.subtract(r.create(),a[a.length-1],e)),s=i[0],p=r.angle(r.subtract(r.create(),c[0],s));for(let i=1;i<l;i++){let a=n+t*i,c=r.fromAngleRadians(r.create(),a);r.scale(c,c,o),r.add(c,c,e),u.push(c),a=p+t*i,c=r.fromAngleRadians(r.create(),a),r.scale(c,c,o),r.add(c,c,s),h.push(c)}}const p=[];return p.push(...a,...u,...c.reverse(),...h),s.fromPoints(p)})(p,l,c,n)}},{"../../geometries/geom2":38,"../../geometries/path2":74,"../../maths/utils/area":179,"../../maths/vec2":202,"./offsetFromPoints":308}],304:[function(t,e,n){const{EPS:o,TAU:r}=t("../../maths/constants"),s=t("../../maths/mat4"),i=t("../../maths/vec3"),a=t("../../utils/fnNumberSort"),c=t("../../geometries/geom3"),l=t("../../geometries/poly3"),u=t("../../primitives/sphere"),h=t("../modifiers/retessellate"),p=t("../booleans/unionGeom3Sub"),m=t("./extrudePolygon"),d=(t,e,n)=>{const o=e.toString();if(t.has(o))t.get(o)[1].push(n);else{const r=[e,[n]];t.set(o,r)}},f=(t,e,n)=>{const o=e[0].toString(),r=e[1].toString(),s=o<r?`${o},${r}`:`${r},${o}`;if(t.has(s))t.get(s)[1].push(n);else{const o=[e,[n]];t.set(s,o)}},g=(t,e)=>{t.findIndex((t=>t===e))<0&&t.push(e)};e.exports=(t,e)=>{const{delta:n,segments:v}=Object.assign({},{delta:1,segments:12},t);let y=c.create();const b=new Map,x=new Map,A=i.create(),E=i.create();return c.toPolygons(e).forEach(((t,e)=>{const o=i.scale(i.create(),l.plane(t),2*n),r=l.transform(s.fromTranslation(s.create(),i.scale(i.create(),o,-.5)),t),a=m(o,r);y=p(y,a);const c=t.vertices;for(let e=0;e<c.length;e++){d(b,c[e],l.plane(t));const n=(e+1)%c.length,o=[c[e],c[n]];f(x,o,l.plane(t))}})),x.forEach((t=>{const e=t[0],s=t[1],u=e[0],h=e[1],m=i.subtract(i.create(),h,u);i.normalize(m,m);const d=s[0],f=i.cross(i.create(),d,m);let b=[];for(let t=0;t<v;t++)g(b,t*r/v);for(let t=0,e=s.length;t<e;t++){const e=s[t],n=i.dot(f,e),o=i.dot(d,e);let a=Math.atan2(n,o);a<0&&(a+=r),g(b,a),a=Math.atan2(-n,-o),a<0&&(a+=r),g(b,a)}b=b.sort(a);const x=b.length;let w,D;const P=[],S=[],T=[];for(let t=-1;t<x;t++){const e=b[t<0?t+x:t],r=Math.sin(e),s=Math.cos(e);i.scale(A,d,s*n),i.scale(E,f,r*n),i.add(A,A,E);const a=i.add(i.create(),u,A),c=i.add(i.create(),h,A);let p=!1;if(t>=0&&i.distance(a,w)<o&&(p=!0),!p){if(t>=0){P.push(a),S.push(c);const t=[D,c,a,w],e=l.create(t);T.push(e)}w=a,D=c}}S.reverse(),T.push(l.create(P)),T.push(l.create(S));const C=c.create(T);y=p(y,C)})),b.forEach((t=>{const e=t[0],o=t[1],r=o[0];let s=null,a=0;for(let t=1;t<o.length;t++){const e=o[t],n=i.cross(A,r,e),c=i.length(n);c>.05&&c>a&&(a=c,s=e)}s||(s=i.orthogonal(A,r));const c=i.cross(A,r,s);i.normalize(c,c);const l=i.cross(E,c,r),h=u({center:[e[0],e[1],e[2]],radius:n,segments:v,axes:[r,c,l]});y=p(y,h)})),h(y)}},{"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/constants":106,"../../maths/mat4":155,"../../maths/vec3":233,"../../primitives/sphere":396,"../../utils/fnNumberSort":409,"../booleans/unionGeom3Sub":299,"../modifiers/retessellate":366,"./extrudePolygon":305}],305:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec3"),s=t("../../geometries/geom3"),i=t("../../geometries/poly3");e.exports=(t,e)=>{r.dot(i.plane(e),t)>0&&(e=i.invert(e));const n=[e],a=i.transform(o.fromTranslation(o.create(),t),e),c=e.vertices.length;for(let t=0;t<c;t++){const o=t<c-1?t+1:0,r=i.create([e.vertices[t],a.vertices[t],a.vertices[o],e.vertices[o]]);n.push(r)}return n.push(i.invert(a)),s.create(n)}},{"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/mat4":155,"../../maths/vec3":233}],306:[function(t,e,n){e.exports={expand:t("./expand"),offset:t("./offset")}},{"./expand":300,"./offset":307}],307:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/path2"),i=t("./offsetGeom2"),a=t("./offsetPath2");e.exports=(t,...e)=>{if(0===(e=o(e)).length)throw new Error("wrong number of arguments");const n=e.map((e=>s.isA(e)?a(t,e):r.isA(e)?i(t,e):e));return 1===n.length?n[0]:n}},{"../../geometries/geom2":38,"../../geometries/path2":74,"../../utils/flatten":408,"./offsetGeom2":309,"./offsetPath2":310}],308:[function(t,e,n){const{EPS:o,TAU:r}=t("../../maths/constants"),s=t("../../maths/utils/intersect"),i=t("../../maths/line2"),a=t("../../maths/vec2"),c=t("../../maths/utils/area");e.exports=(t,e)=>{let{delta:n,corners:l,closed:u,segments:h}=Object.assign({},{delta:1,corners:"edge",closed:!1,segments:16},t);if(Math.abs(n)<o)return e;let p=t.closed?c(e):1;0===p&&(p=1);const m=p>0&&n>=0||p<0&&n<0;n=Math.abs(n);let d=null,f=[];const g=[],v=a.create(),y=e.length;for(let t=0;t<y;t++){const o=(t+1)%y,r=e[t],i=e[o];m?a.subtract(v,r,i):a.subtract(v,i,r),a.normal(v,v),a.normalize(v,v),a.scale(v,v,n);const c=a.add(a.create(),r,v),l=a.add(a.create(),i,v),h=[c,l];if(null!=d&&(u||!u&&0!==o)){const t=s(d[0],d[1],h[0],h[1]);t?(f.pop(),h[0]=t):g.push({c:r,s0:d,s1:h})}d=[c,l],(0!==o||u)&&(f.push(h[0]),f.push(h[1]))}if(u&&null!=d){const t=f[0],n=f[1],o=s(d[0],d[1],t,n);if(o)f[0]=o,f.pop();else{const o=e[0],r=[t,n];g.push({c:o,s0:d,s1:r})}}if("edge"===l){const t=new Map;f.forEach(((e,n)=>t.set(e,n)));const e=i.create(),n=i.create();g.forEach((o=>{i.fromPoints(e,o.s0[0],o.s0[1]),i.fromPoints(n,o.s1[0],o.s1[1]);const r=i.intersectPointOfLines(e,n);if(Number.isFinite(r[0])&&Number.isFinite(r[1])){const e=o.s0[1],n=t.get(e);f[n]=r,f[(n+1)%f.length]=void 0}else{const e=o.s1[0],n=t.get(e);f[n]=void 0}})),f=f.filter((t=>void 0!==t))}if("round"===l){let t=Math.floor(h/4);const e=a.create();g.forEach((o=>{let s=a.angle(a.subtract(e,o.s1[0],o.c));if(s-=a.angle(a.subtract(e,o.s0[1],o.c)),m&&s<0&&(s+=Math.PI,s<0&&(s+=Math.PI)),!m&&s>0&&(s-=Math.PI,s>0&&(s-=Math.PI)),0!==s){t=Math.floor(h*(Math.abs(s)/r));const i=s/t,c=a.angle(a.subtract(e,o.s0[1],o.c)),l=[];for(let e=1;e<t;e++){const t=c+i*e,r=a.fromAngleRadians(a.create(),t);a.scale(r,r,n),a.add(r,r,o.c),l.push(r)}if(l.length>0){const t=o.s0[1];let e=f.findIndex((e=>a.equals(t,e)));e=(e+1)%f.length,f.splice(e,0,...l)}}else{const t=o.s1[0],e=f.findIndex((e=>a.equals(t,e)));f.splice(e,1)}}))}return f}},{"../../maths/constants":106,"../../maths/line2":117,"../../maths/utils/area":179,"../../maths/utils/intersect":182,"../../maths/vec2":202}],309:[function(t,e,n){const o=t("../../geometries/geom2"),r=t("../../geometries/poly2"),s=t("./offsetFromPoints");e.exports=(t,e)=>{const{delta:n,corners:i,segments:a}=Object.assign({},{delta:1,corners:"edge",segments:0},t);if("edge"!==i&&"chamfer"!==i&&"round"!==i)throw new Error('corners must be "edge", "chamfer", or "round"');const c=o.toOutlines(e),l=c.map((e=>{const o=c.reduce(((t,n)=>t+r.arePointsInside(e,r.create(n))),0);return s(t={delta:o%2==0?n:-n,corners:i,closed:!0,segments:a},e)})).reduce(((t,e)=>t.concat(o.toSides(o.fromPoints(e)))),[]);return o.create(l)}},{"../../geometries/geom2":38,"../../geometries/poly2":85,"./offsetFromPoints":308}],310:[function(t,e,n){const o=t("../../geometries/path2"),r=t("./offsetFromPoints");e.exports=(t,e)=>{const n={delta:1,corners:"edge",closed:e.isClosed,segments:16},{delta:s,corners:i,closed:a,segments:c}=Object.assign({},n,t);if("edge"!==i&&"chamfer"!==i&&"round"!==i)throw new Error('corners must be "edge", "chamfer", or "round"');const l=r(t={delta:s,corners:i,closed:a,segments:c},o.toPoints(e));return o.fromPoints({closed:a},l)}},{"../../geometries/path2":74,"./offsetFromPoints":308}],311:[function(t,e,n){const{area:o}=t("../../../maths/utils"),{toOutlines:r}=t("../../../geometries/geom2"),{arePointsInside:s}=t("../../../geometries/poly2");e.exports=t=>{const e=r(t),n=[],i=[];e.forEach(((t,e)=>{const r=o(t);r<0?i.push(e):r>0&&n.push(e)}));const a=[],c=[];return n.forEach(((t,n)=>{const o=e[t];a[n]=[],i.forEach(((t,r)=>{const i=e[t];s([i[0]],{vertices:o})&&(a[n].push(t),c[r]||(c[r]=[]),c[r].push(n))}))})),i.forEach(((t,e)=>{if(c[e]&&c[e].length>1){const n=((t,e)=>{let n,o;return t.forEach(((t,r)=>{const s=e(t);(void 0===o||s<o)&&(n=r,o=s)})),n})(c[e],(t=>a[t].length));c[e].forEach(((e,o)=>{o!==n&&(a[e]=a[e].filter((e=>e!==t)))}))}})),a.map(((t,o)=>({solid:e[n[o]],holes:t.map((t=>e[t]))})))}},{"../../../geometries/geom2":38,"../../../geometries/poly2":85,"../../../maths/utils":180}],312:[function(t,e,n){const{filterPoints:o,linkedPolygon:r,locallyInside:s,splitPolygon:i}=t("./linkedPolygon"),{area:a,pointInTriangle:c}=t("./triangle"),l=(t,e)=>{const n=u(t,e);if(!n)return e;const r=i(n,t),s=o(n,n.next);return o(r,r.next),e===n?s:e},u=(t,e)=>{let n=e;const o=t.x,r=t.y;let i,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=o&&t>a){if(a=t,t===o){if(r===n.y)return n;if(r===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(o===a)return i;const l=i,u=i.x,p=i.y;let m=1/0;n=i;do{if(o>=n.x&&n.x>=u&&o!==n.x&&c(r<p?o:a,r,u,p,r<p?a:o,r,n.x,n.y)){const e=Math.abs(r-n.y)/(o-n.x);s(n,t)&&(e<m||e===m&&(n.x>i.x||n.x===i.x&&h(i,n)))&&(i=n,m=e)}n=n.next}while(n!==l);return i},h=(t,e)=>a(t.prev,t,e.prev)<0&&a(e.next,t,t.next)<0,p=t=>{let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n};e.exports=(t,e,n,s)=>{const i=[];for(let n=0,o=e.length;n<o;n++){const a=e[n]*s,c=n<o-1?e[n+1]*s:t.length,l=r(t,a,c,s,!1);l===l.next&&(l.steiner=!0),i.push(p(l))}i.sort(((t,e)=>t.x-e.x));for(let t=0;t<i.length;t++)n=l(i[t],n),n=o(n,n.next);return n}},{"./linkedPolygon":316,"./triangle":318}],313:[function(t,e,n){const o=t("./eliminateHoles"),{removeNode:r,sortLinked:s}=t("./linkedList"),{cureLocalIntersections:i,filterPoints:a,isValidDiagonal:c,linkedPolygon:l,splitPolygon:u}=t("./linkedPolygon"),{area:h,pointInTriangle:p}=t("./triangle"),m=(t,e,n,o,s,c,l)=>{if(!t)return;!l&&c&&v(t,o,s,c);let u,h,p=t;for(;t.prev!==t.next;)if(u=t.prev,h=t.next,c?f(t,o,s,c):d(t))e.push(u.i/n),e.push(t.i/n),e.push(h.i/n),r(t),t=h.next,p=h.next;else if((t=h)===p){l?1===l?(t=i(a(t),e,n),m(t,e,n,o,s,c,2)):2===l&&g(t,e,n,o,s,c):m(a(t),e,n,o,s,c,1);break}},d=t=>{const e=t.prev,n=t,o=t.next;if(h(e,n,o)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(p(e.x,e.y,n.x,n.y,o.x,o.y,r.x,r.y)&&h(r.prev,r,r.next)>=0)return!1;r=r.next}return!0},f=(t,e,n,o)=>{const r=t.prev,s=t,i=t.next;if(h(r,s,i)>=0)return!1;const a=r.x<s.x?r.x<i.x?r.x:i.x:s.x<i.x?s.x:i.x,c=r.y<s.y?r.y<i.y?r.y:i.y:s.y<i.y?s.y:i.y,l=r.x>s.x?r.x>i.x?r.x:i.x:s.x>i.x?s.x:i.x,u=r.y>s.y?r.y>i.y?r.y:i.y:s.y>i.y?s.y:i.y,m=y(a,c,e,n,o),d=y(l,u,e,n,o);let f=t.prevZ,g=t.nextZ;for(;f&&f.z>=m&&g&&g.z<=d;){if(f!==t.prev&&f!==t.next&&p(r.x,r.y,s.x,s.y,i.x,i.y,f.x,f.y)&&h(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,g!==t.prev&&g!==t.next&&p(r.x,r.y,s.x,s.y,i.x,i.y,g.x,g.y)&&h(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;f&&f.z>=m;){if(f!==t.prev&&f!==t.next&&p(r.x,r.y,s.x,s.y,i.x,i.y,f.x,f.y)&&h(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;g&&g.z<=d;){if(g!==t.prev&&g!==t.next&&p(r.x,r.y,s.x,s.y,i.x,i.y,g.x,g.y)&&h(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0},g=(t,e,n,o,r,s)=>{let i=t;do{let t=i.next.next;for(;t!==i.prev;){if(i.i!==t.i&&c(i,t)){let c=u(i,t);return i=a(i,i.next),c=a(c,c.next),m(i,e,n,o,r,s),void m(c,e,n,o,r,s)}t=t.next}i=i.next}while(i!==t)},v=(t,e,n,o)=>{let r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,n,o)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,s(r,(t=>t.z))},y=(t,e,n,o,r)=>(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1;e.exports=(t,e,n=2)=>{const r=e&&e.length,s=r?e[0]*n:t.length;let i=l(t,0,s,n,!0);const a=[];if(!i||i.next===i.prev)return a;let c,u,h,p,d;if(r&&(i=o(t,e,i,n)),t.length>80*n){c=h=t[0],u=p=t[1];for(let e=n;e<s;e+=n){const n=t[e],o=t[e+1];n<c&&(c=n),o<u&&(u=o),n>h&&(h=n),o>p&&(p=o)}d=Math.max(h-c,p-u),d=0!==d?1/d:0}return m(i,a,n,c,u,d),a}},{"./eliminateHoles":312,"./linkedList":314,"./linkedPolygon":316,"./triangle":318}],314:[function(t,e,n){const o=t("./linkedListSort");class r{constructor(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}e.exports={Node:r,insertNode:(t,e,n,o)=>{const s=new r(t,e,n);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s},removeNode:t=>{t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},sortLinked:o}},{"./linkedListSort":315}],315:[function(t,e,n){e.exports=(t,e)=>{let n,o,r,s,i,a=1;do{o=t,t=null;let c=null;for(i=0;o;){i++,r=o;let l=0;for(n=0;n<a&&(l++,r=r.nextZ,r);n++);let u=a;for(;l>0||u>0&&r;)0!==l&&(0===u||!r||e(o)<=e(r))?(s=o,o=o.nextZ,l--):(s=r,r=r.nextZ,u--),c?c.nextZ=s:t=s,s.prevZ=c,c=s;o=r}c.nextZ=null,a*=2}while(i>1);return t}},{}],316:[function(t,e,n){const{Node:o,insertNode:r,removeNode:s}=t("./linkedList"),{area:i}=t("./triangle"),a=(t,e)=>{if(!t)return t;e||(e=t);let n,o=t;do{if(n=!1,o.steiner||!h(o,o.next)&&0!==i(o.prev,o,o.next))o=o.next;else{if(s(o),o=e=o.prev,o===o.next)break;n=!0}}while(n||o!==e);return e},c=(t,e)=>i(t.prev,t,t.next)<0?i(t,e,t.next)>=0&&i(t,t.prev,e)>=0:i(t,e,t.prev)<0||i(t,t.next,e)<0,l=(t,e,n,o)=>{const r=Math.sign(i(t,e,n)),s=Math.sign(i(t,e,o)),a=Math.sign(i(n,o,t)),c=Math.sign(i(n,o,e));return r!==s&&a!==c||!(0!==r||!u(t,n,e))||!(0!==s||!u(t,o,e))||!(0!==a||!u(n,t,o))||!(0!==c||!u(n,e,o))},u=(t,e,n)=>e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y),h=(t,e)=>t.x===e.x&&t.y===e.y;e.exports={cureLocalIntersections:(t,e,n)=>{let o=t;do{const r=o.prev,i=o.next.next;!h(r,i)&&l(r,o,o.next,i)&&c(r,i)&&c(i,r)&&(e.push(r.i/n),e.push(o.i/n),e.push(i.i/n),s(o),s(o.next),o=t=i),o=o.next}while(o!==t);return a(o)},filterPoints:a,isValidDiagonal:(t,e)=>t.next.i!==e.i&&t.prev.i!==e.i&&!((t,e)=>{let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&l(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1})(t,e)&&(c(t,e)&&c(e,t)&&((t,e)=>{let n=t,o=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o})(t,e)&&(i(t.prev,t,e.prev)||i(t,e.prev,e))||h(t,e)&&i(t.prev,t,t.next)>0&&i(e.prev,e,e.next)>0),linkedPolygon:(t,e,n,o,i)=>{let a;if(i===((t,e,n,o)=>{let r=0;for(let s=e,i=n-o;s<n;s+=o)r+=(t[i]-t[s])*(t[s+1]+t[i+1]),i=s;return r})(t,e,n,o)>0)for(let s=e;s<n;s+=o)a=r(s,t[s],t[s+1],a);else for(let s=n-o;s>=e;s-=o)a=r(s,t[s],t[s+1],a);return a&&h(a,a.next)&&(s(a),a=a.next),a},locallyInside:c,splitPolygon:(t,e)=>{const n=new o(t.i,t.x,t.y),r=new o(e.i,e.x,e.y),s=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}}},{"./linkedList":314,"./triangle":318}],317:[function(t,e,n){const o=t("../../../geometries/geom2"),r=t("../../../maths/plane"),s=t("../../../maths/vec2"),i=t("../../../maths/vec3"),a=t("../slice/calculatePlane"),c=t("./assignHoles");e.exports=class{constructor(t){this.plane=a(t);const e=i.orthogonal(i.create(),this.plane),n=i.cross(i.create(),this.plane,e);this.v=i.normalize(n,n),this.u=i.cross(i.create(),this.v,this.plane),this.basisMap=new Map;const r=t.edges.map((t=>t.map((t=>this.to2D(t))))),s=o.create(r);this.roots=c(s)}to2D(t){const e=s.fromValues(i.dot(t,this.u),i.dot(t,this.v));return this.basisMap.set(e,t),e}to3D(t){const e=this.basisMap.get(t);if(e)return e;{console.log("Warning: point not in original slice");const e=i.scale(i.create(),this.u,t[0]),n=i.scale(i.create(),this.v,t[1]),o=i.scale(i.create(),r,r[3]),s=i.add(e,e,o);return i.add(n,n,s)}}}},{"../../../geometries/geom2":38,"../../../maths/plane":174,"../../../maths/vec2":202,"../../../maths/vec3":233,"../slice/calculatePlane":331,"./assignHoles":311}],318:[function(t,e,n){e.exports={area:(t,e,n)=>(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y),pointInTriangle:(t,e,n,o,r,s,i,a)=>(r-i)*(e-a)-(t-i)*(s-a)>=0&&(t-i)*(o-a)-(n-i)*(e-a)>=0&&(n-i)*(s-a)-(r-i)*(o-a)>=0}},{}],319:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../geometries/geom2"),s=t("../../geometries/geom3"),i=t("../../geometries/poly3"),a=t("./slice"),c=t("./slice/repair"),l=t("./extrudeWalls"),u=(t,e,n)=>{let s=null;return r.isA(n)&&(s=a.fromSides(r.toSides(n))),i.isA(n)&&(s=a.fromPoints(i.toPoints(n))),0===t||1===t?a.transform(o.fromTranslation(o.create(),[0,0,t]),s):null};e.exports=(t,e)=>{const n={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:u},{numberOfSlices:o,capStart:r,capEnd:h,close:p,repair:m,callback:d}=Object.assign({},n,t);if(o<2)throw new Error("numberOfSlices must be 2 or more");m&&(e=c(e));const f=o-1;let g=null,v=null,y=null,b=[];for(let t=0;t<o;t++){const n=d(t/f,t,e);if(n){if(!a.isA(n))throw new Error("the callback function must return slice objects");if(0===a.toEdges(n).length)throw new Error("the callback function must return slices with one or more edges");y&&(b=b.concat(l(y,n))),0===t&&(g=n),t===o-1&&(v=n),y=n}}if(h){const t=a.toPolygons(v);b=b.concat(t)}if(r){const t=a.toPolygons(g).map(i.invert);b=b.concat(t)}return r||h||p&&!a.equals(v,g)&&(b=b.concat(l(v,g))),s.create(b)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/mat4":155,"./extrudeWalls":328,"./slice":337,"./slice/repair":339}],320:[function(t,e,n){const{TAU:o}=t("../../maths/constants"),r=t("./slice"),s=t("../../maths/mat4"),i=t("./extrudeFromSlices"),a=t("../../geometries/geom2");e.exports=(t,e)=>{const n={angle:o,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:c,endOffset:l,segmentsPerRotation:u,startAngle:h}=Object.assign({},n,t);let p;if(p=!t.pitch&&t.height?t.height/(c/o):t.pitch?t.pitch:n.pitch,u<3)throw new Error("The number of segments per rotation needs to be at least 3.");const m=a.toSides(e);if(0===m.length)throw new Error("the given geometry cannot be empty");const d=m.filter((t=>t[0][0]>=0));let f=r.fromSides(m);0===d.length&&(f=r.reverse(f));const g=Math.round(u/o*Math.abs(c)),v=g>=2?g:2,y=s.create();let b;return i({numberOfSlices:v+1,callback:(t,e,n)=>{const i=h+c/v*e,a=l/v*e,u=(i-h)/o*p;return s.multiply(y,s.fromTranslation(s.create(),[a,0,u*Math.sign(c)]),s.fromXRotation(s.create(),-o/4*Math.sign(c))),b=s.create(),s.multiply(b,s.fromZRotation(s.create(),i),y),r.transform(b,n)}},f)}},{"../../geometries/geom2":38,"../../maths/constants":106,"../../maths/mat4":155,"./extrudeFromSlices":319,"./slice":337}],321:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/path2"),i=t("./extrudeLinearGeom2"),a=t("./extrudeLinearPath2");e.exports=(t,...e)=>{const{height:n,twistAngle:c,twistSteps:l,repair:u}=Object.assign({},{height:1,twistAngle:0,twistSteps:1,repair:!0},t);if(0===(e=o(e)).length)throw new Error("wrong number of arguments");t={offset:[0,0,n],twistAngle:c,twistSteps:l,repair:u};const h=e.map((e=>s.isA(e)?a(t,e):r.isA(e)?i(t,e):e));return 1===h.length?h[0]:h}},{"../../geometries/geom2":38,"../../geometries/path2":74,"../../utils/flatten":408,"./extrudeLinearGeom2":322,"./extrudeLinearPath2":323}],322:[function(t,e,n){const o=t("../../maths/mat4"),r=t("../../maths/vec3"),s=t("../../geometries/geom2"),i=t("./slice"),a=t("./extrudeFromSlices");e.exports=(t,e)=>{let{offset:n,twistAngle:c,twistSteps:l,repair:u}=Object.assign({},{offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0},t);if(l<1)throw new Error("twistSteps must be 1 or more");0===c&&(l=1);const h=r.clone(n),p=s.toSides(e);if(0===p.length)throw new Error("the given geometry cannot be empty");const m=i.fromSides(p);h[2]<0&&i.reverse(m,m);const d=o.create();return a(t={numberOfSlices:l+1,capStart:!0,capEnd:!0,repair:u,callback:(t,e,n)=>{const s=e/l*c,a=r.scale(r.create(),h,e/l);return o.multiply(d,o.fromZRotation(d,s),o.fromTranslation(o.create(),a)),i.transform(d,n)}},m)}},{"../../geometries/geom2":38,"../../maths/mat4":155,"../../maths/vec3":233,"./extrudeFromSlices":319,"./slice":337}],323:[function(t,e,n){const o=t("../../geometries/geom2"),r=t("../../geometries/path2"),s=t("./extrudeLinearGeom2");e.exports=(t,e)=>{if(!e.isClosed)throw new Error("extruded path must be closed");const n=r.toPoints(e),i=o.fromPoints(n);return s(t,i)}},{"../../geometries/geom2":38,"../../geometries/path2":74,"./extrudeLinearGeom2":322}],324:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/path2"),i=t("./extrudeRectangularPath2"),a=t("./extrudeRectangularGeom2");e.exports=(t,...e)=>{const{size:n,height:c}=Object.assign({},{size:1,height:1},t);if(0===(e=o(e)).length)throw new Error("wrong number of arguments");if(n<=0)throw new Error("size must be positive");if(c<=0)throw new Error("height must be positive");const l=e.map((e=>s.isA(e)?i(t,e):r.isA(e)?a(t,e):e));return 1===l.length?l[0]:l}},{"../../geometries/geom2":38,"../../geometries/path2":74,"../../utils/flatten":408,"./extrudeRectangularGeom2":325,"./extrudeRectangularPath2":326}],325:[function(t,e,n){const{area:o}=t("../../maths/utils"),r=t("../../geometries/geom2"),s=t("../../geometries/path2"),i=t("../expansions/expand"),a=t("./extrudeLinearGeom2");e.exports=(t,e)=>{const{size:n,height:c}=Object.assign({},{size:1,height:1},t);t.delta=n,t.offset=[0,0,c];const l=r.toOutlines(e);if(0===l.length)throw new Error("the given geometry cannot be empty");const u=l.map((e=>(o(e)<0&&e.reverse(),i(t,s.fromPoints({closed:!0},e))))).reduce(((t,e)=>t.concat(r.toSides(e))),[]),h=r.create(u);return a(t,h)}},{"../../geometries/geom2":38,"../../geometries/path2":74,"../../maths/utils":180,"../expansions/expand":300,"./extrudeLinearGeom2":322}],326:[function(t,e,n){const o=t("../../geometries/path2"),r=t("../expansions/expand"),s=t("./extrudeLinearGeom2");e.exports=(t,e)=>{const{size:n,height:i}=Object.assign({},{size:1,height:1},t);if(t.delta=n,t.offset=[0,0,i],0===o.toPoints(e).length)throw new Error("the given geometry cannot be empty");const a=r(t,e);return s(t,a)}},{"../../geometries/path2":74,"../expansions/expand":300,"./extrudeLinearGeom2":322}],327:[function(t,e,n){const{TAU:o}=t("../../maths/constants"),r=t("../../maths/mat4"),{mirrorX:s}=t("../transforms/mirror"),i=t("../../geometries/geom2"),a=t("./slice"),c=t("./extrudeFromSlices");e.exports=(t,e)=>{const n={segments:12,startAngle:0,angle:o,overflow:"cap"};let{segments:l,startAngle:u,angle:h,overflow:p}=Object.assign({},n,t);if(l<3)throw new Error("segments must be greater then 3");u=Math.abs(u)>o?u%o:u,h=Math.abs(h)>o?h%o:h;let m=u+h;if(m=Math.abs(m)>o?m%o:m,m<u){const t=u;u=m,m=t}let d=m-u;if(d<=0&&(d=o),Math.abs(d)<o){const t=o/l;l=Math.floor(Math.abs(d)/t),Math.abs(d)>l*t&&l++}let f=i.toSides(e);if(0===f.length)throw new Error("the given geometry cannot be empty");const g=f.filter((t=>t[0][0]<0)),v=f.filter((t=>t[0][0]>=0));g.length>0&&v.length>0&&"cap"===p&&(g.length>v.length?(f=f.map((t=>{let e=t[0],n=t[1];return e=[Math.min(e[0],0),e[1]],n=[Math.min(n[0],0),n[1]],[e,n]})),e=i.reverse(i.create(f)),e=s(e)):v.length>=g.length&&(f=f.map((t=>{let e=t[0],n=t[1];return e=[Math.max(e[0],0),e[1]],n=[Math.max(n[0],0),n[1]],[e,n]})),e=i.create(f)));const y=d/l,b=Math.abs(d)<o,x=a.fromSides(i.toSides(e));a.reverse(x,x);const A=r.create();return c(t={numberOfSlices:l+1,capStart:b,capEnd:b,close:!b,callback:(t,e,n)=>{let s=y*e+u;return d===o&&e===l&&(s=u),r.multiply(A,r.fromZRotation(A,s),r.fromXRotation(r.create(),o/4)),a.transform(A,n)}},x)}},{"../../geometries/geom2":38,"../../maths/constants":106,"../../maths/mat4":155,"../transforms/mirror":373,"./extrudeFromSlices":319,"./slice":337}],328:[function(t,e,n){const{EPS:o}=t("../../maths/constants"),r=t("../../maths/vec3"),s=t("../../geometries/poly3"),i=t("./slice"),a=(t,e)=>t===e?t:t<e?a(e,t):1===e?1:0===e?t:a(e,t%e),c=(t,e)=>{const n=t/e.length;if(1===n)return e;const o=r.fromValues(n,n,n),s=[];return e.forEach((t=>{const e=r.subtract(r.create(),t[1],t[0]);r.divide(e,e,o);let i=t[0];for(let t=1;t<=n;++t){const t=r.add(r.create(),i,e);s.push([i,t]),i=t}})),s},l=o*o/2*Math.sin(Math.PI/3);e.exports=(t,e)=>{let n=i.toEdges(t),o=i.toEdges(e);if(n.length!==o.length){const t=(r=n.length)*(u=o.length)/a(r,u);t!==n.length&&(n=c(t,n)),t!==o.length&&(o=c(t,o))}var r,u;const h=[];return n.forEach(((t,e)=>{const n=o[e],r=s.create([t[0],t[1],n[1]]),i=s.measureArea(r);Number.isFinite(i)&&i>l&&h.push(r);const a=s.create([t[0],n[1],n[0]]),c=s.measureArea(a);Number.isFinite(c)&&c>l&&h.push(a)})),h}},{"../../geometries/poly3":91,"../../maths/constants":106,"../../maths/vec3":233,"./slice":337}],329:[function(t,e,n){e.exports={extrudeFromSlices:t("./extrudeFromSlices"),extrudeLinear:t("./extrudeLinear"),extrudeRectangular:t("./extrudeRectangular"),extrudeRotate:t("./extrudeRotate"),extrudeHelical:t("./extrudeHelical"),project:t("./project"),slice:t("./slice")}},{"./extrudeFromSlices":319,"./extrudeHelical":320,"./extrudeLinear":321,"./extrudeRectangular":324,"./extrudeRotate":327,"./project":330,"./slice":337}],330:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/utils/aboutEqualNormals"),s=t("../../maths/plane"),i=t("../../maths/mat4"),a=t("../../geometries/geom2"),c=t("../../geometries/geom3"),l=t("../../geometries/poly3"),u=t("../../measurements/measureEpsilon"),h=t("../booleans/unionGeom2");e.exports=(t,...e)=>{const{axis:n,origin:p}=Object.assign({},{axis:[0,0,1],origin:[0,0,0]},t);if(0===(e=o(e)).length)throw new Error("wrong number of arguments");t={axis:n,origin:p};const m=e.map((e=>c.isA(e)?((t,e)=>{const n=s.fromNormalAndPoint(s.create(),t.axis,t.origin);if(Number.isNaN(n[0])||Number.isNaN(n[1])||Number.isNaN(n[2])||Number.isNaN(n[3]))throw new Error("project: invalid axis or origin");const o=u(e),p=o*o*Math.sqrt(3)/4;if(0===o)return a.create();const m=c.toPolygons(e);let d=[];for(let t=0;t<m.length;t++){const e=m[t].vertices.map((t=>s.projectionOfPoint(n,t))),o=l.create(e),i=l.plane(o);r(n,i)&&(l.measureArea(o)<p||d.push(o))}if(!r(n,[0,0,1])){const t=i.fromVectorRotation(i.create(),n,[0,0,1]);d=d.map((e=>l.transform(t,e)))}d=d.sort(((t,e)=>l.measureArea(e)-l.measureArea(t)));const f=d.map((t=>a.fromPoints(t.vertices)));return h(f)})(t,e):e));return 1===m.length?m[0]:m}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/mat4":155,"../../maths/plane":174,"../../maths/utils/aboutEqualNormals":178,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"../booleans/unionGeom2":297}],331:[function(t,e,n){const o=t("../../../maths/plane"),r=t("../../../maths/vec3");e.exports=t=>{const e=t.edges;if(e.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const n=e.reduce(((t,e)=>r.add(r.create(),t,e[0])),r.create());let s;r.scale(n,n,1/e.length);let i=0;e.forEach((t=>{if(!r.equals(t[0],t[1])){const e=r.squaredDistance(n,t[0]);e>i&&(s=t,i=e)}}));const a=e.find((t=>r.equals(t[1],s[0])));return o.fromPoints(o.create(),a[0],s[0],s[1])}},{"../../../maths/plane":174,"../../../maths/vec3":233}],332:[function(t,e,n){const o=t("./create"),r=t("../../../maths/vec3");e.exports=(...t)=>{let e,n;return 1===t.length?(e=o(),n=t[0]):(e=t[0],n=t[1]),e.edges=n.edges.map((t=>[r.clone(t[0]),r.clone(t[1])])),e}},{"../../../maths/vec3":233,"./create":333}],333:[function(t,e,n){e.exports=t=>(t||(t=[]),{edges:t})},{}],334:[function(t,e,n){const o=t("../../../maths/vec3");e.exports=(t,e)=>{const n=t.edges,r=e.edges;return n.length===r.length&&n.reduce(((t,e,n)=>{const s=r[n],i=o.squaredDistance(e[0],s[0]);return t&&i<Number.EPSILON}),!0)}},{"../../../maths/vec3":233}],335:[function(t,e,n){const o=t("../../../maths/vec3"),r=t("./create");e.exports=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");if(t.length<3)throw new Error("the given points must contain THREE or more points");const e=[];let n=t[t.length-1];return t.forEach((t=>{2===t.length&&e.push([o.fromVec2(o.create(),n),o.fromVec2(o.create(),t)]),3===t.length&&e.push([n,t]),n=t})),r(e)}},{"../../../maths/vec3":233,"./create":333}],336:[function(t,e,n){const o=t("../../../maths/vec3"),r=t("./create");e.exports=t=>{if(!Array.isArray(t))throw new Error("the given sides must be an array");const e=[];return t.forEach((t=>{e.push([o.fromVec2(o.create(),t[0]),o.fromVec2(o.create(),t[1])])})),r(e)}},{"../../../maths/vec3":233,"./create":333}],337:[function(t,e,n){e.exports={calculatePlane:t("./calculatePlane"),clone:t("./clone"),create:t("./create"),equals:t("./equals"),fromPoints:t("./fromPoints"),fromSides:t("./fromSides"),isA:t("./isA"),reverse:t("./reverse"),toEdges:t("./toEdges"),toPolygons:t("./toPolygons"),toString:t("./toString"),transform:t("./transform")}},{"./calculatePlane":331,"./clone":332,"./create":333,"./equals":334,"./fromPoints":335,"./fromSides":336,"./isA":338,"./reverse":340,"./toEdges":341,"./toPolygons":342,"./toString":343,"./transform":344}],338:[function(t,e,n){e.exports=t=>!!(t&&"object"==typeof t&&"edges"in t&&Array.isArray(t.edges))},{}],339:[function(t,e,n){const o=t("../../../maths/vec3"),r=t("./create");e.exports=t=>{if(!t.edges)return t;let e=t.edges;const n=new Map,s=new Map;e=e.filter((t=>!o.equals(t[0],t[1]))),e.forEach((t=>{const e=t[0].toString(),o=t[1].toString();n.set(e,t[0]),n.set(o,t[1]),s.set(e,(s.get(e)||0)+1),s.set(o,(s.get(o)||0)-1)}));const i=[],a=[];return s.forEach(((t,e)=>{t<0&&i.push(e),t>0&&a.push(e)})),i.forEach((t=>{const r=n.get(t);let s,i=1/0;a.forEach((t=>{const e=n.get(t),a=o.distance(r,e);a<i&&(i=a,s=e)})),console.warn(`slice.repair: repairing vertex gap ${r} to ${s} distance ${i}`),e=e.map((e=>e[0].toString()===t?[s,e[1]]:e[1].toString()===t?[e[0],s]:e))})),r(e)}},{"../../../maths/vec3":233,"./create":333}],340:[function(t,e,n){const o=t("./create");e.exports=(...t)=>{let e,n;return 1===t.length?(e=o(),n=t[0]):(e=t[0],n=t[1]),e.edges=n.edges.map((t=>[t[1],t[0]])),e}},{"./create":333}],341:[function(t,e,n){e.exports=t=>t.edges},{}],342:[function(t,e,n){const o=t("../../../geometries/poly3"),r=t("../earcut"),s=t("../earcut/polygonHierarchy");e.exports=t=>{const e=new s(t),n=[];return e.roots.forEach((({solid:t,holes:s})=>{let i=t.length;const a=[];s.forEach(((t,e)=>{a.push(i),i+=t.length}));const c=[t,...s].flat(),l=c.flat(),u=t=>e.to3D(c[t]),h=r(l,a);for(let t=0;t<h.length;t+=3){const r=h.slice(t,t+3).map(u);n.push(o.fromPointsAndPlane(r,e.plane))}})),n}},{"../../../geometries/poly3":91,"../earcut":313,"../earcut/polygonHierarchy":317}],343:[function(t,e,n){const o=t("../../../maths/vec3");e.exports=t=>{return`[${e=t.edges,e.reduce(((t,e)=>t+`[${o.toString(e[0])}, ${o.toString(e[1])}], `),"")}]`;var e}},{"../../../maths/vec3":233}],344:[function(t,e,n){const o=t("../../../maths/vec3"),r=t("./create");e.exports=(t,e)=>{const n=e.edges.map((e=>[o.transform(o.create(),e[0],t),o.transform(o.create(),e[1],t)]));return r(n)}},{"../../../maths/vec3":233,"./create":333}],345:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../utils/areAllShapesTheSameType"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=t("./hullPath2"),l=t("./hullGeom2"),u=t("./hullGeom3");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");if(!r(t))throw new Error("only hulls of the same type are supported");const e=t[0];return a.isA(e)?c(t):s.isA(e)?l(t):i.isA(e)?u(t):e}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../utils/areAllShapesTheSameType":406,"../../utils/flatten":408,"./hullGeom2":347,"./hullGeom3":348,"./hullPath2":349}],346:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../booleans/union"),s=t("./hull");e.exports=(...t)=>{if((t=o(t)).length<2)throw new Error("wrong number of arguments");const e=[];for(let n=1;n<t.length;n++)e.push(s(t[n-1],t[n]));return r(e)}},{"../../utils/flatten":408,"../booleans/union":296,"./hull":345}],347:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("./hullPoints2"),i=t("./toUniquePoints");e.exports=(...t)=>{t=o(t);const e=i(t),n=s(e);return n.length<3?r.create():r.fromPoints(n)}},{"../../geometries/geom2":38,"../../utils/flatten":408,"./hullPoints2":350,"./toUniquePoints":360}],348:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("../../geometries/poly3"),i=t("./quickhull"),a=t("./toUniquePoints");e.exports=(...t)=>{if(1===(t=o(t)).length)return t[0];const e=a(t),n=i(e,{skipTriangulation:!0}).map((t=>{const n=t.map((t=>e[t]));return s.create(n)}));return r.create(n)}},{"../../geometries/geom3":53,"../../geometries/poly3":91,"../../utils/flatten":408,"./quickhull":358,"./toUniquePoints":360}],349:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/path2"),s=t("./hullPoints2"),i=t("./toUniquePoints");e.exports=(...t)=>{t=o(t);const e=i(t),n=s(e);return r.fromPoints({closed:!0},n)}},{"../../geometries/path2":74,"../../utils/flatten":408,"./hullPoints2":350,"./toUniquePoints":360}],350:[function(t,e,n){const o=t("../../maths/vec2");e.exports=t=>{let e=o.fromValues(1/0,1/0);t.forEach((t=>{(t[1]<e[1]||t[1]===e[1]&&t[0]<e[0])&&(e=t)}));const n=[];t.forEach((t=>{const r=(i=t[1]-e[1],a=t[0]-e[0],0===i&&0===a?-1/0:-a/i),s=o.squaredDistance(t,e);var i,a;n.push({point:t,angle:r,distSq:s})})),n.sort(((t,e)=>t.angle!==e.angle?t.angle-e.angle:t.distSq-e.distSq));const r=[];return n.forEach((t=>{let e=r.length;for(;e>1&&(n=r[e-2],o=r[e-1],s=t.point,(o[0]-n[0])*(s[1]-n[1])-(o[1]-n[1])*(s[0]-n[0])<=Number.EPSILON);)r.pop(),e=r.length;var n,o,s;r.push(t.point)})),r}},{"../../maths/vec2":202}],351:[function(t,e,n){e.exports={hull:t("./hull"),hullChain:t("./hullChain")}},{"./hull":345,"./hullChain":346}],352:[function(t,e,n){const o=t("../../../maths/vec3/add"),r=t("../../../maths/vec3/copy"),s=t("../../../maths/vec3/cross"),i=t("../../../maths/vec3/dot"),a=t("../../../maths/vec3/length"),c=t("../../../maths/vec3/normalize"),l=t("../../../maths/vec3/scale"),u=t("../../../maths/vec3/subtract"),h=t("./HalfEdge");class p{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=0,this.edge=null,this.nVertices=0}getEdge(t){if("number"!=typeof t)throw Error("requires a number");let e=this.edge;for(;t>0;)e=e.next,t-=1;for(;t<0;)e=e.prev,t+=1;return e}computeNormal(){const t=this.edge,e=t.next;let n=e.next;const i=u([],e.head().point,t.head().point),c=[],h=[];for(this.nVertices=2,this.normal=[0,0,0];n!==t;)r(h,i),u(i,n.head().point,t.head().point),o(this.normal,this.normal,s(c,h,i)),n=n.next,this.nVertices+=1;this.area=a(this.normal),this.normal=l(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let t,e=0,n=this.edge;do{const o=n.lengthSquared();o>e&&(t=n,e=o),n=n.next}while(n!==this.edge);const r=t.tail().point,s=t.head().point,a=u([],s,r),h=Math.sqrt(e);l(a,a,1/h);const p=i(this.normal,a);l(a,a,-p),o(this.normal,this.normal,a),c(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do{o(this.centroid,this.centroid,t.head().point),t=t.next}while(t!==this.edge);l(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){void 0!==t?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=i(this.normal,this.centroid)}distanceToPlane(t){return i(this.normal,t)-this.offset}connectHalfEdges(t,e){let n;if(t.opposite.face===e.opposite.face){const o=e.opposite.face;let r;t===this.edge&&(this.edge=e),3===o.nVertices?(r=e.opposite.prev.opposite,o.mark=2,n=o):(r=e.opposite.next,o.edge===r.prev&&(o.edge=r),r.prev=r.prev.prev,r.prev.next=r),e.prev=t.prev,e.prev.next=e,e.setOpposite(r),o.computeNormalAndCentroid()}else t.next=e,e.prev=t;return n}mergeAdjacentFaces(t,e){const n=t.opposite,o=n.face;e.push(o),o.mark=2;let r,s,i=t.prev,a=t.next,c=n.prev,l=n.next;for(;i.opposite.face===o;)i=i.prev,l=l.next;for(;a.opposite.face===o;)a=a.next,c=c.prev;for(r=l;r!==c.next;r=r.next)r.face=this;return this.edge=a,s=this.connectHalfEdges(c,a),s&&e.push(s),s=this.connectHalfEdges(i,l),s&&e.push(s),this.computeNormalAndCentroid(),e}collectIndices(){const t=[];let e=this.edge;do{t.push(e.head().index),e=e.next}while(e!==this.edge);return t}static createTriangle(t,e,n,o=0){const r=new p,s=new h(t,r),i=new h(e,r),a=new h(n,r);return s.next=a.prev=i,i.next=s.prev=a,a.next=i.prev=s,r.edge=s,r.computeNormalAndCentroid(o),r}}e.exports={VISIBLE:0,NON_CONVEX:1,DELETED:2,Face:p}},{"../../../maths/vec3/add":220,"../../../maths/vec3/copy":223,"../../../maths/vec3/cross":225,"../../../maths/vec3/dot":228,"../../../maths/vec3/length":234,"../../../maths/vec3/normalize":240,"../../../maths/vec3/scale":245,"../../../maths/vec3/subtract":249,"./HalfEdge":353}],353:[function(t,e,n){const o=t("../../../maths/vec3/distance"),r=t("../../../maths/vec3/squaredDistance");e.exports=class{constructor(t,e){this.vertex=t,this.face=e,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?o(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?r(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}}},{"../../../maths/vec3/distance":226,"../../../maths/vec3/squaredDistance":247}],354:[function(t,e,n){const o=t("../../../maths/vec3/dot"),r=t("./point-line-distance"),s=t("./get-plane-normal"),i=t("./VertexList"),a=t("./Vertex"),{Face:c,VISIBLE:l,NON_CONVEX:u,DELETED:h}=t("./Face");e.exports=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new i,this.unclaimed=new i,this.vertices=[];for(let e=0;e<t.length;e+=1)this.vertices.push(new a(t[e],e));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,e){t.face=e,e.outside?this.claimed.insertBefore(e.outside,t):this.claimed.add(t),e.outside=t}removeVertexFromFace(t,e){t===e.outside&&(t.next&&t.next.face===e?e.outside=t.next:e.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let e=t.outside;for(;e.next&&e.next.face===t;)e=e.next;return this.claimed.removeChain(t.outside,e),e.next=null,t.outside}}deleteFaceVertices(t,e){const n=this.removeAllVerticesFromFace(t);if(n)if(e){let t;for(let o=n;o;o=t)t=o.next,e.distanceToPlane(o.point)>this.tolerance?this.addVertexToFace(o,e):this.unclaimed.add(o)}else this.unclaimed.addAll(n)}resolveUnclaimedPoints(t){let e=this.unclaimed.first();for(let n=e;n;n=e){e=n.next;let o,r=this.tolerance;for(let e=0;e<t.length;e+=1){const s=t[e];if(s.mark===l){const t=s.distanceToPlane(n.point);if(t>r&&(r=t,o=s),r>1e3*this.tolerance)break}}o&&this.addVertexToFace(n,o)}}computeExtremes(){const t=[],e=[],n=[],o=[];let r,s;for(r=0;r<3;r+=1)n[r]=o[r]=this.vertices[0];for(r=0;r<3;r+=1)t[r]=e[r]=this.vertices[0].point[r];for(r=1;r<this.vertices.length;r+=1){const i=this.vertices[r],a=i.point;for(s=0;s<3;s+=1)a[s]<t[s]&&(t[s]=a[s],n[s]=i);for(s=0;s<3;s+=1)a[s]>e[s]&&(e[s]=a[s],o[s]=i)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(e[0]))+Math.max(Math.abs(t[1]),Math.abs(e[1]))+Math.max(Math.abs(t[2]),Math.abs(e[2]))),[n,o]}createInitialSimplex(){const t=this.vertices,[e,n]=this.computeExtremes();let i,a,l,u,h=0,p=0;for(l=0;l<3;l+=1){const t=n[l].point[l]-e[l].point[l];t>h&&(h=t,p=l)}const m=e[p],d=n[p];for(h=0,l=0;l<this.vertices.length;l+=1){const t=this.vertices[l];if(t!==m&&t!==d){const e=r(t.point,m.point,d.point);e>h&&(h=e,i=t)}}const f=s([],m.point,d.point,i.point),g=o(m.point,f);for(h=-1,l=0;l<this.vertices.length;l+=1){const t=this.vertices[l];if(t!==m&&t!==d&&t!==i){const e=Math.abs(o(f,t.point)-g);e>h&&(h=e,a=t)}}const v=[];if(o(a.point,f)-g<0)for(v.push(c.createTriangle(m,d,i),c.createTriangle(a,d,m),c.createTriangle(a,i,d),c.createTriangle(a,m,i)),l=0;l<3;l+=1){const t=(l+1)%3;v[l+1].getEdge(2).setOpposite(v[0].getEdge(t)),v[l+1].getEdge(1).setOpposite(v[t+1].getEdge(0))}else for(v.push(c.createTriangle(m,i,d),c.createTriangle(a,m,d),c.createTriangle(a,d,i),c.createTriangle(a,i,m)),l=0;l<3;l+=1){const t=(l+1)%3;v[l+1].getEdge(2).setOpposite(v[0].getEdge((3-l)%3)),v[l+1].getEdge(0).setOpposite(v[t+1].getEdge(1))}for(l=0;l<4;l+=1)this.faces.push(v[l]);for(l=0;l<t.length;l+=1){const e=t[l];if(e!==m&&e!==d&&e!==i&&e!==a){let t;for(h=this.tolerance,u=0;u<4;u+=1){const n=v[u].distanceToPlane(e.point);n>h&&(h=n,t=v[u])}t&&this.addVertexToFace(e,t)}}}reindexFaceAndVertices(){const t=[];for(let e=0;e<this.faces.length;e+=1){const n=this.faces[e];n.mark===l&&t.push(n)}this.faces=t}collectFaces(t){const e=[];for(let n=0;n<this.faces.length;n+=1){if(this.faces[n].mark!==l)throw Error("attempt to include a destroyed face in the hull");const o=this.faces[n].collectIndices();if(t)e.push(o);else for(let t=0;t<o.length-2;t+=1)e.push([o[0],o[t+1],o[t+2]])}return e}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,e,n=0;const o=this.claimed.first().face;for(e=o.outside;e&&e.face===o;e=e.next){const r=o.distanceToPlane(e.point);r>n&&(n=r,t=e)}return t}}computeHorizon(t,e,n,o){let r;this.deleteFaceVertices(n),n.mark=h,r=e?e.next:e=n.getEdge(0);do{const e=r.opposite,n=e.face;n.mark===l&&(n.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,e,n,o):o.push(r)),r=r.next}while(r!==e)}addAdjoiningFace(t,e){const n=c.createTriangle(t,e.tail(),e.head());return this.faces.push(n),n.getEdge(-1).setOpposite(e.opposite),n.getEdge(0)}addNewFaces(t,e){let n,o;this.newFaces=[];for(let r=0;r<e.length;r+=1){const s=e[r],i=this.addAdjoiningFace(t,s);n?i.next.setOpposite(o):n=i,this.newFaces.push(i.face),o=i}n.next.setOpposite(o)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,e){let n=t.edge,o=!0,r=0;do{if(r>=t.nVertices)throw Error("merge recursion limit exceeded");const s=n.opposite.face;let i=!1;if(2===e?(this.oppositeFaceDistance(n)>-this.tolerance||this.oppositeFaceDistance(n.opposite)>-this.tolerance)&&(i=!0):t.area>s.area?this.oppositeFaceDistance(n)>-this.tolerance?i=!0:this.oppositeFaceDistance(n.opposite)>-this.tolerance&&(o=!1):this.oppositeFaceDistance(n.opposite)>-this.tolerance?i=!0:this.oppositeFaceDistance(n)>-this.tolerance&&(o=!1),i){const e=t.mergeAdjacentFaces(n,[]);for(let n=0;n<e.length;n+=1)this.deleteFaceVertices(e[n],t);return!0}n=n.next,r+=1}while(n!==t.edge);return o||(t.mark=u),!1}addVertexToHull(t){const e=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,e),this.addNewFaces(t,e);for(let t=0;t<this.newFaces.length;t+=1){const e=this.newFaces[t];if(e.mark===l)for(;this.doAdjacentMerge(e,1););}for(let t=0;t<this.newFaces.length;t+=1){const e=this.newFaces[t];if(e.mark===u)for(e.mark=l;this.doAdjacentMerge(e,2););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}}},{"../../../maths/vec3/dot":228,"./Face":352,"./Vertex":355,"./VertexList":356,"./get-plane-normal":357,"./point-line-distance":359}],355:[function(t,e,n){e.exports=class{constructor(t,e){this.point=t,this.index=e,this.next=null,this.prev=null,this.face=null}}},{}],356:[function(t,e,n){e.exports=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,e){e.prev=t.prev,e.next=t,e.prev?e.prev.next=e:this.head=e,t.prev=e}insertAfter(t,e){e.prev=t,e.next=t.next,e.next?e.next.prev=e:this.tail=e,t.next=e}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,e){t.prev?t.prev.next=e.next:this.head=e.next,e.next?e.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}}},{}],357:[function(t,e,n){const o=t("../../../maths/vec3/cross"),r=t("../../../maths/vec3/normalize"),s=t("../../../maths/vec3/subtract");e.exports=(t,e,n,i)=>{const a=[0,0,0];return s(t,e,n),s(a,n,i),o(t,t,a),r(t,t)}},{"../../../maths/vec3/cross":225,"../../../maths/vec3/normalize":240,"../../../maths/vec3/subtract":249}],358:[function(t,e,n){const o=t("./QuickHull");e.exports=(t,e={})=>{const n=new o(t);return n.build(),n.collectFaces(e.skipTriangulation)}},{"./QuickHull":354}],359:[function(t,e,n){const o=t("../../../maths/vec3/cross"),r=t("../../../maths/vec3/subtract"),s=t("../../../maths/vec3/squaredLength");e.exports=(t,e,n)=>Math.sqrt(((t,e,n)=>{const i=[],a=[];r(i,n,e),r(a,t,e);const c=s(o([],a,i)),l=s(i);if(0===l)throw Error("a and b are the same point");return c/l})(t,e,n))},{"../../../maths/vec3/cross":225,"../../../maths/vec3/squaredLength":248,"../../../maths/vec3/subtract":249}],360:[function(t,e,n){const o=t("../../geometries/geom2"),r=t("../../geometries/geom3"),s=t("../../geometries/path2");e.exports=t=>{const e=new Set,n=[],i=t=>{const o=t.toString();e.has(o)||(n.push(t),e.add(o))};return t.forEach((t=>{o.isA(t)?o.toPoints(t).forEach(i):r.isA(t)?r.toPoints(t).forEach((t=>t.forEach(i))):s.isA(t)&&s.toPoints(t).forEach(i)})),n}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74}],361:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../measurements/measureEpsilon"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=t("./snapPolygons"),l=t("./mergePolygons"),u=t("./insertTjunctions"),h=t("./triangulatePolygons");e.exports=(t,...e)=>{if(0===(e=o(e)).length)throw new Error("wrong number of arguments");const n=e.map((e=>{if(a.isA(e))return((t,e)=>e)(0,e);if(s.isA(e))return((t,e)=>e)(0,e);if(i.isA(e))return((t,e)=>{const{snap:n,simplify:o,triangulate:s}=Object.assign({},{snap:!1,simplify:!1,triangulate:!1},t),a=r(e);let p=i.toPolygons(e);n&&(p=c(a,p)),o&&(p=l(a,p)),s&&(p=u(p),p=h(a,p));const m=Object.assign({},e);return m.polygons=p,m})(t,e);throw new Error("invalid geometry")}));return 1===n.length?n[0]:n}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"./insertTjunctions":363,"./mergePolygons":364,"./snapPolygons":368,"./triangulatePolygons":369}],362:[function(t,e,n){e.exports={generalize:t("./generalize"),snap:t("./snap"),retessellate:t("./retessellate")}},{"./generalize":361,"./retessellate":366,"./snap":367}],363:[function(t,e,n){const o=t("../../maths/constants"),r=t("../../maths/vec3"),s=t("../../geometries/poly3"),i=t=>`${t}`,a=(t,e,n,o,r,s)=>{const a=i(o),l=i(r),u=`${a}/${l}`,h=`${l}/${a}`;if(t.has(h))return c(t,e,n,r,o,null),null;const p={vertex0:o,vertex1:r,polygonindex:s};return t.has(u)?t.get(u).push(p):t.set(u,[p]),e.has(a)?e.get(a).push(u):e.set(a,[u]),n.has(l)?n.get(l).push(u):n.set(l,[u]),u},c=(t,e,n,o,r,s)=>{const a=i(o),c=i(r),l=`${a}/${c}`;let u=-1;const h=t.get(l);for(let t=0;t<h.length;t++){const e=h[t];let n=i(e.vertex0);if(n===a&&(n=i(e.vertex1),n===c&&(null===s||e.polygonindex===s))){u=t;break}}h.splice(u,1),0===h.length&&t.delete(l),u=e.get(a).indexOf(l),e.get(a).splice(u,1),0===e.get(a).length&&e.delete(a),u=n.get(c).indexOf(l),n.get(c).splice(u,1),0===n.get(c).length&&n.delete(c)};e.exports=t=>{const e=new Map;for(let n=0;n<t.length;n++){const o=t[n],r=o.vertices.length;if(r>=3){let t=o.vertices[0],s=i(t);for(let a=0;a<r;a++){let c=a+1;c===r&&(c=0);const l=o.vertices[c],u=i(l),h=`${s}/${u}`,p=`${u}/${s}`;if(e.has(p)){const t=e.get(p);t.splice(-1,1),0===t.length&&e.delete(p)}else{const o={vertex0:t,vertex1:l,polygonindex:n};e.has(h)?e.get(h).push(o):e.set(h,[o])}t=l,s=u}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(e.size>0){const n=new Map,l=new Map,u=new Map;for(const[t,o]of e)u.set(t,!0),o.forEach((e=>{const o=i(e.vertex0),r=i(e.vertex1);n.has(o)?n.get(o).push(t):n.set(o,[t]),l.has(r)?l.get(r).push(t):l.set(r,[t])}));const h=t.slice(0);for(;0!==e.size;){for(const t of e.keys())u.set(t,!0);let t=!1;for(;;){const p=Array.from(u.keys());if(0===p.length)break;const m=p[0];let d=!0;if(e.has(m)){const p=e.get(m)[0];for(let m=0;m<2;m++){const f=0===m?p.vertex0:p.vertex1,g=0===m?p.vertex1:p.vertex0,v=i(f),y=i(g);let b=[];0===m?l.has(v)&&(b=l.get(v)):n.has(v)&&(b=n.get(v));for(let p=0;p<b.length;p++){const v=b[p],x=e.get(v)[0],A=0===m?x.vertex0:x.vertex1,E=0===m?x.vertex1:x.vertex0,w=i(A);if(i(E),w===y){c(e,n,l,f,g,null),c(e,n,l,g,f,null),d=!1,m=2,t=!0;break}{const p=f,v=g,y=A,b=r.subtract(r.create(),y,p),E=r.dot(r.subtract(r.create(),v,p),b)/r.dot(b,b);if(E>0&&E<1){const f=r.scale(r.create(),b,E);if(r.add(f,f,p),r.squaredDistance(f,v)<o.EPS*o.EPS){const o=x.polygonindex,r=h[o],p=i(x.vertex1);let f=-1;for(let t=0;t<r.vertices.length;t++)if(i(r.vertices[t])===p){f=t;break}const v=r.vertices.slice(0);v.splice(f,0,g);const y=s.create(v);h[o]=y,c(e,n,l,x.vertex0,x.vertex1,o);const b=a(e,n,l,x.vertex0,g,o),A=a(e,n,l,g,x.vertex1,o);null!==b&&u.set(b,!0),null!==A&&u.set(A,!0),d=!1,m=2,t=!0;break}}}}}}d&&u.delete(m)}if(!t)break}t=h}return e.clear(),t}},{"../../geometries/poly3":91,"../../maths/constants":106,"../../maths/vec3":233}],364:[function(t,e,n){const o=t("../../maths/utils/aboutEqualNormals"),r=t("../../maths/vec3"),s=t("../../geometries/poly3"),i=t=>{const e=s.toPoints(t),n=[];for(let t=0;t<e.length;t++){const o=(t+1)%e.length,r={v1:e[t],v2:e[o]};n.push(r)}for(let t=0;t<n.length;t++){const o=(t+1)%e.length;n[t].next=n[o],n[o].prev=n[t]}return n},a=(t,e)=>{const n=`${e.v1}:${e.v2}`;t.set(n,e)},c=(t,e)=>{const n=`${e.v1}:${e.v2}`;t.delete(n)},l=(t,e)=>{const n=`${e.v2}:${e.v1}`;return t.get(n)},u=(t,e,n)=>{let o=t.prev.v1,r=t.prev.v2,s=e.next.v2;const i=m(o,r,s,n);return o=e.prev.v1,r=e.prev.v2,s=t.next.v2,[i,m(o,r,s,n)]},h=r.create(),p=r.create(),m=(t,e,n,o)=>{const s=r.subtract(h,e,t),i=r.subtract(p,n,e);return r.cross(s,s,i),r.dot(s,o)};e.exports=(t,e)=>{const n=[];e.forEach((t=>{const e=n.find((e=>{return n=e[0],r=s.plane(t),Math.abs(n[3]-r[3])<15e-8&&o(n,r);var n,r}));e?e[1].push(t):n.push([s.plane(t),[t]])}));let r=[];return n.forEach((t=>{const e=(t=>{if(t.length<2)return t;const e=t[0].plane,n=t.slice(),o=new Map;for(;n.length>0;){const t=n.shift(),r=i(t);for(let t=0;t<r.length;t++){const n=r[t],s=l(o,n);if(s){const t=u(n,s,e);if(t[0]>=0&&t[1]>=0){const e=s.next,r=n.next;n.prev.next=s.next,n.next.prev=s.prev,s.prev.next=n.next,s.next.prev=n.prev,n.v1=null,n.v2=null,n.next=null,n.prev=null,c(o,s),s.v1=null,s.v2=null,s.next=null,s.prev=null;const i=(t,e,n)=>{const o={v1:n.v1,v2:e.v2,next:e.next,prev:n.prev};n.prev.next=o,e.next.prev=o,c(t,e),e.v1=null,e.v2=null,e.next=null,e.prev=null,c(t,n),n.v1=null,n.v2=null,n.next=null,n.prev=null};0===t[0]&&i(o,e,e.prev),0===t[1]&&i(o,r,r.prev)}}else n.next&&a(o,n)}}const r=[];return o.forEach((t=>{const e=(t=>{let e;const n=[];for(;t.next;){const e=t.next;n.push(t.v1),t.v1=null,t.v2=null,t.next=null,t.prev=null,t=e}return n.length>0&&(e=s.create(n)),e})(t);e&&r.push(e)})),o.clear(),r})(t[1]);r=r.concat(e)})),r}},{"../../geometries/poly3":91,"../../maths/utils/aboutEqualNormals":178,"../../maths/vec3":233}],365:[function(t,e,n){const{EPS:o}=t("../../maths/constants"),r=t("../../maths/line2"),s=t("../../maths/vec2"),i=t("../../maths/OrthoNormalBasis"),a=t("../../maths/utils/interpolateBetween2DPointsForY"),{insertSorted:c,fnNumberSort:l}=t("../../utils"),u=t("../../geometries/poly3");e.exports=t=>{if(t.length<2)return t;const e=[],n=t.length,h=u.plane(t[0]),p=new i(h),m=[],d=[],f=new Map,g=new Map,v=new Map,y=10/o;for(let e=0;e<n;e++){const n=t[e];let o=[],r=n.vertices.length,i=-1;if(r>0){let t,a;for(let c=0;c<r;c++){let r=p.to2D(n.vertices[c]);const l=Math.floor(r[1]*y);let u;v.has(l)?u=v.get(l):v.has(l+1)?u=v.get(l+1):v.has(l-1)?u=v.get(l-1):(u=r[1],v.set(l,r[1])),r=s.fromValues(r[0],u),o.push(r);const h=r[1];(0===c||h<t)&&(t=h,i=c),(0===c||h>a)&&(a=h);let m=g.get(h);m||(m={},g.set(h,m)),m[e]=!0}if(t>=a)o=[],r=0,i=-1;else{let n=f.get(t);n||(n=[],f.set(t,n)),n.push(e)}}o.reverse(),i=r-i-1,m.push(o),d.push(i)}const b=[];g.forEach(((t,e)=>b.push(e))),b.sort(l);let x=[],A=[];for(let t=0;t<b.length;t++){const n=[],i=b[t],l=g.get(i);for(let t=0;t<x.length;++t){const e=x[t],n=e.polygonindex;if(l[n]){const o=m[n],r=o.length;let s=e.leftvertexindex,a=e.rightvertexindex;for(;;){let t=s+1;if(t>=r&&(t=0),o[t][1]!==i)break;s=t}let c=a-1;if(c<0&&(c=r-1),o[c][1]===i&&(a=c),s!==e.leftvertexindex&&s===a)x.splice(t,1),--t;else{e.leftvertexindex=s,e.rightvertexindex=a,e.topleft=o[s],e.topright=o[a];let t=s+1;t>=r&&(t=0),e.bottomleft=o[t];let n=a-1;n<0&&(n=r-1),e.bottomright=o[n]}}}let v;if(t>=b.length-1)x=[],v=null;else{v=Number(b[t+1]);const e=.5*(i+v),n=f.get(i);for(const t in n){const o=n[t],r=m[o],s=r.length,l=d[o];let u=l;for(;;){let t=u+1;if(t>=s&&(t=0),r[t][1]!==i)break;if(t===l)break;u=t}let h=l;for(;;){let t=h-1;if(t<0&&(t=s-1),r[t][1]!==i)break;if(t===u)break;h=t}let p=u+1;p>=s&&(p=0);let f=h-1;f<0&&(f=s-1);const g={polygonindex:o,leftvertexindex:u,rightvertexindex:h,topleft:r[u],topright:r[h],bottomleft:r[p],bottomright:r[f]};c(x,g,((t,n)=>{const o=a(t.topleft,t.bottomleft,e),r=a(n.topleft,n.bottomleft,e);return o>r?1:o<r?-1:0}))}}for(const t in x){const e=x[t];let c=a(e.topleft,e.bottomleft,i);const l=s.fromValues(c,i);c=a(e.topright,e.bottomright,i);const u=s.fromValues(c,i);c=a(e.topleft,e.bottomleft,v);const h=s.fromValues(c,v);c=a(e.topright,e.bottomright,v);const p=s.fromValues(c,v),m={topleft:l,topright:u,bottomleft:h,bottomright:p,leftline:r.fromPoints(r.create(),l,h),rightline:r.fromPoints(r.create(),p,u)};if(n.length>0){const t=n[n.length-1],e=s.distance(m.topleft,t.topright),r=s.distance(m.bottomleft,t.bottomright);e<o&&r<o&&(m.topleft=t.topleft,m.leftline=t.leftline,m.bottomleft=t.bottomleft,n.splice(n.length-1,1))}n.push(m)}if(t>0){const t=new Set,i=new Set;for(let e=0;e<n.length;e++){const a=n[e];for(let e=0;e<A.length;e++)if(!i.has(e)){const n=A[e];if(s.distance(n.bottomleft,a.topleft)<o&&s.distance(n.bottomright,a.topright)<o){i.add(e);const s=r.direction(a.leftline),c=r.direction(n.leftline),l=s[0]-c[0],u=r.direction(a.rightline),h=r.direction(n.rightline),p=u[0]-h[0],m=Math.abs(l)<o,d=Math.abs(p)<o;(m||l>=0)&&(d||p>=0)&&(a.outpolygon=n.outpolygon,a.leftlinecontinues=m,a.rightlinecontinues=d,t.add(e));break}}}for(let n=0;n<A.length;n++)if(!t.has(n)){const t=A[n];t.outpolygon.rightpoints.push(t.bottomright),s.distance(t.bottomright,t.bottomleft)>o&&t.outpolygon.leftpoints.push(t.bottomleft),t.outpolygon.leftpoints.reverse();const r=t.outpolygon.rightpoints.concat(t.outpolygon.leftpoints).map((t=>p.to3D(t))),i=u.fromPointsAndPlane(r,h);i.vertices.length&&e.push(i)}}for(let t=0;t<n.length;t++){const e=n[t];e.outpolygon?(e.leftlinecontinues||e.outpolygon.leftpoints.push(e.topleft),e.rightlinecontinues||e.outpolygon.rightpoints.push(e.topright)):(e.outpolygon={leftpoints:[],rightpoints:[]},e.outpolygon.leftpoints.push(e.topleft),s.distance(e.topleft,e.topright)>o&&e.outpolygon.rightpoints.push(e.topright))}A=n}return e}},{"../../geometries/poly3":91,"../../maths/OrthoNormalBasis":105,"../../maths/constants":106,"../../maths/line2":117,"../../maths/utils/interpolateBetween2DPointsForY":181,"../../maths/vec2":202,"../../utils":410}],366:[function(t,e,n){const o=t("../../geometries/geom3"),r=t("../../geometries/poly3"),{NEPS:s}=t("../../maths/constants"),i=t("./reTesselateCoplanarPolygons"),a=(t,e)=>(n,o)=>n.plane[t]-o.plane[t]>e?1:o.plane[t]-n.plane[t]>e?-1:0;e.exports=t=>{if(t.isRetesselated)return t;const e=(t=>{let e=[t];const n=[];for(let t=3;t>=0;t--){const o=[],r=3===t?15e-9:s;e.forEach((e=>{e.sort(a(t,r));let s=0;for(let i=1;i<e.length;i++)e[i].plane[t]-e[s].plane[t]>r&&(i-s==1?n.push(e[s]):o.push(e.slice(s,i)),s=i);e.length-s==1?n.push(e[s]):o.push(e.slice(s))})),e=o}const o=[];return e.forEach((t=>{t[0]&&(o[t[0].index]=t)})),n.forEach((t=>{o[t.index]=t})),o})(o.toPolygons(t).map(((t,e)=>({vertices:t.vertices,plane:r.plane(t),index:e})))),n=[];e.forEach((t=>{if(Array.isArray(t)){const e=i(t);n.push(...e)}else n.push(t)}));const c=o.create(n);return c.isRetesselated=!0,c}},{"../../geometries/geom3":53,"../../geometries/poly3":91,"../../maths/constants":106,"./reTesselateCoplanarPolygons":365}],367:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/vec2"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=t("../../measurements/measureEpsilon"),l=t("./snapPolygons");e.exports=(...t)=>{if(0===(t=o(t)).length)throw new Error("wrong number of arguments");const e=t.map((t=>a.isA(t)?(t=>{const e=c(t),n=a.toPoints(t).map((t=>r.snap(r.create(),t,e)));return a.create(n)})(t):s.isA(t)?(t=>{const e=c(t);let n=s.toSides(t).map((t=>[r.snap(r.create(),t[0],e),r.snap(r.create(),t[1],e)]));return n=n.filter((t=>!r.equals(t[0],t[1]))),s.create(n)})(t):i.isA(t)?(t=>{const e=c(t),n=i.toPolygons(t),o=l(e,n);return i.create(o)})(t):t));return 1===e.length?e[0]:e}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../maths/vec2":202,"../../measurements/measureEpsilon":274,"../../utils/flatten":408,"./snapPolygons":368}],368:[function(t,e,n){const o=t("../../maths/vec3"),r=t("../../geometries/poly3");e.exports=(t,e)=>{let n=e.map((e=>{const n=e.vertices.map((e=>o.snap(o.create(),e,t))),s=[];for(let t=0;t<n.length;t++){const e=(t+1)%n.length;o.equals(n[t],n[e])||s.push(n[t])}const i=r.create(s);return e.color&&(i.color=e.color),i}));const s=t*t*Math.sqrt(3)/4;return n=n.filter((t=>((t,e)=>{const n=Math.abs(r.measureArea(e));return Number.isFinite(n)&&n>t})(s,t))),n}},{"../../geometries/poly3":91,"../../maths/vec3":233}],369:[function(t,e,n){const o=t("../../maths/vec3"),r=t("../../geometries/poly3");e.exports=(t,e)=>{const n=[];return e.forEach((e=>{((t,e,n)=>{const s=e.vertices.length;if(s>3){if(s>4){const i=[0,0,0];e.vertices.forEach((t=>o.add(i,i,t))),o.snap(i,o.divide(i,i,[s,s,s]),t);for(let t=0;t<s;t++){const o=r.create([i,e.vertices[t],e.vertices[(t+1)%s]]);e.color&&(o.color=e.color),n.push(o)}return}const i=r.create([e.vertices[0],e.vertices[1],e.vertices[2]]),a=r.create([e.vertices[0],e.vertices[2],e.vertices[3]]);return e.color&&(i.color=e.color,a.color=e.color),void n.push(i,a)}n.push(e)})(t,e,n)})),n}},{"../../geometries/poly3":91,"../../maths/vec3":233}],370:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../utils/padArrayToLength"),s=t("../../measurements/measureAggregateBoundingBox"),{translate:i}=t("./translate"),a=(t,e,n)=>{const o=s(t),r=[0,0,0];for(let t=0;t<3;t++)"center"===e[t]?r[t]=n[t]-(o[0][t]+o[1][t])/2:"max"===e[t]?r[t]=n[t]-o[1][t]:"min"===e[t]&&(r[t]=n[t]-o[0][t]);return i(r,t)};e.exports=(t,...e)=>{t=(t=>{if(!Array.isArray(t.modes)||t.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(t.modes=r(t.modes,"none",3),3!==t.modes.filter((t=>["center","max","min","none"].includes(t))).length)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(t.relativeTo)||t.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(t.relativeTo=r(t.relativeTo,0,3),3!==t.relativeTo.filter((t=>Number.isFinite(t)||null==t)).length)throw new Error("align(): all relativeTo values must be a number, or null.");if("boolean"!=typeof t.grouped)throw new Error("align(): grouped must be a boolean value.");return t})(t=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},t));let{modes:n,relativeTo:i,grouped:c}=t;if(0===(e=o(e)).length)throw new Error("align(): No geometries were provided to act upon");if(i.filter((t=>null==t)).length){const t=s(e);i=((t,e,n)=>{for(let o=0;o<3;o++)null==t[o]&&("center"===e[o]?t[o]=(n[0][o]+n[1][o])/2:"max"===e[o]?t[o]=n[1][o]:"min"===e[o]&&(t[o]=n[0][o]));return t})(i,n,t)}return 1===(e=c?a(e,n,i):e.map((t=>a(t,n,i)))).length?e[0]:e}},{"../../measurements/measureAggregateBoundingBox":265,"../../utils/flatten":408,"../../utils/padArrayToLength":412,"./translate":377}],371:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/geom3"),i=t("../../geometries/path2"),a=t("../../measurements/measureBoundingBox"),{translate:c}=t("./translate"),l=(t,...e)=>{const{axes:n,relativeTo:l}=Object.assign({},{axes:[!0,!0,!0],relativeTo:[0,0,0]},t);if(0===(e=o(e)).length)throw new Error("wrong number of arguments");if(3!==l.length)throw new Error("relativeTo must be an array of length 3");t={axes:n,relativeTo:l};const u=e.map((e=>i.isA(e)||r.isA(e)||s.isA(e)?((t,e)=>{const{axes:n,relativeTo:o}=Object.assign({},{axes:[!0,!0,!0],relativeTo:[0,0,0]},t),r=a(e),s=[0,0,0];return n[0]&&(s[0]=o[0]-(r[0][0]+(r[1][0]-r[0][0])/2)),n[1]&&(s[1]=o[1]-(r[0][1]+(r[1][1]-r[0][1])/2)),n[2]&&(s[2]=o[2]-(r[0][2]+(r[1][2]-r[0][2])/2)),c(s,e)})(t,e):e));return 1===u.length?u[0]:u};e.exports={center:l,centerX:(...t)=>l({axes:[!0,!1,!1]},t),centerY:(...t)=>l({axes:[!1,!0,!1]},t),centerZ:(...t)=>l({axes:[!1,!1,!0]},t)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../measurements/measureBoundingBox":269,"../../utils/flatten":408,"./translate":377}],372:[function(t,e,n){e.exports={align:t("./align"),center:t("./center").center,centerX:t("./center").centerX,centerY:t("./center").centerY,centerZ:t("./center").centerZ,mirror:t("./mirror").mirror,mirrorX:t("./mirror").mirrorX,mirrorY:t("./mirror").mirrorY,mirrorZ:t("./mirror").mirrorZ,rotate:t("./rotate").rotate,rotateX:t("./rotate").rotateX,rotateY:t("./rotate").rotateY,rotateZ:t("./rotate").rotateZ,scale:t("./scale").scale,scaleX:t("./scale").scaleX,scaleY:t("./scale").scaleY,scaleZ:t("./scale").scaleZ,transform:t("./transform"),translate:t("./translate").translate,translateX:t("./translate").translateX,translateY:t("./translate").translateY,translateZ:t("./translate").translateZ}},{"./align":370,"./center":371,"./mirror":373,"./rotate":374,"./scale":375,"./transform":376,"./translate":377}],373:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/mat4"),s=t("../../maths/plane"),i=t("../../geometries/geom2"),a=t("../../geometries/geom3"),c=t("../../geometries/path2"),l=(t,...e)=>{const{origin:n,normal:l}=Object.assign({},{origin:[0,0,0],normal:[0,0,1]},t);if(0===(e=o(e)).length)throw new Error("wrong number of arguments");const u=s.fromNormalAndPoint(s.create(),l,n);if(Number.isNaN(u[0]))throw new Error("the given origin and normal do not define a proper plane");const h=r.mirrorByPlane(r.create(),u),p=e.map((t=>c.isA(t)?c.transform(h,t):i.isA(t)?i.transform(h,t):a.isA(t)?a.transform(h,t):t));return 1===p.length?p[0]:p};e.exports={mirror:l,mirrorX:(...t)=>l({normal:[1,0,0]},t),mirrorY:(...t)=>l({normal:[0,1,0]},t),mirrorZ:(...t)=>l({normal:[0,0,1]},t)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../maths/mat4":155,"../../maths/plane":174,"../../utils/flatten":408}],374:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/mat4"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=(t,...e)=>{if(!Array.isArray(t))throw new Error("angles must be an array");if(0===(e=o(e)).length)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(0);const n=t[2],c=t[1],l=t[0],u=r.fromTaitBryanRotation(r.create(),n,c,l),h=e.map((t=>a.isA(t)?a.transform(u,t):s.isA(t)?s.transform(u,t):i.isA(t)?i.transform(u,t):t));return 1===h.length?h[0]:h};e.exports={rotate:c,rotateX:(t,...e)=>c([t,0,0],e),rotateY:(t,...e)=>c([0,t,0],e),rotateZ:(t,...e)=>c([0,0,t],e)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../maths/mat4":155,"../../utils/flatten":408}],375:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/mat4"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=(t,...e)=>{if(!Array.isArray(t))throw new Error("factors must be an array");if(0===(e=o(e)).length)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(1);if(t[0]<=0||t[1]<=0||t[2]<=0)throw new Error("factors must be positive");const n=r.fromScaling(r.create(),t),c=e.map((t=>a.isA(t)?a.transform(n,t):s.isA(t)?s.transform(n,t):i.isA(t)?i.transform(n,t):t));return 1===c.length?c[0]:c};e.exports={scale:c,scaleX:(t,...e)=>c([t,1,1],e),scaleY:(t,...e)=>c([1,t,1],e),scaleZ:(t,...e)=>c([1,1,t],e)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../maths/mat4":155,"../../utils/flatten":408}],376:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("../../geometries/geom3"),i=t("../../geometries/path2");e.exports=(t,...e)=>{if(0===(e=o(e)).length)throw new Error("wrong number of arguments");const n=e.map((e=>i.isA(e)?i.transform(t,e):r.isA(e)?r.transform(t,e):s.isA(e)?s.transform(t,e):e));return 1===n.length?n[0]:n}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../utils/flatten":408}],377:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../maths/mat4"),s=t("../../geometries/geom2"),i=t("../../geometries/geom3"),a=t("../../geometries/path2"),c=(t,...e)=>{if(!Array.isArray(t))throw new Error("offset must be an array");if(0===(e=o(e)).length)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(0);const n=r.fromTranslation(r.create(),t),c=e.map((t=>a.isA(t)?a.transform(n,t):s.isA(t)?s.transform(n,t):i.isA(t)?i.transform(n,t):t));return 1===c.length?c[0]:c};e.exports={translate:c,translateX:(t,...e)=>c([t,0,0],e),translateY:(t,...e)=>c([0,t,0],e),translateZ:(t,...e)=>c([0,0,t],e)}},{"../../geometries/geom2":38,"../../geometries/geom3":53,"../../geometries/path2":74,"../../maths/mat4":155,"../../utils/flatten":408}],378:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../geometries/path2"),{isGT:a,isGTE:c,isNumberArray:l}=t("./commonChecks");e.exports=t=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:r,makeTangent:!1,segments:32};let{center:n,radius:u,startAngle:h,endAngle:p,makeTangent:m,segments:d}=Object.assign({},e,t);if(!l(n,2))throw new Error("center must be an array of X and Y values");if(!a(u,0))throw new Error("radius must be greater than zero");if(!c(h,0))throw new Error("startAngle must be positive");if(!c(p,0))throw new Error("endAngle must be positive");if(!c(d,4))throw new Error("segments must be four or more");h%=r,p%=r;let f=r;h<p&&(f=p-h),h>p&&(f=p+(r-h));const g=Math.acos((u*u+u*u-o*o)/(2*u*u)),v=s.clone(n);let y;const b=[];if(f<g)y=s.fromAngleRadians(s.create(),h),s.scale(y,y,u),s.add(y,y,v),b.push(y);else{const t=Math.max(1,Math.floor(d*(f/r)))+1;let e=.5*t/f;e>.25&&(e=.25);const n=m?t+2:t;for(let o=0;o<=n;o++){let n=o;m&&(n=(o-1)*(t-2*e)/t+e,n<0&&(n=0),n>t&&(n=t));const r=h+n*(f/t);y=s.fromAngleRadians(s.create(),r),s.scale(y,y,u),s.add(y,y,v),b.push(y)}}return i.fromPoints({closed:!1},b)}},{"../geometries/path2":74,"../maths/constants":106,"../maths/vec2":202,"./commonChecks":380}],379:[function(t,e,n){const{TAU:o}=t("../maths/constants"),r=t("./ellipse"),{isGTE:s}=t("./commonChecks");e.exports=t=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:o,segments:32};let{center:n,radius:i,startAngle:a,endAngle:c,segments:l}=Object.assign({},e,t);if(!s(i,0))throw new Error("radius must be positive");return i=[i,i],r({center:n,radius:i,startAngle:a,endAngle:c,segments:l})}},{"../maths/constants":106,"./commonChecks":380,"./ellipse":385}],380:[function(t,e,n){e.exports={isNumberArray:(t,e)=>!!(Array.isArray(t)&&t.length>=e)&&t.every((t=>Number.isFinite(t))),isGT:(t,e)=>Number.isFinite(t)&&t>e,isGTE:(t,e)=>Number.isFinite(t)&&t>=e}},{}],381:[function(t,e,n){const o=t("./cuboid"),{isGTE:r}=t("./commonChecks");e.exports=t=>{let{center:e,size:n}=Object.assign({},{center:[0,0,0],size:2},t);if(!r(n,0))throw new Error("size must be positive");return n=[n,n,n],o({center:e,size:n})}},{"./commonChecks":380,"./cuboid":382}],382:[function(t,e,n){const o=t("../geometries/geom3"),r=t("../geometries/poly3"),{isNumberArray:s}=t("./commonChecks");e.exports=t=>{const{center:e,size:n}=Object.assign({},{center:[0,0,0],size:[2,2,2]},t);if(!s(e,3))throw new Error("center must be an array of X, Y and Z values");if(!s(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");return 0===n[0]||0===n[1]||0===n[2]?o.create():o.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map((t=>{const o=t[0].map((t=>[e[0]+n[0]/2*(2*!!(1&t)-1),e[1]+n[1]/2*(2*!!(2&t)-1),e[2]+n[2]/2*(2*!!(4&t)-1)]));return r.create(o)})))}},{"../geometries/geom3":53,"../geometries/poly3":91,"./commonChecks":380}],383:[function(t,e,n){const o=t("../geometries/geom3"),r=t("./cylinderElliptic"),{isGTE:s}=t("./commonChecks");e.exports=t=>{const{center:e,height:n,radius:i,segments:a}=Object.assign({},{center:[0,0,0],height:2,radius:1,segments:32},t);if(!s(i,0))throw new Error("radius must be positive");return 0===n||0===i?o.create():r({center:e,height:n,startRadius:[i,i],endRadius:[i,i],segments:a})}},{"../geometries/geom3":53,"./commonChecks":380,"./cylinderElliptic":384}],384:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec3"),i=t("../geometries/geom3"),a=t("../geometries/poly3"),{sin:c,cos:l}=t("../maths/utils/trigonometry"),{isGT:u,isGTE:h,isNumberArray:p}=t("./commonChecks");e.exports=t=>{const e={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:r,segments:32};let{center:n,height:m,startRadius:d,startAngle:f,endRadius:g,endAngle:v,segments:y}=Object.assign({},e,t);if(!p(n,3))throw new Error("center must be an array of X, Y and Z values");if(!u(m,0))throw new Error("height must be greater then zero");if(!p(d,2))throw new Error("startRadius must be an array of X and Y values");if(!d.every((t=>t>=0)))throw new Error("startRadius values must be positive");if(!p(g,2))throw new Error("endRadius must be an array of X and Y values");if(!g.every((t=>t>=0)))throw new Error("endRadius values must be positive");if(g.every((t=>0===t))&&d.every((t=>0===t)))throw new Error("at least one radius must be positive");if(!h(f,0))throw new Error("startAngle must be positive");if(!h(v,0))throw new Error("endAngle must be positive");if(!h(y,4))throw new Error("segments must be four or more");f%=r,v%=r;let b=r;f<v&&(b=v-f),f>v&&(b=v+(r-f));const x=Math.min(d[0],d[1],g[0],g[1]),A=Math.acos((x*x+x*x-o*o)/(2*x*x));if(b<A)throw new Error("startAngle and endAngle do not define a significant rotation");const E=Math.floor(y*(b/r)),w=s.fromValues(0,0,-m/2),D=s.fromValues(0,0,m/2),P=s.subtract(s.create(),D,w),S=s.fromValues(1,0,0),T=s.fromValues(0,1,0),C=s.create(),M=s.create(),R=s.create(),O=(t,e,n)=>{const o=e*b+f;return s.scale(C,S,n[0]*l(o)),s.scale(M,T,n[1]*c(o)),s.add(C,C,M),s.scale(R,P,t),s.add(R,R,w),s.add(s.create(),C,R)},I=(...t)=>{const e=t.map((t=>s.add(s.create(),t,n)));return a.create(e)},L=[];for(let t=0;t<E;t++){const e=t/E;let n=(t+1)/E;b===r&&t===E-1&&(n=0),g[0]===d[0]&&g[1]===d[1]?(L.push(I(w,O(0,n,g),O(0,e,g))),L.push(I(O(0,n,g),O(1,n,g),O(1,e,g),O(0,e,g))),L.push(I(D,O(1,e,g),O(1,n,g)))):(d[0]>0&&d[1]>0&&L.push(I(w,O(0,n,d),O(0,e,d))),(d[0]>0||d[1]>0)&&L.push(I(O(0,e,d),O(0,n,d),O(1,e,g))),g[0]>0&&g[1]>0&&L.push(I(D,O(1,e,g),O(1,n,g))),(g[0]>0||g[1]>0)&&L.push(I(O(1,e,g),O(0,n,d),O(1,n,g))))}return b<r&&(L.push(I(w,O(0,0,d),D)),L.push(I(O(0,0,d),O(1,0,g),D)),L.push(I(w,D,O(0,1,d))),L.push(I(O(0,1,d),D,O(1,1,g)))),i.create(L)}},{"../geometries/geom3":53,"../geometries/poly3":91,"../maths/constants":106,"../maths/utils/trigonometry":184,"../maths/vec3":233,"./commonChecks":380}],385:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../geometries/geom2"),{sin:a,cos:c}=t("../maths/utils/trigonometry"),{isGTE:l,isNumberArray:u}=t("./commonChecks");e.exports=t=>{const e={center:[0,0],radius:[1,1],startAngle:0,endAngle:r,segments:32};let{center:n,radius:h,startAngle:p,endAngle:m,segments:d}=Object.assign({},e,t);if(!u(n,2))throw new Error("center must be an array of X and Y values");if(!u(h,2))throw new Error("radius must be an array of X and Y values");if(!h.every((t=>t>=0)))throw new Error("radius values must be positive");if(!l(p,0))throw new Error("startAngle must be positive");if(!l(m,0))throw new Error("endAngle must be positive");if(!l(d,3))throw new Error("segments must be three or more");if(0===h[0]||0===h[1])return i.create();p%=r,m%=r;let f=r;p<m&&(f=m-p),p>m&&(f=m+(r-p));const g=Math.min(h[0],h[1]);if(f<Math.acos((g*g+g*g-o*o)/(2*g*g)))throw new Error("startAngle and endAngle do not define a significant rotation");d=Math.floor(d*(f/r));const v=s.clone(n),y=f/d,b=[];d=f<r?d+1:d;for(let t=0;t<d;t++){const e=y*t+p,n=s.fromValues(h[0]*c(e),h[1]*a(e));s.add(n,v,n),b.push(n)}return f<r&&b.push(v),i.fromPoints(b)}},{"../geometries/geom2":38,"../maths/constants":106,"../maths/utils/trigonometry":184,"../maths/vec2":202,"./commonChecks":380}],386:[function(t,e,n){const{TAU:o}=t("../maths/constants"),r=t("../maths/vec3"),s=t("../geometries/geom3"),i=t("../geometries/poly3"),{sin:a,cos:c}=t("../maths/utils/trigonometry"),{isGTE:l,isNumberArray:u}=t("./commonChecks");e.exports=t=>{const{center:e,radius:n,segments:h,axes:p}=Object.assign({},{center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},t);if(!u(e,3))throw new Error("center must be an array of X, Y and Z values");if(!u(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every((t=>t>=0)))throw new Error("radius values must be positive");if(!l(h,4))throw new Error("segments must be four or more");if(0===n[0]||0===n[1]||0===n[2])return s.create();const m=r.scale(r.create(),r.normalize(r.create(),p[0]),n[0]),d=r.scale(r.create(),r.normalize(r.create(),p[1]),n[1]),f=r.scale(r.create(),r.normalize(r.create(),p[2]),n[2]),g=Math.round(h/4);let v;const y=[],b=r.create(),x=r.create();for(let t=0;t<=h;t++){const n=o*t/h,s=r.add(r.create(),r.scale(b,m,c(n)),r.scale(x,d,a(n)));if(t>0){let t,n;for(let l=0;l<=g;l++){const u=o/4*l/g,h=c(u),p=a(u);if(l>0){let o,a=[];o=r.subtract(r.create(),r.scale(b,v,t),r.scale(x,f,n)),a.push(r.add(o,o,e)),o=r.subtract(r.create(),r.scale(b,s,t),r.scale(x,f,n)),a.push(r.add(o,o,e)),l<g&&(o=r.subtract(r.create(),r.scale(b,s,h),r.scale(x,f,p)),a.push(r.add(o,o,e))),o=r.subtract(r.create(),r.scale(b,v,h),r.scale(x,f,p)),a.push(r.add(o,o,e)),y.push(i.create(a)),a=[],o=r.add(r.create(),r.scale(b,v,t),r.scale(x,f,n)),a.push(r.add(r.create(),e,o)),o=r.add(o,r.scale(b,s,t),r.scale(x,f,n)),a.push(r.add(r.create(),e,o)),l<g&&(o=r.add(o,r.scale(b,s,h),r.scale(x,f,p)),a.push(r.add(r.create(),e,o))),o=r.add(o,r.scale(b,v,h),r.scale(x,f,p)),a.push(r.add(r.create(),e,o)),a.reverse(),y.push(i.create(a))}t=h,n=p}}v=s}return s.create(y)}},{"../geometries/geom3":53,"../geometries/poly3":91,"../maths/constants":106,"../maths/utils/trigonometry":184,"../maths/vec3":233,"./commonChecks":380}],387:[function(t,e,n){const o=t("../maths/mat4"),r=t("../maths/vec3"),s=t("../geometries/geom3"),i=t("./polyhedron"),{isGTE:a}=t("./commonChecks");e.exports=t=>{let{radius:e,frequency:n}=Object.assign({},{radius:1,frequency:6},t);if(!a(e,0))throw new Error("radius must be positive");if(!a(n,6))throw new Error("frequency must be six or more");if(0===e)return s.create();n=Math.floor(n/6);const c=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],l=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],u=(t,e,n)=>{const o=t[0],s=t[1],i=t[2];let a=n;const c=[],l=[];for(let t=0;t<e;t++)for(let n=0;n<e-t;n++){const u=t/e,p=(t+1)/e,m=n/(e-t),d=(n+1)/(e-t),f=e-t-1?n/(e-t-1):1,g=[];g[0]=h(h(o,s,m),i,u),g[1]=h(h(o,s,d),i,u),g[2]=h(h(o,s,f),i,p);for(let t=0;t<3;t++){const e=r.length(g[t]);for(let n=0;n<3;n++)g[t][n]/=e}if(c.push(g[0],g[1],g[2]),l.push([a,a+1,a+2]),a+=3,n<e-t-1){const m=e-t-1?(n+1)/(e-t-1):1;g[0]=h(h(o,s,d),i,u),g[1]=h(h(o,s,m),i,p),g[2]=h(h(o,s,f),i,p);for(let t=0;t<3;t++){const e=r.length(g[t]);for(let n=0;n<3;n++)g[t][n]/=e}c.push(g[0],g[1],g[2]),l.push([a,a+1,a+2]),a+=3}}return{points:c,triangles:l,offset:a}},h=(t,e,n)=>{const o=1-n,r=[];for(let s=0;s<3;s++)r[s]=t[s]*o+e[s]*n;return r};let p=[],m=[],d=0;for(let t=0;t<l.length;t++){const e=u([c[l[t][0]],c[l[t][1]],c[l[t][2]]],n,d);p=p.concat(e.points),m=m.concat(e.triangles),d=e.offset}let f=i({points:p,faces:m,orientation:"inward"});return 1!==e&&(f=s.transform(o.fromScaling(o.create(),[e,e,e]),f)),f}},{"../geometries/geom3":53,"../maths/mat4":155,"../maths/vec3":233,"./commonChecks":380,"./polyhedron":391}],388:[function(t,e,n){e.exports={arc:t("./arc"),circle:t("./circle"),cube:t("./cube"),cuboid:t("./cuboid"),cylinder:t("./cylinder"),cylinderElliptic:t("./cylinderElliptic"),ellipse:t("./ellipse"),ellipsoid:t("./ellipsoid"),geodesicSphere:t("./geodesicSphere"),line:t("./line"),polygon:t("./polygon"),polyhedron:t("./polyhedron"),rectangle:t("./rectangle"),roundedCuboid:t("./roundedCuboid"),roundedCylinder:t("./roundedCylinder"),roundedRectangle:t("./roundedRectangle"),sphere:t("./sphere"),square:t("./square"),star:t("./star"),torus:t("./torus"),triangle:t("./triangle")}},{"./arc":378,"./circle":379,"./cube":381,"./cuboid":382,"./cylinder":383,"./cylinderElliptic":384,"./ellipse":385,"./ellipsoid":386,"./geodesicSphere":387,"./line":389,"./polygon":390,"./polyhedron":391,"./rectangle":392,"./roundedCuboid":393,"./roundedCylinder":394,"./roundedRectangle":395,"./sphere":396,"./square":397,"./star":398,"./torus":399,"./triangle":400}],389:[function(t,e,n){const o=t("../geometries/path2");e.exports=t=>{if(!Array.isArray(t))throw new Error("points must be an array");return o.fromPoints({},t)}},{"../geometries/path2":74}],390:[function(t,e,n){const o=t("../geometries/geom2");e.exports=t=>{const{points:e,paths:n}=Object.assign({},{points:[],paths:[]},t);if(!Array.isArray(e)||!Array.isArray(n))throw new Error("points and paths must be arrays");let r=e;Array.isArray(e[0])&&(Array.isArray(e[0][0])||(r=[e])),r.forEach(((t,e)=>{if(!Array.isArray(t))throw new Error("list of points "+e+" must be an array");if(t.length<3)throw new Error("list of points "+e+" must contain three or more points");t.forEach(((t,n)=>{if(!Array.isArray(t))throw new Error("list of points "+e+", point "+n+" must be an array");if(t.length<2)throw new Error("list of points "+e+", point "+n+" must contain by X and Y values")}))}));let s=n;if(0===n.length){let t=0;s=r.map((e=>e.map((e=>t++))))}const i=[];r.forEach((t=>t.forEach((t=>i.push(t)))));let a=[];return s.forEach((t=>{const e=t.map((t=>i[t])),n=o.fromPoints(e);a=a.concat(o.toSides(n))})),o.create(a)}},{"../geometries/geom2":38}],391:[function(t,e,n){const o=t("../geometries/geom3"),r=t("../geometries/poly3"),{isNumberArray:s}=t("./commonChecks");e.exports=t=>{const{points:e,faces:n,colors:i,orientation:a}=Object.assign({},{points:[],faces:[],colors:void 0,orientation:"outward"},t);if(!Array.isArray(e)||!Array.isArray(n))throw new Error("points and faces must be arrays");if(e.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(i){if(!Array.isArray(i))throw new Error("colors must be an array");if(i.length!==n.length)throw new Error("faces and colors must have the same length")}e.forEach(((t,e)=>{if(!s(t,3))throw new Error(`point ${e} must be an array of X, Y, Z values`)})),n.forEach(((t,e)=>{if(t.length<3)throw new Error(`face ${e} must contain 3 or more indexes`);if(!s(t,t.length))throw new Error(`face ${e} must be an array of numbers`)})),"outward"!==a&&n.forEach((t=>t.reverse()));const c=n.map(((t,n)=>{const o=r.create(t.map((t=>e[t])));return i&&i[n]&&(o.color=i[n]),o}));return o.create(c)}},{"../geometries/geom3":53,"../geometries/poly3":91,"./commonChecks":380}],392:[function(t,e,n){const o=t("../maths/vec2"),r=t("../geometries/geom2"),{isNumberArray:s}=t("./commonChecks");e.exports=t=>{const{center:e,size:n}=Object.assign({},{center:[0,0],size:[2,2]},t);if(!s(e,2))throw new Error("center must be an array of X and Y values");if(!s(n,2))throw new Error("size must be an array of X and Y values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");if(0===n[0]||0===n[1])return r.create();const i=[n[0]/2,n[1]/2],a=[i[0],-i[1]],c=[o.subtract(o.create(),e,i),o.add(o.create(),e,a),o.add(o.create(),e,i),o.subtract(o.create(),e,a)];return r.fromPoints(c)}},{"../geometries/geom2":38,"../maths/vec2":202,"./commonChecks":380}],393:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../maths/vec3"),a=t("../geometries/geom3"),c=t("../geometries/poly3"),{sin:l,cos:u}=t("../maths/utils/trigonometry"),{isGTE:h,isNumberArray:p}=t("./commonChecks"),m=t("./cuboid"),d=(t,e,n,a,c,h)=>{const p=r/4*c/a,m=u(p),d=l(p),f=a-c;let g=n*m,v=e[2]-(n-n*d);h||(v=n-n*d-e[2]),g=g>o?g:0;const y=i.add(i.create(),t,[e[0]-n,e[1]-n,v]),b=i.add(i.create(),t,[n-e[0],e[1]-n,v]),x=i.add(i.create(),t,[n-e[0],n-e[1],v]),A=i.add(i.create(),t,[e[0]-n,n-e[1],v]),E=[],w=[],D=[],P=[];for(let t=0;t<=f;t++){const e=f>0?r/4*t/f:0,n=s.fromAngleRadians(s.create(),e);s.scale(n,n,g);const o=i.fromVec2(i.create(),n);E.push(i.add(i.create(),y,o)),i.rotateZ(o,o,[0,0,0],r/4),w.push(i.add(i.create(),b,o)),i.rotateZ(o,o,[0,0,0],r/4),D.push(i.add(i.create(),x,o)),i.rotateZ(o,o,[0,0,0],r/4),P.push(i.add(i.create(),A,o))}return h?[E,w,D,P]:(E.reverse(),w.reverse(),D.reverse(),P.reverse(),[P,D,w,E])},f=(t,e)=>{const n=[];for(let o=0;o<t.length;o++){const r=t[o],s=e[o];for(let t=0;t<r.length-1;t++)n.push(c.create([r[t],r[t+1],s[t]])),t<s.length-1&&n.push(c.create([s[t],r[t+1],s[t+1]]))}return n},g=(t,e)=>{const n=[];for(let o=0;o<t.length;o++){let r=t[o],s=e[o];const i=r[r.length-1],a=s[s.length-1],l=(o+1)%t.length;r=t[l],s=e[l];const u=r[0],h=s[0];n.push(c.create([i,u,h,a]))}return n},v=(t,e)=>{t=(t=[t[3],t[2],t[1],t[0]]).map((t=>t.slice().reverse()));const n=[];t.forEach((t=>{t.forEach((t=>n.push(t)))}));const o=[];e.forEach((t=>{t.forEach((t=>o.push(t)))}));const r=[];for(let t=0;t<o.length;t++){const e=(t+1)%o.length;r.push(c.create([n[t],n[e],o[e],o[t]]))}return r};e.exports=t=>{let{center:e,size:n,roundRadius:r,segments:s}=Object.assign({},{center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},t);if(!p(e,3))throw new Error("center must be an array of X, Y and Z values");if(!p(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");if(!h(r,0))throw new Error("roundRadius must be positive");if(!h(s,4))throw new Error("segments must be four or more");if(0===n[0]||0===n[1]||0===n[2])return a.create();if(0===r)return m({center:e,size:n});if(n=n.map((t=>t/2)),r>n[0]-o||r>n[1]-o||r>n[2]-o)throw new Error("roundRadius must be smaller then the radius of all dimensions");s=Math.floor(s/4);let i=null,l=null,u=[];for(let t=0;t<=s;t++){const o=d(e,n,r,s,t,!0),a=d(e,n,r,s,t,!1);if(0===t&&(u=u.concat(v(a,o))),i&&(u=u.concat(f(i,o),g(i,o))),l&&(u=u.concat(f(l,a),g(l,a))),t===s){let t=o.map((t=>t[0]));u.push(c.create(t)),t=a.map((t=>t[0])),u.push(c.create(t))}i=o,l=a}return a.create(u)}},{"../geometries/geom3":53,"../geometries/poly3":91,"../maths/constants":106,"../maths/utils/trigonometry":184,"../maths/vec2":202,"../maths/vec3":233,"./commonChecks":380,"./cuboid":382}],394:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec3"),i=t("../geometries/geom3"),a=t("../geometries/poly3"),{sin:c,cos:l}=t("../maths/utils/trigonometry"),{isGTE:u,isNumberArray:h}=t("./commonChecks"),p=t("./cylinder");e.exports=t=>{const{center:e,height:n,radius:m,roundRadius:d,segments:f}=Object.assign({},{center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},t);if(!h(e,3))throw new Error("center must be an array of X, Y and Z values");if(!u(n,0))throw new Error("height must be positive");if(!u(m,0))throw new Error("radius must be positive");if(!u(d,0))throw new Error("roundRadius must be positive");if(d>m)throw new Error("roundRadius must be smaller then the radius");if(!u(f,4))throw new Error("segments must be four or more");if(0===n||0===m)return i.create();if(0===d)return p({center:e,height:n,radius:m});const g=[0,0,-n/2],v=[0,0,n/2],y=s.subtract(s.create(),v,g);if(2*d>s.length(y)-o)throw new Error("height must be larger than twice roundRadius");let b;b=Math.abs(y[0])>Math.abs(y[1])?s.fromValues(0,1,0):s.fromValues(1,0,0);const x=s.scale(s.create(),s.normalize(s.create(),y),d),A=s.scale(s.create(),s.normalize(s.create(),s.cross(s.create(),x,b)),m),E=s.scale(s.create(),s.normalize(s.create(),s.cross(s.create(),A,x)),m);s.add(g,g,x),s.subtract(v,v,x);const w=Math.floor(.25*f),D=t=>{const n=t.map((t=>s.add(t,t,e)));return a.create(n)},P=[],S=s.create(),T=s.create();let C;for(let t=0;t<=f;t++){const e=r*t/f,n=s.add(s.create(),s.scale(S,A,l(e)),s.scale(T,E,c(e)));if(t>0){let t,e,o=[];o.push(s.add(s.create(),g,n)),o.push(s.add(s.create(),g,C)),o.push(s.add(s.create(),v,C)),o.push(s.add(s.create(),v,n)),P.push(D(o));for(let i=0;i<=w;i++){const a=r/4*i/w,u=l(a),h=c(a);if(i>0){let r;o=[],r=s.add(s.create(),g,s.subtract(S,s.scale(S,C,t),s.scale(T,x,e))),o.push(r),r=s.add(s.create(),g,s.subtract(S,s.scale(S,n,t),s.scale(T,x,e))),o.push(r),i<w&&(r=s.add(s.create(),g,s.subtract(S,s.scale(S,n,u),s.scale(T,x,h))),o.push(r)),r=s.add(s.create(),g,s.subtract(S,s.scale(S,C,u),s.scale(T,x,h))),o.push(r),P.push(D(o)),o=[],r=s.add(s.create(),s.scale(S,C,t),s.scale(T,x,e)),s.add(r,r,v),o.push(r),r=s.add(s.create(),s.scale(S,n,t),s.scale(T,x,e)),s.add(r,r,v),o.push(r),i<w&&(r=s.add(s.create(),s.scale(S,n,u),s.scale(T,x,h)),s.add(r,r,v),o.push(r)),r=s.add(s.create(),s.scale(S,C,u),s.scale(T,x,h)),s.add(r,r,v),o.push(r),o.reverse(),P.push(D(o))}t=u,e=h}}C=n}return i.create(P)}},{"../geometries/geom3":53,"../geometries/poly3":91,"../maths/constants":106,"../maths/utils/trigonometry":184,"../maths/vec3":233,"./commonChecks":380,"./cylinder":383}],395:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../geometries/geom2"),{isGTE:a,isNumberArray:c}=t("./commonChecks"),l=t("./rectangle");e.exports=t=>{let{center:e,size:n,roundRadius:u,segments:h}=Object.assign({},{center:[0,0],size:[2,2],roundRadius:.2,segments:32},t);if(!c(e,2))throw new Error("center must be an array of X and Y values");if(!c(n,2))throw new Error("size must be an array of X and Y values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");if(!a(u,0))throw new Error("roundRadius must be positive");if(!a(h,4))throw new Error("segments must be four or more");if(0===n[0]||0===n[1])return i.create();if(0===u)return l({center:e,size:n});if(n=n.map((t=>t/2)),u>n[0]-o||u>n[1]-o)throw new Error("roundRadius must be smaller then the radius of all dimensions");const p=Math.floor(h/4),m=s.add(s.create(),e,[n[0]-u,n[1]-u]),d=s.add(s.create(),e,[u-n[0],n[1]-u]),f=s.add(s.create(),e,[u-n[0],u-n[1]]),g=s.add(s.create(),e,[n[0]-u,u-n[1]]),v=[],y=[],b=[],x=[];for(let t=0;t<=p;t++){const e=r/4*t/p,n=s.fromAngleRadians(s.create(),e);s.scale(n,n,u),v.push(s.add(s.create(),m,n)),s.rotate(n,n,s.create(),r/4),y.push(s.add(s.create(),d,n)),s.rotate(n,n,s.create(),r/4),b.push(s.add(s.create(),f,n)),s.rotate(n,n,s.create(),r/4),x.push(s.add(s.create(),g,n))}return i.fromPoints(v.concat(y,b,x))}},{"../geometries/geom2":38,"../maths/constants":106,"../maths/vec2":202,"./commonChecks":380,"./rectangle":392}],396:[function(t,e,n){const o=t("./ellipsoid"),{isGTE:r}=t("./commonChecks");e.exports=t=>{let{center:e,radius:n,segments:s,axes:i}=Object.assign({},{center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},t);if(!r(n,0))throw new Error("radius must be positive");return n=[n,n,n],o({center:e,radius:n,segments:s,axes:i})}},{"./commonChecks":380,"./ellipsoid":386}],397:[function(t,e,n){const o=t("./rectangle"),{isGTE:r}=t("./commonChecks");e.exports=t=>{let{center:e,size:n}=Object.assign({},{center:[0,0],size:2},t);if(!r(n,0))throw new Error("size must be positive");return n=[n,n],o({center:e,size:n})}},{"./commonChecks":380,"./rectangle":392}],398:[function(t,e,n){const{TAU:o}=t("../maths/constants"),r=t("../maths/vec2"),s=t("../geometries/geom2"),{isGT:i,isGTE:a,isNumberArray:c}=t("./commonChecks"),l=(t,e,n,s)=>{const i=o/t,a=[];for(let o=0;o<t;o++){const t=r.fromAngleRadians(r.create(),i*o+n);r.scale(t,t,e),r.add(t,s,t),a.push(t)}return a};e.exports=t=>{let{center:e,vertices:n,outerRadius:u,innerRadius:h,density:p,startAngle:m}=Object.assign({},{center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},t);if(!c(e,2))throw new Error("center must be an array of X and Y values");if(!a(n,2))throw new Error("vertices must be two or more");if(!i(u,0))throw new Error("outerRadius must be greater than zero");if(!a(h,0))throw new Error("innerRadius must be greater than zero");if(!a(m,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),p=Math.floor(p),m%=o,0===h){if(!a(p,2))throw new Error("density must be two or more");h=u*((t,e)=>t>0&&e>1&&e<t/2?Math.cos(Math.PI*e/t)/Math.cos(Math.PI*(e-1)/t):0)(n,p)}const d=r.clone(e),f=l(n,u,m,d),g=l(n,h,m+Math.PI/n,d),v=[];for(let t=0;t<n;t++)v.push(f[t]),v.push(g[t]);return s.fromPoints(v)}},{"../geometries/geom2":38,"../maths/constants":106,"../maths/vec2":202,"./commonChecks":380}],399:[function(t,e,n){const{TAU:o}=t("../maths/constants"),r=t("../operations/extrusions/extrudeRotate"),{rotate:s}=t("../operations/transforms/rotate"),{translate:i}=t("../operations/transforms/translate"),a=t("./circle"),{isGT:c,isGTE:l}=t("./commonChecks");e.exports=t=>{const e={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:o},{innerRadius:n,innerSegments:u,outerRadius:h,outerSegments:p,innerRotation:m,startAngle:d,outerRotation:f}=Object.assign({},e,t);if(!c(n,0))throw new Error("innerRadius must be greater than zero");if(!l(u,3))throw new Error("innerSegments must be three or more");if(!c(h,0))throw new Error("outerRadius must be greater than zero");if(!l(p,3))throw new Error("outerSegments must be three or more");if(!l(d,0))throw new Error("startAngle must be positive");if(!c(f,0))throw new Error("outerRotation must be greater than zero");if(n>=h)throw new Error("inner circle is two large to rotate about the outer circle");let g=a({radius:n,segments:u});return 0!==m&&(g=s([0,0,m],g)),g=i([h,0],g),r({startAngle:d,angle:f,segments:p},g)}},{"../maths/constants":106,"../operations/extrusions/extrudeRotate":327,"../operations/transforms/rotate":374,"../operations/transforms/translate":377,"./circle":379,"./commonChecks":380}],400:[function(t,e,n){const{NEPS:o}=t("../maths/constants"),r=t("../maths/vec2"),s=t("../geometries/geom2"),{isNumberArray:i}=t("./commonChecks"),a=(t,e,n)=>Math.acos((t*t+e*e-n*n)/(2*t*e)),c=(t,e,n,o,i,a)=>{const c=r.fromValues(0,0),l=r.fromValues(a,0),u=r.fromValues(o,0);return r.add(u,r.rotate(u,u,[0,0],Math.PI-e),l),s.fromPoints([c,l,u])};e.exports=t=>{let{type:e,values:n}=Object.assign({},{type:"SSS",values:[1,1,1]},t);if("string"!=typeof e)throw new Error("triangle type must be a string");if(e=e.toUpperCase(),"A"!==e[0]&&"S"!==e[0]||"A"!==e[1]&&"S"!==e[1]||"A"!==e[2]&&"S"!==e[2])throw new Error("triangle type must contain three letters; A or S");if(!i(n,3))throw new Error("triangle values must contain three values");if(!n.every((t=>t>0)))throw new Error("triangle values must be greater than zero");switch(e){case"AAA":return(t=>{if(Math.abs(t[0]+t[1]+t[2]-Math.PI)>o)throw new Error("AAA triangles require angles that sum to PI");const e=t[0],n=t[1],r=Math.PI-e-n,s=1/Math.sin(r)*Math.sin(e),i=1/Math.sin(r)*Math.sin(n);return c(e,n,r,s,i,1)})(n);case"AAS":return(t=>{const e=t[0],n=t[1],r=Math.PI+o-e-n;if(r<o)throw new Error("AAS triangles require angles that sum to PI");const s=t[2],i=s/Math.sin(e)*Math.sin(n),a=s/Math.sin(e)*Math.sin(r);return c(e,n,r,s,i,a)})(n);case"ASA":return(t=>{const e=t[0],n=t[2],r=Math.PI+o-e-n;if(r<o)throw new Error("ASA triangles require angles that sum to PI");const s=t[1],i=s/Math.sin(r)*Math.sin(e),a=s/Math.sin(r)*Math.sin(n);return c(e,n,r,i,a,s)})(n);case"SAS":return(t=>{const e=t[0],n=t[1],r=t[2],s=((t,e,n)=>e>o?Math.sqrt(t*t+n*n-2*t*n*Math.cos(e)):Math.sqrt((t-n)*(t-n)+t*n*e*e*(1-e*e/12)))(e,n,r),i=a(s,e,r),l=Math.PI-i-n;return c(i,n,l,r,s,e)})(n);case"SSA":return(t=>{const e=t[0],n=t[1],o=t[2],r=Math.asin(n*Math.sin(o)/e),s=Math.PI-r-o,i=e/Math.sin(o)*Math.sin(s);return c(r,s,o,n,i,e)})(n);case"SSS":return(t=>{const e=t[1],n=t[2],o=t[0];if(e+n<=o||n+o<=e||o+e<=n)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const r=a(n,o,e),s=a(o,e,n),i=Math.PI-r-s;return c(r,s,i,e,n,o)})(n);default:throw new Error("invalid triangle type, try again")}}},{"../geometries/geom2":38,"../maths/constants":106,"../maths/vec2":202,"./commonChecks":380}],401:[function(t,e,n){e.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}},{}],402:[function(t,e,n){e.exports={vectorChar:t("./vectorChar"),vectorText:t("./vectorText")}},{"./vectorChar":403,"./vectorText":405}],403:[function(t,e,n){const o=t("./vectorParams");e.exports=(t,e)=>{const{xOffset:n,yOffset:r,input:s,font:i,height:a,extrudeOffset:c}=o(t,e);let l=s.charCodeAt(0);l&&i[l]||(l=63);const u=[].concat(i[l]),h=(a-c)/i.height,p=c/2,m=u.shift()*h,d=[];let f=[];for(let t=0,e=u.length;t<e;t+=2){const e=h*u[t]+n,o=h*u[t+1]+r+p;void 0===u[t]?(d.push(f),f=[],t--):f.push([e,o])}return f.length&&d.push(f),{width:m,height:a,segments:d}}},{"./vectorParams":404}],404:[function(t,e,n){const o={xOffset:0,yOffset:0,input:"?",align:"left",font:t("./fonts/single-line/hershey/simplex.js"),height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};e.exports=(t,e)=>{e||"string"!=typeof t||(t={input:t}),t=t||{};const n=Object.assign({},o,t);return n.input=e||n.input,n}},{"./fonts/single-line/hershey/simplex.js":401}],405:[function(t,e,n){const o=t("./vectorChar"),r=t("./vectorParams"),s=(t,e)=>{const{x:n,y:o}=Object.assign({x:0,y:0},t||{}),r=e.segments;let s=null,i=null;for(let t=0,e=r.length;t<e;t++){s=r[t];for(let t=0,e=s.length;t<e;t++)i=s[t],s[t]=[i[0]+n,i[1]+o]}return e};e.exports=(t,e)=>{const{xOffset:n,yOffset:i,input:a,font:c,height:l,align:u,extrudeOffset:h,lineSpacing:p,letterSpacing:m}=r(t,e);let d,f,g,v,y,b,[x,A]=[n,i],E={width:0,segments:[]};const w=[];let D=[],P=0;const S=x,T=()=>{w.push(E),P=Math.max(P,E.width),E={width:0,segments:[]}};for(d=0,f=a.length;d<f;d++)g=a[d],v=o({xOffset:x,yOffset:A,font:c,height:l,extrudeOffset:h},g),"\n"!==g?(y=v.width*m,E.width+=y,x+=y," "!==g&&(E.segments=E.segments.concat(v.segments))):(x=S,A-=v.height*p,T());for(E.segments.length&&T(),d=0,f=w.length;d<f;d++)E=w[d],P>E.width&&(b=P-E.width,"right"===u?E=s({x:b},E):"center"===u&&(E=s({x:b/2},E))),D=D.concat(E.segments);return D}},{"./vectorChar":403,"./vectorParams":404}],406:[function(t,e,n){const o=t("../geometries/geom2"),r=t("../geometries/geom3"),s=t("../geometries/path2");e.exports=t=>{let e;for(const n of t){let t=0;if(o.isA(n)&&(t=1),r.isA(n)&&(t=2),s.isA(n)&&(t=3),e&&t!==e)return!1;e=t}return!0}},{"../geometries/geom2":38,"../geometries/geom3":53,"../geometries/path2":74}],407:[function(t,e,n){e.exports=t=>.017453292519943295*t},{}],408:[function(t,e,n){const o=t=>t.reduce(((t,e)=>Array.isArray(e)?t.concat(o(e)):t.concat(e)),[]);e.exports=o},{}],409:[function(t,e,n){e.exports=(t,e)=>t-e},{}],410:[function(t,e,n){e.exports={areAllShapesTheSameType:t("./areAllShapesTheSameType"),degToRad:t("./degToRad"),flatten:t("./flatten"),fnNumberSort:t("./fnNumberSort"),insertSorted:t("./insertSorted"),radiusToSegments:t("./radiusToSegments"),radToDeg:t("./radToDeg")}},{"./areAllShapesTheSameType":406,"./degToRad":407,"./flatten":408,"./fnNumberSort":409,"./insertSorted":411,"./radToDeg":413,"./radiusToSegments":414}],411:[function(t,e,n){e.exports=(t,e,n)=>{let o=0,r=t.length;for(;r>o;){const s=Math.floor((o+r)/2);n(e,t[s])>0?o=s+1:r=s}t.splice(o,0,e)}},{}],412:[function(t,e,n){e.exports=(t,e,n)=>{for(t=t.slice();t.length<n;)t.push(e);return t}},{}],413:[function(t,e,n){e.exports=t=>57.29577951308232*t},{}],414:[function(t,e,n){const{TAU:o}=t("../maths/constants");e.exports=(t,e,n)=>{const r=e>0?t*o/e:0,s=n>0?o/n:0;return Math.ceil(Math.max(r,s,4))}},{"../maths/constants":106}],415:[function(t,e,n){e.exports=class{constructor(t){this._buffer=t,this._pos=0}readInt8(){return this._decodeInt(8,!0)}readUInt8(){return this._decodeInt(8,!1)}readInt16(){return this._decodeInt(16,!0)}readUInt16(){return this._decodeInt(16,!1)}readInt32(){return this._decodeInt(32,!0)}readUInt32(){return this._decodeInt(32,!1)}readFloat(){return this._decodeFloat(23,8)}readDouble(){return this._decodeFloat(52,11)}readChar(){return this.readString(1)}readString(t){this._checkSize(8*t);const e=this._buffer.substr(this._pos,t);return this._pos+=t,e}seek(t){this._pos=t,this._checkSize(0)}getPosition(){return this._pos}getSize(){return this._buffer.length}_decodeFloat(t,e){const n=t+e+1,o=n>>3;this._checkSize(n);const r=Math.pow(2,e-1)-1,s=this._readBits(t+e,1,o),i=this._readBits(t,e,o);let a=0,c=2,l=0,u=0;do{const e=this._readByte(++l,o);u=t%8||8;let n=1<<u;for(;n>>=1;)e&n&&(a+=1/c),c*=2}while(t-=u);return this._pos+=o,i===1+(r<<1)?a?NaN:s?-1/0:1/0:(1+-2*s)*(i||a?i?Math.pow(2,i-r)*(1+a):Math.pow(2,1-r)*a:0)}_decodeInt(t,e){const n=this._readBits(0,t,t/8),o=Math.pow(2,t),r=e&&n>=o/2?n-o:n;return this._pos+=t/8,r}_shl(t,e){for(++e;--e;t=1073741824&~(t%=2147483648)?2*(t-1073741824)+2147483647+1:2*t);return t}_readByte(t,e){return 255&this._buffer.charCodeAt(this._pos+e-t-1)}_readBits(t,e,n){const o=(t+e)%8,r=t%8,s=n-(t>>3)-1;let i=n+(-(t+e)>>3),a=s-i,c=this._readByte(s,n)>>r&(1<<(a?8-r:e))-1;for(a&&o&&(c+=(this._readByte(i++,n)&(1<<o)-1)<<(a--<<3)-r);a;)c+=this._shl(this._readByte(i++,n),(a--<<3)-r);return c}_checkSize(t){this._pos,Math.ceil(t/8),this._buffer.length}}},{}],416:[function(t,e,n){(function(t){class n{constructor(e,n){if(n=n||{},this.size=0,this.type="",this.isClosed=!1,this.encoding="utf8",this.buffer=null,this.length=0,!e)return;if(!Array.isArray(e))return;let o,r;e.forEach((t=>{"string"==typeof t?this.length+=t.length:t instanceof ArrayBuffer&&(this.length+=t.byteLength)})),n.type&&(this.type=n.type.toLowerCase()),n.endings,n.encoding&&(this.encoding=n.encoding.toLowerCase()),n.length&&(this.length=n.length),this.buffer=t.allocUnsafe(this.length);for(let t=0;t<e.length;t++)switch(typeof e[t]){case"string":o=this.buffer.write(e[t],this.size,this.encoding),this.size=this.size+o;break;case"object":if(r=e[t],r instanceof ArrayBuffer){const t=new DataView(r);for(let e=0;e<r.byteLength;e++){const n=t.getUint8(e);o=this.buffer.writeUInt8(n,this.size,!1),this.size++}}}}asBuffer(){return this.buffer.slice(0,this.size)}arrayBuffer(){return this.buffer.slice(0,this.size)}slice(t,e,o){return t=t||0,e=e||this.size,o=o||"",new n}stream(){return null}text(){return""}close(){this.isClosed||(this.isClosed=!0)}toString(){return""}}e.exports=n}).call(this,t("buffer").Buffer)},{buffer:831}],417:[function(t,e,n){const o=t("./makeBlob")();e.exports=t=>{const{data:e,mimeType:n}=t;return new o(e,{type:n})}},{"./makeBlob":419}],418:[function(t,e,n){e.exports={convertToBlob:t("./convertToBlob"),makeBlob:t("./makeBlob"),BinaryReader:t("./BinaryReader"),Blob:t("./Blob")}},{"./BinaryReader":415,"./Blob":416,"./convertToBlob":417,"./makeBlob":419}],419:[function(t,e,n){const o=t("./Blob.js");e.exports=()=>"undefined"!=typeof window?window.Blob:o},{"./Blob.js":416}],420:[function(t,e,n){arguments[4][14][0].apply(n,arguments)},{"./cssColors":422,dup:14}],421:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,"../geometries/poly3":498,"../utils/flatten":817,dup:15}],422:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{dup:16}],423:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],424:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{"../utils/flatten":817,"./hueToColorComponent":426,dup:18}],425:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{"../utils/flatten":817,dup:19}],426:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],427:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{"./colorNameToRgb":420,"./colorize":421,"./cssColors":422,"./hexToRgb":423,"./hslToRgb":424,"./hsvToRgb":425,"./hueToColorComponent":426,"./rgbToHex":428,"./rgbToHsl":429,"./rgbToHsv":430,dup:21}],428:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{"../utils/flatten":817,dup:22}],429:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"../utils/flatten":817,dup:23}],430:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"../utils/flatten":817,dup:24}],431:[function(t,e,n){arguments[4][25][0].apply(n,arguments)},{"./lengths":435,dup:25}],432:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],433:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{"./arcLengthToT":431,"./create":432,"./length":434,"./lengths":435,"./tangentAt":436,"./valueAt":437,dup:27}],434:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./lengths":435,dup:28}],435:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{"./valueAt":437,dup:29}],436:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],437:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],438:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{"./bezier":433,dup:32}],439:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec2":610,dup:33}],440:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],441:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{"../../maths/mat4":562,dup:35}],442:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec2":610,"./create":441,dup:36}],443:[function(t,e,n){arguments[4][37][0].apply(n,arguments)},{"../../maths/vec2":610,"./create":441,dup:37}],444:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./clone":440,"./create":441,"./fromCompactBinary":442,"./fromPoints":443,"./isA":445,"./reverse":446,"./toCompactBinary":447,"./toOutlines":448,"./toPoints":449,"./toSides":450,"./toString":451,"./transform":452,"./validate":453,dup:38}],445:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],446:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{"./create":441,"./toSides":450,dup:40}],447:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{dup:41}],448:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"../../maths/vec2":610,"./toSides":450,dup:42}],449:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"./toSides":450,dup:43}],450:[function(t,e,n){arguments[4][44][0].apply(n,arguments)},{"./applyTransforms":439,dup:44}],451:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{"../../maths/vec2":610,"./toSides":450,dup:45}],452:[function(t,e,n){const o=t("../../maths/mat4"),r=t("./reverse.js");e.exports=(t,e)=>{const n=o.multiply(o.create(),t,e.transforms),s=Object.assign({},e,{transforms:n});return t[0]*t[5]-t[4]*t[1]<0?r(s):s}},{"../../maths/mat4":562,"./reverse.js":446}],453:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{"../../maths/vec2":610,"./isA":445,"./toOutlines":448,dup:47}],454:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{"../../maths/mat4":562,"../poly3":498,dup:48}],455:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],456:[function(t,e,n){arguments[4][50][0].apply(n,arguments)},{"../../maths/mat4":562,dup:50}],457:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec3":641,"../poly3":498,"./create":456,dup:51}],458:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"../poly3":498,"./create":456,dup:52}],459:[function(t,e,n){const o=t("../../operations/hulls/quickhull"),r=t("./create"),s=t("../poly3");e.exports=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");const e=o(t,{skipTriangulation:!0}).map((e=>{const n=e.map((e=>t[e]));return s.create(n)}));return r(e)}},{"../../operations/hulls/quickhull":767,"../poly3":498,"./create":456}],460:[function(t,e,n){e.exports={clone:t("./clone"),create:t("./create"),fromPointsConvex:t("./fromPointsConvex"),fromPoints:t("./fromPoints"),fromCompactBinary:t("./fromCompactBinary"),invert:t("./invert"),isA:t("./isA"),toPoints:t("./toPoints"),toPolygons:t("./toPolygons"),toString:t("./toString"),toCompactBinary:t("./toCompactBinary"),transform:t("./transform"),validate:t("./validate")}},{"./clone":455,"./create":456,"./fromCompactBinary":457,"./fromPoints":458,"./fromPointsConvex":459,"./invert":461,"./isA":462,"./toCompactBinary":463,"./toPoints":464,"./toPolygons":465,"./toString":466,"./transform":467,"./validate":468}],461:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{"../poly3":498,"./create":456,"./toPolygons":465,dup:54}],462:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],463:[function(t,e,n){arguments[4][56][0].apply(n,arguments)},{"../poly3":498,dup:56}],464:[function(t,e,n){arguments[4][57][0].apply(n,arguments)},{"../poly3":498,"./toPolygons":465,dup:57}],465:[function(t,e,n){arguments[4][58][0].apply(n,arguments)},{"./applyTransforms":454,dup:58}],466:[function(t,e,n){arguments[4][59][0].apply(n,arguments)},{"../poly3":498,"./toPolygons":465,dup:59}],467:[function(t,e,n){arguments[4][60][0].apply(n,arguments)},{"../../maths/mat4":562,dup:60}],468:[function(t,e,n){arguments[4][61][0].apply(n,arguments)},{"../poly3":498,"./isA":462,dup:61}],469:[function(t,e,n){arguments[4][62][0].apply(n,arguments)},{"./geom2":444,"./geom3":460,"./path2":481,"./poly2":492,"./poly3":498,dup:62}],470:[function(t,e,n){arguments[4][63][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/vec2":610,"./fromPoints":480,"./toPoints":485,dup:63}],471:[function(t,e,n){arguments[4][64][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/vec2":610,"./appendPoints":472,"./toPoints":485,dup:64}],472:[function(t,e,n){arguments[4][65][0].apply(n,arguments)},{"./concat":476,"./create":477,dup:65}],473:[function(t,e,n){arguments[4][66][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec2":610,dup:66}],474:[function(t,e,n){arguments[4][67][0].apply(n,arguments)},{dup:67}],475:[function(t,e,n){arguments[4][68][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/vec2":610,"./clone":474,dup:68}],476:[function(t,e,n){arguments[4][69][0].apply(n,arguments)},{"../../maths/vec2":610,"./fromPoints":480,"./toPoints":485,dup:69}],477:[function(t,e,n){arguments[4][70][0].apply(n,arguments)},{"../../maths/mat4":562,dup:70}],478:[function(t,e,n){arguments[4][71][0].apply(n,arguments)},{"../../maths/vec2":610,"./toPoints":485,dup:71}],479:[function(t,e,n){arguments[4][72][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec2":610,"./create":477,dup:72}],480:[function(t,e,n){arguments[4][73][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/vec2":610,"./close":475,"./create":477,dup:73}],481:[function(t,e,n){arguments[4][74][0].apply(n,arguments)},{"./appendArc":470,"./appendBezier":471,"./appendPoints":472,"./clone":474,"./close":475,"./concat":476,"./create":477,"./equals":478,"./fromCompactBinary":479,"./fromPoints":480,"./isA":482,"./reverse":483,"./toCompactBinary":484,"./toPoints":485,"./toString":486,"./transform":487,"./validate":488,dup:74}],482:[function(t,e,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],483:[function(t,e,n){arguments[4][76][0].apply(n,arguments)},{"./clone":474,dup:76}],484:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{dup:77}],485:[function(t,e,n){arguments[4][78][0].apply(n,arguments)},{"./applyTransforms":473,dup:78}],486:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{"../../maths/vec2":610,"./toPoints":485,dup:79}],487:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{"../../maths/mat4":562,dup:80}],488:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{"../../maths/vec2":610,"./isA":482,dup:81}],489:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{"./flip":491,"./measureArea":493,dup:82}],490:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{dup:83}],491:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{"./create":490,dup:84}],492:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{"./arePointsInside":489,"./create":490,"./flip":491,"./measureArea":493,dup:85}],493:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{"../../maths/utils/area":587,dup:86}],494:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{"../../maths/vec3":641,"./create":495,dup:87}],495:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],496:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{"../../maths/vec3":641,"./create":495,dup:89}],497:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./create":495,dup:90}],498:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./clone":494,"./create":495,"./fromPoints":496,"./fromPointsAndPlane":497,"./invert":499,"./isA":500,"./isConvex":501,"./measureArea":502,"./measureBoundingBox":503,"./measureBoundingSphere":504,"./measureSignedVolume":505,"./plane":506,"./toPoints":507,"./toString":508,"./transform":509,"./validate":510,dup:91}],499:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{"../../maths/plane":582,"./create":495,dup:92}],500:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{dup:93}],501:[function(t,e,n){arguments[4][94][0].apply(n,arguments)},{"../../maths/plane":582,"../../maths/vec3":641,dup:94}],502:[function(t,e,n){arguments[4][95][0].apply(n,arguments)},{"./plane":506,dup:95}],503:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{"../../maths/vec3":641,dup:96}],504:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{"../../maths/vec4":667,dup:97}],505:[function(t,e,n){arguments[4][98][0].apply(n,arguments)},{"../../maths/vec3":641,dup:98}],506:[function(t,e,n){arguments[4][99][0].apply(n,arguments)},{"../../maths/plane/":582,dup:99}],507:[function(t,e,n){arguments[4][100][0].apply(n,arguments)},{dup:100}],508:[function(t,e,n){arguments[4][101][0].apply(n,arguments)},{"../../maths/vec3/":641,dup:101}],509:[function(t,e,n){arguments[4][102][0].apply(n,arguments)},{"../../maths/mat4":562,"../../maths/vec3":641,"./create":495,dup:102}],510:[function(t,e,n){arguments[4][103][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/plane/signedDistanceToPoint":584,"../../maths/vec3":641,"./isA":500,"./isConvex":501,"./measureArea":502,"./plane":506,dup:103}],511:[function(t,e,n){arguments[4][104][0].apply(n,arguments)},{"./colors":427,"./curves":438,"./geometries":469,"./maths":514,"./measurements":671,"./operations/booleans":685,"./operations/expansions":714,"./operations/extrusions":737,"./operations/hulls":760,"./operations/modifiers":771,"./operations/transforms":781,"./primitives":797,"./text":811,"./utils":819,dup:104}],512:[function(t,e,n){arguments[4][105][0].apply(n,arguments)},{"./mat4":562,"./vec2":610,"./vec3":641,dup:105}],513:[function(t,e,n){arguments[4][106][0].apply(n,arguments)},{dup:106}],514:[function(t,e,n){arguments[4][107][0].apply(n,arguments)},{"./constants":513,"./line2":524,"./line3":541,"./mat4":562,"./plane":582,"./utils":588,"./vec2":610,"./vec3":641,"./vec4":667,dup:107}],515:[function(t,e,n){arguments[4][108][0].apply(n,arguments)},{"./create":518,dup:108}],516:[function(t,e,n){arguments[4][109][0].apply(n,arguments)},{"../vec2":610,"./direction":519,"./origin":526,dup:109}],517:[function(t,e,n){arguments[4][110][0].apply(n,arguments)},{dup:110}],518:[function(t,e,n){arguments[4][111][0].apply(n,arguments)},{dup:111}],519:[function(t,e,n){arguments[4][112][0].apply(n,arguments)},{"../vec2":610,dup:112}],520:[function(t,e,n){arguments[4][113][0].apply(n,arguments)},{"../vec2":610,dup:113}],521:[function(t,e,n){arguments[4][114][0].apply(n,arguments)},{dup:114}],522:[function(t,e,n){arguments[4][115][0].apply(n,arguments)},{"../vec2":610,dup:115}],523:[function(t,e,n){arguments[4][116][0].apply(n,arguments)},{"./create":518,dup:116}],524:[function(t,e,n){arguments[4][117][0].apply(n,arguments)},{"./clone":515,"./closestPoint":516,"./copy":517,"./create":518,"./direction":519,"./distanceToPoint":520,"./equals":521,"./fromPoints":522,"./fromValues":523,"./intersectPointOfLines":525,"./origin":526,"./reverse":527,"./toString":528,"./transform":529,"./xAtY":530,dup:117}],525:[function(t,e,n){arguments[4][118][0].apply(n,arguments)},{"../utils":588,"../vec2":610,dup:118}],526:[function(t,e,n){arguments[4][119][0].apply(n,arguments)},{"../vec2":610,dup:119}],527:[function(t,e,n){arguments[4][120][0].apply(n,arguments)},{"../vec2":610,"./copy":517,"./fromValues":523,dup:120}],528:[function(t,e,n){arguments[4][121][0].apply(n,arguments)},{dup:121}],529:[function(t,e,n){arguments[4][122][0].apply(n,arguments)},{"../vec2":610,"./direction":519,"./fromPoints":522,"./origin":526,dup:122}],530:[function(t,e,n){arguments[4][123][0].apply(n,arguments)},{"./origin":526,dup:123}],531:[function(t,e,n){arguments[4][124][0].apply(n,arguments)},{"../vec3":641,"./create":534,dup:124}],532:[function(t,e,n){arguments[4][125][0].apply(n,arguments)},{"../vec3":641,dup:125}],533:[function(t,e,n){arguments[4][126][0].apply(n,arguments)},{"../vec3":641,dup:126}],534:[function(t,e,n){arguments[4][127][0].apply(n,arguments)},{"../vec3":641,dup:127}],535:[function(t,e,n){arguments[4][128][0].apply(n,arguments)},{dup:128}],536:[function(t,e,n){arguments[4][129][0].apply(n,arguments)},{"../vec3":641,"./closestPoint":532,dup:129}],537:[function(t,e,n){arguments[4][130][0].apply(n,arguments)},{"../vec3":641,dup:130}],538:[function(t,e,n){arguments[4][131][0].apply(n,arguments)},{"../constants":513,"../utils":588,"../vec3":641,"./fromPointAndDirection":539,dup:131}],539:[function(t,e,n){arguments[4][132][0].apply(n,arguments)},{"../vec3":641,dup:132}],540:[function(t,e,n){arguments[4][133][0].apply(n,arguments)},{"../vec3":641,"./fromPointAndDirection":539,dup:133}],541:[function(t,e,n){arguments[4][134][0].apply(n,arguments)},{"./clone":531,"./closestPoint":532,"./copy":533,"./create":534,"./direction":535,"./distanceToPoint":536,"./equals":537,"./fromPlanes":538,"./fromPointAndDirection":539,"./fromPoints":540,"./intersectPointOfLineAndPlane":542,"./origin":543,"./reverse":544,"./toString":545,"./transform":546,dup:134}],542:[function(t,e,n){arguments[4][135][0].apply(n,arguments)},{"../vec3":641,dup:135}],543:[function(t,e,n){arguments[4][136][0].apply(n,arguments)},{dup:136}],544:[function(t,e,n){arguments[4][137][0].apply(n,arguments)},{"../vec3":641,"./fromPointAndDirection":539,dup:137}],545:[function(t,e,n){arguments[4][138][0].apply(n,arguments)},{dup:138}],546:[function(t,e,n){arguments[4][139][0].apply(n,arguments)},{"../vec3":641,"./fromPointAndDirection":539,dup:139}],547:[function(t,e,n){arguments[4][140][0].apply(n,arguments)},{dup:140}],548:[function(t,e,n){arguments[4][141][0].apply(n,arguments)},{"./create":550,dup:141}],549:[function(t,e,n){arguments[4][142][0].apply(n,arguments)},{dup:142}],550:[function(t,e,n){arguments[4][143][0].apply(n,arguments)},{dup:143}],551:[function(t,e,n){arguments[4][144][0].apply(n,arguments)},{dup:144}],552:[function(t,e,n){arguments[4][145][0].apply(n,arguments)},{"../constants":513,"../utils/trigonometry":592,"./identity":561,dup:145}],553:[function(t,e,n){arguments[4][146][0].apply(n,arguments)},{dup:146}],554:[function(t,e,n){arguments[4][147][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:147}],555:[function(t,e,n){arguments[4][148][0].apply(n,arguments)},{dup:148}],556:[function(t,e,n){arguments[4][149][0].apply(n,arguments)},{"./create":550,dup:149}],557:[function(t,e,n){arguments[4][150][0].apply(n,arguments)},{"../vec3":641,"./fromRotation":552,dup:150}],558:[function(t,e,n){arguments[4][151][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:151}],559:[function(t,e,n){arguments[4][152][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:152}],560:[function(t,e,n){arguments[4][153][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:153}],561:[function(t,e,n){arguments[4][154][0].apply(n,arguments)},{dup:154}],562:[function(t,e,n){arguments[4][155][0].apply(n,arguments)},{"./add":547,"./clone":548,"./copy":549,"./create":550,"./equals":551,"./fromRotation":552,"./fromScaling":553,"./fromTaitBryanRotation":554,"./fromTranslation":555,"./fromValues":556,"./fromVectorRotation":557,"./fromXRotation":558,"./fromYRotation":559,"./fromZRotation":560,"./identity":561,"./invert":563,"./isIdentity":564,"./isMirroring":565,"./isOnlyTransformScale":566,"./mirrorByPlane":567,"./multiply":568,"./rotate":569,"./rotateX":570,"./rotateY":571,"./rotateZ":572,"./scale":573,"./subtract":574,"./toString":575,"./translate":576,dup:155}],563:[function(t,e,n){arguments[4][156][0].apply(n,arguments)},{dup:156}],564:[function(t,e,n){arguments[4][157][0].apply(n,arguments)},{dup:157}],565:[function(t,e,n){arguments[4][158][0].apply(n,arguments)},{dup:158}],566:[function(t,e,n){arguments[4][159][0].apply(n,arguments)},{dup:159}],567:[function(t,e,n){arguments[4][160][0].apply(n,arguments)},{dup:160}],568:[function(t,e,n){arguments[4][161][0].apply(n,arguments)},{dup:161}],569:[function(t,e,n){arguments[4][162][0].apply(n,arguments)},{"../constants":513,"../utils/trigonometry":592,"./copy":549,dup:162}],570:[function(t,e,n){arguments[4][163][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:163}],571:[function(t,e,n){arguments[4][164][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:164}],572:[function(t,e,n){arguments[4][165][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:165}],573:[function(t,e,n){arguments[4][166][0].apply(n,arguments)},{dup:166}],574:[function(t,e,n){arguments[4][167][0].apply(n,arguments)},{dup:167}],575:[function(t,e,n){arguments[4][168][0].apply(n,arguments)},{dup:168}],576:[function(t,e,n){arguments[4][169][0].apply(n,arguments)},{dup:169}],577:[function(t,e,n){arguments[4][170][0].apply(n,arguments)},{dup:170}],578:[function(t,e,n){const o=t("../vec3"),r=t("./fromNormalAndPoint");e.exports=(t,...e)=>{t[0]=0,t[1]=0,t[2]=0,t[3]=0;const n=e.length;e.forEach((e=>{o.add(t,t,e)})),o.scale(t,t,1/n);let s=0,i=0,a=0,c=0,l=0,u=0;const h=o.create();e.forEach((e=>{o.subtract(h,e,t),s+=h[0]*h[0],i+=h[0]*h[1],a+=h[0]*h[2],c+=h[1]*h[1],l+=h[1]*h[2],u+=h[2]*h[2]})),s/=n,i/=n,a/=n,c/=n,l/=n,u/=n,h[0]=0,h[1]=0,h[2]=0;const p=o.create();let m=c*u-l*l;p[0]=m,p[1]=a*l-i*u,p[2]=i*l-a*c;let d=m*m;return o.add(h,h,o.scale(p,p,d)),m=s*u-a*a,p[0]=a*l-i*u,p[1]=m,p[2]=i*a-l*s,d=m*m,o.dot(h,p)<0&&(d=-d),o.add(h,h,o.scale(p,p,d)),m=s*c-i*i,p[0]=i*l-a*c,p[1]=i*a-l*s,p[2]=m,d=m*m,o.dot(h,p)<0&&(d=-d),o.add(h,h,o.scale(p,p,d)),r(t,h,t)}},{"../vec3":641,"./fromNormalAndPoint":579}],579:[function(t,e,n){arguments[4][171][0].apply(n,arguments)},{"../vec3":641,dup:171}],580:[function(t,e,n){arguments[4][172][0].apply(n,arguments)},{"../vec3":641,dup:172}],581:[function(t,e,n){arguments[4][173][0].apply(n,arguments)},{"../constants":513,"../vec3":641,dup:173}],582:[function(t,e,n){e.exports={clone:t("../vec4/clone"),copy:t("../vec4/copy"),create:t("../vec4/create"),equals:t("../vec4/equals"),flip:t("./flip"),fromNormalAndPoint:t("./fromNormalAndPoint"),fromValues:t("../vec4/fromValues"),fromNoisyPoints:t("./fromNoisyPoints"),fromPoints:t("./fromPoints"),fromPointsRandom:t("./fromPointsRandom"),projectionOfPoint:t("./projectionOfPoint"),signedDistanceToPoint:t("./signedDistanceToPoint"),toString:t("../vec4/toString"),transform:t("./transform")}},{"../vec4/clone":660,"../vec4/copy":661,"../vec4/create":662,"../vec4/equals":664,"../vec4/fromValues":666,"../vec4/toString":668,"./flip":577,"./fromNoisyPoints":578,"./fromNormalAndPoint":579,"./fromPoints":580,"./fromPointsRandom":581,"./projectionOfPoint":583,"./signedDistanceToPoint":584,"./transform":585}],583:[function(t,e,n){arguments[4][175][0].apply(n,arguments)},{"../vec3":641,dup:175}],584:[function(t,e,n){arguments[4][176][0].apply(n,arguments)},{"../vec3":641,dup:176}],585:[function(t,e,n){arguments[4][177][0].apply(n,arguments)},{"../mat4":562,"../vec3":641,"./flip":577,"./fromPoints":580,dup:177}],586:[function(t,e,n){arguments[4][178][0].apply(n,arguments)},{"../constants":513,dup:178}],587:[function(t,e,n){arguments[4][179][0].apply(n,arguments)},{dup:179}],588:[function(t,e,n){arguments[4][180][0].apply(n,arguments)},{"./aboutEqualNormals":586,"./area":587,"./interpolateBetween2DPointsForY":589,"./intersect":590,"./solve2Linear":591,"./trigonometry":592,dup:180}],589:[function(t,e,n){arguments[4][181][0].apply(n,arguments)},{dup:181}],590:[function(t,e,n){arguments[4][182][0].apply(n,arguments)},{dup:182}],591:[function(t,e,n){arguments[4][183][0].apply(n,arguments)},{dup:183}],592:[function(t,e,n){arguments[4][184][0].apply(n,arguments)},{"../constants":513,dup:184}],593:[function(t,e,n){arguments[4][185][0].apply(n,arguments)},{dup:185}],594:[function(t,e,n){arguments[4][186][0].apply(n,arguments)},{dup:186}],595:[function(t,e,n){arguments[4][187][0].apply(n,arguments)},{"./angleRadians":597,dup:187}],596:[function(t,e,n){arguments[4][188][0].apply(n,arguments)},{"./angleRadians":597,dup:188}],597:[function(t,e,n){arguments[4][189][0].apply(n,arguments)},{dup:189}],598:[function(t,e,n){arguments[4][190][0].apply(n,arguments)},{"./create":600,dup:190}],599:[function(t,e,n){arguments[4][191][0].apply(n,arguments)},{dup:191}],600:[function(t,e,n){arguments[4][192][0].apply(n,arguments)},{dup:192}],601:[function(t,e,n){arguments[4][193][0].apply(n,arguments)},{dup:193}],602:[function(t,e,n){arguments[4][194][0].apply(n,arguments)},{dup:194}],603:[function(t,e,n){arguments[4][195][0].apply(n,arguments)},{dup:195}],604:[function(t,e,n){arguments[4][196][0].apply(n,arguments)},{dup:196}],605:[function(t,e,n){arguments[4][197][0].apply(n,arguments)},{dup:197}],606:[function(t,e,n){arguments[4][198][0].apply(n,arguments)},{"./fromAngleRadians":607,dup:198}],607:[function(t,e,n){arguments[4][199][0].apply(n,arguments)},{"../utils/trigonometry":592,dup:199}],608:[function(t,e,n){arguments[4][200][0].apply(n,arguments)},{dup:200}],609:[function(t,e,n){arguments[4][201][0].apply(n,arguments)},{"./create":600,dup:201}],610:[function(t,e,n){arguments[4][202][0].apply(n,arguments)},{"./abs":593,"./add":594,"./angle":595,"./angleDegrees":596,"./angleRadians":597,"./clone":598,"./copy":599,"./create":600,"./cross":601,"./distance":602,"./divide":603,"./dot":604,"./equals":605,"./fromAngleDegrees":606,"./fromAngleRadians":607,"./fromScalar":608,"./fromValues":609,"./length":611,"./lerp":612,"./max":613,"./min":614,"./multiply":615,"./negate":616,"./normal":617,"./normalize":618,"./rotate":619,"./scale":620,"./snap":621,"./squaredDistance":622,"./squaredLength":623,"./subtract":624,"./toString":625,"./transform":626,dup:202}],611:[function(t,e,n){arguments[4][203][0].apply(n,arguments)},{dup:203}],612:[function(t,e,n){arguments[4][204][0].apply(n,arguments)},{dup:204}],613:[function(t,e,n){arguments[4][205][0].apply(n,arguments)},{dup:205}],614:[function(t,e,n){arguments[4][206][0].apply(n,arguments)},{dup:206}],615:[function(t,e,n){arguments[4][207][0].apply(n,arguments)},{dup:207}],616:[function(t,e,n){arguments[4][208][0].apply(n,arguments)},{dup:208}],617:[function(t,e,n){arguments[4][209][0].apply(n,arguments)},{"../constants":513,"./create":600,"./rotate":619,dup:209}],618:[function(t,e,n){arguments[4][210][0].apply(n,arguments)},{dup:210}],619:[function(t,e,n){arguments[4][211][0].apply(n,arguments)},{dup:211}],620:[function(t,e,n){arguments[4][212][0].apply(n,arguments)},{dup:212}],621:[function(t,e,n){arguments[4][213][0].apply(n,arguments)},{dup:213}],622:[function(t,e,n){arguments[4][214][0].apply(n,arguments)},{dup:214}],623:[function(t,e,n){arguments[4][215][0].apply(n,arguments)},{dup:215}],624:[function(t,e,n){arguments[4][216][0].apply(n,arguments)},{dup:216}],625:[function(t,e,n){arguments[4][217][0].apply(n,arguments)},{dup:217}],626:[function(t,e,n){arguments[4][218][0].apply(n,arguments)},{dup:218}],627:[function(t,e,n){arguments[4][219][0].apply(n,arguments)},{dup:219}],628:[function(t,e,n){arguments[4][220][0].apply(n,arguments)},{dup:220}],629:[function(t,e,n){arguments[4][221][0].apply(n,arguments)},{"./dot":636,dup:221}],630:[function(t,e,n){arguments[4][222][0].apply(n,arguments)},{"./create":632,dup:222}],631:[function(t,e,n){arguments[4][223][0].apply(n,arguments)},{dup:223}],632:[function(t,e,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],633:[function(t,e,n){arguments[4][225][0].apply(n,arguments)},{dup:225}],634:[function(t,e,n){arguments[4][226][0].apply(n,arguments)},{dup:226}],635:[function(t,e,n){arguments[4][227][0].apply(n,arguments)},{dup:227}],636:[function(t,e,n){arguments[4][228][0].apply(n,arguments)},{dup:228}],637:[function(t,e,n){arguments[4][229][0].apply(n,arguments)},{dup:229}],638:[function(t,e,n){arguments[4][230][0].apply(n,arguments)},{dup:230}],639:[function(t,e,n){arguments[4][231][0].apply(n,arguments)},{"./create":632,dup:231}],640:[function(t,e,n){arguments[4][232][0].apply(n,arguments)},{dup:232}],641:[function(t,e,n){arguments[4][233][0].apply(n,arguments)},{"./abs":627,"./add":628,"./angle":629,"./clone":630,"./copy":631,"./create":632,"./cross":633,"./distance":634,"./divide":635,"./dot":636,"./equals":637,"./fromScalar":638,"./fromValues":639,"./fromVec2":640,"./length":642,"./lerp":643,"./max":644,"./min":645,"./multiply":646,"./negate":647,"./normalize":648,"./orthogonal":649,"./rotateX":650,"./rotateY":651,"./rotateZ":652,"./scale":653,"./snap":654,"./squaredDistance":655,"./squaredLength":656,"./subtract":657,"./toString":658,"./transform":659,dup:233}],642:[function(t,e,n){arguments[4][234][0].apply(n,arguments)},{dup:234}],643:[function(t,e,n){arguments[4][235][0].apply(n,arguments)},{dup:235}],644:[function(t,e,n){arguments[4][236][0].apply(n,arguments)},{dup:236}],645:[function(t,e,n){arguments[4][237][0].apply(n,arguments)},{dup:237}],646:[function(t,e,n){arguments[4][238][0].apply(n,arguments)},{dup:238}],647:[function(t,e,n){arguments[4][239][0].apply(n,arguments)},{dup:239}],648:[function(t,e,n){arguments[4][240][0].apply(n,arguments)},{dup:240}],649:[function(t,e,n){arguments[4][241][0].apply(n,arguments)},{"./abs":627,"./create":632,"./cross":633,dup:241}],650:[function(t,e,n){arguments[4][242][0].apply(n,arguments)},{dup:242}],651:[function(t,e,n){arguments[4][243][0].apply(n,arguments)},{dup:243}],652:[function(t,e,n){arguments[4][244][0].apply(n,arguments)},{dup:244}],653:[function(t,e,n){arguments[4][245][0].apply(n,arguments)},{dup:245}],654:[function(t,e,n){arguments[4][246][0].apply(n,arguments)},{dup:246}],655:[function(t,e,n){arguments[4][247][0].apply(n,arguments)},{dup:247}],656:[function(t,e,n){arguments[4][248][0].apply(n,arguments)},{dup:248}],657:[function(t,e,n){arguments[4][249][0].apply(n,arguments)},{dup:249}],658:[function(t,e,n){arguments[4][250][0].apply(n,arguments)},{dup:250}],659:[function(t,e,n){arguments[4][251][0].apply(n,arguments)},{dup:251}],660:[function(t,e,n){arguments[4][252][0].apply(n,arguments)},{"./create":662,dup:252}],661:[function(t,e,n){arguments[4][253][0].apply(n,arguments)},{dup:253}],662:[function(t,e,n){arguments[4][254][0].apply(n,arguments)},{dup:254}],663:[function(t,e,n){arguments[4][255][0].apply(n,arguments)},{dup:255}],664:[function(t,e,n){arguments[4][256][0].apply(n,arguments)},{dup:256}],665:[function(t,e,n){arguments[4][257][0].apply(n,arguments)},{dup:257}],666:[function(t,e,n){arguments[4][258][0].apply(n,arguments)},{"./create":662,dup:258}],667:[function(t,e,n){arguments[4][259][0].apply(n,arguments)},{"./clone":660,"./copy":661,"./create":662,"./dot":663,"./equals":664,"./fromScalar":665,"./fromValues":666,"./toString":668,"./transform":669,dup:259}],668:[function(t,e,n){arguments[4][260][0].apply(n,arguments)},{dup:260}],669:[function(t,e,n){arguments[4][261][0].apply(n,arguments)},{dup:261}],670:[function(t,e,n){arguments[4][262][0].apply(n,arguments)},{"../maths/constants":513,dup:262}],671:[function(t,e,n){arguments[4][263][0].apply(n,arguments)},{"./measureAggregateArea":672,"./measureAggregateBoundingBox":673,"./measureAggregateEpsilon":674,"./measureAggregateVolume":675,"./measureArea":676,"./measureBoundingBox":677,"./measureBoundingSphere":678,"./measureCenter":679,"./measureCenterOfMass":680,"./measureDimensions":681,"./measureEpsilon":682,"./measureVolume":683,dup:263}],672:[function(t,e,n){arguments[4][264][0].apply(n,arguments)},{"../utils/flatten":817,"./measureArea":676,dup:264}],673:[function(t,e,n){arguments[4][265][0].apply(n,arguments)},{"../maths/vec3/max":644,"../maths/vec3/min":645,"../utils/flatten":817,"./measureBoundingBox":677,dup:265}],674:[function(t,e,n){arguments[4][266][0].apply(n,arguments)},{"../geometries":469,"../utils/flatten":817,"./calculateEpsilonFromBounds":670,"./measureAggregateBoundingBox":673,dup:266}],675:[function(t,e,n){arguments[4][267][0].apply(n,arguments)},{"../utils/flatten":817,"./measureVolume":683,dup:267}],676:[function(t,e,n){arguments[4][268][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,"../geometries/poly3":498,"../utils/flatten":817,dup:268}],677:[function(t,e,n){arguments[4][269][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,"../geometries/poly3":498,"../maths/vec2":610,"../maths/vec3":641,"../utils/flatten":817,dup:269}],678:[function(t,e,n){arguments[4][270][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,"../geometries/poly3":498,"../maths/vec2":610,"../maths/vec3":641,"../utils/flatten":817,dup:270}],679:[function(t,e,n){arguments[4][271][0].apply(n,arguments)},{"../utils/flatten":817,"./measureBoundingBox":677,dup:271}],680:[function(t,e,n){arguments[4][272][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../maths/vec3":641,"../utils/flatten":817,dup:272}],681:[function(t,e,n){arguments[4][273][0].apply(n,arguments)},{"../utils/flatten":817,"./measureBoundingBox":677,dup:273}],682:[function(t,e,n){arguments[4][274][0].apply(n,arguments)},{"../geometries":469,"../utils/flatten":817,"./calculateEpsilonFromBounds":670,"./measureBoundingBox":677,dup:274}],683:[function(t,e,n){arguments[4][275][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,"../geometries/poly3":498,"../utils/flatten":817,dup:275}],684:[function(t,e,n){arguments[4][276][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../maths/vec2":610,dup:276}],685:[function(t,e,n){arguments[4][277][0].apply(n,arguments)},{"./intersect":686,"./scission":691,"./subtract":693,"./union":704,dup:277}],686:[function(t,e,n){arguments[4][278][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../utils/areAllShapesTheSameType":815,"../../utils/flatten":817,"./intersectGeom2":687,"./intersectGeom3":688,dup:278}],687:[function(t,e,n){arguments[4][279][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"./fromFakePolygons":684,"./intersectGeom3":688,"./to3DWalls":697,dup:279}],688:[function(t,e,n){arguments[4][280][0].apply(n,arguments)},{"../../utils/flatten":817,"../modifiers/retessellate":775,"./intersectGeom3Sub":689,dup:280}],689:[function(t,e,n){arguments[4][281][0].apply(n,arguments)},{"../../geometries/geom3":460,"./mayOverlap":690,"./trees":701,dup:281}],690:[function(t,e,n){arguments[4][282][0].apply(n,arguments)},{"../../maths/constants":513,"../../measurements/measureBoundingBox":677,dup:282}],691:[function(t,e,n){arguments[4][283][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../utils/flatten":817,"./scissionGeom3":692,dup:283}],692:[function(t,e,n){arguments[4][284][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../maths/vec3":641,"../../measurements/measureEpsilon":682,dup:284}],693:[function(t,e,n){arguments[4][285][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../utils/areAllShapesTheSameType":815,"../../utils/flatten":817,"./subtractGeom2":694,"./subtractGeom3":695,dup:285}],694:[function(t,e,n){arguments[4][286][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"./fromFakePolygons":684,"./subtractGeom3":695,"./to3DWalls":697,dup:286}],695:[function(t,e,n){arguments[4][287][0].apply(n,arguments)},{"../../utils/flatten":817,"../modifiers/retessellate":775,"./subtractGeom3Sub":696,dup:287}],696:[function(t,e,n){arguments[4][288][0].apply(n,arguments)},{"../../geometries/geom3":460,"./mayOverlap":690,"./trees":701,dup:288}],697:[function(t,e,n){arguments[4][289][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/vec3":641,dup:289}],698:[function(t,e,n){arguments[4][290][0].apply(n,arguments)},{"../../../geometries/poly3":498,"../../../maths/plane":582,dup:290}],699:[function(t,e,n){arguments[4][291][0].apply(n,arguments)},{"../../../geometries/poly3":498,"../../../maths/constants":513,"../../../maths/vec3":641,"./splitPolygonByPlane":703,dup:291}],700:[function(t,e,n){arguments[4][292][0].apply(n,arguments)},{"./Node":698,"./PolygonTreeNode":699,dup:292}],701:[function(t,e,n){arguments[4][293][0].apply(n,arguments)},{"./Tree":700,dup:293}],702:[function(t,e,n){arguments[4][294][0].apply(n,arguments)},{"../../../maths/vec3":641,dup:294}],703:[function(t,e,n){arguments[4][295][0].apply(n,arguments)},{"../../../geometries/poly3":498,"../../../maths/constants":513,"../../../maths/plane":582,"../../../maths/vec3":641,"./splitLineSegmentByPlane":702,dup:295}],704:[function(t,e,n){arguments[4][296][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../utils/areAllShapesTheSameType":815,"../../utils/flatten":817,"./unionGeom2":705,"./unionGeom3":706,dup:296}],705:[function(t,e,n){arguments[4][297][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"./fromFakePolygons":684,"./to3DWalls":697,"./unionGeom3":706,dup:297}],706:[function(t,e,n){arguments[4][298][0].apply(n,arguments)},{"../../utils/flatten":817,"../modifiers/retessellate":775,"./unionGeom3Sub":707,dup:298}],707:[function(t,e,n){arguments[4][299][0].apply(n,arguments)},{"../../geometries/geom3":460,"./mayOverlap":690,"./trees":701,dup:299}],708:[function(t,e,n){arguments[4][300][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../utils/flatten":817,"./expandGeom2":709,"./expandGeom3":710,"./expandPath2":711,dup:300}],709:[function(t,e,n){arguments[4][301][0].apply(n,arguments)},{"../../geometries/geom2":444,"./offsetFromPoints":716,dup:301}],710:[function(t,e,n){arguments[4][302][0].apply(n,arguments)},{"../../geometries/geom3":460,"../booleans/union":704,"./expandShell":712,dup:302}],711:[function(t,e,n){arguments[4][303][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"../../maths/utils/area":587,"../../maths/vec2":610,"./offsetFromPoints":716,dup:303}],712:[function(t,e,n){arguments[4][304][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/constants":513,"../../maths/mat4":562,"../../maths/vec3":641,"../../primitives/sphere":805,"../../utils/fnNumberSort":818,"../booleans/unionGeom3Sub":707,"../modifiers/retessellate":775,"./extrudePolygon":713,dup:304}],713:[function(t,e,n){arguments[4][305][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/mat4":562,"../../maths/vec3":641,dup:305}],714:[function(t,e,n){arguments[4][306][0].apply(n,arguments)},{"./expand":708,"./offset":715,dup:306}],715:[function(t,e,n){arguments[4][307][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"../../utils/flatten":817,"./offsetGeom2":717,"./offsetPath2":718,dup:307}],716:[function(t,e,n){arguments[4][308][0].apply(n,arguments)},{"../../maths/constants":513,"../../maths/line2":524,"../../maths/utils/area":587,"../../maths/utils/intersect":590,"../../maths/vec2":610,dup:308}],717:[function(t,e,n){arguments[4][309][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/poly2":492,"./offsetFromPoints":716,dup:309}],718:[function(t,e,n){arguments[4][310][0].apply(n,arguments)},{"../../geometries/path2":481,"./offsetFromPoints":716,dup:310}],719:[function(t,e,n){arguments[4][311][0].apply(n,arguments)},{"../../../geometries/geom2":444,"../../../geometries/poly2":492,"../../../maths/utils":588,dup:311}],720:[function(t,e,n){arguments[4][312][0].apply(n,arguments)},{"./linkedPolygon":724,"./triangle":726,dup:312}],721:[function(t,e,n){arguments[4][313][0].apply(n,arguments)},{"./eliminateHoles":720,"./linkedList":722,"./linkedPolygon":724,"./triangle":726,dup:313}],722:[function(t,e,n){arguments[4][314][0].apply(n,arguments)},{"./linkedListSort":723,dup:314}],723:[function(t,e,n){arguments[4][315][0].apply(n,arguments)},{dup:315}],724:[function(t,e,n){arguments[4][316][0].apply(n,arguments)},{"./linkedList":722,"./triangle":726,dup:316}],725:[function(t,e,n){arguments[4][317][0].apply(n,arguments)},{"../../../geometries/geom2":444,"../../../maths/plane":582,"../../../maths/vec2":610,"../../../maths/vec3":641,"../slice/calculatePlane":739,"./assignHoles":719,dup:317}],726:[function(t,e,n){arguments[4][318][0].apply(n,arguments)},{dup:318}],727:[function(t,e,n){arguments[4][319][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/mat4":562,"./extrudeWalls":736,"./slice":745,"./slice/repair":747,dup:319}],728:[function(t,e,n){arguments[4][320][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../maths/constants":513,"../../maths/mat4":562,"./extrudeFromSlices":727,"./slice":745,dup:320}],729:[function(t,e,n){arguments[4][321][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"../../utils/flatten":817,"./extrudeLinearGeom2":730,"./extrudeLinearPath2":731,dup:321}],730:[function(t,e,n){arguments[4][322][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../maths/mat4":562,"../../maths/vec3":641,"./extrudeFromSlices":727,"./slice":745,dup:322}],731:[function(t,e,n){arguments[4][323][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"./extrudeLinearGeom2":730,dup:323}],732:[function(t,e,n){arguments[4][324][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"../../utils/flatten":817,"./extrudeRectangularGeom2":733,"./extrudeRectangularPath2":734,dup:324}],733:[function(t,e,n){arguments[4][325][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/path2":481,"../../maths/utils":588,"../expansions/expand":708,"./extrudeLinearGeom2":730,dup:325}],734:[function(t,e,n){arguments[4][326][0].apply(n,arguments)},{"../../geometries/path2":481,"../expansions/expand":708,"./extrudeLinearGeom2":730,dup:326}],735:[function(t,e,n){const{TAU:o}=t("../../maths/constants"),r=t("../../maths/mat4"),{mirrorX:s}=t("../transforms/mirror"),i=t("../../geometries/geom2"),a=t("./slice"),c=t("./extrudeFromSlices");e.exports=(t,e)=>{const n={segments:12,startAngle:0,angle:o,overflow:"cap"};let{segments:l,startAngle:u,angle:h,overflow:p}=Object.assign({},n,t);if(l<3)throw new Error("segments must be greater then 3");u=Math.abs(u)>o?u%o:u,h=Math.abs(h)>o?h%o:h;let m=u+h;if(m=Math.abs(m)>o?m%o:m,m<u){const t=u;u=m,m=t}let d=m-u;if(d<=0&&(d=o),Math.abs(d)<o){const t=o/l;l=Math.floor(Math.abs(d)/t),Math.abs(d)>l*t&&l++}let f=i.toSides(e);if(0===f.length)throw new Error("the given geometry cannot be empty");const g=f.filter((t=>t[0][0]<0)),v=f.filter((t=>t[0][0]>=0));g.length>0&&v.length>0&&"cap"===p&&(g.length>v.length?(f=f.map((t=>{let e=t[0],n=t[1];return e=[Math.min(e[0],0),e[1]],n=[Math.min(n[0],0),n[1]],[e,n]})),e=i.create(f),e=s(e)):v.length>=g.length&&(f=f.map((t=>{let e=t[0],n=t[1];return e=[Math.max(e[0],0),e[1]],n=[Math.max(n[0],0),n[1]],[e,n]})),e=i.create(f)));const y=d/l,b=Math.abs(d)<o,x=a.fromSides(i.toSides(e));a.reverse(x,x);const A=r.create();return c(t={numberOfSlices:l+1,capStart:b,capEnd:b,close:!b,callback:(t,e,n)=>{let s=y*e+u;return d===o&&e===l&&(s=u),r.multiply(A,r.fromZRotation(A,s),r.fromXRotation(r.create(),o/4)),a.transform(A,n)}},x)}},{"../../geometries/geom2":444,"../../maths/constants":513,"../../maths/mat4":562,"../transforms/mirror":782,"./extrudeFromSlices":727,"./slice":745}],736:[function(t,e,n){arguments[4][328][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/constants":513,"../../maths/vec3":641,"./slice":745,dup:328}],737:[function(t,e,n){arguments[4][329][0].apply(n,arguments)},{"./extrudeFromSlices":727,"./extrudeHelical":728,"./extrudeLinear":729,"./extrudeRectangular":732,"./extrudeRotate":735,"./project":738,"./slice":745,dup:329}],738:[function(t,e,n){arguments[4][330][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/mat4":562,"../../maths/plane":582,"../../maths/utils/aboutEqualNormals":586,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"../booleans/unionGeom2":705,dup:330}],739:[function(t,e,n){arguments[4][331][0].apply(n,arguments)},{"../../../maths/plane":582,"../../../maths/vec3":641,dup:331}],740:[function(t,e,n){arguments[4][332][0].apply(n,arguments)},{"../../../maths/vec3":641,"./create":741,dup:332}],741:[function(t,e,n){arguments[4][333][0].apply(n,arguments)},{dup:333}],742:[function(t,e,n){arguments[4][334][0].apply(n,arguments)},{"../../../maths/vec3":641,dup:334}],743:[function(t,e,n){arguments[4][335][0].apply(n,arguments)},{"../../../maths/vec3":641,"./create":741,dup:335}],744:[function(t,e,n){arguments[4][336][0].apply(n,arguments)},{"../../../maths/vec3":641,"./create":741,dup:336}],745:[function(t,e,n){arguments[4][337][0].apply(n,arguments)},{"./calculatePlane":739,"./clone":740,"./create":741,"./equals":742,"./fromPoints":743,"./fromSides":744,"./isA":746,"./reverse":748,"./toEdges":749,"./toPolygons":750,"./toString":751,"./transform":752,dup:337}],746:[function(t,e,n){arguments[4][338][0].apply(n,arguments)},{dup:338}],747:[function(t,e,n){arguments[4][339][0].apply(n,arguments)},{"../../../maths/vec3":641,"./create":741,dup:339}],748:[function(t,e,n){arguments[4][340][0].apply(n,arguments)},{"./create":741,dup:340}],749:[function(t,e,n){arguments[4][341][0].apply(n,arguments)},{dup:341}],750:[function(t,e,n){arguments[4][342][0].apply(n,arguments)},{"../../../geometries/poly3":498,"../earcut":721,"../earcut/polygonHierarchy":725,dup:342}],751:[function(t,e,n){arguments[4][343][0].apply(n,arguments)},{"../../../maths/vec3":641,dup:343}],752:[function(t,e,n){arguments[4][344][0].apply(n,arguments)},{"../../../maths/vec3":641,"./create":741,dup:344}],753:[function(t,e,n){arguments[4][345][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../utils/areAllShapesTheSameType":815,"../../utils/flatten":817,"./hullGeom2":755,"./hullGeom3":756,"./hullPath2":757,dup:345}],754:[function(t,e,n){arguments[4][346][0].apply(n,arguments)},{"../../utils/flatten":817,"../booleans/union":704,"./hull":753,dup:346}],755:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom2"),s=t("./hullPoints2"),i=t("./toUniquePoints");e.exports=(...t)=>{t=o(t);const e=i(t),n=s(e);return n.length<3?r.create():r.fromPoints(n)}},{"../../geometries/geom2":444,"../../utils/flatten":817,"./hullPoints2":758,"./toUniquePoints":769}],756:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/geom3"),s=t("./toUniquePoints"),i=t("./hullPoints3");e.exports=(...t)=>{t=o(t);const e=s(t);return 0===e.length?r.create():r.create(i(e))}},{"../../geometries/geom3":460,"../../utils/flatten":817,"./hullPoints3":759,"./toUniquePoints":769}],757:[function(t,e,n){const o=t("../../utils/flatten"),r=t("../../geometries/path2"),s=t("./hullPoints2"),i=t("./toUniquePoints");e.exports=(...t)=>{t=o(t);const e=i(t),n=s(e);return r.fromPoints({closed:!0},n)}},{"../../geometries/path2":481,"../../utils/flatten":817,"./hullPoints2":758,"./toUniquePoints":769}],758:[function(t,e,n){const o=t("../../maths/vec2");e.exports=t=>{let e=o.fromValues(1/0,1/0);t.forEach((t=>{(t[1]<e[1]||t[1]===e[1]&&t[0]<e[0])&&(e=t)}));const n=[];t.forEach((t=>{const r=(i=t[1]-e[1],a=t[0]-e[0],0===i&&0===a?-1/0:-a/i),s=o.squaredDistance(t,e);var i,a;n.push({point:t,angle:r,distSq:s})})),n.sort(((t,e)=>t.angle!==e.angle?t.angle-e.angle:t.distSq-e.distSq));const r=[];return n.forEach((t=>{let e=r.length;for(;e>1&&(n=r[e-2],o=r[e-1],s=t.point,(o[0]-n[0])*(s[1]-n[1])-(o[1]-n[1])*(s[0]-n[0])<=Number.EPSILON);)r.pop(),e=r.length;var n,o,s;r.push(t.point)})),r}},{"../../maths/vec2":610}],759:[function(t,e,n){const o=t("../../geometries/poly3"),r=t("./quickhull");e.exports=t=>r(t,{skipTriangulation:!0}).map((e=>{const n=e.map((e=>t[e]));return o.create(n)}))},{"../../geometries/poly3":498,"./quickhull":767}],760:[function(t,e,n){e.exports={hull:t("./hull"),hullChain:t("./hullChain"),hullPoints2:t("./hullPoints2"),hullPoints3:t("./hullPoints3")}},{"./hull":753,"./hullChain":754,"./hullPoints2":758,"./hullPoints3":759}],761:[function(t,e,n){arguments[4][352][0].apply(n,arguments)},{"../../../maths/vec3/add":628,"../../../maths/vec3/copy":631,"../../../maths/vec3/cross":633,"../../../maths/vec3/dot":636,"../../../maths/vec3/length":642,"../../../maths/vec3/normalize":648,"../../../maths/vec3/scale":653,"../../../maths/vec3/subtract":657,"./HalfEdge":762,dup:352}],762:[function(t,e,n){arguments[4][353][0].apply(n,arguments)},{"../../../maths/vec3/distance":634,"../../../maths/vec3/squaredDistance":655,dup:353}],763:[function(t,e,n){arguments[4][354][0].apply(n,arguments)},{"../../../maths/vec3/dot":636,"./Face":761,"./Vertex":764,"./VertexList":765,"./get-plane-normal":766,"./point-line-distance":768,dup:354}],764:[function(t,e,n){arguments[4][355][0].apply(n,arguments)},{dup:355}],765:[function(t,e,n){arguments[4][356][0].apply(n,arguments)},{dup:356}],766:[function(t,e,n){arguments[4][357][0].apply(n,arguments)},{"../../../maths/vec3/cross":633,"../../../maths/vec3/normalize":648,"../../../maths/vec3/subtract":657,dup:357}],767:[function(t,e,n){arguments[4][358][0].apply(n,arguments)},{"./QuickHull":763,dup:358}],768:[function(t,e,n){arguments[4][359][0].apply(n,arguments)},{"../../../maths/vec3/cross":633,"../../../maths/vec3/squaredLength":656,"../../../maths/vec3/subtract":657,dup:359}],769:[function(t,e,n){arguments[4][360][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,dup:360}],770:[function(t,e,n){arguments[4][361][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"./insertTjunctions":772,"./mergePolygons":773,"./snapPolygons":777,"./triangulatePolygons":778,dup:361}],771:[function(t,e,n){arguments[4][362][0].apply(n,arguments)},{"./generalize":770,"./retessellate":775,"./snap":776,dup:362}],772:[function(t,e,n){arguments[4][363][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/constants":513,"../../maths/vec3":641,dup:363}],773:[function(t,e,n){arguments[4][364][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/utils/aboutEqualNormals":586,"../../maths/vec3":641,dup:364}],774:[function(t,e,n){arguments[4][365][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/OrthoNormalBasis":512,"../../maths/constants":513,"../../maths/line2":524,"../../maths/utils/interpolateBetween2DPointsForY":589,"../../maths/vec2":610,"../../utils":819,dup:365}],775:[function(t,e,n){arguments[4][366][0].apply(n,arguments)},{"../../geometries/geom3":460,"../../geometries/poly3":498,"../../maths/constants":513,"./reTesselateCoplanarPolygons":774,dup:366}],776:[function(t,e,n){arguments[4][367][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../maths/vec2":610,"../../measurements/measureEpsilon":682,"../../utils/flatten":817,"./snapPolygons":777,dup:367}],777:[function(t,e,n){arguments[4][368][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/vec3":641,dup:368}],778:[function(t,e,n){arguments[4][369][0].apply(n,arguments)},{"../../geometries/poly3":498,"../../maths/vec3":641,dup:369}],779:[function(t,e,n){arguments[4][370][0].apply(n,arguments)},{"../../measurements/measureAggregateBoundingBox":673,"../../utils/flatten":817,"../../utils/padArrayToLength":821,"./translate":786,dup:370}],780:[function(t,e,n){arguments[4][371][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../measurements/measureBoundingBox":677,"../../utils/flatten":817,"./translate":786,dup:371}],781:[function(t,e,n){arguments[4][372][0].apply(n,arguments)},{"./align":779,"./center":780,"./mirror":782,"./rotate":783,"./scale":784,"./transform":785,"./translate":786,dup:372}],782:[function(t,e,n){arguments[4][373][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../maths/mat4":562,"../../maths/plane":582,"../../utils/flatten":817,dup:373}],783:[function(t,e,n){arguments[4][374][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../maths/mat4":562,"../../utils/flatten":817,dup:374}],784:[function(t,e,n){arguments[4][375][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../maths/mat4":562,"../../utils/flatten":817,dup:375}],785:[function(t,e,n){arguments[4][376][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../utils/flatten":817,dup:376}],786:[function(t,e,n){arguments[4][377][0].apply(n,arguments)},{"../../geometries/geom2":444,"../../geometries/geom3":460,"../../geometries/path2":481,"../../maths/mat4":562,"../../utils/flatten":817,dup:377}],787:[function(t,e,n){arguments[4][378][0].apply(n,arguments)},{"../geometries/path2":481,"../maths/constants":513,"../maths/vec2":610,"./commonChecks":789,dup:378}],788:[function(t,e,n){arguments[4][379][0].apply(n,arguments)},{"../maths/constants":513,"./commonChecks":789,"./ellipse":794,dup:379}],789:[function(t,e,n){arguments[4][380][0].apply(n,arguments)},{dup:380}],790:[function(t,e,n){arguments[4][381][0].apply(n,arguments)},{"./commonChecks":789,"./cuboid":791,dup:381}],791:[function(t,e,n){arguments[4][382][0].apply(n,arguments)},{"../geometries/geom3":460,"../geometries/poly3":498,"./commonChecks":789,dup:382}],792:[function(t,e,n){arguments[4][383][0].apply(n,arguments)},{"../geometries/geom3":460,"./commonChecks":789,"./cylinderElliptic":793,dup:383}],793:[function(t,e,n){arguments[4][384][0].apply(n,arguments)},{"../geometries/geom3":460,"../geometries/poly3":498,"../maths/constants":513,"../maths/utils/trigonometry":592,"../maths/vec3":641,"./commonChecks":789,dup:384}],794:[function(t,e,n){arguments[4][385][0].apply(n,arguments)},{"../geometries/geom2":444,"../maths/constants":513,"../maths/utils/trigonometry":592,"../maths/vec2":610,"./commonChecks":789,dup:385}],795:[function(t,e,n){arguments[4][386][0].apply(n,arguments)},{"../geometries/geom3":460,"../geometries/poly3":498,"../maths/constants":513,"../maths/utils/trigonometry":592,"../maths/vec3":641,"./commonChecks":789,dup:386}],796:[function(t,e,n){arguments[4][387][0].apply(n,arguments)},{"../geometries/geom3":460,"../maths/mat4":562,"../maths/vec3":641,"./commonChecks":789,"./polyhedron":800,dup:387}],797:[function(t,e,n){arguments[4][388][0].apply(n,arguments)},{"./arc":787,"./circle":788,"./cube":790,"./cuboid":791,"./cylinder":792,"./cylinderElliptic":793,"./ellipse":794,"./ellipsoid":795,"./geodesicSphere":796,"./line":798,"./polygon":799,"./polyhedron":800,"./rectangle":801,"./roundedCuboid":802,"./roundedCylinder":803,"./roundedRectangle":804,"./sphere":805,"./square":806,"./star":807,"./torus":808,"./triangle":809,dup:388}],798:[function(t,e,n){arguments[4][389][0].apply(n,arguments)},{"../geometries/path2":481,dup:389}],799:[function(t,e,n){const o=t("../geometries/geom2");e.exports=t=>{const{points:e,paths:n,orientation:r}=Object.assign({},{points:[],paths:[],orientation:"counterclockwise"},t);if(!Array.isArray(e)||!Array.isArray(n))throw new Error("points and paths must be arrays");let s=e;Array.isArray(e[0])&&(Array.isArray(e[0][0])||(s=[e])),s.forEach(((t,e)=>{if(!Array.isArray(t))throw new Error("list of points "+e+" must be an array");if(t.length<3)throw new Error("list of points "+e+" must contain three or more points");t.forEach(((t,n)=>{if(!Array.isArray(t))throw new Error("list of points "+e+", point "+n+" must be an array");if(t.length<2)throw new Error("list of points "+e+", point "+n+" must contain by X and Y values")}))}));let i=n;if(0===n.length){let t=0;i=s.map((e=>e.map((e=>t++))))}const a=[];s.forEach((t=>t.forEach((t=>a.push(t)))));let c=[];i.forEach((t=>{const e=t.map((t=>a[t])),n=o.fromPoints(e);c=c.concat(o.toSides(n))}));let l=o.create(c);return"clockwise"==r&&(l=o.reverse(l)),l}},{"../geometries/geom2":444}],800:[function(t,e,n){arguments[4][391][0].apply(n,arguments)},{"../geometries/geom3":460,"../geometries/poly3":498,"./commonChecks":789,dup:391}],801:[function(t,e,n){arguments[4][392][0].apply(n,arguments)},{"../geometries/geom2":444,"../maths/vec2":610,"./commonChecks":789,dup:392}],802:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../maths/vec3"),a=t("../geometries/geom3"),c=t("../geometries/poly3"),{sin:l,cos:u}=t("../maths/utils/trigonometry"),{isGTE:h,isNumberArray:p}=t("./commonChecks"),m=t("./cuboid"),d=(t,e,n,a,c,h)=>{const p=r/4*c/a,m=u(p),d=l(p),f=a-c;let g=n*m,v=e[2]-(n-n*d);h||(v=n-n*d-e[2]),g=g>o?g:0;const y=i.add(i.create(),t,[e[0]-n,e[1]-n,v]),b=i.add(i.create(),t,[n-e[0],e[1]-n,v]),x=i.add(i.create(),t,[n-e[0],n-e[1],v]),A=i.add(i.create(),t,[e[0]-n,n-e[1],v]),E=[],w=[],D=[],P=[];for(let t=0;t<=f;t++){const e=f>0?r/4*t/f:0,n=s.fromAngleRadians(s.create(),e);s.scale(n,n,g);const o=i.fromVec2(i.create(),n);E.push(i.add(i.create(),y,o)),i.rotateZ(o,o,[0,0,0],r/4),w.push(i.add(i.create(),b,o)),i.rotateZ(o,o,[0,0,0],r/4),D.push(i.add(i.create(),x,o)),i.rotateZ(o,o,[0,0,0],r/4),P.push(i.add(i.create(),A,o))}return h?[E,w,D,P]:(E.reverse(),w.reverse(),D.reverse(),P.reverse(),[P,D,w,E])},f=(t,e)=>{const n=[];for(let o=0;o<t.length;o++){const r=t[o],s=e[o];for(let t=0;t<r.length-1;t++)n.push(c.create([r[t],r[t+1],s[t]])),t<s.length-1&&n.push(c.create([s[t],r[t+1],s[t+1]]))}return n},g=(t,e)=>{const n=[];for(let o=0;o<t.length;o++){let r=t[o],s=e[o];const i=r[r.length-1],a=s[s.length-1],l=(o+1)%t.length;r=t[l],s=e[l];const u=r[0],h=s[0];n.push(c.create([i,u,h,a]))}return n},v=(t,e)=>{t=(t=[t[3],t[2],t[1],t[0]]).map((t=>t.slice().reverse()));const n=[];t.forEach((t=>{t.forEach((t=>n.push(t)))}));const o=[];e.forEach((t=>{t.forEach((t=>o.push(t)))}));const r=[];for(let t=0;t<o.length;t++){const e=(t+1)%o.length;r.push(c.create([n[t],n[e],o[e],o[t]]))}return r};e.exports=t=>{let{center:e,size:n,roundRadius:r,segments:s}=Object.assign({},{center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},t);if(!p(e,3))throw new Error("center must be an array of X, Y and Z values");if(!p(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");if(!h(r,0))throw new Error("roundRadius must be positive");if(!h(s,4))throw new Error("segments must be four or more");if(0===n[0]||0===n[1]||0===n[2])return a.create();if(0===r)return m({center:e,size:n});if(n=n.map((t=>t/2)),r>n[0]-o||r>n[1]-o||r>n[2]-o)throw new Error("roundRadius must be smaller than the radius of all dimensions");s=Math.floor(s/4);let i=null,l=null,u=[];for(let t=0;t<=s;t++){const o=d(e,n,r,s,t,!0),a=d(e,n,r,s,t,!1);if(0===t&&(u=u.concat(v(a,o))),i&&(u=u.concat(f(i,o),g(i,o))),l&&(u=u.concat(f(l,a),g(l,a))),t===s){let t=o.map((t=>t[0]));u.push(c.create(t)),t=a.map((t=>t[0])),u.push(c.create(t))}i=o,l=a}return a.create(u)}},{"../geometries/geom3":460,"../geometries/poly3":498,"../maths/constants":513,"../maths/utils/trigonometry":592,"../maths/vec2":610,"../maths/vec3":641,"./commonChecks":789,"./cuboid":791}],803:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec3"),i=t("../geometries/geom3"),a=t("../geometries/poly3"),{sin:c,cos:l}=t("../maths/utils/trigonometry"),{isGTE:u,isNumberArray:h}=t("./commonChecks"),p=t("./cylinder");e.exports=t=>{const{center:e,height:n,radius:m,roundRadius:d,segments:f}=Object.assign({},{center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},t);if(!h(e,3))throw new Error("center must be an array of X, Y and Z values");if(!u(n,0))throw new Error("height must be positive");if(!u(m,0))throw new Error("radius must be positive");if(!u(d,0))throw new Error("roundRadius must be positive");if(d>m)throw new Error("roundRadius must be smaller than the radius");if(!u(f,4))throw new Error("segments must be four or more");if(0===n||0===m)return i.create();if(0===d)return p({center:e,height:n,radius:m});const g=[0,0,-n/2],v=[0,0,n/2],y=s.subtract(s.create(),v,g);if(2*d>s.length(y)-o)throw new Error("height must be larger than twice roundRadius");let b;b=Math.abs(y[0])>Math.abs(y[1])?s.fromValues(0,1,0):s.fromValues(1,0,0);const x=s.scale(s.create(),s.normalize(s.create(),y),d),A=s.scale(s.create(),s.normalize(s.create(),s.cross(s.create(),x,b)),m),E=s.scale(s.create(),s.normalize(s.create(),s.cross(s.create(),A,x)),m);s.add(g,g,x),s.subtract(v,v,x);const w=Math.floor(.25*f),D=t=>{const n=t.map((t=>s.add(t,t,e)));return a.create(n)},P=[],S=s.create(),T=s.create();let C;for(let t=0;t<=f;t++){const e=r*t/f,n=s.add(s.create(),s.scale(S,A,l(e)),s.scale(T,E,c(e)));if(t>0){let t,e,o=[];o.push(s.add(s.create(),g,n)),o.push(s.add(s.create(),g,C)),o.push(s.add(s.create(),v,C)),o.push(s.add(s.create(),v,n)),P.push(D(o));for(let i=0;i<=w;i++){const a=r/4*i/w,u=l(a),h=c(a);if(i>0){let r;o=[],r=s.add(s.create(),g,s.subtract(S,s.scale(S,C,t),s.scale(T,x,e))),o.push(r),r=s.add(s.create(),g,s.subtract(S,s.scale(S,n,t),s.scale(T,x,e))),o.push(r),i<w&&(r=s.add(s.create(),g,s.subtract(S,s.scale(S,n,u),s.scale(T,x,h))),o.push(r)),r=s.add(s.create(),g,s.subtract(S,s.scale(S,C,u),s.scale(T,x,h))),o.push(r),P.push(D(o)),o=[],r=s.add(s.create(),s.scale(S,C,t),s.scale(T,x,e)),s.add(r,r,v),o.push(r),r=s.add(s.create(),s.scale(S,n,t),s.scale(T,x,e)),s.add(r,r,v),o.push(r),i<w&&(r=s.add(s.create(),s.scale(S,n,u),s.scale(T,x,h)),s.add(r,r,v),o.push(r)),r=s.add(s.create(),s.scale(S,C,u),s.scale(T,x,h)),s.add(r,r,v),o.push(r),o.reverse(),P.push(D(o))}t=u,e=h}}C=n}return i.create(P)}},{"../geometries/geom3":460,"../geometries/poly3":498,"../maths/constants":513,"../maths/utils/trigonometry":592,"../maths/vec3":641,"./commonChecks":789,"./cylinder":792}],804:[function(t,e,n){const{EPS:o,TAU:r}=t("../maths/constants"),s=t("../maths/vec2"),i=t("../geometries/geom2"),{isGTE:a,isNumberArray:c}=t("./commonChecks"),l=t("./rectangle");e.exports=t=>{let{center:e,size:n,roundRadius:u,segments:h}=Object.assign({},{center:[0,0],size:[2,2],roundRadius:.2,segments:32},t);if(!c(e,2))throw new Error("center must be an array of X and Y values");if(!c(n,2))throw new Error("size must be an array of X and Y values");if(!n.every((t=>t>=0)))throw new Error("size values must be positive");if(!a(u,0))throw new Error("roundRadius must be positive");if(!a(h,4))throw new Error("segments must be four or more");if(0===n[0]||0===n[1])return i.create();if(0===u)return l({center:e,size:n});if(n=n.map((t=>t/2)),u>n[0]-o||u>n[1]-o)throw new Error("roundRadius must be smaller than the radius of all dimensions");const p=Math.floor(h/4),m=s.add(s.create(),e,[n[0]-u,n[1]-u]),d=s.add(s.create(),e,[u-n[0],n[1]-u]),f=s.add(s.create(),e,[u-n[0],u-n[1]]),g=s.add(s.create(),e,[n[0]-u,u-n[1]]),v=[],y=[],b=[],x=[];for(let t=0;t<=p;t++){const e=r/4*t/p,n=s.fromAngleRadians(s.create(),e);s.scale(n,n,u),v.push(s.add(s.create(),m,n)),s.rotate(n,n,s.create(),r/4),y.push(s.add(s.create(),d,n)),s.rotate(n,n,s.create(),r/4),b.push(s.add(s.create(),f,n)),s.rotate(n,n,s.create(),r/4),x.push(s.add(s.create(),g,n))}return i.fromPoints(v.concat(y,b,x))}},{"../geometries/geom2":444,"../maths/constants":513,"../maths/vec2":610,"./commonChecks":789,"./rectangle":801}],805:[function(t,e,n){arguments[4][396][0].apply(n,arguments)},{"./commonChecks":789,"./ellipsoid":795,dup:396}],806:[function(t,e,n){arguments[4][397][0].apply(n,arguments)},{"./commonChecks":789,"./rectangle":801,dup:397}],807:[function(t,e,n){arguments[4][398][0].apply(n,arguments)},{"../geometries/geom2":444,"../maths/constants":513,"../maths/vec2":610,"./commonChecks":789,dup:398}],808:[function(t,e,n){arguments[4][399][0].apply(n,arguments)},{"../maths/constants":513,"../operations/extrusions/extrudeRotate":735,"../operations/transforms/rotate":783,"../operations/transforms/translate":786,"./circle":788,"./commonChecks":789,dup:399}],809:[function(t,e,n){arguments[4][400][0].apply(n,arguments)},{"../geometries/geom2":444,"../maths/constants":513,"../maths/vec2":610,"./commonChecks":789,dup:400}],810:[function(t,e,n){arguments[4][401][0].apply(n,arguments)},{dup:401}],811:[function(t,e,n){arguments[4][402][0].apply(n,arguments)},{"./vectorChar":812,"./vectorText":814,dup:402}],812:[function(t,e,n){arguments[4][403][0].apply(n,arguments)},{"./vectorParams":813,dup:403}],813:[function(t,e,n){arguments[4][404][0].apply(n,arguments)},{"./fonts/single-line/hershey/simplex.js":810,dup:404}],814:[function(t,e,n){arguments[4][405][0].apply(n,arguments)},{"./vectorChar":812,"./vectorParams":813,dup:405}],815:[function(t,e,n){arguments[4][406][0].apply(n,arguments)},{"../geometries/geom2":444,"../geometries/geom3":460,"../geometries/path2":481,dup:406}],816:[function(t,e,n){arguments[4][407][0].apply(n,arguments)},{dup:407}],817:[function(t,e,n){arguments[4][408][0].apply(n,arguments)},{dup:408}],818:[function(t,e,n){arguments[4][409][0].apply(n,arguments)},{dup:409}],819:[function(t,e,n){arguments[4][410][0].apply(n,arguments)},{"./areAllShapesTheSameType":815,"./degToRad":816,"./flatten":817,"./fnNumberSort":818,"./insertSorted":820,"./radToDeg":822,"./radiusToSegments":823,dup:410}],820:[function(t,e,n){arguments[4][411][0].apply(n,arguments)},{dup:411}],821:[function(t,e,n){arguments[4][412][0].apply(n,arguments)},{dup:412}],822:[function(t,e,n){arguments[4][413][0].apply(n,arguments)},{dup:413}],823:[function(t,e,n){arguments[4][414][0].apply(n,arguments)},{"../maths/constants":513,dup:414}],824:[function(t,e,n){const{geometries:o}=t("@jscad/modeling"),r=(t,e)=>{const n=[];return o.geom3.toPolygons(t).forEach(((t,e)=>{n.push(a(t))})),n.join("\n")},s=t=>`${t[0]} ${t[1]} ${t[2]}`,i=t=>`vertex ${s(t)}`,a=t=>{const e=[];if(t.vertices.length>=3){const n=i(t.vertices[0]);for(let r=0;r<t.vertices.length-2;r++){const a=`facet normal ${s(o.poly3.plane(t))}\nouter loop\n${n}\n${i(t.vertices[r+1])}\n${i(t.vertices[r+2])}\nendloop\nendfacet`;e.push(a)}}return e.join("\n")};e.exports={serializeText:(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});const n=`solid JSCAD\n${((t,e)=>{const n=[];return t.forEach(((o,s)=>{n.push(r(o,e)),e.statusCallback&&e.statusCallback({progress:100*s/t.length})})),n.join("\n")})(t,e)}\nendsolid JSCAD\n`;return e.statusCallback&&e.statusCallback({progress:100}),[n]}}},{"@jscad/modeling":511}],825:[function(t,e,n){const{geometries:o}=t("@jscad/modeling");e.exports={serializeBinary:(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});const n=new ArrayBuffer(4),r=new Int32Array(n,0,1),s=new Int8Array(n,0,4);if(r[0]=287454020,68!==s[0])throw new Error("Binary STL output is currently only supported on little-endian (Intel) processors");let i=0,a=0;t.forEach(((t,e)=>{o.geom3.toPolygons(t).forEach((t=>{const e=t.vertices.length;i+=e>=3?e-2:0,a+=1}))}));const c=new Uint8Array(80);for(let t=0;t<80;t++)c[t]=65;const l=new Uint32Array(1);l[0]=i;const u=new ArrayBuffer(50*i),h=new Int8Array(u),p=new ArrayBuffer(50),m=new Int8Array(p),d=new Float32Array(p,0,12),f=new Uint16Array(p,48,1);let g=0;return t.forEach((t=>{o.geom3.toPolygons(t).forEach(((t,n)=>{const r=t.vertices,s=r.length,i=o.poly3.plane(t);for(let t=0;t<s-2;t++){d[0]=i[0],d[1]=i[1],d[2]=i[2];let e=3;for(let n=0;n<3;n++){const o=r[n+(n>0?t:0)];d[e++]=o[0],d[e++]=o[1],d[e++]=o[2]}f[0]=0,h.set(m,g),g+=50}e.statusCallback&&e.statusCallback({progress:100*n/a})}))})),e.statusCallback&&e.statusCallback({progress:100}),[c.buffer,l.buffer,u]}}},{"@jscad/modeling":511}],826:[function(t,e,n){const{geometries:o,modifiers:r}=t("@jscad/modeling"),{flatten:s,toArray:i}=t("@jscad/array-utils"),{serializeBinary:a}=t("./CSGToStlb"),{serializeText:c}=t("./CSGToStla");e.exports={mimeType:"application/sla",serialize:(t,...e)=>{t=Object.assign({},{binary:!0,statusCallback:null},t);let n=(e=s(e)).filter((t=>o.geom3.isA(t)));if(0===n.length)throw new Error("only 3D geometries can be serialized to STL");return e.length!==n.length&&console.warn("some objects could not be serialized to STL"),n=i(r.generalize({snap:!0,triangulate:!0},n)),t.binary?a(n,t):c(n,t)}}},{"./CSGToStla":824,"./CSGToStlb":825,"@jscad/array-utils":6,"@jscad/modeling":511}],827:[function(t,e,n){var o=t("./node-worker.cjs"),r=Uint8Array,s=Uint16Array,i=Uint32Array,a=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(t,e){for(var n=new s(31),o=0;o<31;++o)n[o]=e+=1<<t[o-1];var r=new i(n[30]);for(o=1;o<30;++o)for(var a=n[o];a<n[o+1];++a)r[a]=a-n[o]<<5|o;return[n,r]},h=u(a,2),p=h[0],m=h[1];p[28]=258,m[258]=28;for(var d=u(c,0),f=d[0],g=d[1],v=new s(32768),y=0;y<32768;++y){var b=(43690&y)>>>1|(21845&y)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,v[y]=((65280&b)>>>8|(255&b)<<8)>>>1}var x=function(t,e,n){for(var o=t.length,r=0,i=new s(e);r<o;++r)t[r]&&++i[t[r]-1];var a,c=new s(e);for(r=0;r<e;++r)c[r]=c[r-1]+i[r-1]<<1;if(n){a=new s(1<<e);var l=15-e;for(r=0;r<o;++r)if(t[r])for(var u=r<<4|t[r],h=e-t[r],p=c[t[r]-1]++<<h,m=p|(1<<h)-1;p<=m;++p)a[v[p]>>>l]=u}else for(a=new s(o),r=0;r<o;++r)t[r]&&(a[r]=v[c[t[r]-1]++]>>>15-t[r]);return a},A=new r(288);for(y=0;y<144;++y)A[y]=8;for(y=144;y<256;++y)A[y]=9;for(y=256;y<280;++y)A[y]=7;for(y=280;y<288;++y)A[y]=8;var E=new r(32);for(y=0;y<32;++y)E[y]=5;var w=x(A,9,0),D=x(A,9,1),P=x(E,5,0),S=x(E,5,1),T=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},C=function(t,e,n){var o=e/8|0;return(t[o]|t[o+1]<<8)>>(7&e)&n},M=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},R=function(t){return(t+7)/8|0},O=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var o=new(2==t.BYTES_PER_ELEMENT?s:4==t.BYTES_PER_ELEMENT?i:r)(n-e);return o.set(t.subarray(e,n)),o};n.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var I=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(t,e,n){var o=new Error(e||I[t]);if(o.code=t,Error.captureStackTrace&&Error.captureStackTrace(o,L),!n)throw o;return o},B=function(t,e,n){var o=t.length;if(!o||n&&n.f&&!n.l)return e||new r(0);var s=!e||n,i=!n||n.i;n||(n={}),e||(e=new r(3*o));var u=function(t){var n=e.length;if(t>n){var o=new r(Math.max(2*n,t));o.set(e),e=o}},h=n.f||0,m=n.p||0,d=n.b||0,g=n.l,v=n.d,y=n.m,b=n.n,A=8*o;do{if(!g){h=C(t,m,1);var E=C(t,m+1,3);if(m+=3,!E){var w=t[(V=R(m)+4)-4]|t[V-3]<<8,P=V+w;if(P>o){i&&L(0);break}s&&u(d+w),e.set(t.subarray(V,P),d),n.b=d+=w,n.p=m=8*P,n.f=h;continue}if(1==E)g=D,v=S,y=9,b=5;else if(2==E){var I=C(t,m,31)+257,B=C(t,m+10,15)+4,N=I+C(t,m+5,31)+1;m+=14;for(var k=new r(N),$=new r(19),F=0;F<B;++F)$[l[F]]=C(t,m+3*F,7);m+=3*B;var j=T($),z=(1<<j)-1,_=x($,j,1);for(F=0;F<N;){var V,Y=_[C(t,m,z)];if(m+=15&Y,(V=Y>>>4)<16)k[F++]=V;else{var q=0,U=0;for(16==V?(U=3+C(t,m,3),m+=2,q=k[F-1]):17==V?(U=3+C(t,m,7),m+=3):18==V&&(U=11+C(t,m,127),m+=7);U--;)k[F++]=q}}var G=k.subarray(0,I),H=k.subarray(I);y=T(G),b=T(H),g=x(G,y,1),v=x(H,b,1)}else L(1);if(m>A){i&&L(0);break}}s&&u(d+131072);for(var X=(1<<y)-1,Z=(1<<b)-1,W=m;;W=m){var Q=(q=g[M(t,m)&X])>>>4;if((m+=15&q)>A){i&&L(0);break}if(q||L(2),Q<256)e[d++]=Q;else{if(256==Q){W=m,g=null;break}var J=Q-254;if(Q>264){var K=a[F=Q-257];J=C(t,m,(1<<K)-1)+p[F],m+=K}var tt=v[M(t,m)&Z],et=tt>>>4;if(tt||L(3),m+=15&tt,H=f[et],et>3&&(K=c[et],H+=M(t,m)&(1<<K)-1,m+=K),m>A){i&&L(0);break}s&&u(d+131072);for(var nt=d+J;d<nt;d+=4)e[d]=e[d-H],e[d+1]=e[d+1-H],e[d+2]=e[d+2-H],e[d+3]=e[d+3-H];d=nt}}n.l=g,n.p=W,n.b=d,n.f=h,g&&(h=1,n.m=y,n.d=v,n.n=b)}while(!h);return d==e.length?e:O(e,0,d)},N=function(t,e,n){n<<=7&e;var o=e/8|0;t[o]|=n,t[o+1]|=n>>>8},k=function(t,e,n){n<<=7&e;var o=e/8|0;t[o]|=n,t[o+1]|=n>>>8,t[o+2]|=n>>>16},$=function(t,e){for(var n=[],o=0;o<t.length;++o)t[o]&&n.push({s:o,f:t[o]});var i=n.length,a=n.slice();if(!i)return[q,0];if(1==i){var c=new r(n[0].s+1);return c[n[0].s]=1,[c,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var l=n[0],u=n[1],h=0,p=1,m=2;for(n[0]={s:-1,f:l.f+u.f,l,r:u};p!=i-1;)l=n[n[h].f<n[m].f?h++:m++],u=n[h!=p&&n[h].f<n[m].f?h++:m++],n[p++]={s:-1,f:l.f+u.f,l,r:u};var d=a[0].s;for(o=1;o<i;++o)a[o].s>d&&(d=a[o].s);var f=new s(d+1),g=F(n[p-1],f,0);if(g>e){o=0;var v=0,y=g-e,b=1<<y;for(a.sort((function(t,e){return f[e.s]-f[t.s]||t.f-e.f}));o<i;++o){var x=a[o].s;if(!(f[x]>e))break;v+=b-(1<<g-f[x]),f[x]=e}for(v>>>=y;v>0;){var A=a[o].s;f[A]<e?v-=1<<e-f[A]++-1:++o}for(;o>=0&&v;--o){var E=a[o].s;f[E]==e&&(--f[E],++v)}g=e}return[new r(f),g]},F=function(t,e,n){return-1==t.s?Math.max(F(t.l,e,n+1),F(t.r,e,n+1)):e[t.s]=n},j=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new s(++e),o=0,r=t[0],i=1,a=function(t){n[o++]=t},c=1;c<=e;++c)if(t[c]==r&&c!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(r),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(r);i=1,r=t[c]}return[n.subarray(0,o),e]},z=function(t,e){for(var n=0,o=0;o<e.length;++o)n+=t[o]*e[o];return n},_=function(t,e,n){var o=n.length,r=R(e+2);t[r]=255&o,t[r+1]=o>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<o;++s)t[r+s+4]=n[s];return 8*(r+4+o)},V=function(t,e,n,o,r,i,u,h,p,m,d){N(e,d++,n),++r[256];for(var f=$(r,15),g=f[0],v=f[1],y=$(i,15),b=y[0],D=y[1],S=j(g),T=S[0],C=S[1],M=j(b),R=M[0],O=M[1],I=new s(19),L=0;L<T.length;++L)I[31&T[L]]++;for(L=0;L<R.length;++L)I[31&R[L]]++;for(var B=$(I,7),F=B[0],V=B[1],Y=19;Y>4&&!F[l[Y-1]];--Y);var q,U,G,H,X=m+5<<3,Z=z(r,A)+z(i,E)+u,W=z(r,g)+z(i,b)+u+14+3*Y+z(I,F)+(2*I[16]+3*I[17]+7*I[18]);if(X<=Z&&X<=W)return _(e,d,t.subarray(p,p+m));if(N(e,d,1+(W<Z)),d+=2,W<Z){q=x(g,v,0),U=g,G=x(b,D,0),H=b;var Q=x(F,V,0);for(N(e,d,C-257),N(e,d+5,O-1),N(e,d+10,Y-4),d+=14,L=0;L<Y;++L)N(e,d+3*L,F[l[L]]);d+=3*Y;for(var J=[T,R],K=0;K<2;++K){var tt=J[K];for(L=0;L<tt.length;++L){var et=31&tt[L];N(e,d,Q[et]),d+=F[et],et>15&&(N(e,d,tt[L]>>>5&127),d+=tt[L]>>>12)}}}else q=w,U=A,G=P,H=E;for(L=0;L<h;++L)if(o[L]>255){et=o[L]>>>18&31,k(e,d,q[et+257]),d+=U[et+257],et>7&&(N(e,d,o[L]>>>23&31),d+=a[et]);var nt=31&o[L];k(e,d,G[nt]),d+=H[nt],nt>3&&(k(e,d,o[L]>>>5&8191),d+=c[nt])}else k(e,d,q[o[L]]),d+=U[o[L]];return k(e,d,q[256]),d+U[256]},Y=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new r(0),U=function(t,e,n,o,l,u){var h=t.length,p=new r(o+h+5*(1+Math.ceil(h/7e3))+l),d=p.subarray(o,p.length-l),f=0;if(!e||h<8)for(var v=0;v<=h;v+=65535){var y=v+65535;y>=h&&(d[f>>3]=u),f=_(d,f+1,t.subarray(v,y))}else{for(var b=Y[e-1],x=b>>>13,A=8191&b,E=(1<<n)-1,w=new s(32768),D=new s(E+1),P=Math.ceil(n/3),S=2*P,T=function(e){return(t[e]^t[e+1]<<P^t[e+2]<<S)&E},C=new i(25e3),M=new s(288),I=new s(32),L=0,B=0,N=(v=0,0),k=0,$=0;v<h;++v){var F=T(v),j=32767&v,z=D[F];if(w[j]=z,D[F]=j,k<=v){var U=h-v;if((L>7e3||N>24576)&&U>423){f=V(t,d,0,C,M,I,B,N,$,v-$,f),N=L=B=0,$=v;for(var G=0;G<286;++G)M[G]=0;for(G=0;G<30;++G)I[G]=0}var H=2,X=0,Z=A,W=j-z&32767;if(U>2&&F==T(v-W))for(var Q=Math.min(x,U)-1,J=Math.min(32767,v),K=Math.min(258,U);W<=J&&--Z&&j!=z;){if(t[v+H]==t[v+H-W]){for(var tt=0;tt<K&&t[v+tt]==t[v+tt-W];++tt);if(tt>H){if(H=tt,X=W,tt>Q)break;var et=Math.min(W,tt-2),nt=0;for(G=0;G<et;++G){var ot=v-W+G+32768&32767,rt=ot-w[ot]+32768&32767;rt>nt&&(nt=rt,z=ot)}}}W+=(j=z)-(z=w[j])+32768&32767}if(X){C[N++]=268435456|m[H]<<18|g[X];var st=31&m[H],it=31&g[X];B+=a[st]+c[it],++M[257+st],++I[it],k=v+H,++L}else C[N++]=t[v],++M[t[v]]}}f=V(t,d,u,C,M,I,B,N,$,v-$,f),!u&&7&f&&(f=_(d,f+1,q))}return O(p,0,o+R(f)+l)},G=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,o=9;--o;)n=(1&n&&-306674912)^n>>>1;t[e]=n}return t}(),H=function(){var t=-1;return{p:function(e){for(var n=t,o=0;o<e.length;++o)n=G[255&n^e[o]]^n>>>8;t=n},d:function(){return~t}}},X=function(){var t=1,e=0;return{p:function(n){for(var o=t,r=e,s=0|n.length,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)r+=o+=n[i];o=(65535&o)+15*(o>>16),r=(65535&r)+15*(r>>16)}t=o,e=r},d:function(){return(255&(t%=65521))<<24|t>>>8<<16|(255&(e%=65521))<<8|e>>>8}}},Z=function(t,e,n,o,r){return U(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,o,!r)},W=function(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n},Q=function(t,e,n){for(var o=t(),r=t.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<o.length;++i){var a=o[i],c=s[i];if("function"==typeof a){e+=";"+c+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;e+=l.slice(u,l.indexOf("(",u))}else for(var h in e+=l,a.prototype)e+=";"+c+".prototype."+h+"="+a.prototype[h].toString();else e+=l}else n[c]=a}return[e,n]},J=[],K=function(t,e,n,r){var s;if(!J[n]){for(var i="",a={},c=t.length-1,l=0;l<c;++l)i=(s=Q(t[l],i,a))[0],a=s[1];J[n]=Q(t[c],i,a)}var u=W({},J[n][1]);return o.default(J[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,u,function(t){var e=[];for(var n in t)t[n].buffer&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e}(u),r)},tt=function(){return[r,s,i,a,c,l,p,f,D,S,v,I,x,T,C,M,R,O,L,B,Mt,it,at]},et=function(){return[r,s,i,a,c,l,m,g,w,A,P,E,v,Y,q,x,N,k,$,F,j,z,_,V,R,O,U,Z,Pt,it]},nt=function(){return[ft,yt,dt,H,G]},ot=function(){return[gt,vt]},rt=function(){return[bt,dt,X]},st=function(){return[xt]},it=function(t){return postMessage(t,[t.buffer])},at=function(t){return t&&t.size&&new r(t.size)},ct=function(t,e,n,o,r,s){var i=K(n,o,r,(function(t,e){i.terminate(),s(t,e)}));return i.postMessage([t,e],e.consume?[t.buffer]:[]),function(){i.terminate()}},lt=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},ut=function(t,e,n,o,r){var s,i=K(t,o,r,(function(t,n){t?(i.terminate(),e.ondata.call(e,t)):(n[1]&&i.terminate(),e.ondata.call(e,t,n[0],n[1]))}));i.postMessage(n),e.push=function(t,n){e.ondata||L(5),s&&e.ondata(L(4,0,1),null,!!n),i.postMessage([t,s=n],[t.buffer])},e.terminate=function(){i.terminate()}},ht=function(t,e){return t[e]|t[e+1]<<8},pt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},mt=function(t,e){return pt(t,e)+4294967296*pt(t,e+4)},dt=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},ft=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&dt(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var o=0;o<=n.length;++o)t[o+10]=n.charCodeAt(o)}},gt=function(t){31==t[0]&&139==t[1]&&8==t[2]||L(6,"invalid gzip data");var e=t[3],n=10;4&e&&(n+=t[10]|2+(t[11]<<8));for(var o=(e>>3&1)+(e>>4&1);o>0;o-=!t[n++]);return n+(2&e)},vt=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},yt=function(t){return 10+(t.filename&&t.filename.length+1||0)},bt=function(t,e){var n=e.level,o=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=o<<6|(o?32-2*o:1)},xt=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&L(6,"invalid zlib data"),32&t[1]&&L(6,"invalid zlib data: preset dictionaries not supported")};function At(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var Et=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(Z(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){this.ondata||L(5),this.d&&L(4),this.d=e,this.p(t,e||!1)},t}();n.Deflate=Et;var wt=function(){return function(t,e){ut([et,function(){return[lt,Et]}],this,At.call(this,t,e),(function(t){var e=new Et(t.data);onmessage=lt(e)}),6)}}();function Dt(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[et],(function(t){return it(Pt(t.data[0],t.data[1]))}),0,n)}function Pt(t,e){return Z(t,e||{},0,0)}n.AsyncDeflate=wt,n.deflate=Dt,n.deflateSync=Pt;var St=function(){function t(t){this.s={},this.p=new r(0),this.ondata=t}return t.prototype.e=function(t){this.ondata||L(5),this.d&&L(4);var e=this.p.length,n=new r(e+t.length);n.set(this.p),n.set(t,e),this.p=n},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,n=B(this.p,this.o,this.s);this.ondata(O(n,e,this.s.b),this.d),this.o=O(n,this.s.b-32768),this.s.b=this.o.length,this.p=O(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}();n.Inflate=St;var Tt=function(){return function(t){this.ondata=t,ut([tt,function(){return[lt,St]}],this,0,(function(){var t=new St;onmessage=lt(t)}),7)}}();function Ct(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[tt],(function(t){return it(Mt(t.data[0],at(t.data[1])))}),1,n)}function Mt(t,e){return B(t,e)}n.AsyncInflate=Tt,n.inflate=Ct,n.inflateSync=Mt;var Rt=function(){function t(t,e){this.c=H(),this.l=0,this.v=1,Et.call(this,t,e)}return t.prototype.push=function(t,e){Et.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t),this.l+=t.length;var n=Z(t,this.o,this.v&&yt(this.o),e&&8,!e);this.v&&(ft(n,this.o),this.v=0),e&&(dt(n,n.length-8,this.c.d()),dt(n,n.length-4,this.l)),this.ondata(n,e)},t}();n.Gzip=Rt,n.Compress=Rt;var Ot=function(){return function(t,e){ut([et,nt,function(){return[lt,Et,Rt]}],this,At.call(this,t,e),(function(t){var e=new Rt(t.data);onmessage=lt(e)}),8)}}();function It(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[et,nt,function(){return[Lt]}],(function(t){return it(Lt(t.data[0],t.data[1]))}),2,n)}function Lt(t,e){e||(e={});var n=H(),o=t.length;n.p(t);var r=Z(t,e,yt(e),8),s=r.length;return ft(r,e),dt(r,s-8,n.d()),dt(r,s-4,o),r}n.AsyncGzip=Ot,n.AsyncCompress=Ot,n.gzip=It,n.compress=It,n.gzipSync=Lt,n.compressSync=Lt;var Bt=function(){function t(t){this.v=1,St.call(this,t)}return t.prototype.push=function(t,e){if(St.prototype.e.call(this,t),this.v){var n=this.p.length>3?gt(this.p):4;if(n>=this.p.length&&!e)return;this.p=this.p.subarray(n),this.v=0}e&&(this.p.length<8&&L(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),St.prototype.c.call(this,e)},t}();n.Gunzip=Bt;var Nt=function(){return function(t){this.ondata=t,ut([tt,ot,function(){return[lt,St,Bt]}],this,0,(function(){var t=new Bt;onmessage=lt(t)}),9)}}();function kt(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[tt,ot,function(){return[$t]}],(function(t){return it($t(t.data[0]))}),3,n)}function $t(t,e){return B(t.subarray(gt(t),-8),e||new r(vt(t)))}n.AsyncGunzip=Nt,n.gunzip=kt,n.gunzipSync=$t;var Ft=function(){function t(t,e){this.c=X(),this.v=1,Et.call(this,t,e)}return t.prototype.push=function(t,e){Et.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t);var n=Z(t,this.o,this.v&&2,e&&4,!e);this.v&&(bt(n,this.o),this.v=0),e&&dt(n,n.length-4,this.c.d()),this.ondata(n,e)},t}();n.Zlib=Ft;var jt=function(){return function(t,e){ut([et,rt,function(){return[lt,Et,Ft]}],this,At.call(this,t,e),(function(t){var e=new Ft(t.data);onmessage=lt(e)}),10)}}();function zt(t,e){e||(e={});var n=X();n.p(t);var o=Z(t,e,2,4);return bt(o,e),dt(o,o.length-4,n.d()),o}n.AsyncZlib=jt,n.zlib=function(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[et,rt,function(){return[zt]}],(function(t){return it(zt(t.data[0],t.data[1]))}),4,n)},n.zlibSync=zt;var _t=function(){function t(t){this.v=1,St.call(this,t)}return t.prototype.push=function(t,e){if(St.prototype.e.call(this,t),this.v){if(this.p.length<2&&!e)return;this.p=this.p.subarray(2),this.v=0}e&&(this.p.length<4&&L(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),St.prototype.c.call(this,e)},t}();n.Unzlib=_t;var Vt=function(){return function(t){this.ondata=t,ut([tt,st,function(){return[lt,St,_t]}],this,0,(function(){var t=new _t;onmessage=lt(t)}),11)}}();function Yt(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),ct(t,e,[tt,st,function(){return[qt]}],(function(t){return it(qt(t.data[0],at(t.data[1])))}),5,n)}function qt(t,e){return B((xt(t),t.subarray(2,-4)),e)}n.AsyncUnzlib=Vt,n.unzlib=Yt,n.unzlibSync=qt;var Ut=function(){function t(t){this.G=Bt,this.I=St,this.Z=_t,this.ondata=t}return t.prototype.push=function(t,e){if(this.ondata||L(5),this.s)this.s.push(t,e);else{if(this.p&&this.p.length){var n=new r(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var o=this,s=function(){o.ondata.apply(o,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(s):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,e),this.p=null}}},t}();n.Decompress=Ut;var Gt=function(){function t(t){this.G=Nt,this.I=Tt,this.Z=Vt,this.ondata=t}return t.prototype.push=function(t,e){Ut.prototype.push.call(this,t,e)},t}();n.AsyncDecompress=Gt,n.decompress=function(t,e,n){return n||(n=e,e={}),"function"!=typeof n&&L(7),31==t[0]&&139==t[1]&&8==t[2]?kt(t,e,n):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Ct(t,e,n):Yt(t,e,n)},n.decompressSync=function(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?$t(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Mt(t,e):qt(t,e)};var Ht=function(t,e,n,o){for(var s in t){var i=t[s],a=e+s,c=o;Array.isArray(i)&&(c=W(o,i[1]),i=i[0]),i instanceof r?n[a]=[i,c]:(n[a+="/"]=[new r(0),c],Ht(i,a,n,o))}},Xt="undefined"!=typeof TextEncoder&&new TextEncoder,Zt="undefined"!=typeof TextDecoder&&new TextDecoder,Wt=0;try{Zt.decode(q,{stream:!0}),Wt=1}catch(t){}var Qt=function(t){for(var e="",n=0;;){var o=t[n++],r=(o>127)+(o>223)+(o>239);if(n+r>t.length)return[e,O(t,n-1)];r?3==r?(o=((15&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|o>>10,56320|1023&o)):e+=1&r?String.fromCharCode((31&o)<<6|63&t[n++]):String.fromCharCode((15&o)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(o)}},Jt=function(){function t(t){this.ondata=t,Wt?this.t=new TextDecoder:this.p=q}return t.prototype.push=function(t,e){if(this.ondata||L(5),e=!!e,this.t)return this.ondata(this.t.decode(t,{stream:!0}),e),void(e&&(this.t.decode().length&&L(8),this.t=null));this.p||L(4);var n=new r(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length);var o=Qt(n),s=o[0],i=o[1];e?(i.length&&L(8),this.p=null):this.p=i,this.ondata(s,e)},t}();n.DecodeUTF8=Jt;var Kt=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,e){this.ondata||L(5),this.d&&L(4),this.ondata(te(t),this.d=e||!1)},t}();function te(t,e){if(e){for(var n=new r(t.length),o=0;o<t.length;++o)n[o]=t.charCodeAt(o);return n}if(Xt)return Xt.encode(t);var s=t.length,i=new r(t.length+(t.length>>1)),a=0,c=function(t){i[a++]=t};for(o=0;o<s;++o){if(a+5>i.length){var l=new r(a+8+(s-o<<1));l.set(i),i=l}var u=t.charCodeAt(o);u<128||e?c(u):u<2048?(c(192|u>>6),c(128|63&u)):u>55295&&u<57344?(c(240|(u=65536+(1047552&u)|1023&t.charCodeAt(++o))>>18),c(128|u>>12&63),c(128|u>>6&63),c(128|63&u)):(c(224|u>>12),c(128|u>>6&63),c(128|63&u))}return O(i,0,a)}function ee(t,e){if(e){for(var n="",o=0;o<t.length;o+=16384)n+=String.fromCharCode.apply(null,t.subarray(o,o+16384));return n}if(Zt)return Zt.decode(t);var r=Qt(t),s=r[0];return r[1].length&&L(8),s}n.EncodeUTF8=Kt,n.strToU8=te,n.strFromU8=ee;var ne=function(t){return 1==t?3:t<6?2:9==t?1:0},oe=function(t,e){return e+30+ht(t,e+26)+ht(t,e+28)},re=function(t,e,n){var o=ht(t,e+28),r=ee(t.subarray(e+46,e+46+o),!(2048&ht(t,e+8))),s=e+46+o,i=pt(t,e+20),a=n&&4294967295==i?se(t,s):[i,pt(t,e+24),pt(t,e+42)],c=a[0],l=a[1],u=a[2];return[ht(t,e+10),c,l,r,s+ht(t,e+30)+ht(t,e+32),u]},se=function(t,e){for(;1!=ht(t,e);e+=4+ht(t,e+2));return[mt(t,e+12),mt(t,e+4),mt(t,e+20)]},ie=function(t){var e=0;if(t)for(var n in t){var o=t[n].length;o>65535&&L(9),e+=o+4}return e},ae=function(t,e,n,o,r,s,i,a){var c=o.length,l=n.extra,u=a&&a.length,h=ie(l);dt(t,e,null!=i?33639248:67324752),e+=4,null!=i&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(null==s&&8),t[e++]=r&&8,t[e++]=255&n.compression,t[e++]=n.compression>>8;var p=new Date(null==n.mtime?Date.now():n.mtime),m=p.getFullYear()-1980;if((m<0||m>119)&&L(10),dt(t,e,m<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),e+=4,null!=s&&(dt(t,e,n.crc),dt(t,e+4,s),dt(t,e+8,n.size)),dt(t,e+12,c),dt(t,e+14,h),e+=16,null!=i&&(dt(t,e,u),dt(t,e+6,n.attrs),dt(t,e+10,i),e+=14),t.set(o,e),e+=c,h)for(var d in l){var f=l[d],g=f.length;dt(t,e,+d),dt(t,e+2,g),t.set(f,e+4),e+=4+g}return u&&(t.set(a,e),e+=u),e},ce=function(t,e,n,o,r){dt(t,e,101010256),dt(t,e+8,n),dt(t,e+10,n),dt(t,e+12,o),dt(t,e+16,r)},le=function(){function t(t){this.filename=t,this.c=H(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){this.ondata||L(5),this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}();n.ZipPassThrough=le;var ue=function(){function t(t,e){var n=this;e||(e={}),le.call(this,t),this.d=new Et(e,(function(t,e){n.ondata(null,t,e)})),this.compression=8,this.flag=ne(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(t){this.ondata(t,null,e)}},t.prototype.push=function(t,e){le.prototype.push.call(this,t,e)},t}();n.ZipDeflate=ue;var he=function(){function t(t,e){var n=this;e||(e={}),le.call(this,t),this.d=new wt(e,(function(t,e,o){n.ondata(t,e,o)})),this.compression=8,this.flag=ne(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){le.prototype.push.call(this,t,e)},t}();n.AsyncZipDeflate=he;var pe=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(this.ondata||L(5),2&this.d)this.ondata(L(4+8*(1&this.d),0,1),null,!1);else{var n=te(t.filename),o=n.length,s=t.comment,i=s&&te(s),a=o!=t.filename.length||i&&s.length!=i.length,c=o+ie(t.extra)+30;o>65535&&this.ondata(L(11,0,1),null,!1);var l=new r(c);ae(l,0,t,n,a);var u=[l],h=function(){for(var t=0,n=u;t<n.length;t++){var o=n[t];e.ondata(null,o,!1)}u=[]},p=this.d;this.d=0;var m=this.u.length,d=W(t,{f:n,u:a,o:i,t:function(){t.terminate&&t.terminate()},r:function(){if(h(),p){var t=e.u[m+1];t?t.r():e.d=1}p=1}}),f=0;t.ondata=function(n,o,s){if(n)e.ondata(n,o,s),e.terminate();else if(f+=o.length,u.push(o),s){var i=new r(16);dt(i,0,134695760),dt(i,4,t.crc),dt(i,8,f),dt(i,12,t.size),u.push(i),d.c=f,d.b=c+f+16,d.crc=t.crc,d.size=t.size,p&&d.r(),p=1}else p&&h()},this.u.push(d)}},t.prototype.end=function(){var t=this;2&this.d?this.ondata(L(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3)},t.prototype.e=function(){for(var t=0,e=0,n=0,o=0,s=this.u;o<s.length;o++)n+=46+(l=s[o]).f.length+ie(l.extra)+(l.o?l.o.length:0);for(var i=new r(n+22),a=0,c=this.u;a<c.length;a++){var l=c[a];ae(i,t,l,l.f,l.u,l.c,e,l.o),t+=46+l.f.length+ie(l.extra)+(l.o?l.o.length:0),e+=l.b}ce(i,t,this.u.length,n,e),this.ondata(null,i,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++)e[t].t();this.d=2},t}();n.Zip=pe,n.zip=function(t,e,n){n||(n=e,e={}),"function"!=typeof n&&L(7);var o={};Ht(t,"",o,e);var s=Object.keys(o),i=s.length,a=0,c=0,l=i,u=new Array(i),h=[],p=function(){for(var t=0;t<h.length;++t)h[t]()},m=function(t,e){ve((function(){n(t,e)}))};ve((function(){m=n}));var d=function(){var t=new r(c+22),e=a,n=c-a;c=0;for(var o=0;o<l;++o){var s=u[o];try{var i=s.c.length;ae(t,c,s,s.f,s.u,i);var h=30+s.f.length+ie(s.extra),p=c+h;t.set(s.c,p),ae(t,a,s,s.f,s.u,i,c,s.m),a+=16+h+(s.m?s.m.length:0),c=p+i}catch(t){return m(t,null)}}ce(t,a,u.length,n,e),m(null,t)};i||d();for(var f=function(t){var e=s[t],n=o[e],r=n[0],l=n[1],f=H(),g=r.length;f.p(r);var v=te(e),y=v.length,b=l.comment,x=b&&te(b),A=x&&x.length,E=ie(l.extra),w=0==l.level?0:8,D=function(n,o){if(n)p(),m(n,null);else{var r=o.length;u[t]=W(l,{size:g,crc:f.d(),c:o,f:v,m:x,u:y!=e.length||x&&b.length!=A,compression:w}),a+=30+y+E+r,c+=76+2*(y+E)+(A||0)+r,--i||d()}};if(y>65535&&D(L(11,0,1),null),w)if(g<16e4)try{D(null,Pt(r,l))}catch(t){D(t,null)}else h.push(Dt(r,l,D));else D(null,r)},g=0;g<l;++g)f(g);return p},n.zipSync=function(t,e){e||(e={});var n={},o=[];Ht(t,"",n,e);var s=0,i=0;for(var a in n){var c=n[a],l=c[0],u=c[1],h=0==u.level?0:8,p=(D=te(a)).length,m=u.comment,d=m&&te(m),f=d&&d.length,g=ie(u.extra);p>65535&&L(11);var v=h?Pt(l,u):l,y=v.length,b=H();b.p(l),o.push(W(u,{size:l.length,crc:b.d(),c:v,f:D,m:d,u:p!=a.length||d&&m.length!=f,o:s,compression:h})),s+=30+p+g+y,i+=76+2*(p+g)+(f||0)+y}for(var x=new r(i+22),A=s,E=i-s,w=0;w<o.length;++w){var D=o[w];ae(x,D.o,D,D.f,D.u,D.c.length);var P=30+D.f.length+ie(D.extra);x.set(D.c,D.o+P),ae(x,s,D,D.f,D.u,D.c.length,D.o,D.m),s+=16+P+(D.m?D.m.length:0)}return ce(x,s,o.length,E,A),x};var me=function(){function t(){}return t.prototype.push=function(t,e){this.ondata(null,t,e)},t.compression=0,t}();n.UnzipPassThrough=me;var de=function(){function t(){var t=this;this.i=new St((function(e,n){t.ondata(null,e,n)}))}return t.prototype.push=function(t,e){try{this.i.push(t,e)}catch(t){this.ondata(t,null,e)}},t.compression=8,t}();n.UnzipInflate=de;var fe=function(){function t(t,e){var n=this;e<32e4?this.i=new St((function(t,e){n.ondata(null,t,e)})):(this.i=new Tt((function(t,e,o){n.ondata(t,e,o)})),this.terminate=this.i.terminate)}return t.prototype.push=function(t,e){this.i.terminate&&(t=O(t,0)),this.i.push(t,e)},t.compression=8,t}();n.AsyncUnzipInflate=fe;var ge=function(){function t(t){this.onfile=t,this.k=[],this.o={0:me},this.p=q}return t.prototype.push=function(t,e){var n=this;if(this.onfile||L(5),this.p||L(4),this.c>0){var o=Math.min(this.c,t.length),s=t.subarray(0,o);if(this.c-=o,this.d?this.d.push(s,!this.c):this.k[0].push(s),(t=t.subarray(o)).length)return this.push(t,e)}else{var i=0,a=0,c=void 0,l=void 0;this.p.length?t.length?((l=new r(this.p.length+t.length)).set(this.p),l.set(t,this.p.length)):l=this.p:l=t;for(var u=l.length,h=this.c,p=h&&this.d,m=function(){var t,e=pt(l,a);if(67324752==e){i=1,c=a,d.d=null,d.c=0;var o=ht(l,a+6),r=ht(l,a+8),s=2048&o,p=8&o,m=ht(l,a+26),f=ht(l,a+28);if(u>a+30+m+f){var g=[];d.k.unshift(g),i=2;var v,y=pt(l,a+18),b=pt(l,a+22),x=ee(l.subarray(a+30,a+=30+m),!s);4294967295==y?(t=p?[-2]:se(l,a),y=t[0],b=t[1]):p&&(y=-1),a+=f,d.c=y;var A={name:x,compression:r,start:function(){if(A.ondata||L(5),y){var t=n.o[r];t||A.ondata(L(14,"unknown compression type "+r,1),null,!1),(v=y<0?new t(x):new t(x,y,b)).ondata=function(t,e,n){A.ondata(t,e,n)};for(var e=0,o=g;e<o.length;e++){var s=o[e];v.push(s,!1)}n.k[0]==g&&n.c?n.d=v:v.push(q,!0)}else A.ondata(null,q,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};y>=0&&(A.size=y,A.originalSize=b),d.onfile(A)}return"break"}if(h){if(134695760==e)return c=a+=12+(-2==h&&8),i=3,d.c=0,"break";if(33639248==e)return c=a-=4,i=3,d.c=0,"break"}},d=this;a<u-4&&"break"!==m();++a);if(this.p=q,h<0){var f=i?l.subarray(0,c-12-(-2==h&&8)-(134695760==pt(l,c-16)&&4)):l.subarray(0,a);p?p.push(f,!!i):this.k[+(2==i)].push(f)}if(2&i)return this.push(l.subarray(a),e);this.p=l.subarray(a)}e&&(this.c&&L(13),this.p=null)},t.prototype.register=function(t){this.o[t.compression]=t},t}();n.Unzip=ge;var ve="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(t){t()};n.unzip=function(t,e,n){n||(n=e,e={}),"function"!=typeof n&&L(7);var o=[],s=function(){for(var t=0;t<o.length;++t)o[t]()},i={},a=function(t,e){ve((function(){n(t,e)}))};ve((function(){a=n}));for(var c=t.length-22;101010256!=pt(t,c);--c)if(!c||t.length-c>65558)return a(L(13,0,1),null),s;var l=ht(t,c+8);if(l){var u=l,h=pt(t,c+16),p=4294967295==h;if(p){if(c=pt(t,c-12),101075792!=pt(t,c))return a(L(13,0,1),null),s;u=l=pt(t,c+32),h=pt(t,c+48)}for(var m=e&&e.filter,d=function(e){var n=re(t,h,p),c=n[0],u=n[1],d=n[2],f=n[3],g=n[4],v=n[5],y=oe(t,v);h=g;var b=function(t,e){t?(s(),a(t,null)):(e&&(i[f]=e),--l||a(null,i))};if(!m||m({name:f,size:u,originalSize:d,compression:c}))if(c)if(8==c){var x=t.subarray(y,y+u);if(u<32e4)try{b(null,Mt(x,new r(d)))}catch(t){b(t,null)}else o.push(Ct(x,{size:d},b))}else b(L(14,"unknown compression type "+c,1),null);else b(null,O(t,y,y+u));else b(null,null)},f=0;f<u;++f)d()}else a(null,{});return s},n.unzipSync=function(t,e){for(var n={},o=t.length-22;101010256!=pt(t,o);--o)(!o||t.length-o>65558)&&L(13);var s=ht(t,o+8);if(!s)return{};var i=pt(t,o+16),a=4294967295==i;a&&(o=pt(t,o-12),101075792!=pt(t,o)&&L(13),s=pt(t,o+32),i=pt(t,o+48));for(var c=e&&e.filter,l=0;l<s;++l){var u=re(t,i,a),h=u[0],p=u[1],m=u[2],d=u[3],f=u[4],g=u[5],v=oe(t,g);i=f,c&&!c({name:d,size:p,originalSize:m,compression:h})||(h?8==h?n[d]=Mt(t.subarray(v,v+p),new r(m)):L(14,"unknown compression type "+h):n[d]=O(t,v,v+p))}return n}},{"./node-worker.cjs":828}],828:[function(t,e,n){var o={};n.default=function(t,e,n,r,s){var i=new Worker(o[e]||(o[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(t){var e=t.data,n=e.$e$;if(n){var o=new Error(n[0]);o.code=n[1],o.stack=n[2],s(o,null)}else s(null,e)},i.postMessage(n,r),i}},{}],829:[function(t,e,n){e.exports=function(t,e){var n="",o=function(t){return t};return e>0&&(n="\n",o=function(t){var e=" ".repeat(t);return function(t){var n,o=[];return"string"!=typeof t?t:1===(n=t.split("\n")).length?e+t:(n.forEach((function(t){""!==t.trim()?o.push(e+t):o.push(t)})),o.join("\n"))}}(e)),function t(e){var r,s,i;return s="",i=!0,e.some((function(e,o,a){if(0===o)return r="<"+e,1===a.length||void 0;if(1===o){if((c=e)&&"[object Object]"===Object.prototype.toString.call(c))return Object.keys(e).forEach((function(t){r+=" "+t+'="'+e[t]+'"'})),2===a.length||void(r+=">");r+=">"}var c;switch(typeof e){case"string":case"number":case"boolean":case"undefined":return void(s+=e+n)}i=!1,s+=t(e)}))?r+"/>"+n:i?r+function(t){var e=t.split("\n"),n=[];return e.forEach((function(t){""!==t.trim()&&n.push(t)})),n.join("\n")}(s)+"</"+e[0]+">"+n:r+n+o(s)+"</"+e[0]+">"+n}(t)}},{}],830:[function(t,e,n){n.byteLength=function(t){var e=c(t),n=e[0],o=e[1];return 3*(n+o)/4-o},n.toByteArray=function(t){var e,n,o=c(t),i=o[0],a=o[1],l=new s(function(t,e,n){return 3*(e+n)/4-n}(0,i,a)),u=0,h=a>0?i-4:i;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s=[],i=16383,a=0,c=n-r;a<c;a+=i)s.push(l(t,a,a+i>c?c:a+i));return 1===r?(e=t[n-1],s.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],s.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"=")),s.join("")};for(var o=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)o[a]=i[a],r[i.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var r,s,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(o[(s=r)>>18&63]+o[s>>12&63]+o[s>>6&63]+o[63&s]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],831:[function(t,e,n){(function(e){var o=t("base64-js"),r=t("ieee754");n.Buffer=e,n.SlowBuffer=function(t){return+t!=t&&(t=0),e.alloc(+t)},n.INSPECT_MAX_BYTES=50;var s=2147483647;function i(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return n.__proto__=e.prototype,n}function e(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,n,o){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|p(t,n),r=i(o),s=r.write(t,n);return s!==o&&(r=r.slice(0,s)),r}(t,n);if(ArrayBuffer.isView(t))return u(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(j(t,ArrayBuffer)||t&&j(t.buffer,ArrayBuffer))return function(t,n,o){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(o||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o)).__proto__=e.prototype,r}(t,n,o);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return e.from(r,n,o);var s=function(t){if(e.isBuffer(t)){var n=0|h(t.length),o=i(n);return 0===o.length||t.copy(o,0,0,n),o}return void 0!==t.length?"number"!=typeof t.length||z(t.length)?i(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),i(t<0?0:0|h(t))}function u(t){for(var e=t.length<0?0:0|h(t.length),n=i(e),o=0;o<e;o+=1)n[o]=255&t[o];return n}function h(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function p(t,n){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||j(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var o=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===o)return 0;for(var s=!1;;)switch(n){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return $(t).length;default:if(s)return r?-1:k(t).length;n=(""+n).toLowerCase(),s=!0}}function m(t,e,n){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return D(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return w(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function d(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function f(t,n,o,r,s){if(0===t.length)return-1;if("string"==typeof o?(r=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),z(o=+o)&&(o=s?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(s)return-1;o=t.length-1}else if(o<0){if(!s)return-1;o=0}if("string"==typeof n&&(n=e.from(n,r)),e.isBuffer(n))return 0===n.length?-1:g(t,n,o,r,s);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,n,o):Uint8Array.prototype.lastIndexOf.call(t,n,o):g(t,[n],o,r,s);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,o,r){var s,i=1,a=t.length,c=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;i=2,a/=2,c/=2,n/=2}function l(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(r){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*i}else-1!==u&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var h=!0,p=0;p<c;p++)if(l(t,s+p)!==l(e,p)){h=!1;break}if(h)return s}return-1}function v(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o))>r&&(o=r):o=r;var s=e.length;o>s/2&&(o=s/2);for(var i=0;i<o;++i){var a=parseInt(e.substr(2*i,2),16);if(z(a))return i;t[n+i]=a}return i}function y(t,e,n,o){return F(k(e,t.length-n),t,n,o)}function b(t,e,n,o){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,o)}function x(t,e,n,o){return b(t,e,n,o)}function A(t,e,n,o){return F($(e),t,n,o)}function E(t,e,n,o){return F(function(t,e){for(var n,o,r,s=[],i=0;i<t.length&&!((e-=2)<0);++i)o=(n=t.charCodeAt(i))>>8,r=n%256,s.push(r),s.push(o);return s}(e,t.length-n),t,n,o)}function w(t,e,n){return 0===e&&n===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,n))}function D(t,e,n){n=Math.min(t.length,n);for(var o=[],r=e;r<n;){var s,i,a,c,l=t[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(s=t[r+1]))&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=t[r+1],i=t[r+2],128==(192&s)&&128==(192&i)&&(c=(15&l)<<12|(63&s)<<6|63&i)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=t[r+1],i=t[r+2],a=t[r+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(c=(15&l)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),r+=h}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var n="",o=0;o<e;)n+=String.fromCharCode.apply(String,t.slice(o,o+=P));return n}(o)}n.kMaxLength=s,e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,n){return a(t,e,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}(t,e,n)},e.allocUnsafe=function(t){return l(t)},e.allocUnsafeSlow=function(t){return l(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,n){if(j(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),j(n,Uint8Array)&&(n=e.from(n,n.offset,n.byteLength)),!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;for(var o=t.length,r=n.length,s=0,i=Math.min(o,r);s<i;++s)if(t[s]!==n[s]){o=t[s],r=n[s];break}return o<r?-1:r<o?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var o;if(void 0===n)for(n=0,o=0;o<t.length;++o)n+=t[o].length;var r=e.allocUnsafe(n),s=0;for(o=0;o<t.length;++o){var i=t[o];if(j(i,Uint8Array)&&(i=e.from(i)),!e.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,s),s+=i.length}return r},e.byteLength=p,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?D(this,0,t):m.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},e.prototype.compare=function(t,n,o,r,s){if(j(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=0),void 0===o&&(o=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),n<0||o>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&n>=o)return 0;if(r>=s)return-1;if(n>=o)return 1;if(this===t)return 0;for(var i=(s>>>=0)-(r>>>=0),a=(o>>>=0)-(n>>>=0),c=Math.min(i,a),l=this.slice(r,s),u=t.slice(n,o),h=0;h<c;++h)if(l[h]!==u[h]){i=l[h],a=u[h];break}return i<a?-1:a<i?1:0},e.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},e.prototype.indexOf=function(t,e,n){return f(this,t,e,n,!0)},e.prototype.lastIndexOf=function(t,e,n){return f(this,t,e,n,!1)},e.prototype.write=function(t,e,n,o){if(void 0===e)o="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)o=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function S(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(127&t[r]);return o}function T(t,e,n){var o="";n=Math.min(t.length,n);for(var r=e;r<n;++r)o+=String.fromCharCode(t[r]);return o}function C(t,e,n){var o,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var s="",i=e;i<n;++i)s+=(o=t[i])<16?"0"+o.toString(16):o.toString(16);return s}function M(t,e,n){for(var o=t.slice(e,n),r="",s=0;s<o.length;s+=2)r+=String.fromCharCode(o[s]+256*o[s+1]);return r}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,n,o,r,s,i){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>s||n<i)throw new RangeError('"value" argument is out of bounds');if(o+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,o,r,s){if(n+o>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,o,s){return e=+e,n>>>=0,s||I(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function B(t,e,n,o,s){return e=+e,n>>>=0,s||I(t,0,n,8),r.write(t,e,n,o,52,8),n+8}e.prototype.slice=function(t,n){var o=this.length;(t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(n=void 0===n?o:~~n)<0?(n+=o)<0&&(n=0):n>o&&(n=o),n<t&&(n=t);var r=this.subarray(t,n);return r.__proto__=e.prototype,r},e.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var o=this[t],r=1,s=0;++s<e&&(r*=256);)o+=this[t+s]*r;return o},e.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var o=this[t+--e],r=1;e>0&&(r*=256);)o+=this[t+--e]*r;return o},e.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var o=this[t],r=1,s=0;++s<e&&(r*=256);)o+=this[t+s]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},e.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var o=e,r=1,s=this[t+--o];o>0&&(r*=256);)s+=this[t+--o]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},e.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),r.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),r.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),r.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),r.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,n,o){t=+t,e>>>=0,n>>>=0,o||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},e.prototype.writeUIntBE=function(t,e,n,o){t=+t,e>>>=0,n>>>=0,o||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},e.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e>>>=0,!o){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var s=0,i=1,a=0;for(this[e]=255&t;++s<n&&(i*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/i|0)-a&255;return e+n},e.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e>>>=0,!o){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var s=n-1,i=1,a=0;for(this[e+s]=255&t;--s>=0&&(i*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/i|0)-a&255;return e+n},e.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},e.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},e.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},e.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},e.prototype.copy=function(t,n,o,r){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(o||(o=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<o&&(r=o),r===o)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-o&&(r=t.length-n+o);var s=r-o;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,o,r);else if(this===t&&o<n&&n<r)for(var i=s-1;i>=0;--i)t[i+n]=this[i+o];else Uint8Array.prototype.set.call(t,this.subarray(o,r),n);return s},e.prototype.fill=function(t,n,o,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,o=this.length):"string"==typeof o&&(r=o,o=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var s=t.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(t=s)}}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<o)throw new RangeError("Out of range index");if(o<=n)return this;var i;if(n>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0),"number"==typeof t)for(i=n;i<o;++i)this[i]=t;else{var a=e.isBuffer(t)?t:e.from(t,r),c=a.length;if(0===c)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<o-n;++i)this[i+n]=a[i%c]}return this};var N=/[^+/0-9A-Za-z-_]/g;function k(t,e){var n;e=e||1/0;for(var o=t.length,r=null,s=[],i=0;i<o;++i){if((n=t.charCodeAt(i))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(i+1===o){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function $(t){return o.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,o){for(var r=0;r<o&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function j(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function z(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":830,buffer:831,ieee754:832}],832:[function(t,e,n){n.read=function(t,e,n,o,r){var s,i,a=8*r-o-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?r-1:0,p=n?-1:1,m=t[e+h];for(h+=p,s=m&(1<<-u)-1,m>>=-u,u+=a;u>0;s=256*s+t[e+h],h+=p,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=o;u>0;i=256*i+t[e+h],h+=p,u-=8);if(0===s)s=1-l;else{if(s===c)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,o),s-=l}return(m?-1:1)*i*Math.pow(2,s-o)},n.write=function(t,e,n,o,r,s){var i,a,c,l=8*s-r-1,u=(1<<l)-1,h=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:s-1,d=o?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=u):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),(e+=i+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(i++,c/=2),i+h>=u?(a=0,i=u):i+h>=1?(a=(e*c-1)*Math.pow(2,r),i+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),i=0));r>=8;t[n+m]=255&a,m+=d,a/=256,r-=8);for(i=i<<r|a,l+=r;l>0;t[n+m]=255&i,m+=d,i/=256,l-=8);t[n+m-d]|=128*f}},{}]},{},[1])},234:(t,e,n)=>{var o,r,s,i,a,c,l,u,h,p,m,d,f,g,v,y,b;(b=o||(o={}))[b.loading=0]="loading",b[b.loaded=1]="loaded",b[b.initialised=2]="initialised",b[b.computing=3]="computing";class x{constructor(){this.hashesFromPreviousRun={},this.usedHashes={},this.argCache={},this.jscadObjectHashes=new Set}cleanAllCache(){Object.keys(this.argCache).forEach((t=>{if(this.argCache[t])try{const e=this.argCache[t];this.isJSCADObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete&&t.delete()}catch(t){}})):e.delete&&e.delete())}catch(t){}})),this.argCache={},this.usedHashes={},this.hashesFromPreviousRun={},this.jscadObjectHashes.clear()}cleanCacheForHash(t){if(this.argCache[t])try{const e=this.argCache[t];this.isJSCADObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete&&t.delete()}catch(t){}})):e.delete&&e.delete())}catch(t){}delete this.argCache[t],delete this.usedHashes[t],delete this.hashesFromPreviousRun[t],this.jscadObjectHashes.delete(t)}cleanUpCache(){const t=Object.keys(this.usedHashes),e=Object.keys(this.hashesFromPreviousRun);let n=[];e.length>0&&(n=e.filter((e=>!t.includes(e)))),n.length>0&&n.forEach((t=>{if(this.argCache[t]){try{const e=this.argCache[t];this.isJSCADObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete&&t.delete()}catch(t){}})):e.delete&&e.delete())}catch(t){}delete this.argCache[t]}delete this.usedHashes[t],this.jscadObjectHashes.delete(t)})),this.hashesFromPreviousRun=Object.assign({},this.usedHashes)}isJSCADObject(t){return null!=t&&(!Array.isArray(t)&&"object"==typeof t&&void 0!==t.delete||Array.isArray(t)&&t.length>0&&"object"==typeof t[0]&&void 0!==t[0].delete)}cacheOp(t,e){let n=null;const o=this.computeHash(t);this.usedHashes[o]=o,this.hashesFromPreviousRun[o]=o;const r=this.checkCache(o);return r?this.isJSCADObject(r)?(n=r,n.hash=r.hash):r.value&&(n=r.value):(n=e(),Array.isArray(n)&&this.isJSCADObject(n)?n.forEach(((e,n)=>{const o=this.computeHash(Object.assign(Object.assign({},t),{index:n}));e.hash=o,this.addToCache(o,e),this.usedHashes[o]=o,this.hashesFromPreviousRun[o]=o})):this.isJSCADObject(n)?(n.hash=o,this.addToCache(o,n)):this.addToCache(o,{value:n})),n}checkCache(t){const e=this.argCache[t];return e?(void 0===e.value||this.isJSCADObject(e))&&this.jscadObjectHashes.has(t)&&!this.isJSCADObject(e)?(delete this.argCache[t],this.jscadObjectHashes.delete(t),null):e:null}addToCache(t,e){const n=e;return null!==n&&"object"==typeof n&&(n.hash=t),this.argCache[t]=n,this.isJSCADObject(n)&&this.jscadObjectHashes.add(t),t}computeHash(t,e){let n=JSON.stringify(t);n=n.replace(/("ptr":(-?[0-9]*?),)/g,""),n=n.replace(/("ptr":(-?[0-9]*))/g,""),n.includes("ptr")&&console.error("YOU DONE MESSED UP YOUR REGEX.");const o=Math.random.toString()+n;return e?o:this.stringToHash(o)}stringToHash(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}remove(t,e){return t.filter((t=>t.hash!==e.hash||t.ptr!==e.ptr))}}!function(t){let e,n;t.PolylinePropertiesDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},function(t){t.edge="edge",t.round="round",t.chamfer="chamfer"}(e=t.solidCornerTypeEnum||(t.solidCornerTypeEnum={})),function(t){t.left="left",t.center="center",t.right="right"}(n=t.jscadTextAlignEnum||(t.jscadTextAlignEnum={})),t.MeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.MeshesDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.DrawSolidMeshDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==t&&(this.mesh=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.updatable=o),void 0!==r&&(this.hidden=r),void 0!==s&&(this.jscadMesh=s)}},t.DrawSolidMeshesDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.updatable=!1,this.hidden=!1,void 0!==t&&(this.meshes=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.updatable=o),void 0!==r&&(this.hidden=r),void 0!==s&&(this.jscadMesh=s)}},t.DrawPathDto=class{constructor(t,e,n,o,r,s){this.colour="#444444",this.opacity=1,this.width=10,this.updatable=!1,void 0!==t&&(this.path=t),void 0!==e&&(this.colour=e),void 0!==n&&(this.opacity=n),void 0!==o&&(this.width=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.pathMesh=s)}},t.TransformSolidsDto=class{constructor(t,e){void 0!==t&&(this.meshes=t),void 0!==e&&(this.transformation=e)}},t.TransformSolidDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.transformation=e)}},t.DownloadSolidDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.fileName=e)}},t.DownloadGeometryDto=class{constructor(t,e,n){this.fileName="jscad-geometry",void 0!==t&&(this.geometry=t),void 0!==e&&(this.fileName=e),void 0!==n&&(this.options=n)}},t.DownloadSolidsDto=class{constructor(t,e){void 0!==t&&(this.meshes=t),void 0!==e&&(this.fileName=e)}},t.ColorizeDto=class{constructor(t,e){this.color="#0000ff",void 0!==t&&(this.geometry=t),void 0!==e&&(this.color=e)}},t.BooleanObjectsDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.BooleanTwoObjectsDto=class{constructor(t,e){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.BooleanObjectsFromDto=class{constructor(t,e){void 0!==t&&(this.from=t),void 0!==e&&(this.meshes=e)}},t.ExpansionDto=class{constructor(t,n,o,r){this.delta=.1,this.corners=e.edge,this.segments=24,void 0!==t&&(this.geometry=t),void 0!==n&&(this.delta=n),void 0!==o&&(this.corners=o),void 0!==r&&(this.segments=r)}},t.OffsetDto=class{constructor(t,n,o,r){this.delta=.1,this.corners=e.edge,this.segments=24,void 0!==t&&(this.geometry=t),void 0!==n&&(this.delta=n),void 0!==o&&(this.corners=o),void 0!==r&&(this.segments=r)}},t.ExtrudeLinearDto=class{constructor(t,e,n,o){this.height=1,this.twistAngle=90,this.twistSteps=15,void 0!==t&&(this.geometry=t),void 0!==e&&(this.height=e),void 0!==n&&(this.twistAngle=n),void 0!==o&&(this.twistSteps=o)}},t.HullDto=class{constructor(t){void 0!==t&&(this.meshes=t)}},t.ExtrudeRectangularDto=class{constructor(t,e,n){this.height=1,this.size=1,void 0!==t&&(this.geometry=t),void 0!==e&&(this.height=e),void 0!==n&&(this.size=n)}},t.ExtrudeRectangularPointsDto=class{constructor(t,e,n){this.height=1,this.size=1,void 0!==t&&(this.points=t),void 0!==e&&(this.height=e),void 0!==n&&(this.size=n)}},t.ExtrudeRotateDto=class{constructor(t,e,n,o){this.angle=90,this.startAngle=0,this.segments=24,void 0!==t&&(this.polygon=t),void 0!==e&&(this.angle=e),void 0!==n&&(this.startAngle=n),void 0!==o&&(this.segments=o)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.CurveDto=class{constructor(t){void 0!==t&&(this.curve=t)}},t.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.PathDto=class{constructor(t){void 0!==t&&(this.path=t)}},t.PathFromPointsDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e)}},t.PathsFromPointsDto=class{constructor(t){void 0!==t&&(this.pointsLists=t)}},t.PathFromPolylineDto=class{constructor(t,e){this.closed=!1,void 0!==t&&(this.polyline=t),void 0!==e&&(this.closed=e)}},t.PathAppendCurveDto=class{constructor(t,e){void 0!==t&&(this.curve=t),void 0!==e&&(this.path=e)}},t.PathAppendPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.path=e)}},t.PathAppendPolylineDto=class{constructor(t,e){void 0!==t&&(this.polyline=t),void 0!==e&&(this.path=e)}},t.PathAppendArcDto=class{constructor(t,e,n,o,r,s,i,a){this.endPoint=[1,1],this.xAxisRotation=90,this.clockwise=!0,this.large=!1,this.segments=24,this.radiusX=1,this.radiusY=1,void 0!==t&&(this.path=t),void 0!==e&&(this.endPoint=e),void 0!==n&&(this.xAxisRotation=n),void 0!==o&&(this.clockwise=o),void 0!==r&&(this.large=r),void 0!==s&&(this.segments=s),void 0!==i&&(this.radiusX=i),void 0!==a&&(this.radiusY=a)}},t.CircleDto=class{constructor(t,e,n){this.center=[0,0],this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.EllipseDto=class{constructor(t,e,n){this.center=[0,0],this.radius=[1,2],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.SquareDto=class{constructor(t,e){this.center=[0,0],this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.RectangleDto=class{constructor(t,e,n){this.center=[0,0],this.width=1,this.length=1,void 0!==t&&(this.center=t),void 0!==e&&(this.width=e),void 0!==n&&(this.length=n)}},t.RoundedRectangleDto=class{constructor(t,e,n,o,r){this.center=[0,0],this.roundRadius=.2,this.segments=24,this.width=1,this.length=1,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==n&&(this.segments=n),void 0!==o&&(this.width=o),void 0!==r&&(this.length=r)}},t.StarDto=class{constructor(t,e,n,o,r,s){this.center=[0,0],this.vertices=10,this.density=1,this.outerRadius=2,this.innerRadius=1,this.startAngle=0,void 0!==t&&(this.center=t),void 0!==e&&(this.vertices=e),void 0!==n&&(this.density=n),void 0!==o&&(this.outerRadius=o),void 0!==r&&(this.innerRadius=r),void 0!==s&&(this.startAngle=s)}},t.CubeDto=class{constructor(t,e){this.center=[0,0,0],this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.CubeCentersDto=class{constructor(t,e){this.size=1,void 0!==t&&(this.centers=t),void 0!==e&&(this.size=e)}},t.CuboidDto=class{constructor(t,e,n,o){this.center=[0,0,0],this.width=1,this.length=1,this.height=1,void 0!==t&&(this.center=t),void 0!==e&&(this.width=e),void 0!==n&&(this.length=n),void 0!==o&&(this.height=o)}},t.CuboidCentersDto=class{constructor(t,e,n,o){this.width=1,this.length=1,this.height=1,void 0!==t&&(this.centers=t),void 0!==e&&(this.width=e),void 0!==n&&(this.length=n),void 0!==o&&(this.height=o)}},t.RoundedCuboidDto=class{constructor(t,e,n,o,r,s){this.center=[0,0,0],this.roundRadius=1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==n&&(this.width=n),void 0!==o&&(this.length=o),void 0!==r&&(this.height=r),void 0!==s&&(this.segments=s)}},t.RoundedCuboidCentersDto=class{constructor(t,e,n,o,r,s){this.roundRadius=.1,this.width=1,this.length=1,this.height=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.roundRadius=e),void 0!==n&&(this.width=n),void 0!==o&&(this.length=o),void 0!==r&&(this.height=r),void 0!==s&&(this.segments=s)}},t.CylidnerEllipticDto=class{constructor(t,e,n,o,r){this.center=[0,0,0],this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.height=e),void 0!==n&&(this.startRadius=n),void 0!==o&&(this.endRadius=o),void 0!==r&&(this.segments=r)}},t.CylidnerCentersEllipticDto=class{constructor(t,e,n,o,r){this.height=1,this.startRadius=[1,2],this.endRadius=[2,3],this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.height=e),void 0!==n&&(this.startRadius=n),void 0!==o&&(this.endRadius=o),void 0!==r&&(this.segments=r)}},t.CylidnerDto=class{constructor(t,e,n,o){this.center=[0,0,0],this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.height=e),void 0!==n&&(this.radius=n),void 0!==o&&(this.segments=o)}},t.RoundedCylidnerDto=class{constructor(t,e,n,o,r){this.center=[0,0,0],this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.roundRadius=e),void 0!==n&&(this.height=n),void 0!==o&&(this.radius=o),void 0!==r&&(this.segments=r)}},t.EllipsoidDto=class{constructor(t,e,n){this.center=[0,0,0],this.radius=[1,2,3],this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.EllipsoidCentersDto=class{constructor(t,e,n){this.radius=[1,2,3],this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.GeodesicSphereDto=class{constructor(t,e,n){this.center=[0,0,0],this.radius=1,this.frequency=12,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.frequency=n)}},t.GeodesicSphereCentersDto=class{constructor(t,e,n){this.radius=1,this.frequency=12,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.frequency=n)}},t.CylidnerCentersDto=class{constructor(t,e,n,o){this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.height=e),void 0!==n&&(this.radius=n),void 0!==o&&(this.segments=o)}},t.RoundedCylidnerCentersDto=class{constructor(t,e,n,o,r){this.roundRadius=.1,this.height=1,this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.roundRadius=e),void 0!==n&&(this.height=n),void 0!==o&&(this.radius=o),void 0!==r&&(this.segments=r)}},t.SphereDto=class{constructor(t,e,n){this.center=[0,0,0],this.radius=1,this.segments=24,void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.SphereCentersDto=class{constructor(t,e,n){this.radius=1,this.segments=24,void 0!==t&&(this.centers=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.segments=n)}},t.TorusDto=class{constructor(t,e,n,o,r,s,i,a){this.center=[0,0,0],this.innerRadius=1,this.outerRadius=2,this.innerSegments=24,this.outerSegments=24,this.innerRotation=0,this.outerRotation=360,this.startAngle=0,void 0!==t&&(this.center=t),void 0!==e&&(this.innerRadius=e),void 0!==n&&(this.outerRadius=n),void 0!==o&&(this.innerSegments=o),void 0!==r&&(this.outerSegments=r),void 0!==s&&(this.innerRotation=s),void 0!==i&&(this.outerRotation=i),void 0!==a&&(this.startAngle=a)}},t.TextDto=class{constructor(t,e,o,r,s,i,a,c,l){this.text="Hello World",this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=n.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.segments=e),void 0!==o&&(this.xOffset=o),void 0!==r&&(this.yOffset=r),void 0!==s&&(this.height=s),void 0!==i&&(this.lineSpacing=i),void 0!==a&&(this.letterSpacing=a),void 0!==c&&(this.align=c),void 0!==l&&(this.extrudeOffset=l)}},t.CylinderTextDto=class{constructor(t,e,o,r,s,i,a,c,l,u,h){this.text="Hello World",this.extrusionHeight=.5,this.extrusionSize=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=n.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.extrusionHeight=e),void 0!==o&&(this.extrusionSize=o),void 0!==r&&(this.segments=r),void 0!==s&&(this.xOffset=s),void 0!==i&&(this.yOffset=i),void 0!==a&&(this.height=a),void 0!==c&&(this.lineSpacing=c),void 0!==l&&(this.letterSpacing=l),void 0!==u&&(this.align=u),void 0!==h&&(this.extrudeOffset=h)}},t.SphereTextDto=class{constructor(t,e,o,r,s,i,a,c,l,u){this.text="Hello World",this.radius=.1,this.segments=24,this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=1,this.align=n.center,this.extrudeOffset=0,void 0!==t&&(this.text=t),void 0!==e&&(this.radius=e),void 0!==o&&(this.segments=o),void 0!==r&&(this.xOffset=r),void 0!==s&&(this.yOffset=s),void 0!==i&&(this.height=i),void 0!==a&&(this.lineSpacing=a),void 0!==c&&(this.letterSpacing=c),void 0!==l&&(this.align=l),void 0!==u&&(this.extrudeOffset=u)}},t.FromPolygonPoints=class{constructor(t){void 0!==t&&(this.polygonPoints=t)}}}(r||(r={})),function(t){t.HexDto=class{constructor(t){this.color="#0000ff",void 0!==t&&(this.color=t)}},t.InvertHexDto=class{constructor(t){this.color="#0000ff",this.blackAndWhite=!1,void 0!==t&&(this.color=t)}},t.HexDtoMapped=class{constructor(t,e,n){this.color="#0000ff",this.from=0,this.to=255,void 0!==t&&(this.color=t),void 0!==e&&(this.from=e),void 0!==n&&(this.to=n)}},t.RGBObjectMaxDto=class{constructor(t,e){this.min=0,this.max=255,void 0!==t&&(this.rgb=t),void 0!==e&&(this.max=e)}},t.RGBMinMaxDto=class{constructor(t,e,n,o,r){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==t&&(this.r=t),void 0!==e&&(this.g=e),void 0!==n&&(this.b=n),void 0!==o&&(this.min=o),void 0!==r&&(this.max=r)}},t.RGBObjectDto=class{constructor(t){void 0!==t&&(this.rgb=t)}}}(s||(s={})),function(t){let e;!function(t){t.first="first",t.last="last"}(e=t.firstLastEnum||(t.firstLastEnum={})),t.ListItemDto=class{constructor(t,e,n){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==n&&(this.clone=n)}},t.SubListDto=class{constructor(t,e,n,o){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexStart=e),void 0!==n&&(this.indexEnd=n),void 0!==o&&(this.clone=o)}},t.ListCloneDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RepeatInPatternDto=class{constructor(t){this.clone=!0,this.lengthLimit=100,void 0!==t&&(this.list=t)}},t.SortDto=class{constructor(t,e,n){this.clone=!0,this.orderAsc=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==n&&(this.orderAsc=n)}},t.SortJsonDto=class{constructor(t,e,n){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==n&&(this.orderAsc=n)}},t.ListDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.GroupListDto=class{constructor(t,e,n){this.nrElements=2,this.keepRemainder=!1,void 0!==t&&(this.list=t),void 0!==e&&(this.nrElements=e),void 0!==n&&(this.keepRemainder=n)}},t.MultiplyItemDto=class{constructor(t,e){void 0!==t&&(this.item=t),void 0!==e&&(this.times=e)}},t.AddItemAtIndexDto=class{constructor(t,e,n,o){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==n&&(this.index=n),void 0!==o&&(this.clone=o)}},t.AddItemAtIndexesDto=class{constructor(t,e,n,o){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==n&&(this.indexes=n),void 0!==o&&(this.clone=o)}},t.AddItemsAtIndexesDto=class{constructor(t,e,n,o){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.items=e),void 0!==n&&(this.indexes=n),void 0!==o&&(this.clone=o)}},t.RemoveItemAtIndexDto=class{constructor(t,e,n){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==n&&(this.clone=n)}},t.RemoveItemsAtIndexesDto=class{constructor(t,e,n){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexes=e),void 0!==n&&(this.clone=n)}},t.RemoveNthItemDto=class{constructor(t,e,n,o){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==n&&(this.offset=n),void 0!==o&&(this.clone=o)}},t.RandomThresholdDto=class{constructor(t,e,n){this.threshold=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.threshold=e),void 0!==n&&(this.clone=n)}},t.RemoveDuplicatesDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RemoveDuplicatesToleranceDto=class{constructor(t,e,n){this.tolerance=1e-7,this.clone=!0,void 0!==t&&(this.list=t),void 0!==n&&(this.tolerance=n),void 0!==e&&(this.clone=e)}},t.GetByPatternDto=class{constructor(t,e){this.pattern=[!0,!0,!1],void 0!==t&&(this.list=t),void 0!==e&&(this.pattern=e)}},t.GetNthItemDto=class{constructor(t,e,n,o){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==n&&(this.offset=n),void 0!==o&&(this.clone=o)}},t.GetLongestListLength=class{constructor(t){void 0!==t&&(this.lists=t)}},t.MergeElementsOfLists=class{constructor(t,e){this.level=0,void 0!==t&&(this.lists=t),void 0!==e&&(this.level=e)}},t.AddItemDto=class{constructor(t,e,n){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==n&&(this.clone=n)}},t.AddItemFirstLastDto=class{constructor(t,n,o,r){this.position=e.last,this.clone=!0,void 0!==t&&(this.list=t),void 0!==n&&(this.item=n),void 0!==o&&(this.position=o),void 0!==r&&(this.clone=r)}}}(i||(i={})),function(t){let e;!function(t){t.less="<",t.lessOrEqual="<=",t.greater=">",t.greaterOrEqual=">=",t.tripleEqual="===",t.tripleNotEqual="!==",t.equal="==",t.notEqual="!="}(e=t.BooleanOperatorsEnum||(t.BooleanOperatorsEnum={})),t.ComparisonDto=class{constructor(t,e,n){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==n&&(this.operator=n)}},t.BooleanDto=class{constructor(t){this.boolean=!1,void 0!==t&&(this.boolean=t)}},t.BooleanListDto=class{constructor(t){void 0!==t&&(this.booleans=t)}},t.ValueGateDto=class{constructor(t,e){this.boolean=!1,void 0!==t&&(this.value=t),void 0!==e&&(this.boolean=e)}},t.TwoValueGateDto=class{constructor(t,e){void 0!==t&&(this.value1=t),void 0!==e&&(this.value2=e)}},t.RandomBooleansDto=class{constructor(t){this.length=10,this.trueThreshold=.5,void 0!==t&&(this.length=t)}},t.TwoThresholdRandomGradientDto=class{},t.ThresholdBooleanListDto=class{},t.ThresholdGapsBooleanListDto=class{}}(a||(a={})),function(t){let e,n,o;!function(t){t.add="add",t.subtract="subtract",t.multiply="multiply",t.divide="divide",t.power="power",t.modulus="modulus"}(e=t.mathTwoNrOperatorEnum||(t.mathTwoNrOperatorEnum={})),function(t){t.absolute="absolute",t.negate="negate",t.ln="ln",t.log10="log10",t.tenPow="tenPow",t.round="round",t.floor="floor",t.ceil="ceil",t.sqrt="sqrt",t.sin="sin",t.cos="cos",t.tan="tan",t.asin="asin",t.acos="acos",t.atan="atan",t.log="log",t.exp="exp",t.radToDeg="radToDeg",t.degToRad="degToRad"}(n=t.mathOneNrOperatorEnum||(t.mathOneNrOperatorEnum={})),function(t){t.easeInSine="easeInSine",t.easeOutSine="easeOutSine",t.easeInOutSine="easeInOutSine",t.easeInQuad="easeInQuad",t.easeOutQuad="easeOutQuad",t.easeInOutQuad="easeInOutQuad",t.easeInCubic="easeInCubic",t.easeOutCubic="easeOutCubic",t.easeInOutCubic="easeInOutCubic",t.easeInQuart="easeInQuart",t.easeOutQuart="easeOutQuart",t.easeInOutQuart="easeInOutQuart",t.easeInQuint="easeInQuint",t.easeOutQuint="easeOutQuint",t.easeInOutQuint="easeInOutQuint",t.easeInExpo="easeInExpo",t.easeOutExpo="easeOutExpo",t.easeInOutExpo="easeInOutExpo",t.easeInCirc="easeInCirc",t.easeOutCirc="easeOutCirc",t.easeInOutCirc="easeInOutCirc",t.easeInElastic="easeInElastic",t.easeOutElastic="easeOutElastic",t.easeInOutElastic="easeInOutElastic",t.easeInBack="easeInBack",t.easeOutBack="easeOutBack",t.easeInOutBack="easeInOutBack",t.easeInBounce="easeInBounce",t.easeOutBounce="easeOutBounce",t.easeInOutBounce="easeInOutBounce"}(o=t.easeEnum||(t.easeEnum={})),t.ModulusDto=class{constructor(t,e){this.number=1,this.modulus=2,void 0!==t&&(this.number=t),void 0!==e&&(this.modulus=e)}},t.NumberDto=class{constructor(t){this.number=1,void 0!==t&&(this.number=t)}},t.EaseDto=class{constructor(t){this.x=.5,this.min=0,this.max=1,void 0!==t&&(this.x=t)}},t.RoundToDecimalsDto=class{constructor(t,e){this.number=1.123456,this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}},t.ActionOnTwoNumbersDto=class{constructor(t,e,n){this.first=1,this.second=1,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==n&&(this.operation=n)}},t.TwoNumbersDto=class{constructor(t,e){this.first=1,this.second=2,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.ActionOnOneNumberDto=class{constructor(t,e){this.number=1,void 0!==t&&(this.number=t),void 0!==e&&(this.operation=e)}},t.RemapNumberDto=class{constructor(t,e,n,o,r){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==t&&(this.number=t),void 0!==e&&(this.fromLow=e),void 0!==n&&(this.fromHigh=n),void 0!==o&&(this.toLow=o),void 0!==r&&(this.toHigh=r)}},t.RandomNumberDto=class{constructor(t,e){this.low=0,this.high=1,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e)}},t.RandomNumbersDto=class{constructor(t,e,n){this.low=0,this.high=1,this.count=10,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e),void 0!==n&&(this.count=n)}},t.ToFixedDto=class{constructor(t,e){this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}}}(c||(c={})),function(t){t.PointDto=class{constructor(t){void 0!==t&&(this.point=t)}},t.PointXYZDto=class{constructor(t,e,n){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==n&&(this.z=n)}},t.PointXYDto=class{constructor(t,e){this.x=0,this.y=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},t.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.TwoPointsDto=class{constructor(t,e){void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e)}},t.DrawPointDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.point=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.size=n),void 0!==o&&(this.colours=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.pointMesh=s)}},t.DrawPointsDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.size=n),void 0!==o&&(this.colours=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.pointsMesh=s)}},t.TransformPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.transformation=e)}},t.TransformPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},t.TranslatePointsWithVectorsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translations=e)}},t.TranslatePointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translation=e)}},t.TranslateXYZPointsDto=class{constructor(t,e,n,o){this.x=0,this.y=1,this.z=0,void 0!==t&&(this.points=t),void 0!==e&&(this.x=e),void 0!==n&&(this.y=n),void 0!==o&&(this.z=o)}},t.ScalePointsCenterXYZDto=class{constructor(t,e,n){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==n&&(this.scaleXyz=n)}},t.StretchPointsDirFromCenterDto=class{constructor(t,e,n,o){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==n&&(this.direction=n),void 0!==o&&(this.scale=o)}},t.RotatePointsCenterAxisDto=class{constructor(t,e,n,o){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.points=t),void 0!==e&&(this.angle=e),void 0!==n&&(this.axis=n),void 0!==o&&(this.center=o)}},t.TransformsForPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},t.ThreePointsNormalDto=class{constructor(t,e,n,o){this.reverseNormal=!1,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==n&&(this.point3=n),void 0!==o&&(this.reverseNormal=o)}},t.ThreePointsToleranceDto=class{constructor(t,e,n,o){this.tolerance=1e-7,void 0!==t&&(this.start=t),void 0!==e&&(this.center=e),void 0!==n&&(this.end=n),void 0!==o&&(this.tolerance=o)}},t.PointsMaxFilletsHalfLineDto=class{constructor(t,e,n){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==e&&(this.checkLastWithFirst=e),void 0!==n&&(this.tolerance=n)}},t.RemoveConsecutiveDuplicatesDto=class{constructor(t,e,n){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.tolerance=e),void 0!==n&&(this.checkFirstAndLast=n)}},t.ClosestPointFromPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.point=e)}},t.TwoPointsToleranceDto=class{constructor(t,e,n){this.tolerance=1e-7,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==n&&(this.tolerance=n)}},t.StartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoint=e)}},t.StartEndPointsListDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoints=e)}},t.MultiplyPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.amountOfPoints=e)}},t.SpiralDto=class{constructor(t,e,n,o,r){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==t&&(this.radius=t),void 0!==e&&(this.numberPoints=e),void 0!==n&&(this.widening=n),void 0!==o&&(this.factor=o),void 0!==r&&(this.phi=r)}},t.HexGridScaledToFitDto=class{constructor(t,e,n,o,r,s){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==n&&(this.nrHexagonsInHeight=n),void 0!==o&&(this.nrHexagonsInWidth=o),void 0!==r&&(this.centerGrid=r),void 0!==s&&(this.pointsOnGround=s)}},t.HexGridCentersDto=class{constructor(t,e,n,o,r){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==t&&(this.nrHexagonsX=t),void 0!==e&&(this.nrHexagonsY=e),void 0!==n&&(this.radiusHexagon=n),void 0!==o&&(this.orientOnCenter=o),void 0!==r&&(this.pointsOnGround=r)}}}(l||(l={})),function(t){t.TextDto=class{constructor(t){this.text="Hello World",void 0!==t&&(this.text=t)}},t.TextSplitDto=class{constructor(t,e){this.text="a,b,c",this.separator=",",void 0!==t&&(this.text=t),void 0!==e&&(this.separator=e)}},t.TextReplaceDto=class{constructor(t,e,n){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==t&&(this.text=t),void 0!==e&&(this.search=e),void 0!==n&&(this.replaceWith=n)}},t.TextJoinDto=class{constructor(t,e){this.separator=",",void 0!==t&&(this.list=t),void 0!==e&&(this.separator=e)}},t.ToStringDto=class{constructor(t){void 0!==t&&(this.item=t)}},t.ToStringEachDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.TextFormatDto=class{constructor(t,e){this.text="Hello {0}",this.values=["World"],void 0!==t&&(this.text=t),void 0!==e&&(this.values=e)}},t.VectorCharDto=class{constructor(t,e,n,o,r){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==t&&(this.char=t),void 0!==e&&(this.xOffset=e),void 0!==n&&(this.yOffset=n),void 0!==o&&(this.height=o),void 0!==r&&(this.extrudeOffset=r)}},t.VectorTextDto=class{constructor(t,e,n,o,r,s,i,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==t&&(this.text=t),void 0!==e&&(this.xOffset=e),void 0!==n&&(this.yOffset=n),void 0!==o&&(this.height=o),void 0!==r&&(this.lineSpacing=r),void 0!==s&&(this.letterSpacing=s),void 0!==i&&(this.align=i),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(u||(u={})),function(t){t.RotationCenterAxisDto=class{constructor(t,e,n){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.axis=e),void 0!==n&&(this.center=n)}},t.RotationCenterDto=class{constructor(t,e){this.angle=90,this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.center=e)}},t.RotationCenterYawPitchRollDto=class{constructor(t,e,n,o){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==t&&(this.yaw=t),void 0!==e&&(this.pitch=e),void 0!==n&&(this.roll=n),void 0!==o&&(this.center=o)}},t.ScaleXYZDto=class{constructor(t){this.scaleXyz=[1,1,1],void 0!==t&&(this.scaleXyz=t)}},t.StretchDirCenterDto=class{constructor(t,e,n){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e),void 0!==n&&(this.direction=n)}},t.ScaleCenterXYZDto=class{constructor(t,e){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.center=t),void 0!==e&&(this.scaleXyz=e)}},t.UniformScaleDto=class{constructor(t){this.scale=1,void 0!==t&&(this.scale=t)}},t.UniformScaleFromCenterDto=class{constructor(t,e){this.scale=1,this.center=[0,0,0],void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e)}},t.TranslationXYZDto=class{constructor(t){this.translation=[0,0,0],void 0!==t&&(this.translation=t)}},t.TranslationsXYZDto=class{constructor(t){void 0!==t&&(this.translations=t)}}}(h||(h={})),function(t){t.DateDto=class{constructor(t){void 0!==t&&(this.date=t)}},t.DateStringDto=class{constructor(t){void 0!==t&&(this.dateString=t)}},t.DateSecondsDto=class{constructor(t,e){this.seconds=30,void 0!==t&&(this.date=t),void 0!==e&&(this.seconds=e)}},t.DateDayDto=class{constructor(t,e){this.day=1,void 0!==t&&(this.date=t),void 0!==e&&(this.day=e)}},t.DateYearDto=class{constructor(t,e){this.year=1,void 0!==t&&(this.date=t),void 0!==e&&(this.year=e)}},t.DateMonthDto=class{constructor(t,e){this.month=1,void 0!==t&&(this.date=t),void 0!==e&&(this.month=e)}},t.DateHoursDto=class{constructor(t,e){this.hours=1,void 0!==t&&(this.date=t),void 0!==e&&(this.hours=e)}},t.DateMinutesDto=class{constructor(t,e){this.minutes=1,void 0!==t&&(this.date=t),void 0!==e&&(this.minutes=e)}},t.DateMillisecondsDto=class{constructor(t,e){this.milliseconds=1,void 0!==t&&(this.date=t),void 0!==e&&(this.milliseconds=e)}},t.DateTimeDto=class{constructor(t,e){this.time=1,void 0!==t&&(this.date=t),void 0!==e&&(this.time=e)}},t.CreateFromUnixTimeStampDto=class{constructor(t){this.unixTimeStamp=1,void 0!==t&&(this.unixTimeStamp=t)}},t.CreateDateDto=class{constructor(t,e,n,o,r,s,i){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==t&&(this.year=t),void 0!==e&&(this.month=e),void 0!==n&&(this.day=n),void 0!==o&&(this.hours=o),void 0!==r&&(this.minutes=r),void 0!==s&&(this.seconds=s),void 0!==i&&(this.milliseconds=i)}}}(p||(p={})),function(t){t.LinePointsDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.LineStartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoints=t),void 0!==e&&(this.endPoints=e)}},t.DrawLineDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.line=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.lineMesh=s)}},t.DrawLinesDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.lines=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.linesMesh=s)}},t.PointsLinesDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.LineDto=class{constructor(t){void 0!==t&&(this.line=t)}},t.SegmentDto=class{constructor(t){void 0!==t&&(this.segment=t)}},t.SegmentsDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.LinesDto=class{constructor(t){void 0!==t&&(this.lines=t)}},t.LineLineIntersectionDto=class{constructor(t,e,n){this.checkSegmentsOnly=!0,void 0!==t&&(this.line1=t),void 0!==e&&(this.line2=e),void 0!==n&&(this.tolerance=n)}},t.PointOnLineDto=class{constructor(t,e){this.param=.5,void 0!==t&&(this.line=t),void 0!==e&&(this.param=e)}},t.TransformLineDto=class{constructor(t,e){void 0!==t&&(this.line=t),void 0!==e&&(this.transformation=e)}},t.TransformsLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}},t.TransformLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}}}(m||(m={})),function(t){t.PolylineCreateDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},t.PolylinePropertiesDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.PolylinesDto=class{constructor(t){void 0!==t&&(this.polylines=t)}},t.TransformPolylineDto=class{constructor(t,e){void 0!==t&&(this.polyline=t),void 0!==e&&(this.transformation=e)}},t.DrawPolylineDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polyline=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.polylineMesh=s)}},t.DrawPolylinesDto=class{constructor(t,e,n,o,r,s){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polylines=t),void 0!==e&&(this.opacity=e),void 0!==n&&(this.colours=n),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==s&&(this.polylinesMesh=s)}},t.SegmentsToleranceDto=class{constructor(t){this.tolerance=1e-5,void 0!==t&&(this.segments=t)}},t.PolylineToleranceDto=class{constructor(t,e){this.tolerance=1e-5,void 0!==t&&(this.polyline=t),void 0!==e&&(this.tolerance=e)}},t.TwoPolylinesToleranceDto=class{constructor(t,e,n){this.tolerance=1e-5,void 0!==t&&(this.polyline1=t),void 0!==e&&(this.polyline2=e),void 0!==n&&(this.tolerance=n)}}}(d||(d={})),function(t){t.SignedDistanceFromPlaneToPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.plane=e)}},t.TriangleDto=class{constructor(t){void 0!==t&&(this.triangle=t)}},t.TriangleToleranceDto=class{constructor(t){this.tolerance=1e-7,void 0!==t&&(this.triangle=t)}},t.TriangleTriangleToleranceDto=class{constructor(t,e,n){this.tolerance=1e-7,void 0!==t&&(this.triangle1=t),void 0!==e&&(this.triangle2=e),void 0!==n&&(this.tolerance=n)}},t.MeshMeshToleranceDto=class{constructor(t,e,n){this.tolerance=1e-7,void 0!==t&&(this.mesh1=t),void 0!==e&&(this.mesh2=e),void 0!==n&&(this.tolerance=n)}}}(f||(f={})),function(t){t.DxfLineSegmentDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.DxfArcSegmentDto=class{constructor(t,e,n,o){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==n&&(this.startAngle=n),void 0!==o&&(this.endAngle=o)}},t.DxfCircleSegmentDto=class{constructor(t,e){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e)}},t.DxfPolylineSegmentDto=class{constructor(t,e,n){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e),void 0!==n&&(this.bulges=n)}},t.DxfSplineSegmentDto=class{constructor(t,e,n){this.degree=3,this.closed=!1,void 0!==t&&(this.controlPoints=t),void 0!==e&&(this.degree=e),void 0!==n&&(this.closed=n)}},t.DxfPathDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.DxfPathsPartDto=class{constructor(t,e,n){this.layer="Default",this.color="#000000",void 0!==t&&(this.layer=t),void 0!==e&&(this.color=e),void 0!==n&&(this.paths=n)}},t.DxfModelDto=class{constructor(t){void 0!==t&&(this.dxfPathsParts=t)}}}(g||(g={})),function(t){t.TwoVectorsDto=class{constructor(t,e){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.VectorBoolDto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.RemoveAllDuplicateVectorsDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.tolerance=e)}},t.RemoveConsecutiveDuplicateVectorsDto=class{constructor(t,e,n){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.checkFirstAndLast=e),void 0!==n&&(this.tolerance=n)}},t.VectorsTheSameDto=class{constructor(t,e,n){this.tolerance=1e-7,void 0!==t&&(this.vec1=t),void 0!==e&&(this.vec2=e),void 0!==n&&(this.tolerance=n)}},t.VectorDto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.Vector3Dto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.RangeMaxDto=class{constructor(t){void 0!==t&&(this.max=t)}},t.VectorXYZDto=class{constructor(t,e,n){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==n&&(this.z=n)}},t.VectorXYDto=class{constructor(t,e){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},t.SpanDto=class{constructor(t,e,n){this.step=.1,this.min=0,this.max=1,void 0!==t&&(this.step=t),void 0!==e&&(this.min=e),void 0!==n&&(this.max=n)}},t.SpanEaseItemsDto=class{constructor(t,e,n,o){this.nrItems=100,this.min=0,this.max=1,this.ease=c.easeEnum.easeInSine,this.intervals=!1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==n&&(this.max=n),void 0!==o&&(this.ease=o)}},t.SpanLinearItemsDto=class{constructor(t,e,n){this.nrItems=100,this.min=0,this.max=1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==n&&(this.max=n)}},t.RayPointDto=class{constructor(t,e,n){void 0!==t&&(this.point=t),void 0!==e&&(this.distance=e),void 0!==n&&(this.vector=n)}},t.VectorsDto=class{constructor(t){void 0!==t&&(this.vectors=t)}},t.FractionTwoVectorsDto=class{constructor(t,e,n){this.fraction=.5,void 0!==t&&(this.fraction=t),void 0!==e&&(this.first=e),void 0!==n&&(this.second=n)}},t.VectorScalarDto=class{constructor(t,e){void 0!==t&&(this.scalar=t),void 0!==e&&(this.vector=e)}},t.TwoVectorsReferenceDto=class{constructor(t,e,n){void 0!==t&&(this.reference=t),void 0!==e&&(this.first=e),void 0!==n&&(this.second=n)}}}(v||(v={})),function(t){let e,n,o,r;!function(t){t.left="left",t.center="center",t.right="right"}(e=t.horizontalAlignEnum||(t.horizontalAlignEnum={})),function(t){t.top="top",t.middle="middle",t.bottom="bottom"}(n=t.verticalAlignmentEnum||(t.verticalAlignmentEnum={})),function(t){t.top="top",t.bottom="bottom"}(o=t.topBottomEnum||(t.topBottomEnum={})),function(t){t.topLeft="topLeft",t.topMid="topMid",t.topRight="topRight",t.midLeft="midLeft",t.midMid="midMid",t.midRight="midRight",t.bottomLeft="bottomLeft",t.bottomMid="bottomMid",t.bottomRight="bottomRight"}(r=t.basicAlignmentEnum||(t.basicAlignmentEnum={}))}(y||(y={}));class A{getItem(t){if(t.index<0||t.index>=t.list.length)throw new Error("Index out of bounds");let e;return e=t.clone?structuredClone(t.list[t.index]):t.list[t.index],e}randomGetThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[];for(let o=0;o<t.list.length;o++)Math.random()<t.threshold&&n.push(e[o]);return n}getSubList(t){let e;return e=t.clone?structuredClone(t.list.slice(t.indexStart,t.indexEnd)):t.list.slice(t.indexStart,t.indexEnd),e}getNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[];for(let o=0;o<e.length;o++)(o+t.offset)%t.nth==0&&n.push(e[o]);return n}getByPattern(t){const{list:e,pattern:n}=t;if(!n||0===n.length)throw new Error("Pattern is empty or does not exist");const o=n.length,r=e.length,s=[];if(o>=r)e.forEach(((t,e)=>{!0===n[e]&&s.push(t)}));else{const t=[],i=Math.ceil(r/o);for(let e=0;e<i;e++)t.push(...n);e.forEach(((e,n)=>{!0===t[n]&&s.push(e)}))}return s}mergeElementsOfLists(t){const e=t.lists,n=t.level,o=[],r=[];e.forEach((t=>{const e=t.flat(n);o.push(e)}));const s=this.getLongestListLength({lists:o});for(let t=0;t<s;t++){const e=[];for(let n=0;n<o.length;n++){const r=o[n][t];void 0!==r&&e.push(r)}e.length>0&&r.push(e)}let i=[];if(n>0)for(let t=0;t<n;t++)t===n-1&&0!==t?i[t-1].push(r):t===n-1?i.push(r):i.push([]);else i=r;return i}getLongestListLength(t){let e=0;return t.lists?(t.lists.forEach((t=>{t.length>e&&(e=t.length)})),e):void 0}reverse(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.reverse()}flipLists(t){if(t.list.length>0){const e=t.list[0].length;let n=!0;if(t.list.forEach((t=>{t.length!==e&&(n=!1)})),n){const n=[];for(let o=0;o<e;o++){const e=[];t.list.forEach((t=>{e.push(t[o])})),n.push(e)}return n}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(t){return(t=>{const{nrElements:e,list:n,keepRemainder:o}=t,r=e,s=[];let i=[];return n.forEach(((t,e)=>{i.push(t),(e+1)%r==0&&(s.push(i),i=[]),i.length>0&&o&&e===n.length-1&&s.push(i)})),s})(t)}getListDepth(t){let e=0,n=!0,o=t.list;for(;n;){let t=!1;for(let e=0;e<o.length;e++)Array.isArray(o[e])&&(t=!0);o=o.flat(),t?e++:(e++,n=!1)}return e}listLength(t){return t.list.length}addItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,0,t.item),e}addItemAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));let n=[...t.indexes];return n=n.filter((t=>t>=0&&t<=e.length)),n.sort(((t,e)=>t-e)),n.forEach(((n,o)=>{n>=0&&n+o<=e.length&&e.splice(n+o,0,t.item)})),e}addItemsAtIndexes(t){if(t.items.length!==t.indexes.length)throw new Error("Items and indexes must have the same length");for(let e=0;e<t.indexes.length;e++)if(e>0&&t.indexes[e-1]>t.indexes[e])throw new Error("Indexes must be in ascending order");let e=t.list;return t.clone&&(e=structuredClone(t.list)),[...t.indexes].forEach(((n,o)=>{n>=0&&n+o<=e.length&&e.splice(n+o,0,t.items[o])})),e}removeItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,1),e}removeItemsAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[...t.indexes];return n.sort(((t,e)=>e-t)),n.forEach((t=>{t>=0&&t<e.length&&e.splice(t,1)})),e}removeAllItems(t){return t.list.length=0,t.list}removeNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[];for(let o=0;o<e.length;o++)(o+t.offset)%t.nth!=0&&n.push(e[o]);return n}randomRemoveThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[];for(let o=0;o<t.list.length;o++)Math.random()>t.threshold&&n.push(e[o]);return n}removeDuplicateNumbers(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((t,e,n)=>n.indexOf(t)===e))}removeDuplicateNumbersTolerance(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((e,n,o)=>o.findIndex((n=>Math.abs(n-e)<t.tolerance))===n))}addItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.push(t.item),e}prependItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.unshift(t.item),e}addItemFirstLast(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.position===i.firstLastEnum.first?e.unshift(t.item):e.push(t.item),e}createEmptyList(){return[]}repeat(t){const e=[];for(let n=0;n<t.times;n++)e.push(t.item);return e}repeatInPattern(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const n=[];let o=0,r=0;for(;o<t.lengthLimit;)n.push(e[r]),r++,r===e.length&&(r=0),o++;return n}sortNumber(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((t,e)=>t-e)):e.sort(((t,e)=>e-t))}sortTexts(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort():e.sort().reverse()}sortByPropValue(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((e,n)=>e[t.property]-n[t.property])):e.sort(((e,n)=>n[t.property]-e[t.property]))}}class E{number(t){return t.number}twoNrOperation(t){let e;switch(t.operation){case c.mathTwoNrOperatorEnum.add:e=t.first+t.second;break;case c.mathTwoNrOperatorEnum.subtract:e=t.first-t.second;break;case c.mathTwoNrOperatorEnum.multiply:e=t.first*t.second;break;case c.mathTwoNrOperatorEnum.divide:e=t.first/t.second;break;case c.mathTwoNrOperatorEnum.power:e=Math.pow(t.first,t.second);break;case c.mathTwoNrOperatorEnum.modulus:e=t.first%t.second}return e}modulus(t){return this.twoNrOperation({first:t.number,second:t.modulus,operation:c.mathTwoNrOperatorEnum.modulus})}roundToDecimals(t){return Math.round(t.number*Math.pow(10,t.decimalPlaces))/Math.pow(10,t.decimalPlaces)}oneNrOperation(t){let e;switch(t.operation){case c.mathOneNrOperatorEnum.absolute:e=Math.abs(t.number);break;case c.mathOneNrOperatorEnum.negate:e=-t.number;break;case c.mathOneNrOperatorEnum.ln:e=Math.log(t.number);break;case c.mathOneNrOperatorEnum.log10:e=Math.log10(t.number);break;case c.mathOneNrOperatorEnum.tenPow:e=Math.pow(10,t.number);break;case c.mathOneNrOperatorEnum.round:e=Math.round(t.number);break;case c.mathOneNrOperatorEnum.floor:e=Math.floor(t.number);break;case c.mathOneNrOperatorEnum.ceil:e=Math.ceil(t.number);break;case c.mathOneNrOperatorEnum.sqrt:e=Math.sqrt(t.number);break;case c.mathOneNrOperatorEnum.sin:e=Math.sin(t.number);break;case c.mathOneNrOperatorEnum.cos:e=Math.cos(t.number);break;case c.mathOneNrOperatorEnum.tan:e=Math.tan(t.number);break;case c.mathOneNrOperatorEnum.asin:e=Math.asin(t.number);break;case c.mathOneNrOperatorEnum.acos:e=Math.acos(t.number);break;case c.mathOneNrOperatorEnum.atan:e=Math.atan(t.number);break;case c.mathOneNrOperatorEnum.log:e=Math.log(t.number);break;case c.mathOneNrOperatorEnum.exp:e=Math.exp(t.number);break;case c.mathOneNrOperatorEnum.degToRad:e=t.number*Math.PI/180;break;case c.mathOneNrOperatorEnum.radToDeg:e=180*t.number/Math.PI}return e}remap(t){return(t.number-t.fromLow)*(t.toHigh-t.toLow)/(t.fromHigh-t.fromLow)+t.toLow}random(){return Math.random()}randomNumber(t){return Math.random()*(t.high-t.low)+t.low}randomNumbers(t){const e=[];for(let n=0;n<t.count;n++)e.push(this.randomNumber(t));return e}pi(){return Math.PI}toFixed(t){return t.number.toFixed(t.decimalPlaces)}add(t){return t.first+t.second}subtract(t){return t.first-t.second}multiply(t){return t.first*t.second}divide(t){return t.first/t.second}power(t){return Math.pow(t.first,t.second)}sqrt(t){return Math.sqrt(t.number)}abs(t){return Math.abs(t.number)}round(t){return Math.round(t.number)}floor(t){return Math.floor(t.number)}ceil(t){return Math.ceil(t.number)}negate(t){return-t.number}ln(t){return Math.log(t.number)}log10(t){return Math.log10(t.number)}tenPow(t){return Math.pow(10,t.number)}sin(t){return Math.sin(t.number)}cos(t){return Math.cos(t.number)}tan(t){return Math.tan(t.number)}asin(t){return Math.asin(t.number)}acos(t){return Math.acos(t.number)}atan(t){return Math.atan(t.number)}exp(t){return Math.exp(t.number)}degToRad(t){return t.number*Math.PI/180}radToDeg(t){return 180*t.number/Math.PI}ease(t){const e=t.x,n=t.min,o=t.max,r=this[t.ease](e);return this.remap({number:r,fromLow:0,fromHigh:1,toLow:n,toHigh:o})}easeInSine(t){return 1-Math.cos(t*Math.PI/2)}easeOutSine(t){return Math.sin(t*Math.PI/2)}easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}easeInQuad(t){return t*t}easeOutQuad(t){return 1-(1-t)*(1-t)}easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}easeInCubic(t){return t*t*t}easeOutCubic(t){return 1-Math.pow(1-t,3)}easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}easeInQuart(t){return t*t*t*t}easeOutQuart(t){return 1-Math.pow(1-t,4)}easeInOutQuart(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}easeInQuint(t){return t*t*t*t*t}easeOutQuint(t){return 1-Math.pow(1-t,5)}easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}easeInExpo(t){return 0===t?0:Math.pow(2,10*t-10)}easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}easeInCirc(t){return 1-Math.sqrt(1-t*t)}easeOutCirc(t){return Math.sqrt(1-Math.pow(t-1,2))}easeInOutCirc(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}easeInBack(t){return 2.70158*t*t*t-1.70158*t*t}easeOutBack(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}easeInOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}easeInElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}easeOutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}easeInOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}easeInBounce(t){return 1-this.easeOutBounce(1-t)}easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}easeInOutBounce(t){return t<.5?(1-this.easeOutBounce(1-2*t))/2:(1+this.easeOutBounce(2*t-1))/2}}class w{constructor(t,e,n,o){this.geometryHelper=t,this.transforms=e,this.vector=n,this.lists=o}transformPoint(t){const e=t.transformation;let n=[t.point];return n=this.geometryHelper.transformControlPoints(e,n),n[0]}transformPoints(t){return this.geometryHelper.transformControlPoints(t.transformation,t.points)}transformsForPoints(t){if(t.points.length!==t.transformation.length)throw new Error("You must provide equal nr of points and transformations");return t.points.map(((e,n)=>this.geometryHelper.transformControlPoints(t.transformation[n],[e])[0]))}translatePoints(t){const e=this.transforms.translationXYZ({translation:t.translation});return this.geometryHelper.transformControlPoints(e,t.points)}translatePointsWithVectors(t){if(t.points.length!==t.translations.length)throw new Error("You must provide equal nr of points and translations");const e=this.transforms.translationsXYZ({translations:t.translations});return t.points.map(((t,n)=>this.geometryHelper.transformControlPoints(e[n],[t])[0]))}translateXYZPoints(t){const e=this.transforms.translationXYZ({translation:[t.x,t.y,t.z]});return this.geometryHelper.transformControlPoints(e,t.points)}scalePointsCenterXYZ(t){const e=this.transforms.scaleCenterXYZ({center:t.center,scaleXyz:t.scaleXyz});return this.geometryHelper.transformControlPoints(e,t.points)}stretchPointsDirFromCenter(t){const e=this.transforms.stretchDirFromCenter({center:t.center,scale:t.scale,direction:t.direction});return this.geometryHelper.transformControlPoints(e,t.points)}rotatePointsCenterAxis(t){const e=this.transforms.rotationCenterAxis({center:t.center,axis:t.axis,angle:t.angle});return this.geometryHelper.transformControlPoints(e,t.points)}boundingBoxOfPoints(t){const e=[],n=[],o=[];t.points.forEach((t=>{e.push(t[0]),n.push(t[1]),o.push(t[2])}));const r=[Math.min(...e),Math.min(...n),Math.min(...o)],s=[Math.max(...e),Math.max(...n),Math.max(...o)];return{min:r,max:s,center:[(r[0]+s[0])/2,(r[1]+s[1])/2,(r[2]+s[2])/2],width:s[0]-r[0],height:s[1]-r[1],length:s[2]-r[2]}}closestPointFromPointsDistance(t){return this.closestPointFromPointData(t).distance}closestPointFromPointsIndex(t){return this.closestPointFromPointData(t).index}closestPointFromPoints(t){return this.closestPointFromPointData(t).point}distance(t){const e=t.endPoint[0]-t.startPoint[0],n=t.endPoint[1]-t.startPoint[1],o=t.endPoint[2]-t.startPoint[2];return Math.sqrt(e*e+n*n+o*o)}distancesToPoints(t){return t.endPoints.map((e=>this.distance({startPoint:t.startPoint,endPoint:e})))}multiplyPoint(t){const e=[];for(let n=0;n<t.amountOfPoints;n++)e.push([t.point[0],t.point[1],t.point[2]]);return e}getX(t){return t.point[0]}getY(t){return t.point[1]}getZ(t){return t.point[2]}averagePoint(t){const e=[],n=[],o=[];return t.points.forEach((t=>{e.push(t[0]),n.push(t[1]),o.push(t[2])})),[e.reduce(((t,e)=>t+e),0)/t.points.length,n.reduce(((t,e)=>t+e),0)/t.points.length,o.reduce(((t,e)=>t+e),0)/t.points.length]}pointXYZ(t){return[t.x,t.y,t.z]}pointXY(t){return[t.x,t.y]}spiral(t){const e=t.phi,n=Math.log(e)/(Math.PI/t.widening),o=[],r=t.radius/t.numberPoints;for(let e=0;e<t.radius;e+=r){const r=Math.log(e/t.factor)/n,s=e*Math.cos(r),i=e*Math.sin(r);o.push([s||0,i||0,0])}return o}hexGrid(t){const e=Math.sqrt(Math.pow(t.radiusHexagon,2)-Math.pow(t.radiusHexagon/2,2)),n=[];for(let o=0;o<t.nrHexagonsX;o++){const r=o*e*2;for(let o=0;o<t.nrHexagonsY;o++){const s=(t.radiusHexagon+t.radiusHexagon/2)*o,i=r+(o%2==0?0:e);n.push([i,s,0])}}if(t.orientOnCenter){const t=n[n.length-1][0]/2,e=n[n.length-1][1]/2;n.forEach(((o,r)=>{n[r]=[o[0]-t,o[1]-e,0]}))}return t.pointsOnGround&&n.forEach(((t,e)=>{n[e]=[t[0],0,t[1]]})),n}hexGridScaledToFit(t){var e,n,o,r;let s=t.width,i=t.height,a=t.nrHexagonsInHeight,c=t.nrHexagonsInWidth,l=null!==(e=t.extendTop)&&void 0!==e&&e,u=null!==(n=t.extendBottom)&&void 0!==n&&n,h=null!==(o=t.extendLeft)&&void 0!==o&&o,p=null!==(r=t.extendRight)&&void 0!==r&&r;const{flatTop:m=!1,centerGrid:d=!1,pointsOnGround:f=!1}=t;if(m){const e=s;s=t.height,i=e;const n=c;c=a,a=n;const o=l,r=u;l=h,u=p,h=r,p=o}if(s<=0||i<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const v=g.map((t=>this.getRegularHexagonVertices(t,1)));let y=1/0,b=-1/0,x=1/0,A=-1/0;for(const t of v)for(const e of t)e[0]<y&&(y=e[0]),e[0]>b&&(b=e[0]),e[1]<x&&(x=e[1]),e[1]>A&&(A=e[1]);const E=b-y,w=A-x,D=E>1e-9?s/E:1,P=w>1e-9?i/w:1;let S=g.map((t=>[(t[0]-y)*D,(t[1]-x)*P,0])),T=v.map((t=>t.map((t=>[(t[0]-y)*D,(t[1]-x)*P,0])))),C=1/0,M=-1/0,R=0;if(0!==T.length){const t=T[0];if(R=this.safestPointsMaxFilletHalfLine({points:t,checkLastWithFirst:!0,tolerance:1e-7}),t.forEach(((e,n)=>{const o=t[(n+1)%t.length],r=this.distance({startPoint:e,endPoint:o});r<C&&(C=r),r>M&&(M=r)})),l||u||h||p){const e=t[0],n=t[1],o=e[1]-n[1],r=n[0]-e[0];if(l&&!u){const t={center:[0,0,0],direction:[0,1,0],scale:i/(i-o)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}if(u&&!l){const t={center:[0,i,0],direction:[0,-1,0],scale:i/(i-o)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}if(l&&u){const t={center:[0,i/2,0],direction:[0,1,0],scale:i/(i-2*o)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}if(h&&!p){const t={center:[s,0,0],direction:[1,0,0],scale:s/(s-r)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}if(p&&!h){const t={center:[0,0,0],direction:[1,0,0],scale:s/(s-r)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}if(h&&p){const t={center:[s/2,0,0],direction:[1,0,0],scale:s/(s-2*r)};T=T.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=S,S=this.stretchPointsDirFromCenter(t)}}}if(m){S=this.rotatePointsCenterAxis({points:S,center:[s/2,i/2,0],axis:[0,0,1],angle:90}),T=T.map((t=>this.rotatePointsCenterAxis({points:t,center:[s/2,i/2,0],axis:[0,0,1],angle:90})));const t=this.vector.sub({first:[i/2,s/2,0],second:[s/2,i/2,0]});S=this.translatePoints({points:S,translation:t}),T=T.map((e=>this.translatePoints({points:e,translation:t})))}if(d){let t=s/2,e=i/2;m&&(t=i/2,e=s/2);for(let n=0;n<S.length;n++)S[n][0]-=t,S[n][1]-=e;for(let n=0;n<T.length;n++)for(let o=0;o<T[n].length;o++)T[n][o][0]-=t,T[n][o][1]-=e}if(f){for(let t=0;t<S.length;t++)S[t]=[S[t][0],0,S[t][1]];for(let t=0;t<T.length;t++)for(let e=0;e<T[t].length;e++)T[t][e]=[T[t][e][0],0,T[t][e][1]]}if(m){const e=this.lists.groupNth({list:T.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),n=this.lists.flipLists({list:e});n.forEach((t=>t.reverse())),T=n.flat();const o=this.lists.groupNth({list:S.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:o});r.forEach((t=>t.reverse())),S=r.flat()}return{centers:S,hexagons:T,shortestDistEdge:C,longestDistEdge:M,maxFilletRadius:R}}maxFilletRadius(t){const{start:e,center:n,end:o,tolerance:r=1e-7}=t,s=this.vector.sub({first:e,second:o}),i=this.vector.sub({first:n,second:o}),a=this.vector.length({vector:s}),c=this.vector.length({vector:i});if(a<r||c<r)return 0;const l=this.vector.normalized({vector:s}),u=this.vector.normalized({vector:i});if(!l||!u)return 0;const h=Math.max(-1,Math.min(1,this.vector.dot({first:l,second:u})));if(h>1-r)return 0;if(h<-1+r)return 0;const p=Math.acos(h),m=Math.tan(p/2);return m<r?0:Math.min(a,c)*m}maxFilletRadiusHalfLine(t){const{start:e,center:n,end:o,tolerance:r=1e-7}=t,s=this.vector.sub({first:e,second:o}),i=this.vector.sub({first:n,second:o}),a=this.vector.length({vector:s}),c=this.vector.length({vector:i});if(a<r||c<r)return 0;const l=this.vector.normalized({vector:s}),u=this.vector.normalized({vector:i});if(!l||!u)return 0;const h=Math.max(-1,Math.min(1,this.vector.dot({first:l,second:u})));if(h>1-r||h<-1+r)return 0;const p=Math.acos(h),m=Math.tan(p/2);return m<r?0:Math.min(a/2,c/2)*m}maxFilletsHalfLine(t){const{points:e,checkLastWithFirst:n=!1,tolerance:o=1e-7}=t,r=e.length,s=[];if(r<3)return s;for(let t=1;t<r-1;t++){const n=e[t-1],r=e[t],i={start:n,center:e[t+1],end:r,tolerance:o};s.push(this.maxFilletRadiusHalfLine(i))}if(n&&r>=3){const t=e[r-1],n=e[0],i={start:t,center:e[1],end:n,tolerance:o};s.push(this.maxFilletRadiusHalfLine(i));const a=e[r-2],c=e[r-1],l={start:a,center:e[0],end:c,tolerance:o};s.push(this.maxFilletRadiusHalfLine(l))}return s}safestPointsMaxFilletHalfLine(t){const e=this.maxFilletsHalfLine(t);if(0===e.length)return 0;const n=Math.min(...e);return Math.max(0,n)}removeConsecutiveDuplicates(t){return this.geometryHelper.removeConsecutivePointDuplicates(t.points,t.checkFirstAndLast,t.tolerance)}normalFromThreePoints(t){const e=t.point1,n=t.point2,o=t.point3;if(!e||!n||!o||3!==e.length||3!==n.length||3!==o.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const r=n[0]-e[0],s=n[1]-e[1],i=n[2]-e[2],a=o[0]-e[0],c=o[1]-e[1],l=o[2]-e[2];let u=s*l-i*c,h=i*a-r*l,p=r*c-s*a;if(0!==u||0!==h||0!==p)return t.reverseNormal&&(u=-u,h=-h,p=-p),this.vector.normalized({vector:[u,h,p]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(t){let e,n,o=Number.MAX_SAFE_INTEGER;for(let r=0;r<t.points.length;r++){const s=t.points[r],i=this.distance({startPoint:t.point,endPoint:s});i<o&&(o=i,e=r,n=s)}return{index:e+1,distance:o,point:n}}twoPointsAlmostEqual(t){const e=t.point1,n=t.point2;return this.distance({startPoint:e,endPoint:n})<t.tolerance}sortPoints(t){return[...t.points].sort(((t,e)=>t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]))}getRegularHexagonVertices(t,e){const n=[],o=t[0],r=t[1],s=t[2],i=Math.PI/3;for(let t=0;t<6;t++){const a=i*t;n.push([o+e*Math.sin(a),r+e*Math.cos(a),s])}return n}}class D{constructor(t,e){this.math=t,this.geometryHelper=e}removeAllDuplicateVectors(t){return this.geometryHelper.removeAllDuplicateVectors(t.vectors,t.tolerance)}removeConsecutiveDuplicateVectors(t){return this.geometryHelper.removeConsecutiveVectorDuplicates(t.vectors,t.checkFirstAndLast,t.tolerance)}vectorsTheSame(t){return this.geometryHelper.vectorsTheSame(t.vec1,t.vec2,t.tolerance)}angleBetween(t){return this.math.radToDeg({number:Math.acos(this.dot({first:t.first,second:t.second})/(this.norm({vector:t.first})*this.norm({vector:t.second})))})}angleBetweenNormalized2d(t){const e=t.first[0]*t.second[1]-t.first[1]*t.second[0];return this.math.radToDeg({number:Math.atan2(e,this.dot({first:t.first,second:t.second}))})}positiveAngleBetween(t){const e=this.signedAngleBetween(t);return e<0?360+e:e}addAll(t){const e=[];for(let n=0;n<t.vectors[0].length;n++){let o=0;for(const e of t.vectors)o+=e[n];e.push(o)}return e}add(t){const e=[];for(let n=0;n<t.first.length;n++)e.push(t.first[n]+t.second[n]);return e}all(t){return t.vector.every((t=>t))}cross(t){const e=[];return e.push(t.first[1]*t.second[2]-t.first[2]*t.second[1]),e.push(t.first[2]*t.second[0]-t.first[0]*t.second[2]),e.push(t.first[0]*t.second[1]-t.first[1]*t.second[0]),e}distSquared(t){let e=0;for(let n=0;n<t.first.length;n++)e+=Math.pow(t.first[n]-t.second[n],2);return e}dist(t){return Math.sqrt(this.distSquared(t))}div(t){const e=[];for(let n=0;n<t.vector.length;n++)e.push(t.vector[n]/t.scalar);return e}domain(t){return t.vector[t.vector.length-1]-t.vector[0]}dot(t){let e=0;for(let n=0;n<t.first.length;n++)e+=t.first[n]*t.second[n];return e}finite(t){return t.vector.map((t=>isFinite(t)))}isZero(t){return 0===this.norm({vector:t.vector})}lerp(t){return this.add({first:this.mul({vector:t.first,scalar:t.fraction}),second:this.mul({vector:t.second,scalar:1-t.fraction})})}max(t){return Math.max(...t.vector)}min(t){return Math.min(...t.vector)}mul(t){const e=[];for(let n=0;n<t.vector.length;n++)e.push(t.vector[n]*t.scalar);return e}neg(t){const e=[];for(let n=0;n<t.vector.length;n++)e.push(-t.vector[n]);return e}normSquared(t){return this.dot({first:t.vector,second:t.vector})}norm(t){const e=this.normSquared(t);return 0!==e?Math.sqrt(e):e}normalized(t){if(!(this.length({vector:t.vector})<=1e-8))return this.div({scalar:this.norm(t),vector:t.vector})}onRay(t){return this.add({first:t.point,second:this.mul({vector:t.vector,scalar:t.distance})})}vectorXYZ(t){return[t.x,t.y,t.z]}vectorXY(t){return[t.x,t.y]}range(t){const e=[];for(let n=0;n<t.max;n++)e.push(n);return e}signedAngleBetween(t){const e=this.cross({first:t.first,second:t.second}),n=this.norm({vector:t.first})*this.norm({vector:t.second}),o=this.dot({first:t.first,second:t.second}),r=this.norm({vector:e})/n,s=o/n,i=Math.atan2(r,s),a=this.dot({first:t.reference,second:e})>0?i:2*Math.PI-i;return this.math.radToDeg({number:a})}span(t){const e=[];for(let n=t.min;n<=t.max;n+=t.step)e.push(n);return e}spanEaseItems(t){const e=[];for(let n=0;n<t.nrItems;n++){const o=1*n/(t.nrItems-1);e.push(this.math.ease({x:o,ease:t.ease,min:t.min,max:t.max}))}return t.intervals?e.map(((t,e,n)=>0===e?t:t-n[e-1])):e}spanLinearItems(t){const e=[],n=t.max-t.min;for(let o=0;o<t.nrItems;o++){const r=n*o/(t.nrItems-1);e.push(r+t.min)}return e}sub(t){const e=[];for(let n=0;n<t.first.length;n++)e.push(t.first[n]-t.second[n]);return e}sum(t){return t.vector.reduce(((t,e)=>t+e),0)}lengthSq(t){const e=t.vector;return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}length(t){return Math.sqrt(this.lengthSq(t))}}class P{constructor(t,e){this.vector=t,this.math=e}rotationCenterAxis(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationAxis(t.axis,this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterX(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationX(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterY(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationY(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationZ(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterYawPitchRoll(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:t.yaw}),this.math.degToRad({number:t.pitch}),this.math.degToRad({number:t.roll})),this.translation(t.center[0],t.center[1],t.center[2])]}scaleCenterXYZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2]),this.translation(t.center[0],t.center[1],t.center[2])]}scaleXYZ(t){return[this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2])]}stretchDirFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.stretchDirection(t.direction,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}uniformScale(t){return[this.scaling(t.scale,t.scale,t.scale)]}uniformScaleFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scale,t.scale,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}translationXYZ(t){return[this.translation(t.translation[0],t.translation[1],t.translation[2])]}translationsXYZ(t){return t.translations.map((t=>[this.translation(t[0],t[1],t[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(t,e,n){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1]}scaling(t,e,n){return[t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1]}rotationAxis(t,e){const n=Math.sin(-e),o=Math.cos(-e),r=1-o,s=this.vector.normalized({vector:t}),i=s[0],a=s[1],c=s[2],l=this.identity();return l[0]=i*i*r+o,l[1]=i*a*r-c*n,l[2]=i*c*r+a*n,l[3]=0,l[4]=a*i*r+c*n,l[5]=a*a*r+o,l[6]=a*c*r-i*n,l[7]=0,l[8]=c*i*r-a*n,l[9]=c*a*r+i*n,l[10]=c*c*r+o,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}rotationX(t){const e=Math.sin(t),n=Math.cos(t);return[1,0,0,0,0,n,e,0,0,-e,n,0,0,0,0,1]}rotationY(t){const e=Math.sin(t),n=Math.cos(t);return[n,0,-e,0,0,1,0,0,e,0,n,0,0,0,0,1]}rotationZ(t){const e=Math.sin(t),n=Math.cos(t);return[n,e,0,0,-e,n,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(t,e,n){const o=.5*n,r=.5*e,s=.5*t,i=Math.sin(o),a=Math.cos(o),c=Math.sin(r),l=Math.cos(r),u=Math.sin(s),h=Math.cos(s),p=h*c*a+u*l*i,m=u*l*a-h*c*i,d=h*l*i-u*c*a,f=h*l*a+u*c*i;return this.rotationMatrixFromQuat(p,m,d,f)}rotationMatrixFromQuat(t,e,n,o){const r=t*t,s=e*e,i=n*n,a=t*e,c=n*o,l=n*t,u=e*o,h=e*n,p=t*o,m=this.identity();return m[0]=1-2*(s+i),m[1]=2*(a+c),m[2]=2*(l-u),m[3]=0,m[4]=2*(a-c),m[5]=1-2*(i+r),m[6]=2*(h+p),m[7]=0,m[8]=2*(l+u),m[9]=2*(h-p),m[10]=1-2*(s+r),m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}stretchDirection(t,e){const n=this.vector.normalized({vector:t}),[o,r,s]=n;if(isNaN(o)||0===o&&0===r&&0===s)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const i=e-1;return[1+i*o*o,i*r*o,i*s*o,0,i*o*r,1+i*r*r,i*s*r,0,i*o*s,i*r*s,1+i*s*s,0,0,0,0,1]}}class S{constructor(){this.getArrayDepth=t=>Array.isArray(t)?1+Math.max(...t.map(this.getArrayDepth)):0}transformControlPoints(t,e){return this.getFlatTransformations(t).forEach((t=>{e=this.transformPointsByMatrixArray(e,t)})),e}getFlatTransformations(t){let e=[];return 3===this.getArrayDepth(t)?t.forEach((t=>{e.push(...t)})):e=t,e}transformPointsByMatrixArray(t,e){return this.transformPointsCoordinates(t,e)}transformPointsCoordinates(t,e){const n=[];for(const o of t){const t=this.transformCoordinates(o[0],o[1],o[2],e);n.push(t)}return n}removeAllDuplicateVectors(t,e=1e-7){const n=[];return t.forEach((t=>{n.some((n=>this.vectorsTheSame(t,n,e)))||n.push(t)})),n}removeConsecutiveVectorDuplicates(t,e=!0,n=1e-7){const o=[];if(t.length>1){for(let e=1;e<t.length;e++){const r=t[e],s=t[e-1];this.vectorsTheSame(r,s,n)||o.push(s),e===t.length-1&&o.push(r)}if(e){const t=o[0],e=o[o.length-1];this.vectorsTheSame(t,e,n)&&o.pop()}}else 1===t.length&&o.push(...t);return o}vectorsTheSame(t,e,n){let o=!1;if(t.length!==e.length)return o;o=!0;for(let r=0;r<t.length;r++)if(!this.approxEq(t[r],e[r],n)){o=!1;break}return o}approxEq(t,e,n){return Math.abs(t-e)<n}removeConsecutivePointDuplicates(t,e=!0,n=1e-7){const o=[];if(t.length>1){for(let e=1;e<t.length;e++){const r=t[e],s=t[e-1];this.arePointsTheSame(r,s,n)||o.push(s),e===t.length-1&&o.push(r)}if(e){const t=o[0],e=o[o.length-1];this.arePointsTheSame(t,e,n)&&o.pop()}}else 1===t.length&&o.push(...t);return o}arePointsTheSame(t,e,n){let o=!1;return 2===t.length&&2===e.length?this.approxEq(t[0],e[0],n)&&this.approxEq(t[1],e[1],n)&&(o=!0):3===t.length&&3===e.length&&this.approxEq(t[0],e[0],n)&&this.approxEq(t[1],e[1],n)&&this.approxEq(t[2],e[2],n)&&(o=!0),o}transformCoordinates(t,e,n,o){const r=o,s=t*r[0]+e*r[4]+n*r[8]+r[12],i=t*r[1]+e*r[5]+n*r[9]+r[13],a=t*r[2]+e*r[6]+n*r[10]+r[14],c=1/(t*r[3]+e*r[7]+n*r[11]+r[15]);return[s*c,i*c,a*c]}}class T{constructor(t){this.jscad=t}expand(t){const e=t.geometry.length&&t.geometry.length>0?t.geometry:[t.geometry];return t.corners||(t.corners=r.solidCornerTypeEnum.round),this.jscad.expansions.expand({delta:t.delta,corners:t.corners,segments:t.segments},...e)}offset(t){const e=t.geometry.length&&t.geometry.length>0?t.geometry:[t.geometry];return t.corners||(t.corners=r.solidCornerTypeEnum.edge),this.jscad.expansions.offset({delta:t.delta,corners:t.corners,segments:t.segments},...e)}}class C{constructor(t){this.jscad=t}intersect(t){return this.jscad.booleans.intersect(...t.meshes)}subtract(t){return this.jscad.booleans.subtract(...t.meshes)}union(t){return this.jscad.booleans.union(...t.meshes)}intersectTwo(t){const e=[t.first,t.second];return this.jscad.booleans.intersect(...e)}subtractTwo(t){const e=[t.first,t.second];return this.jscad.booleans.subtract(...e)}unionTwo(t){const e=[t.first,t.second];return this.jscad.booleans.union(...e)}subtractFrom(t){const e=[t.from,...t.meshes];return this.jscad.booleans.subtract(...e)}}class M{constructor(t,e,n){this.jscad=t,this.geometryHelper=e,this.math=n}extrudeLinear(t){const e=t.geometry.length&&t.geometry.length>0?t.geometry:[t.geometry];return this.jscad.extrusions.extrudeLinear({height:t.height,twistAngle:this.math.degToRad({number:t.twistAngle}),twistSteps:t.twistSteps},...e)}extrudeRectangular(t){const e=t.geometry.length&&t.geometry.length>0?t.geometry:[t.geometry];return this.jscad.extrusions.extrudeRectangular({height:t.height,size:t.size},...e)}extrudeRectangularPoints(t){const e=t.points.map((t=>[t[0],t[1]])),n=this.geometryHelper.removeConsecutiveVectorDuplicates(e),o=this.jscad.geometries.path2.fromPoints({},n);return this.extrudeRectangular({height:t.height,size:t.size,geometry:o})}extrudeRotate(t){const e={angle:this.math.degToRad({number:t.angle}),startAngle:this.math.degToRad({number:t.startAngle}),overflow:"cap",segments:t.segments};return this.jscad.extrusions.extrudeRotate(e,t.polygon)}}class R{constructor(t,e,n){this.jscad=t,this.geometryHelper=e,this.math=n}createFromPoints(t){const e=t.points.map((t=>[t[0],t[1]]));return this.removeDuplicatesAndCreateFromPoints(e,t.closed)}createPathsFromPoints(t){return t.pointsLists.map((t=>{const e=t.map((t=>[t[0],t[1]]));return e.length>1&&this.geometryHelper.vectorsTheSame(e[0],e[e.length-1],1e-5)?this.removeDuplicatesAndCreateFromPoints(e,!0):this.removeDuplicatesAndCreateFromPoints(e,!1)}))}createFromPolyline(t){const e=t.polyline.points.map((t=>[t[0],t[1]]));return this.removeDuplicatesAndCreateFromPoints(e,t.closed)}createEmpty(){return this.jscad.geometries.path2.create()}close(t){return this.jscad.geometries.path2.close(t.path)}appendPoints(t){const e=t.points.map((t=>[t[0],t[1]])),n=this.geometryHelper.removeConsecutiveVectorDuplicates(e);return this.jscad.geometries.path2.appendPoints(n,t.path)}appendPolyline(t){const e=t.polyline.points.map((t=>[t[0],t[1]]));return this.appendPoints({points:e,path:t.path})}appendArc(t){const e=[t.endPoint[0],t.endPoint[1]],n=[t.radiusX,t.radiusY];return this.jscad.geometries.path2.appendArc({endpoint:e,radius:n,xaxisrotation:this.math.degToRad({number:t.xAxisRotation}),clockwise:t.clockwise,large:t.large,segments:t.segments},t.path)}removeDuplicatesAndCreateFromPoints(t,e){const n=this.geometryHelper.removeConsecutiveVectorDuplicates(t);let o=this.jscad.geometries.path2.fromPoints({},n);return e&&(o=this.jscad.geometries.path2.close(o)),o}}class O{constructor(t,e,n){this.jscad=t,this.geometryHelper=e,this.math=n}createFromPoints(t){const e=t.points.map((t=>[t[0],t[1]]));return this.removeDuplicatesAndCreateFromPoints(e)}createFromPolyline(t){const e=t.polyline.points.map((t=>[t[0],t[1]]));return this.removeDuplicatesAndCreateFromPoints(e)}createFromCurve(t){const e=t.curve.tessellate().map((t=>[t[0],t[1]]));return this.removeDuplicatesAndCreateFromPoints(e)}createFromPath(t){return this.removeDuplicatesAndCreateFromPoints(t.path.points)}circle(t){return this.jscad.primitives.circle({center:t.center,radius:t.radius,segments:t.segments})}ellipse(t){return this.jscad.primitives.ellipse({center:t.center,radius:[t.radius[0],t.radius[1]],segments:t.segments})}rectangle(t){return this.jscad.primitives.rectangle({center:[t.center[0],t.center[1]],size:[t.width,t.length]})}roundedRectangle(t){return this.jscad.primitives.roundedRectangle({center:[t.center[0],t.center[1]],size:[t.width,t.length],roundRadius:t.roundRadius,segments:t.segments})}square(t){return this.jscad.primitives.square({center:[t.center[0],t.center[1]],size:t.size})}star(t){return this.jscad.primitives.star({center:[t.center[0],t.center[1]],vertices:t.vertices,density:t.density,outerRadius:t.outerRadius,innerRadius:t.innerRadius,startAngle:this.math.degToRad({number:t.startAngle})})}removeDuplicatesAndCreateFromPoints(t){const e=this.geometryHelper.removeConsecutiveVectorDuplicates(t);return this.jscad.primitives.polygon({points:e})}}class I{constructor(t,e){this.math=e,this.jscad=t}cube(t){return this.jscad.primitives.cube({center:[t.center[0],t.center[1],t.center[2]],size:t.size})}cubesOnCenterPoints(t){return t.centers.map((e=>this.cube({center:e,size:t.size})))}cuboid(t){return this.jscad.primitives.cuboid({center:[t.center[0],t.center[1],t.center[2]],size:[t.width,t.height,t.length]})}cuboidsOnCenterPoints(t){return t.centers.map((e=>this.cuboid({center:e,width:t.width,length:t.length,height:t.height})))}cylinderElliptic(t){return this.jscad.primitives.cylinderElliptic({center:[t.center[0],t.center[1],t.center[2]],height:t.height,startRadius:[t.startRadius[0],t.startRadius[1]],endRadius:[t.endRadius[0],t.endRadius[1]],segments:t.segments})}cylinderEllipticOnCenterPoints(t){return t.centers.map((e=>this.cylinderElliptic({center:e,height:t.height,startRadius:t.startRadius,endRadius:t.endRadius,segments:t.segments})))}cylinder(t){return this.jscad.primitives.cylinder({center:[t.center[0],t.center[1],t.center[2]],height:t.height,radius:t.radius,segments:t.segments})}cylindersOnCenterPoints(t){return t.centers.map((e=>this.cylinder({center:e,height:t.height,radius:t.radius,segments:t.segments})))}ellipsoid(t){return this.jscad.primitives.ellipsoid({center:[t.center[0],t.center[1],t.center[2]],radius:[t.radius[0],t.radius[1],t.radius[2]],segments:t.segments,axes:[[-1,0,0],[0,-1,0],[0,0,-1]]})}ellipsoidsOnCenterPoints(t){return t.centers.map((e=>this.ellipsoid({center:e,radius:t.radius,segments:t.segments})))}geodesicSphere(t){let e=this.jscad.primitives.geodesicSphere({radius:t.radius,frequency:t.frequency});return e=this.jscad.transforms.translate([t.center[0],t.center[1],t.center[2]],e),e}geodesicSpheresOnCenterPoints(t){return t.centers.map((e=>this.geodesicSphere({center:e,radius:t.radius,frequency:t.frequency})))}roundedCuboid(t){return this.jscad.primitives.roundedCuboid({center:[t.center[0],t.center[1],t.center[2]],size:[t.width,t.height,t.length],roundRadius:t.roundRadius,segments:t.segments})}roundedCuboidsOnCenterPoints(t){return t.centers.map((e=>this.roundedCuboid({center:e,width:t.width,height:t.height,length:t.length,roundRadius:t.roundRadius,segments:t.segments})))}roundedCylinder(t){return this.jscad.primitives.roundedCylinder({center:[t.center[0],t.center[1],t.center[2]],height:t.height,radius:t.radius,roundRadius:t.roundRadius,segments:t.segments})}roundedCylindersOnCenterPoints(t){return t.centers.map((e=>this.roundedCylinder({center:e,radius:t.radius,roundRadius:t.roundRadius,segments:t.segments,height:t.height})))}sphere(t){return this.jscad.primitives.sphere({center:[t.center[0],t.center[1],t.center[2]],radius:t.radius,segments:t.segments})}spheresOnCenterPoints(t){return t.centers.map((e=>this.sphere({center:e,radius:t.radius,segments:t.segments})))}torus(t){return this.jscad.primitives.torus({innerRadius:t.innerRadius,outerRadius:t.outerRadius,innerSegments:t.innerSegments,outerSegments:t.outerSegments,innerRotation:this.math.degToRad({number:t.innerRotation}),outerRotation:this.math.degToRad({number:t.outerRotation}),startAngle:this.math.degToRad({number:t.startAngle})})}fromPolygonPoints(t){const e=t.polygonPoints.map((t=>t.reverse()));return this.jscad.geometries.geom3.fromPoints(e)}}class L{constructor(t){this.jscad=t}cylindricalText(t){const e=this.createVectorText(t);return this.adjustTextToBeOnCenter(e),e.map((e=>{const n=e.map((e=>this.jscad.primitives.cylinder({center:[e[0],e[1],0],height:t.extrusionHeight,radius:t.extrusionSize,segments:t.segments})));return this.jscad.hulls.hullChain(...n)}))}sphericalText(t){const e=this.createVectorText(t);return this.adjustTextToBeOnCenter(e),e.map((e=>{const n=e.map((e=>this.jscad.primitives.sphere({center:[e[0],e[1],0],radius:t.radius,segments:t.segments})));return this.jscad.hulls.hullChain(...n)}))}adjustTextToBeOnCenter(t){let e=0;t.forEach((t=>{t.forEach((t=>{t[0]>e&&(e=t[0])}))}));const n=e/2;t.forEach((t=>{t.forEach((t=>{let e=t[0];e-=n,t[0]=e}))}))}createVectorText(t){return this.jscad.text.vectorText({input:t.text,xOffset:t.xOffset,yOffset:t.yOffset,height:t.height,lineSpacing:t.lineSpacing,letterSpacing:t.letterSpacing,align:t.align,extrudeOffset:t.extrudeOffset})}}class B{constructor(t){this.jscad=t}hullChain(t){return this.jscad.hulls.hullChain(...t.meshes)}hull(t){return this.jscad.hulls.hull(...t.meshes)}}class N{constructor(t){this.jscad=t}colorize(t){const e=t.geometry,n=t.color;return this.jscad.colors.colorize(this.jscad.colors.hexToRgb(n),e)}}class k{constructor(t){this.getArrayDepth=t=>Array.isArray(t)?1+Math.max(...t.map(this.getArrayDepth)):0;const e=new S,n=new E,o=new D(n,e),r=new P(o,n),s=new A;this.point=new w(e,r,o,s),this.booleans=new C(t),this.expansions=new T(t),this.extrusions=new M(t,e,n),this.hulls=new B(t),this.path=new R(t,e,n),this.polygon=new O(t,e,n),this.shapes=new I(t,n),this.text=new L(t),this.colors=new N(t),this.jscad=t}toPolygonPoints(t){const e=this.shapeToMesh({mesh:t.mesh});if(!e||!e.positions||!e.indices)throw new Error("Invalid input: 'data', 'data.positions', and 'data.indices' must be provided.");const{positions:n,indices:o}=e;if(n.length%3!=0)throw new Error(`Invalid input: 'positions' array length (${n.length}) must be a multiple of 3.`);if(o.length%3!=0)throw new Error(`Invalid input: 'indices' array length (${o.length}) must be a multiple of 3.`);if(0===n.length)return[];if(0===o.length)return[];const r=[],s=n.length/3;for(let e=0;e<o.length;e+=3){const i=o[e],a=o[e+1],c=o[e+2];if(i>=s||a>=s||c>=s||i<0||a<0||c<0){console.error(`Invalid vertex index found in 'indices' array at triangle starting at index ${e}. Max vertex index is ${s-1}. Indices: ${i}, ${a}, ${c}. Skipping triangle.`);continue}const l=3*i,u=3*a,h=3*c,p=[n[l],n[l+1],n[l+2]],m=[n[u],n[u+1],n[u+2]],d=[n[h],n[h+1],n[h+2]],f=t.mesh.transforms;let g=[p,m,d];2===this.getArrayDepth(f)?f.forEach((t=>{g=this.point.transformPoints({points:g,transformation:[t]})})):3===this.getArrayDepth(f)?f.forEach((t=>{t.forEach((t=>{g=this.point.transformPoints({points:g,transformation:[t]})}))})):g=this.point.transformPoints({points:g,transformation:[f]});const v=g;r.push(v)}return r}shapesToMeshes(t){return t.meshes.map((e=>this.shapeToMesh(Object.assign(Object.assign({},t),{mesh:e}))))}shapeToMesh(t){let e=[];if(t.mesh.toPolygons)e=t.mesh.toPolygons();else if(t.mesh.polygons)e=t.mesh.polygons;else if(t.mesh.sides||t.mesh.vertices){const n=this.extrusions.extrudeLinear({height:.001,twistAngle:0,twistSteps:1,geometry:t.mesh});n.toPolygons?e=n.toPolygons():n.polygons&&(e=n.polygons)}const n=[],o=[];let r=0;for(const t of e)if(3===t.vertices.length)t.vertices.forEach((t=>{n.push(t[0],t[1],t[2]),o.push(r),r++}));else{const e=[],s=t.vertices,i=s[0];for(let t=s.length-3;t>=0;t--)e.push([i,s[t+1],s[t+2]]);e.forEach(((t,e)=>{t.forEach((t=>{n.push(t[0],t[1],t[2]),o.push(r),r++}))}))}return{positions:n,normals:[],indices:o,transforms:t.mesh.transforms}}transformSolids(t){return t.meshes.map((e=>this.transformSolid({mesh:e,transformation:t.transformation})))}transformSolid(t){const e=t.transformation;let n=this.jscad.geometries.geom3.clone(t.mesh);return 2===this.getArrayDepth(e)?e.forEach((t=>{n=this.jscad.transforms.transform(t,n)})):3===this.getArrayDepth(e)?e.forEach((t=>{t.forEach((t=>{n=this.jscad.transforms.transform(t,n)}))})):n=this.jscad.transforms.transform(e,n),n}downloadSolidSTL(t){const e=this.jscad.STLSERIALIZER.serialize({binary:!0},t.mesh);return{blob:new Blob(e,{type:"application/sla"})}}downloadGeometryDxf(t){const e=t.options?t.options:{},n=this.jscad.DXFSERIALIZER.serialize(e,t.geometry);return{blob:new Blob(n)}}downloadGeometry3MF(t){const e=t.options?t.options:{},n=this.jscad.THREEMFSERIALIZER.serialize(e,t.geometry);return{blob:new Blob(n)}}downloadSolidsSTL(t){const e=this.jscad.STLSERIALIZER.serialize({binary:!0},...t.meshes);return{blob:new Blob(e,{type:"application/sla"})}}}let $,F;Promise.resolve().then(n.bind(n,903)).then((function(t){var e;e=t.default(),F=new x,$=new k(e),postMessage("jscad-initialised"),postMessage("jscad-initialised")})),addEventListener("message",(function(t){((t,e)=>{let n;e("busy");try{if("startedTheRun"!==t.action.functionName&&"cleanAllCache"!==t.action.functionName){Object.keys(t.action.inputs).forEach((e=>{const n=t.action.inputs[e];if(n&&n.type&&"jscad-geometry"===n.type&&n.hash){const n=F.checkCache(t.action.inputs[e].hash);if(!n)throw new Error(`Geometry with hash ${t.action.inputs[e].hash} not found in cache. The cache may have been cleaned. Please regenerate the geometry.`);t.action.inputs[e]=n}n&&Array.isArray(n)&&n.length>0&&(n[0].type&&"jscad-geometry"===n[0].type&&n[0].hash?t.action.inputs[e]=t.action.inputs[e].map((t=>{const e=F.checkCache(t.hash);if(!e)throw new Error(`Geometry with hash ${t.hash} not found in cache. The cache may have been cleaned. Please regenerate the geometry.`);return e})):Array.isArray(n[0])&&n[0][0].type&&"jscad-geometry"===n[0][0].type&&n[0][0].hash&&(t.action.inputs[e]=t.action.inputs[e].map((t=>t.map((t=>{const e=F.checkCache(t.hash);if(!e)throw new Error(`Geometry with hash ${t.hash} not found in cache. The cache may have been cleaned. Please regenerate the geometry.`);return e}))))))}));const e=t.action.functionName.split(".");n=2===e.length?F.cacheOp(t.action,(()=>$[e[0]][e[1]](t.action.inputs))):F.cacheOp(t.action,(()=>$[t.action.functionName](t.action.inputs)))}"startedTheRun"===t.action.functionName&&(F&&Object.keys(F.usedHashes).length>1e4&&F.cleanAllCache(),n={}),"cleanAllCache"===t.action.functionName&&(F.cleanAllCache(),n={}),e({uid:t.uid,result:n})}catch(n){let o,r;t&&t.action&&t.action.inputs&&(o=`Input values were: {${Object.keys(t.action.inputs).map((e=>`${e}: ${t.action.inputs[e]}`)).join(",")}}. `),t&&t.action&&t.action.functionName&&(r=`- ${t.action.functionName}`),e({uid:t.uid,result:void 0,error:`JSCAD computation failed when executing function ${r}. ${o}Original message: ${n}`})}})(t.data,postMessage)}))}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(903),n(234)})();