/*! For license information please see bitbybit-dev-occt-webworker.js.LICENSE.txt */
var e,t,r={558:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});const i=r.p+"static/js/bitbybit-dev-occt.dec37f82.6cb8e820.wasm"},922:()=>{},256:()=>{}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={exports:{}};return r[e](o,o.exports,s),o.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"==typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"==typeof r.then)return r}var o=Object.create(null);s.r(o);var n={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>n[e]=()=>r[e]));return n.default=()=>r,s.d(o,n),o},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;if("string"==typeof import.meta.url&&(e=import.meta.url),!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s.b=void 0,(()=>{var e={};s.r(e),s.d(e,{Base:()=>pe,Color:()=>oe,Dates:()=>fe,IO:()=>ye,Line:()=>ve,Lists:()=>ne,Logic:()=>ae,Math:()=>ce,Mesh:()=>me,OCCT:()=>Be,Point:()=>he,Polyline:()=>ge,Text:()=>le,Transforms:()=>ue,Vector:()=>de});var t={};s.r(t),s.d(t,{LodDto:()=>Yt,lodEnum:()=>Gt});var r={};s.r(r),s.d(r,{Part:()=>Xt});var i={};s.r(i),s.d(i,{SerenitySwirlData:()=>Qt,SerenitySwirlDto:()=>Zt});var o={};s.r(o),s.d(o,{ArabicArchwayData:()=>er,ArabicArchwayDrawingPart:()=>tr,ArabicArchwayDrawingPartShapes:()=>rr,ArabicArchwayDto:()=>Kt,ArabicArchwayDtoBase:()=>Jt});var n={};s.r(n),s.d(n,{ArabicArchway:()=>o,SerenitySwirl:()=>i});var a={};s.r(a),s.d(a,{EternalLoveData:()=>or,EternalLoveDto:()=>sr,EternalLoveDtoBase:()=>ir});var c={};s.r(c),s.d(c,{EternalLove:()=>a});var h={};s.r(h),s.d(h,{CalmCupData:()=>cr,CalmCupDto:()=>ar,CalmCupDtoBase:()=>nr});var l={};s.r(l),s.d(l,{DragonCupData:()=>dr,DragonCupDto:()=>lr,DragonCupDtoBase:()=>hr,DragonCupModelDto:()=>ur});var d={};s.r(d),s.d(d,{CalmCup:()=>h,DragonCup:()=>l});var u={};s.r(u),s.d(u,{PhoneNestData:()=>vr,PhoneNestDrawDto:()=>wr,PhoneNestDrawingPart:()=>gr,PhoneNestDrawingPartShapes:()=>mr,PhoneNestDto:()=>fr,PhoneNestDtoBase:()=>pr,PhoneNestMainPart:()=>yr,PhoneNestModelDto:()=>Sr});var p={};s.r(p),s.d(p,{PhoneNest:()=>u});var f={};s.r(f),s.d(f,{SpicyBoxData:()=>xr,SpicyBoxDto:()=>Er,SpicyBoxDtoBase:()=>br,SpicyBoxModelDto:()=>Tr});var v={};s.r(v),s.d(v,{SpicyBox:()=>f});var g={};s.r(g),s.d(g,{Boxes:()=>v,Cups:()=>d,Desktop:()=>p,Medals:()=>c,Vases:()=>n});var m={};s.r(m),s.d(m,{DropletsPhoneHolderData:()=>Ar,DropletsPhoneHolderDrawingPart:()=>Fr,DropletsPhoneHolderDrawingPartShapes:()=>Rr,DropletsPhoneHolderDto:()=>Cr,DropletsPhoneHolderDtoBase:()=>Pr,DropletsPhoneHolderModelDto:()=>kr,DropletsPhoneHolderModelDxfDto:()=>Dr,DropletsPhoneHolderModelStepDto:()=>Or});var y={};s.r(y),s.d(y,{DropletsPhoneHolder:()=>m});var S={};s.r(S),s.d(S,{Gadgets:()=>y});var w={};s.r(w),s.d(w,{ZenHideoutData:()=>Br,ZenHideoutDrawingPart:()=>Ir,ZenHideoutDrawingPartShapes:()=>Ur,ZenHideoutDto:()=>Mr,ZenHideoutDtoBase:()=>Lr});var b={};s.r(b),s.d(b,{ZenHideout:()=>w});var E={};s.r(E),s.d(E,{BeamPart:()=>Yr,CeilingPart:()=>ii,ColumnPart:()=>qr,CornerEntranceDto:()=>oi,CornerEntrancePart:()=>ei,CornerPart:()=>$r,CornerStairDto:()=>Jr,CornerStairPart:()=>Kr,FloorPart:()=>si,Houses:()=>b,RoofBeamsPart:()=>Zr,RoofCoverOneSidedDto:()=>ti,RoofCoverPart:()=>ri,RoofPanelPart:()=>Qr,RoofPart:()=>Xr,SandwitchPanelDto:()=>Gr,SandwitchPanelFlexDto:()=>Vr,SandwitchPart:()=>zr,SandwitchPartFlex:()=>jr,WindowCornerDto:()=>Wr,WindowCornerPart:()=>Hr,WindowRectangularDto:()=>_r,WindowRectangularPart:()=>Nr});var x={};s.r(x),s.d(x,{WingtipVillaData:()=>ai,WingtipVillaDto:()=>ni});var T={};s.r(T),s.d(T,{ChirpyChaletData:()=>hi,ChirpyChaletDto:()=>ci});var P={};s.r(P),s.d(P,{ChirpyChalet:()=>T,WingtipVilla:()=>x});var C={};s.r(C),s.d(C,{BirdHouses:()=>P});var k={};s.r(k),s.d(k,{SnakeChairData:()=>ui,SnakeChairDrawDto:()=>mi,SnakeChairDrawingPart:()=>pi,SnakeChairDrawingPartShapes:()=>fi,SnakeChairDto:()=>di,SnakeChairDtoBase:()=>li,SnakeChairMainPart:()=>vi,SnakeChairModelDto:()=>gi});var D={};s.r(D),s.d(D,{SnakeChair:()=>k});var O={};s.r(O),s.d(O,{ElegantTableData:()=>wi,ElegantTableDrawDto:()=>ki,ElegantTableDrawingPart:()=>bi,ElegantTableDrawingPartShapes:()=>Ei,ElegantTableDto:()=>Si,ElegantTableDtoBase:()=>yi,ElegantTableLegByIndexDto:()=>Pi,ElegantTableLegPart:()=>xi,ElegantTableModelDto:()=>Ci,ElegantTableTopPart:()=>Ti});var A={};s.r(A),s.d(A,{GoodCoffeeTableData:()=>Ai,GoodCoffeeTableDrawDto:()=>Wi,GoodCoffeeTableDrawingPart:()=>Fi,GoodCoffeeTableDrawingPartShapes:()=>Ri,GoodCoffeeTableDto:()=>Oi,GoodCoffeeTableDtoBase:()=>Di,GoodCoffeeTableLegByIndexDto:()=>Ii,GoodCoffeeTableLegPart:()=>Li,GoodCoffeeTableModelDto:()=>Ui,GoodCoffeeTableShelfPart:()=>Mi,GoodCoffeeTableTopPart:()=>Bi});var F={};s.r(F),s.d(F,{SnakeTableData:()=>Hi,SnakeTableDrawDto:()=>$i,SnakeTableDrawingPart:()=>Gi,SnakeTableDrawingPartShapes:()=>Vi,SnakeTableDto:()=>Ni,SnakeTableDtoBase:()=>_i,SnakeTableMainPart:()=>zi,SnakeTableModelDto:()=>ji});var R={};s.r(R),s.d(R,{ElegantTable:()=>O,GoodCoffeeTable:()=>A,SnakeTable:()=>F});var L={};s.r(L),s.d(L,{Chairs:()=>D,Tables:()=>R});var M={};s.r(M),s.d(M,{Architecture:()=>E,Enums:()=>t,Furniture:()=>L,KidsCorner:()=>C,LaserCutting:()=>S,Shared:()=>r,ThreeDPrinting:()=>g});var B={};s.r(B),s.d(B,{FontDefinition:()=>rs,Text3DData:()=>es,Text3DDto:()=>Yi,Text3DFaceDefinitionDto:()=>ss,Text3DFaceDefinitionUrlDto:()=>os,Text3DFaceDefinitionUrlParsedDto:()=>ns,Text3DFaceDto:()=>Qi,Text3DFaceUrlDto:()=>Ji,Text3DFaceUrlParsedDto:()=>Ki,Text3DLetterByIndexDto:()=>ts,Text3DModelDto:()=>is,Text3DUrlDto:()=>Xi,Text3DUrlParsedDto:()=>Zi,Texts3DFaceDto:()=>as,Texts3DFaceUrlDto:()=>cs,Texts3DFaceUrlParsedDto:()=>hs,faceTextVarEnum:()=>jt,faceTypeEnum:()=>$t,fontVariantsEnum:()=>zt,fontsEnum:()=>Vt,fontsModel:()=>qi,recAlignmentEnum:()=>qt});var I={};s.r(I),s.d(I,{PyramidSimpeByIndexDto:()=>ps,PyramidSimpleAffectorsDto:()=>ds,PyramidSimpleCellPart:()=>Es,PyramidSimpleData:()=>us,PyramidSimpleDto:()=>ls,PyramidSimpleFacePart:()=>xs,PyramidSimpleModelCellDto:()=>ms,PyramidSimpleModelCellsDto:()=>vs,PyramidSimpleModelCellsIndexDto:()=>gs,PyramidSimpleModelDto:()=>fs,PyramidSimpleModelFaceCellIndexDto:()=>Ss,PyramidSimpleModelFaceCellsUIndexDto:()=>ws,PyramidSimpleModelFaceCellsVIndexDto:()=>bs,PyramidSimpleModelFaceIndexDto:()=>ys});var U={};s.r(U),s.d(U,{PyramidSimple:()=>I});var W={};s.r(W),s.d(W,{FacePatterns:()=>U});var _={};s.r(_),s.d(_,{outputShapeEnum:()=>Ts});var N,H,G={};s.r(G),s.d(G,{Enums:()=>_,Patterns:()=>W,Text3D:()=>B}),(H=N||(N={})).loading="loading",H.loaded="loaded",H.initialised="initialised",H.computing="computing";const V="occ-shape",z="occ-entity",j="shapeToMesh",$="shapesToMeshes",q="deleteShape",Y="deleteShapes",X="startedTheRun",Z="cleanAllCache",Q="addOc",J="saveShapeSTEP",K=new Set([j,$,q,Y,X,Z,Q,J]);function ee(e){return{type:V,hash:e}}class te{constructor(e){this.cacheHelper=e}resolveShapeReferences(e){return this.resolveRecursively(e)}resolveRecursively(e){if(null==e)return e;if("object"!=typeof e)return e;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return e;if("undefined"!=typeof Blob&&e instanceof Blob)throw new Error("File/Blob objects cannot be passed directly to the worker. The data should have been converted to ArrayBuffer on the main thread. This is a bug in the API layer - please report it.");if(function(e){return null!==e&&"object"==typeof e&&"type"in e&&"hash"in e&&e.type===V}(e))return this.resolveFromCache(e.hash,"shape");if(function(e){return null!==e&&"object"==typeof e&&"type"in e&&"hash"in e&&e.type===z}(e))return this.resolveFromCache(e.hash,"entity");if(Array.isArray(e))return e.map((e=>this.resolveRecursively(e)));const t={};for(const r of Object.keys(e))t[r]=this.resolveRecursively(e[r]);return t}resolveFromCache(e,t){const r=this.cacheHelper.checkCache(e);if(!r)throw new Error(`${"shape"===t?"Shape":"Entity"} with hash ${e} not found in cache. The cache may have been cleaned. Please regenerate the object.`);return r}}class re{constructor(e){this.cacheHelper=e}serializeResult(e){return this.serializeRecursively(e)}serializeRecursively(e){if(null==e)return e;if("object"!=typeof e)return e;if(ArrayBuffer.isView(e))return e;if(this.cacheHelper.isShape(e)&&!Array.isArray(e))return ee(e.hash);if(this.cacheHelper.isEntityHandle(e)&&!Array.isArray(e))return t=e.hash,{type:z,hash:t};var t;if(Array.isArray(e))return e.length>0&&this.cacheHelper.isShape(e[0])?e.map((e=>ee(e.hash))):e.map((e=>this.serializeRecursively(e)));if(this.isObjectDefinition(e))return this.serializeObjectDefinition(e);const r={};for(const t of Object.keys(e))r[t]=this.serializeRecursively(e[t]);return r}isObjectDefinition(e){if(null===e||"object"!=typeof e)return!1;const t=e;return"compound"in t&&"data"in t&&"shapes"in t&&Array.isArray(t.shapes)&&t.shapes.length>0}serializeObjectDefinition(e){return Object.assign(Object.assign({},e),{compound:ee(e.compound.hash),shapes:e.shapes.map((e=>({id:e.id,shape:ee(e.shape.hash)})))})}}class ie{callFunction(e,t,r){const i=t.split(".");let s=e;for(let e=0;e<i.length-1;e++){if(null==s||"object"!=typeof s)throw new Error(`Cannot resolve path "${t}": "${i[e]}" is not an object`);s=s[i[e]]}const o=i[i.length-1];if(null==s||"object"!=typeof s)throw new Error(`Cannot resolve path "${t}": parent is not an object`);const n=s[o];if("function"!=typeof n)throw new Error(`"${t}" is not a function`);return n.call(s,r)}}const se={[j]:(e,t)=>{const r=t.shapeResolver.resolveShapeReferences(e);return{handled:!0,result:t.openCascade.shapeToMesh(r)}},[$]:(e,t)=>{const r=e.shapes;if(!r||!Array.isArray(r)||0===r.length)throw new Error("No shapes detected");const i=t.shapeResolver.resolveShapeReferences(e);return{handled:!0,result:t.openCascade.shapesToMeshes(i)}},[q]:(e,t)=>{const r=e.shape;return t.cacheHelper.cleanCacheForHash(r.hash),{handled:!0,result:{}}},[Y]:(e,t)=>(e.shapes.forEach((e=>t.cacheHelper.cleanCacheForHash(e.hash))),{handled:!0,result:{}}),[X]:(e,t)=>(Object.keys(t.cacheHelper.usedHashes).length>1e4&&t.cacheHelper.cleanAllCache(),{handled:!0,result:{}}),[Z]:(e,t)=>(t.cacheHelper.cleanAllCache(),{handled:!0,result:{}}),[Q]:(e,t)=>{var r;return(null===(r=t.openCascade)||void 0===r?void 0:r.plugins)?Object.keys(e).forEach((r=>{t.openCascade.plugins.dependencies[r]=e[r]})):Object.keys(e).forEach((r=>{t.addPendingDependency(r,e[r])})),{handled:!0,result:void 0}},[J]:(e,t)=>{const r=t.shapeResolver.resolveShapeReferences(e);return{handled:!0,result:t.openCascade.io.saveShapeSTEP(r)}}};var oe,ne,ae,ce,he,le,de,ue,pe,fe,ve,ge,me,ye;!function(e){e.HexDto=class{constructor(e){this.color="#0000ff",void 0!==e&&(this.color=e)}},e.Rgb255Dto=class{constructor(e){this.colorRgb={r:0,g:0,b:255},void 0!==e&&(this.colorRgb=e)}},e.Rgb1Dto=class{constructor(e){this.colorRgb={r:0,g:0,b:1},void 0!==e&&(this.colorRgb=e)}},e.Rgba255Dto=class{constructor(e){this.colorRgba={r:0,g:0,b:255,a:1},void 0!==e&&(this.colorRgba=e)}},e.Rgba1Dto=class{constructor(e){this.colorRgba={r:0,g:0,b:1,a:1},void 0!==e&&(this.colorRgba=e)}},e.RgbAttomic255Dto=class{constructor(e,t,r){this.r=0,this.g=0,this.b=255,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r)}},e.RgbaAttomic255Dto=class{constructor(e,t,r,i){this.r=0,this.g=0,this.b=255,this.a=1,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r),void 0!==i&&(this.a=i)}},e.RgbAttomic1Dto=class{constructor(e,t,r){this.r=0,this.g=0,this.b=1,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r)}},e.RgbaAttomic1Dto=class{constructor(e,t,r,i){this.r=0,this.g=0,this.b=1,this.a=1,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r),void 0!==i&&(this.a=i)}},e.InvertHexDto=class{constructor(e){this.color="#0000ff",this.blackAndWhite=!1,void 0!==e&&(this.color=e)}},e.HexDtoMapped=class{constructor(e,t,r){this.color="#0000ff",this.from=0,this.to=255,void 0!==e&&(this.color=e),void 0!==t&&(this.from=t),void 0!==r&&(this.to=r)}},e.RGBObjectMaxDto=class{constructor(e,t){this.min=0,this.max=255,void 0!==e&&(this.rgb=e),void 0!==t&&(this.max=t)}},e.RGBMinMaxDto=class{constructor(e,t,r,i,s){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r),void 0!==i&&(this.min=i),void 0!==s&&(this.max=s)}},e.RGBObjectDto=class{constructor(e){void 0!==e&&(this.rgb=e)}}}(oe||(oe={})),function(e){let t;!function(e){e.first="first",e.last="last"}(t=e.firstLastEnum||(e.firstLastEnum={})),e.ListItemDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.SubListDto=class{constructor(e,t,r,i){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexStart=t),void 0!==r&&(this.indexEnd=r),void 0!==i&&(this.clone=i)}},e.ListCloneDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RepeatInPatternDto=class{constructor(e){this.clone=!0,this.lengthLimit=100,void 0!==e&&(this.list=e)}},e.SortDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.SortJsonDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.ListDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.GroupListDto=class{constructor(e,t,r){this.nrElements=2,this.keepRemainder=!1,void 0!==e&&(this.list=e),void 0!==t&&(this.nrElements=t),void 0!==r&&(this.keepRemainder=r)}},e.MultiplyItemDto=class{constructor(e,t){void 0!==e&&(this.item=e),void 0!==t&&(this.times=t)}},e.AddItemAtIndexDto=class{constructor(e,t,r,i){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.index=r),void 0!==i&&(this.clone=i)}},e.AddItemAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.AddItemsAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.items=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.RemoveItemAtIndexDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.RemoveItemsAtIndexesDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexes=t),void 0!==r&&(this.clone=r)}},e.RemoveNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.RandomThresholdDto=class{constructor(e,t,r){this.threshold=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.threshold=t),void 0!==r&&(this.clone=r)}},e.RemoveDuplicatesDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RemoveDuplicatesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.tolerance=r),void 0!==t&&(this.clone=t)}},e.GetByPatternDto=class{constructor(e,t){this.pattern=[!0,!0,!1],void 0!==e&&(this.list=e),void 0!==t&&(this.pattern=t)}},e.GetNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.GetLongestListLength=class{constructor(e){void 0!==e&&(this.lists=e)}},e.MergeElementsOfLists=class{constructor(e,t){this.level=0,void 0!==e&&(this.lists=e),void 0!==t&&(this.level=t)}},e.AddItemDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.clone=r)}},e.AddItemFirstLastDto=class{constructor(e,r,i,s){this.position=t.last,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.item=r),void 0!==i&&(this.position=i),void 0!==s&&(this.clone=s)}},e.ConcatenateDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.lists=e),void 0!==t&&(this.clone=t)}},e.IncludesDto=class{constructor(e,t){void 0!==e&&(this.list=e),void 0!==t&&(this.item=t)}},e.InterleaveDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.lists=e),void 0!==t&&(this.clone=t)}}}(ne||(ne={})),function(e){let t;!function(e){e.less="<",e.lessOrEqual="<=",e.greater=">",e.greaterOrEqual=">=",e.tripleEqual="===",e.tripleNotEqual="!==",e.equal="==",e.notEqual="!="}(t=e.BooleanOperatorsEnum||(e.BooleanOperatorsEnum={})),e.ComparisonDto=class{constructor(e,t,r){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operator=r)}},e.BooleanDto=class{constructor(e){this.boolean=!1,void 0!==e&&(this.boolean=e)}},e.BooleanListDto=class{constructor(e){void 0!==e&&(this.booleans=e)}},e.ValueGateDto=class{constructor(e,t){this.boolean=!1,void 0!==e&&(this.value=e),void 0!==t&&(this.boolean=t)}},e.TwoValueGateDto=class{constructor(e,t){void 0!==e&&(this.value1=e),void 0!==t&&(this.value2=t)}},e.RandomBooleansDto=class{constructor(e){this.length=10,this.trueThreshold=.5,void 0!==e&&(this.length=e)}},e.TwoThresholdRandomGradientDto=class{},e.ThresholdBooleanListDto=class{},e.ThresholdGapsBooleanListDto=class{}}(ae||(ae={})),function(e){let t,r,i;!function(e){e.add="add",e.subtract="subtract",e.multiply="multiply",e.divide="divide",e.power="power",e.modulus="modulus"}(t=e.mathTwoNrOperatorEnum||(e.mathTwoNrOperatorEnum={})),function(e){e.absolute="absolute",e.negate="negate",e.ln="ln",e.log10="log10",e.tenPow="tenPow",e.round="round",e.floor="floor",e.ceil="ceil",e.sqrt="sqrt",e.sin="sin",e.cos="cos",e.tan="tan",e.asin="asin",e.acos="acos",e.atan="atan",e.log="log",e.exp="exp",e.radToDeg="radToDeg",e.degToRad="degToRad"}(r=e.mathOneNrOperatorEnum||(e.mathOneNrOperatorEnum={})),function(e){e.easeInSine="easeInSine",e.easeOutSine="easeOutSine",e.easeInOutSine="easeInOutSine",e.easeInQuad="easeInQuad",e.easeOutQuad="easeOutQuad",e.easeInOutQuad="easeInOutQuad",e.easeInCubic="easeInCubic",e.easeOutCubic="easeOutCubic",e.easeInOutCubic="easeInOutCubic",e.easeInQuart="easeInQuart",e.easeOutQuart="easeOutQuart",e.easeInOutQuart="easeInOutQuart",e.easeInQuint="easeInQuint",e.easeOutQuint="easeOutQuint",e.easeInOutQuint="easeInOutQuint",e.easeInExpo="easeInExpo",e.easeOutExpo="easeOutExpo",e.easeInOutExpo="easeInOutExpo",e.easeInCirc="easeInCirc",e.easeOutCirc="easeOutCirc",e.easeInOutCirc="easeInOutCirc",e.easeInElastic="easeInElastic",e.easeOutElastic="easeOutElastic",e.easeInOutElastic="easeInOutElastic",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack",e.easeInBounce="easeInBounce",e.easeOutBounce="easeOutBounce",e.easeInOutBounce="easeInOutBounce"}(i=e.easeEnum||(e.easeEnum={})),e.ModulusDto=class{constructor(e,t){this.number=1,this.modulus=2,void 0!==e&&(this.number=e),void 0!==t&&(this.modulus=t)}},e.NumberDto=class{constructor(e){this.number=1,void 0!==e&&(this.number=e)}},e.EaseDto=class{constructor(e){this.x=.5,this.min=0,this.max=1,void 0!==e&&(this.x=e)}},e.RoundToDecimalsDto=class{constructor(e,t){this.number=1.123456,this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}},e.ActionOnTwoNumbersDto=class{constructor(e,t,r){this.first=1,this.second=1,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operation=r)}},e.TwoNumbersDto=class{constructor(e,t){this.first=1,this.second=2,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.ActionOnOneNumberDto=class{constructor(e,t){this.number=1,void 0!==e&&(this.number=e),void 0!==t&&(this.operation=t)}},e.RemapNumberDto=class{constructor(e,t,r,i,s){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==e&&(this.number=e),void 0!==t&&(this.fromLow=t),void 0!==r&&(this.fromHigh=r),void 0!==i&&(this.toLow=i),void 0!==s&&(this.toHigh=s)}},e.RandomNumberDto=class{constructor(e,t){this.low=0,this.high=1,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t)}},e.RandomNumbersDto=class{constructor(e,t,r){this.low=0,this.high=1,this.count=10,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t),void 0!==r&&(this.count=r)}},e.ToFixedDto=class{constructor(e,t){this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}},e.ClampDto=class{constructor(e,t,r){this.number=.5,this.min=0,this.max=1,void 0!==e&&(this.number=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.LerpDto=class{constructor(e,t,r){this.start=0,this.end=1,this.t=.5,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.t=r)}},e.InverseLerpDto=class{constructor(e,t,r){this.start=0,this.end=1,this.value=.5,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.value=r)}},e.WrapDto=class{constructor(e,t,r){this.number=1.5,this.min=0,this.max=1,void 0!==e&&(this.number=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.PingPongDto=class{constructor(e,t){this.t=.5,this.length=1,void 0!==e&&(this.t=e),void 0!==t&&(this.length=t)}},e.MoveTowardsDto=class{constructor(e,t,r){this.current=0,this.target=1,this.maxDelta=.1,void 0!==e&&(this.current=e),void 0!==t&&(this.target=t),void 0!==r&&(this.maxDelta=r)}}}(ce||(ce={})),function(e){e.PointDto=class{constructor(e){void 0!==e&&(this.point=e)}},e.PointXYZDto=class{constructor(e,t,r){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.PointXYDto=class{constructor(e,t){this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.TwoPointsDto=class{constructor(e,t){void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t)}},e.DrawPointDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.point=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.pointMesh=o)}},e.DrawPointsDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.pointsMesh=o)}},e.TransformPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.transformation=t)}},e.TransformPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.TranslatePointsWithVectorsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translations=t)}},e.TranslatePointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translation=t)}},e.TranslateXYZPointsDto=class{constructor(e,t,r,i){this.x=0,this.y=1,this.z=0,void 0!==e&&(this.points=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},e.ScalePointsCenterXYZDto=class{constructor(e,t,r){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.scaleXyz=r)}},e.StretchPointsDirFromCenterDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.scale=i)}},e.RotatePointsCenterAxisDto=class{constructor(e,t,r,i){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.points=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.center=i)}},e.TransformsForPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.ThreePointsNormalDto=class{constructor(e,t,r,i){this.reverseNormal=!1,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.point3=r),void 0!==i&&(this.reverseNormal=i)}},e.ThreePointsToleranceDto=class{constructor(e,t,r,i){this.tolerance=1e-7,void 0!==e&&(this.start=e),void 0!==t&&(this.center=t),void 0!==r&&(this.end=r),void 0!==i&&(this.tolerance=i)}},e.PointsMaxFilletsHalfLineDto=class{constructor(e,t,r){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.checkLastWithFirst=t),void 0!==r&&(this.tolerance=r)}},e.RemoveConsecutiveDuplicatesDto=class{constructor(e,t,r){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.tolerance=t),void 0!==r&&(this.checkFirstAndLast=r)}},e.ClosestPointFromPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.point=t)}},e.TwoPointsToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.tolerance=r)}},e.StartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t)}},e.StartEndPointsListDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoints=t)}},e.MultiplyPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.amountOfPoints=t)}},e.SpiralDto=class{constructor(e,t,r,i,s){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==e&&(this.radius=e),void 0!==t&&(this.numberPoints=t),void 0!==r&&(this.widening=r),void 0!==i&&(this.factor=i),void 0!==s&&(this.phi=s)}},e.HexGridScaledToFitDto=class{constructor(e,t,r,i,s,o){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==s&&(this.centerGrid=s),void 0!==o&&(this.pointsOnGround=o)}},e.HexGridCentersDto=class{constructor(e,t,r,i,s){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==e&&(this.nrHexagonsX=e),void 0!==t&&(this.nrHexagonsY=t),void 0!==r&&(this.radiusHexagon=r),void 0!==i&&(this.orientOnCenter=i),void 0!==s&&(this.pointsOnGround=s)}}}(he||(he={})),function(e){e.TextDto=class{constructor(e){this.text="Hello World",void 0!==e&&(this.text=e)}},e.TextSplitDto=class{constructor(e,t){this.text="a,b,c",this.separator=",",void 0!==e&&(this.text=e),void 0!==t&&(this.separator=t)}},e.TextReplaceDto=class{constructor(e,t,r){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==e&&(this.text=e),void 0!==t&&(this.search=t),void 0!==r&&(this.replaceWith=r)}},e.TextJoinDto=class{constructor(e,t){this.separator=",",void 0!==e&&(this.list=e),void 0!==t&&(this.separator=t)}},e.ToStringDto=class{constructor(e){void 0!==e&&(this.item=e)}},e.ToStringEachDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.TextFormatDto=class{constructor(e,t){this.text="Hello {0}",this.values=["World"],void 0!==e&&(this.text=e),void 0!==t&&(this.values=t)}},e.TextSearchDto=class{constructor(e,t){this.text="hello world",this.search="world",void 0!==e&&(this.text=e),void 0!==t&&(this.search=t)}},e.TextSubstringDto=class{constructor(e,t,r){this.text="hello world",this.start=0,this.end=5,void 0!==e&&(this.text=e),void 0!==t&&(this.start=t),void 0!==r&&(this.end=r)}},e.TextIndexDto=class{constructor(e,t){this.text="hello",this.index=0,void 0!==e&&(this.text=e),void 0!==t&&(this.index=t)}},e.TextPadDto=class{constructor(e,t,r){this.text="x",this.length=3,this.padString="a",void 0!==e&&(this.text=e),void 0!==t&&(this.length=t),void 0!==r&&(this.padString=r)}},e.TextRepeatDto=class{constructor(e,t){this.text="ha",this.count=3,void 0!==e&&(this.text=e),void 0!==t&&(this.count=t)}},e.TextConcatDto=class{constructor(e){this.texts=["hello"," ","world"],void 0!==e&&(this.texts=e)}},e.TextRegexDto=class{constructor(e,t,r){this.text="hello123world",this.pattern="[0-9]+",this.flags="g",void 0!==e&&(this.text=e),void 0!==t&&(this.pattern=t),void 0!==r&&(this.flags=r)}},e.TextRegexReplaceDto=class{constructor(e,t,r,i){this.text="hello123world456",this.pattern="[0-9]+",this.flags="g",this.replaceWith="X",void 0!==e&&(this.text=e),void 0!==t&&(this.pattern=t),void 0!==r&&(this.flags=r),void 0!==i&&(this.replaceWith=i)}},e.VectorCharDto=class{constructor(e,t,r,i,s){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==e&&(this.char=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.extrudeOffset=s)}},e.VectorTextDto=class{constructor(e,t,r,i,s,o,n,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.lineSpacing=s),void 0!==o&&(this.letterSpacing=o),void 0!==n&&(this.align=n),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(le||(le={})),function(e){e.TwoVectorsDto=class{constructor(e,t){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.VectorBoolDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RemoveAllDuplicateVectorsDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.tolerance=t)}},e.RemoveConsecutiveDuplicateVectorsDto=class{constructor(e,t,r){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.checkFirstAndLast=t),void 0!==r&&(this.tolerance=r)}},e.VectorsTheSameDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.vec1=e),void 0!==t&&(this.vec2=t),void 0!==r&&(this.tolerance=r)}},e.VectorDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.VectorStringDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.Vector3Dto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RangeMaxDto=class{constructor(e){void 0!==e&&(this.max=e)}},e.VectorXYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.VectorXYDto=class{constructor(e,t){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.SpanDto=class{constructor(e,t,r){this.step=.1,this.min=0,this.max=1,void 0!==e&&(this.step=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.SpanEaseItemsDto=class{constructor(e,t,r,i){this.nrItems=100,this.min=0,this.max=1,this.ease=ce.easeEnum.easeInSine,this.intervals=!1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r),void 0!==i&&(this.ease=i)}},e.SpanLinearItemsDto=class{constructor(e,t,r){this.nrItems=100,this.min=0,this.max=1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.RayPointDto=class{constructor(e,t,r){void 0!==e&&(this.point=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.vector=r)}},e.VectorsDto=class{constructor(e){void 0!==e&&(this.vectors=e)}},e.FractionTwoVectorsDto=class{constructor(e,t,r){this.fraction=.5,void 0!==e&&(this.fraction=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}},e.VectorScalarDto=class{constructor(e,t){void 0!==e&&(this.scalar=e),void 0!==t&&(this.vector=t)}},e.TwoVectorsReferenceDto=class{constructor(e,t,r){void 0!==e&&(this.reference=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}}}(de||(de={})),function(e){e.RotationCenterAxisDto=class{constructor(e,t,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.center=r)}},e.RotationCenterDto=class{constructor(e,t){this.angle=90,this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.center=t)}},e.RotationCenterYawPitchRollDto=class{constructor(e,t,r,i){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==e&&(this.yaw=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.roll=r),void 0!==i&&(this.center=i)}},e.ScaleXYZDto=class{constructor(e){this.scaleXyz=[1,1,1],void 0!==e&&(this.scaleXyz=e)}},e.StretchDirCenterDto=class{constructor(e,t,r){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.ScaleCenterXYZDto=class{constructor(e,t){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.center=e),void 0!==t&&(this.scaleXyz=t)}},e.UniformScaleDto=class{constructor(e){this.scale=1,void 0!==e&&(this.scale=e)}},e.UniformScaleFromCenterDto=class{constructor(e,t){this.scale=1,this.center=[0,0,0],void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t)}},e.TranslationXYZDto=class{constructor(e){this.translation=[0,0,0],void 0!==e&&(this.translation=e)}},e.TranslationsXYZDto=class{constructor(e){void 0!==e&&(this.translations=e)}}}(ue||(ue={})),function(e){let t,r,i,s;!function(e){e.left="left",e.center="center",e.right="right"}(t=e.horizontalAlignEnum||(e.horizontalAlignEnum={})),function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(r=e.verticalAlignmentEnum||(e.verticalAlignmentEnum={})),function(e){e.top="top",e.bottom="bottom"}(i=e.topBottomEnum||(e.topBottomEnum={})),function(e){e.topLeft="topLeft",e.topMid="topMid",e.topRight="topRight",e.midLeft="midLeft",e.midMid="midMid",e.midRight="midRight",e.bottomLeft="bottomLeft",e.bottomMid="bottomMid",e.bottomRight="bottomRight"}(s=e.basicAlignmentEnum||(e.basicAlignmentEnum={}))}(pe||(pe={})),function(e){e.DateDto=class{constructor(e){void 0!==e&&(this.date=e)}},e.DateStringDto=class{constructor(e){void 0!==e&&(this.dateString=e)}},e.DateSecondsDto=class{constructor(e,t){this.seconds=30,void 0!==e&&(this.date=e),void 0!==t&&(this.seconds=t)}},e.DateDayDto=class{constructor(e,t){this.day=1,void 0!==e&&(this.date=e),void 0!==t&&(this.day=t)}},e.DateYearDto=class{constructor(e,t){this.year=1,void 0!==e&&(this.date=e),void 0!==t&&(this.year=t)}},e.DateMonthDto=class{constructor(e,t){this.month=1,void 0!==e&&(this.date=e),void 0!==t&&(this.month=t)}},e.DateHoursDto=class{constructor(e,t){this.hours=1,void 0!==e&&(this.date=e),void 0!==t&&(this.hours=t)}},e.DateMinutesDto=class{constructor(e,t){this.minutes=1,void 0!==e&&(this.date=e),void 0!==t&&(this.minutes=t)}},e.DateMillisecondsDto=class{constructor(e,t){this.milliseconds=1,void 0!==e&&(this.date=e),void 0!==t&&(this.milliseconds=t)}},e.DateTimeDto=class{constructor(e,t){this.time=1,void 0!==e&&(this.date=e),void 0!==t&&(this.time=t)}},e.CreateFromUnixTimeStampDto=class{constructor(e){this.unixTimeStamp=1,void 0!==e&&(this.unixTimeStamp=e)}},e.CreateDateDto=class{constructor(e,t,r,i,s,o,n){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==e&&(this.year=e),void 0!==t&&(this.month=t),void 0!==r&&(this.day=r),void 0!==i&&(this.hours=i),void 0!==s&&(this.minutes=s),void 0!==o&&(this.seconds=o),void 0!==n&&(this.milliseconds=n)}}}(fe||(fe={})),function(e){e.LinePointsDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineStartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoints=e),void 0!==t&&(this.endPoints=t)}},e.DrawLineDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.line=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.lineMesh=o)}},e.DrawLinesDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.linesMesh=o)}},e.PointsLinesDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.LineDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.SegmentDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.LinesDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.LineLineIntersectionDto=class{constructor(e,t,r){this.checkSegmentsOnly=!0,void 0!==e&&(this.line1=e),void 0!==t&&(this.line2=t),void 0!==r&&(this.tolerance=r)}},e.PointOnLineDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.line=e),void 0!==t&&(this.param=t)}},e.TransformLineDto=class{constructor(e,t){void 0!==e&&(this.line=e),void 0!==t&&(this.transformation=t)}},e.TransformsLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}},e.TransformLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}}}(ve||(ve={})),function(e){e.PolylineCreateDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylinePropertiesDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.TransformPolylineDto=class{constructor(e,t){void 0!==e&&(this.polyline=e),void 0!==t&&(this.transformation=t)}},e.DrawPolylineDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polyline=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.polylineMesh=o)}},e.DrawPolylinesDto=class{constructor(e,t,r,i,s,o){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==o&&(this.polylinesMesh=o)}},e.SegmentsToleranceDto=class{constructor(e){this.tolerance=1e-5,void 0!==e&&(this.segments=e)}},e.PolylineToleranceDto=class{constructor(e,t){this.tolerance=1e-5,void 0!==e&&(this.polyline=e),void 0!==t&&(this.tolerance=t)}},e.TwoPolylinesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-5,void 0!==e&&(this.polyline1=e),void 0!==t&&(this.polyline2=t),void 0!==r&&(this.tolerance=r)}}}(ge||(ge={})),function(e){e.SignedDistanceFromPlaneToPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.plane=t)}},e.TriangleDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.TriangleToleranceDto=class{constructor(e){this.tolerance=1e-7,void 0!==e&&(this.triangle=e)}},e.TriangleTriangleToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.triangle1=e),void 0!==t&&(this.triangle2=t),void 0!==r&&(this.tolerance=r)}},e.MeshMeshToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.mesh1=e),void 0!==t&&(this.mesh2=t),void 0!==r&&(this.tolerance=r)}}}(me||(me={})),function(e){e.DxfLineSegmentDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.DxfArcSegmentDto=class{constructor(e,t,r,i){void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.startAngle=r),void 0!==i&&(this.endAngle=i)}},e.DxfCircleSegmentDto=class{constructor(e,t){void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.DxfPolylineSegmentDto=class{constructor(e,t,r){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t),void 0!==r&&(this.bulges=r)}},e.DxfSplineSegmentDto=class{constructor(e,t,r){this.degree=3,this.closed=!1,void 0!==e&&(this.controlPoints=e),void 0!==t&&(this.degree=t),void 0!==r&&(this.closed=r)}},e.DxfPathDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.DxfPathsPartDto=class{constructor(e,t,r){this.layer="Default",this.color="#000000",void 0!==e&&(this.layer=e),void 0!==t&&(this.color=t),void 0!==r&&(this.paths=r)}},e.DxfModelDto=class{constructor(e,t,r){this.colorFormat="aci",this.acadVersion="AC1009",void 0!==e&&(this.dxfPathsParts=e),void 0!==t&&(this.colorFormat=t),void 0!==r&&(this.acadVersion=r)}}}(ye||(ye={}));class Se{getItem(e){if(e.index<0||e.index>=e.list.length)throw new Error("Index out of bounds");let t;return t=e.clone?structuredClone(e.list[e.index]):e.list[e.index],t}getFirstItem(e){if(0===e.list.length)throw new Error("List is empty");let t;return t=e.clone?structuredClone(e.list[0]):e.list[0],t}getLastItem(e){if(0===e.list.length)throw new Error("List is empty");let t;return t=e.clone?structuredClone(e.list[e.list.length-1]):e.list[e.list.length-1],t}randomGetThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()<e.threshold&&r.push(t[i]);return r}getSubList(e){let t;return t=e.clone?structuredClone(e.list.slice(e.indexStart,e.indexEnd)):e.list.slice(e.indexStart,e.indexEnd),t}getNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth==0&&r.push(t[i]);return r}getByPattern(e){const{list:t,pattern:r}=e;if(!r||0===r.length)throw new Error("Pattern is empty or does not exist");const i=r.length,s=t.length,o=[];if(i>=s)t.forEach(((e,t)=>{!0===r[t]&&o.push(e)}));else{const e=[],n=Math.ceil(s/i);for(let t=0;t<n;t++)e.push(...r);t.forEach(((t,r)=>{!0===e[r]&&o.push(t)}))}return o}mergeElementsOfLists(e){const t=e.lists,r=e.level,i=[],s=[];t.forEach((e=>{const t=e.flat(r);i.push(t)}));const o=this.getLongestListLength({lists:i});for(let e=0;e<o;e++){const t=[];for(let r=0;r<i.length;r++){const s=i[r][e];void 0!==s&&t.push(s)}t.length>0&&s.push(t)}let n=[];if(r>0)for(let e=0;e<r;e++)e===r-1&&0!==e?n[e-1].push(s):e===r-1?n.push(s):n.push([]);else n=s;return n}getLongestListLength(e){let t=0;return e.lists?(e.lists.forEach((e=>{e.length>t&&(t=e.length)})),t):void 0}reverse(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.reverse()}shuffle(e){let t=e.list;e.clone&&(t=structuredClone(e.list));for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}flipLists(e){if(e.list.length>0){const t=e.list[0].length;let r=!0;if(e.list.forEach((e=>{e.length!==t&&(r=!1)})),r){const r=[];for(let i=0;i<t;i++){const t=[];e.list.forEach((e=>{t.push(e[i])})),r.push(t)}return r}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(e){return(e=>{const{nrElements:t,list:r,keepRemainder:i}=e,s=t,o=[];let n=[];return r.forEach(((e,t)=>{n.push(e),(t+1)%s==0&&(o.push(n),n=[]),n.length>0&&i&&t===r.length-1&&o.push(n)})),o})(e)}includes(e){return e.list.includes(e.item)}findIndex(e){return e.list.indexOf(e.item)}getListDepth(e){let t=0,r=!0,i=e.list;for(;r;){let e=!1;for(let t=0;t<i.length;t++)Array.isArray(i[t])&&(e=!0);i=i.flat(),e?t++:(t++,r=!1)}return t}listLength(e){return e.list.length}addItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,0,e.item),t}addItemAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));let r=[...e.indexes];return r=r.filter((e=>e>=0&&e<=t.length)),r.sort(((e,t)=>e-t)),r.forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.item)})),t}addItemsAtIndexes(e){if(e.items.length!==e.indexes.length)throw new Error("Items and indexes must have the same length");for(let t=0;t<e.indexes.length;t++)if(t>0&&e.indexes[t-1]>e.indexes[t])throw new Error("Indexes must be in ascending order");let t=e.list;return e.clone&&(t=structuredClone(e.list)),[...e.indexes].forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.items[i])})),t}removeItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,1),t}removeFirstItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.length>0&&t.shift(),t}removeLastItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.length>0&&t.pop(),t}removeItemAtIndexFromEnd(e){let t=e.list;if(e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<t.length){const r=t.length-1-e.index;t.splice(r,1)}return t}removeItemsAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[...e.indexes];return r.sort(((e,t)=>t-e)),r.forEach((e=>{e>=0&&e<t.length&&t.splice(e,1)})),t}removeAllItems(e){return e.list.length=0,e.list}removeNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth!=0&&r.push(t[i]);return r}randomRemoveThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()>e.threshold&&r.push(t[i]);return r}removeDuplicateNumbers(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((e,t,r)=>r.indexOf(e)===t))}removeDuplicateNumbersTolerance(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((t,r,i)=>i.findIndex((r=>Math.abs(r-t)<e.tolerance))===r))}removeDuplicates(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((e,t,r)=>r.indexOf(e)===t))}addItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.push(e.item),t}prependItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.unshift(e.item),t}addItemFirstLast(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.position===ne.firstLastEnum.first?t.unshift(e.item):t.push(e.item),t}concatenate(e){let t=[];return e.clone?e.lists.forEach((e=>{t=t.concat(structuredClone(e))})):e.lists.forEach((e=>{t=t.concat(e)})),t}createEmptyList(){return[]}repeat(e){const t=[];for(let r=0;r<e.times;r++)t.push(e.item);return t}repeatInPattern(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];let i=0,s=0;for(;i<e.lengthLimit;)r.push(t[s]),s++,s===t.length&&(s=0),i++;return r}sortNumber(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((e,t)=>e-t)):t.sort(((e,t)=>t-e))}sortTexts(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort():t.sort().reverse()}sortByPropValue(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((t,r)=>t[e.property]-r[e.property])):t.sort(((t,r)=>r[e.property]-t[e.property]))}interleave(e){const t=e.clone?structuredClone(e.lists):e.lists;if(!t||0===t.length)throw new Error("Lists array is empty or does not exist");const r=[],i=Math.max(...t.map((e=>e.length)));for(let e=0;e<i;e++)for(const i of t)e<i.length&&r.push(i[e]);return r}}class we{boolean(e){return e.boolean}randomBooleans(e){const t=[];for(let r=0;r<e.length;r++)t.push(Math.random()<e.trueThreshold);return t}twoThresholdRandomGradient(e){const t=[];return e.numbers.forEach((r=>{if(r<e.thresholdTotalTrue)t.push(!0);else if(r>e.thresholdTotalFalse)t.push(!1);else{const i=r-e.thresholdTotalTrue,s=(e.thresholdTotalFalse-e.thresholdTotalTrue)/e.nrLevels,o=Math.ceil(i/s)/e.nrLevels;Math.random()>o?t.push(!0):t.push(!1)}})),t}thresholdBooleanList(e){const t=[];return e.numbers.forEach((r=>{r<e.threshold?t.push(!0):t.push(!1)})),e.inverse?t.map((e=>!e)):t}thresholdGapsBooleanList(e){const t=[];return e.numbers.forEach((r=>{let i=!1;e.gapThresholds.forEach((e=>{const s=e[0],o=e[1];r>=s&&r<=o&&(t.push(!0),i=!0)})),i||t.push(!1)})),e.inverse?t.map((e=>!e)):t}not(e){return!e.boolean}notList(e){return e.booleans.map((e=>!e))}compare(e){switch(e.operator){case"==":return e.first==e.second;case"!=":return e.first!=e.second;case"===":return e.first===e.second;case"!==":return e.first!==e.second;case"<":return e.first<e.second;case"<=":return e.first<=e.second;case">":return e.first>e.second;case">=":return e.first>=e.second;default:return!1}}valueGate(e){return e.boolean?e.value:void 0}firstDefinedValueGate(e){let t;return t=void 0!==e.value1?e.value1:void 0!==e.value2?e.value2:void 0,t}}class be{number(e){return e.number}twoNrOperation(e){let t;switch(e.operation){case ce.mathTwoNrOperatorEnum.add:t=e.first+e.second;break;case ce.mathTwoNrOperatorEnum.subtract:t=e.first-e.second;break;case ce.mathTwoNrOperatorEnum.multiply:t=e.first*e.second;break;case ce.mathTwoNrOperatorEnum.divide:t=e.first/e.second;break;case ce.mathTwoNrOperatorEnum.power:t=Math.pow(e.first,e.second);break;case ce.mathTwoNrOperatorEnum.modulus:t=e.first%e.second}return t}modulus(e){return this.twoNrOperation({first:e.number,second:e.modulus,operation:ce.mathTwoNrOperatorEnum.modulus})}roundToDecimals(e){return Math.round(e.number*Math.pow(10,e.decimalPlaces))/Math.pow(10,e.decimalPlaces)}roundAndRemoveTrailingZeros(e){const t=Math.round(e.number*Math.pow(10,e.decimalPlaces))/Math.pow(10,e.decimalPlaces);return parseFloat(t.toFixed(e.decimalPlaces))}oneNrOperation(e){let t;switch(e.operation){case ce.mathOneNrOperatorEnum.absolute:t=Math.abs(e.number);break;case ce.mathOneNrOperatorEnum.negate:t=-e.number;break;case ce.mathOneNrOperatorEnum.ln:t=Math.log(e.number);break;case ce.mathOneNrOperatorEnum.log10:t=Math.log10(e.number);break;case ce.mathOneNrOperatorEnum.tenPow:t=Math.pow(10,e.number);break;case ce.mathOneNrOperatorEnum.round:t=Math.round(e.number);break;case ce.mathOneNrOperatorEnum.floor:t=Math.floor(e.number);break;case ce.mathOneNrOperatorEnum.ceil:t=Math.ceil(e.number);break;case ce.mathOneNrOperatorEnum.sqrt:t=Math.sqrt(e.number);break;case ce.mathOneNrOperatorEnum.sin:t=Math.sin(e.number);break;case ce.mathOneNrOperatorEnum.cos:t=Math.cos(e.number);break;case ce.mathOneNrOperatorEnum.tan:t=Math.tan(e.number);break;case ce.mathOneNrOperatorEnum.asin:t=Math.asin(e.number);break;case ce.mathOneNrOperatorEnum.acos:t=Math.acos(e.number);break;case ce.mathOneNrOperatorEnum.atan:t=Math.atan(e.number);break;case ce.mathOneNrOperatorEnum.log:t=Math.log(e.number);break;case ce.mathOneNrOperatorEnum.exp:t=Math.exp(e.number);break;case ce.mathOneNrOperatorEnum.degToRad:t=e.number*Math.PI/180;break;case ce.mathOneNrOperatorEnum.radToDeg:t=180*e.number/Math.PI}return t}remap(e){return(e.number-e.fromLow)*(e.toHigh-e.toLow)/(e.fromHigh-e.fromLow)+e.toLow}random(){return Math.random()}randomNumber(e){return Math.random()*(e.high-e.low)+e.low}randomNumbers(e){const t=[];for(let r=0;r<e.count;r++)t.push(this.randomNumber(e));return t}pi(){return Math.PI}toFixed(e){return e.number.toFixed(e.decimalPlaces)}add(e){return e.first+e.second}subtract(e){return e.first-e.second}multiply(e){return e.first*e.second}divide(e){return e.first/e.second}power(e){return Math.pow(e.first,e.second)}sqrt(e){return Math.sqrt(e.number)}abs(e){return Math.abs(e.number)}round(e){return Math.round(e.number)}floor(e){return Math.floor(e.number)}ceil(e){return Math.ceil(e.number)}negate(e){return-e.number}ln(e){return Math.log(e.number)}log10(e){return Math.log10(e.number)}tenPow(e){return Math.pow(10,e.number)}sin(e){return Math.sin(e.number)}cos(e){return Math.cos(e.number)}tan(e){return Math.tan(e.number)}asin(e){return Math.asin(e.number)}acos(e){return Math.acos(e.number)}atan(e){return Math.atan(e.number)}exp(e){return Math.exp(e.number)}degToRad(e){return e.number*Math.PI/180}radToDeg(e){return 180*e.number/Math.PI}ease(e){const t=e.x,r=e.min,i=e.max,s=this[e.ease](t);return this.remap({number:s,fromLow:0,fromHigh:1,toLow:r,toHigh:i})}clamp(e){return Math.max(e.min,Math.min(e.max,e.number))}lerp(e){return e.start+(e.end-e.start)*e.t}inverseLerp(e){return e.start===e.end?0:(e.value-e.start)/(e.end-e.start)}smoothstep(e){const t=Math.max(0,Math.min(1,e.number));return t*t*(3-2*t)}sign(e){return Math.sign(e.number)}fract(e){return e.number-Math.floor(e.number)}wrap(e){const t=e.max-e.min;if(0===t)return e.min;const r=(e.number-e.min)%t;return r<0?r+e.max:r+e.min}pingPong(e){const t=Math.abs(e.t)%(2*e.length);return t>e.length?2*e.length-t:t}moveTowards(e){const t=e.target-e.current;return Math.abs(t)<=e.maxDelta?e.target:e.current+Math.sign(t)*e.maxDelta}easeInSine(e){return 1-Math.cos(e*Math.PI/2)}easeOutSine(e){return Math.sin(e*Math.PI/2)}easeInOutSine(e){return-(Math.cos(Math.PI*e)-1)/2}easeInQuad(e){return e*e}easeOutQuad(e){return 1-(1-e)*(1-e)}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}easeInCubic(e){return e*e*e}easeOutCubic(e){return 1-Math.pow(1-e,3)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}easeInQuart(e){return e*e*e*e}easeOutQuart(e){return 1-Math.pow(1-e,4)}easeInOutQuart(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}easeInQuint(e){return e*e*e*e*e}easeOutQuint(e){return 1-Math.pow(1-e,5)}easeInOutQuint(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}easeInExpo(e){return 0===e?0:Math.pow(2,10*e-10)}easeOutExpo(e){return 1===e?1:1-Math.pow(2,-10*e)}easeInOutExpo(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}easeInCirc(e){return 1-Math.sqrt(1-e*e)}easeOutCirc(e){return Math.sqrt(1-Math.pow(e-1,2))}easeInOutCirc(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}easeInBack(e){return 2.70158*e*e*e-1.70158*e*e}easeOutBack(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}easeInOutBack(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}easeInElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)}easeOutElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1}easeInOutElastic(e){const t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}easeInBounce(e){return 1-this.easeOutBounce(1-e)}easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375}easeInOutBounce(e){return e<.5?(1-this.easeOutBounce(1-2*e))/2:(1+this.easeOutBounce(2*e-1))/2}}class Ee{constructor(e,t,r,i){this.geometryHelper=e,this.transforms=t,this.vector=r,this.lists=i}transformPoint(e){const t=e.transformation;let r=[e.point];return r=this.geometryHelper.transformControlPoints(t,r),r[0]}transformPoints(e){return this.geometryHelper.transformControlPoints(e.transformation,e.points)}transformsForPoints(e){if(e.points.length!==e.transformation.length)throw new Error("You must provide equal nr of points and transformations");return e.points.map(((t,r)=>this.geometryHelper.transformControlPoints(e.transformation[r],[t])[0]))}translatePoints(e){const t=this.transforms.translationXYZ({translation:e.translation});return this.geometryHelper.transformControlPoints(t,e.points)}translatePointsWithVectors(e){if(e.points.length!==e.translations.length)throw new Error("You must provide equal nr of points and translations");const t=this.transforms.translationsXYZ({translations:e.translations});return e.points.map(((e,r)=>this.geometryHelper.transformControlPoints(t[r],[e])[0]))}translateXYZPoints(e){const t=this.transforms.translationXYZ({translation:[e.x,e.y,e.z]});return this.geometryHelper.transformControlPoints(t,e.points)}scalePointsCenterXYZ(e){const t=this.transforms.scaleCenterXYZ({center:e.center,scaleXyz:e.scaleXyz});return this.geometryHelper.transformControlPoints(t,e.points)}stretchPointsDirFromCenter(e){const t=this.transforms.stretchDirFromCenter({center:e.center,scale:e.scale,direction:e.direction});return this.geometryHelper.transformControlPoints(t,e.points)}rotatePointsCenterAxis(e){const t=this.transforms.rotationCenterAxis({center:e.center,axis:e.axis,angle:e.angle});return this.geometryHelper.transformControlPoints(t,e.points)}boundingBoxOfPoints(e){const t=[],r=[],i=[];e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])}));const s=[Math.min(...t),Math.min(...r),Math.min(...i)],o=[Math.max(...t),Math.max(...r),Math.max(...i)];return{min:s,max:o,center:[(s[0]+o[0])/2,(s[1]+o[1])/2,(s[2]+o[2])/2],width:o[0]-s[0],height:o[1]-s[1],length:o[2]-s[2]}}closestPointFromPointsDistance(e){return this.closestPointFromPointData(e).distance}closestPointFromPointsIndex(e){return this.closestPointFromPointData(e).index}closestPointFromPoints(e){return this.closestPointFromPointData(e).point}distance(e){const t=e.endPoint[0]-e.startPoint[0],r=e.endPoint[1]-e.startPoint[1],i=e.endPoint[2]-e.startPoint[2];return Math.sqrt(t*t+r*r+i*i)}distancesToPoints(e){return e.endPoints.map((t=>this.distance({startPoint:e.startPoint,endPoint:t})))}multiplyPoint(e){const t=[];for(let r=0;r<e.amountOfPoints;r++)t.push([e.point[0],e.point[1],e.point[2]]);return t}getX(e){return e.point[0]}getY(e){return e.point[1]}getZ(e){return e.point[2]}averagePoint(e){const t=[],r=[],i=[];return e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])})),[t.reduce(((e,t)=>e+t),0)/e.points.length,r.reduce(((e,t)=>e+t),0)/e.points.length,i.reduce(((e,t)=>e+t),0)/e.points.length]}pointXYZ(e){return[e.x,e.y,e.z]}pointXY(e){return[e.x,e.y]}spiral(e){const t=e.phi,r=Math.log(t)/(Math.PI/e.widening),i=[],s=e.radius/e.numberPoints;for(let t=0;t<e.radius;t+=s){const s=Math.log(t/e.factor)/r,o=t*Math.cos(s),n=t*Math.sin(s);i.push([o||0,n||0,0])}return i}hexGrid(e){const t=Math.sqrt(Math.pow(e.radiusHexagon,2)-Math.pow(e.radiusHexagon/2,2)),r=[];for(let i=0;i<e.nrHexagonsX;i++){const s=i*t*2;for(let i=0;i<e.nrHexagonsY;i++){const o=(e.radiusHexagon+e.radiusHexagon/2)*i,n=s+(i%2==0?0:t);r.push([n,o,0])}}if(e.orientOnCenter){const e=r[r.length-1][0]/2,t=r[r.length-1][1]/2;r.forEach(((i,s)=>{r[s]=[i[0]-e,i[1]-t,0]}))}return e.pointsOnGround&&r.forEach(((e,t)=>{r[t]=[e[0],0,e[1]]})),r}hexGridScaledToFit(e){var t,r,i,s;let o=e.width,n=e.height,a=e.nrHexagonsInHeight,c=e.nrHexagonsInWidth,h=null!==(t=e.extendTop)&&void 0!==t&&t,l=null!==(r=e.extendBottom)&&void 0!==r&&r,d=null!==(i=e.extendLeft)&&void 0!==i&&i,u=null!==(s=e.extendRight)&&void 0!==s&&s;const{flatTop:p=!1,centerGrid:f=!1,pointsOnGround:v=!1}=e;if(p){const t=o;o=e.height,n=t;const r=c;c=a,a=r;const i=h,s=l;h=d,l=u,d=s,u=i}if(o<=0||n<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const m=g.map((e=>this.getRegularHexagonVertices(e,1)));let y=1/0,S=-1/0,w=1/0,b=-1/0;for(const e of m)for(const t of e)t[0]<y&&(y=t[0]),t[0]>S&&(S=t[0]),t[1]<w&&(w=t[1]),t[1]>b&&(b=t[1]);const E=S-y,x=b-w,T=E>1e-9?o/E:1,P=x>1e-9?n/x:1;let C=g.map((e=>[(e[0]-y)*T,(e[1]-w)*P,0])),k=m.map((e=>e.map((e=>[(e[0]-y)*T,(e[1]-w)*P,0])))),D=1/0,O=-1/0,A=0;if(0!==k.length){const e=k[0];if(A=this.safestPointsMaxFilletHalfLine({points:e,checkLastWithFirst:!0,tolerance:1e-7}),e.forEach(((t,r)=>{const i=e[(r+1)%e.length],s=this.distance({startPoint:t,endPoint:i});s<D&&(D=s),s>O&&(O=s)})),h||l||d||u){const t=e[0],r=e[1],i=t[1]-r[1],s=r[0]-t[0];if(h&&!l){const e={center:[0,0,0],direction:[0,1,0],scale:n/(n-i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(l&&!h){const e={center:[0,n,0],direction:[0,-1,0],scale:n/(n-i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(h&&l){const e={center:[0,n/2,0],direction:[0,1,0],scale:n/(n-2*i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&!u){const e={center:[o,0,0],direction:[1,0,0],scale:o/(o-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(u&&!d){const e={center:[0,0,0],direction:[1,0,0],scale:o/(o-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&u){const e={center:[o/2,0,0],direction:[1,0,0],scale:o/(o-2*s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}}}if(p){C=this.rotatePointsCenterAxis({points:C,center:[o/2,n/2,0],axis:[0,0,1],angle:90}),k=k.map((e=>this.rotatePointsCenterAxis({points:e,center:[o/2,n/2,0],axis:[0,0,1],angle:90})));const e=this.vector.sub({first:[n/2,o/2,0],second:[o/2,n/2,0]});C=this.translatePoints({points:C,translation:e}),k=k.map((t=>this.translatePoints({points:t,translation:e})))}if(f){let e=o/2,t=n/2;p&&(e=n/2,t=o/2);for(let r=0;r<C.length;r++)C[r][0]-=e,C[r][1]-=t;for(let r=0;r<k.length;r++)for(let i=0;i<k[r].length;i++)k[r][i][0]-=e,k[r][i][1]-=t}if(v){for(let e=0;e<C.length;e++)C[e]=[C[e][0],0,C[e][1]];for(let e=0;e<k.length;e++)for(let t=0;t<k[e].length;t++)k[e][t]=[k[e][t][0],0,k[e][t][1]]}if(p){const t=this.lists.groupNth({list:k.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:t});r.forEach((e=>e.reverse())),k=r.flat();const i=this.lists.groupNth({list:C.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),s=this.lists.flipLists({list:i});s.forEach((e=>e.reverse())),C=s.flat()}return{centers:C,hexagons:k,shortestDistEdge:D,longestDistEdge:O,maxFilletRadius:A}}maxFilletRadius(e){const{start:t,center:r,end:i,tolerance:s=1e-7}=e,o=this.vector.sub({first:t,second:i}),n=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:o}),c=this.vector.length({vector:n});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:o}),l=this.vector.normalized({vector:n});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s)return 0;if(d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a,c)*p}maxFilletRadiusHalfLine(e){const{start:t,center:r,end:i,tolerance:s=1e-7}=e,o=this.vector.sub({first:t,second:i}),n=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:o}),c=this.vector.length({vector:n});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:o}),l=this.vector.normalized({vector:n});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s||d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a/2,c/2)*p}maxFilletsHalfLine(e){const{points:t,checkLastWithFirst:r=!1,tolerance:i=1e-7}=e,s=t.length,o=[];if(s<3)return o;for(let e=1;e<s-1;e++){const r=t[e-1],s=t[e],n={start:r,center:t[e+1],end:s,tolerance:i};o.push(this.maxFilletRadiusHalfLine(n))}if(r&&s>=3){const e=t[s-1],r=t[0],n={start:e,center:t[1],end:r,tolerance:i};o.push(this.maxFilletRadiusHalfLine(n));const a=t[s-2],c=t[s-1],h={start:a,center:t[0],end:c,tolerance:i};o.push(this.maxFilletRadiusHalfLine(h))}return o}safestPointsMaxFilletHalfLine(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}removeConsecutiveDuplicates(e){return this.geometryHelper.removeConsecutivePointDuplicates(e.points,e.checkFirstAndLast,e.tolerance)}normalFromThreePoints(e){const t=e.point1,r=e.point2,i=e.point3;if(!t||!r||!i||3!==t.length||3!==r.length||3!==i.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const s=r[0]-t[0],o=r[1]-t[1],n=r[2]-t[2],a=i[0]-t[0],c=i[1]-t[1],h=i[2]-t[2];let l=o*h-n*c,d=n*a-s*h,u=s*c-o*a;if(0!==l||0!==d||0!==u)return e.reverseNormal&&(l=-l,d=-d,u=-u),this.vector.normalized({vector:[l,d,u]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(e){let t,r,i=Number.MAX_SAFE_INTEGER;for(let s=0;s<e.points.length;s++){const o=e.points[s],n=this.distance({startPoint:e.point,endPoint:o});n<i&&(i=n,t=s,r=o)}return{index:t+1,distance:i,point:r}}twoPointsAlmostEqual(e){const t=e.point1,r=e.point2;return this.distance({startPoint:t,endPoint:r})<e.tolerance}sortPoints(e){return[...e.points].sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]))}getRegularHexagonVertices(e,t){const r=[],i=e[0],s=e[1],o=e[2],n=Math.PI/3;for(let e=0;e<6;e++){const a=n*e;r.push([i+t*Math.sin(a),s+t*Math.cos(a),o])}return r}}const xe={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12],176:[14,7,21,5,20,4,18,4,16,5,14,7,13,9,14,10,16,10,18,9,20,7,21],178:[14,5,17,5,18,6,19,7,20,9,21,10,21,11,20,12,19,12,18,11,17,10,16,6,14,12,14],179:[14,5,21,11,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],181:[19,4,14,4,-7,void 0,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],185:[14,7,19,8,20,10,21,10,14],188:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],189:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,15,4,15,5,16,6,17,7,19,7,20,6,20,5,19,4,17,2,15,0,21,0],190:[26,4,21,10,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],215:[18,3,15,15,3,void 0,15,15,3,3],247:[22,4,9,18,9,void 0,11,15,10,14,11,13,12,14,11,15,void 0,11,5,10,4,11,3,12,4,11,5],177:[26,13,18,13,6,void 0,4,12,22,12,void 0,4,3,22,3],8304:[14,8,21,7,20,6,19,5,17,5,15,6,14,8,14,9,14,11,15,12,17,12,19,11,20,9,21,8,21],8308:[14,10,21,6,17,12,17,void 0,10,21,10,14],8309:[14,11,21,6,21,5,17,6,17,7,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],8310:[14,11,19,10,20,9,21,7,21,6,20,5,18,5,15,6,14,8,14,9,14,10,15,11,16,11,17,10,18,9,18,8,17,7,16,6,15],8311:[14,11,21,7,14,void 0,5,21,11,21],8312:[14,8,21,7,20,6,19,6,18,7,17,8,17,9,18,10,19,10,20,9,21,8,21,7,20,void 0,8,17,7,16,6,15,6,14,7,13,8,13,9,14,10,15,10,16,9,17],8313:[14,10,17,9,16,8,16,7,17,6,18,6,19,7,20,8,20,9,19,10,18,10,15,9,14,7,14,6,15,5,16],8320:[14,8,7,7,6,6,5,5,3,5,1,6,0,8,0,9,0,11,1,12,3,12,5,11,6,9,7,8,7],8321:[14,7,5,8,6,10,7,10,0],8322:[14,5,4,5,5,6,6,7,7,9,7,10,6,11,5,11,4,10,3,9,2,6,0,12,0],8323:[14,5,7,11,7,8,4,10,4,11,3,12,2,12,1,11,0,9,0,7,1,6,2,5,3],8324:[14,10,7,6,3,12,3,void 0,10,7,10,0],8776:[24,3,11,4,13,6,14,8,14,10,13,14,10,16,9,18,9,20,10,21,12,void 0,3,5,4,7,6,8,8,8,10,7,14,4,16,3,18,3,20,4,21,6],8730:[20,4,12,6,8,8,0,void 0,8,0,10,21,void 0,10,21,20,21],8731:[24,2,21,5,21,4,19,5,18,6,17,6,16,5,15,3,15,2,16,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8732:[24,5,21,3,18,6,18,void 0,5,21,5,15,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8960:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,6,3,16,18]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class Te{constructor(e){this.point=e}create(e){return e.text}split(e){return e.text.split(e.separator)}replaceAll(e){return e.text.split(e.search).join(e.replaceWith)}join(e){return e.list.join(e.separator)}toString(e){return e.item.toString()}toStringEach(e){return e.list.map((e=>e.toString()))}format(e){return e.text.replace(/{(\d+)}/g,((t,r)=>void 0!==e.values[r]?e.values[r]:t))}includes(e){return e.text.includes(e.search)}startsWith(e){return e.text.startsWith(e.search)}endsWith(e){return e.text.endsWith(e.search)}indexOf(e){return e.text.indexOf(e.search)}lastIndexOf(e){return e.text.lastIndexOf(e.search)}substring(e){return e.text.substring(e.start,e.end)}slice(e){return e.text.slice(e.start,e.end)}charAt(e){return e.text.charAt(e.index)}trim(e){return e.text.trim()}trimStart(e){return e.text.trimStart()}trimEnd(e){return e.text.trimEnd()}padStart(e){return e.text.padStart(e.length,e.padString)}padEnd(e){return e.text.padEnd(e.length,e.padString)}toUpperCase(e){return e.text.toUpperCase()}toLowerCase(e){return e.text.toLowerCase()}toUpperCaseFirst(e){return e.text?e.text.charAt(0).toUpperCase()+e.text.slice(1):e.text}toLowerCaseFirst(e){return e.text?e.text.charAt(0).toLowerCase()+e.text.slice(1):e.text}repeat(e){return e.text.repeat(e.count)}reverse(e){return e.text.split("").reverse().join("")}length(e){return e.text.length}isEmpty(e){return!e.text||0===e.text.trim().length}concat(e){return e.texts.join("")}regexTest(e){return new RegExp(e.pattern,e.flags).test(e.text)}regexMatch(e){const t=new RegExp(e.pattern,e.flags),r=e.text.match(t);return r?Array.from(r):null}regexReplace(e){const t=new RegExp(e.pattern,e.flags);return e.text.replace(t,e.replaceWith)}regexSearch(e){const t=new RegExp(e.pattern,e.flags);return e.text.search(t)}regexSplit(e){const t=new RegExp(e.pattern,e.flags);return e.text.split(t)}vectorChar(e){const{xOffset:t,yOffset:r,font:i,input:s,height:o,extrudeOffset:n}=this.vectorParamsChar(e);let a=s.charCodeAt(0);a&&i[a]||(a=63);const c=[].concat(i[a]),h=(o-n)/i.height,l=n/2,d=c.shift()*h,u=[];let p=[];for(let e=0,i=c.length;e<i;e+=2){const i=h*c[e]+t,s=h*c[e+1]+r+l;void 0===c[e]?(u.push(p),p=[],e--):p.push([i,0,s])}return p.length&&u.push(p),{width:d,height:o,paths:u}}vectorText(e){const{xOffset:t,yOffset:r,height:i,align:s,extrudeOffset:o,lineSpacing:n,letterSpacing:a}=Object.assign({},xe,e),c=e.text;if("string"!=typeof c)throw new Error("text must be a string");const h=i*a;let l=0,d={width:0,height:0,chars:[]},u=[];const p=()=>{l=Math.max(l,d.width),d.chars.length&&u.push(d),d={width:0,height:0,chars:[]}};let f,v=t,g=r;const m=c.length;for(let e=0;e<m;e++){const r=c[e];if("\n"===r){p(),v=t,g-=i*n;continue}f=this.vectorChar({xOffset:v,yOffset:g,height:i,extrudeOffset:o,char:r});const s=f.width+h;v+=s,d.width+=s,d.height=Math.max(d.height,f.height)," "!==r&&(d.chars=d.chars.concat(f))}if(d.chars.length&&p(),u=u.map((e=>{const t=l-e.width;return s===pe.horizontalAlignEnum.right?this.translateLine({x:t},e):s===pe.horizontalAlignEnum.center?this.translateLine({x:t/2},e):e})),e.centerOnOrigin){const e=[];u.forEach((t=>{t.chars.forEach((t=>{t.paths.forEach((t=>{e.push(...t)}))}))}));const t=this.point.boundingBoxOfPoints({points:e});u.forEach((e=>{e.chars.forEach((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[-t.center[0],-t.center[1],-t.center[2]]}))),e)))}))}return u}vectorParamsChar(e){const t=Object.assign({},xe,e);return t.input=e.char||t.char,t}translateLine(e,t){const{x:r,y:i}=Object.assign({x:0,y:0},e);return t.chars=t.chars.map((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[r,0,i]}))),e))),t}}class Pe{constructor(e,t){this.math=e,this.geometryHelper=t}removeAllDuplicateVectors(e){return this.geometryHelper.removeAllDuplicateVectors(e.vectors,e.tolerance)}removeConsecutiveDuplicateVectors(e){return this.geometryHelper.removeConsecutiveVectorDuplicates(e.vectors,e.checkFirstAndLast,e.tolerance)}vectorsTheSame(e){return this.geometryHelper.vectorsTheSame(e.vec1,e.vec2,e.tolerance)}angleBetween(e){return this.math.radToDeg({number:Math.acos(this.dot({first:e.first,second:e.second})/(this.norm({vector:e.first})*this.norm({vector:e.second})))})}angleBetweenNormalized2d(e){const t=e.first[0]*e.second[1]-e.first[1]*e.second[0];return this.math.radToDeg({number:Math.atan2(t,this.dot({first:e.first,second:e.second}))})}positiveAngleBetween(e){const t=this.signedAngleBetween(e);return t<0?360+t:t}addAll(e){const t=[];for(let r=0;r<e.vectors[0].length;r++){let i=0;for(const t of e.vectors)i+=t[r];t.push(i)}return t}add(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]+e.second[r]);return t}all(e){return e.vector.every((e=>e))}cross(e){const t=[];return t.push(e.first[1]*e.second[2]-e.first[2]*e.second[1]),t.push(e.first[2]*e.second[0]-e.first[0]*e.second[2]),t.push(e.first[0]*e.second[1]-e.first[1]*e.second[0]),t}distSquared(e){let t=0;for(let r=0;r<e.first.length;r++)t+=Math.pow(e.first[r]-e.second[r],2);return t}dist(e){return Math.sqrt(this.distSquared(e))}div(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]/e.scalar);return t}domain(e){return e.vector[e.vector.length-1]-e.vector[0]}dot(e){let t=0;for(let r=0;r<e.first.length;r++)t+=e.first[r]*e.second[r];return t}finite(e){return e.vector.map((e=>isFinite(e)))}isZero(e){return 0===this.norm({vector:e.vector})}lerp(e){return this.add({first:this.mul({vector:e.first,scalar:e.fraction}),second:this.mul({vector:e.second,scalar:1-e.fraction})})}max(e){return Math.max(...e.vector)}min(e){return Math.min(...e.vector)}mul(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]*e.scalar);return t}neg(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(-e.vector[r]);return t}normSquared(e){return this.dot({first:e.vector,second:e.vector})}norm(e){const t=this.normSquared(e);return 0!==t?Math.sqrt(t):t}normalized(e){if(!(this.length({vector:e.vector})<=1e-8))return this.div({scalar:this.norm(e),vector:e.vector})}onRay(e){return this.add({first:e.point,second:this.mul({vector:e.vector,scalar:e.distance})})}vectorXYZ(e){return[e.x,e.y,e.z]}vectorXY(e){return[e.x,e.y]}range(e){const t=[];for(let r=0;r<e.max;r++)t.push(r);return t}signedAngleBetween(e){const t=this.cross({first:e.first,second:e.second}),r=this.norm({vector:e.first})*this.norm({vector:e.second}),i=this.dot({first:e.first,second:e.second}),s=this.norm({vector:t})/r,o=i/r,n=Math.atan2(s,o),a=this.dot({first:e.reference,second:t})>0?n:2*Math.PI-n;return this.math.radToDeg({number:a})}span(e){const t=[];for(let r=e.min;r<=e.max;r+=e.step)t.push(r);return t}spanEaseItems(e){const t=[];for(let r=0;r<e.nrItems;r++){const i=1*r/(e.nrItems-1);t.push(this.math.ease({x:i,ease:e.ease,min:e.min,max:e.max}))}return e.intervals?t.map(((e,t,r)=>0===t?e:e-r[t-1])):t}spanLinearItems(e){const t=[],r=e.max-e.min;for(let i=0;i<e.nrItems;i++){const s=r*i/(e.nrItems-1);t.push(s+e.min)}return t}sub(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]-e.second[r]);return t}sum(e){return e.vector.reduce(((e,t)=>e+t),0)}lengthSq(e){const t=e.vector;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}length(e){return Math.sqrt(this.lengthSq(e))}parseNumbers(e){return e.vector.map((e=>parseFloat(e)))}}class Ce{constructor(e,t){this.vector=e,this.math=t}rotationCenterAxis(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationAxis(e.axis,this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterX(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationX(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterY(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationY(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationZ(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterYawPitchRoll(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:e.yaw}),this.math.degToRad({number:e.pitch}),this.math.degToRad({number:e.roll})),this.translation(e.center[0],e.center[1],e.center[2])]}scaleCenterXYZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]),this.translation(e.center[0],e.center[1],e.center[2])]}scaleXYZ(e){return[this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2])]}stretchDirFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.stretchDirection(e.direction,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}uniformScale(e){return[this.scaling(e.scale,e.scale,e.scale)]}uniformScaleFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scale,e.scale,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}translationXYZ(e){return[this.translation(e.translation[0],e.translation[1],e.translation[2])]}translationsXYZ(e){return e.translations.map((e=>[this.translation(e[0],e[1],e[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(e,t,r){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1]}scaling(e,t,r){return[e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1]}rotationAxis(e,t){const r=Math.sin(-t),i=Math.cos(-t),s=1-i,o=this.vector.normalized({vector:e}),n=o[0],a=o[1],c=o[2],h=this.identity();return h[0]=n*n*s+i,h[1]=n*a*s-c*r,h[2]=n*c*s+a*r,h[3]=0,h[4]=a*n*s+c*r,h[5]=a*a*s+i,h[6]=a*c*s-n*r,h[7]=0,h[8]=c*n*s-a*r,h[9]=c*a*s+n*r,h[10]=c*c*s+i,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}rotationX(e){const t=Math.sin(e),r=Math.cos(e);return[1,0,0,0,0,r,t,0,0,-t,r,0,0,0,0,1]}rotationY(e){const t=Math.sin(e),r=Math.cos(e);return[r,0,-t,0,0,1,0,0,t,0,r,0,0,0,0,1]}rotationZ(e){const t=Math.sin(e),r=Math.cos(e);return[r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(e,t,r){const i=.5*r,s=.5*t,o=.5*e,n=Math.sin(i),a=Math.cos(i),c=Math.sin(s),h=Math.cos(s),l=Math.sin(o),d=Math.cos(o),u=d*c*a+l*h*n,p=l*h*a-d*c*n,f=d*h*n-l*c*a,v=d*h*a+l*c*n;return this.rotationMatrixFromQuat(u,p,f,v)}rotationMatrixFromQuat(e,t,r,i){const s=e*e,o=t*t,n=r*r,a=e*t,c=r*i,h=r*e,l=t*i,d=t*r,u=e*i,p=this.identity();return p[0]=1-2*(o+n),p[1]=2*(a+c),p[2]=2*(h-l),p[3]=0,p[4]=2*(a-c),p[5]=1-2*(n+s),p[6]=2*(d+u),p[7]=0,p[8]=2*(h+l),p[9]=2*(d-u),p[10]=1-2*(o+s),p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}stretchDirection(e,t){const r=this.vector.normalized({vector:e}),[i,s,o]=r;if(isNaN(i)||0===i&&0===s&&0===o)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const n=t-1;return[1+n*i*i,n*s*i,n*o*i,0,n*i*s,1+n*s*s,n*o*s,0,n*i*o,n*s*o,1+n*o*o,0,0,0,0,1]}}class ke{constructor(){this.getArrayDepth=e=>Array.isArray(e)?1+Math.max(...e.map(this.getArrayDepth)):0}transformControlPoints(e,t){return this.getFlatTransformations(e).forEach((e=>{t=this.transformPointsByMatrixArray(t,e)})),t}getFlatTransformations(e){let t=[];return 3===this.getArrayDepth(e)?e.forEach((e=>{t.push(...e)})):t=e,t}transformPointsByMatrixArray(e,t){return this.transformPointsCoordinates(e,t)}transformPointsCoordinates(e,t){const r=[];for(const i of e){const e=this.transformCoordinates(i[0],i[1],i[2],t);r.push(e)}return r}removeAllDuplicateVectors(e,t=1e-7){const r=[];return e.forEach((e=>{r.some((r=>this.vectorsTheSame(e,r,t)))||r.push(e)})),r}removeConsecutiveVectorDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],o=e[t-1];this.vectorsTheSame(s,o,r)||i.push(o),t===e.length-1&&i.push(s)}if(t){const e=i[0],t=i[i.length-1];this.vectorsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}vectorsTheSame(e,t,r){let i=!1;if(e.length!==t.length)return i;i=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],r)){i=!1;break}return i}approxEq(e,t,r){return Math.abs(e-t)<r}removeConsecutivePointDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],o=e[t-1];this.arePointsTheSame(s,o,r)||i.push(o),t===e.length-1&&i.push(s)}if(t){const e=i[0],t=i[i.length-1];this.arePointsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}arePointsTheSame(e,t,r){let i=!1;return 2===e.length&&2===t.length?this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&(i=!0):3===e.length&&3===t.length&&this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&this.approxEq(e[2],t[2],r)&&(i=!0),i}transformCoordinates(e,t,r,i){const s=i,o=e*s[0]+t*s[4]+r*s[8]+s[12],n=e*s[1]+t*s[5]+r*s[9]+s[13],a=e*s[2]+t*s[6]+r*s[10]+s[14],c=1/(e*s[3]+t*s[7]+r*s[11]+s[15]);return[o*c,n*c,a*c]}}class De{constructor(e,t,r){this.vector=e,this.point=t,this.geometryHelper=r}getStartPoint(e){return e.line.start}getEndPoint(e){return e.line.end}length(e){return this.point.distance({startPoint:e.line.start,endPoint:e.line.end})}reverse(e){return{start:e.line.end,end:e.line.start}}transformLine(e){const t=e.transformation;let r=[e.line.start,e.line.end];return r=this.geometryHelper.transformControlPoints(t,r),{start:r[0],end:r[1]}}transformsForLines(e){return e.lines.map(((t,r)=>{const i=e.transformation[r];let s=[t.start,t.end];return s=this.geometryHelper.transformControlPoints(i,s),{start:s[0],end:s[1]}}))}create(e){return{start:e.start,end:e.end}}createSegment(e){return[e.start,e.end]}getPointOnLine(e){const t=e.line.start,r=e.line.end,i=e.param,s=[r[0]-t[0],r[1]-t[1],r[2]-t[2]];return[t[0]+i*s[0],t[1]+i*s[1],t[2]+i*s[2]]}linesBetweenPoints(e){const t=[];for(let r=1;r<e.points.length;r++){const i=e.points[r-1],s=e.points[r];t.push({start:i,end:s})}return t}linesBetweenStartAndEndPoints(e){return e.startPoints.map(((t,r)=>({start:t,end:e.endPoints[r]}))).filter((e=>0!==this.point.distance({startPoint:e.start,endPoint:e.end})))}lineToSegment(e){return[e.line.start,e.line.end]}linesToSegments(e){return e.lines.map((e=>[e.start,e.end]))}segmentToLine(e){return{start:e.segment[0],end:e.segment[1]}}segmentsToLines(e){return e.segments.map((e=>({start:e[0],end:e[1]})))}lineLineIntersection(e){const t=e.tolerance||1e-6,r=e.checkSegmentsOnly,i=e.line1,s=e.line2;if(!((null==i?void 0:i.start)&&i.end&&(null==s?void 0:s.start)&&s.end&&3===i.start.length&&3===i.end.length&&3===s.start.length&&3===s.end.length))return void console.error("Invalid line input to lineLineIntersection");const o=i.start,n=this.vector.sub({first:i.end,second:i.start}),a=s.start,c=this.vector.sub({first:s.end,second:s.start}),h=this.vector.sub({first:a,second:o}),l=this.vector.lengthSq({vector:n}),d=this.vector.lengthSq({vector:c});if(l<t*t||d<t*t)return;const u=this.vector.cross({first:n,second:c});if(this.vector.lengthSq({vector:u})<t*t){const e=this.vector.cross({first:h,second:n}),i=t*t*l;if(this.vector.lengthSq({vector:e})<i){if(r){const e=l<t*t?1:l,r=this.vector.dot({first:n,second:h})/e,i=this.vector.sub({first:s.end,second:o}),a=this.vector.dot({first:n,second:i})/e,c=[Math.min(r,a),Math.max(r,a)],d=[0,1];return Math.max(d[0],c[0]),void Math.min(d[1],c[1])}return o}return}const p=this.vector.dot({first:h,second:u}),f=t*t*t;if(Math.abs(p)>f)return;const v=l,g=d,m=this.vector.dot({first:n,second:c}),y=this.vector.dot({first:n,second:h}),S=this.vector.dot({first:c,second:h}),w=v*g-m*m;if(Math.abs(w)<t*t)return void console.error("Internal error: Denominator near zero after non-parallel check.");const b=(g*y-m*S)/w,E=(m*y-v*S)/w;if(r&&(b<-t||b>1+t||E<-t||E>1+t))return;const x=this.getPointOnLine({param:b,line:i});return[Math.abs(x[0])<t?0:x[0],Math.abs(x[1])<t?0:x[1],Math.abs(x[2])<t?0:x[2]]}}class Oe{constructor(e,t,r,i){this.vector=e,this.point=t,this.line=r,this.geometryHelper=i}length(e){let t=0;for(let r=1;r<e.polyline.points.length;r++){const i=e.polyline.points[r-1],s=e.polyline.points[r];t+=this.point.distance({startPoint:i,endPoint:s})}return t}countPoints(e){return e.polyline.points.length}getPoints(e){return e.polyline.points}reverse(e){return{points:e.polyline.points.reverse()}}transformPolyline(e){const t=e.transformation;let r=e.polyline.points;return r=this.geometryHelper.transformControlPoints(t,r),{points:r}}create(e){var t;return{points:e.points,isClosed:null!==(t=e.isClosed)&&void 0!==t&&t}}polylineToLines(e){return this.polylineToSegments(e).map((e=>({start:e[0],end:e[1]})))}polylineToSegments(e){const t=e.polyline,r=[],i=t.points,s=i.length;if(s<2)return r;for(let e=0;e<s-1;e++)r.push([i[e],i[e+1]]);return t.isClosed&&s>=2&&(this.point.twoPointsAlmostEqual({point1:i[s-1],point2:i[0],tolerance:1e-9})||r.push([i[s-1],i[0]])),r}polylineSelfIntersection(e){const{polyline:t,tolerance:r}=e,i=this.polylineToLines({polyline:t}),s=i.length;if(s<3)return[];const o=[],n=null!=r?r:1e-6;for(let e=0;e<s;e++)for(let r=e+1;r<s;r++){let a=r===e+1;if(!a&&t.isClosed&&0===e&&r===s-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:i[e],line2:i[r],checkSegmentsOnly:!0,tolerance:n});if(c){let e=!1;for(const t of o)if(this.point.twoPointsAlmostEqual({point1:c,point2:t,tolerance:n})){e=!0;break}e||o.push(c)}}return o}twoPolylineIntersection(e){const{polyline1:t,polyline2:r,tolerance:i}=e,s=this.polylineToLines({polyline:t}),o=this.polylineToLines({polyline:r}),n=[],a=null!=i?i:1e-6;for(const e of s)for(const t of o){const r=this.line.lineLineIntersection({line1:e,line2:t,checkSegmentsOnly:!0,tolerance:a});if(r){let e=!1;for(const t of n)if(this.point.twoPointsAlmostEqual({point1:r,point2:t,tolerance:a})){e=!0;break}e||n.push(r)}}return n}sortSegmentsIntoPolylines(e){var t;const r=null!==(t=e.tolerance)&&void 0!==t?t:1e-5,i=e.segments;if(!i||0===i.length)return[];const s=r*r,o=i.length,n=new Array(o).fill(!1),a=[],c=new Map,h=1/r,l=e=>`${Math.round(e[0]*h)},${Math.round(e[1]*h)},${Math.round(e[2]*h)}`;for(let e=0;e<o;e++){const t=i[e];if(this.point.twoPointsAlmostEqual({point1:t[0],point2:t[1],tolerance:r})){n[e]=!0;continue}const s=l(t[0]),o=l(t[1]),a={segmentIndex:e,endpointIndex:0,coords:t[0]},h={segmentIndex:e,endpointIndex:1,coords:t[1]};c.has(s)||c.set(s,[]),c.get(s).push(a),o!==s?(c.has(o)||c.set(o,[]),c.get(o).push(h)):c.get(s).push(h)}const d=e=>{const t=[],i=Math.round(e[0]*h),o=Math.round(e[1]*h),a=Math.round(e[2]*h);for(let e=-1;e<=1;e++)for(let r=-1;r<=1;r++)for(let s=-1;s<=1;s++)t.push(`${i+e},${o+r},${a+s}`);let l,d=s;for(const i of t){const t=c.get(i);if(t)for(const i of t)if(!n[i.segmentIndex]){const t=this.vector.sub({first:i.coords,second:e}),s=this.vector.lengthSq({vector:t});s<d&&this.point.twoPointsAlmostEqual({point1:i.coords,point2:e,tolerance:r})&&(l=i,d=s)}}if(l&&!n[l.segmentIndex])return l};for(let e=0;e<o;e++){if(n[e])continue;n[e]=!0;const t=i[e],s=[t[0],t[1]];let c=t[0],h=t[1],l=!1,u=0;for(;u++<o;){const e=d(h);if(!e)break;const t=i[e.segmentIndex],o=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:o,point2:c,tolerance:r})){l=!0,n[e.segmentIndex]=!0;break}n[e.segmentIndex]=!0,s.push(o),h=o}if(u=0,!l)for(;u++<o;){const e=d(c);if(!e)break;const t=i[e.segmentIndex],o=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:o,point2:h,tolerance:r})){l=!0,n[e.segmentIndex]=!0;break}n[e.segmentIndex]=!0,s.unshift(o),c=o}!l&&s.length>=2&&(l=this.point.twoPointsAlmostEqual({point1:c,point2:h,tolerance:r})),l&&s.length>2&&this.point.twoPointsAlmostEqual({point1:s[s.length-1],point2:s[0],tolerance:r})&&s.pop(),a.push({points:s,isClosed:l})}return a}maxFilletsHalfLine(e){return this.point.maxFilletsHalfLine({points:e.polyline.points,checkLastWithFirst:e.polyline.isClosed,tolerance:e.tolerance})}safestFilletRadius(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}}class Ae{constructor(e,t){this.vector=e,this.polyline=t}signedDistanceToPlane(e){return this.vector.dot({first:e.plane.normal,second:e.point})-e.plane.d}calculateTrianglePlane(e){const t=Math.pow(e.tolerance||1e-7,2),r=this.vector.sub({first:e.triangle[1],second:e.triangle[0]}),i=this.vector.sub({first:e.triangle[2],second:e.triangle[0]}),s=this.vector.cross({first:r,second:i});if(this.vector.lengthSq({vector:s})<t)return;const o=this.vector.normalized({vector:s});return{normal:o,d:this.vector.dot({first:o,second:e.triangle[0]})}}triangleTriangleIntersection(e){const t=e.triangle1,r=e.triangle2,i=e.tolerance||1e-7,s=t[0],o=t[1],n=t[2],a=r[0],c=r[1],h=r[2],l=this.calculateTrianglePlane({triangle:t,tolerance:i}),d=this.calculateTrianglePlane({triangle:r,tolerance:i});if(!l||!d)return;const u=[this.signedDistanceToPlane({point:a,plane:l}),this.signedDistanceToPlane({point:c,plane:l}),this.signedDistanceToPlane({point:h,plane:l})];if(u[0]>i&&u[1]>i&&u[2]>i||u[0]<-i&&u[1]<-i&&u[2]<-i)return;const p=[this.signedDistanceToPlane({point:s,plane:d}),this.signedDistanceToPlane({point:o,plane:d}),this.signedDistanceToPlane({point:n,plane:d})];if(p[0]>i&&p[1]>i&&p[2]>i||p[0]<-i&&p[1]<-i&&p[2]<-i)return;const f=p.every((e=>Math.abs(e)<i)),v=u.every((e=>Math.abs(e)<i));if(f&&v)return;const g=this.vector.cross({first:l.normal,second:d.normal}),m=this.vector.dot({first:g,second:g});if(m<i*i)return;const y=[],S=[],w=[[s,o],[o,n],[n,s]],b=p;for(let e=0;e<3;++e){const t=w[e][0],r=w[e][1],s=b[e],o=b[(e+1)%3];if(Math.abs(s)<i&&y.push(t),s*o<0&&Math.abs(s-o)>i){const e=s/(s-o);y.push(this.computeIntersectionPoint(t,r,e))}}const E=[[a,c],[c,h],[h,a]],x=u;for(let e=0;e<3;++e){const t=E[e][0],r=E[e][1],s=x[e],o=x[(e+1)%3];if(Math.abs(s)<i&&S.push(t),s*o<0&&Math.abs(s-o)>i){const e=s/(s-o);S.push(this.computeIntersectionPoint(t,r,e))}}if(y.length<2||S.length<2)return;const T=l.normal,P=d.normal,C=l.d,k=d.d,D=this.vector.mul({vector:P,scalar:C}),O=this.vector.mul({vector:T,scalar:k}),A=this.vector.sub({first:D,second:O}),F=this.vector.cross({first:A,second:g}),R=this.vector.mul({vector:F,scalar:1/m}),L=y.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:R}),second:g}))),M=S.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:R}),second:g}))),B=[Math.min(...L),Math.max(...L)],I=[Math.min(...M),Math.max(...M)],U=Math.max(B[0],I[0]),W=Math.min(B[1],I[1]);if(U<W-i*m){const e=this.vector.add({first:R,second:this.vector.mul({vector:g,scalar:U/m})}),t=this.vector.add({first:R,second:this.vector.mul({vector:g,scalar:W/m})}),r=this.vector.sub({first:e,second:t});return this.vector.lengthSq({vector:r})>i*i?[e,t]:void 0}}meshMeshIntersectionSegments(e){const t=e.mesh1,r=e.mesh2,i=[];for(let s=0;s<t.length;++s)for(let o=0;o<r.length;++o){const n=t[s],a=r[o],c=this.triangleTriangleIntersection({triangle1:n,triangle2:a,tolerance:e.tolerance});c&&i.push(c)}return i}meshMeshIntersectionPolylines(e){const t=this.meshMeshIntersectionSegments(e);return this.polyline.sortSegmentsIntoPolylines({segments:t,tolerance:e.tolerance})}meshMeshIntersectionPoints(e){return this.meshMeshIntersectionPolylines(e).map((e=>e.isClosed?[...e.points,e.points[0]]:e.points))}computeIntersectionPoint(e,t,r){return this.vector.add({first:e,second:this.vector.mul({vector:this.vector.sub({first:t,second:e}),scalar:r})})}}class Fe{constructor(){this.entityHandle=256,this.colorFormat="aci",this.acadVersion="AC1009"}generateDxf(e){this.colorFormat=e.colorFormat||"aci",this.acadVersion=e.acadVersion||"AC1009";const t=[];return t.push(...this.generateHeader()),t.push(...this.generateTables(e)),t.push(...this.generateBlocks()),t.push(...this.generateEntities(e)),t.push("0","EOF"),t.join("\n")}generateHeader(){const e=["0","SECTION","2","HEADER","9","$ACADVER","1",this.acadVersion];return"AC1009"===this.acadVersion?e.push("9","$DWGCODEPAGE","3","ascii","9","$HANDSEED","5","0"):e.push("9","$DWGCODEPAGE","3","ANSI_1252","9","$LASTSAVEDBY","1","bitbybit.dev","9","$HANDSEED","5","20000"),e.push("0","ENDSEC"),e}generateTables(e){const t=["0","SECTION","2","TABLES"];return"AC1009"===this.acadVersion&&t.push(...this.generateVportTable()),t.push(...this.generateLineTypeTable()),t.push(...this.generateLayerTable(e)),t.push(...this.generateStyleTable()),"AC1009"===this.acadVersion&&(t.push(...this.generateViewTable()),t.push(...this.generateUcsTable()),t.push(...this.generateAppidTable()),t.push(...this.generateDimstyleTable())),t.push("0","ENDSEC"),t}generateLineTypeTable(){const e=["0","TABLE","2","LTYPE","70","1"];return"AC1015"===this.acadVersion&&e.push("5","5","100","AcDbSymbolTable"),e.push("0","LTYPE","2","CONTINUOUS","70","AC1009"===this.acadVersion?"64":"0","3","Solid line","72","65","73","0","40","0.0"),"AC1015"===this.acadVersion&&e.splice(e.indexOf("LTYPE")+1,0,"5","14","100","AcDbSymbolTableRecord","100","AcDbLinetypeTableRecord"),e.push("0","ENDTAB"),e}generateStyleTable(){const e=["0","TABLE","2","STYLE","70","1"];return"AC1015"===this.acadVersion&&e.push("5","3","100","AcDbSymbolTable"),e.push("0","STYLE","2","STANDARD","70","0","40","0.0","41","1.0","50","0.0","71","0","42","0.2","3","txt","4",""),"AC1015"===this.acadVersion&&e.splice(e.indexOf("STYLE")+1,0,"5","11","100","AcDbSymbolTableRecord","100","AcDbTextStyleTableRecord"),e.push("0","ENDTAB"),e}generateVportTable(){return["0","TABLE","2","VPORT","70","2","0","VPORT","2","*ACTIVE","70","0","10","0.0","20","0.0","11","1.0","21","1.0","12","15.0","22","11.101231","13","0.0","23","0.0","14","0.1","24","0.1","15","0.5","25","0.5","16","0.0","26","0.0","36","1.0","17","0.0","27","0.0","37","0.0","40","22.202462","41","1.351201","42","50.0","43","0.0","44","0.0","50","0.0","51","0.0","71","0","72","100","73","1","74","1","75","1","76","0","77","0","78","0","0","ENDTAB"]}generateViewTable(){return["0","TABLE","2","VIEW","70","0","0","ENDTAB"]}generateUcsTable(){return["0","TABLE","2","UCS","70","0","0","ENDTAB"]}generateAppidTable(){return["0","TABLE","2","APPID","70","1","0","APPID","2","ACAD","70","64","0","ENDTAB"]}generateDimstyleTable(){return["0","TABLE","2","DIMSTYLE","70","0","0","ENDTAB"]}generateBlocks(){return["0","SECTION","2","BLOCKS","0","ENDSEC"]}generateLayerTable(e){const t=new Set;e.dxfPathsParts&&e.dxfPathsParts.forEach((e=>{e.layer&&t.add(e.layer)})),0===t.size&&t.add("0");const r=["0","TABLE","2","LAYER","70",t.size.toString()];return"AC1015"===this.acadVersion&&r.splice(4,0,"5","2","100","AcDbSymbolTable"),t.forEach((e=>{if(r.push("0","LAYER","2",e,"70","0","62","7","6","CONTINUOUS"),"AC1015"===this.acadVersion){const e=r.lastIndexOf("LAYER")+1;r.splice(e,0,"5",this.getNextHandle(),"100","AcDbSymbolTableRecord","100","AcDbLayerTableRecord")}})),r.push("0","ENDTAB"),r}generateEntities(e){const t=["0","SECTION","2","ENTITIES"];return e.dxfPathsParts&&e.dxfPathsParts.forEach((e=>{e.paths&&e.paths.forEach((r=>{r.segments&&r.segments.forEach((r=>{t.push(...this.generateSegmentEntity(r,e))}))}))})),t.push("0","ENDSEC"),t}generateSegmentEntity(e,t){return this.isLineSegment(e)?this.generateLineEntity(e,t):this.isArcSegment(e)?this.generateArcEntity(e,t):this.isCircleSegment(e)?this.generateCircleEntity(e,t):this.isPolylineSegment(e)?this.generatePolylineEntity(e,t):this.isSplineSegment(e)?this.generateSplineEntity(e,t):[]}isLineSegment(e){return void 0!==e.start&&void 0!==e.end&&void 0===e.radius}isArcSegment(e){return void 0!==e.center&&void 0!==e.radius&&void 0!==e.startAngle&&void 0!==e.endAngle}isCircleSegment(e){return void 0!==e.center&&void 0!==e.radius&&void 0===e.startAngle}isPolylineSegment(e){return void 0!==e.points&&Array.isArray(e.points)}isSplineSegment(e){return void 0!==e.controlPoints&&Array.isArray(e.controlPoints)}generateLineEntity(e,t){const r=["0","LINE","8",t.layer||"0"];if(void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>r.push(e.code,e.value))),r.push("10",e.start[0].toFixed(6),"20",e.start[1].toFixed(6),"30","0.00","11",e.end[0].toFixed(6),"21",e.end[1].toFixed(6),"31","0.00"),"AC1015"===this.acadVersion){r.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const e=r.indexOf("10");r.splice(e,0,"100","AcDbLine")}return r}generateCircleEntity(e,t){const r=["0","CIRCLE","8",t.layer||"0"];if(void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>r.push(e.code,e.value))),r.push("10",e.center[0].toFixed(6),"20",e.center[1].toFixed(6),"30","0.00","40",e.radius.toFixed(6)),"AC1015"===this.acadVersion){r.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const e=r.indexOf("10");r.splice(e,0,"100","AcDbCircle")}return r}generateArcEntity(e,t){const r=["0","ARC","8",t.layer||"0"];if("AC1009"===this.acadVersion&&r.push("6"," "),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>r.push(e.code,e.value))),r.push("10",e.center[0].toFixed(6),"20",e.center[1].toFixed(6),"30","AC1009"===this.acadVersion?"":"0.0","40",e.radius.toFixed(6),"50",e.startAngle.toFixed(6),"51",e.endAngle.toFixed(6)),"AC1015"===this.acadVersion){r.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const e=r.indexOf("10");r.splice(e,0,"100","AcDbCircle");const t=r.indexOf("50");r.splice(t,0,"100","AcDbArc")}return r}generatePolylineEntity(e,t){const r=["0","LWPOLYLINE","8",t.layer||"0"];void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>r.push(e.code,e.value)));const i=e.closed||e.points.length>2&&this.isClosedPolyline(e.points);if(r.push("90",e.points.length.toString(),"70",i?"1":"0"),"AC1015"===this.acadVersion){r.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const e=r.indexOf("90");r.splice(e,0,"100","AcDbPolyline")}return e.points.forEach(((t,i)=>{if(r.push("10",t[0].toFixed(6),"20",t[1].toFixed(6)),e.bulges&&e.bulges.length>i){const t=e.bulges[i];0!==t&&r.push("42",t.toFixed(6))}})),r}generateSplineEntity(e,t){const r=["0","SPLINE","8",t.layer||"0"];void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>r.push(e.code,e.value)));const i=e.degree||3,s=e.controlPoints.length,o=s+i+1,n=e.closed?9:8;if(r.push("210","0.0","220","0.0","230","1.0","70",n.toString(),"71",i.toString(),"72",o.toString(),"73",s.toString(),"74","0"),"AC1015"===this.acadVersion){r.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const e=r.indexOf("210");r.splice(e,0,"100","AcDbSpline")}for(let e=0;e<o;e++)r.push("40",e.toFixed(6));return e.controlPoints.forEach((e=>{r.push("10",e[0].toFixed(6),"20",e[1].toFixed(6),"30","0.0")})),r}isClosedPolyline(e){if(e.length<3)return!1;const t=e[0],r=e[e.length-1];return Math.abs(t[0]-r[0])<1e-10&&Math.abs(t[1]-r[1])<1e-10}getNextHandle(){return(++this.entityHandle).toString(16).toUpperCase()}convertColorToDxf(e){if(/^\d+$/.test(e)){const t=parseInt(e,10);if(t>=1&&t<=255)return[{code:"62",value:e}]}if(e.startsWith("#")){const t=e.substring(1);if(6===t.length){const e=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return"truecolor"===this.colorFormat?[{code:"62",value:"256"},{code:"420",value:(65536*e+256*r+i).toString()}]:[{code:"62",value:this.rgbToAciColorIndex(e,r,i).toString()}]}}return[{code:"62",value:"7"}]}rgbToAciColorIndex(e,t,r){const i={1:[255,0,0],2:[255,255,0],3:[0,255,0],4:[0,255,255],5:[0,0,255],6:[255,0,255],7:[255,255,255],8:[128,128,128],9:[192,192,192]};if(e<30&&t<30&&r<30)return 7;let s=7,o=1/0;for(const[n,[a,c,h]]of Object.entries(i)){const i=Math.sqrt(Math.pow(e-a,2)+Math.pow(t-c,2)+Math.pow(r-h,2));i<o&&(o=i,s=parseInt(n))}return s}}class Re{constructor(){this.dxfGenerator=new Fe}lineSegment(e){return e}arcSegment(e){return e}circleSegment(e){return e}polylineSegment(e){return e}splineSegment(e){return e}path(e){return e}pathsPart(e){return e}dxfCreate(e){return this.dxfGenerator.generateDxf(e)}}class Le{constructor(){this.dxf=new Re}}class Me{}var Be;Me.BITBYBIT_CDN_URL="https://git-cdn.bitbybit.dev/v1.0.0-rc.1",function(e){let t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x;!function(e){e.arc="arc",e.intersection="intersection",e.tangent="tangent"}(t=e.joinTypeEnum||(e.joinTypeEnum={})),function(e){e.skin="skin",e.pipe="pipe",e.rectoVerso="rectoVerso"}(r=e.bRepOffsetModeEnum||(e.bRepOffsetModeEnum={})),function(e){e.approxChordLength="approxChordLength",e.approxCentripetal="approxCentripetal",e.approxIsoParametric="approxIsoParametric"}(i=e.approxParametrizationTypeEnum||(e.approxParametrizationTypeEnum={})),function(e){e.outside="outside",e.inside="inside",e.middle="middle"}(s=e.directionEnum||(e.directionEnum={})),function(e){e.iges="iges",e.step="step"}(o=e.fileTypeEnum||(e.fileTypeEnum={})),function(e){e.forward="forward",e.reversed="reversed",e.internal="internal",e.external="external"}(n=e.topAbsOrientationEnum||(e.topAbsOrientationEnum={})),function(e){e.in="in",e.out="out",e.on="on",e.unknown="unknown"}(a=e.topAbsStateEnum||(e.topAbsStateEnum={})),function(e){e.unknown="unknown",e.vertex="vertex",e.edge="edge",e.wire="wire",e.face="face",e.shell="shell",e.solid="solid",e.compSolid="compSolid",e.compound="compound",e.shape="shape"}(c=e.shapeTypeEnum||(e.shapeTypeEnum={})),function(e){e.unqualified="unqualified",e.enclosing="enclosing",e.enclosed="enclosed",e.outside="outside",e.noqualifier="noqualifier"}(h=e.gccEntPositionEnum||(e.gccEntPositionEnum={})),function(e){e.keepSide1="keepSide1",e.keepSide2="keepSide2",e.all="all"}(l=e.positionResultEnum||(e.positionResultEnum={})),function(e){e.none="none",e.keepSide1="keepSide1",e.keepSide2="keepSide2"}(d=e.circleInclusionEnum||(e.circleInclusionEnum={})),function(e){e.none="none",e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(u=e.twoCircleInclusionEnum||(e.twoCircleInclusionEnum={})),function(e){e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(p=e.fourSidesStrictEnum||(e.fourSidesStrictEnum={})),function(e){e.outside="outside",e.inside="inside"}(f=e.twoSidesStrictEnum||(e.twoSidesStrictEnum={})),function(e){e.allWithAll="allWithAll",e.inOrder="inOrder",e.inOrderClosed="inOrderClosed"}(v=e.combinationCirclesForFaceEnum||(e.combinationCirclesForFaceEnum={})),function(e){e[e.curve=0]="curve",e[e.edge=1]="edge",e[e.wire=2]="wire",e[e.face=3]="face"}(g=e.typeSpecificityEnum||(e.typeSpecificityEnum={})),function(e){e.all="all",e.closest="closest",e.furthest="furthest",e.closestAndFurthest="closestAndFurthest"}(m=e.pointProjectionTypeEnum||(e.pointProjectionTypeEnum={})),function(e){e.isCorrectedFrenet="isCorrectedFrenet",e.isFixed="isFixed",e.isFrenet="isFrenet",e.isConstantNormal="isConstantNormal",e.isDarboux="isDarboux",e.isGuideAC="isGuideAC",e.isGuidePlan="isGuidePlan",e.isGuideACWithContact="isGuideACWithContact",e.isGuidePlanWithContact="isGuidePlanWithContact",e.isDiscreteTrihedron="isDiscreteTrihedron"}(y=e.geomFillTrihedronEnum||(e.geomFillTrihedronEnum={})),function(e){e.aci="aci",e.truecolor="truecolor"}(S=e.dxfColorFormatEnum||(e.dxfColorFormatEnum={})),function(e){e.AC1009="AC1009",e.AC1015="AC1015"}(w=e.dxfAcadVersionEnum||(e.dxfAcadVersionEnum={})),function(e){e.none="none",e.arrow="arrow"}(b=e.dimensionEndTypeEnum||(e.dimensionEndTypeEnum={})),e.DecomposedMeshDto=class{constructor(e,t){void 0!==e&&(this.faceList=e),void 0!==t&&(this.edgeList=t)}},e.DecomposedFaceDto=class{},e.DecomposedEdgeDto=class{},e.ShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.PointDto=class{constructor(e){this.point=[0,0,0],void 0!==e&&(this.point=e)}},e.XYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.ConstraintTanLinesFromPtToCircleDto=class{constructor(e,t,r,i,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==s&&(this.circleRemainder=s)}},e.ConstraintTanLinesFromTwoPtsToCircleDto=class{constructor(e,t,r,i,s,o){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point1=t),void 0!==r&&(this.point1=r),void 0!==i&&(this.tolerance=i),void 0!==s&&(this.positionResult=s),void 0!==o&&(this.circleRemainder=o)}},e.ConstraintTanLinesOnTwoCirclesDto=class{constructor(e,t,r,i,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainders=u.none,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==s&&(this.circleRemainders=s)}},e.ConstraintTanCirclesOnTwoCirclesDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.ConstraintTanCirclesOnCircleAndPntDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.CurveAndSurfaceDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.surface=t)}},e.FilletTwoEdgesInPlaneDto=class{constructor(e,t,r,i,s,o){this.planeOrigin=[0,0,0],this.planeDirection=[0,1,0],this.radius=.3,this.solution=-1,void 0!==e&&(this.edge1=e),void 0!==t&&(this.edge2=t),void 0!==r&&(this.planeOrigin=r),void 0!==i&&(this.planeDirection=i),void 0!==s&&(this.radius=s),void 0!==o&&(this.solution=o)}},e.ClosestPointsOnShapeFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.BoundingBoxDto=class{constructor(e){void 0!==e&&(this.bbox=e)}},e.BoundingBoxPropsDto=class{constructor(e,t,r,i){this.min=[0,0,0],this.max=[0,0,0],this.center=[0,0,0],this.size=[0,0,0],void 0!==e&&(this.min=e),void 0!==t&&(this.max=t),void 0!==r&&(this.center=r),void 0!==i&&(this.size=i)}},e.BoundingSpherePropsDto=class{constructor(e,t){this.center=[0,0,0],this.radius=0,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.SplitWireOnPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.ClosestPointsOnShapesFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t)}},e.ClosestPointsBetweenTwoShapesDto=class{constructor(e,t){void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t)}},e.FaceFromSurfaceAndWireDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.surface=e),void 0!==t&&(this.wire=t),void 0!==r&&(this.inside=r)}},e.WireOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t)}},e.DrawShapeDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==s&&(this.faceMaterial=s),void 0!==o&&(this.faceColour=o),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==n&&(this.edgeWidth=n),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==y&&(this.faceIndexColour=y),void 0!==S&&(this.drawTwoSided=S),void 0!==w&&(this.backFaceColour=w),void 0!==b&&(this.backFaceOpacity=b)}},e.DrawShapesDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==s&&(this.faceMaterial=s),void 0!==o&&(this.faceColour=o),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==n&&(this.edgeWidth=n),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==y&&(this.faceIndexColour=y),void 0!==S&&(this.drawTwoSided=S),void 0!==w&&(this.backFaceColour=w),void 0!==b&&(this.backFaceOpacity=b)}},e.FaceSubdivisionDto=class{constructor(e,t,r,i,s,o,n,a,c){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepU=!1,this.removeStartEdgeU=!1,this.removeEndEdgeU=!1,this.shiftHalfStepV=!1,this.removeStartEdgeV=!1,this.removeEndEdgeV=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepU=i),void 0!==s&&(this.removeStartEdgeU=s),void 0!==o&&(this.removeEndEdgeU=o),void 0!==n&&(this.shiftHalfStepV=n),void 0!==a&&(this.removeStartEdgeV=a),void 0!==c&&(this.removeEndEdgeV=c)}},e.FaceSubdivisionToWiresDto=class{constructor(e,t,r,i,s,o){this.nrDivisions=10,this.isU=!0,this.shiftHalfStep=!1,this.removeStart=!1,this.removeEnd=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisions=t),void 0!==r&&(this.isU=r),void 0!==i&&(this.shiftHalfStep=i),void 0!==s&&(this.removeStart=s),void 0!==o&&(this.removeEnd=o)}},e.FaceSubdivideToRectangleWiresDto=class{constructor(e,t,r,i,s,o,n,a,c){this.nrRectanglesU=10,this.nrRectanglesV=10,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==s&&(this.scalePatternV=s),void 0!==o&&(this.filletPattern=o),void 0!==n&&(this.inclusionPattern=n),void 0!==a&&(this.offsetFromBorderU=a),void 0!==c&&(this.offsetFromBorderV=c)}},e.FaceSubdivideToHexagonWiresDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,this.extendUUp=!1,this.extendUBottom=!1,this.extendVUp=!1,this.extendVBottom=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==s&&(this.scalePatternU=s),void 0!==o&&(this.scalePatternV=o),void 0!==n&&(this.filletPattern=n),void 0!==a&&(this.inclusionPattern=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h),void 0!==l&&(this.extendUUp=l),void 0!==d&&(this.extendUBottom=d),void 0!==u&&(this.extendVUp=u),void 0!==p&&(this.extendVBottom=p)}},e.FaceSubdivideToHexagonHolesDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==s&&(this.holesToFaces=s),void 0!==o&&(this.scalePatternU=o),void 0!==n&&(this.scalePatternV=n),void 0!==a&&(this.filletPattern=a),void 0!==c&&(this.inclusionPattern=c),void 0!==h&&(this.offsetFromBorderU=h),void 0!==l&&(this.offsetFromBorderV=l)}},e.FaceSubdivideToRectangleHolesDto=class{constructor(e,t,r,i,s,o,n,a,c,h){this.nrRectanglesU=10,this.nrRectanglesV=10,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==s&&(this.scalePatternV=s),void 0!==o&&(this.filletPattern=o),void 0!==n&&(this.inclusionPattern=n),void 0!==a&&(this.holesToFaces=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h)}},e.FaceSubdivisionControlledDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepNthU=0,this.shiftHalfStepUOffsetN=0,this.removeStartEdgeNthU=0,this.removeStartEdgeUOffsetN=0,this.removeEndEdgeNthU=0,this.removeEndEdgeUOffsetN=0,this.shiftHalfStepNthV=0,this.shiftHalfStepVOffsetN=0,this.removeStartEdgeNthV=0,this.removeStartEdgeVOffsetN=0,this.removeEndEdgeNthV=0,this.removeEndEdgeVOffsetN=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepNthU=i),void 0!==s&&(this.shiftHalfStepUOffsetN=s),void 0!==o&&(this.removeStartEdgeNthU=o),void 0!==n&&(this.removeStartEdgeUOffsetN=n),void 0!==a&&(this.removeEndEdgeNthU=a),void 0!==c&&(this.removeEndEdgeUOffsetN=c),void 0!==h&&(this.shiftHalfStepNthV=h),void 0!==l&&(this.shiftHalfStepVOffsetN=l),void 0!==d&&(this.removeStartEdgeNthV=d),void 0!==u&&(this.removeStartEdgeVOffsetN=u),void 0!==p&&(this.removeEndEdgeNthV=p),void 0!==f&&(this.removeEndEdgeVOffsetN=f)}},e.FaceLinearSubdivisionDto=class{constructor(e,t,r,i,s,o,n){this.isU=!0,this.param=.5,this.nrPoints=10,this.shiftHalfStep=!1,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r),void 0!==i&&(this.nrPoints=i),void 0!==s&&(this.shiftHalfStep=s),void 0!==o&&(this.removeStartPoint=o),void 0!==n&&(this.removeEndPoint=n)}},e.WireAlongParamDto=class{constructor(e,t,r){this.isU=!0,this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r)}},e.WiresAlongParamsDto=class{constructor(e,t,r){this.isU=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.params=r)}},e.DataOnUVDto=class{constructor(e,t,r){this.paramU=.5,this.paramV=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.paramU=t),void 0!==r&&(this.paramV=r)}},e.DataOnUVsDto=class{constructor(e,t){this.paramsUV=[[.5,.5]],void 0!==e&&(this.shape=e),void 0!==t&&(this.paramsUV=t)}},e.PolygonDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolygonsDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polygons=e),void 0!==t&&(this.returnCompound=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolylineBaseDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesBaseDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.LineBaseDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.LinesBaseDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.SegmentBaseDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsBaseDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.TriangleBaseDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.MeshBaseDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.PolylinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.returnCompound=t)}},e.SquareDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.RectangleDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}};class T{constructor(e,t,r,i,o,n,a,c){this.widthFirst=1,this.lengthFirst=2,this.widthSecond=.5,this.lengthSecond=2,this.align=s.outside,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.widthFirst=e),void 0!==t&&(this.lengthFirst=t),void 0!==r&&(this.widthSecond=r),void 0!==i&&(this.lengthSecond=i),void 0!==o&&(this.align=o),void 0!==n&&(this.rotation=n),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}e.LPolygonDto=T;class P{constructor(e,t,r,i,s,o,n,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=pe.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==s&&(this.alignment=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}e.IBeamProfileDto=P;class C{constructor(e,t,r,i,s,o,n,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=pe.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==s&&(this.alignment=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}e.HBeamProfileDto=C;class k{constructor(e,t,r,i,s,o,n,a){this.width=2,this.height=2,this.webThickness=.2,this.flangeThickness=.3,this.alignment=pe.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==s&&(this.alignment=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.center=n),void 0!==a&&(this.direction=a)}}e.TBeamProfileDto=k;class D{constructor(e,t,r,i,s,o,n,a,c){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.flangeWidth=.5,this.alignment=pe.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.webThickness=r),void 0!==i&&(this.flangeThickness=i),void 0!==s&&(this.flangeWidth=s),void 0!==o&&(this.alignment=o),void 0!==n&&(this.rotation=n),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}e.UBeamProfileDto=D,e.ExtrudedSolidDto=class{constructor(e,t,r,i){this.extrusionLengthFront=1,this.extrusionLengthBack=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.extrusionLengthFront=e),void 0!==t&&(this.extrusionLengthBack=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}},e.IBeamProfileSolidDto=class extends P{constructor(e,t,r,i,s,o,n,a,c,h){super(e,t,r,i,s,o,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.HBeamProfileSolidDto=class extends C{constructor(e,t,r,i,s,o,n,a,c,h){super(e,t,r,i,s,o,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.TBeamProfileSolidDto=class extends k{constructor(e,t,r,i,s,o,n,a,c,h){super(e,t,r,i,s,o,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.UBeamProfileSolidDto=class extends D{constructor(e,t,r,i,s,o,n,a,c,h,l){super(e,t,r,i,s,o,n,a,c),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==h&&(this.extrusionLengthFront=h),void 0!==l&&(this.extrusionLengthBack=l)}},e.BoxDto=class{constructor(e,t,r,i,s){this.width=1,this.length=2,this.height=3,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.center=i),void 0!==s&&(this.originOnCenter=s)}},e.CubeDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.originOnCenter=r)}},e.BoxFromCornerDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.height=3,this.corner=[0,0,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.corner=i)}},e.SphereDto=class{constructor(e,t){this.radius=1,this.center=[0,0,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t)}},e.ConeDto=class{constructor(e,t,r,i,s,o){this.radius1=2,this.radius2=1,this.height=2,this.angle=360,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius1=e),void 0!==t&&(this.radius2=t),void 0!==r&&(this.height=r),void 0!==i&&(this.angle=i),void 0!==s&&(this.center=s),void 0!==o&&(this.direction=o)}},e.TorusDto=class{constructor(e,t,r,i,s){this.majorRadius=2,this.minorRadius=.5,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,void 0!==e&&(this.majorRadius=e),void 0!==t&&(this.minorRadius=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i),void 0!==s&&(this.angle=s)}},e.LineDto=class{constructor(e,t){this.start=[0,0,0],this.end=[0,1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineWithExtensionsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,1,0],this.extensionStart=.1,this.extensionEnd=.1,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.extensionStart=r),void 0!==i&&(this.extensionEnd=i)}},e.LinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.returnCompound=t)}},e.ArcEdgeTwoPointsTangentDto=class{constructor(e,t,r){this.start=[0,0,0],this.tangentVec=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.tangentVec=t),void 0!==r&&(this.end=r)}},e.ArcEdgeCircleTwoPointsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,0,1],this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.start=t),void 0!==r&&(this.end=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCircleTwoAnglesDto=class{constructor(e,t,r,i){this.alphaAngle1=0,this.alphaAngle2=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle1=t),void 0!==r&&(this.alphaAngle2=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCirclePointAngleDto=class{constructor(e,t,r,i){this.alphaAngle=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle=t),void 0!==i&&(this.sense=i)}},e.ArcEdgeThreePointsDto=class{constructor(e,t,r){this.start=[0,0,0],this.middle=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.middle=t),void 0!==r&&(this.end=r)}},e.CylinderDto=class{constructor(e,t,r,i,s,o){this.radius=1,this.height=2,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,this.originOnCenter=!1,void 0!==e&&(this.radius=e),void 0!==t&&(this.height=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i),void 0!==s&&(this.angle=s),void 0!==o&&(this.originOnCenter=o)}},e.CylindersOnLinesDto=class{constructor(e,t){void 0!==e&&(this.radius=e),void 0!==t&&(this.lines=t)}},e.FilletDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletShapesDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r)}},e.FilletEdgesListOneRadiusDto=class{constructor(e,t,r){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radius=r)}},e.FilletEdgeVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.FilletEdgesVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusLists=r),void 0!==i&&(this.paramsULists=i)}},e.FilletEdgesSameVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.Fillet3DWiresDto=class{constructor(e,t,r,i,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==s&&(this.indexes=s)}},e.Fillet3DWireDto=class{constructor(e,t,r,i,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==s&&(this.indexes=s)}},e.ChamferDto=class{constructor(e,t,r,i){this.distance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.distanceList=r),void 0!==i&&(this.indexes=i)}},e.ChamferEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.distanceList=r)}},e.ChamferEdgeDistAngleDto=class{constructor(e,t,r,i,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.angle=s)}},e.ChamferEdgeTwoDistancesDto=class{constructor(e,t,r,i,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance1=i),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesTwoDistancesListsDto=class{constructor(e,t,r,i,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances1=i),void 0!==s&&(this.distances2=s)}},e.ChamferEdgesTwoDistancesDto=class{constructor(e,t,r,i,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance1=i),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesDistsAnglesDto=class{constructor(e,t,r,i,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances=i),void 0!==s&&(this.angles=s)}},e.ChamferEdgesDistAngleDto=class{constructor(e,t,r,i,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.angle=s)}},e.BSplineDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BSplinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bSplines=e),void 0!==t&&(this.returnCompound=t)}},e.WireFromTwoCirclesTanDto=class{constructor(e,t,r,i,s){this.keepLines=f.outside,this.circleRemainders=p.outside,this.tolerance=1e-7,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.keepLines=r),void 0!==i&&(this.circleRemainders=i),void 0!==s&&(this.tolerance=s)}},e.FaceFromMultipleCircleTanWiresDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.circles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.FaceFromMultipleCircleTanWireCollectionsDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.listsOfCircles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.ZigZagBetweenTwoWiresDto=class{constructor(e,t,r,i,s,o){this.nrZigZags=20,this.divideByEqualDistance=!1,this.zigZagsPerEdge=!0,void 0!==e&&(this.wire1=e),void 0!==t&&(this.wire2=t),void 0!==r&&(this.nrZigZags=r),void 0!==i&&(this.inverse=i),void 0!==s&&(this.divideByEqualDistance=s),void 0!==o&&(this.zigZagsPerEdge=o)}},e.InterpolationDto=class{constructor(e,t,r){this.periodic=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.periodic=t),void 0!==r&&(this.tolerance=r)}},e.InterpolateWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.interpolations=e),void 0!==t&&(this.returnCompound=t)}},e.BezierDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BezierWeightsDto=class{constructor(e,t,r){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.weights=t),void 0!==r&&(this.closed=r)}},e.BezierWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bezierWires=e),void 0!==t&&(this.returnCompound=t)}},e.DivideDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.ProjectWireDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wire=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.ProjectPointsOnShapeDto=class{constructor(e,t,r,i){this.direction=[0,10,0],void 0!==e&&(this.points=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.projectionType=i)}},e.WiresToPointsDto=class{constructor(e,t,r,i,s,o){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==s&&(this.uTolerance=s),void 0!==o&&(this.minimumLength=o)}},e.EdgesToPointsDto=class{constructor(e,t,r,i,s,o){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==s&&(this.uTolerance=s),void 0!==o&&(this.minimumLength=o)}},e.ProjectWiresDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wires=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.DivideShapesDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.DataOnGeometryAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t)}},e.DataOnGeometryesAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.param=t)}},e.PointInFaceDto=class{constructor(e,t,r,i){this.tEdgeParam=.5,this.distance2DParam=.5,void 0!==e&&(this.face=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.tEdgeParam=r),void 0!==i&&(this.distance2DParam=i)}},e.PointsOnWireAtEqualLengthDto=class{constructor(e,t,r,i,s){this.length=.5,this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeFirst=i),void 0!==s&&(this.includeLast=s)}},e.PointsOnWireAtPatternOfLengthsDto=class{constructor(e,t,r,i,s){this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeLast=i),void 0!==s&&(this.includeLast=s)}},e.DataOnGeometryAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryesAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryAtLengthsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t)}},e.CircleDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.HexagonsInGridDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==s&&(this.flatTop=s),void 0!==o&&(this.extendTop=o),void 0!==n&&(this.extendBottom=n),void 0!==a&&(this.extendLeft=a),void 0!==c&&(this.extendRight=c),void 0!==h&&(this.scalePatternWidth=h),void 0!==l&&(this.scalePatternHeight=l),void 0!==d&&(this.filletPattern=d),void 0!==u&&(this.inclusionPattern=u)}},e.LoftDto=class{constructor(e,t){this.makeSolid=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t)}},e.LoftAdvancedDto=class{constructor(e,t,r,s,o,n,a,c,h,l,d,u){this.makeSolid=!1,this.closed=!1,this.periodic=!1,this.straight=!1,this.nrPeriodicSections=10,this.useSmoothing=!1,this.maxUDegree=3,this.tolerance=1e-7,this.parType=i.approxCentripetal,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t),void 0!==r&&(this.closed=r),void 0!==s&&(this.periodic=s),void 0!==o&&(this.straight=o),void 0!==n&&(this.nrPeriodicSections=n),void 0!==a&&(this.useSmoothing=a),void 0!==c&&(this.maxUDegree=c),void 0!==h&&(this.tolerance=h),void 0!==l&&(this.parType=l),void 0!==d&&(this.startVertex=d),void 0!==u&&(this.endVertex=u)}},e.OffsetDto=class{constructor(e,t,r,i){this.distance=.2,this.tolerance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.face=t),void 0!==r&&(this.distance=r),void 0!==i&&(this.tolerance=i)}},e.OffsetAdvancedDto=class{constructor(e,r,i,s,o,n){this.distance=.2,this.tolerance=.1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.tolerance=s),void 0!==o&&(this.joinType=o),void 0!==n&&(this.removeIntEdges=n)}},e.RevolveDto=class{constructor(e,t,r,i){this.angle=360,this.direction=[0,1,0],this.copy=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.copy=i)}},e.ShapeShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.WiresOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t)}},e.PipeWiresCylindricalDto=class{constructor(e,t,r,i,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=y.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==s&&(this.forceApproxC1=s)}},e.PipeWireCylindricalDto=class{constructor(e,t,r,i,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=y.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==s&&(this.forceApproxC1=s)}},e.PipePolygonWireNGonDto=class{constructor(e,t,r,i,s,o){this.radius=.1,this.nrCorners=6,this.makeSolid=!0,this.trihedronEnum=y.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.makeSolid=i),void 0!==s&&(this.trihedronEnum=s),void 0!==o&&(this.forceApproxC1=o)}},e.ExtrudeDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t)}},e.ExtrudeShapesDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.direction=t)}},e.SplitDto=class{constructor(e,t){this.localFuzzyTolerance=1e-4,this.nonDestructive=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.UnionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.DifferenceDto=class{constructor(e,t,r){this.keepEdges=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.keepEdges=r)}},e.IntersectionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.ShapeDto=class{constructor(e){void 0!==e&&(this.shape=e)}},e.MeshMeshIntersectionTwoShapesDto=class{constructor(e,t,r,i){this.precision1=.01,this.precision2=.01,void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t),void 0!==r&&(this.precision1=r),void 0!==i&&(this.precision2=i)}},e.MeshMeshesIntersectionOfShapesDto=class{constructor(e,t,r,i){this.precision=.01,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.precisionShapes=i)}},e.CompareShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.otherShape=t)}},e.FixSmallEdgesInWireDto=class{constructor(e,t,r){this.lockvtx=!1,this.precsmall=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.lockvtx=t),void 0!==r&&(this.precsmall=r)}},e.BasicShapeRepairDto=class{constructor(e,t,r,i){this.precision=.001,this.maxTolerance=.01,this.minTolerance=1e-4,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.maxTolerance=r),void 0!==i&&(this.minTolerance=i)}},e.FixClosedDto=class{constructor(e,t){this.precision=-.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t)}},e.ShapesWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.ShapeWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.tolerance=t)}},e.ShapeIndexDto=class{constructor(e,t){this.index=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.EdgeIndexDto=class{constructor(e,t){this.index=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.RotationExtrudeDto=class{constructor(e,t,r,i){this.height=1,this.angle=360,this.makeSolid=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.height=t),void 0!==r&&(this.angle=r),void 0!==i&&(this.makeSolid=i)}},e.ThickSolidByJoinDto=class{constructor(e,r,i,s,o,n,a,c){this.offset=1,this.tolerance=.001,this.intersection=!1,this.selfIntersection=!1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.shapes=r),void 0!==i&&(this.offset=i),void 0!==s&&(this.tolerance=s),void 0!==o&&(this.intersection=o),void 0!==n&&(this.selfIntersection=n),void 0!==a&&(this.joinType=a),void 0!==c&&(this.removeIntEdges=c)}},e.TransformDto=class{constructor(e,t,r,i,s){this.translation=[0,0,0],this.rotationAxis=[0,1,0],this.rotationAngle=0,this.scaleFactor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t),void 0!==r&&(this.rotationAxis=r),void 0!==i&&(this.rotationAngle=i),void 0!==s&&(this.scaleFactor=s)}},e.TransformShapesDto=class{constructor(e,t,r,i,s){this.translations=[[0,0,0]],this.rotationAxes=[[0,1,0]],this.rotationAngles=[0],this.scaleFactors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t),void 0!==r&&(this.rotationAxes=r),void 0!==i&&(this.rotationAngles=i),void 0!==s&&(this.scaleFactors=s)}},e.TranslateDto=class{constructor(e,t){this.translation=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t)}},e.TranslateShapesDto=class{constructor(e,t){this.translations=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t)}},e.AlignNormAndAxisDto=class{constructor(e,t,r,i,s,o,n){this.fromOrigin=[0,0,0],this.fromNorm=[1,0,0],this.fromAx=[0,0,1],this.toOrigin=[0,1,0],this.toNorm=[0,1,0],this.toAx=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromNorm=r),void 0!==i&&(this.fromAx=i),void 0!==s&&(this.toOrigin=s),void 0!==o&&(this.toNorm=o),void 0!==n&&(this.toAx=n)}},e.AlignDto=class{constructor(e,t,r,i,s){this.fromOrigin=[0,0,0],this.fromDirection=[0,0,1],this.toOrigin=[0,1,0],this.toDirection=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromDirection=r),void 0!==i&&(this.toOrigin=i),void 0!==s&&(this.toDirection=s)}},e.AlignShapesDto=class{constructor(e,t,r,i,s){this.fromOrigins=[[0,0,0]],this.fromDirections=[[0,0,1]],this.toOrigins=[[0,1,0]],this.toDirections=[[0,1,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.fromOrigins=t),void 0!==r&&(this.fromDirections=r),void 0!==i&&(this.toOrigins=i),void 0!==s&&(this.toDirections=s)}},e.MirrorDto=class{constructor(e,t,r){this.origin=[0,0,0],this.direction=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.direction=r)}},e.MirrorShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.directions=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.directions=r)}},e.MirrorAlongNormalDto=class{constructor(e,t,r){this.origin=[0,0,0],this.normal=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.normal=r)}},e.MirrorAlongNormalShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.normals=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.normals=r)}},e.AlignAndTranslateDto=class{constructor(e,t,r){this.direction=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.center=r)}},e.UnifySameDomainDto=class{constructor(e,t,r,i){this.unifyEdges=!0,this.unifyFaces=!0,this.concatBSplines=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.unifyEdges=t),void 0!==r&&(this.unifyFaces=r),void 0!==i&&(this.concatBSplines=i)}},e.FilterFacesPointsDto=class{constructor(e,t,r,i,s,o,n,a,c,h){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,this.flatPointsArray=!0,void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==s&&(this.gapTolerance=s),void 0!==o&&(this.keepIn=o),void 0!==n&&(this.keepOn=n),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c),void 0!==h&&(this.flatPointsArray=h)}},e.FilterFacePointsDto=class{constructor(e,t,r,i,s,o,n,a,c){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==s&&(this.gapTolerance=s),void 0!==o&&(this.keepIn=o),void 0!==n&&(this.keepOn=n),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c)}},e.FilterSolidPointsDto=class{constructor(e,t,r,i,s,o,n){this.tolerance=1e-4,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.keepIn=i),void 0!==s&&(this.keepOn=s),void 0!==o&&(this.keepOut=o),void 0!==n&&(this.keepUnknown=n)}},e.AlignAndTranslateShapesDto=class{constructor(e,t,r){this.directions=[[0,1,0]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.directions=t),void 0!==r&&(this.centers=r)}},e.RotateDto=class{constructor(e,t,r){this.axis=[0,0,1],this.angle=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.angle=r)}},e.RotateAroundCenterDto=class{constructor(e,t,r,i){this.angle=0,this.center=[0,0,0],this.axis=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.center=r),void 0!==i&&(this.axis=i)}},e.RotateShapesDto=class{constructor(e,t,r){this.angles=[0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.axes=t),void 0!==r&&(this.angles=r)}},e.RotateAroundCenterShapesDto=class{constructor(e,t,r,i){this.angles=[0],this.centers=[[0,0,0]],this.axes=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.angles=t),void 0!==r&&(this.centers=r),void 0!==i&&(this.axes=i)}},e.ScaleDto=class{constructor(e,t){this.factor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.factor=t)}},e.ScaleShapesDto=class{constructor(e,t){this.factors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.factors=t)}},e.Scale3DDto=class{constructor(e,t,r){this.scale=[1,1,1],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.scale=t),void 0!==r&&(this.center=r)}},e.Scale3DShapesDto=class{constructor(e,t,r){this.scales=[[1,1,1]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.scales=t),void 0!==r&&(this.centers=r)}},e.ShapeToMeshDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.ShapeFacesToPolygonPointsDto=class{constructor(e,t,r,i){this.precision=.01,this.adjustYtoZ=!1,this.reversedPoints=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.reversedPoints=i)}},e.ShapesToMeshesDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.SaveStepDto=class{constructor(e,t,r,i){this.fileName="shape.step",this.adjustYtoZ=!1,this.fromRightHanded=!1,this.tryDownload=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.tryDownload=i)}},e.SaveStlDto=class{constructor(e,t,r,i,s,o){this.fileName="shape.stl",this.precision=.01,this.adjustYtoZ=!1,this.tryDownload=!0,this.binary=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.adjustYtoZ=i),void 0!==s&&(this.tryDownload=s),void 0!==o&&(this.binary=o)}},e.ShapeToDxfPathsDto=class{constructor(e,t,r,i,s,o){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==s&&(this.uTolerance=s),void 0!==o&&(this.minimumLength=o)}},e.DxfPathsWithLayerDto=class{constructor(e,t,r){this.layer="Default",this.color="#000000",void 0!==e&&(this.paths=e),void 0!==t&&(this.layer=t),void 0!==r&&(this.color=r)}},e.DxfPathsPartsListDto=class{constructor(e,t,r,i){this.colorFormat=S.aci,this.acadVersion=w.AC1009,this.fileName="bitbybit-dev.dxf",this.tryDownload=!0,void 0!==e&&(this.pathsParts=e),void 0!==t&&(this.colorFormat=t),void 0!==r&&(this.acadVersion=r),void 0!==i&&(this.tryDownload=i)}},e.SaveDxfDto=class{constructor(e,t,r,i,s,o,n,a){this.fileName="shape.dxf",this.tryDownload=!0,this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.tryDownload=r),void 0!==i&&(this.angularDeflection=i),void 0!==s&&(this.curvatureDeflection=s),void 0!==o&&(this.minimumOfPoints=o),void 0!==n&&(this.uTolerance=n),void 0!==a&&(this.minimumLength=a)}},e.ImportStepIgesFromTextDto=class{constructor(e,t,r){this.fileType=o.step,this.adjustZtoY=!0,void 0!==e&&(this.text=e),void 0!==t&&(this.fileType=t),void 0!==r&&(this.adjustZtoY=r)}},e.ImportStepIgesDto=class{constructor(e,t){this.adjustZtoY=!0,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.adjustZtoY=t)}},e.LoadStepOrIgesDto=class{constructor(e,t,r){this.fileName="shape.step",this.adjustZtoY=!0,void 0!==e&&(this.filetext=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustZtoY=r)}},e.ParseStepAssemblyToJsonDto=class{constructor(e){void 0!==e&&(this.stepData=e)}},e.ConvertStepToGltfDto=class{constructor(e){this.meshPrecision=.1,void 0!==e&&(this.stepData=e)}},function(e){e.empty="empty",e.product="product",e.instance="instance",e.instanceOrProduct="instanceOrProduct",e.productOrInstance="productOrInstance",e.productAndInstance="productAndInstance",e.productAndInstanceAndOcaf="productAndInstanceAndOcaf"}(E=e.gltfNameFormatEnum||(e.gltfNameFormatEnum={})),function(e){e.compact="compact",e.mat4="mat4",e.trs="trs"}(x=e.gltfTransformFormatEnum||(e.gltfTransformFormatEnum={})),e.ConvertStepToGltfAdvancedDto=class{constructor(e){this.readColors=!0,this.readNames=!0,this.readMaterials=!0,this.readLayers=!1,this.readProps=!1,this.meshDeflection=.1,this.meshAngle=.5,this.meshParallel=!0,this.faceCountThreshold=5e4,this.mergeFaces=!0,this.splitIndices16=!0,this.parallelWrite=!0,this.embedTextures=!0,this.forceUVExport=!1,this.nodeNameFormat=E.instance,this.meshNameFormat=E.instance,this.transformFormat=x.compact,this.adjustZtoY=!0,this.scale=1,void 0!==e&&(this.stepData=e)}},e.BuildAssemblyDocumentDto=class{constructor(e,t){void 0!==e&&(this.structure=e),void 0!==t&&(this.existingDocument=t)}},e.CreateAssemblyPartDto=class{constructor(e,t,r,i){void 0!==e&&(this.id=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.name=r),void 0!==i&&(this.colorRgba=i)}},e.CreateAssemblyNodeDto=class{constructor(e,t,r,i){this.colorRgba={r:.5,g:.5,b:.5,a:1},void 0!==e&&(this.id=e),void 0!==t&&(this.name=t),void 0!==r&&(this.parentId=r),void 0!==i&&(this.colorRgba=i)}},e.CreateInstanceNodeDto=class{constructor(e,t,r,i,s,o,n,a){this.translation=[0,0,0],this.rotation=[0,0,0],this.scale=1,void 0!==e&&(this.id=e),void 0!==t&&(this.partId=t),void 0!==r&&(this.name=r),void 0!==i&&(this.parentId=i),void 0!==s&&(this.translation=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.scale=n),void 0!==a&&(this.colorRgba=a)}},e.CreatePartUpdateDto=class{constructor(e,t,r,i){void 0!==e&&(this.label=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.name=r),void 0!==i&&(this.colorRgba=i)}},e.CombineAssemblyStructureDto=class{constructor(e,t,r,i,s){this.parts=[],this.nodes=[],this.clearDocument=!1,void 0!==e&&(this.parts=e),void 0!==t&&(this.nodes=t),void 0!==r&&(this.removals=r),void 0!==i&&(this.partUpdates=i),void 0!==s&&(this.clearDocument=s)}},e.SetDocLabelColorDto=class{constructor(e,t,r,i,s,o){this.r=.5,this.g=.5,this.b=.5,this.a=1,void 0!==e&&(this.document=e),void 0!==t&&(this.label=t),void 0!==r&&(this.r=r),void 0!==i&&(this.g=i),void 0!==s&&(this.b=s),void 0!==o&&(this.a=o)}},e.SetDocLabelNameDto=class{constructor(e,t,r){this.name="Renamed",void 0!==e&&(this.document=e),void 0!==t&&(this.label=t),void 0!==r&&(this.name=r)}},e.DocumentQueryDto=class{constructor(e){void 0!==e&&(this.document=e)}},e.DocumentLabelQueryDto=class{constructor(e,t){void 0!==e&&(this.document=e),void 0!==t&&(this.label=t)}},e.LoadStepToDocDto=class{constructor(e){void 0!==e&&(this.stepData=e)}},e.ExportDocumentToStepDto=class{constructor(e,t,r,i,s,o){this.fileName="assembly.step",this.author="Bitbybit user",this.organization="Bitbybit",this.compress=!1,this.tryDownload=!1,void 0!==e&&(this.document=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.author=r),void 0!==i&&(this.organization=i),void 0!==s&&(this.compress=s),void 0!==o&&(this.tryDownload=o)}},e.ExportDocumentToGltfDto=class{constructor(e,t,r,i,s,o,n){this.meshDeflection=.1,this.meshAngle=.5,this.mergeFaces=!1,this.forceUVExport=!1,this.fileName="assembly.glb",this.tryDownload=!1,void 0!==e&&(this.document=e),void 0!==t&&(this.meshDeflection=t),void 0!==r&&(this.meshAngle=r),void 0!==i&&(this.mergeFaces=i),void 0!==s&&(this.forceUVExport=s),void 0!==o&&(this.fileName=o),void 0!==n&&(this.tryDownload=n)}},e.CompoundShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.ThisckSolidSimpleDto=class{constructor(e,t){this.offset=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t)}},e.Offset3DWireDto=class{constructor(e,t,r){this.offset=1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t),void 0!==r&&(this.direction=r)}},e.FaceFromWireDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.planar=t)}},e.FaceFromWireOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FacesFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FaceFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FacesFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FaceFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.SewDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.FaceIsoCurveAtParamDto=class{constructor(e,t,r){this.dir="u",void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t),void 0!==r&&(this.dir=r)}},e.DivideFaceToUVPointsDto=class{constructor(e,t,r,i){this.nrOfPointsU=10,this.nrOfPointsV=10,this.flat=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfPointsU=t),void 0!==r&&(this.nrOfPointsV=r),void 0!==i&&(this.flat=i)}},e.Geom2dEllipseDto=class{constructor(e,t,r,i,s){this.center=[0,0],this.direction=[1,0],this.radiusMinor=1,this.radiusMajor=2,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i),void 0!==s&&(this.sense=s)}},e.Geom2dCircleDto=class{constructor(e,t,r,i){this.center=[0,0],this.direction=[1,0],this.radius=1,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.sense=i)}};class O{constructor(e,t,r,i,s,o,n,a,c,h){this.height=6,this.innerDist=1.5,this.outerDist=3,this.nrSkirts=5,this.trunkHeight=1,this.trunkWidth=1,this.half=!1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.innerDist=t),void 0!==r&&(this.outerDist=r),void 0!==i&&(this.nrSkirts=i),void 0!==s&&(this.trunkHeight=s),void 0!==o&&(this.trunkWidth=o),void 0!==n&&(this.half=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c),void 0!==h&&(this.direction=h)}}e.ChristmasTreeDto=O;class A{constructor(e,t,r,i,s,o,n){this.center=[0,0,0],this.direction=[0,1,0],this.numRays=7,this.half=!1,void 0!==e&&(this.outerRadius=e),void 0!==t&&(this.innerRadius=t),void 0!==r&&(this.numRays=r),void 0!==i&&(this.center=i),void 0!==s&&(this.direction=s),void 0!==o&&(this.offsetOuterEdges=o),void 0!==n&&(this.half=n)}}e.StarDto=A;class F{constructor(e,t,r,i,s,o){this.center=[0,0,0],this.direction=[0,1,0],this.aroundCenter=!0,this.width=2,this.height=1,this.angle=15,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.aroundCenter=r),void 0!==i&&(this.width=i),void 0!==s&&(this.height=s),void 0!==o&&(this.angle=o)}}e.ParallelogramDto=F;class R{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.rotation=0,this.sizeApprox=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.rotation=r),void 0!==i&&(this.sizeApprox=i)}}e.Heart2DDto=R;class L{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.nrCorners=6,this.radius=1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.radius=i)}}e.NGonWireDto=L,e.EllipseDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.radiusMinor=1,this.radiusMajor=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i)}},e.HelixWireDto=class{constructor(e,t,r,i,s,o,n){this.radius=1,this.pitch=1,this.height=5,this.center=[0,0,0],this.direction=[0,1,0],this.clockwise=!1,this.tolerance=1e-4,void 0!==e&&(this.radius=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.height=r),void 0!==i&&(this.center=i),void 0!==s&&(this.direction=s),void 0!==o&&(this.clockwise=o),void 0!==n&&(this.tolerance=n)}},e.HelixWireByTurnsDto=class{constructor(e,t,r,i,s,o,n){this.radius=1,this.pitch=1,this.numTurns=5,this.center=[0,0,0],this.direction=[0,1,0],this.clockwise=!1,this.tolerance=1e-4,void 0!==e&&(this.radius=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.numTurns=r),void 0!==i&&(this.center=i),void 0!==s&&(this.direction=s),void 0!==o&&(this.clockwise=o),void 0!==n&&(this.tolerance=n)}},e.TaperedHelixWireDto=class{constructor(e,t,r,i,s,o,n,a){this.startRadius=2,this.endRadius=.5,this.pitch=1,this.height=5,this.center=[0,0,0],this.direction=[0,1,0],this.clockwise=!1,this.tolerance=1e-4,void 0!==e&&(this.startRadius=e),void 0!==t&&(this.endRadius=t),void 0!==r&&(this.pitch=r),void 0!==i&&(this.height=i),void 0!==s&&(this.center=s),void 0!==o&&(this.direction=o),void 0!==n&&(this.clockwise=n),void 0!==a&&(this.tolerance=a)}},e.FlatSpiralWireDto=class{constructor(e,t,r,i,s,o,n){this.startRadius=.5,this.endRadius=5,this.numTurns=5,this.center=[0,0,0],this.direction=[0,1,0],this.clockwise=!1,this.tolerance=1e-4,void 0!==e&&(this.startRadius=e),void 0!==t&&(this.endRadius=t),void 0!==r&&(this.numTurns=r),void 0!==i&&(this.center=i),void 0!==s&&(this.direction=s),void 0!==o&&(this.clockwise=o),void 0!==n&&(this.tolerance=n)}},e.TextWiresDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d){this.text="Hello World",this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=2,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.lineSpacing=s),void 0!==o&&(this.letterSpacing=o),void 0!==n&&(this.align=n),void 0!==a&&(this.extrudeOffset=a),void 0!==d&&(this.centerOnOrigin=d)}},e.GeomCylindricalSurfaceDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.Geom2dTrimmedCurveDto=class{constructor(e,t,r,i,s){this.u1=0,this.u2=1,this.sense=!0,this.adjustPeriodic=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.u1=t),void 0!==r&&(this.u2=r),void 0!==i&&(this.sense=i),void 0!==s&&(this.adjustPeriodic=s)}},e.Geom2dSegmentDto=class{constructor(e,t){this.start=[0,0],this.end=[1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.SliceDto=class{constructor(e,t,r){this.step=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.step=t),void 0!==r&&(this.direction=r)}},e.SliceInStepPatternDto=class{constructor(e,t,r){this.steps=[.1,.2],this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.steps=t),void 0!==r&&(this.direction=r)}},e.SimpleLinearLengthDimensionDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){this.offsetFromPoints=0,this.crossingSize=.2,this.decimalPlaces=2,this.labelSuffix="(cm)",this.labelSize=.1,this.labelOffset=.3,this.labelRotation=0,this.endType=b.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,this.labelOverwrite="1*val",this.removeTrailingZeros=!1,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromPoints=i),void 0!==s&&(this.crossingSize=s),void 0!==o&&(this.labelSuffix=o),void 0!==n&&(this.labelSize=n),void 0!==a&&(this.labelOffset=a),void 0!==c&&(this.labelRotation=c),void 0!==h&&(this.endType=h),void 0!==l&&(this.arrowSize=l),void 0!==d&&(this.arrowAngle=d),void 0!==u&&(this.arrowsFlipped=u),void 0!==p&&(this.labelFlipHorizontal=p),void 0!==f&&(this.labelFlipVertical=f),void 0!==v&&(this.labelOverwrite=v),void 0!==g&&(this.removeTrailingZeros=g)}},e.SimpleAngularDimensionDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y){this.direction1=[1,0,0],this.direction2=[0,0,1],this.center=[0,0,0],this.radius=4,this.offsetFromCenter=.5,this.extraSize=0,this.decimalPlaces=2,this.labelSuffix="(deg)",this.labelSize=.1,this.labelOffset=.3,this.radians=!1,this.endType=b.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelRotation=0,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,this.labelOverwrite="1*val",this.removeTrailingZeros=!1,void 0!==e&&(this.direction1=e),void 0!==t&&(this.direction2=t),void 0!==r&&(this.center=r),void 0!==i&&(this.radius=i),void 0!==s&&(this.offsetFromCenter=s),void 0!==o&&(this.extraSize=o),void 0!==n&&(this.radians=n),void 0!==a&&(this.labelSuffix=a),void 0!==c&&(this.labelSize=c),void 0!==h&&(this.labelOffset=h),void 0!==l&&(this.endType=l),void 0!==d&&(this.arrowSize=d),void 0!==u&&(this.arrowAngle=u),void 0!==p&&(this.arrowsFlipped=p),void 0!==f&&(this.labelRotation=f),void 0!==v&&(this.labelFlipHorizontal=v),void 0!==g&&(this.labelFlipVertical=g),void 0!==m&&(this.labelOverwrite=m),void 0!==y&&(this.removeTrailingZeros=y)}},e.PinWithLabelDto=class{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p){this.startPoint=[0,0,0],this.endPoint=[0,5,2],this.direction=[0,0,1],this.offsetFromStart=0,this.label="Pin",this.labelOffset=.3,this.labelSize=.1,this.endType=b.none,this.arrowSize=.3,this.arrowAngle=30,this.arrowsFlipped=!1,this.labelRotation=0,this.labelFlipHorizontal=!1,this.labelFlipVertical=!1,void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromStart=i),void 0!==s&&(this.label=s),void 0!==o&&(this.labelOffset=o),void 0!==n&&(this.labelSize=n),void 0!==a&&(this.endType=a),void 0!==c&&(this.arrowSize=c),void 0!==h&&(this.arrowAngle=h),void 0!==l&&(this.arrowsFlipped=l),void 0!==d&&(this.labelRotation=d),void 0!==u&&(this.labelFlipHorizontal=u),void 0!==p&&(this.labelFlipVertical=p)}},e.StarSolidDto=class extends A{constructor(e,t,r,i,s,o,n,a,c){super(e,t,r,i,s,o,n),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==a&&(this.extrusionLengthFront=a),void 0!==c&&(this.extrusionLengthBack=c)}},e.NGonSolidDto=class extends L{constructor(e,t,r,i,s,o){super(e,t,r,i),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==s&&(this.extrusionLengthFront=s),void 0!==o&&(this.extrusionLengthBack=o)}},e.ParallelogramSolidDto=class extends F{constructor(e,t,r,i,s,o,n,a){super(e,t,r,i,s,o),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==n&&(this.extrusionLengthFront=n),void 0!==a&&(this.extrusionLengthBack=a)}},e.HeartSolidDto=class extends R{constructor(e,t,r,i,s,o){super(e,t,r,i),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==s&&(this.extrusionLengthFront=s),void 0!==o&&(this.extrusionLengthBack=o)}},e.ChristmasTreeSolidDto=class extends O{constructor(e,t,r,i,s,o,n,a,c,h,l,d){super(e,t,r,i,s,o,n,a,c,h),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==l&&(this.extrusionLengthFront=l),void 0!==d&&(this.extrusionLengthBack=d)}},e.LPolygonSolidDto=class extends T{constructor(e,t,r,i,s,o,n,a,c,h){super(e,t,r,i,s,o,n,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}}}(Be||(Be={}));class Ie{starLines(e,t,r,i,s){let o=[];const n=2*Math.PI/r;for(let i=0;i<r;i++){const r=i*n,a=s||0,c=[t*Math.cos(r),a,t*Math.sin(r)],h=[e*Math.cos(r+n/2),0,e*Math.sin(r+n/2)],l=[t*Math.cos(r+n),a,t*Math.sin(r+n)];o.push({start:c,end:h}),o.push({start:h,end:l})}return i&&(o=o.slice(0,o.length/2)),o}parallelogram(e,t,r,i){const s=r*Math.PI/180;let o,n,a,c,h,l,d,u;i?(o=-e/2,n=-t/2,a=e/2,c=-t/2,h=e/2,l=t/2,d=-e/2,u=t/2):(o=0,n=0,a=e,c=0,h=e,l=t,d=0,u=t);const p=t*Math.tan(s)/2;o+=p,a+=p,h-=p,d-=p;const f=[o,0,n],v=[a,0,c],g=[h,0,l],m=[d,0,u];return[{start:f,end:v},{start:v,end:g},{start:g,end:m},{start:m,end:f}]}ngon(e,t,r){const i=2*Math.PI/e,s=[];for(let o=0;o<e;o++){const e=[r[0]+t*Math.cos(o*i),0,r[1]+t*Math.sin(o*i)],n=[r[0]+t*Math.cos((o+1)*i),0,r[1]+t*Math.sin((o+1)*i)];s.push({start:e,end:n})}return s}polygonL(e,t,r,i){return[[0,0,0],[t,0,0],[t,0,-e],[-r,0,-e],[-r,0,i],[0,0,i]]}polygonLInverted(e,t,r,i){return e>=i&&(e=i-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),r>=t&&(r=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[0,0,0],[t,0,0],[t,0,e],[r,0,e],[r,0,i],[0,0,i]]}polygonLMiddle(e,t,r,i){return e>=i&&(e=i-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),r>=t&&(r=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[r/2,0,e/2],[r/2,0,i],[-r/2,0,i],[-r/2,0,-e/2],[t,0,-e/2],[t,0,e/2]]}beamIProfile(e,t,r,i,s){const o=e/2,n=t/2,a=r/2,c=[[-o,0,n],[o,0,n],[o,0,n-i],[a,0,n-i],[a,0,-n+i],[o,0,-n+i],[o,0,-n],[-o,0,-n],[-o,0,-n+i],[-a,0,-n+i],[-a,0,n-i],[-o,0,n-i]];return this.applyBeamAlignment(c,e,t,s)}beamHProfile(e,t,r,i,s){const o=e/2,n=t/2,a=r/2,c=[[-o,0,n],[-o+i,0,n],[-o+i,0,a],[o-i,0,a],[o-i,0,n],[o,0,n],[o,0,-n],[o-i,0,-n],[o-i,0,-a],[-o+i,0,-a],[-o+i,0,-n],[-o,0,-n]];return this.applyBeamAlignment(c,e,t,s)}beamTProfile(e,t,r,i,s){const o=e/2,n=t/2,a=r/2,c=[[-o,0,n],[o,0,n],[o,0,n-i],[a,0,n-i],[a,0,-n],[-a,0,-n],[-a,0,n-i],[-o,0,n-i]];return this.applyBeamAlignment(c,e,t,s)}beamUProfile(e,t,r,i,s,o){const n=e/2,a=t/2,c=[[-n,0,a],[-n+i,0,a],[-n+i,0,-a+s],[n-r,0,-a+s],[n-r,0,a],[n,0,a],[n,0,-a],[-n,0,-a]];return this.applyBeamAlignment(c,e,t,o)}applyBeamAlignment(e,t,r,i){let s=0,o=0;switch(i){case pe.basicAlignmentEnum.topLeft:s=t/2,o=-r/2;break;case pe.basicAlignmentEnum.topMid:s=0,o=-r/2;break;case pe.basicAlignmentEnum.topRight:s=-t/2,o=-r/2;break;case pe.basicAlignmentEnum.midLeft:s=t/2,o=0;break;case pe.basicAlignmentEnum.midMid:s=0,o=0;break;case pe.basicAlignmentEnum.midRight:s=-t/2,o=0;break;case pe.basicAlignmentEnum.bottomLeft:s=t/2,o=r/2;break;case pe.basicAlignmentEnum.bottomMid:s=0,o=r/2;break;case pe.basicAlignmentEnum.bottomRight:s=-t/2,o=r/2}return e.map((e=>[e[0]+s,e[1],e[2]+o]))}}class Ue{constructor(){this.tolerance=1e-5}degToRad(e){return e*(Math.PI/180)}remap(e,t,r,i,s){return(e-t)/(r-t)*(s-i)+i}removeAllDuplicateVectors(e,t=1e-7){const r=[];return e.forEach((e=>{r.some((r=>this.vectorsTheSame(e,r,t)))||r.push(e)})),r}removeConsecutiveDuplicates(e,t=!0){const r=[];if(e.length>1){for(let t=1;t<e.length;t++){const i=e[t],s=e[t-1];this.vectorsTheSame(i,s,this.tolerance)||r.push(s),t===e.length-1&&r.push(i)}if(t){const e=r[0],t=r[r.length-1];this.vectorsTheSame(e,t,this.tolerance)&&r.pop()}}else 1===e.length&&r.push(...e);return r}vectorsTheSame(e,t,r){let i=!1;if(e.length!==t.length)return i;i=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],r)){i=!1;break}return i}approxEq(e,t,r){return Math.abs(e-t)<r}averageVector(e){return e.reduce(((e,t)=>e.map(((e,r)=>e+t[r]))),[0,0,0]).map((t=>t/e.length))}magnitude(e){return Math.sqrt(e.reduce(((e,t)=>e+t*t),0))}normalize(e){const t=this.magnitude(e);return e.map((e=>e/t))}translatePoint(e,t,r){return[e[0]+t[0]*r,e[1]+t[1]*r,e[2]+t[2]*r]}angleBetweenVectors(e,t){const r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],i=this.magnitude(e),s=this.magnitude(t);return Math.acos(r/(i*s))}distanceBetweenPoints(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}}class We{constructor(e,t){this.occ=e,this.och=t}geom2dEllipse(e){const t=[-e.direction[1],e.direction[0]],r=this.och.entitiesService.gpAx22d(e.center,e.direction,t),i=this.occ.CreateGeom2d_Ellipse(r,e.radiusMajor,e.radiusMinor);return r.delete(),i}geom2dCircle(e){const t=[-e.direction[1],e.direction[0]],r=this.och.entitiesService.gpAx22d(e.center,e.direction,t),i=this.occ.CreateGeom2d_Circle(r,e.radius);return r.delete(),i}geom2dTrimmedCurve(e){return this.occ.CreateGeom2d_TrimmedCurve(e.shape,e.u1,e.u2)}geom2dSegment(e){const t=this.och.entitiesService.gpPnt2d(e.start),r=this.och.entitiesService.gpPnt2d(e.end),i=this.occ.CreateGeom2d_Segment(t,r);return t.delete(),r.delete(),i}get2dPointFrom2dCurveOnParam(e){const t=e.shape.Value(e.param),r=[t.X(),t.Y()];return t.delete(),r}geomCircleCurve(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,Be.typeSpecificityEnum.wire)}geomEllipseCurve(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,Be.typeSpecificityEnum.wire)}}class _e{constructor(e,t){this.occ=e,this.och=t}cylindricalSurface(e){const t=this.och.entitiesService.gpAx3_4(e.center,e.direction),r=new this.occ.Geom_CylindricalSurface(t,e.radius);return t.delete(),r}surfaceFromFace(e){return this.och.surfaceFromFace(e)}}class Ne{constructor(e,t){this.curves=new We(e,t),this.surfaces=new _e(e,t)}}class He{constructor(e,t){this.occ=e,this.och=t}fromBaseLine(e){return this.line(e.line)}fromBaseLines(e){return e.lines.map((e=>this.line(e)))}fromBaseSegment(e){return this.line({start:e.segment[0],end:e.segment[1]})}fromBaseSegments(e){return e.segments.map((e=>this.line({start:e[0],end:e[1]})))}fromPoints(e){const t=[];for(let r=0;r<e.points.length-1;r++){const i=e.points[r],s=e.points[r+1];t.push(this.line({start:i,end:s}))}return t}fromBasePolyline(e){const t=e.polyline.points;return e.polyline.isClosed&&t.push(t[0]),this.fromPoints({points:t})}fromBaseTriangle(e){const t=e.triangle;return this.fromBasePolyline({polyline:{points:t,isClosed:!0}})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make edges for triangle",e)}})),t.flat()}makeEdgeFromGeom2dCurveAndSurface(e){return this.och.edgesService.makeEdgeFromGeom2dCurveAndSurface(e)}line(e){return this.och.edgesService.lineEdge(e)}arcThroughThreePoints(e){return this.och.edgesService.arcThroughThreePoints(e)}arcThroughTwoPointsAndTangent(e){return this.och.edgesService.arcThroughTwoPointsAndTangent(e)}arcFromCircleAndTwoPoints(e){return this.och.edgesService.arcFromCircleAndTwoPoints(e)}arcFromCircleAndTwoAngles(e){return this.och.edgesService.arcFromCircleAndTwoAngles(e)}arcFromCirclePointAndAngle(e){return this.och.edgesService.arcFromCirclePointAndAngle(e)}createCircleEdge(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,Be.typeSpecificityEnum.edge)}createEllipseEdge(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,Be.typeSpecificityEnum.edge)}removeInternalEdges(e){return this.occ.ShapeUpgrade_UnifySameDomain_Perform(e.shape,!0,!0,!1)}getEdge(e){return this.och.shapeGettersService.getEdge(e)}edgesToPoints(e){return this.och.edgesService.edgesToPoints(e)}reversedEdge(e){const t=e.shape.Reversed(),r=this.och.converterService.getActualTypeOfShape(t);return t.delete(),r}pointOnEdgeAtParam(e){return this.och.edgesService.pointOnEdgeAtParam(e)}pointsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtParam({shape:t,param:e.param})))}tangentOnEdgeAtParam(e){return this.och.edgesService.tangentOnEdgeAtParam(e)}tangentsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtParam({shape:t,param:e.param})))}startPointOnEdge(e){return this.och.edgesService.startPointOnEdge(e)}startPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.startPointOnEdge({shape:e})))}endPointOnEdge(e){return this.och.edgesService.endPointOnEdge(e)}endPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.endPointOnEdge({shape:e})))}pointOnEdgeAtLength(e){return this.och.edgesService.pointOnEdgeAtLength(e)}pointsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtLength({shape:t,length:e.length})))}tangentOnEdgeAtLength(e){return this.och.edgesService.tangentOnEdgeAtLength(e)}tangentsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtLength({shape:t,length:e.length})))}divideEdgeByParamsToPoints(e){return this.och.edgesService.divideEdgeByParamsToPoints(e)}divideEdgesByParamsToPoints(e){return e.shapes.map((t=>this.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}divideEdgeByEqualDistanceToPoints(e){return this.och.edgesService.divideEdgeByEqualDistanceToPoints(e)}divideEdgesByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}isEdgeLinear(e){return this.och.edgesService.isEdgeLinear(e)}isEdgeCircular(e){return this.och.edgesService.isEdgeCircular(e)}getEdges(e){return this.och.shapeGettersService.getEdges(e)}getEdgesAlongWire(e){return this.och.edgesService.getEdgesAlongWire(e)}getCircularEdgesAlongWire(e){return this.och.edgesService.getCircularEdgesAlongWire(e)}getLinearEdgesAlongWire(e){return this.och.edgesService.getLinearEdgesAlongWire(e)}getEdgeLength(e){return this.och.edgesService.getEdgeLength(e)}getEdgeLengthsOfShape(e){return this.och.edgesService.getEdgeLengthsOfShape(e)}getEdgesLengths(e){return this.och.edgesService.getEdgesLengths(e)}getEdgeCenterOfMass(e){return this.och.geomService.getLinearCenterOfMass(e)}getEdgesCentersOfMass(e){return this.och.edgesService.getEdgesCentersOfMass(e)}getCornerPointsOfEdgesForShape(e){return this.och.edgesService.getCornerPointsOfEdgesForShape(e)}getCircularEdgeCenterPoint(e){return this.och.edgesService.getCircularEdgeCenterPoint(e)}getCircularEdgeRadius(e){return this.och.edgesService.getCircularEdgeRadius(e)}getCircularEdgePlaneDirection(e){return this.och.edgesService.getCircularEdgePlaneDirection(e)}constraintTanLinesFromTwoPtsToCircle(e){return this.och.edgesService.constraintTanLinesFromTwoPtsToCircle(e)}constraintTanLinesFromPtToCircle(e){return this.och.edgesService.constraintTanLinesFromPtToCircle(e)}constraintTanLinesOnTwoCircles(e){return this.och.edgesService.constraintTanLinesOnTwoCircles(e)}constraintTanCirclesOnTwoCircles(e){return this.och.edgesService.constraintTanCirclesOnTwoCircles(e)}constraintTanCirclesOnCircleAndPnt(e){return this.och.edgesService.constraintTanCirclesOnCircleAndPnt(e)}createSymmetricPeriodicBSplineEdge(e){return this.och.edgesService.createSymmetricPeriodicBSplineEdge(e)}}class Ge{constructor(e,t){this.occ=e,this.och=t}fromBaseTriangle(e){const t=this.och.wiresService.createPolygonWire({points:e.triangle});return this.createFaceFromWire({shape:t,planar:!0})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make face for triangle",e)}})),t.flat()}createFaceFromWire(e){return this.och.facesService.createFaceFromWire(e)}createFaceFromWireOnFace(e){return this.och.facesService.createFaceFromWireOnFace(e)}createFacesFromWiresOnFace(e){return this.och.facesService.createFacesFromWiresOnFace(e)}createFaceFromWires(e){return this.och.facesService.createFaceFromWires(e)}createFacesFromWires(e){return this.och.facesService.createFacesFromWires(e)}createFaceFromWiresOnFace(e){return this.och.facesService.createFaceFromWiresOnFace(e)}faceFromSurface(e){return this.och.facesService.faceFromSurface(e)}faceFromSurfaceAndWire(e){return this.och.facesService.faceFromSurfaceAndWire(e)}getUMinBound(e){return this.och.facesService.getUMinBound(e)}getUMaxBound(e){return this.och.facesService.getUMaxBound(e)}getVMinBound(e){return this.och.facesService.getVMinBound(e)}getVMaxBound(e){return this.och.facesService.getVMaxBound(e)}subdivideToPointsControlled(e){return this.och.facesService.subdivideToPointsControlled(e)}subdivideToPoints(e){return this.och.facesService.subdivideToPoints(e)}subdivideToWires(e){return this.och.facesService.subdivideToWires(e)}subdivideToRectangleWires(e){return this.och.facesService.subdivideToRectangleWires(e)}subdivideToRectangleHoles(e){return this.och.facesService.subdivideToRectangleHoles(e)}subdivideToHexagonWires(e){return this.och.facesService.subdivideToHexagonWires(e)}subdivideToHexagonHoles(e){return this.och.facesService.subdivideToHexagonHoles(e)}subdivideToNormals(e){return this.och.facesService.subdivideToNormals(e)}subdivideToPointsOnParam(e){return this.och.facesService.subdivideToPointsOnParam(e)}wireAlongParam(e){return this.och.facesService.wireAlongParam(e)}wiresAlongParams(e){return this.och.facesService.wiresAlongParams(e)}subdivideToUVOnParam(e){return this.och.facesService.subdivideToUVOnParam(e)}subdivideToUV(e){return this.och.facesService.subdivideToUV(e)}uvOnFace(e){return this.och.facesService.uvOnFace(e)}pointsOnUVs(e){return this.och.facesService.pointsOnUVs(e)}normalsOnUVs(e){return this.och.facesService.normalsOnUVs(e)}pointOnUV(e){return this.och.facesService.pointOnUV(e)}normalOnUV(e){return this.och.facesService.faceNormalOnUV(e)}createPolygonFace(e){return this.och.facesService.createPolygonFace(e)}createCircleFace(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,Be.typeSpecificityEnum.face)}hexagonsInGrid(e){const t=this.och.wiresService.hexagonsInGrid(e);return this.och.facesService.createFacesFromWires({shapes:t,planar:!0})}createEllipseFace(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,Be.typeSpecificityEnum.face)}createSquareFace(e){return this.och.facesService.createSquareFace(e)}createRectangleFace(e){return this.och.facesService.createRectangleFace(e)}createLPolygonFace(e){const t=this.och.wiresService.createLPolygonWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createIBeamProfileFace(e){const t=this.och.wiresService.createIBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createHBeamProfileFace(e){const t=this.och.wiresService.createHBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createTBeamProfileFace(e){const t=this.och.wiresService.createTBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createUBeamProfileFace(e){const t=this.och.wiresService.createUBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createStarFace(e){const t=this.och.wiresService.createStarWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createChristmasTreeFace(e){const t=this.och.wiresService.createChristmasTreeWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createParallelogramFace(e){const t=this.och.wiresService.createParallelogramWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createHeartFace(e){const t=this.och.wiresService.createHeartWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createNGonFace(e){const t=this.och.wiresService.createNGonWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createFaceFromMultipleCircleTanWireCollections(e){return this.och.facesService.createFaceFromMultipleCircleTanWireCollections(e)}createFaceFromMultipleCircleTanWires(e){return this.och.facesService.createFaceFromMultipleCircleTanWires(e)}getFace(e){return this.och.shapeGettersService.getFace(e)}getFaces(e){return this.och.shapeGettersService.getFaces(e)}reversedFace(e){const t=e.shape.Reversed(),r=this.och.converterService.getActualTypeOfShape(t);return t.delete(),r}getFaceArea(e){return this.och.facesService.getFaceArea(e)}getFacesAreas(e){return this.och.facesService.getFacesAreas(e)}getFaceCenterOfMass(e){return this.och.facesService.getFaceCenterOfMass(e)}getFacesCentersOfMass(e){return this.och.facesService.getFacesCentersOfMass(e)}filterFacePoints(e){return this.och.facesService.filterFacePoints(e)}filterFacesPoints(e){let t=e.shapes.map((t=>this.och.facesService.filterFacePoints(Object.assign(Object.assign({},e),{shape:t}))));return e.flatPointsArray&&(t=t.flat()),t}}class Ve{constructor(e,t){this.occ=e,this.och=t}makeCompound(e){return this.och.converterService.makeCompound(e)}getShapesOfCompound(e){return this.och.shapeGettersService.getShapesOfCompound(e)}}class ze{constructor(e,t){this.occ=e,this.och=t}vertexFromXYZ(e){return this.och.verticesService.vertexFromXYZ(e)}vertexFromPoint(e){return this.och.verticesService.vertexFromPoint(e)}verticesFromPoints(e){return this.och.verticesService.verticesFromPoints(e)}verticesCompoundFromPoints(e){return this.och.verticesService.verticesCompoundFromPoints(e)}getVertices(e){return this.och.verticesService.getVertices(e)}getVerticesAsPoints(e){return this.och.verticesService.getVerticesAsPoints(e)}verticesToPoints(e){return this.och.verticesService.verticesToPoints(e)}vertexToPoint(e){return this.och.verticesService.vertexToPoint(e)}projectPoints(e){return this.och.verticesService.projectPoints(e)}}class je{constructor(e,t){this.occ=e,this.och=t}purgeInternalEdges(e){return e.shape}unifySameDomain(e){return this.occ.ShapeUpgrade_UnifySameDomain_Perform(e.shape,e.unifyEdges,e.unifyFaces,e.concatBSplines)}isClosed(e){return e.shape.Closed()}isConvex(e){return e.shape.Convex()}isChecked(e){return e.shape.Checked()}isFree(e){return e.shape.Free()}isInfinite(e){return e.shape.Infinite()}isModified(e){return e.shape.Modified()}isLocked(e){return e.shape.Locked()}isNull(e){return e.shape.IsNull()}isEqual(e){return e.shape.IsEqual(e.otherShape)}isNotEqual(e){return e.shape.IsNotEqual(e.otherShape)}isPartner(e){return e.shape.IsPartner(e.otherShape)}isSame(e){return e.shape.IsSame(e.otherShape)}getOrientation(e){const t=e.shape.Orientation();let r;return t===this.occ.TopAbs_Orientation.FORWARD?r=Be.topAbsOrientationEnum.forward:t===this.occ.TopAbs_Orientation.REVERSED?r=Be.topAbsOrientationEnum.reversed:t===this.occ.TopAbs_Orientation.INTERNAL?r=Be.topAbsOrientationEnum.internal:t===this.occ.TopAbs_Orientation.EXTERNAL&&(r=Be.topAbsOrientationEnum.external),r}getShapeType(e){return this.och.enumService.getShapeTypeEnum(e.shape)}}class $e{constructor(e,t){this.occ=e,this.och=t}sewFaces(e){return this.och.shellsService.sewFaces(e)}isClosed(e){return this.occ.BRep_Tool_IsClosed(e.shape)}getShellSurfaceArea(e){return this.och.shellsService.getShellSurfaceArea(e)}}class qe{constructor(e,t){this.occ=e,this.och=t}fromClosedShell(e){return this.och.solidsService.fromClosedShell(e)}createBox(e){return this.och.solidsService.createBox(e)}createCube(e){return this.och.solidsService.createCube(e)}createBoxFromCorner(e){return this.och.solidsService.createBoxFromCorner(e)}createCylinder(e){return this.och.solidsService.createCylinder(e)}createCylindersOnLines(e){return this.och.solidsService.createCylindersOnLines(e)}createSphere(e){return this.och.solidsService.createSphere(e)}createCone(e){return this.och.solidsService.createCone(e)}createTorus(e){return this.och.solidsService.createTorus(e)}createIBeamProfileSolid(e){const t=this.och.wiresService.createIBeamProfileWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createHBeamProfileSolid(e){const t=this.och.wiresService.createHBeamProfileWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createTBeamProfileSolid(e){const t=this.och.wiresService.createTBeamProfileWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createUBeamProfileSolid(e){const t=this.och.wiresService.createUBeamProfileWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createStarSolid(e){const t=this.och.wiresService.createStarWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createNGonSolid(e){const t=this.och.wiresService.createNGonWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createParallelogramSolid(e){const t=this.och.wiresService.createParallelogramWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createHeartSolid(e){const t=this.och.wiresService.createHeartWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createChristmasTreeSolid(e){const t=this.och.wiresService.createChristmasTreeWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createLPolygonSolid(e){const t=this.och.wiresService.createLPolygonWire(e),r=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(r,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}extrudeFaceToSolid(e,t,r,i){if(0===r&&0===i)throw e.delete(),new Error("Cannot create solid: both extrusionLengthFront and extrusionLengthBack are 0");const s=this.occ.CastToFace(e),o=this.och.facesService.getUMinBound({shape:s}),n=this.och.facesService.getUMaxBound({shape:s}),a=this.och.facesService.getVMinBound({shape:s}),c=this.och.facesService.getVMaxBound({shape:s}),h=((o+n)/2-o)/(n-o),l=((a+c)/2-a)/(c-a),d=this.och.facesService.normalOnUV({shape:s,paramU:h,paramV:l});let u;if(r>0){const t=new this.occ.gp_Vec(d[0]*r,d[1]*r,d[2]*r),i=new this.occ.BRepPrimAPI_MakePrism(e,t);u=i.Shape(),i.delete(),t.delete()}if(i>0){const t=new this.occ.gp_Vec(-d[0]*i,-d[1]*i,-d[2]*i),s=new this.occ.BRepPrimAPI_MakePrism(e,t),o=s.Shape();if(s.delete(),t.delete(),r>0){const e=this.och.booleansService.union({shapes:[u,o],keepEdges:!1});u.delete(),o.delete(),u=e}else u=o}return e.delete(),this.och.converterService.getActualTypeOfShape(u)}getSolidSurfaceArea(e){return this.och.solidsService.getSolidSurfaceArea(e)}getSolidVolume(e){return this.och.solidsService.getSolidVolume(e)}getSolidsVolumes(e){return this.och.solidsService.getSolidsVolumes(e)}getSolidCenterOfMass(e){return this.och.solidsService.getSolidCenterOfMass(e)}getSolidsCentersOfMass(e){return this.och.solidsService.getSolidsCentersOfMass(e)}getSolids(e){return this.och.solidsService.getSolids(e)}filterSolidPoints(e){return this.och.solidsService.filterSolidPoints(e)}}class Ye{constructor(e,t){this.occ=e,this.och=t}fromBaseLine(e){return this.createLineWire(e.line)}fromBaseLines(e){return e.lines.map((e=>this.createLineWire(e)))}fromBaseSegment(e){return this.createLineWire({start:e.segment[0],end:e.segment[1]})}fromBaseSegments(e){return e.segments.map((e=>this.createLineWire({start:e[0],end:e[1]})))}fromPoints(e){let t;if(e.points.length>1){const r=e.points[0],i=e.points[1];t=this.och.base.point.twoPointsAlmostEqual({point1:r,point2:i})?this.createPolygonWire({points:e.points}):this.createPolylineWire({points:e.points})}return t}fromBasePolyline(e){let t;return e.polyline.points,t=e.polyline.isClosed?this.createPolygonWire({points:e.polyline.points}):this.createPolylineWire({points:e.polyline.points}),t}fromBaseTriangle(e){const t=e.triangle;return this.fromBasePolyline({polyline:{points:t,isClosed:!0}})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make wire for triangle",e)}})),t.flat()}createPolygonWire(e){return this.och.wiresService.createPolygonWire(e)}createPolygons(e){const t=e.polygons.map((e=>this.createPolygonWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createPolylineWire(e){return this.och.wiresService.createPolylineWire(e)}createPolylines(e){const t=e.polylines.map((e=>this.createPolylineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createLineWire(e){return this.och.wiresService.createLineWire(e)}createLineWireWithExtensions(e){return this.och.wiresService.createLineWireWithExtensions(e)}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezier(e){return this.och.wiresService.createBezier(e)}createBezierWires(e){const t=e.bezierWires.map((e=>this.createBezier(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezierWeights(e){return this.och.wiresService.createBezierWeights(e)}interpolatePoints(e){return this.och.wiresService.interpolatePoints(e)}interpolateWires(e){const t=e.interpolations.map((e=>this.interpolatePoints(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}interpolatePointsSymmetric(e){return this.och.wiresService.interpolatePointsSymmetric(e)}splitOnPoints(e){return this.och.wiresService.splitOnPoints(e)}combineEdgesAndWiresIntoAWire(e){return this.och.converterService.combineEdgesAndWiresIntoAWire(e)}createWireFromEdge(e){return this.och.wiresService.createWireFromEdge(e)}addEdgesAndWiresToWire(e){return this.och.wiresService.addEdgesAndWiresToWire(e)}createBSpline(e){return this.och.wiresService.createBSpline(e)}createBSplines(e){const t=e.bSplines.map((e=>this.createBSpline(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}hexagonsInGrid(e){return this.och.wiresService.hexagonsInGrid(e)}createZigZagBetweenTwoWires(e){return this.och.wiresService.createZigZagBetweenTwoWires(e)}divideWireByParamsToPoints(e){return this.och.wiresService.divideWireByParamsToPoints(e)}divideWiresByParamsToPoints(e){return e.shapes.map((t=>this.divideWireByParamsToPoints(Object.assign(Object.assign({},e),{shape:t}))))}divideWireByEqualDistanceToPoints(e){return this.och.wiresService.divideWireByEqualDistanceToPoints(e)}divideWiresByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideWireByEqualDistanceToPoints(Object.assign(Object.assign({},e),{shape:t}))))}pointOnWireAtParam(e){return this.och.wiresService.pointOnWireAtParam(e)}pointOnWireAtLength(e){return this.och.wiresService.pointOnWireAtLength(e)}pointsOnWireAtLengths(e){return this.och.wiresService.pointsOnWireAtLengths(e)}pointsOnWireAtEqualLength(e){return this.och.wiresService.pointsOnWireAtEqualLength(e)}pointsOnWireAtPatternOfLengths(e){return this.och.wiresService.pointsOnWireAtPatternOfLengths(e)}tangentOnWireAtParam(e){return this.och.wiresService.tangentOnWireAtParam(e)}tangentOnWireAtLength(e){return this.och.wiresService.tangentOnWireAtLength(e)}derivativesOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.occ.GCPnts_AbscissaPoint_FromCompCurve(r,e.length,r.FirstParameter()),s=i.Parameter(),o=this.och.entitiesService.gpPnt([0,0,0]),n=this.och.entitiesService.gpVec([0,0,0]),a=this.och.entitiesService.gpVec([0,0,0]),c=this.och.entitiesService.gpVec([0,0,0]);r.D3(s,o,n,a,c);const h=[[n.X(),n.Y(),n.Z()],[a.X(),a.Y(),a.Z()],[c.X(),c.Y(),c.Z()]];return n.delete(),a.delete(),c.delete(),r.delete(),i.delete(),o.delete(),h}derivativesOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.och.entitiesService.gpPnt([0,0,0]),s=this.och.entitiesService.gpVec([0,0,0]),o=this.och.entitiesService.gpVec([0,0,0]),n=this.och.entitiesService.gpVec([0,0,0]),a=this.och.vecHelper.remap(e.param,0,1,r.FirstParameter(),r.LastParameter());r.D3(a,i,s,o,n);const c=[[s.X(),s.Y(),s.Z()],[o.X(),o.Y(),o.Z()],[n.X(),n.Y(),n.Z()]];return s.delete(),o.delete(),n.delete(),r.delete(),i.delete(),c}startPointOnWire(e){return this.och.wiresService.startPointOnWire(e)}midPointOnWire(e){return this.och.wiresService.midPointOnWire(e)}endPointOnWire(e){return this.och.wiresService.endPointOnWire(e)}createCircleWire(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,Be.typeSpecificityEnum.wire)}createEllipseWire(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,Be.typeSpecificityEnum.wire)}createHelixWire(e){return this.och.wiresService.createHelixWire(e)}createHelixWireByTurns(e){return this.och.wiresService.createHelixWireByTurns(e)}createTaperedHelixWire(e){return this.och.wiresService.createTaperedHelixWire(e)}createFlatSpiralWire(e){return this.och.wiresService.createFlatSpiralWire(e)}textWires(e){return this.och.wiresService.textWires(e)}textWiresWithData(e){return this.och.wiresService.textWiresWithData(e)}createSquareWire(e){return this.och.wiresService.createSquareWire(e)}createStarWire(e){return this.och.wiresService.createStarWire(e)}createChristmasTreeWire(e){return this.och.wiresService.createChristmasTreeWire(e)}createParallelogramWire(e){return this.och.wiresService.createParallelogramWire(e)}createHeartWire(e){return this.och.wiresService.createHeartWire(e)}createNGonWire(e){return this.och.wiresService.createNGonWire(e)}createRectangleWire(e){return this.och.wiresService.createRectangleWire(e)}createLPolygonWire(e){return this.och.wiresService.createLPolygonWire(e)}createIBeamProfileWire(e){return this.och.wiresService.createIBeamProfileWire(e)}createHBeamProfileWire(e){return this.och.wiresService.createHBeamProfileWire(e)}createTBeamProfileWire(e){return this.och.wiresService.createTBeamProfileWire(e)}createUBeamProfileWire(e){return this.och.wiresService.createUBeamProfileWire(e)}getWire(e){return this.och.shapeGettersService.getWire(e)}getWires(e){return this.och.shapeGettersService.getWires(e)}getWireLength(e){return this.och.wiresService.getWireLength(e)}getWiresLengths(e){return this.och.wiresService.getWiresLengths(e)}isWireClosed(e){return this.och.wiresService.isWireClosed(e)}getWireCenterOfMass(e){return this.och.wiresService.getWireCenterOfMass(e)}getWiresCentersOfMass(e){return e.shapes.map((e=>this.och.wiresService.getWireCenterOfMass({shape:e})))}reversedWire(e){return this.och.wiresService.reversedWire(e)}reversedWireFromReversedEdges(e){return this.och.wiresService.reversedWireFromReversedEdges(e)}placeWireOnFace(e){const t=e.wire,r=e.face,i=this.och.surfaceFromFace({shape:r});return this.och.wiresService.placeWire(t,i)}placeWiresOnFace(e){const t=e.wires,r=e.face,i=this.och.surfaceFromFace({shape:r});return t.map((e=>this.och.wiresService.placeWire(e,i)))}closeOpenWire(e){const t=e.shape,r=this.och.wiresService.startPointOnWire({shape:t}),i=this.och.wiresService.endPointOnWire({shape:t});if(this.och.vecHelper.vectorsTheSame(r,i,1e-7))return t;const s=this.createLineWire({start:i,end:r}),o=this.addEdgesAndWiresToWire({shape:t,shapes:[s]});return s.delete(),o}project(e){const t=e.wire,r=this.och.entitiesService.gpDir(e.direction),i=new this.occ.BRepProj_Projection(t,e.shape,r),s=i.Shape();return r.delete(),i.delete(),s}wiresToPoints(e){return this.och.wiresService.wiresToPoints(e)}projectWires(e){const t=[];return e.wires.forEach((r=>{const i=this.och.entitiesService.gpDir(e.direction),s=new this.occ.BRepProj_Projection(r,e.shape,i),o=s.Shape();t.push(o),i.delete(),s.delete()})),t}createWireFromTwoCirclesTan(e){return this.och.wiresService.createWireFromTwoCirclesTan(e)}}class Xe{constructor(e,t){this.vertex=new ze(e,t),this.edge=new He(e,t),this.wire=new Ye(e,t),this.face=new Ge(e,t),this.shell=new $e(e,t),this.solid=new qe(e,t),this.compound=new Ve(e,t),this.shape=new je(e,t)}}class Ze{constructor(e,t){this.occ=e,this.och=t}saveShapeSTEP(e){const t=e.shape;let r;if(e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});e.fromRightHanded?r=t:(r=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete())}const i=new this.occ.STEPControl_Writer;let s,o,n;s=r||t;try{o=i.Transfer(s,this.occ.STEPControl_StepModelType.AsIs)}catch(e){throw new Error("Failed when calling writer.Transfer.")}if(o!==this.occ.IFSelect_ReturnStatus.RetDone)throw new Error("Failed when transfering to step writer.");if(i.Write("x")!==this.occ.IFSelect_ReturnStatus.RetDone)throw new Error("Failed when writing step file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),n=e}return r&&r.delete(),n}saveShapeStl(e){const t=e.shape;let r;if(this.occ.BRepTools.Clean(t),e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});r=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete()}const i=new this.occ.StlAPI_Writer;let s,o;s=r||t;const n=new this.occ.BRepMesh_IncrementalMesh(s,e.precision,!1,.5,!1);if(!i.Write(s,"x"))throw new Error("Failed when writing stl file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),o=e}return r&&r.delete(),n&&n.delete(),o}loadSTEPorIGES(e){const t=e.fileName,r=e.filetext,i=t.toLowerCase().split(".").pop(),s=(()=>{switch(i){case"step":case"stp":case"stpz":return"step";case"iges":case"igs":case"igz":return"iges";default:return}})();if(!s)return void console.error("opencascade can't parse this extension!");let o,n;if(r instanceof ArrayBuffer){const e=new Uint8Array(r);if("step"===s?o=this.occ.ReadSTEPFromBinary(e):"iges"===s&&(o=this.occ.ReadIGESFromBinary(e)),!o||o.IsNull())return void console.error("Failed to read "+s.toUpperCase()+" file: "+t)}else{let e;if(this.occ.FS.createDataFile("/",`file.${s}`,r,!0,!0,!0),e="step"===s?new this.occ.STEPControl_Reader:new this.occ.IGESControl_Reader,e.ReadFile(`file.${s}`)!==this.occ.IFSelect_ReturnStatus.RetDone)return console.error("Something in OCCT went wrong trying to read "+t),void this.occ.FS.unlink(`/file.${s}`);e.TransferRoots(),o=e.OneShape(),this.occ.FS.unlink(`/file.${s}`)}if(e.adjustZtoY&&o){const e=this.och.transformsService.mirrorAlongNormal({shape:o,origin:[0,0,0],normal:[0,0,1]});n=this.och.transformsService.rotate({shape:e,axis:[1,0,0],angle:90}),e.delete()}return n?(null==o||o.delete(),n):o}shapeToDxfPaths(e){return this.och.dxfService.shapeToDxfPaths(e)}dxfPathsWithLayer(e){return this.och.dxfService.dxfPathsWithLayer(e)}dxfCreate(e){return this.och.dxfService.dxfCreate(e)}convertStepToGltf(e){var t,r,i;try{const s=e.stepData;let o;if(s instanceof Uint8Array)o=this.occ.ConvertStepToGltfFromBinary(s,null!==(t=e.meshPrecision)&&void 0!==t?t:.1,5e4);else if(s instanceof ArrayBuffer)o=this.occ.ConvertStepToGltfFromBinary(new Uint8Array(s),null!==(r=e.meshPrecision)&&void 0!==r?r:.1,5e4);else{if("string"!=typeof s)throw new Error("File/Blob must be converted to ArrayBuffer before calling this method. Use the worker layer for automatic conversion.");o=this.occ.ConvertStepToGltfFromMemory(s,null!==(i=e.meshPrecision)&&void 0!==i?i:.1)}if(0===o.length)throw new Error("Failed to convert STEP to glTF");return o}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`STEP to glTF conversion failed: ${t}`)}}convertStepToGltfAdvanced(e){var t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R,L,M,B,I,U,W,_,N,H,G,V,z,j,$,q,Y,X,Z,Q;try{const J=e.stepData;let K;const ee=this.gltfNameFormatEnumToOcct(null!==(t=e.nodeNameFormat)&&void 0!==t?t:Be.gltfNameFormatEnum.instance),te=this.gltfNameFormatEnumToOcct(null!==(r=e.meshNameFormat)&&void 0!==r?r:Be.gltfNameFormatEnum.instance),re=this.gltfTransformFormatEnumToOcct(null!==(i=e.transformFormat)&&void 0!==i?i:Be.gltfTransformFormatEnum.compact);if(J instanceof Uint8Array)K=this.occ.ConvertStepToGltfFromBinaryAdvanced(J,null===(s=e.readColors)||void 0===s||s,null===(o=e.readNames)||void 0===o||o,null===(n=e.readMaterials)||void 0===n||n,null!==(a=e.readLayers)&&void 0!==a&&a,null!==(c=e.readProps)&&void 0!==c&&c,null!==(h=e.meshDeflection)&&void 0!==h?h:.1,null!==(l=e.meshAngle)&&void 0!==l?l:.5,null===(d=e.meshParallel)||void 0===d||d,null!==(u=e.faceCountThreshold)&&void 0!==u?u:5e4,null===(p=e.mergeFaces)||void 0===p||p,null===(f=e.splitIndices16)||void 0===f||f,null===(v=e.parallelWrite)||void 0===v||v,null===(g=e.embedTextures)||void 0===g||g,null!==(m=e.forceUVExport)&&void 0!==m&&m,ee,te,re,null===(y=e.adjustZtoY)||void 0===y||y,null!==(S=e.scale)&&void 0!==S?S:1);else if(J instanceof ArrayBuffer)K=this.occ.ConvertStepToGltfFromBinaryAdvanced(new Uint8Array(J),null===(w=e.readColors)||void 0===w||w,null===(b=e.readNames)||void 0===b||b,null===(E=e.readMaterials)||void 0===E||E,null!==(x=e.readLayers)&&void 0!==x&&x,null!==(T=e.readProps)&&void 0!==T&&T,null!==(P=e.meshDeflection)&&void 0!==P?P:.1,null!==(C=e.meshAngle)&&void 0!==C?C:.5,null===(k=e.meshParallel)||void 0===k||k,null!==(D=e.faceCountThreshold)&&void 0!==D?D:5e4,null===(O=e.mergeFaces)||void 0===O||O,null===(A=e.splitIndices16)||void 0===A||A,null===(F=e.parallelWrite)||void 0===F||F,null===(R=e.embedTextures)||void 0===R||R,null!==(L=e.forceUVExport)&&void 0!==L&&L,ee,te,re,null===(M=e.adjustZtoY)||void 0===M||M,null!==(B=e.scale)&&void 0!==B?B:1);else{if("string"!=typeof J)throw new Error("File/Blob must be converted to ArrayBuffer before calling this method. Use the worker layer for automatic conversion.");{const t=(new TextEncoder).encode(J);K=this.occ.ConvertStepToGltfFromBinaryAdvanced(t,null===(I=e.readColors)||void 0===I||I,null===(U=e.readNames)||void 0===U||U,null===(W=e.readMaterials)||void 0===W||W,null!==(_=e.readLayers)&&void 0!==_&&_,null!==(N=e.readProps)&&void 0!==N&&N,null!==(H=e.meshDeflection)&&void 0!==H?H:.1,null!==(G=e.meshAngle)&&void 0!==G?G:.5,null===(V=e.meshParallel)||void 0===V||V,null!==(z=e.faceCountThreshold)&&void 0!==z?z:5e4,null===(j=e.mergeFaces)||void 0===j||j,null===($=e.splitIndices16)||void 0===$||$,null===(q=e.parallelWrite)||void 0===q||q,null===(Y=e.embedTextures)||void 0===Y||Y,null!==(X=e.forceUVExport)&&void 0!==X&&X,ee,te,re,null===(Z=e.adjustZtoY)||void 0===Z||Z,null!==(Q=e.scale)&&void 0!==Q?Q:1)}}if(0===K.length)throw new Error("Failed to convert STEP to glTF");return K}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`STEP to glTF advanced conversion failed: ${t}`)}}parseStepToJson(e){try{const t=e.stepData;let r;if(t instanceof Uint8Array)r=this.occ.ParseStepAssemblyToJsonFromBinary(t);else if(t instanceof ArrayBuffer)r=this.occ.ParseStepAssemblyToJsonFromBinary(new Uint8Array(t));else{if("string"!=typeof t)throw new Error("File/Blob must be converted to ArrayBuffer before calling this method. Use the worker layer for automatic conversion.");r=this.occ.ParseStepAssemblyToJsonFromMemory(t)}return JSON.parse(r)}catch(e){return{version:"1.0",nodes:[],error:`STEP assembly parsing failed: ${e instanceof Error?e.message:String(e)}`}}}gltfNameFormatEnumToOcct(e){switch(e){case Be.gltfNameFormatEnum.empty:return 0;case Be.gltfNameFormatEnum.product:return 1;case Be.gltfNameFormatEnum.instance:return 2;case Be.gltfNameFormatEnum.instanceOrProduct:return 3;case Be.gltfNameFormatEnum.productOrInstance:return 4;case Be.gltfNameFormatEnum.productAndInstance:return 5;case Be.gltfNameFormatEnum.productAndInstanceAndOcaf:return 6;default:return 2}}gltfTransformFormatEnumToOcct(e){switch(e){case Be.gltfTransformFormatEnum.compact:return 0;case Be.gltfTransformFormatEnum.mat4:return 1;case Be.gltfTransformFormatEnum.trs:return 2;default:return 0}}}class Qe{constructor(e){this.occ=e}BRep_Tool_Range_1(e,t,r){const i=this.occ.BRep_Tool_GetEdgeParameters(e);i.IsValid&&(t.current=i.First,r.current=i.Last)}BRep_Tool_Curve_2(e,t,r){const i=this.occ.BRep_Tool_GetEdgeParameters(e);return i.IsValid?(t.current=i.First,r.current=i.Last,this.occ.GetEdgeCurve(e)):null}BRepTools_UVBounds_1(e,t,r,i,s){const o=this.occ.GetFaceUVBounds(e);o.IsValid&&(t.current=o.UMin,r.current=o.UMax,i.current=o.VMin,s.current=o.VMax)}}class Je{constructor(e){this.occ=e}forEachWire(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.WIRE,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.WIRE,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,this.occ.CastToWire(i.Current()));i.delete()}forEachEdge(e,t){const r={};let i=0;const s=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.EDGE,this.occ.TopAbs_ShapeEnum.SHAPE);for(s.Init(e,this.occ.TopAbs_ShapeEnum.EDGE,this.occ.TopAbs_ShapeEnum.SHAPE);s.More();s.Next()){const e=this.occ.CastToEdge(s.Current()),o=this.occ.TopoDS_Shape_HashCode(e,1e8);Object.prototype.hasOwnProperty.call(r,o)||(r[o]=i,t(i++,e))}return s.delete(),r}forEachEdgeAlongWire(e,t){const r={};let i=0;const s=new this.occ.BRepTools_WireExplorer(e);for(;s.More();s.Next()){const e=this.occ.CastToEdge(s.Current()),o=this.occ.TopoDS_Shape_HashCode(e,1e8);Object.prototype.hasOwnProperty.call(r,o)||(r[o]=i,t(i++,e))}return s.delete(),r}forEachFace(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.FACE,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.FACE,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,this.occ.CastToFace(i.Current()));i.delete()}forEachShell(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.SHELL,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.SHELL,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,this.occ.CastToShell(i.Current()));i.delete()}forEachVertex(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.VERTEX,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.VERTEX,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,this.occ.CastToVertex(i.Current()));i.delete()}forEachSolid(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.SOLID,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.SOLID,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,this.occ.CastToSolid(i.Current()));i.delete()}forEachCompound(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.COMPOUND,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.COMPOUND,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,i.Current());i.delete()}forEachCompSolid(e,t){let r=0;const i=new this.occ.TopExp_Explorer(e,this.occ.TopAbs_ShapeEnum.COMPSOLID,this.occ.TopAbs_ShapeEnum.SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.COMPSOLID,this.occ.TopAbs_ShapeEnum.SHAPE);i.More();i.Next())t(r++,i.Current());i.delete()}forEachShapeInCompound(e,t){let r=0;const i=new this.occ.TopoDS_Iterator(e);for(;i.More();i.Next())t(r++,i.Value());i.delete()}}class Ke{constructor(e){this.occ=e}getShapeTypeEnum(e){let t=Be.shapeTypeEnum.unknown;const r=e.ShapeType();return t=r===this.occ.TopAbs_ShapeEnum.EDGE?Be.shapeTypeEnum.edge:r===this.occ.TopAbs_ShapeEnum.WIRE?Be.shapeTypeEnum.wire:r===this.occ.TopAbs_ShapeEnum.VERTEX?Be.shapeTypeEnum.vertex:r===this.occ.TopAbs_ShapeEnum.SOLID?Be.shapeTypeEnum.solid:r===this.occ.TopAbs_ShapeEnum.SHELL?Be.shapeTypeEnum.shell:r===this.occ.TopAbs_ShapeEnum.FACE?Be.shapeTypeEnum.face:r===this.occ.TopAbs_ShapeEnum.COMPSOLID?Be.shapeTypeEnum.compSolid:r===this.occ.TopAbs_ShapeEnum.COMPOUND?Be.shapeTypeEnum.compound:Be.shapeTypeEnum.shape,t}getGccEntPositionFromEnum(e){let t=this.occ.GccEnt_Position.noqualifier;return t=e===Be.gccEntPositionEnum.unqualified?this.occ.GccEnt_Position.unqualified:e===Be.gccEntPositionEnum.enclosed?this.occ.GccEnt_Position.enclosed:e===Be.gccEntPositionEnum.enclosing?this.occ.GccEnt_Position.enclosing:e===Be.gccEntPositionEnum.outside?this.occ.GccEnt_Position.outside:(Be.gccEntPositionEnum.noqualifier,this.occ.GccEnt_Position.noqualifier),t}getTopAbsStateEnum(e){let t=Be.topAbsStateEnum.unknown;return t=e.value===this.occ.TopAbs_State.IN.value?Be.topAbsStateEnum.in:e.value===this.occ.TopAbs_State.OUT.value?Be.topAbsStateEnum.out:e.value===this.occ.TopAbs_State.ON.value?Be.topAbsStateEnum.on:Be.topAbsStateEnum.unknown,t}convertFourSidesStrictEnumToTwoCircleInclusionEnum(e){return e===Be.fourSidesStrictEnum.inside?Be.twoCircleInclusionEnum.inside:e===Be.fourSidesStrictEnum.outside?Be.twoCircleInclusionEnum.outside:e===Be.fourSidesStrictEnum.insideOutside?Be.twoCircleInclusionEnum.insideOutside:e===Be.fourSidesStrictEnum.outsideInside?Be.twoCircleInclusionEnum.outsideInside:Be.twoCircleInclusionEnum.none}getGeomFillTrihedronEnumOCCTValue(e){return e===Be.geomFillTrihedronEnum.isConstantNormal?this.occ.GeomFill_Trihedron.IsConstantNormal:e===Be.geomFillTrihedronEnum.isCorrectedFrenet?this.occ.GeomFill_Trihedron.IsCorrectedFrenet:e===Be.geomFillTrihedronEnum.isDarboux?this.occ.GeomFill_Trihedron.IsDarboux:e===Be.geomFillTrihedronEnum.isDiscreteTrihedron?this.occ.GeomFill_Trihedron.IsDiscreteTrihedron:e===Be.geomFillTrihedronEnum.isFixed?this.occ.GeomFill_Trihedron.IsFixed:e===Be.geomFillTrihedronEnum.isFrenet?this.occ.GeomFill_Trihedron.IsFrenet:e===Be.geomFillTrihedronEnum.isGuideAC?this.occ.GeomFill_Trihedron.IsGuideAC:e===Be.geomFillTrihedronEnum.isGuideACWithContact?this.occ.GeomFill_Trihedron.IsGuideACWithContact:e===Be.geomFillTrihedronEnum.isGuidePlan?this.occ.GeomFill_Trihedron.IsGuidePlan:e===Be.geomFillTrihedronEnum.isGuidePlanWithContact?this.occ.GeomFill_Trihedron.IsGuidePlanWithContact:this.occ.GeomFill_Trihedron.IsConstantNormal}}class et{constructor(e){this.occ=e}getActualTypeOfShape(e){let t=e;return t=e.ShapeType()===this.occ.TopAbs_ShapeEnum.EDGE?this.occ.CastToEdge(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.WIRE?this.occ.CastToWire(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.VERTEX?this.occ.CastToVertex(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.SOLID?this.occ.CastToSolid(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.SHELL?this.occ.CastToShell(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.FACE?this.occ.CastToFace(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.COMPSOLID?this.occ.CastToCompSolid(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.COMPOUND?this.occ.CastToCompound(e):e,t}combineEdgesAndWiresIntoAWire(e){if(void 0===e.shapes)throw Error("Shapes are not defined");const t=new this.occ.BRepBuilderAPI_MakeWire;if(e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.EDGE?t.AddEdge(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.WIRE&&t.AddWire(e)})),t.IsDone()){const e=t.Wire();return this.occ.BRepLib_BuildCurves3d_Full(e,1e-7,this.occ.GeomAbs_Shape.C1,14,0),t.delete(),e}throw t.delete(),new Error("Wire could not be constructed")}vertexToPoint(e){const t=this.occ.BRep_Tool_Pnt(e.shape),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}makeCompound(e){const t=new this.occ.BRep_Builder,r=this.occ.BRep_Builder_MakeCompound(t);return e.shapes.forEach((e=>{const i=this.occ.BRepBuilderAPI_Copy_Shape(e,!0);t.Add(r,i),i.delete()})),t.delete(),r}makeCompoundIfNeeded(e,t){if(t){const t=this.makeCompound({shapes:e});return e.forEach((e=>e.delete())),t}return e}}class tt{constructor(e){this.occ=e}createCircle(e,t,r,i){const s=this.gpAx2(t,r);if(i===Be.typeSpecificityEnum.edge){const t=this.occ.MakeCircleEdge(s,e);return s.delete(),t}if(i===Be.typeSpecificityEnum.wire){const t=this.occ.MakeCircleWire(s,e);return s.delete(),t}if(i===Be.typeSpecificityEnum.face){const t=this.occ.MakeCircleWire(s,e);s.delete();const r=this.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),r}const o=this.occ.MakeCircleWire(s,e);return s.delete(),o}createEllipse(e,t,r,i,s){const o=this.gpAx2(r,i);if(s===Be.typeSpecificityEnum.edge){const r=this.occ.MakeEllipseEdge(o,t,e);return o.delete(),r}if(s===Be.typeSpecificityEnum.wire){const r=this.occ.MakeEllipseWire(o,t,e);return o.delete(),r}if(s===Be.typeSpecificityEnum.face){const r=this.occ.MakeEllipseWire(o,t,e);o.delete();const i=this.bRepBuilderAPIMakeFaceFromWire(r,!0);return r.delete(),i}const n=this.occ.MakeEllipseWire(o,t,e);return o.delete(),n}makeVertex(e){const t=this.gpPnt(e),r=new this.occ.BRepBuilderAPI_MakeVertex(t),i=r.Vertex();return t.delete(),r.delete(),i}gpPnt2d(e){return new this.occ.gp_Pnt2d(e[0],e[1])}gpPnt(e){return new this.occ.gp_Pnt(e[0],e[1],e[2])}gpVec(e){return new this.occ.gp_Vec(e[0],e[1],e[2])}gpXYZ(e){return new this.occ.gp_XYZ(e[0],e[1],e[2])}gpVec2d(e){return new this.occ.gp_Vec2d(e[0],e[1])}gpDir(e){return new this.occ.gp_Dir(e[0],e[1],e[2])}gpDir2d(e){return new this.occ.gp_Dir2d(e[0],e[1])}bRepBuilderAPIMakeWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire(e),r=t.Wire();return t.delete(),r}bRepBuilderAPIMakeFaceFromWires(e,t,r,i){let s;const o=[];return e.forEach((e=>{if(o.length>0){const t=new this.occ.BRepBuilderAPI_MakeFace(o[o.length-1],e);o.push(t.Face()),t.delete()}else if(r){const t=this.occ.MakeFaceFromFaceSurfaceAndWire(r,e,null==i||i);o.push(t)}else{const r=this.occ.MakeFaceFromWireOnlyPlane(e,t);o.push(r)}})),o.length>0&&(s=o.pop(),o.forEach((e=>e.delete()))),s}bRepBuilderAPIMakeFaceFromWire(e,t){return this.occ.MakeFaceFromWireOnlyPlane(e,t)}bRepBuilderAPIMakeFacesFromWiresOnFace(e,t,r){return t.map((t=>this.occ.MakeFaceFromFaceSurfaceAndWire(e,t,r)))}bRepBuilderAPIMakeFaceFromWireOnFace(e,t,r){return this.occ.MakeFaceFromFaceSurfaceAndWire(e,t,r)}bRepPrimAPIMakeSphere(e,t,r){const i=this.gpAx2(e,t),s=this.occ.MakeSphereFromAx2(i,r),o=s.Shape();return s.delete(),i.delete(),o}gpAx3_3(e,t,r){return new this.occ.gp_Ax3(this.gpPnt(e),this.gpDir(t),this.gpDir(r))}gpAx3_4(e,t){return new this.occ.gp_Ax3(this.gpPnt(e),this.gpDir(t))}gpAx2(e,t){return new this.occ.gp_Ax2(this.gpPnt(e),this.gpDir(t))}gpAx2FromTwoVectors(e,t,r){return new this.occ.gp_Ax2(this.gpPnt(e),this.gpDir(t),this.gpDir(r))}gpAx1(e,t){return new this.occ.gp_Ax1(this.gpPnt(e),this.gpDir(t))}gpAx2d(e,t){const r=this.gpPnt2d(e),i=this.gpDir2d(t);return new this.occ.gp_Ax2d(r,i)}gpAx22d(e,t,r){const i=this.gpPnt2d(e),s=this.gpDir2d(t),o=this.gpDir2d(r),n=new this.occ.gp_Ax22d(i,s,o);return s.delete(),o.delete(),i.delete(),n}gpPln(e,t){const r=this.gpPnt(e),i=this.gpDir(t),s=new this.occ.gp_Pln(r,i);return r.delete(),i.delete(),s}bRepPrimAPIMakeCylinder(e,t,r,i,s){const o=this.gpAx2(e,t),n=new this.occ.BRepPrimAPI_MakeCylinder(o,r,i,s),a=n.Shape();return n.delete(),o.delete(),a}bRepPrimAPIMakeCylinderBetweenPoints(e,t,r){const i=this.gpPnt(e),s=this.gpPnt(t),o=this.occ.gp_Vec_fromPoints(i,s),n=o.Magnitude(),a=this.gpAx2(e,[o.X(),o.Y(),o.Z()]),c=new this.occ.BRepPrimAPI_MakeCylinder(a,r,n),h=c.Shape();return c.delete(),a.delete(),i.delete(),s.delete(),o.delete(),h}bRepPrimAPIMakeBox(e,t,r,i){const s=this.gpPnt([-e/2+i[0],-r/2+i[1],-t/2+i[2]]),o=this.occ.MakeBoxFromPntAndDims(s,e,r,t);return s.delete(),o}}class rt{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u){this.occ=e,this.enumService=t,this.entitiesService=r,this.converterService=i,this.booleansService=s,this.shapeGettersService=o,this.edgesService=n,this.transformsService=a,this.vecHelper=c,this.wiresService=h,this.facesService=l,this.solidsService=d,this.shellsService=u}loftAdvanced(e){if(e.periodic&&!e.closed)throw new Error("Cant construct periodic non closed loft.");const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,e.straight,e.tolerance),r=[],i=[];if(e.startVertex){const r=this.entitiesService.makeVertex(e.startVertex);t.AddVertex(r),i.push(r)}if(e.closed&&!e.periodic)e.shapes.push(e.shapes[0]);else if(e.closed&&e.periodic){const i=[];e.shapes.forEach((t=>{this.enumService.getShapeTypeEnum(t)===Be.shapeTypeEnum.edge&&(t=this.entitiesService.bRepBuilderAPIMakeWire(t));const r=this.wiresService.divideWireByParamsToPoints({shape:t,nrOfDivisions:e.nrPeriodicSections,removeStartPoint:!1,removeEndPoint:!1});i.push(r)}));for(let s=0;s<=e.nrPeriodicSections;s++){const o=i.map((e=>e[s])),n=this.wiresService.interpolatePoints({points:o,tolerance:e.tolerance,periodic:!0});t.AddWire(n),r.push(n)}}e.periodic||e.shapes.forEach((e=>{t.AddWire(e)}));const s=[];if(e.endVertex){const r=this.entitiesService.makeVertex(e.endVertex);t.AddVertex(r),s.push(r)}let o;e.useSmoothing&&t.SetSmoothing(e.useSmoothing),e.maxUDegree&&t.SetMaxDegree(e.maxUDegree),e.parType===Be.approxParametrizationTypeEnum.approxChordLength?o=this.occ.Approx_ParametrizationType.ChordLength:e.parType===Be.approxParametrizationTypeEnum.approxCentripetal?o=this.occ.Approx_ParametrizationType.Centripetal:e.parType===Be.approxParametrizationTypeEnum.approxIsoParametric&&(o=this.occ.Approx_ParametrizationType.IsoParametric),o&&t.SetParType(o),t.CheckCompatibility(!1);const n=t.Shape(),a=this.converterService.getActualTypeOfShape(n);return n.delete(),t.delete(),r.forEach((e=>e.delete())),i.forEach((e=>e.delete())),s.forEach((e=>e.delete())),a}closestPointsBetweenTwoShapes(e,t){const r=this.occ.ClosestPointsBetweenShapes(e,t);if(6===r.size())return[[r.get(0),r.get(1),r.get(2)],[r.get(3),r.get(4),r.get(5)]];throw new Error("Closest points could not be found.")}closestPointsOnShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>e[1]))}closestPointsOnShapesFromPoints(e){const t=e.points.map((e=>this.entitiesService.makeVertex(e))),r=[];return e.shapes.forEach((e=>{const i=t.map((t=>this.closestPointsBetweenTwoShapes(t,e)));r.push(...i.map((e=>e[1])))})),r}distancesToShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>this.vecHelper.distanceBetweenPoints(e[0],e[1])))}boundingBoxOfShape(e){const t=new this.occ.Bnd_Box;this.occ.BRepBndLib.Add(e.shape,t,!1);const r=t.CornerMin(),i=t.CornerMax(),s=[r.X(),r.Y(),r.Z()],o=[i.X(),i.Y(),i.Z()],n=[(r.X()+i.X())/2,(r.Y()+i.Y())/2,(r.Z()+i.Z())/2],a=[i.X()-r.X(),i.Y()-r.Y(),i.Z()-r.Z()];return t.delete(),{min:s,max:o,center:n,size:a}}boundingBoxShapeOfShape(e){const t=this.boundingBoxOfShape(e);return this.solidsService.createBoxFromCorner({corner:t.min,width:t.size[0],height:t.size[1],length:t.size[2]})}boundingSphereOfShape(e){const t=this.boundingBoxOfShape(e),r=t.center;return{center:r,radius:this.vecHelper.distanceBetweenPoints(t.min,r)}}boundingSphereShapeOfShape(e){const t=this.boundingSphereOfShape(e);return this.solidsService.createSphere({center:t.center,radius:t.radius})}loft(e){const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,!1,1e-6);e.shapes.forEach((e=>{this.enumService.getShapeTypeEnum(e)===Be.shapeTypeEnum.edge&&(e=this.entitiesService.bRepBuilderAPIMakeWire(e)),t.AddWire(e)})),t.CheckCompatibility(!1);const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);return r.delete(),t.delete(),i}offset(e){return this.offsetAdv({shape:e.shape,face:e.face,distance:e.distance,tolerance:e.tolerance,joinType:Be.joinTypeEnum.arc,removeIntEdges:!1})}offsetAdv(e){if(e.tolerance||(e.tolerance=.1),0===e.distance)return e.shape;let t;const r=this.getJoinType(e.joinType),i=this.occ.BRepOffset_Mode.Skin,s=[];if(this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.wire||this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.edge){let o;this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.edge?(o=this.entitiesService.bRepBuilderAPIMakeWire(e.shape),s.push(o)):o=e.shape;try{t=new this.occ.BRepOffsetAPI_MakeOffset,e.face?t.Init(e.face,r,!1):t.InitJoin(r,!1),t.AddWire(o),t.Build(),t.Perform(e.distance,0)}catch(s){t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(o,e.distance,e.tolerance,i,!1,!1,r,e.removeIntEdges)}}else{const s=e.shape;t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(s,e.distance,e.tolerance,i,!1,!1,r,e.removeIntEdges)}const o=t.Shape(),n=this.converterService.getActualTypeOfShape(o);return o.delete(),t&&t.delete(),s.forEach((e=>e.delete())),n}offset3DWire(e){const t=this.extrude({shape:e.shape,direction:e.direction}),r=this.makeThickSolidSimple({shape:t,offset:e.offset}),i=this.shapeGettersService.getEdges({shape:e.shape}).length,s=(4*i+2)/2-1,o=s-i+1,n=[];let a;this.shapeGettersService.getFaces({shape:r}).forEach(((e,t)=>{if(t>=o&&t<=s){const t=this.shapeGettersService.getEdges({shape:e})[2];n.push(t)}}));try{a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:n}),a=a.Reversed(),a=this.converterService.getActualTypeOfShape(a)}catch(e){return a=n,a}return a}extrudeShapes(e){return e.shapes.map((t=>{const r=this.extrude({shape:t,direction:e.direction}),i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}))}extrude(e){const t=new this.occ.gp_Vec(e.direction[0],e.direction[1],e.direction[2]),r=new this.occ.BRepPrimAPI_MakePrism(e.shape,t),i=r.Shape();return r.delete(),t.delete(),i}splitShapeWithShapes(e){const t=new this.occ.BOPAlgo_Builder;let r;if(t.SetNonDestructive(e.nonDestructive),t.SetFuzzyValue(e.localFuzzyTolerance),t.AddArgument(e.shape),e.shapes.forEach((e=>{t.AddArgument(e)})),t.Perform(),e.nonDestructive){const e=t.Shape();r=this.shapeGettersService.getShapesOfCompound({shape:e})}else{const i=t.Modified(e.shape),s=this.occ.BitListOfShapesToCompound(i);r=this.shapeGettersService.getShapesOfCompound({shape:s})}return r}revolve(e){let t;e.angle||(e.angle=360),e.direction||(e.direction=[0,0,1]);const r=new this.occ.gp_Pnt(0,0,0),i=new this.occ.gp_Dir(e.direction[0],e.direction[1],e.direction[2]),s=new this.occ.gp_Ax1(r,i);if(e.angle>=360){const r=new this.occ.BRepPrimAPI_MakeRevol(e.shape,s);t=r.Shape(),r.delete()}else{const r=new this.occ.BRepPrimAPI_MakeRevol(e.shape,s,.0174533*e.angle,e.copy);t=r.Shape(),r.delete()}r.delete(),i.delete(),s.delete();const o=this.converterService.getActualTypeOfShape(t);return t.delete(),o}rotatedExtrude(e){const t=this.boundingBoxOfShape({shape:e.shape}).min[1],r=t+e.height,i=this.transformsService.translate({translation:[0,e.height,0],shape:e.shape}),s=this.transformsService.rotate({axis:[0,1,0],angle:e.angle,shape:i}),o=this.wiresService.createBSpline({points:[[0,t,0],[0,r,0]],closed:!1}),n=[];for(let r=0;r<=30;r++){const i=r/30;n.push([20*Math.sin(i*e.angle*.0174533),t+e.height*i,20*Math.cos(i*e.angle*.0174533)])}const a=this.wiresService.createBSpline({points:n,closed:!1}),c=new this.occ.BRepOffsetAPI_MakePipeShell(o);c.SetModeWithAuxSpine(a,!0,this.occ.BRepFill_TypeOfContact.NoContact),c.Add(e.shape,!1,!1),c.Add(s,!1,!1),c.Build(),(e.makeSolid||void 0===e.makeSolid)&&c.MakeSolid();const h=c.Shape(),l=this.converterService.getActualTypeOfShape(h);return h.delete(),c.delete(),a.delete(),o.delete(),s.delete(),i.delete(),l}pipe(e){const t=new this.occ.BRepOffsetAPI_MakePipeShell(e.shape);e.shapes.forEach((e=>{t.Add(e,!1,!1)})),t.Build(),t.MakeSolid();const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);return r.delete(),t.delete(),i}pipePolylineWireNGon(e){const t=e.shape,r=this.shapeGettersService.getEdge({shape:t,index:0}),i=this.edgesService.pointOnEdgeAtParam({shape:r,param:0}),s=this.edgesService.tangentOnEdgeAtParam({shape:r,param:0}),o=this.wiresService.createNGonWire({radius:e.radius,center:i,direction:s,nrCorners:e.nrCorners}),n=this.wiresService.reversedWire({shape:o});let a=n;e.makeSolid&&(a=this.facesService.createFaceFromWire({shape:n,planar:!0}));const c=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),h=new this.occ.BRepOffsetAPI_MakePipe(t,a,c,!!e.forceApproxC1);h.Build();const l=h.Shape(),d=this.converterService.getActualTypeOfShape(l);return l.delete(),h.delete(),o.delete(),n.delete(),d}pipeWireCylindrical(e){const t=e.shape,r=this.shapeGettersService.getEdges({shape:t})[0],i=this.edgesService.startPointOnEdge({shape:r}),s=this.edgesService.tangentOnEdgeAtParam({shape:r,param:0}),o=this.entitiesService.createCircle(e.radius,i,s,e.makeSolid?Be.typeSpecificityEnum.face:Be.typeSpecificityEnum.wire),n=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),a=new this.occ.BRepOffsetAPI_MakePipe(t,o,n,!!e.forceApproxC1);a.Build();const c=a.Shape(),h=this.converterService.getActualTypeOfShape(c);return c.delete(),a.delete(),o.delete(),h}pipeWiresCylindrical(e){return e.shapes.map((t=>this.pipeWireCylindrical({shape:t,radius:e.radius,makeSolid:e.makeSolid,trihedronEnum:e.trihedronEnum,forceApproxC1:e.forceApproxC1})))}makeThickSolidSimple(e){const t=new this.occ.BRepOffsetAPI_MakeThickSolid;t.MakeThickSolidBySimple(e.shape,e.offset),t.Build();const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);let s=i;if(e.offset>0){const e=this.shapeGettersService.getFaces({shape:i}).map((e=>e.Reversed()));s=this.shellsService.sewFaces({shapes:e,tolerance:1e-7}),i.delete()}return t.delete(),r.delete(),s}makeThickSolidByJoin(e){const t=new this.occ.TopTools_ListOfShape;e.shapes.forEach((e=>{t.Append(e)}));const r=new this.occ.BRepOffsetAPI_MakeThickSolid,i=this.getJoinType(e.joinType);r.MakeThickSolidByJoin(e.shape,t,e.offset,e.tolerance,this.occ.BRepOffset_Mode.Skin,e.intersection,e.selfIntersection,i,e.removeIntEdges);const s=r.Shape(),o=this.converterService.getActualTypeOfShape(s);return s.delete(),r.delete(),t.delete(),o}getJoinType(e){let t;switch(e){case Be.joinTypeEnum.arc:t=this.occ.GeomAbs_JoinType.Arc;break;case Be.joinTypeEnum.intersection:t=this.occ.GeomAbs_JoinType.Intersection;break;case Be.joinTypeEnum.tangent:t=this.occ.GeomAbs_JoinType.Tangent}return t}getBRepOffsetMode(e){let t;switch(e){case Be.bRepOffsetModeEnum.skin:t=this.occ.BRepOffset_Mode.Skin;break;case Be.bRepOffsetModeEnum.pipe:t=this.occ.BRepOffset_Mode.Pipe;break;case Be.bRepOffsetModeEnum.rectoVerso:t=this.occ.BRepOffset_Mode.RectoVerso}return t}slice(e){if(e.step<=0)throw new Error("Step needs to be positive.");const{bbox:t,transformedShape:r}=this.createBBoxAndTransformShape(e.shape,e.direction),i=[];if(!this.occ.Bnd_Box_IsThin(t,1e-4)){const{minY:s,maxY:o,maxDist:n}=this.computeBounds(t),a=[];for(let t=s;t<o;t+=e.step){const e=this.facesService.createSquareFace({size:n,center:[0,t,0],direction:[0,1,0]});a.push(e)}this.applySlices(r,a,e.direction,i)}return this.converterService.makeCompound({shapes:i})}sliceInStepPattern(e){if(!e.steps||0===e.steps.length)throw new Error("Steps must be provided with at elast one positive value");const{bbox:t,transformedShape:r}=this.createBBoxAndTransformShape(e.shape,e.direction),i=[];if(!this.occ.Bnd_Box_IsThin(t,1e-4)){const{minY:s,maxY:o,maxDist:n}=this.computeBounds(t),a=[];let c=0;for(let t=s;t<o;t+=e.steps[c]){const r=this.facesService.createSquareFace({size:n,center:[0,t,0],direction:[0,1,0]});a.push(r),void 0===e.steps[c+1]?c=0:c++}this.applySlices(r,a,e.direction,i)}return this.converterService.makeCompound({shapes:i})}createBBoxAndTransformShape(e,t){const r=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:t,toOrigin:[0,0,0],toDirection:[0,1,0]}),i=new this.occ.Bnd_Box;return this.occ.BRepBndLib.Add(r,i,!1),{bbox:i,transformedShape:r}}computeBounds(e){const t=e.CornerMin(),r=e.CornerMax(),i=t.Y(),s=r.Y(),o=t.X(),n=r.X(),a=t.Z(),c=n-o,h=r.Z()-a;let l=c>=h?c:h;return l*=1.2,{minY:i,maxY:s,maxDist:l}}applySlices(e,t,r,i){const s=[];if(this.enumService.getShapeTypeEnum(e)===Be.shapeTypeEnum.solid)s.push(e);else{const t=this.shapeGettersService.getSolids({shape:e});s.push(...t)}if(0===s.length)throw new Error("No solids found to slice.");s.forEach((e=>{const s=new Be.IntersectionDto;s.keepEdges=!0,s.shapes=[e];const o=this.converterService.makeCompound({shapes:t});s.shapes.push(o),this.booleansService.intersection(s).forEach((e=>{if(e&&!e.IsNull()){const t=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:r});i.push(t)}}))}))}}class it{constructor(e,t,r,i){this.occ=e,this.converterService=t,this.entitiesService=r,this.vecHelper=i}alignAndTranslate(e){const t=this.align({shape:e.shape,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:e.direction}),r=this.translate({shape:t,translation:e.center});return t.delete(),r}scale3d(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),r=new this.occ.gp_GTrsf,i=e.scale,s=new this.occ.gp_Mat(i[0],0,0,0,i[1],0,0,0,i[2]);let o;r.SetVectorialPart(s);try{const i=new this.occ.BRepBuilderAPI_GTransform(t,r),s=i.Shape();o=this.translate({shape:s,translation:e.center}),i.delete(),s.delete()}catch(e){throw new Error("Could not scale the shape")}return t.delete(),r.delete(),s.delete(),o}translate(e){const t=new this.occ.gp_Trsf,r=new this.occ.gp_Vec(e.translation[0],e.translation[1],e.translation[2]);t.SetTranslation(r);const i=new this.occ.BRepBuilderAPI_Transform(e.shape,t,!0),s=i.Shape(),o=this.converterService.getActualTypeOfShape(s);return s.delete(),t.delete(),i.delete(),r.delete(),o}mirror(e){const t=new this.occ.gp_Trsf,r=this.entitiesService.gpAx1(e.origin,e.direction);t.SetMirrorAx1(r);const i=new this.occ.BRepBuilderAPI_Transform(e.shape,t,!0),s=i.Shape(),o=this.converterService.getActualTypeOfShape(s);return s.delete(),i.delete(),t.delete(),r.delete(),o}mirrorAlongNormal(e){const t=new this.occ.gp_Trsf,r=this.entitiesService.gpAx2(e.origin,e.normal);t.SetMirrorOnPlane(r);const i=new this.occ.BRepBuilderAPI_Transform(e.shape,t,!0),s=i.Shape(),o=this.converterService.getActualTypeOfShape(s);return r.delete(),s.delete(),i.delete(),t.delete(),o}rotate(e){let t;if(0!==e.angle){const t=new this.occ.gp_Trsf,r=new this.occ.gp_Vec(e.axis[0],e.axis[1],e.axis[2]),i=new this.occ.gp_Dir(e.axis[0],e.axis[1],e.axis[2]),s=new this.occ.gp_Pnt(0,0,0),o=new this.occ.gp_Ax1(s,i);t.SetRotation(o,this.vecHelper.degToRad(e.angle));const n=new this.occ.BRepBuilderAPI_Transform(e.shape,t,!0),a=n.Shape(),c=this.converterService.getActualTypeOfShape(a);return a.delete(),r.delete(),i.delete(),s.delete(),o.delete(),n.delete(),t.delete(),c}t=e.shape;const r=this.converterService.getActualTypeOfShape(t);return 0!==e.angle&&t.delete(),r}align(e){const t=new this.occ.gp_Trsf,r=this.entitiesService.gpAx3_4(e.fromOrigin,e.fromDirection),i=this.entitiesService.gpAx3_4(e.toOrigin,e.toDirection);t.SetDisplacement(r,i);const s=new this.occ.TopLoc_Location(t),o=e.shape.Moved(s);s.delete(),t.delete(),r.delete(),i.delete();const n=this.converterService.getActualTypeOfShape(o);return o.delete(),n}alignNormAndAxis(e){const t=new this.occ.gp_Trsf,r=this.entitiesService.gpAx3_3(e.fromOrigin,e.fromNorm,e.fromAx),i=this.entitiesService.gpAx3_3(e.toOrigin,e.toNorm,e.toAx);t.SetDisplacement(r,i);const s=new this.occ.TopLoc_Location(t),o=e.shape.Moved(s);s.delete(),t.delete(),r.delete(),i.delete();const n=this.converterService.getActualTypeOfShape(o);return o.delete(),n}}class st{constructor(e,t){this.occ=e,this.shapeGettersService=t}intersection(e){if(e.shapes.length<2)throw new Error("Intersection requires 2 or more shapes to be given");const t=e.shapes[0];let r=[];for(let i=1;i<e.shapes.length;i++){let s;const o=new this.occ.BRepAlgoAPI_Common(t,e.shapes[i]);o.HasGenerated()&&(o.Build(),s=o.Shape(),r.push(s)),o.delete()}return!e.keepEdges&&r.length>0&&(r=r.map((e=>this.occ.ShapeUpgrade_UnifySameDomain_Perform(e,!0,!0,!1)))),r}difference(e){let t=e.shape;const r=e.shapes;for(let e=0;e<r.length;e++){r[e]&&!r[e].IsNull()||console.error("Tool in Difference is null!");const i=new this.occ.BRepAlgoAPI_Cut(t,r[e]);i.Build(),t=i.Shape(),i.delete()}if(!e.keepEdges){const e=this.occ.ShapeUpgrade_UnifySameDomain_Perform(t,!0,!0,!1);t.delete(),t=e}return 1===this.shapeGettersService.getNumSolidsInCompound(t)&&(t=this.shapeGettersService.getSolidFromCompound(t,0)),t}union(e){let t=e.shapes[0];for(let r=0;r<e.shapes.length;r++){const i=new this.occ.BRepAlgoAPI_Fuse(t,e.shapes[r]);i.Build(),t=i.Shape(),i.delete()}return e.keepEdges||(t=this.occ.ShapeUpgrade_UnifySameDomain_Perform(t,!0,!0,!1)),t}}class ot{constructor(e,t,r){this.occ=e,this.enumService=t,this.iteratorService=r}getNumSolidsInCompound(e){if(!e||this.enumService.getShapeTypeEnum(e)!==Be.shapeTypeEnum.compound||e.IsNull())throw new Error("Shape is not a compound or is null.");let t=0;return this.iteratorService.forEachSolid(e,(()=>{t++})),t}getSolidFromCompound(e,t){if(!e||e.ShapeType()>this.occ.TopAbs_ShapeEnum.COMPSOLID||e.IsNull())return console.error("Not a compound shape!"),e;t||(t=0);let r=e,i=0;return this.iteratorService.forEachSolid(e,((e,s)=>{e===t&&(r=this.occ.CastToSolid(s)),i++})),0===i&&console.error("NO SOLIDS FOUND IN SHAPE!"),r.hash=e.hash+1,r}getEdges(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachEdge(e.shape,((e,r)=>{t.push(r)})),t}getEdge(e){if(!e.shape||e.shape.ShapeType&&e.shape.ShapeType()>this.occ.TopAbs_ShapeEnum.WIRE||e.shape.IsNull())throw new Error("Edge can not be found for shape that is not provided or is of incorrect type");e.index||(e.index=0);let t={},r=!1;if(this.iteratorService.forEachEdge(e.shape,((i,s)=>{i===e.index&&(t=s,r=!0)})),r)return t;throw new Error(`Edge can not be found for shape on index ${e.index}`)}getWires(e){const t=[];return this.iteratorService.forEachWire(e.shape,((e,r)=>{t.push(r)})),t}getWire(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===Be.shapeTypeEnum.wire||t===Be.shapeTypeEnum.edge||t===Be.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");let r;if(e.index||(e.index=0),this.iteratorService.forEachWire(e.shape,((t,i)=>{t===e.index&&(r=this.occ.CastToWire(i))})),!r)throw Error("Wire not found");return r}getFaces(e){const t=[];return this.iteratorService.forEachFace(e.shape,((e,r)=>{t.push(r)})),t}getSolids(e){const t=[];return this.iteratorService.forEachSolid(e.shape,((e,r)=>{t.push(r)})),t}getFace(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===Be.shapeTypeEnum.wire||t===Be.shapeTypeEnum.edge||t===Be.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");e.index||(e.index=0);let r={},i=0;if(this.iteratorService.forEachFace(e.shape,((t,s)=>{t===e.index&&(r=this.occ.CastToFace(s)),i++})),i<e.index||e.index<0)throw new Error("Face index is out of range");return r}getVertices(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.vertex)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachVertex(e.shape,((e,r)=>{t.push(r)})),t}getShapesOfCompound(e){const t=[];return this.iteratorService.forEachShapeInCompound(e.shape,((e,r)=>{t.push(r)})),t}}class nt{constructor(e,t,r,i,s,o,n,a,c,h){this.occ=e,this.occRefReturns=t,this.shapeGettersService=r,this.entitiesService=i,this.iteratorService=s,this.converterService=o,this.enumService=n,this.geomService=a,this.transformsService=c,this.vecHelper=h}getCornerPointsOfEdgesForShape(e){const t=this.shapeGettersService.getEdges(e);let r=[];return t.forEach((e=>{const t=this.occ.GetEdgeCurve(e);try{if(t&&!t.IsNull()){const i=this.occ.BRep_Tool_GetEdgeParameters(e);if(i.IsValid){const e=t.Value(i.First),s=t.Value(i.Last),o=[e.X(),e.Y(),e.Z()],n=[s.X(),s.Y(),s.Z()];e.delete(),s.delete(),r.push(o),r.push(n)}t.delete()}}catch(e){console.log(e)}})),r.length>0&&(r=this.vecHelper.removeAllDuplicateVectors(r)),r}getCircularEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeCircular({shape:e})))}getLinearEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeLinear({shape:e})))}getEdgesAlongWire(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===Be.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[],r=this.fixEdgeOrientationsAlongWire(e);return this.iteratorService.forEachEdgeAlongWire(r,((e,r)=>{t.push(r)})),t}fixEdgeOrientationsAlongWire(e){const t=[];return this.iteratorService.forEachEdgeAlongWire(e.shape,((e,r)=>{t.push(r)})),this.converterService.combineEdgesAndWiresIntoAWire({shapes:t})}arcThroughThreePoints(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpPnt(e.middle),i=this.entitiesService.gpPnt(e.end),s=this.occ.MakeArcThrough3Points(t,r,i);return t.delete(),r.delete(),i.delete(),s}arcThroughTwoPointsAndTangent(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpVec(e.tangentVec),i=this.entitiesService.gpPnt(e.end),s=this.occ.MakeArcWithTangent(t,r,i);return t.delete(),r.delete(),i.delete(),s}arcFromCircleAndTwoAngles(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.vecHelper.degToRad(e.alphaAngle1),i=this.vecHelper.degToRad(e.alphaAngle2),s=this.occ.MakeArcOnCircleByAngles(t,r,i,e.sense);return t.delete(),s}arcFromCirclePointAndAngle(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.vecHelper.degToRad(e.alphaAngle),i=this.entitiesService.gpPnt(e.point),s=this.occ.MakeArcOnCircleByAngle(t,i,r,e.sense);return t.delete(),i.delete(),s}lineEdge(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpPnt(e.end),i=this.occ.MakeLineEdgeBetweenPoints(t,r);return t.delete(),r.delete(),i}getEdgeLength(e){return this.occ.GetEdgeLength(e.shape)}getEdgeLengthsOfShape(e){return this.shapeGettersService.getEdges({shape:e.shape}).map((e=>this.getEdgeLength({shape:e})))}getEdgesLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getEdgeLength({shape:e})))}getEdgesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.geomService.getLinearCenterOfMass({shape:e})))}edgesToPoints(e){const t=this.enumService.getShapeTypeEnum(e.shape);let r=[];return r=t===Be.shapeTypeEnum.edge?[e.shape]:t===Be.shapeTypeEnum.wire?this.getEdgesAlongWire({shape:e.shape}):this.shapeGettersService.getEdges({shape:e.shape}),r.map((t=>this.edgeToPoints(Object.assign(Object.assign({},e),{shape:t}))))}startPointOnEdge(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.pointOnCurveAtParam({shape:i,param:0});return i.delete(),s}endPointOnEdge(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.pointOnCurveAtParam({shape:i,param:1});return i.delete(),s}edgeToPoints(e){const t=[],r=new this.occ.TopLoc_Location,i=new this.occ.BRepAdaptor_Curve(e.shape),s=new this.occ.GCPnts_TangentialDeflection(i,e.angularDeflection,e.curvatureDeflection,e.minimumOfPoints,e.uTolerance,e.minimumLength),o=s.NbPoints(),n=[];for(let e=0;e<o;e++){const r=s.Value(e+1);t.push([r.X(),r.Y(),r.Z()]),n.push(r)}if(n.forEach((e=>e.delete())),r.delete(),i.delete(),s.delete(),t.length>1){const r=this.startPointOnEdge({shape:e.shape}),i=t[0],s=t[t.length-1],o=this.vecHelper.distanceBetweenPoints(i,r);this.vecHelper.distanceBetweenPoints(s,r)<o&&t.reverse()}return t}makeEdgeFromGeom2dCurveAndSurfaceBounded(e,t,r){return this.occ.MakeEdgeFromGeom2dCurveAndSurfaceBounded(e.curve,e.surface,t,r)}makeEdgeFromGeom2dCurveAndSurface(e){return this.occ.MakeEdgeFromGeom2dCurveAndSurface(e.curve,e.surface)}constraintTanLinesFromTwoPtsToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),i=new Be.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle;const s=this.transformsService.align(i),o=this.entitiesService.makeVertex(e.point1);i.shape=o;const n=this.transformsService.align(i);o.delete();const a=this.converterService.vertexToPoint({shape:n});n.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.entitiesService.makeVertex(e.point2);i.shape=h;const l=this.transformsService.align(i);h.delete();const d=this.converterService.vertexToPoint({shape:l});l.delete();const u=this.entitiesService.gpPnt2d([d[0],d[1]]),p=this.getGpCircle2dFromEdge({shape:s});s.delete();const f=new this.occ.GccEnt_QualifiedCirc(p,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified));p.delete();const v=this.occ.GccAna_Lin2d2Tan_fromQualifiedCircAndPoint(f,c,e.tolerance),g=this.occ.GccAna_Lin2d2Tan_fromQualifiedCircAndPoint(f,u,e.tolerance);f.delete();const m=[];for(let e=1;e<=v.NbSolutions();e++){const s=v.ThisSolution(e),o=s.Location(),n=this.lineEdge({start:[o.X(),o.Y(),0],end:a});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=n;const c=this.transformsService.align(i);m.push(c),s.delete(),o.delete(),n.delete()}v.delete();const y=[];for(let e=1;e<=g.NbSolutions();e++){const s=g.ThisSolution(e),o=s.Location(),n=this.lineEdge({start:[o.X(),o.Y(),0],end:d});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=n;const a=this.transformsService.align(i);y.push(a),s.delete(),o.delete(),n.delete()}g.delete();let S=[];if(S=e.positionResult===Be.positionResultEnum.all?[...m,...y]:e.positionResult===Be.positionResultEnum.keepSide1?[m[1],y[0]]:e.positionResult===Be.positionResultEnum.keepSide2?[m[0],y[1]]:[...m,...y],2===S.length&&e.circleRemainder!==Be.circleInclusionEnum.none){let t,r;e.positionResult===Be.positionResultEnum.keepSide2?e.circleRemainder===Be.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:S[1]}),r=this.startPointOnEdge({shape:S[0]})):e.circleRemainder===Be.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:S[0]}),r=this.startPointOnEdge({shape:S[1]})):e.positionResult===Be.positionResultEnum.keepSide1&&(e.circleRemainder===Be.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:S[0]}),r=this.startPointOnEdge({shape:S[1]})):e.circleRemainder===Be.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:S[1]}),r=this.startPointOnEdge({shape:S[0]})));const i=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:r,sense:!0});S.splice(1,0,i)}return S}constraintTanLinesFromPtToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),i=new Be.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle;const s=this.transformsService.align(i),o=this.entitiesService.makeVertex(e.point);i.shape=o;const n=this.transformsService.align(i);o.delete();const a=this.converterService.vertexToPoint({shape:n});n.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified));h.delete();const d=this.occ.GccAna_Lin2d2Tan_fromQualifiedCircAndPoint(l,c,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const s=d.ThisSolution(e),o=s.Location(),n=this.lineEdge({start:[o.X(),o.Y(),0],end:a});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=n;const c=this.transformsService.align(i);u.push(c),s.delete(),o.delete(),n.delete()}d.delete();let p=[];if(p=e.positionResult===Be.positionResultEnum.all?[...u]:e.positionResult===Be.positionResultEnum.keepSide1?[u[0]]:e.positionResult===Be.positionResultEnum.keepSide2?[u[1]]:[...u],2===p.length&&e.circleRemainder!==Be.circleInclusionEnum.none){let t,r;e.circleRemainder===Be.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:p[1]}),r=this.startPointOnEdge({shape:p[0]})):e.circleRemainder===Be.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:p[0]}),r=this.startPointOnEdge({shape:p[1]}));const i=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:r,sense:!0});p.splice(1,0,i)}return p}constraintTanLinesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),r=this.getCircularEdgeCenterPoint({shape:e.circle1}),i=new Be.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle1;const s=this.transformsService.align(i);i.shape=e.circle2;const o=this.transformsService.align(i),n=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:o});s.delete(),o.delete();const c=new this.occ.GccEnt_QualifiedCirc(n,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified));n.delete(),a.delete();const l=this.occ.GccAna_Lin2d2Tan_fromTwoQualifiedCirc(c,h,e.tolerance),d=this.occ.GccAna_Lin2d2Tan_fromTwoQualifiedCirc(h,c,e.tolerance);c.delete(),h.delete();const u=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);u.push(t)}l.delete();const p=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);p.push(t)}let f;d.delete(),4===p.length?f=[p[2],p[1],p[0],p[3]]:2===p.length&&(f=[p[1],p[0]]);const v=[];for(let e=0;e<u.length;e++){const s=u[e],o=f[e],n=s.Location(),a=[n.X(),n.Y(),0],c=o.Location(),h=[c.X(),c.Y(),0],l=this.lineEdge({start:a,end:h});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=l;const d=this.transformsService.align(i);v.push(d),l.delete(),s.delete(),o.delete(),n.delete(),c.delete()}let g=[];if(g=e.positionResult===Be.positionResultEnum.all?[...v]:e.positionResult===Be.positionResultEnum.keepSide1&&4===v.length?[v[1],v[3]]:e.positionResult===Be.positionResultEnum.keepSide2&&4===v.length?[v[0],v[2]]:e.positionResult===Be.positionResultEnum.keepSide1&&2===v.length?[]:e.positionResult===Be.positionResultEnum.keepSide2&&2===v.length?[v[0],v[1]]:[...v],2===g.length&&e.circleRemainders!==Be.twoCircleInclusionEnum.none){let t,r,i,s;e.circleRemainders===Be.twoCircleInclusionEnum.outside?(e.positionResult===Be.positionResultEnum.keepSide2||e.positionResult===Be.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})):e.positionResult===Be.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})),i=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===Be.twoCircleInclusionEnum.inside?(e.positionResult===Be.positionResultEnum.keepSide2||e.positionResult===Be.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})):e.positionResult===Be.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})),i=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]})):e.circleRemainders===Be.twoCircleInclusionEnum.insideOutside?(e.positionResult===Be.positionResultEnum.keepSide2||e.positionResult===Be.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})):e.positionResult===Be.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})),i=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===Be.twoCircleInclusionEnum.outsideInside&&(e.positionResult===Be.positionResultEnum.keepSide2||e.positionResult===Be.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})):e.positionResult===Be.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})),i=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]}));const o=this.arcFromCircleAndTwoPoints({circle:e.circle1,start:t,end:r,sense:!0}),n=this.arcFromCircleAndTwoPoints({circle:e.circle2,start:i,end:s,sense:!0});g.unshift(o),g.push(n)}return g}constraintTanCirclesOnCircleAndPnt(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),{alignOpt:i,circle1Aligned:s}=this.alignCircle(t,r,e.circle),o=this.entitiesService.makeVertex(e.point);i.shape=o;const n=this.transformsService.align(i);o.delete();const a=this.converterService.vertexToPoint({shape:n});n.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified));h.delete();const d=this.occ.GccAna_Circ2d2TanRad_fromQualifiedCircAndPoint(l,c,e.radius,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);u.push(t)}d.delete();const p=[];for(let e=0;e<u.length;e++){const s=u[e],o=this.reconstructCircleAndAlignBack(u,s,i,t,r);p.push(o)}return p}alignCircle(e,t,r){const i=new Be.AlignDto;return i.fromDirection=e,i.toDirection=[0,0,1],i.fromOrigin=t,i.toOrigin=[0,0,0],i.shape=r,{alignOpt:i,circle1Aligned:this.transformsService.align(i)}}constraintTanCirclesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),r=this.getCircularEdgeCenterPoint({shape:e.circle1}),{alignOpt:i,circle1Aligned:s}=this.alignCircle(t,r,e.circle1);i.shape=e.circle2;const o=this.transformsService.align(i),n=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:o});s.delete(),o.delete();const c=new this.occ.GccEnt_QualifiedCirc(n,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(Be.gccEntPositionEnum.unqualified));n.delete(),a.delete();const l=this.occ.GccAna_Circ2d2TanRad_fromTwoQualifiedCirc(c,h,e.radius,e.tolerance);c.delete(),h.delete();const d=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);d.push(t)}l.delete();const u=[];for(let e=0;e<d.length;e++){const s=d[e],o=this.reconstructCircleAndAlignBack(d,s,i,t,r);u.push(o)}return u}divideEdgeByParamsToPoints(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:i}),i.FirstParameter(),i.LastParameter());return i.delete(),r.delete(),s}divideEdgeByEqualDistanceToPoints(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.divideCompCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r.delete(),s}pointOnEdgeAtParam(e){const t=e.shape,{uMin:r,uMax:i}=this.getEdgeBounds(t),s=this.vecHelper.remap(e.param,0,1,r,i),o=this.occ.EvaluateEdgeCurve(t,s);if(o&&o.IsValid){const e=[o.Point.X(),o.Point.Y(),o.Point.Z()];return o.delete(),e}}reconstructCircleAndAlignBack(e,t,r,i,s){const o=t.Location(),n=[o.X(),o.Y(),0],a=this.entitiesService.createCircle(t.Radius(),n,[0,0,1],Be.typeSpecificityEnum.edge);r.fromDirection=[0,0,1],r.toDirection=i,r.fromOrigin=[0,0,0],r.toOrigin=s,r.shape=a;const c=this.transformsService.align(r);return a.delete(),t.delete(),o.delete(),c}arcFromCircleAndTwoPoints(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.entitiesService.gpPnt(e.start),i=this.entitiesService.gpPnt(e.end),s=this.occ.MakeArcOnCircle(t,r,i,e.sense);return t.delete(),r.delete(),i.delete(),s}getCircularEdgePlaneDirection(e){const t=this.getGpCircleFromEdge(e),r=t.Position(),i=r.Direction(),s=[i.X(),i.Y(),i.Z()];return i.delete(),r.delete(),t.delete(),s}getCircularEdgeCenterPoint(e){const t=this.getGpCircleFromEdge(e),r=t.Location(),i=[r.X(),r.Y(),r.Z()];return r.delete(),t.delete(),i}getCircularEdgeRadius(e){const t=this.getGpCircleFromEdge(e),r=t.Radius();return t.delete(),r}getGpCircleFromEdge(e){const t=new this.occ.BRepAdaptor_Curve(e.shape);try{const e=t.Circle();return t.delete(),e}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}getGpCircle2dFromEdge(e){const t=new this.occ.BRepAdaptor_Curve(e.shape);try{const e=t.Circle(),r=e.Position(),i=e.Location(),s=this.entitiesService.gpAx2d([i.X(),i.Y()],[1,0]),o=e.Radius(),n=new this.occ.gp_Circ2d(s,o);return t.delete(),e.delete(),r.delete(),i.delete(),s.delete(),n}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}tangentOnEdgeAtParam(e){const t=e.shape,r=this.occ.GetDerivativesOnEdgeAtParam(t,e.param);if(r&&r.isValid)return[r.d1x,r.d1y,r.d1z];throw new Error("Could not get tangent on edge at param")}pointOnEdgeAtLength(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.pointOnCompCurveAtLength(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r.delete(),s}tangentOnEdgeAtLength(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve(r,!1),s=this.geomService.tangentOnCurveAtLengthCompCurve(Object.assign(Object.assign({},e),{shape:i}));return r.delete(),i.delete(),s}getEdgeBounds(e){const t=this.occ.BRep_Tool_GetEdgeParameters(e);return t.IsValid?{uMin:t.First,uMax:t.Last}:{uMin:0,uMax:0}}isEdgeCircular(e){return this.occ.IsEdgeCircular(e.shape)}isEdgeLinear(e){return this.occ.IsEdgeLinear(e.shape)}createSymmetricPeriodicBSplineEdge(e){const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);const r=this.occ.MakeSymmetricPeriodicBSplineEdge(t);return t.delete(),r&&!r.IsNull()?r:void 0}}class at{constructor(e,t,r){this.occ=e,this.vecHelper=t,this.entitiesService=r}curveLength(e){return this.occ.GCPnts_AbscissaPoint_CurveLength(e.shape)}curveLengthCompCurve(e){return this.occ.GCPnts_AbscissaPoint_CompCurveLength(e.shape)}pointOnCurveAtParam(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]),i=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter());t.D0(i,r);const s=[r.X(),r.Y(),r.Z()];return r.delete(),s}pointOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=this.entitiesService.gpPnt([0,0,0]);e.shape.D0(r,i);const s=[i.X(),i.Y(),i.Z()];return t.delete(),i.delete(),s}pointOnCompCurveAtLength(e){const t=this.occ.GCPnts_AbscissaPoint_FromCompCurve(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=this.entitiesService.gpPnt([0,0,0]);e.shape.D0(r,i);const s=[i.X(),i.Y(),i.Z()];return t.delete(),i.delete(),s}pointsOnCurveAtLengths(e){return e.lengths.map((t=>this.pointOnCurveAtLength({shape:e.shape,length:t})))}pointsOnCompCurveAtLengths(e){return e.lengths.map((t=>this.pointOnCompCurveAtLength({shape:e.shape,length:t})))}tangentOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=this.occ.BRepAdaptor_Curve_DN(e.shape,r,1),s=[i.X(),i.Y(),i.Z()];return i.delete(),t.delete(),s}tangentOnCurveAtLengthCompCurve(e){const t=this.occ.GCPnts_AbscissaPoint_FromCompCurve(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=this.occ.BRepAdaptor_CompCurve_DN(e.shape,r,1),s=[i.X(),i.Y(),i.Z()];return i.delete(),t.delete(),s}tangentOnCurveAtParam(e){const t=e.shape,r=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter()),i=this.occ.BRepAdaptor_CompCurve_DN(t,r,1),s=[i.X(),i.Y(),i.Z()];return i.delete(),s}divideCurveByEqualLengthDistance(e){const t=e.shape,r=this.occ.GCPnts_AbscissaPoint_CurveLengthBetween(t,t.FirstParameter(),t.LastParameter()),i=r/e.nrOfDivisions,s=[];for(let e=0;e<=r+1e-9;e+=i)s.push(e);return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const r=new this.occ.GCPnts_AbscissaPoint(t,e,t.FirstParameter()),i=r.Parameter();return r.delete(),i})).map((e=>{const r=this.entitiesService.gpPnt([0,0,0]);t.D0(e,r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}))}divideCompCurveByEqualLengthDistance(e){const t=e.shape,r=this.occ.GCPnts_AbscissaPoint_CompCurveLengthBetween(t,t.FirstParameter(),t.LastParameter()),i=r/e.nrOfDivisions,s=[];for(let e=0;e<=r+1e-9;e+=i)s.push(e);return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const r=this.occ.GCPnts_AbscissaPoint_FromCompCurve(t,e,t.FirstParameter()),i=r.Parameter();return r.delete(),i})).map((e=>{const r=this.entitiesService.gpPnt([0,0,0]);t.D0(e,r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}))}divideCurveToNrSegments(e,t,r){const i=e.shape,s=[];for(let i=0;i<=e.nrOfDivisions;i++){const o=i/e.nrOfDivisions,n=this.vecHelper.remap(o,0,1,t,r);s.push(n)}return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const t=this.entitiesService.gpPnt([0,0,0]);i.D0(e,t);const r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}startPointOnCurve(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]);t.D0(t.FirstParameter(),r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}endPointOnCurve(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]);t.D0(t.LastParameter(),r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}getLinearCenterOfMass(e){const t=e.shape,r=new this.occ.GProp_GProps;this.occ.BRepGProp_LinearProperties(t,r);const i=r.CentreOfMass(),s=[i.X(),i.Y(),i.Z()];return r.delete(),s}}class ct{constructor(){this.type="text",this.name="text"}}class ht{}class lt{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p){this.occ=e,this.occRefReturns=t,this.base=r,this.shapesHelperService=i,this.shapeGettersService=s,this.transformsService=o,this.enumService=n,this.entitiesService=a,this.converterService=c,this.geomService=h,this.edgesService=l,this.vecHelper=d,this.filletsService=u,this.operationsService=p}getWireLength(e){const t=new this.occ.BRepAdaptor_CompCurve(e.shape,!1),r=this.geomService.curveLengthCompCurve({shape:t});return t.delete(),r}getWiresLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getWireLength({shape:e})))}createRectangleWire(e){const t=e.width/2,r=e.length/2,i=[[t,0,r],[-t,0,r],[-t,0,-r],[t,0,-r]].reverse(),s=this.createPolygonWire({points:i}),o=this.transformsService.alignAndTranslate({shape:s,direction:e.direction,center:e.center});return s.delete(),o}createSquareWire(e){return this.createRectangleWire({width:e.size,length:e.size,center:e.center,direction:e.direction})}reversedWire(e){const t=e.shape.Reversed(),r=this.converterService.getActualTypeOfShape(t);return t.delete(),r}reversedWireFromReversedEdges(e){const t=e.shape,r=this.edgesService.getEdgesAlongWire({shape:t}).map((e=>this.converterService.getActualTypeOfShape(e.Reversed()))),i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r.reverse()}),s=this.converterService.getActualTypeOfShape(i);return i.delete(),r.forEach((e=>e.delete())),s}createChristmasTreeWire(e){const t=this.createLineWire({start:[e.innerDist,0,0],end:[0,e.height,0]}),r=this.createLineWire({start:[e.outerDist,0,0],end:[0,e.height,0]}),i=this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),s=this.divideWireByEqualDistanceToPoints({shape:r,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),o=[];if(e.trunkWidth>0&&e.trunkHeight>0?(o.push([0,-e.trunkHeight,0]),o.push([e.trunkWidth/2,-e.trunkHeight,0]),o.push([e.trunkWidth/2,0,0])):o.push([0,0,0]),i.forEach(((t,r)=>{const i=s[r];0===r?o.push(i):0!==r&&r<s.length-1?(o.push([t[0],i[1]+e.height/e.nrSkirts*.1,t[2]]),o.push(i)):o.push(t)})),!e.half){const e=o.map((e=>[-e[0],e[1],e[2]]));e.pop(),o.push(...e.reverse())}let n;if(e.trunkHeight>0&&e.trunkWidth>0){const t=o.map((t=>[t[0],t[1]+e.trunkHeight,t[2]]));n=this.createPolylineWire({points:t})}else n=this.createPolylineWire({points:o});const a=this.transformsService.rotate({shape:n,angle:e.rotation,axis:[0,1,0]});return this.transformsService.alignAndTranslate({shape:a,direction:e.direction,center:e.origin})}createStarWire(e){const t=this.shapesHelperService.starLines(e.innerRadius,e.outerRadius,e.numRays,e.half,e.offsetOuterEdges),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createParallelogramWire(e){const t=this.shapesHelperService.parallelogram(e.width,e.height,e.angle,e.aroundCenter),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createHeartWire(e){const t=e.sizeApprox/2,r=[[0,0,.7*t],[t/6,0,.9*t],[t/2,0,t],[.75*t,0,.9*t],[t,0,t/4],[t/2,0,-t/2],[0,0,-t]],i=r.map((e=>[-e[0],e[1],e[2]])),s=1e-5,o=this.interpolatePoints({points:r,periodic:!1,tolerance:s}),n=this.interpolatePoints({points:i.reverse(),periodic:!1,tolerance:s}),a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[o,n]}),c=this.transformsService.rotate({shape:a,angle:e.rotation,axis:[0,1,0]}),h=this.transformsService.alignAndTranslate({shape:c,direction:e.direction,center:e.center});return a.delete(),c.delete(),o.delete(),n.delete(),h}createNGonWire(e){const t=this.shapesHelperService.ngon(e.nrCorners,e.radius,[0,0]),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createLPolygonWire(e){let t;switch(e.align){case Be.directionEnum.outside:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case Be.directionEnum.inside:t=this.shapesHelperService.polygonLInverted(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case Be.directionEnum.middle:t=this.shapesHelperService.polygonLMiddle(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;default:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond)}const r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createIBeamProfileWire(e){const t=this.shapesHelperService.beamIProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createHBeamProfileWire(e){const t=this.shapesHelperService.beamHProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createTBeamProfileWire(e){const t=this.shapesHelperService.beamTProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createUBeamProfileWire(e){const t=this.shapesHelperService.beamUProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.flangeWidth,e.alignment),r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createPolygonWire(e){const t=[];for(let r=0;r<e.points.length;r++)t.push(this.entitiesService.gpPnt(e.points[r]));const r=new this.occ.BRepBuilderAPI_MakeWire;for(let i=0;i<e.points.length-1;i++){const e=t[i],s=t[i+1],o=this.makeWireBetweenTwoPoints(e,s);r.AddWire(o)}const i=t[e.points.length-1],s=t[0],o=this.makeWireBetweenTwoPoints(i,s);r.AddWire(o);const n=r.Wire();return r.delete(),n}createPolylineWire(e){const t=[];for(let r=0;r<e.points.length;r++)t.push(this.entitiesService.gpPnt(e.points[r]));const r=new this.occ.BRepBuilderAPI_MakeWire;for(let i=0;i<e.points.length-1;i++){const e=t[i],s=t[i+1],o=this.makeWireBetweenTwoPoints(e,s);r.AddWire(o)}const i=r.Wire();return r.delete(),i}createLineWire(e){const t=[];t.push(this.entitiesService.gpPnt(e.start)),t.push(this.entitiesService.gpPnt(e.end));const r=new this.occ.BRepBuilderAPI_MakeWire;for(let e=0;e<t.length-1;e++){const i=t[e],s=t[e+1],o=this.makeWireBetweenTwoPoints(i,s);r.AddWire(o)}const i=r.Wire();return r.delete(),i}createLineWireWithExtensions(e){const t=this.base.vector.normalized({vector:this.base.vector.sub({first:e.end,second:e.start})}),r=this.base.vector.mul({vector:t,scalar:-e.extensionStart}),i=this.base.vector.mul({vector:t,scalar:e.extensionEnd}),s=this.base.vector.add({first:e.start,second:r}),o=this.base.vector.add({first:e.end,second:i});return this.createLineWire({start:s,end:o})}makeWireBetweenTwoPoints(e,t){const r=this.occ.MakeLineEdgeBetweenPoints(e,t),i=new this.occ.BRepBuilderAPI_MakeWire(r),s=i.Wire();return r.delete(),i.delete(),s}divideWireByParamsToPoints(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:r}),r.FirstParameter(),r.LastParameter());return r.delete(),i}divideWireByEqualDistanceToPoints(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.divideCompCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.pointOnCurveAtParam(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}tangentOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.tangentOnCurveAtParam(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.pointOnCompCurveAtLength(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointsOnWireAtLengths(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.pointsOnCompCurveAtLengths(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointsOnWireAtEqualLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.getWireLength({shape:t})/e.length,s=[];let o=0;for(let t=0;t<i;t++)s.push(e.length*t),o+=e.length;e.includeFirst||s.shift(),e.tryNext&&s.push(o+e.length);const n=this.geomService.pointsOnCompCurveAtLengths({lengths:s,shape:r});return e.includeLast&&n.push(this.endPointOnWire({shape:t})),r.delete(),n}pointsOnWireAtPatternOfLengths(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.getWireLength({shape:t}),s=[];let o=0,n=0,a=!1;for(;!a;)for(let t=0;t<e.lengths.length;t++){const r=e.lengths[t];if(!(o+r<=i)){a=!0;break}s.push(o+r),o+=r,n=t}e.includeFirst&&s.unshift(0),e.tryNext&&(n+1<e.lengths.length?s.push(o+e.lengths[n+1]):s.push(o+e.lengths[0]));const c=this.geomService.pointsOnCompCurveAtLengths({lengths:s,shape:r});return e.includeLast&&c.push(this.endPointOnWire({shape:t})),r.delete(),c}tangentOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1),i=this.geomService.tangentOnCurveAtLengthCompCurve(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}interpolatePoints(e){const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);let r;if(e.periodic)r=this.occ.MakePeriodicBSplineWire(t);else{const e=this.occ.MakeBSplineEdge(t),i=new this.occ.BRepBuilderAPI_MakeWire(e);r=i.Wire(),e.delete(),i.delete()}return t.delete(),r&&!r.IsNull()?r:void 0}interpolatePointsSymmetric(e){const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);const r=this.occ.MakeSymmetricPeriodicBSplineWire(t);return t.delete(),r&&!r.IsNull()?r:void 0}isWireClosed(e){const t=this.startPointOnWire({shape:e.shape}),r=this.endPointOnWire({shape:e.shape});return this.base.vector.vectorsTheSame({vec1:r,vec2:t,tolerance:1e-7})}splitOnPoints(e){const t=e.shape,r=this.vecHelper.removeAllDuplicateVectors(e.points,1e-7),i=this.edgesService.getEdgesAlongWire({shape:t});if(0===i.length)return[];const s=[],o=i[0];let n={current:0},a={current:0};this.occRefReturns.BRep_Tool_Range_1(o,n,a),s.push({edgeIndex:0,parameter:n.current}),r.forEach((e=>{let t=1/0,r=-1,o=0;i.forEach(((i,s)=>{const n={current:0},a={current:0};this.occRefReturns.BRep_Tool_Range_1(i,n,a);const c=n.current,h=a.current,l=this.entitiesService.gpPnt(e);try{const e=this.occ.ProjectPointOnCurve(l,i),n=e.param,a=Math.max(c,Math.min(h,n)),d=e.Point,u=d.X()-l.X(),p=d.Y()-l.Y(),f=d.Z()-l.Z(),v=Math.sqrt(u*u+p*p+f*f);v<t&&(t=v,r=s,o=a),d.delete()}catch(e){}l.delete()})),r>=0&&s.push({edgeIndex:r,parameter:o})}));const c=i[i.length-1];n={current:0},a={current:0},this.occRefReturns.BRep_Tool_Range_1(c,n,a),s.push({edgeIndex:i.length-1,parameter:a.current});const h=s.filter(((e,t,r)=>t===r.findIndex((t=>t.edgeIndex===e.edgeIndex&&t.parameter===e.parameter))));h.sort(((e,t)=>e.edgeIndex!==t.edgeIndex?e.edgeIndex-t.edgeIndex:e.parameter-t.parameter));const l=[];for(let e=0;e<h.length-1;e++){const t=h[e],r=h[e+1],s=new this.occ.BRepBuilderAPI_MakeWire;if(t.edgeIndex===r.edgeIndex){const e=i[t.edgeIndex];if(t.parameter===r.parameter)continue;const o=this.occ.TrimEdgeToParams(e,t.parameter,r.parameter);o.IsNull()||s.AddEdge(o)}else{const e=i[t.edgeIndex],o={current:0},n={current:0};this.occRefReturns.BRep_Tool_Range_1(e,o,n);const a=n.current;if(t.parameter<a){const r=this.occ.TrimEdgeToParams(e,t.parameter,a);r.IsNull()||s.AddEdge(r)}for(let e=t.edgeIndex+1;e<r.edgeIndex;e++)s.AddEdge(i[e]);const c=i[r.edgeIndex],h={current:0},l={current:0};this.occRefReturns.BRep_Tool_Range_1(c,h,l);const d=h.current;if(r.parameter>d){const e=this.occ.TrimEdgeToParams(c,d,r.parameter);e.IsNull()||s.AddEdge(e)}}if(s.IsDone()){const e=s.Wire();l.push(e)}}return l}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createWireFromTwoCirclesTan(e){const t=this.shapeGettersService.getEdges({shape:e.circle1}),r=this.shapeGettersService.getEdges({shape:e.circle2});if(1===t.length&&1===r.length){const i=t[0],s=r[0],o=this.edgesService.constraintTanLinesOnTwoCircles({circle1:i,circle2:s,positionResult:e.keepLines===Be.twoSidesStrictEnum.outside?Be.positionResultEnum.keepSide2:Be.positionResultEnum.keepSide1,circleRemainders:this.enumService.convertFourSidesStrictEnumToTwoCircleInclusionEnum(e.circleRemainders),tolerance:e.tolerance}),n=this.converterService.combineEdgesAndWiresIntoAWire({shapes:o});return o.forEach((e=>e.delete())),i.delete(),s.delete(),n}throw new Error("Could not find the edges of the provided circle wires.")}createZigZagBetweenTwoWires(e){const t=e.wire1,r=e.wire2;let i=[],s=[];if(e.zigZagsPerEdge){const o=this.edgesService.getEdgesAlongWire({shape:t}),n=this.edgesService.getEdgesAlongWire({shape:r});e.divideByEqualDistance?(i=o.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=n.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})))):(i=o.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=n.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))))}else e.divideByEqualDistance?(i=[this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByEqualDistanceToPoints({shape:r,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]):(i=[this.divideWireByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByParamsToPoints({shape:r,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]);const o=i.map(((t,r)=>{const i=s[r],o=[];for(let r=0;r<t.length;r++)r%2==0?e.inverse?o.push(i[r]):o.push(t[r]):e.inverse?o.push(t[r]):o.push(i[r]);return this.createPolylineWire({points:o})}));return this.converterService.combineEdgesAndWiresIntoAWire({shapes:o})}getWireCenterOfMass(e){return this.geomService.getLinearCenterOfMass(e)}hexagonsInGrid(e){const t=this.base.point.hexGridScaledToFit(Object.assign(Object.assign({},e),{centerGrid:!0,pointsOnGround:!0})),r=t.hexagons.map((e=>this.createPolygonWire({points:e})));let i=0,s=0,o=0,n=0;const a=[];for(let c=0;c<e.nrHexagonsInHeight;c++)for(let h=0;h<e.nrHexagonsInWidth;h++){let l=1;e.scalePatternWidth&&e.scalePatternWidth.length>0&&(l=e.scalePatternWidth[i],i++,i>=e.scalePatternWidth.length&&(i=0));let d=1;e.scalePatternHeight&&e.scalePatternHeight.length>0&&(d=e.scalePatternHeight[s],s++,s>=e.scalePatternHeight.length&&(s=0));let u=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(u=e.inclusionPattern[o],o++,o>=e.inclusionPattern.length&&(o=0));let p=0;if(e.filletPattern&&e.filletPattern.length>0&&(p=e.filletPattern[n],n++,n>=e.filletPattern.length&&(n=0)),u){p=t.maxFilletRadius*p;const i=r[c*e.nrHexagonsInWidth+h],s=t.centers[c*e.nrHexagonsInWidth+h];if(p>0){const e=this.filletsService.fillet2d({shape:i,radius:p}),t=[l,1,d];let r=e;1===l&&1===d||(r=this.transformsService.scale3d({shape:e,center:s,scale:t})),a.push(r)}else{const e=[l,1,d];let t=i;1===l&&1===d||(t=this.transformsService.scale3d({shape:i,center:s,scale:e})),a.push(t)}}}return a}createWireFromEdge(e){const t=new this.occ.BRepBuilderAPI_MakeWire(e.shape),r=t.Wire();return t.delete(),r}createBSpline(e){const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);e.closed&&(t.push_back(e.points[0][0]),t.push_back(e.points[0][1]),t.push_back(e.points[0][2]));const r=this.occ.MakeApproxBSplineEdge(t,3,8,.001),i=new this.occ.BRepBuilderAPI_MakeWire(r),s=i.Wire();return t.delete(),r.delete(),i.delete(),s}createBezier(e){const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);e.closed&&(t.push_back(e.points[0][0]),t.push_back(e.points[0][1]),t.push_back(e.points[0][2]));const r=this.occ.MakeBezierWire(t);return t.delete(),r}createBezierWeights(e){if(!e.closed&&e.points.length!==e.weights.length)throw new Error("Number of points and weights must be the same when bezier is not closed.");if(e.closed&&e.points.length!==e.weights.length-1)throw new Error("Number of points must be one less than number of weights when bezier is closed.");const t=new this.occ.VectorDouble;for(const r of e.points)t.push_back(r[0]),t.push_back(r[1]),t.push_back(r[2]);e.closed&&(t.push_back(e.points[0][0]),t.push_back(e.points[0][1]),t.push_back(e.points[0][2]));const r=new this.occ.VectorDouble;for(const t of e.weights)r.push_back(t);const i=this.occ.MakeWeightedBezierWire(t,r);return t.delete(),r.delete(),i}addEdgesAndWiresToWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire;let r;if(t.AddWire(e.shape),e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.EDGE?t.AddEdge(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.WIRE&&t.AddWire(e)})),!t.IsDone())throw new Error("Wire could not be constructed. Check if edges and wires do not have disconnected elements.");return r=t.Wire(),t.delete(),r}startPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1);return this.geomService.startPointOnCurve({shape:r})}midPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1);return this.geomService.pointOnCurveAtParam({shape:r,param:.5})}endPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve(t,!1);return this.geomService.endPointOnCurve({shape:r})}textWires(e){const t=this.base.textService.vectorText(e),r=[];return t.forEach((e=>{e.chars.forEach((e=>{e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&r.push(t)}))}))})),r}textWiresWithData(e){const t=this.base.textService.vectorText(e),r=[],i=[];t.forEach((e=>{e.chars.forEach(((e,t)=>{const s=[];e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&(r.push(t),s.push(t))}));const o=this.converterService.makeCompound({shapes:s});i.push({id:`char-${t}`,shape:o})}))}));const s=this.converterService.makeCompound({shapes:r}),o=new ct,n=this.operationsService.boundingBoxOfShape({shape:s}),a=n.max[0]-n.min[0],c=n.max[1]-n.min[1];o.width=a,o.height=c,o.compound="text-compound";const h=new ht;return h.data=o,h.compound=s,h.shapes=[{id:"text-compound",shape:s},...i],h}placeWire(e,t){const r=this.shapeGettersService.getEdges({shape:e}),i=[];r.forEach((e=>{const r={current:0},s={current:0};this.occRefReturns.BRep_Tool_Range_1(e,r,s);const o=this.occ.GetEdgeCurve(e);if(o&&!o.IsNull()){const e=this.entitiesService.gpPln([0,0,0],[0,1,0]),n=this.occ.GeomAPI_To2d(o,e),a=this.edgesService.makeEdgeFromGeom2dCurveAndSurfaceBounded({curve:n,surface:t},r.current,s.current);a&&i.push(a),e.delete(),n.delete(),o.delete()}})),r.forEach((e=>e.delete()));const s=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i});return i.forEach((e=>e.delete())),s}wiresToPoints(e){const t=this.shapeGettersService.getWires({shape:e.shape}),r=[];return t.forEach((t=>{const i=this.edgesService.edgesToPoints(Object.assign(Object.assign({},e),{shape:t})).flat(),s=this.vecHelper.removeConsecutiveDuplicates(i,!1);r.push(s)})),r}createHelixWire(e){const t=this.entitiesService.gpAx3_4(e.center,e.direction),r=this.occ.MakeHelixWire(t,e.radius,e.pitch,e.height,e.clockwise,e.tolerance);return t.delete(),r}createHelixWireByTurns(e){const t=this.entitiesService.gpAx3_4(e.center,e.direction),r=this.occ.MakeHelixWireByTurns(t,e.radius,e.pitch,e.numTurns,e.clockwise,e.tolerance);return t.delete(),r}createTaperedHelixWire(e){const t=this.entitiesService.gpAx3_4(e.center,e.direction),r=this.occ.MakeTaperedHelixWire(t,e.startRadius,e.endRadius,e.pitch,e.height,e.clockwise,e.tolerance);return t.delete(),r}createFlatSpiralWire(e){const t=this.entitiesService.gpAx3_4(e.center,e.direction),r=this.occ.MakeFlatSpiralWire(t,e.startRadius,e.endRadius,e.numTurns,e.clockwise,e.tolerance);return t.delete(),r}}class dt{constructor(e,t,r,i,s,o,n,a,c,h,l,d){this.occ=e,this.occRefReturns=t,this.entitiesService=r,this.enumService=i,this.shapeGettersService=s,this.converterService=o,this.booleansService=n,this.wiresService=a,this.transformsService=c,this.vectorService=h,this.base=l,this.filletsService=d}createFaceFromWireOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWireOnFace(e.face,e.wire,e.inside)}createFacesFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFacesFromWiresOnFace(e.face,e.wires,e.inside)}createFaceFromWire(e){let t;if(this.enumService.getShapeTypeEnum(e.shape)!==Be.shapeTypeEnum.wire)throw new Error("Provided input shape is not a wire");if(e.planar){const r=this.occ.CastToWire(e.shape);t=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(r,e.planar),r.delete()}else{const r=this.occ.CastToWire(e.shape),i=this.shapeGettersService.getEdges({shape:r}),s=new this.occ.BRepFill_Filling;try{for(const e of i)this.occ.BRepFill_Filling_AddEdge(s,e,0,!0),e.delete();if(this.occ.BRepFill_Filling_Build(s),!this.occ.BRepFill_Filling_IsDone(s))throw new Error("BRepFill_Filling failed to create face from wire");t=this.occ.BRepFill_Filling_Face(s)}finally{s.delete(),r.delete()}}return t}getFaceArea(e){const t=new this.occ.GProp_GProps;this.occ.BRepGProp_SurfaceProperties(e.shape,t);const r=t.Mass();return t.delete(),r}getFacesAreas(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceArea({shape:e})))}getFaceCenterOfMass(e){const t=new this.occ.GProp_GProps;this.occ.BRepGProp_SurfaceProperties(e.shape,t);const r=t.CentreOfMass(),i=[r.X(),r.Y(),r.Z()];return t.delete(),r.delete(),i}getFacesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceCenterOfMass({shape:e})))}filterFacePoints(e){const t=e.shape,r=e.points,i=e.tolerance||1e-6,s=!1!==e.keepOn,o=!1!==e.keepIn,n=!0===e.keepOut,a=[];for(const e of r){const r=new this.occ.gp_Pnt(e[0],e[1],e[2]);try{const c=new this.occ.BRepClass_FaceClassifier(t,r,i),h=c.State().value;(0===h&&o||1===h&&n||2===h&&s)&&a.push(e),c.delete()}finally{r.delete()}}return a}createSquareFace(e){const t=this.wiresService.createSquareWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),r}createRectangleFace(e){const t=this.wiresService.createRectangleWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),r}createFaceFromMultipleCircleTanWires(e){const t=e.circles,r=[];if(e.combination===Be.combinationCirclesForFaceEnum.allWithAll)for(let i=0;i<t.length;i++)for(let s=i+1;s<t.length;s++){const o=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[s],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(o,!0);r.push(n)}else if(e.combination===Be.combinationCirclesForFaceEnum.inOrder)for(let i=0;i<t.length-1;i++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[i+1],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);r.push(o)}else if(e.combination===Be.combinationCirclesForFaceEnum.inOrderClosed)for(let i=0;i<t.length;i++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[(i+1)%t.length],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);r.push(o)}let i;return i=e.unify?this.booleansService.union({shapes:r,keepEdges:!1}):this.converterService.makeCompound({shapes:r}),i}createFaceFromMultipleCircleTanWireCollections(e){const t=e.listsOfCircles,r=[];if(e.combination===Be.combinationCirclesForFaceEnum.allWithAll)for(let i=0;i<t.length;i++){const s=t[i],o=t[i+1];if(!o)break;for(let t=0;t<s.length;t++)for(let i=0;i<o.length;i++){const n=s[t],a=o[i],c=this.wiresService.createWireFromTwoCirclesTan({circle1:n,circle2:a,keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),h=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(c,!0);r.push(h)}}else if(e.combination===Be.combinationCirclesForFaceEnum.inOrder){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrder strategy.");for(let i=0;i<t.length-1;i++)for(let s=0;s<t[i].length;s++){const o=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i+1][s],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(o,!0);r.push(n)}}else if(e.combination===Be.combinationCirclesForFaceEnum.inOrderClosed){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrderClosed strategy.");for(let i=0;i<t.length-1;i++)for(let s=0;s<t[i].length;s++){const o=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i+1][s],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(o,!0);r.push(n)}for(let i=0;i<t.length;i++)for(let s=0;s<t[i].length;s++){const o=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i][(s+1)%t[i].length],keepLines:Be.twoSidesStrictEnum.outside,circleRemainders:Be.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(o,!0);r.push(n)}}let i;return i=e.unify?this.booleansService.union({shapes:r,keepEdges:!1}):this.converterService.makeCompound({shapes:r}),i}faceNormalOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=s+(o-s)*e.paramU,h=n+(a-n)*e.paramV,l=this.occ.GeomLib_NormEstim(i,this.entitiesService.gpPnt2d([c,h]),1e-7);t.Orientation()===this.occ.TopAbs_Orientation.REVERSED&&l.Reverse();const d=[l.X(),l.Y(),l.Z()];return l.delete(),r.delete(),d}getUVBounds(e){const t={current:0},r={current:0},i={current:0},s={current:0};return this.occRefReturns.BRepTools_UVBounds_1(e,t,r,i,s),{uMin:t.current,uMax:r.current,vMin:i.current,vMax:s.current}}createFaceFromWires(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.shapes,e.planar)}createFaceFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.wires,!1,e.face,e.inside)}faceFromSurface(e){return this.occ.MakeFaceFromSurface(e.shape,e.tolerance)}faceFromSurfaceAndWire(e){return this.occ.MakeFaceFromSurfaceAndWire(e.surface,e.wire,e.inside)}createFacesFromWires(e){return e.shapes.map((t=>this.createFaceFromWire({shape:t,planar:e.planar})))}getUMinBound(e){const t=e.shape,{uMin:r}=this.getUVBounds(t);return r}getUMaxBound(e){const t=e.shape,{uMax:r}=this.getUVBounds(t);return r}getVMinBound(e){const t=e.shape,{vMin:r}=this.getUVBounds(t);return r}getVMaxBound(e){const t=e.shape,{vMax:r}=this.getUVBounds(t);return r}subdivideToPointsControlled(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.nrDivisionsU;t++){const r=(o-s)/(e.nrDivisionsU-1),h=r/2,l=r*t;for(let r=0;r<e.nrDivisionsV;r++){const o=(a-n)/(e.nrDivisionsV-1),d=o/2;let u=n+o*r;u+=e.shiftHalfStepNthV&&(t+e.shiftHalfStepVOffsetN)%e.shiftHalfStepNthV==0?d:0;let p=s+l;p+=e.shiftHalfStepNthU&&(r+e.shiftHalfStepUOffsetN)%e.shiftHalfStepNthU==0?h:0;const f=this.occ.Geom_Surface_Value(i,p,u),v=[f.X(),f.Y(),f.Z()];let g=!0;(0===t&&e.removeStartEdgeNthU&&(r+e.removeStartEdgeUOffsetN)%e.removeStartEdgeNthU==0||t===e.nrDivisionsU-1&&e.removeEndEdgeNthU&&(r+e.removeEndEdgeUOffsetN)%e.removeEndEdgeNthU==0||0===r&&e.removeStartEdgeNthV&&(t+e.removeStartEdgeVOffsetN)%e.removeStartEdgeNthV==0||r===e.nrDivisionsV-1&&e.removeEndEdgeNthV&&(t+e.removeEndEdgeVOffsetN)%e.removeEndEdgeNthV==0)&&(g=!1),g&&c.push(v),f.delete()}}return r.delete(),c}subdivideToPoints(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartEdgeU?1:0,l=e.removeEndEdgeU?1:0,d=e.removeStartEdgeV?1:0,u=e.removeEndEdgeV?1:0;for(let t=0+h;t<e.nrDivisionsU-l;t++){const r=(o-s)/(e.nrDivisionsU-1),h=r/2,l=r*t,p=s+(e.shiftHalfStepU?h:0)+l;for(let t=0+d;t<e.nrDivisionsV-u;t++){const r=(a-n)/(e.nrDivisionsV-1),s=r/2,o=r*t,h=n+(e.shiftHalfStepV?s:0)+o,l=this.occ.Geom_Surface_Value(i,p,h),d=[l.X(),l.Y(),l.Z()];c.push(d),l.delete()}}return r.delete(),c}subdivideToWires(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[],h=1/e.nrDivisions;for(let t=0;t<=e.nrDivisions;t++){const e=h*t;c.push(e)}if(e.removeStart&&c.shift(),e.removeEnd&&c.pop(),e.shiftHalfStep){const e=h/2;c.forEach(((t,r)=>{c[r]=c[r]+e}))}const l=[];for(let t=0;t<c.length;t++){const r=c[t],h=this.placeWireOnParamSurface(e.isU,r,s,o,n,a,i);l.push(h)}return r.delete(),l}subdivideToRectangleWires(e){var t;if(void 0===e.shape)throw Error("Face not defined");const r=[],i=e.shape,s=this.occ.BRep_Tool_Surface(i).get(),{uMin:o,uMax:n,vMin:a,vMax:c}=this.getUVBounds(i),h=[],l=(1-2*e.offsetFromBorderU)/e.nrRectanglesU,d=l/2;for(let t=0;t<e.nrRectanglesU;t++){const r=l*t+d+e.offsetFromBorderU;h.push(r)}const u=[],p=(1-2*e.offsetFromBorderV)/e.nrRectanglesV,f=p/2;for(let t=0;t<e.nrRectanglesV;t++){const r=p*t+f+e.offsetFromBorderV;u.push(r)}const v=this.wiresService.createLineWire({start:[0,0,0],end:[1,0,0]}),g=this.wiresService.createLineWire({start:[0,0,0],end:[0,0,1]}),m=this.wiresService.placeWire(v,s),y=this.wiresService.placeWire(g,s),S=this.wiresService.getWireLength({shape:m}),w=this.wiresService.getWireLength({shape:y}),b=n-o,E=c-a,x=[];let T=0,P=0,C=0,k=0;const D=[];for(let i=0;i<h.length;i++)for(let n=0;n<u.length;n++){let c=1;e.scalePatternU&&e.scalePatternU.length>0&&(c=e.scalePatternU[T],T++,T>=e.scalePatternU.length&&(T=0));let d=1;e.scalePatternV&&e.scalePatternV.length>0&&(d=e.scalePatternV[P],P++,P>=e.scalePatternV.length&&(P=0));let f=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(f=e.inclusionPattern[C],C++,C>=e.inclusionPattern.length&&(C=0));let v=0;if(e.filletPattern&&e.filletPattern.length>0&&(v=e.filletPattern[k],k++,k>=e.filletPattern.length&&(k=0)),f){const e=p*d,f=l*c,g=Math.min(e*E*S,f*b*w);(g===e*E*S||g===f*b*w)&&(v*=g/2);const m=null===(t=D.find((t=>t.id===`${e}-${f}-${v}`)))||void 0===t?void 0:t.shape,y=[u[n]*E+a,0,h[i]*b+o];if(m){const e=this.transformsService.translate({shape:m,translation:y}),t=this.wiresService.placeWire(e,s);x.push(t)}else{const t=this.wiresService.createRectangleWire({width:e,length:f,center:[0,0,0],direction:[0,1,0]});if(v>0){const i=[E*S,1,b*w],o=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:i}),n=this.filletsService.fillet2d({shape:o,radius:v}),a=[1/S,1,1/w];let c=n;this.vectorService.vectorsTheSame(a,[1,1,1],1e-7)||(c=this.transformsService.scale3d({shape:n,center:[0,0,0],scale:a}));const h=this.transformsService.translate({shape:c,translation:y});r.push(t);const l=this.wiresService.placeWire(h,s);x.push(l),D.push({id:`${e}-${f}-${v}`,shape:c})}else{const i=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:[E,1,b]}),o=this.transformsService.translate({shape:i,translation:y});r.push(t);const n=this.wiresService.placeWire(o,s);x.push(n),D.push({id:`${e}-${f}-${v}`,shape:i})}}}}return r.forEach((e=>e.delete())),x}subdivideToRectangleHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToRectangleWires(e),r=this.shapeGettersService.getWires({shape:e.shape}),i=this.wiresService.getWiresLengths({shapes:r}),s=r[i.indexOf(Math.max(...i))],o=t.map((e=>this.wiresService.reversedWire({shape:e}))),n=[s,...o],a=this.createFaceFromWiresOnFace({wires:n,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),o.forEach((e=>e.delete())),[a,...d]}subdivideToHexagonWires(e){var t,r,i,s;if(void 0===e.shape)throw new Error("Face not defined");const o=[],n=e.shape,a=this.occ.BRep_Tool_Surface(n).get(),{uMin:c,uMax:h,vMin:l,vMax:d}=this.getUVBounds(n),u=h-c,p=d-l;if(u<=0||p<=0)return console.warn("Face has zero or negative parametric range. Skipping."),[];const f=u*(1-2*e.offsetFromBorderU),v=p*(1-2*e.offsetFromBorderV),g=c+u*e.offsetFromBorderU,m=l+p*e.offsetFromBorderV;if(f<=0||v<=0)return console.warn("Grid dimensions are zero or negative after applying offset. Skipping."),[];const y=this.base.point.hexGridScaledToFit({width:v,height:f,nrHexagonsInHeight:e.nrHexagonsU,nrHexagonsInWidth:e.nrHexagonsV,centerGrid:!1,pointsOnGround:!0,flatTop:e.flatU,extendTop:e.extendUUp,extendBottom:e.extendUBottom,extendLeft:e.extendVBottom,extendRight:e.extendVUp}),S=y.hexagons.map((e=>this.wiresService.createPolygonWire({points:e})));o.push(...S);const w=[m,0,g],b=S.map((e=>this.transformsService.translate({shape:e,translation:w})));o.push(...b);const E=this.base.point.translatePoints({points:y.centers,translation:w}),x=[];let T=0,P=0,C=0,k=0;const D=e.nrHexagonsU*e.nrHexagonsV;if(b.length!==D||E.length!==D)return console.error(`Generated ${b.length} hexagons, but expected ${D}. Check hexGridScaledToFit logic.`),[];for(let n=0;n<e.nrHexagonsU;n++)for(let c=0;c<e.nrHexagonsV;c++){const h=n*e.nrHexagonsV+c;let l=1;(null===(t=e.scalePatternU)||void 0===t?void 0:t.length)>0&&(l=e.scalePatternU[T%e.scalePatternU.length],T++);let d=1;(null===(r=e.scalePatternV)||void 0===r?void 0:r.length)>0&&(d=e.scalePatternV[P%e.scalePatternV.length],P++);let u=!0;(null===(i=e.inclusionPattern)||void 0===i?void 0:i.length)>0&&(u=e.inclusionPattern[C%e.inclusionPattern.length],C++);let p=0;if((null===(s=e.filletPattern)||void 0===s?void 0:s.length)>0&&(p=e.filletPattern[k%e.filletPattern.length],k++),u){const e=b[h],t=E[h];let r=e;const i=y.maxFilletRadius*p;if(i>1e-6){const t=this.filletsService.fillet2d({shape:e,radius:i});o.push(t),r=t}let s=r;const n=[d,1,l];if(Math.abs(l-1)>1e-6||Math.abs(d-1)>1e-6){const e=this.transformsService.scale3d({shape:r,center:t,scale:n});o.push(e),s=e}const c=this.wiresService.placeWire(s,a);x.push(c)}}return o.forEach((e=>{e.delete()})),x}subdivideToHexagonHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToHexagonWires(e),r=this.shapeGettersService.getWires({shape:e.shape}),i=this.wiresService.getWiresLengths({shapes:r}),s=r[i.indexOf(Math.max(...i))],o=t.map((e=>this.wiresService.reversedWire({shape:e}))),n=[s,...o],a=this.createFaceFromWiresOnFace({wires:n,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),o.forEach((e=>e.delete())),[a,...d]}subdivideToNormals(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartEdgeU?1:0,l=e.removeEndEdgeU?1:0,d=e.removeStartEdgeV?1:0,u=e.removeEndEdgeV?1:0;for(let r=0+h;r<e.nrDivisionsU-l;r++){const h=(o-s)/(e.nrDivisionsU-1),l=h/2,p=h*r,f=s+(e.shiftHalfStepU?l:0)+p;for(let r=0+d;r<e.nrDivisionsV-u;r++){const s=(a-n)/(e.nrDivisionsV-1),o=s/2,h=s*r,l=n+(e.shiftHalfStepV?o:0)+h,d=this.entitiesService.gpPnt2d([f,l]),u=this.occ.GeomLib_NormEstim(i,d,1e-7);t.Orientation()===this.occ.TopAbs_Orientation.REVERSED&&u.Reverse();const p=[u.X(),u.Y(),u.Z()];c.push(p),u.delete(),d.delete()}}return r.delete(),c}wireAlongParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=this.placeWireOnParamSurface(e.isU,e.param,s,o,n,a,i);return r.delete(),c}placeWireOnParamSurface(e,t,r,i,s,o,n){let a,c=t;e?(c=r+(i-r)*t,a=this.wiresService.createLineWire({start:[s,0,c],end:[o,0,c]})):(c=s+(o-s)*t,a=this.wiresService.createLineWire({start:[c,0,r],end:[c,0,i]}));const h=this.wiresService.placeWire(a,n);return a.delete(),h}wiresAlongParams(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.params.length;t++){const r=e.params[t],h=this.placeWireOnParamSurface(e.isU,r,s,o,n,a,i);c.push(h)}return r.delete(),c}subdivideToPointsOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartPoint?1:0,l=e.removeEndPoint?1:0;let d=e.param;d=e.isU?s+(o-s)*d:n+(a-n)*d;for(let t=0+h;t<e.nrPoints-l;t++){let r,h;if(e.isU){const i=(a-n)/(e.nrPoints-1),s=i/2,o=i*t;r=n+(e.shiftHalfStep?s:0)+o}else{const i=(o-s)/(e.nrPoints-1),n=i/2,a=i*t;r=s+(e.shiftHalfStep?n:0)+a}h=e.isU?this.occ.Geom_Surface_Value(i,d,r):this.occ.Geom_Surface_Value(i,r,d);const l=[h.X(),h.Y(),h.Z()];c.push(l),h.delete()}return r.delete(),c}subdivideToUVOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:o}=this.getUVBounds(t),n=[],a=e.removeStartPoint?1:0,c=e.removeEndPoint?1:0;let h=e.param;h=e.isU?r+(i-r)*h:s+(o-s)*h;for(let t=0+a;t<e.nrPoints-c;t++){let a,c;if(e.isU){const r=(o-s)/(e.nrPoints-1),i=r/2,n=r*t;a=s+(e.shiftHalfStep?i:0)+n}else{const s=(i-r)/(e.nrPoints-1),o=s/2,n=s*t;a=r+(e.shiftHalfStep?o:0)+n}c=e.isU?[h,a]:[a,h],n.push(c)}return n}subdivideToUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:o}=this.getUVBounds(t),n=[],a=e.removeStartEdgeU?1:0,c=e.removeEndEdgeU?1:0,h=e.removeStartEdgeV?1:0,l=e.removeEndEdgeV?1:0;for(let t=0+a;t<e.nrDivisionsU-c;t++){const a=(i-r)/(e.nrDivisionsU-1),c=a/2,d=a*t,u=r+(e.shiftHalfStepU?c:0)+d;for(let t=0+h;t<e.nrDivisionsV-l;t++){const r=(o-s)/(e.nrDivisionsV-1),i=r/2,a=r*t,c=s+(e.shiftHalfStepV?i:0)+a;n.push([u,c])}}return n}uvOnFace(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:o}=this.getUVBounds(t);return[r+(i-r)*e.paramU,s+(o-s)*e.paramV]}pointsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t).get(),{uMin:i,uMax:s,vMin:o,vMax:n}=this.getUVBounds(t);return e.paramsUV.map((e=>{const t=i+(s-i)*e[0],a=o+(n-o)*e[1],c=this.occ.Geom_Surface_Value(r,t,a),h=[c.X(),c.Y(),c.Z()];return c.delete(),h}))}normalsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get(),{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=e.paramsUV.map((e=>{const t=s+(o-s)*e[0],r=n+(a-n)*e[1],c=this.entitiesService.gpPnt2d([t,r]),h=this.occ.GeomLib_NormEstim(i,c,1e-7),l=[h.X(),h.Y(),h.Z()];return h.delete(),c.delete(),l}));return r.delete(),c}pointOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool_Surface(t),i=r.get();if(i){const{uMin:s,uMax:o,vMin:n,vMax:a}=this.getUVBounds(t),c=s+(o-s)*e.paramU,h=n+(a-n)*e.paramV,l=this.occ.Geom_Surface_Value(i,c,h),d=[l.X(),l.Y(),l.Z()];return l.delete(),r.delete(),d}}normalOnUV(e){return this.faceNormalOnUV(e)}createPolygonFace(e){const t=this.wiresService.createPolygonWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!1);return t.delete(),r}}class ut{constructor(e,t,r,i,s,o){this.occ=e,this.entitiesService=t,this.converterService=r,this.shapeGettersService=i,this.wiresService=s,this.booleansService=o}vertexFromXYZ(e){return this.entitiesService.makeVertex([e.x,e.y,e.z])}vertexFromPoint(e){return this.entitiesService.makeVertex(e.point)}verticesFromPoints(e){return e.points.map((e=>this.vertexFromPoint({point:e})))}verticesCompoundFromPoints(e){const t=this.verticesFromPoints(e);return this.converterService.makeCompound({shapes:t})}getVertices(e){return this.shapeGettersService.getVertices(e)}getVerticesAsPoints(e){const t=this.shapeGettersService.getVertices(e);return this.verticesToPoints({shapes:t})}verticesToPoints(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool_Pnt(e),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}pointsToVertices(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool_Pnt(e),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}vertexToPoint(e){return this.converterService.vertexToPoint(e)}projectPoints(e){const t=e.points.map((t=>[t[0]+e.direction[0],t[1]+e.direction[1],t[2]+e.direction[2]])).map(((t,r)=>({start:e.points[r],end:t})));return this.wiresService.createLines({lines:t,returnCompound:!1}).map(((t,r)=>{const i=this.booleansService.intersection({shapes:[t,e.shape],keepEdges:!1}).map((e=>this.shapeGettersService.getVertices({shape:e})));if(i){const t=this.verticesToPoints({shapes:i.flat().filter((e=>void 0!==e))});return e.projectionType===Be.pointProjectionTypeEnum.closest?[this.getClosestPointFromPoints(t,e.points[r])]:e.projectionType===Be.pointProjectionTypeEnum.furthest?[this.getFurthestPointFromPoints(t,e.points[r])]:e.projectionType===Be.pointProjectionTypeEnum.closestAndFurthest?[this.getClosestPointFromPoints(t,e.points[r]),this.getFurthestPointFromPoints(t,e.points[r])]:e.projectionType===Be.pointProjectionTypeEnum.all?t:void 0}})).flat().filter((e=>void 0!==e))}getClosestPointFromPoints(e,t){let r=Number.MAX_VALUE,i=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s<r&&(r=s,i=e)})),i}getFurthestPointFromPoints(e,t){let r=0,i=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s>r&&(r=s,i=e)})),i}distanceBetweenTwoPoints(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}}class pt{constructor(e,t,r,i){this.occ=e,this.shapeGettersService=t,this.converterService=r,this.facesService=i}getShellSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}sewFaces(e){const t=new this.occ.BRepBuilderAPI_Sewing(e.tolerance);e.shapes.forEach((e=>{t.Add(e)})),t.Perform();const r=t.SewedShape(),i=this.converterService.getActualTypeOfShape(r);return t.delete(),r.delete(),i}}class ft{constructor(e,t,r,i,s,o,n,a,c,h){this.occ=e,this.vecHelper=t,this.iteratorService=r,this.converterService=i,this.entitiesService=s,this.transformsService=o,this.shapeGettersService=n,this.edgesService=a,this.operationsService=c,this.facesService=h}filletEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.radius)throw Error("Radius not defined");const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational),r=new this.occ.TopExp_Explorer(e.shape,this.occ.TopAbs_ShapeEnum.EDGE,this.occ.TopAbs_ShapeEnum.SHAPE),i=[];for(;r.More();){const s=this.occ.CastToEdge(r.Current());i.push(s),t.Add(e.radius,s),r.Next()}const s=t.Shape();return t.delete(),r.delete(),i.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);let r,i=0,s=0;const o=e.indexes;if(this.iteratorService.forEachEdge(e.shape,((r,n)=>{if(o.includes(r)){let r=e.radius;if(e.radiusList&&(r=e.radiusList[s],s++),void 0===r)throw Error("Radius not defined, or radiusList not correct length");t.Add(r,n),i++}})),0===i)throw new Error("Fillet Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!");r=t.Shape(),t.delete();const n=this.converterService.getActualTypeOfShape(r);return r.delete(),n}}filletEdgesListOneRadius(e){if(e.edges&&e.edges.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);e.edges.forEach((r=>{t.Add(e.radius,r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesList(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.edges.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);e.edges.forEach(((r,i)=>{t.Add(e.radiusList[i],r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgeVariableRadius(e){if(e.paramsU&&e.paramsU.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);this.assignVariableFilletToEdge(e,t);const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesSameVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);e.edges.forEach((r=>{this.assignVariableFilletToEdge({edge:r,paramsU:e.paramsU,radiusList:e.radiusList,shape:e.shape},t)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusLists&&e.radiusLists.length>0&&e.paramsULists.length===e.radiusLists.length&&e.paramsULists.length===e.edges.length&&e.radiusLists.length===e.edges.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.Rational);e.edges.forEach(((r,i)=>{this.assignVariableFilletToEdge({edge:r,paramsU:e.paramsULists[i],radiusList:e.radiusLists[i],shape:e.shape},t)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}assignVariableFilletToEdge(e,t){const r=new this.occ.TColgp_Array1OfPnt2d(1,e.paramsU.length);e.paramsU.forEach(((t,i)=>{r.SetValue(i+1,this.entitiesService.gpPnt2d([t,e.radiusList[i]]))})),t.AddWithLaw(r,e.edge)}chamferEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.distance)throw Error("Distance is undefined");const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=new this.occ.TopExp_Explorer(e.shape,this.occ.TopAbs_ShapeEnum.EDGE,this.occ.TopAbs_ShapeEnum.SHAPE),i=[];for(;r.More();){const s=this.occ.CastToEdge(r.Current());i.push(s),t.Add(e.distance,s),r.Next()}const s=t.Shape();return t.delete(),r.delete(),i.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);let r,i=0,s=0;const o=e.indexes;this.iteratorService.forEachEdge(e.shape,((r,n)=>{if(o.includes(r)){let r=e.distance;if(e.distanceList&&(r=e.distanceList[s],s++),void 0===r)throw Error("Distance not defined and/or distance list incorrect length");t.Add(r,n),i++}})),0===i?(console.error("Chamfer Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!"),r=e.shape):r=t.Shape(),t.delete();const n=this.converterService.getActualTypeOfShape(r);return r.delete(),n}}chamferEdgesList(e){if(e.edges&&e.edges.length>0&&e.distanceList&&e.distanceList.length>0&&e.edges.length===e.distanceList.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{const s=e.distanceList[i];if(void 0===s)throw Error("Distance is not defined");t.Add(s,r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgeTwoDistances(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);t.AddTwoDistances(e.distance1,e.distance2,e.edge,e.face);const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}chamferEdgesTwoDistances(e){if(e.edges&&e.edges.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{t.AddTwoDistances(e.distance1,e.distance2,r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgesTwoDistancesLists(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances1&&e.distances1.length>0&&e.distances2&&e.distances2.length>0&&e.edges.length===e.faces.length&&e.edges.length===e.distances1.length&&e.edges.length===e.distances2.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{t.AddTwoDistances(e.distances1[i],e.distances2[i],r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgeDistAngle(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=this.vecHelper.degToRad(e.angle);t.AddDA(e.distance,r,e.edge,e.face);const i=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(i);return i.delete(),s}chamferEdgesDistsAngles(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances&&e.distances.length>0&&e.angles&&e.angles.length>0&&e.edges.length===e.distances.length&&e.edges.length===e.faces.length&&e.edges.length===e.angles.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{const s=this.vecHelper.degToRad(e.angles[i]);t.AddDA(e.distances[i],s,r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgesDistAngle(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=this.vecHelper.degToRad(e.angle);e.edges.forEach(((i,s)=>{t.AddDA(e.distance,r,i,e.faces[s])}));const i=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(i);return i.delete(),s}}fillet2d(e){if(e.indexes&&e.radiusList&&e.radiusList.length!==e.indexes.length)throw new Error("When using radius list, length of the list must match index list of corners that you want to fillet.");let t,r=!1;if(e.shape.ShapeType()===this.occ.TopAbs_ShapeEnum.FACE)t=this.converterService.getActualTypeOfShape(e.shape),r=!0;else{if(e.shape.ShapeType()!==this.occ.TopAbs_ShapeEnum.WIRE)throw new Error("You can only fillet a 2d wire or a 2d face.");{const r=this.occ.MakeFaceFromWireOnlyPlane(e.shape,!0);t=this.converterService.getActualTypeOfShape(r),r.delete()}}const i=new this.occ.BRepFilletAPI_MakeFillet2d(t),s=new this.occ.TopExp_Explorer(e.shape,this.occ.TopAbs_ShapeEnum.VERTEX,this.occ.TopAbs_ShapeEnum.SHAPE);let o=1;const n=[];for(;s.More();s.Next()){const e=this.occ.CastToVertex(s.Current());o%2==0&&n.push(e),o++}r||e.shape.Closed()||n.pop();let a,c=0;if(n.forEach(((t,r)=>{e.indexes?e.indexes.includes(r+1)&&(this.applyRadiusToVertex(e,i,t,c),c++):this.applyRadiusToVertex(e,i,t,r)})),i.Build(),r)a=i.Shape();else if(i.IsDone()){const e=i.Shape(),t=this.shapeGettersService.getWires({shape:e});1===t.length&&(a=t[0])}else{const r=this.facesService.faceNormalOnUV({shape:t,paramU:.5,paramV:.5});a=this.fillet3DWire({shape:e.shape,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:r})}return s.delete(),i.delete(),n.forEach((e=>e.delete())),a}fillet3DWire(e){let t=!1;if(e.radiusList&&e.radiusList.length>0&&e.indexes&&e.indexes.length>0){if(e.radiusList.length!==e.indexes.length)throw new Error("Radius list and indexes are not the same length");t=!0}let r=this.edgesService.fixEdgeOrientationsAlongWire({shape:e.shape});if(t&&e.shape.Closed()){const t=this.edgesService.getEdgesAlongWire({shape:e.shape}),i=t.shift(),s=[...t,i];r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:s})}else r=this.converterService.getActualTypeOfShape(e.shape.Reversed());const i=this.operationsService.extrude({shape:r,direction:e.direction});let s=e.indexes;if(t){const t=e.indexes.filter((e=>e>1)),r=Math.max(...t),i=[4];let o=4;for(let e=0;e<r;e++)o+=3,i.push(o);s=e.indexes.map((t=>e.shape.Closed()?t<=1?t:i[t-2]:0===t?1:i[t-1]))}const o=this.filletEdges({shape:i,radius:e.radius,indexes:s,radiusList:e.radiusList}),n=[],a=this.shapeGettersService.getFaces({shape:o});a.forEach(((e,t)=>{const r=this.shapeGettersService.getEdges({shape:e})[3];n.push(r)}));const c=this.converterService.combineEdgesAndWiresIntoAWire({shapes:n}),h=this.transformsService.translate({shape:c,translation:e.direction.map((e=>-e))});return i.delete(),o.delete(),a.forEach((e=>e.delete())),n.forEach((e=>e.delete())),h}applyRadiusToVertex(e,t,r,i){if(e.radiusList){const s=e.radiusList;t.AddFillet(r,s[i])}else e.radius&&t.AddFillet(r,e.radius)}}class vt{constructor(e,t,r,i,s,o,n,a){this.occ=e,this.shapeGettersService=t,this.facesService=r,this.enumService=i,this.entitiesService=s,this.converterService=o,this.transformsService=n,this.vectorHelperService=a}fromClosedShell(e){const t=this.converterService.getActualTypeOfShape(e.shape),r=new this.occ.BRepBuilderAPI_MakeSolid(t),i=r.Solid();return r.delete(),t.delete(),i}createBox(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.height/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,t)}createCube(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.size/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.size,e.size,e.size,t)}createBoxFromCorner(e){const t=this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,e.corner),r=this.transformsService.translate({shape:t,translation:[e.width/2,e.height/2,e.length/2]});return t.delete(),r}createCylinder(e){const t=e.direction?e.direction:[0,1,0];let r,i;i=void 0===e.angle?2*Math.PI:this.vectorHelperService.degToRad(e.angle);const s=this.entitiesService.bRepPrimAPIMakeCylinder(e.center,t,e.radius,e.height,i);if(e.originOnCenter){const i=-e.height/2,o=this.vectorHelperService.normalize(t);r=this.transformsService.translate({shape:s,translation:[o[0]*i,o[1]*i,o[2]*i]}),s.delete()}else r=s;return r}createCylindersOnLines(e){return e.lines.map((t=>this.entitiesService.bRepPrimAPIMakeCylinderBetweenPoints(t.start,t.end,e.radius)))}createSphere(e){return this.entitiesService.bRepPrimAPIMakeSphere(e.center,[0,0,1],e.radius)}createCone(e){const t=this.entitiesService.gpAx2(e.center,e.direction),r=new this.occ.BRepPrimAPI_MakeCone(t,e.radius1,e.radius2,e.height,e.angle),i=r.Shape();return r.delete(),t.delete(),i}createTorus(e){const t=this.entitiesService.gpAx2(e.center,e.direction);let r,i=e.angle;null==i&&(i=2*Math.PI),r=i>=2*Math.PI-1e-7?new this.occ.BRepPrimAPI_MakeTorus(t,e.majorRadius,e.minorRadius):new this.occ.BRepPrimAPI_MakeTorus(t,e.majorRadius,e.minorRadius,0,2*Math.PI,i);const s=r.Shape();return r.delete(),t.delete(),s}filterSolidPoints(e){const t=[];return e.points.length>0?(e.points.forEach((r=>{const i=this.entitiesService.gpPnt(r);let s;switch(this.occ.ClassifyPointInSolid(e.shape,i,e.tolerance)){case 0:s=Be.topAbsStateEnum.in;break;case 1:s=Be.topAbsStateEnum.out;break;case 2:s=Be.topAbsStateEnum.on;break;default:s=Be.topAbsStateEnum.unknown}e.keepOn&&s===Be.topAbsStateEnum.on&&t.push(r),e.keepIn&&s===Be.topAbsStateEnum.in&&t.push(r),e.keepOut&&s===Be.topAbsStateEnum.out&&t.push(r),e.keepUnknown&&s===Be.topAbsStateEnum.unknown&&t.push(r),i.delete()})),t):[]}getSolidVolume(e){const t=new this.occ.GProp_GProps;this.occ.BRepGProp_VolumeProperties(e.shape,t);const r=t.Mass();return t.delete(),r}getSolidSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}getSolidsVolumes(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidVolume({shape:e})))}getSolidCenterOfMass(e){const t=new this.occ.GProp_GProps;this.occ.BRepGProp_VolumeProperties(e.shape,t);const r=t.CentreOfMass(),i=[r.X(),r.Y(),r.Z()];return t.delete(),r.delete(),i}getSolidsCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidCenterOfMass({shape:e})))}getSolids(e){return this.shapeGettersService.getSolids(e)}}class gt{constructor(e,t,r,i,s,o){this.base=e,this.transformsService=t,this.converterService=r,this.entitiesService=i,this.edgesService=s,this.wiresService=o}evaluateExpression(e,t,r,i=!1){try{const s=e.replace(/val/g,t.toString()),o=s.replace(/[^0-9+\-*/.() ]/g,"");if(o!==s){const s=i?this.base.math.roundAndRemoveTrailingZeros({number:t,decimalPlaces:r}).toString():t.toFixed(r);return e.replace(/val/g,s)}const n=Function('"use strict"; return ('+o+")")();return i?this.base.math.roundAndRemoveTrailingZeros({number:n,decimalPlaces:r}).toString():n.toFixed(r)}catch(e){return i?this.base.math.roundAndRemoveTrailingZeros({number:t,decimalPlaces:r}).toString():t.toFixed(r)}}formatDimensionLabel(e,t,r,i,s=!1){let o;return o=t?this.evaluateExpression(t,e,r,s):s?this.base.math.roundAndRemoveTrailingZeros({number:e,decimalPlaces:r}).toString():e.toFixed(r),o+" "+i}createArrow(e){const t=this.base.vector.normalized({vector:e.direction}),r=e.flipped?t:this.base.vector.mul({vector:t,scalar:-1}),i=this.base.vector.cross({first:r,second:e.normal}),s=this.base.vector.normalized({vector:i}),o=e.angle/2*Math.PI/180,n=e.size*Math.cos(o),a=e.size*Math.sin(o),c=this.base.vector.mul({vector:r,scalar:n}),h=this.base.point.translatePoints({points:[e.tipPoint],translation:c})[0],l=this.base.vector.mul({vector:s,scalar:a}),d=this.base.vector.mul({vector:s,scalar:-a}),u=this.base.point.translatePoints({points:[h],translation:l})[0],p=this.base.point.translatePoints({points:[h],translation:d})[0],f=this.wiresService.createLineWireWithExtensions({start:e.tipPoint,end:u,extensionStart:0,extensionEnd:0}),v=this.wiresService.createLineWireWithExtensions({start:e.tipPoint,end:p,extensionStart:0,extensionEnd:0}),g=this.converterService.makeCompound({shapes:[f,v]});return[].forEach((e=>e.delete())),g}simpleLinearLengthDimension(e){const t=[],r=this.wiresService.createLineWireWithExtensions({start:e.start,end:e.end,extensionStart:e.crossingSize,extensionEnd:e.crossingSize});t.push(r);const i=this.transformsService.translate({shape:r,translation:e.direction}),s=this.base.point.translatePoints({points:[e.start,e.end],translation:e.direction}),o=s[0],n=s[1],a=this.wiresService.createLineWireWithExtensions({start:e.start,end:o,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),c=this.wiresService.createLineWireWithExtensions({start:e.end,end:n,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),h=this.wiresService.midPointOnWire({shape:i}),l=this.base.point.distance({startPoint:e.start,endPoint:e.end}),d=this.formatDimensionLabel(l,e.labelOverwrite,e.decimalPlaces,e.labelSuffix,e.removeTrailingZeros),u=new Be.TextWiresDto;u.text=d,u.xOffset=0,u.yOffset=0,u.height=e.labelSize,u.centerOnOrigin=!0;const p=this.wiresService.textWiresWithData(u),f=this.base.point.normalFromThreePoints({point1:e.start,point2:e.end,point3:h,reverseNormal:!0}),v=this.base.vector.sub({first:e.end,second:e.start});let g=this.transformsService.rotate({shape:p.compound,angle:-90+(e.labelRotation||0),axis:[0,1,0]});t.push(...p.shapes.map((e=>e.shape)));let m=g;e.labelFlipHorizontal&&(g=this.transformsService.scale3d({shape:g,scale:[-1,1,1],center:[0,0,0]}),t.push(m),m=g),e.labelFlipVertical&&(g=this.transformsService.scale3d({shape:g,scale:[1,1,-1],center:[0,0,0]}),t.push(m),m=g);const y=this.transformsService.alignNormAndAxis({shape:g,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:f,toAx:v});t.push(m);const S=this.base.vector.normalized({vector:e.direction}),w=this.base.vector.mul({vector:S,scalar:e.labelOffset}),b=this.base.vector.add({first:h,second:w}),E=this.transformsService.translate({shape:y,translation:b});t.push(y);const x=[i,a,c,E];if(e.endType===Be.dimensionEndTypeEnum.arrow){const t=this.createArrow({tipPoint:o,direction:v,normal:f,size:e.arrowSize,angle:e.arrowAngle,flipped:!e.arrowsFlipped});x.push(t);const r=this.base.vector.mul({vector:v,scalar:-1}),i=this.createArrow({tipPoint:n,direction:r,normal:f,size:e.arrowSize,angle:e.arrowAngle,flipped:!e.arrowsFlipped});x.push(i)}const T=this.converterService.makeCompound({shapes:x});return t.forEach((e=>{e.delete()})),T}simpleAngularDimension(e){const t=[],r=this.base.vector.normalized({vector:e.direction1}),i=this.base.vector.mul({vector:r,scalar:e.radius}),s=this.base.point.translatePoints({points:[i],translation:e.center})[0],o=this.wiresService.createLineWireWithExtensions({start:e.center,end:s,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),n=this.base.vector.normalized({vector:e.direction2}),a=this.base.vector.mul({vector:n,scalar:e.radius}),c=this.base.point.translatePoints({points:[a],translation:e.center})[0],h=this.wiresService.createLineWireWithExtensions({start:e.center,end:c,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),l=this.base.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!0}),d=this.base.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!1}),u=this.entitiesService.createCircle(e.radius,e.center,d,Be.typeSpecificityEnum.edge);t.push(u);const p=this.edgesService.arcFromCircleAndTwoPoints({circle:u,start:s,end:c,sense:!1});t.push(p);const f=this.wiresService.createWireFromEdge({shape:p}),v=this.wiresService.midPointOnWire({shape:f});let g=this.base.vector.angleBetween({first:e.direction1,second:e.direction2});e.radians&&(g=this.base.math.degToRad({number:g}));const m=this.formatDimensionLabel(g,e.labelOverwrite,e.decimalPlaces,e.labelSuffix,e.removeTrailingZeros),y=new Be.TextWiresDto;y.text=m,y.xOffset=0,y.yOffset=0,y.height=e.labelSize,y.centerOnOrigin=!0;const S=this.wiresService.textWiresWithData(y),w=this.base.vector.sub({first:v,second:e.center}),b=this.base.vector.normalized({vector:w});let E=this.transformsService.rotate({shape:S.compound,angle:e.labelRotation||0,axis:[0,1,0]});t.push(...S.shapes.map((e=>e.shape)));let x=E;e.labelFlipHorizontal&&(E=this.transformsService.scale3d({shape:E,scale:[-1,1,1],center:[0,0,0]}),t.push(x),x=E),e.labelFlipVertical&&(E=this.transformsService.scale3d({shape:E,scale:[1,1,-1],center:[0,0,0]}),t.push(x),x=E);const T=this.transformsService.alignNormAndAxis({shape:E,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:l,toAx:b});t.push(x);const P=this.base.vector.mul({vector:b,scalar:e.labelOffset}),C=this.base.vector.add({first:v,second:P}),k=this.transformsService.translate({shape:T,translation:C});t.push(T);const D=[o,h,f,k];if(e.endType===Be.dimensionEndTypeEnum.arrow){const t=this.edgesService.pointOnEdgeAtParam({shape:p,param:0}),r=this.edgesService.pointOnEdgeAtParam({shape:p,param:1}),i=this.edgesService.tangentOnEdgeAtParam({shape:p,param:0}),s=this.edgesService.tangentOnEdgeAtParam({shape:p,param:1}),o=this.createArrow({tipPoint:t,direction:i,normal:l,size:e.arrowSize,angle:e.arrowAngle,flipped:!e.arrowsFlipped});D.push(o);const n=this.base.vector.mul({vector:s,scalar:-1}),a=this.createArrow({tipPoint:r,direction:n,normal:l,size:e.arrowSize,angle:e.arrowAngle,flipped:!e.arrowsFlipped});D.push(a)}const O=this.converterService.makeCompound({shapes:D});return t.forEach((e=>{e.delete()})),O}pinWithLabel(e){const t=this.wiresService.createLineWireWithExtensions({start:e.startPoint,end:e.endPoint,extensionStart:-e.offsetFromStart,extensionEnd:0}),r=new Be.TextWiresDto;r.text=e.label,r.xOffset=0,r.yOffset=0,r.height=e.labelSize,r.centerOnOrigin=!0;const i=this.wiresService.textWiresWithData(r),s=i.data.width,o=this.base.vector.normalized({vector:e.direction}),n=this.base.vector.mul({vector:o,scalar:s/2+e.labelOffset}),a=this.base.point.translatePoints({points:[e.endPoint],translation:e.direction})[0],c=this.wiresService.createLineWireWithExtensions({start:e.endPoint,end:a,extensionStart:0,extensionEnd:0}),h=this.base.point.normalFromThreePoints({point1:e.startPoint,point2:e.endPoint,point3:a,reverseNormal:!1});let l=this.transformsService.rotate({shape:i.compound,angle:-90+(e.labelRotation||0),axis:[0,1,0]});const d=i.shapes.map((e=>e.shape));let u=l;e.labelFlipHorizontal&&(l=this.transformsService.scale3d({shape:l,scale:[-1,1,1],center:[0,0,0]}),d.push(u),u=l),e.labelFlipVertical&&(l=this.transformsService.scale3d({shape:l,scale:[1,1,-1],center:[0,0,0]}),d.push(u),u=l);const p=this.transformsService.alignNormAndAxis({shape:l,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:h,toAx:o});d.push(u);const f=this.base.vector.add({first:a,second:n}),v=this.transformsService.translate({shape:p,translation:f});d.push(p);const g=[t,v,c];if(e.endType===Be.dimensionEndTypeEnum.arrow){const t=this.base.vector.sub({first:e.endPoint,second:e.startPoint}),r=this.createArrow({tipPoint:e.startPoint,direction:t,normal:h,size:e.arrowSize,angle:e.arrowAngle,flipped:!e.arrowsFlipped});g.push(r)}const m=this.converterService.makeCompound({shapes:g});return d.forEach((e=>{e.delete()})),m}}class mt{constructor(e,t,r,i,s,o,n){this.occ=e,this.shapeGettersService=t,this.transformsService=r,this.edgesService=i,this.facesService=s,this.wiresService=o,this.base=n}shapeFacesToPolygonPoints(e){const t=this.shapeToMesh(e),r=[];return t.faceList.forEach((t=>{const i=t.vertex_coord,s=t.tri_indexes;for(let t=0;t<s.length;t+=3){const o=s[t],n=s[t+1],a=s[t+2];let c=[[i[3*o],i[3*o+1],i[3*o+2]],[i[3*n],i[3*n+1],i[3*n+2]],[i[3*a],i[3*a+1],i[3*a+2]]];e.reversedPoints&&(c=c.reverse()),r.push(c)}})),r}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){const t=[],r=[],i=[];let s=e.shape;if(s.IsNull())return{faceList:t,edgeList:r,pointsList:[]};if(this.occ.BRepTools_Clean_Force(s,!0),e.adjustYtoZ){const t=this.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90}),r=this.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]});t.delete(),s.delete(),s=r}const o=[],n=this.shapeGettersService.getFaces({shape:s});let a;n&&n.length&&(a=new this.occ.BRepMesh_IncrementalMesh(s,e.precision,!1,.5,!1),n.forEach(((e,r)=>{const i=this.occ.GetFaceLocation(e),s=this.occ.GetFaceTriangulation(e);if(s.IsNull())return console.error("Encountered Null Face!"),void i.delete();const n={vertex_coord:[],normal_coord:[],uvs:[],tri_indexes:[],vertex_coord_vec:[],number_of_triangles:0,center_point:void 0,center_normal:void 0,face_index:r};n.center_point=this.facesService.pointOnUV({shape:e,paramU:.5,paramV:.5}),n.center_normal=this.facesService.normalOnUV({shape:e,paramU:.5,paramV:.5});const a=new this.occ.Poly_Connect(s),c=i.Transformation();n.vertex_coord=new Array(3*s.NbNodes()),n.vertex_coord_vec=[];for(let e=0;e<s.NbNodes();e++){const t=s.Node(e+1).Transformed(c);if(s.HasUVNodes()){const t=s.UVNode(e+1);n.uvs[2*e+0]=t.X(),n.uvs[2*e+1]=t.Y(),t.delete()}n.vertex_coord[3*e+0]=t.X(),n.vertex_coord[3*e+1]=t.Y(),n.vertex_coord[3*e+2]=t.Z(),n.vertex_coord_vec.push([t.X(),t.Y(),t.Z()]),t.delete()}const h=new this.occ.TColgp_Array1OfDir(1,s.NbNodes());this.occ.StdPrs_ToolTriangulatedShape.Normal(e,a,h),n.normal_coord=new Array(3*h.Length());for(let e=0;e<h.Length();e++){const t=h.Value(e+1);n.normal_coord[3*e+0]=t.X(),n.normal_coord[3*e+1]=t.Y(),n.normal_coord[3*e+2]=t.Z()}const l=e.Orientation();n.tri_indexes=new Array(3*s.NbTriangles());let d=0;for(let e=1;e<=s.NbTriangles();e++){const t=s.Triangle(e);let r=t.Value(1),i=t.Value(2);const o=t.Value(3);if(l!==this.occ.TopAbs_Orientation.FORWARD){const e=r;r=i,i=e}n.tri_indexes[3*d+0]=r-1,n.tri_indexes[3*d+1]=i-1,n.tri_indexes[3*d+2]=o-1,d++,t.delete()}n.number_of_triangles=d,t.push(n),o.push(s),i.delete(),c.delete(),h.delete(),a.delete()})));for(let e=0;e<o.length;e++)o[e].delete();this.shapeGettersService.getEdges({shape:s}).forEach(((t,i)=>{const s={vertex_coord:[],middle_point:void 0,edge_index:-1};s.middle_point=this.edgesService.pointOnEdgeAtParam({shape:t,param:.5});const o=new this.occ.TopLoc_Location,n=new this.occ.BRepAdaptor_Curve(t),a=new this.occ.GCPnts_TangentialDeflection(n,e.precision,.1,2,1e-9,1e-7);s.vertex_coord=[];const c=a.NbPoints(),h=[];for(let e=0;e<c;e++){const t=a.Value(e+1);s.vertex_coord.push([t.X(),t.Y(),t.Z()]),h.push(t)}t.Orientation()===this.occ.TopAbs_Orientation.REVERSED&&s.vertex_coord.reverse(),s.edge_index=i,r.push(s),h.forEach((e=>e.delete())),o.delete(),n.delete(),a.delete(),this.occ.BRepTools_Clean_Force(t,!0)}));const c=this.shapeGettersService.getVertices({shape:s});return c.length>0&&c.forEach((e=>{const t=this.occ.BRep_Tool_Pnt(e);i.push([t.X(),t.Y(),t.Z()]),t.delete()})),a&&a.delete(),this.occ.BRepTools_Clean_Force(s,!0),{faceList:t,edgeList:r,pointsList:i}}meshMeshIntersectionWires(e){const t=e.shape1,r=e.shape2,i=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:r,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1}),o=this.base.mesh.meshMeshIntersectionPolylines({mesh1:i,mesh2:s}),n=[];return o.forEach((e=>{e.points&&e.points.length>0&&(e.isClosed?n.push(this.wiresService.createPolygonWire({points:e.points})):n.push(this.wiresService.createPolylineWire({points:e.points})))})),n}meshMeshIntersectionPoints(e){const t=e.shape1,r=e.shape2,i=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:r,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1});return this.base.mesh.meshMeshIntersectionPoints({mesh1:i,mesh2:s})}meshMeshIntersectionOfShapesWires(e){const t=[];return e.shapes.forEach(((r,i)=>{const s=e.shape,o=e.shapes[i];let n=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[i];t&&(n=t)}const a=this.meshMeshIntersectionWires({shape1:s,shape2:o,precision1:e.precision,precision2:n});t.push(...a)})),t}meshMeshIntersectionOfShapesPoints(e){const t=[];return e.shapes.forEach(((r,i)=>{const s=e.shape,o=e.shapes[i];let n=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[i];t&&(n=t)}const a=this.meshMeshIntersectionPoints({shape1:s,shape2:o,precision1:e.precision,precision2:n});t.push(...a)})),t}}class yt{constructor(){this.geometryHelper=new ke,this.math=new be,this.vector=new Pe(this.math,this.geometryHelper),this.transforms=new Ce(this.vector,this.math),this.lists=new Se,this.point=new Ee(this.geometryHelper,this.transforms,this.vector,this.lists),this.line=new De(this.vector,this.point,this.geometryHelper),this.polyline=new Oe(this.vector,this.point,this.line,this.geometryHelper),this.textService=new Te(this.point),this.mesh=new Ae(this.vector,this.polyline),this.io=new Le}}class St{constructor(e,t,r,i){this.base=e,this.shapeGettersService=t,this.edgesService=r,this.wiresService=i}shapeToDxfPaths(e){const t=this.shapeGettersService.getWires({shape:e.shape}),r=[];return t.forEach((t=>{const i=this.edgesService.getEdgesAlongWire({shape:t});if(0===i.length)return;const s=this.wiresService.isWireClosed({shape:t}),o=[];let n=0;for(;n<i.length;){const t=i[n];if(this.edgesService.isEdgeCircular({shape:t})){const e=this.edgesService.getEdgeBounds(t),r=e.uMax-e.uMin;if(Math.abs(r-2*Math.PI)<.01){const e=this.edgesService.getCircularEdgeCenterPoint({shape:t}),r=this.edgesService.getCircularEdgeRadius({shape:t});o.push({center:[e[0],e[2]],radius:r}),n++;continue}}const r=this.tryCreateUnifiedPolyline(i,n,e,s&&0===n);r?(o.push(r.polyline),n=r.nextIndex):n++}o.length>0&&r.push({segments:o})})),r}dxfPathsWithLayer(e){return{layer:e.layer,color:e.color,paths:e.paths}}dxfCreate(e){const t={dxfPathsParts:e.pathsParts,colorFormat:e.colorFormat,acadVersion:e.acadVersion};return this.base.io.dxf.dxfCreate(t)}tryCreateUnifiedPolyline(e,t,r,i){const s=[],o=[];let n=t;for(;n<e.length;){const t=e[n],i=this.edgesService.isEdgeLinear({shape:t}),a=this.edgesService.isEdgeCircular({shape:t});if(a){const e=this.edgesService.getEdgeBounds(t),r=e.uMax-e.uMin;if(Math.abs(r-2*Math.PI)<.01)break}const c=this.edgesService.startPointOnEdge({shape:t}),h=this.edgesService.endPointOnEdge({shape:t});if(i)s.push([c[0],c[2]]),o.push(0);else if(a){s.push([c[0],c[2]]);const e=.5,r=this.edgesService.pointOnEdgeAtParam({shape:t,param:e}),i=this.edgesService.getCircularEdgeCenterPoint({shape:t}),n=Math.atan2(c[2]-i[2],c[0]-i[0]),a=Math.atan2(r[2]-i[2],r[0]-i[0]);let l,d=Math.atan2(h[2]-i[2],h[0]-i[0])-n,u=a-n;d=Math.atan2(Math.sin(d),Math.cos(d)),u=Math.atan2(Math.sin(u),Math.cos(u)),l=Math.sign(d)===Math.sign(u)&&Math.abs(u)<Math.abs(d)+.1?d:d>0?d-2*Math.PI:d+2*Math.PI;const p=Math.tan(l/4);o.push(p)}else{const e=this.edgesService.edgeToPoints({shape:t,angularDeflection:r.angularDeflection,curvatureDeflection:r.curvatureDeflection,minimumOfPoints:r.minimumOfPoints,uTolerance:r.uTolerance,minimumLength:r.minimumLength});for(let t=0;t<e.length-1;t++)s.push([e[t][0],e[t][2]]),o.push(0)}n++}if(n>t&&!i){const t=e[n-1],r=this.edgesService.endPointOnEdge({shape:t});s.push([r[0],r[2]]),o.push(0)}return n<=t||s.length<2?null:{polyline:{points:s,closed:i,bulges:o},nextIndex:n}}tryCreatePolylineWithBulges(e,t,r){const i=e[t],s=this.edgesService.isEdgeLinear({shape:i}),o=this.edgesService.isEdgeCircular({shape:i});if(!s&&!o)return null;if(o){const e=this.edgesService.getEdgeBounds(i),t=e.uMax-e.uMin;if(Math.abs(t-2*Math.PI)<.01)return null}const n=[],a=[];let c=t;for(;c<e.length;){const t=e[c],r=this.edgesService.isEdgeLinear({shape:t}),i=this.edgesService.isEdgeCircular({shape:t});if(!r&&!i)break;if(i){const e=this.edgesService.getEdgeBounds(t),r=e.uMax-e.uMin;if(Math.abs(r-2*Math.PI)<.01)break}const s=this.edgesService.startPointOnEdge({shape:t});if(n.push([s[0],s[2]]),r)a.push(0);else{const e=this.edgesService.endPointOnEdge({shape:t}),r=this.edgesService.getCircularEdgeCenterPoint({shape:t}),i=Math.atan2(s[2]-r[2],s[0]-r[0]);let o=Math.atan2(e[2]-r[2],e[0]-r[0])-i;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;const n=Math.tan(o/4);a.push(n)}c++}if(c>t){const t=e[c-1],r=this.edgesService.endPointOnEdge({shape:t});n.push([r[0],r[2]]),a.push(0)}return c-t<2?null:{polyline:{points:n,closed:r,bulges:a},nextIndex:c}}}class wt{constructor(e,t,r){this.vecHelper=e,this.shapesHelperService=t,this.occ=r,this.base=new yt,this.occRefReturns=new Qe(r),this.iteratorService=new Je(r),this.enumService=new Ke(r),this.converterService=new et(r),this.entitiesService=new tt(r),this.shapeGettersService=new ot(r,this.enumService,this.iteratorService),this.geomService=new at(r,this.vecHelper,this.entitiesService),this.transformsService=new it(r,this.converterService,this.entitiesService,this.vecHelper),this.verticesService=new ut(r,this.entitiesService,this.converterService,this.shapeGettersService,this.wiresService,this.booleansService),this.edgesService=new nt(r,this.occRefReturns,this.shapeGettersService,this.entitiesService,this.iteratorService,this.converterService,this.enumService,this.geomService,this.transformsService,this.vecHelper),this.wiresService=new lt(r,this.occRefReturns,this.base,this.shapesHelperService,this.shapeGettersService,this.transformsService,this.enumService,this.entitiesService,this.converterService,this.geomService,this.edgesService,this.vecHelper,this.filletsService,this.operationsService),this.dimensionsService=new gt(this.base,this.transformsService,this.converterService,this.entitiesService,this.edgesService,this.wiresService),this.meshingService=new mt(r,this.shapeGettersService,this.transformsService,this.edgesService,this.facesService,this.wiresService,this.base),this.booleansService=new st(r,this.shapeGettersService),this.verticesService.wiresService=this.wiresService,this.verticesService.booleansService=this.booleansService,this.facesService=new dt(r,this.occRefReturns,this.entitiesService,this.enumService,this.shapeGettersService,this.converterService,this.booleansService,this.wiresService,this.transformsService,this.vecHelper,this.base,this.filletsService),this.meshingService.facesService=this.facesService,this.shellsService=new pt(r,this.shapeGettersService,this.converterService,this.facesService),this.solidsService=new vt(r,this.shapeGettersService,this.facesService,this.enumService,this.entitiesService,this.converterService,this.transformsService,this.vecHelper),this.operationsService=new rt(r,this.enumService,this.entitiesService,this.converterService,this.booleansService,this.shapeGettersService,this.edgesService,this.transformsService,this.vecHelper,this.wiresService,this.facesService,this.solidsService,this.shellsService),this.wiresService.operationsService=this.operationsService,this.filletsService=new ft(r,this.vecHelper,this.iteratorService,this.converterService,this.entitiesService,this.transformsService,this.shapeGettersService,this.edgesService,this.operationsService,this.facesService),this.wiresService.filletsService=this.filletsService,this.facesService.filletsService=this.filletsService,this.dxfService=new St(this.base,this.shapeGettersService,this.edgesService,this.wiresService)}surfaceFromFace(e){const t=e.shape;return this.occ.BRep_Tool_Surface(t).get()}}class bt{constructor(e,t){this.occ=e,this.och=t}union(e){return this.och.booleansService.union(e)}difference(e){return this.och.booleansService.difference(e)}intersection(e){const t=this.och.booleansService.intersection(e);return this.och.converterService.makeCompound({shapes:t})}meshMeshIntersectionWires(e){return this.och.meshingService.meshMeshIntersectionWires(e)}meshMeshIntersectionPoints(e){return this.och.meshingService.meshMeshIntersectionPoints(e)}meshMeshIntersectionOfShapesWires(e){return this.och.meshingService.meshMeshIntersectionOfShapesWires(e)}meshMeshIntersectionOfShapesPoints(e){return this.och.meshingService.meshMeshIntersectionOfShapesPoints(e)}}class Et{constructor(e,t){this.occ=e,this.och=t}closestPointsBetweenTwoShapes(e){return this.och.operationsService.closestPointsBetweenTwoShapes(e.shape1,e.shape2)}closestPointsOnShapeFromPoints(e){return this.och.operationsService.closestPointsOnShapeFromPoints(e)}closestPointsOnShapesFromPoints(e){return this.och.operationsService.closestPointsOnShapesFromPoints(e)}distancesToShapeFromPoints(e){return this.och.operationsService.distancesToShapeFromPoints(e)}boundingBoxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e)}boundingBoxMinOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).min}boundingBoxMaxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).max}boundingBoxCenterOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).center}boundingBoxSizeOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).size}boundingBoxShapeOfShape(e){return this.och.operationsService.boundingBoxShapeOfShape(e)}boundingSphereOfShape(e){return this.och.operationsService.boundingSphereOfShape(e)}boundingSphereCenterOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).center}boundingSphereRadiusOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).radius}boundingSphereShapeOfShape(e){return this.och.operationsService.boundingSphereShapeOfShape(e)}loft(e){return this.och.operationsService.loft(e)}loftAdvanced(e){return this.och.operationsService.loftAdvanced(e)}offset(e){return this.och.operationsService.offset(e)}offsetAdv(e){return this.och.operationsService.offsetAdv(e)}offset3DWire(e){return this.och.operationsService.offset3DWire(e)}extrudeShapes(e){return this.och.operationsService.extrudeShapes(e)}extrude(e){return this.och.operationsService.extrude(e)}splitShapeWithShapes(e){return this.och.operationsService.splitShapeWithShapes(e)}revolve(e){return this.och.operationsService.revolve(e)}rotatedExtrude(e){return this.och.operationsService.rotatedExtrude(e)}pipe(e){return this.och.operationsService.pipe(e)}pipePolylineWireNGon(e){return this.och.operationsService.pipePolylineWireNGon(e)}pipeWireCylindrical(e){return this.och.operationsService.pipeWireCylindrical(e)}pipeWiresCylindrical(e){return this.och.operationsService.pipeWiresCylindrical(e)}makeThickSolidSimple(e){return this.och.operationsService.makeThickSolidSimple(e)}makeThickSolidByJoin(e){return this.och.operationsService.makeThickSolidByJoin(e)}slice(e){return this.och.operationsService.slice(e)}sliceInStepPattern(e){return this.och.operationsService.sliceInStepPattern(e)}}class xt{constructor(e,t){this.occ=e,this.och=t}transform(e){const t=this.scale({shape:e.shape,factor:e.scaleFactor}),r=this.rotate({shape:t,axis:e.rotationAxis,angle:e.rotationAngle}),i=this.translate({shape:r,translation:e.translation});return t.delete(),r.delete(),i}rotate(e){return this.och.transformsService.rotate(e)}rotateAroundCenter(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),r=e.angle,i=this.rotate({shape:t,axis:e.axis,angle:r}),s=this.translate({shape:i,translation:e.center});return i.delete(),t.delete(),s}align(e){return this.och.transformsService.align(e)}alignNormAndAxis(e){return this.och.transformsService.alignNormAndAxis(e)}alignAndTranslate(e){return this.och.transformsService.alignAndTranslate(e)}translate(e){return this.och.transformsService.translate(e)}scale(e){const t=new this.occ.gp_Trsf,r=this.och.entitiesService.gpPnt([0,0,0]);t.SetScale(r,e.factor);const i=new this.occ.BRepBuilderAPI_Transform(e.shape,t,!0),s=i.Shape(),o=this.och.converterService.getActualTypeOfShape(s);return r.delete(),t.delete(),i.delete(),s.delete(),o}scale3d(e){return this.och.transformsService.scale3d(e)}mirror(e){return this.och.transformsService.mirror(e)}mirrorAlongNormal(e){return this.och.transformsService.mirrorAlongNormal(e)}transformShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations,e.rotationAxes,e.rotationAngles,e.scaleFactors]),e.shapes.map(((t,r)=>this.transform({shape:t,translation:e.translations[r],rotationAxis:e.rotationAxes[r],rotationAngle:e.rotationAngles[r],scaleFactor:e.scaleFactors[r]})))}rotateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,r)=>this.rotate({shape:t,axis:e.axes[r],angle:e.angles[r]})))}rotateAroundCenterShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,r)=>this.rotateAroundCenter({shape:t,axis:e.axes[r],angle:e.angles[r],center:e.centers[r]})))}alignShapes(e){return this.checkIfListsEqualLength([e.shapes,e.fromOrigins,e.fromDirections,e.toOrigins,e.toDirections]),e.shapes.map(((t,r)=>this.align({shape:t,fromOrigin:e.fromOrigins[r],fromDirection:e.fromDirections[r],toOrigin:e.toOrigins[r],toDirection:e.toDirections[r]})))}alignAndTranslateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.centers,e.directions]),e.shapes.map(((t,r)=>this.alignAndTranslate({shape:t,center:e.centers[r],direction:e.directions[r]})))}translateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations]),e.shapes.map(((t,r)=>this.translate({shape:t,translation:e.translations[r]})))}scaleShapes(e){return this.checkIfListsEqualLength([e.shapes,e.factors]),e.shapes.map(((t,r)=>this.scale({shape:t,factor:e.factors[r]})))}scale3dShapes(e){return this.checkIfListsEqualLength([e.shapes,e.scales,e.centers]),e.shapes.map(((t,r)=>this.scale3d({shape:t,scale:e.scales[r],center:e.centers[r]})))}mirrorShapes(e){return this.checkIfListsEqualLength([e.shapes,e.directions,e.origins]),e.shapes.map(((t,r)=>this.mirror({shape:t,origin:e.origins[r],direction:e.directions[r]})))}mirrorAlongNormalShapes(e){return this.checkIfListsEqualLength([e.shapes,e.normals,e.origins]),e.shapes.map(((t,r)=>this.mirrorAlongNormal({shape:t,normal:e.normals[r],origin:e.origins[r]})))}checkIfListsEqualLength(e){const t=e[0].length;if(e.some((e=>e.length!==t)))throw new Error("Some of the list lengths are not the same. For this operation to work all lists need to be of equal length")}}class Tt{constructor(e,t){this.occ=e,this.och=t}filletEdges(e){return this.och.filletsService.filletEdges(e)}filletEdgesList(e){return this.och.filletsService.filletEdgesList(e)}filletEdgesListOneRadius(e){return this.och.filletsService.filletEdgesListOneRadius(e)}filletEdgeVariableRadius(e){return this.och.filletsService.filletEdgeVariableRadius(e)}filletEdgesVariableRadius(e){return this.och.filletsService.filletEdgesVariableRadius(e)}filletEdgesSameVariableRadius(e){return this.och.filletsService.filletEdgesSameVariableRadius(e)}chamferEdges(e){return this.och.filletsService.chamferEdges(e)}chamferEdgesList(e){return this.och.filletsService.chamferEdgesList(e)}chamferEdgeDistAngle(e){return this.och.filletsService.chamferEdgeDistAngle(e)}chamferEdgesDistAngle(e){return this.och.filletsService.chamferEdgesDistAngle(e)}chamferEdgesDistsAngles(e){return this.och.filletsService.chamferEdgesDistsAngles(e)}chamferEdgeTwoDistances(e){return this.och.filletsService.chamferEdgeTwoDistances(e)}chamferEdgesTwoDistances(e){return this.och.filletsService.chamferEdgesTwoDistances(e)}chamferEdgesTwoDistancesLists(e){return this.och.filletsService.chamferEdgesTwoDistancesLists(e)}filletTwoEdgesInPlaneIntoAWire(e){const t=this.och.entitiesService.gpPln(e.planeOrigin,e.planeDirection),r=new this.occ.ChFi2d_FilletAlgo(e.edge1,e.edge2,t);r.Perform(e.radius);const i=this.och.entitiesService.gpPnt(e.planeOrigin),s=new this.occ.TopoDS_Edge,o=new this.occ.TopoDS_Edge;let n=-1;void 0!==e.solution&&(n=e.solution);const a=r.Result(i,s,o,n),c=this.och.converterService.combineEdgesAndWiresIntoAWire({shapes:[s,a,o]});return r.delete(),i.delete(),t.delete(),s.delete(),o.delete(),a.delete(),c}fillet3DWires(e){return e.shapes.map((t=>this.och.filletsService.fillet3DWire({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:e.direction})))}fillet3DWire(e){return this.och.filletsService.fillet3DWire(e)}fillet2d(e){return this.och.filletsService.fillet2d(e)}fillet2dShapes(e){return e.shapes.map((t=>this.och.filletsService.fillet2d({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes})))}}class Pt{constructor(e,t){this.occ=e,this.och=t}simpleLinearLengthDimension(e){return this.och.dimensionsService.simpleLinearLengthDimension(e)}simpleAngularDimension(e){return this.och.dimensionsService.simpleAngularDimension(e)}pinWithLabel(e){return this.och.dimensionsService.pinWithLabel(e)}}class Ct{constructor(e,t){this.occ=e,this.och=t}createPart(e){return{id:e.id,shape:e.shape,name:e.name,colorRgba:e.colorRgba}}createAssemblyNode(e){return{id:e.id,type:"assembly",name:e.name,parentId:e.parentId,colorRgba:e.colorRgba}}createInstanceNode(e){return{id:e.id,type:"instance",name:e.name,parentId:e.parentId,partId:e.partId,translation:e.translation,rotation:e.rotation,scale:e.scale,colorRgba:e.colorRgba}}createPartUpdate(e){return{label:e.label,shape:e.shape,name:e.name,colorRgba:e.colorRgba}}combineStructure(e){var t,r;return{parts:null!==(t=e.parts)&&void 0!==t?t:[],nodes:null!==(r=e.nodes)&&void 0!==r?r:[],removals:e.removals,partUpdates:e.partUpdates,clearDocument:e.clearDocument}}buildAssemblyDocument(e){const{structure:t,existingDocument:r}=e,i=[],s=[];for(const e of t.parts)s.push({id:e.id,shapeIndex:i.length,name:e.name,colorRgba:e.colorRgba}),i.push(e.shape);const o=[];if(t.partUpdates)for(const e of t.partUpdates){const t={label:e.label};e.shape&&(t.shapeIndex=i.length,i.push(e.shape)),void 0!==e.name&&(t.name=e.name),void 0!==e.colorRgba&&(t.colorRgba=e.colorRgba),o.push(t)}const n=JSON.stringify({parts:s,nodes:t.nodes,removals:t.removals,partUpdates:o.length>0?o:void 0,clearDocument:t.clearDocument}),a=this.occ.BuildAssemblyDocument(n,i,r);if(a.IsNull())throw new Error("Failed to create assembly document");return a}loadStepToDoc(e){const t=this.occ.LoadStepToDoc(e.stepData);if(t.IsNull())throw new Error("Failed to load STEP file");return t}setLabelColor(e){return this.occ.SetDocLabelColor(e.document,e.label,e.r,e.g,e.b,e.a)}setLabelName(e){return this.occ.SetDocLabelName(e.document,e.label,e.name)}exportDocumentToStep(e){const t=e.compress?this.occ.ExportDocumentToStepZ(e.document,e.fileName,e.author,e.organization):this.occ.ExportDocumentToStep(e.document,e.fileName,e.author,e.organization);if(!t)throw new Error("Failed to export document to STEP");return t}exportDocumentToGltf(e){const t=this.occ.ExportDocumentToGltf(e.document,e.meshDeflection,e.meshAngle,e.mergeFaces,e.forceUVExport);if(!t)throw new Error("Failed to export document to glTF");return t}}class kt{constructor(e,t){this.occ=e,this.och=t}getDocumentParts(e){const t=this.occ.GetDocumentPartsFromDoc(e.document);return JSON.parse(t)}getShapeFromLabel(e){return this.occ.GetShapeFromDocLabel(e.document,e.label)}getLabelColor(e){const t=this.occ.GetDocLabelColor(e.document,e.label);return JSON.parse(t)}getLabelTransform(e){const t=this.occ.GetDocLabelTransform(e.document,e.label);return JSON.parse(t)}getLabelInfo(e){const t=this.occ.GetDocLabelInfo(e.document,e.label);return JSON.parse(t)}getAssemblyHierarchy(e){const t=this.occ.GetDocAssemblyHierarchy(e.document);return JSON.parse(t)}}class Dt{constructor(e,t){this.manager=new Ct(e,t),this.query=new kt(e,t)}}class Ot{constructor(e,t){this.occ=e,this.och=t}fixEdgeOrientationsAlongWire(e){return this.och.edgesService.fixEdgeOrientationsAlongWire(e)}basicShapeRepair(e){const t=new this.occ.ShapeFix_Shape;t.Init(e.shape),t.SetPrecision(e.precision),t.SetMaxTolerance(e.maxTolerance),t.SetMinTolerance(e.minTolerance),t.Perform();const r=t.Shape();return t.delete(),r}fixSmallEdgeOnWire(e){const t=new this.occ.ShapeFix_Wire;return t.Load(e.shape),t.FixSmall(e.lockvtx,e.precsmall),t.Perform(),t.Wire()}}class At{constructor(e,t){this.occ=e,this.och=t,this.shapes=new Xe(e,t),this.geom=new Ne(e,t),this.transforms=new xt(e,t),this.operations=new Et(e,t),this.booleans=new bt(e,t),this.fillets=new Tt(e,t),this.shapeFix=new Ot(e,t),this.dimensions=new Pt(e,t),this.assembly=new Dt(e,t),this.io=new Ze(e,t)}shapeFacesToPolygonPoints(e){return this.och.meshingService.shapeFacesToPolygonPoints(e)}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){return this.och.meshingService.shapeToMesh(e)}}class Ft{static parse(e,t,r){const i=[e];let s=0;for(;i.length>0;){const e=i.pop();if("object"==typeof e&&null!==e)if(Array.isArray(e))for(let t=0;t<e.length;t++)i.push(e[t]);else{if(Object.keys(e).includes("shapes")){const i=e.shapes;if("object"==typeof i&&null!==i)for(const o in i){const n=i[o];if(n){if("string"!=typeof i[o]){let a;a=e.id?`${r}-${e.id}-${o}-${s}`:`${r}-${o}-${s}`,t.push({id:a,shape:n}),i[o]=a}s++}}}for(const t in e)i.push(e[t])}}return e}static alignAndTranslateShapesWithChildren(e,t,r,i,s,o=[1,1,1]){const n=Ft.deepCopy(e);return n.rotation=r,n.direction=i,n.center=s,n.scale=o,n.shapes&&Object.keys(n.shapes).forEach((e=>{const a=n.shapes[e];if(a){const c=t.rotate({shape:a,angle:r,axis:[0,1,0]}),h=t.alignAndTranslate({shape:c,direction:i,center:s});1!==o[0]||1!==o[1]||1!==o[2]?(n.shapes[e]=t.scale3d({shape:h,scale:o,center:s}),h.delete()):n.shapes[e]=h,c.delete()}})),Object.keys(n).forEach((e=>{const a=n[e];a&&Array.isArray(a)?n[e]=a.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.alignAndTranslateShapesWithChildren(e,t,r,i,s,o):e)):a&&"object"==typeof a&&null!==a&&a.shapes&&(n[e]=this.alignAndTranslateShapesWithChildren(a,t,r,i,s,o))})),n}static deleteAllShapes(e){Object.keys(e.shapes).forEach((t=>{e.shapes[t].delete()})),Object.keys(e).forEach((t=>{const r=e[t];r&&Array.isArray(r)?r.forEach((e=>{e&&"object"==typeof e&&null!==e&&e.shapes&&this.deleteAllShapes(e)})):r&&"object"==typeof r&&null!==r&&r.shapes&&this.deleteAllShapes(r)}))}static deepCopy(e){const t=Object.assign(Object.assign({},e),{shapes:Object.assign({},e.shapes)});return Object.keys(e).forEach((r=>{const i=e[r];i&&"object"==typeof i&&null!==i?i.shapes&&(t[r]=this.deepCopy(i)):i&&Array.isArray(i)&&(t[r]=i.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.deepCopy(e):e)))})),t}}const Rt=async function(e={}){var t=e,r=!!globalThis.window,i=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&"renderer"!=globalThis.process?.type;if(o){const{createRequire:e}=await Promise.resolve().then(s.t.bind(s,922,23));var n=e("file:///Users/matasubarevicius/Documents/MyProjects/bitbybit-ui/projects/bitbybit-runners/browser-babylon/node_modules/@bitbybit-dev/occt/bitbybit-dev-occt/bitbybit-dev-occt.js")}var a,c,h="./this.program",l=(e,t)=>{throw t},d="file:///Users/matasubarevicius/Documents/MyProjects/bitbybit-ui/projects/bitbybit-runners/browser-babylon/node_modules/@bitbybit-dev/occt/bitbybit-dev-occt/bitbybit-dev-occt.js",u="";if(o){var p=n("fs");d.startsWith("file:")&&(u=n("path").dirname(n("url").fileURLToPath(d))+"/"),c=e=>(e=R(e)?new URL(e):e,p.readFileSync(e)),a=async(e,t=!0)=>(e=R(e)?new URL(e):e,p.readFileSync(e,t?void 0:"utf8")),process.argv.length>1&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t}}else if(r||i){try{u=new URL(".",d).href}catch{}i&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a=async e=>{if(R(e))return new Promise(((t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):r(i.status)},i.onerror=r,i.send(null)}));var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O=console.log.bind(console),A=console.error.bind(console),F=!1,R=e=>e.startsWith("file://"),L=!1;function M(){var e=Tt.buffer;y=new Int8Array(e),w=new Int16Array(e),S=new Uint8Array(e),b=new Uint16Array(e),E=new Int32Array(e),x=new Uint32Array(e),T=new Float32Array(e),P=new Float64Array(e),C=new BigInt64Array(e),k=new BigUint64Array(e)}function B(e){t.onAbort?.(e),A(e="Aborted("+e+")"),F=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m?.(r),r}async function I(e,t,r){if(!e&&!R(t)&&!o)try{var i=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,r)}catch(e){A(`wasm streaming compile failed: ${e}`),A("falling back to ArrayBuffer instantiation")}return async function(e,t){try{var r=await async function(e){if(!f)try{var t=await a(e);return new Uint8Array(t)}catch{}return function(e){if(e==D&&f)return new Uint8Array(f);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}(e)}(e);return await WebAssembly.instantiate(r,t)}catch(e){A(`failed to asynchronously prepare wasm: ${e}`),B(e)}}(t,r)}class U{name="ExitStatus";constructor(e){this.message=`Program terminated with exit(${e})`,this.status=e}}var W=e=>{for(;e.length>0;)e.shift()(t)},_=[],N=[],H=!0,G=e=>yt(e),V=()=>St(),z=e=>Pt.get(e),j=[],$=0,q=0;class Y{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){x[this.ptr+4>>2]=e}get_type(){return x[this.ptr+4>>2]}set_destructor(e){x[this.ptr+8>>2]=e}get_destructor(){return x[this.ptr+8>>2]}set_caught(e){e=e?1:0,y[this.ptr+12]=e}get_caught(){return 0!=y[this.ptr+12]}set_rethrown(e){e=e?1:0,y[this.ptr+13]=e}get_rethrown(){return 0!=y[this.ptr+13]}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){x[this.ptr+16>>2]=e}get_adjusted_ptr(){return x[this.ptr+16>>2]}}var X=e=>mt(e),Z=e=>{var t=q;if(!t)return X(0),0;var r=new Y(t);r.set_adjusted_ptr(t);var i=r.get_type();if(!i)return X(0),t;for(var s of e){if(0===s||s===i)break;var o=r.ptr+16;if(Et(s,i,o))return X(s),t}return X(i),t},Q={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,i=e.length-1;i>=0;i--){var s=e[i];"."===s?e.splice(i,1):".."===s?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=Q.isAbs(e),r="/"===e.slice(-1);return(e=Q.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Q.splitPath(e),r=t[0],i=t[1];return r||i?(i&&(i=i.slice(0,-1)),r+i):"."},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>Q.normalize(e.join("/")),join2:(e,t)=>Q.normalize(e+"/"+t)},J=e=>{(J=(()=>{if(o){var e=n("crypto");return t=>e.randomFillSync(t)}return e=>crypto.getRandomValues(e)})())(e)},K={resolve:(...e)=>{for(var t="",r=!1,i=e.length-1;i>=-1&&!r;i--){var s=i>=0?e[i]:ye.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,r=Q.isAbs(s)}return(r?"/":"")+(t=Q.normalizeArray(t.split("/").filter((e=>!!e)),!r).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=K.resolve(e).slice(1),t=K.resolve(t).slice(1);for(var i=r(e.split("/")),s=r(t.split("/")),o=Math.min(i.length,s.length),n=o,a=0;a<o;a++)if(i[a]!==s[a]){n=a;break}var c=[];for(a=n;a<i.length;a++)c.push("..");return(c=c.concat(s.slice(n))).join("/")}},ee=new TextDecoder,te=(e,t,r,i)=>{var s=t+r;if(i)return s;for(;e[t]&&!(t>=s);)++t;return t},re=(e,t=0,r,i)=>{var s=te(e,t,r,i);return ee.decode(e.buffer?e.subarray(t,s):new Uint8Array(e.slice(t,s)))},ie=[],se=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t},oe=(e,t,r,i)=>{if(!(i>0))return 0;for(var s=r,o=r+i-1,n=0;n<e.length;++n){var a=e.codePointAt(n);if(a<=127){if(r>=o)break;t[r++]=a}else if(a<=2047){if(r+1>=o)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=o)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a,n++}}return t[r]=0,r-s},ne=(e,t,r)=>{var i=r>0?r:se(e)+1,s=new Array(i),o=oe(e,s,0,s.length);return t&&(s.length=o),s},ae={ttys:[],init(){},shutdown(){},register(e,t){ae.ttys[e]={input:[],output:[],ops:t},ye.registerDevice(e,ae.stream_ops)},stream_ops:{open(e){var t=ae.ttys[e.node.rdev];if(!t)throw new ye.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,r,i,s){if(!e.tty||!e.tty.ops.get_char)throw new ye.ErrnoError(60);for(var o=0,n=0;n<i;n++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new ye.ErrnoError(29)}if(void 0===a&&0===o)throw new ye.ErrnoError(6);if(null==a)break;o++,t[r+n]=a}return o&&(e.node.atime=Date.now()),o},write(e,t,r,i,s){if(!e.tty||!e.tty.ops.put_char)throw new ye.ErrnoError(60);try{for(var o=0;o<i;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new ye.ErrnoError(29)}return i&&(e.node.mtime=e.node.ctime=Date.now()),o}},default_tty_ops:{get_char:e=>(()=>{if(!ie.length){var e=null;if(o){var t=Buffer.alloc(256),r=0,i=process.stdin.fd;try{r=p.readSync(i,t,0,256)}catch(e){if(!e.toString().includes("EOF"))throw e;r=0}r>0&&(e=t.slice(0,r).toString("utf-8"))}else globalThis.window?.prompt&&null!==(e=window.prompt("Input: "))&&(e+="\n");if(!e)return null;ie=ne(e,!0)}return ie.shift()})(),put_char(e,t){null===t||10===t?(O(re(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output?.length>0&&(O(re(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,r)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(A(re(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output?.length>0&&(A(re(e.output)),e.output=[])}}},ce=e=>{B()},he={ops_table:null,mount:e=>he.createNode(null,"/",16895,0),createNode(e,t,r,i){if(ye.isBlkdev(r)||ye.isFIFO(r))throw new ye.ErrnoError(63);he.ops_table||={dir:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr,lookup:he.node_ops.lookup,mknod:he.node_ops.mknod,rename:he.node_ops.rename,unlink:he.node_ops.unlink,rmdir:he.node_ops.rmdir,readdir:he.node_ops.readdir,symlink:he.node_ops.symlink},stream:{llseek:he.stream_ops.llseek}},file:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr},stream:{llseek:he.stream_ops.llseek,read:he.stream_ops.read,write:he.stream_ops.write,mmap:he.stream_ops.mmap,msync:he.stream_ops.msync}},link:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr,readlink:he.node_ops.readlink},stream:{}},chrdev:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr},stream:ye.chrdev_stream_ops}};var s=ye.createNode(e,t,r,i);return ye.isDir(s.mode)?(s.node_ops=he.ops_table.dir.node,s.stream_ops=he.ops_table.dir.stream,s.contents={}):ye.isFile(s.mode)?(s.node_ops=he.ops_table.file.node,s.stream_ops=he.ops_table.file.stream,s.usedBytes=0,s.contents=null):ye.isLink(s.mode)?(s.node_ops=he.ops_table.link.node,s.stream_ops=he.ops_table.link.stream):ye.isChrdev(s.mode)&&(s.node_ops=he.ops_table.chrdev.node,s.stream_ops=he.ops_table.chrdev.stream),s.atime=s.mtime=s.ctime=Date.now(),e&&(e.contents[t]=s,e.atime=e.mtime=e.ctime=s.atime),s},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=ye.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ye.isDir(e.mode)?t.size=4096:ye.isFile(e.mode)?t.size=e.usedBytes:ye.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const r of["mode","atime","mtime","ctime"])null!=t[r]&&(e[r]=t[r]);void 0!==t.size&&he.resizeFileStorage(e,t.size)},lookup(e,t){throw he.doesNotExistError||(he.doesNotExistError=new ye.ErrnoError(44),he.doesNotExistError.stack="<generic error, no stack>"),he.doesNotExistError},mknod:(e,t,r,i)=>he.createNode(e,t,r,i),rename(e,t,r){var i;try{i=ye.lookupNode(t,r)}catch(e){}if(i){if(ye.isDir(e.mode))for(var s in i.contents)throw new ye.ErrnoError(55);ye.hashRemoveNode(i)}delete e.parent.contents[e.name],t.contents[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=ye.lookupNode(e,t);for(var i in r.contents)throw new ye.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir:e=>[".","..",...Object.keys(e.contents)],symlink(e,t,r){var i=he.createNode(e,t,41471,0);return i.link=r,i},readlink(e){if(!ye.isLink(e.mode))throw new ye.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,i,s){var o=e.node.contents;if(s>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-s,i);if(n>8&&o.subarray)t.set(o.subarray(s,s+n),r);else for(var a=0;a<n;a++)t[r+a]=o[s+a];return n},write(e,t,r,i,s,o){if(t.buffer===y.buffer&&(o=!1),!i)return 0;var n=e.node;if(n.mtime=n.ctime=Date.now(),t.subarray&&(!n.contents||n.contents.subarray)){if(o)return n.contents=t.subarray(r,r+i),n.usedBytes=i,i;if(0===n.usedBytes&&0===s)return n.contents=t.slice(r,r+i),n.usedBytes=i,i;if(s+i<=n.usedBytes)return n.contents.set(t.subarray(r,r+i),s),i}if(he.expandFileStorage(n,s+i),n.contents.subarray&&t.subarray)n.contents.set(t.subarray(r,r+i),s);else for(var a=0;a<i;a++)n.contents[s+a]=t[r+a];return n.usedBytes=Math.max(n.usedBytes,s+i),i},llseek(e,t,r){var i=t;if(1===r?i+=e.position:2===r&&ye.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new ye.ErrnoError(28);return i},mmap(e,t,r,i,s){if(!ye.isFile(e.node.mode))throw new ye.ErrnoError(43);var o,n,a=e.node.contents;if(2&s||!a||a.buffer!==y.buffer){if(n=!0,!(o=ce()))throw new ye.ErrnoError(48);a&&((r>0||r+t<a.length)&&(a=a.subarray?a.subarray(r,r+t):Array.prototype.slice.call(a,r,r+t)),y.set(a,o))}else n=!1,o=a.byteOffset;return{ptr:o,allocated:n}},msync:(e,t,r,i,s)=>(he.stream_ops.write(e,t,0,i,r,!1),0)}},le=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},de=(...e)=>ye.createDataFile(...e),ue=0,pe=null,fe=e=>{if(ue--,t.monitorRunDependencies?.(ue),0==ue&&pe){var r=pe;pe=null,r()}},ve=e=>{ue++,t.monitorRunDependencies?.(ue)},ge=[],me=async(e,t,r,i,s,o,n,c)=>{var h=t?K.resolve(Q.join2(e,t)):e;ve();try{var l=r;"string"==typeof r&&(l=await(async e=>{var t=await a(e);return new Uint8Array(t)})(r)),l=await(async(e,t)=>{for(var r of("undefined"!=typeof Browser&&Browser.init(),ge))if(r.canHandle(t))return r.handle(e,t);return e})(l,h),c?.(),o||de(e,t,l,i,s,n)}finally{fe()}},ye={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return 1!=(2097155&this.flags)}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.id=ye.nextInode++,this.name=t,this.mode=r,this.rdev=i,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return ye.isDir(this.mode)}get isDevice(){return ye.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new ye.ErrnoError(44);t.follow_mount??=!0,Q.isAbs(e)||(e=ye.cwd()+"/"+e);e:for(var r=0;r<40;r++){for(var i=e.split("/").filter((e=>!!e)),s=ye.root,o="/",n=0;n<i.length;n++){var a=n===i.length-1;if(a&&t.parent)break;if("."!==i[n])if(".."!==i[n]){o=Q.join2(o,i[n]);try{s=ye.lookupNode(s,i[n])}catch(e){if(44===e?.errno&&a&&t.noent_okay)return{path:o};throw e}if(!ye.isMountpoint(s)||a&&!t.follow_mount||(s=s.mounted.root),ye.isLink(s.mode)&&(!a||t.follow)){if(!s.node_ops.readlink)throw new ye.ErrnoError(52);var c=s.node_ops.readlink(s);Q.isAbs(c)||(c=Q.dirname(o)+"/"+c),e=c+"/"+i.slice(n+1).join("/");continue e}}else{if(o=Q.dirname(o),ye.isRoot(s)){e=o+"/"+i.slice(n+1).join("/"),r--;continue e}s=s.parent}}return{path:o,node:s}}throw new ye.ErrnoError(32)},getPath(e){for(var t;;){if(ye.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%ye.nameTable.length},hashAddNode(e){var t=ye.hashName(e.parent.id,e.name);e.name_next=ye.nameTable[t],ye.nameTable[t]=e},hashRemoveNode(e){var t=ye.hashName(e.parent.id,e.name);if(ye.nameTable[t]===e)ye.nameTable[t]=e.name_next;else for(var r=ye.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode(e,t){var r=ye.mayLookup(e);if(r)throw new ye.ErrnoError(r);for(var i=ye.hashName(e.id,t),s=ye.nameTable[i];s;s=s.name_next){var o=s.name;if(s.parent.id===e.id&&o===t)return s}return ye.lookup(e,t)},createNode(e,t,r,i){var s=new ye.FSNode(e,t,r,i);return ye.hashAddNode(s),s},destroyNode(e){ye.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>ye.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>ye.isDir(e.mode)?ye.nodePermissions(e,"x")||(e.node_ops.lookup?0:2):54,mayCreate(e,t){if(!ye.isDir(e.mode))return 54;try{return ye.lookupNode(e,t),20}catch(e){}return ye.nodePermissions(e,"wx")},mayDelete(e,t,r){var i;try{i=ye.lookupNode(e,t)}catch(e){return e.errno}var s=ye.nodePermissions(e,"wx");if(s)return s;if(r){if(!ye.isDir(i.mode))return 54;if(ye.isRoot(i)||ye.getPath(i)===ye.cwd())return 10}else if(ye.isDir(i.mode))return 31;return 0},mayOpen:(e,t)=>e?ye.isLink(e.mode)?32:ye.isDir(e.mode)&&("r"!==ye.flagsToPermissionString(t)||576&t)?31:ye.nodePermissions(e,ye.flagsToPermissionString(t)):44,checkOpExists(e,t){if(!e)throw new ye.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=ye.MAX_OPEN_FDS;e++)if(!ye.streams[e])return e;throw new ye.ErrnoError(33)},getStreamChecked(e){var t=ye.getStream(e);if(!t)throw new ye.ErrnoError(8);return t},getStream:e=>ye.streams[e],createStream:(e,t=-1)=>(e=Object.assign(new ye.FSStream,e),-1==t&&(t=ye.nextfd()),e.fd=t,ye.streams[t]=e,e),closeStream(e){ye.streams[e]=null},dupStream(e,t=-1){var r=ye.createStream(e,t);return r.stream_ops?.dup?.(r),r},doSetAttr(e,t,r){var i=e?.stream_ops.setattr,s=i?e:t;i??=t.node_ops.setattr,ye.checkOpExists(i,63),i(s,r)},chrdev_stream_ops:{open(e){var t=ye.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new ye.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){ye.devices[e]={stream_ops:t}},getDevice:e=>ye.devices[e],getMounts(e){for(var t=[],r=[e];r.length;){var i=r.pop();t.push(i),r.push(...i.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),ye.syncFSRequests++,ye.syncFSRequests>1&&A(`warning: ${ye.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=ye.getMounts(ye.root.mount),i=0;function s(e){return ye.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,s(e));++i>=r.length&&s(null)}for(var n of r)n.type.syncfs?n.type.syncfs(n,e,o):o(null)},mount(e,t,r){var i,s="/"===r,o=!r;if(s&&ye.root)throw new ye.ErrnoError(10);if(!s&&!o){var n=ye.lookupPath(r,{follow_mount:!1});if(r=n.path,i=n.node,ye.isMountpoint(i))throw new ye.ErrnoError(10);if(!ye.isDir(i.mode))throw new ye.ErrnoError(54)}var a={type:e,opts:t,mountpoint:r,mounts:[]},c=e.mount(a);return c.mount=a,a.root=c,s?ye.root=c:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),c},unmount(e){var t=ye.lookupPath(e,{follow_mount:!1});if(!ye.isMountpoint(t.node))throw new ye.ErrnoError(28);var r=t.node,i=r.mounted,s=ye.getMounts(i);for(var[o,n]of Object.entries(ye.nameTable))for(;n;){var a=n.name_next;s.includes(n.mount)&&ye.destroyNode(n),n=a}r.mounted=null;var c=r.mount.mounts.indexOf(i);r.mount.mounts.splice(c,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,r){var i=ye.lookupPath(e,{parent:!0}).node,s=Q.basename(e);if(!s)throw new ye.ErrnoError(28);if("."===s||".."===s)throw new ye.ErrnoError(20);var o=ye.mayCreate(i,s);if(o)throw new ye.ErrnoError(o);if(!i.node_ops.mknod)throw new ye.ErrnoError(63);return i.node_ops.mknod(i,s,t,r)},statfs:e=>ye.statfsNode(ye.lookupPath(e,{follow:!0}).node),statfsStream:e=>ye.statfsNode(e.node),statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:ye.nextInode,ffree:ye.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create:(e,t=438)=>(t&=4095,t|=32768,ye.mknod(e,t,0)),mkdir:(e,t=511)=>(t&=1023,t|=16384,ye.mknod(e,t,0)),mkdirTree(e,t){var r=e.split("/"),i="";for(var s of r)if(s){(i||Q.isAbs(e))&&(i+="/"),i+=s;try{ye.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,ye.mknod(e,t,r)),symlink(e,t){if(!K.resolve(e))throw new ye.ErrnoError(44);var r=ye.lookupPath(t,{parent:!0}).node;if(!r)throw new ye.ErrnoError(44);var i=Q.basename(t),s=ye.mayCreate(r,i);if(s)throw new ye.ErrnoError(s);if(!r.node_ops.symlink)throw new ye.ErrnoError(63);return r.node_ops.symlink(r,i,e)},rename(e,t){var r,i,s=Q.dirname(e),o=Q.dirname(t),n=Q.basename(e),a=Q.basename(t);if(r=ye.lookupPath(e,{parent:!0}).node,i=ye.lookupPath(t,{parent:!0}).node,!r||!i)throw new ye.ErrnoError(44);if(r.mount!==i.mount)throw new ye.ErrnoError(75);var c,h=ye.lookupNode(r,n),l=K.relative(e,o);if("."!==l.charAt(0))throw new ye.ErrnoError(28);if("."!==(l=K.relative(t,s)).charAt(0))throw new ye.ErrnoError(55);try{c=ye.lookupNode(i,a)}catch(e){}if(h!==c){var d=ye.isDir(h.mode),u=ye.mayDelete(r,n,d);if(u)throw new ye.ErrnoError(u);if(u=c?ye.mayDelete(i,a,d):ye.mayCreate(i,a))throw new ye.ErrnoError(u);if(!r.node_ops.rename)throw new ye.ErrnoError(63);if(ye.isMountpoint(h)||c&&ye.isMountpoint(c))throw new ye.ErrnoError(10);if(i!==r&&(u=ye.nodePermissions(r,"w")))throw new ye.ErrnoError(u);ye.hashRemoveNode(h);try{r.node_ops.rename(h,i,a),h.parent=i}catch(e){throw e}finally{ye.hashAddNode(h)}}},rmdir(e){var t=ye.lookupPath(e,{parent:!0}).node,r=Q.basename(e),i=ye.lookupNode(t,r),s=ye.mayDelete(t,r,!0);if(s)throw new ye.ErrnoError(s);if(!t.node_ops.rmdir)throw new ye.ErrnoError(63);if(ye.isMountpoint(i))throw new ye.ErrnoError(10);t.node_ops.rmdir(t,r),ye.destroyNode(i)},readdir(e){var t=ye.lookupPath(e,{follow:!0}).node;return ye.checkOpExists(t.node_ops.readdir,54)(t)},unlink(e){var t=ye.lookupPath(e,{parent:!0}).node;if(!t)throw new ye.ErrnoError(44);var r=Q.basename(e),i=ye.lookupNode(t,r),s=ye.mayDelete(t,r,!1);if(s)throw new ye.ErrnoError(s);if(!t.node_ops.unlink)throw new ye.ErrnoError(63);if(ye.isMountpoint(i))throw new ye.ErrnoError(10);t.node_ops.unlink(t,r),ye.destroyNode(i)},readlink(e){var t=ye.lookupPath(e).node;if(!t)throw new ye.ErrnoError(44);if(!t.node_ops.readlink)throw new ye.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,t){var r=ye.lookupPath(e,{follow:!t}).node;return ye.checkOpExists(r.node_ops.getattr,63)(r)},fstat(e){var t=ye.getStreamChecked(e),r=t.node,i=t.stream_ops.getattr,s=i?t:r;return i??=r.node_ops.getattr,ye.checkOpExists(i,63),i(s)},lstat:e=>ye.stat(e,!0),doChmod(e,t,r,i){ye.doSetAttr(e,t,{mode:4095&r|-4096&t.mode,ctime:Date.now(),dontFollow:i})},chmod(e,t,r){var i;i="string"==typeof e?ye.lookupPath(e,{follow:!r}).node:e,ye.doChmod(null,i,t,r)},lchmod(e,t){ye.chmod(e,t,!0)},fchmod(e,t){var r=ye.getStreamChecked(e);ye.doChmod(r,r.node,t,!1)},doChown(e,t,r){ye.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:r})},chown(e,t,r,i){var s;s="string"==typeof e?ye.lookupPath(e,{follow:!i}).node:e,ye.doChown(null,s,i)},lchown(e,t,r){ye.chown(e,t,r,!0)},fchown(e,t,r){var i=ye.getStreamChecked(e);ye.doChown(i,i.node,!1)},doTruncate(e,t,r){if(ye.isDir(t.mode))throw new ye.ErrnoError(31);if(!ye.isFile(t.mode))throw new ye.ErrnoError(28);var i=ye.nodePermissions(t,"w");if(i)throw new ye.ErrnoError(i);ye.doSetAttr(e,t,{size:r,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new ye.ErrnoError(28);var r;r="string"==typeof e?ye.lookupPath(e,{follow:!0}).node:e,ye.doTruncate(null,r,t)},ftruncate(e,t){var r=ye.getStreamChecked(e);if(t<0||!(2097155&r.flags))throw new ye.ErrnoError(28);ye.doTruncate(r,r.node,t)},utime(e,t,r){var i=ye.lookupPath(e,{follow:!0}).node;ye.checkOpExists(i.node_ops.setattr,63)(i,{atime:t,mtime:r})},open(e,r,i=438){if(""===e)throw new ye.ErrnoError(44);var s,o;if(i=64&(r="string"==typeof r?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t})(r):r)?4095&i|32768:0,"object"==typeof e)s=e;else{o=e.endsWith("/");var n=ye.lookupPath(e,{follow:!(131072&r),noent_okay:!0});s=n.node,e=n.path}var a=!1;if(64&r)if(s){if(128&r)throw new ye.ErrnoError(20)}else{if(o)throw new ye.ErrnoError(31);s=ye.mknod(e,511|i,0),a=!0}if(!s)throw new ye.ErrnoError(44);if(ye.isChrdev(s.mode)&&(r&=-513),65536&r&&!ye.isDir(s.mode))throw new ye.ErrnoError(54);if(!a){var c=ye.mayOpen(s,r);if(c)throw new ye.ErrnoError(c)}512&r&&!a&&ye.truncate(s,0),r&=-131713;var h=ye.createStream({node:s,path:ye.getPath(s),flags:r,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return h.stream_ops.open&&h.stream_ops.open(h),a&&ye.chmod(s,511&i),!t.logReadFiles||1&r||e in ye.readFiles||(ye.readFiles[e]=1),h},close(e){if(ye.isClosed(e))throw new ye.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ye.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,r){if(ye.isClosed(e))throw new ye.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ye.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new ye.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,i,s){if(i<0||s<0)throw new ye.ErrnoError(28);if(ye.isClosed(e))throw new ye.ErrnoError(8);if(1==(2097155&e.flags))throw new ye.ErrnoError(8);if(ye.isDir(e.node.mode))throw new ye.ErrnoError(31);if(!e.stream_ops.read)throw new ye.ErrnoError(28);var o=void 0!==s;if(o){if(!e.seekable)throw new ye.ErrnoError(70)}else s=e.position;var n=e.stream_ops.read(e,t,r,i,s);return o||(e.position+=n),n},write(e,t,r,i,s,o){if(i<0||s<0)throw new ye.ErrnoError(28);if(ye.isClosed(e))throw new ye.ErrnoError(8);if(!(2097155&e.flags))throw new ye.ErrnoError(8);if(ye.isDir(e.node.mode))throw new ye.ErrnoError(31);if(!e.stream_ops.write)throw new ye.ErrnoError(28);e.seekable&&1024&e.flags&&ye.llseek(e,0,2);var n=void 0!==s;if(n){if(!e.seekable)throw new ye.ErrnoError(70)}else s=e.position;var a=e.stream_ops.write(e,t,r,i,s,o);return n||(e.position+=a),a},mmap(e,t,r,i,s){if(2&i&&!(2&s)&&2!=(2097155&e.flags))throw new ye.ErrnoError(2);if(1==(2097155&e.flags))throw new ye.ErrnoError(2);if(!e.stream_ops.mmap)throw new ye.ErrnoError(43);if(!t)throw new ye.ErrnoError(28);return e.stream_ops.mmap(e,t,r,i,s)},msync:(e,t,r,i,s)=>e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,s):0,ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new ye.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t={}){t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding&&B(`Invalid encoding type "${t.encoding}"`);var r=ye.open(e,t.flags),i=ye.stat(e).size,s=new Uint8Array(i);return ye.read(r,s,0,i,0),"utf8"===t.encoding&&(s=re(s)),ye.close(r),s},writeFile(e,t,r={}){r.flags=r.flags||577;var i=ye.open(e,r.flags,r.mode);"string"==typeof t&&(t=new Uint8Array(ne(t,!0))),ArrayBuffer.isView(t)?ye.write(i,t,0,t.byteLength,void 0,r.canOwn):B("Unsupported data type"),ye.close(i)},cwd:()=>ye.currentPath,chdir(e){var t=ye.lookupPath(e,{follow:!0});if(null===t.node)throw new ye.ErrnoError(44);if(!ye.isDir(t.node.mode))throw new ye.ErrnoError(54);var r=ye.nodePermissions(t.node,"x");if(r)throw new ye.ErrnoError(r);ye.currentPath=t.path},createDefaultDirectories(){ye.mkdir("/tmp"),ye.mkdir("/home"),ye.mkdir("/home/web_user")},createDefaultDevices(){ye.mkdir("/dev"),ye.registerDevice(ye.makedev(1,3),{read:()=>0,write:(e,t,r,i,s)=>i,llseek:()=>0}),ye.mkdev("/dev/null",ye.makedev(1,3)),ae.register(ye.makedev(5,0),ae.default_tty_ops),ae.register(ye.makedev(6,0),ae.default_tty1_ops),ye.mkdev("/dev/tty",ye.makedev(5,0)),ye.mkdev("/dev/tty1",ye.makedev(6,0));var e=new Uint8Array(1024),t=0,r=()=>(0===t&&(J(e),t=e.byteLength),e[--t]);ye.createDevice("/dev","random",r),ye.createDevice("/dev","urandom",r),ye.mkdir("/dev/shm"),ye.mkdir("/dev/shm/tmp")},createSpecialDirectories(){ye.mkdir("/proc");var e=ye.mkdir("/proc/self");ye.mkdir("/proc/self/fd"),ye.mount({mount(){var t=ye.createNode(e,"fd",16895,73);return t.stream_ops={llseek:he.stream_ops.llseek},t.node_ops={lookup(e,t){var r=+t,i=ye.getStreamChecked(r),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path},id:r+1};return s.parent=s,s},readdir:()=>Array.from(ye.streams.entries()).filter((([e,t])=>t)).map((([e,t])=>e.toString()))},t}},{},"/proc/self/fd")},createStandardStreams(e,t,r){e?ye.createDevice("/dev","stdin",e):ye.symlink("/dev/tty","/dev/stdin"),t?ye.createDevice("/dev","stdout",null,t):ye.symlink("/dev/tty","/dev/stdout"),r?ye.createDevice("/dev","stderr",null,r):ye.symlink("/dev/tty1","/dev/stderr"),ye.open("/dev/stdin",0),ye.open("/dev/stdout",1),ye.open("/dev/stderr",1)},staticInit(){ye.nameTable=new Array(4096),ye.mount(he,{},"/"),ye.createDefaultDirectories(),ye.createDefaultDevices(),ye.createSpecialDirectories(),ye.filesystems={MEMFS:he}},init(e,r,i){ye.initialized=!0,e??=t.stdin,r??=t.stdout,i??=t.stderr,ye.createStandardStreams(e,r,i)},quit(){for(var e of(ye.initialized=!1,ye.streams))e&&ye.close(e)},findObject(e,t){var r=ye.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{e=(i=ye.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=ye.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=Q.basename(e),i=ye.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(e){r.error=e.errno}return r},createPath(e,t,r,i){e="string"==typeof e?e:ye.getPath(e);for(var s=t.split("/").reverse();s.length;){var o=s.pop();if(o){var n=Q.join2(e,o);try{ye.mkdir(n)}catch(e){if(20!=e.errno)throw e}e=n}}return n},createFile(e,t,r,i,s){var o=Q.join2("string"==typeof e?e:ye.getPath(e),t),n=le(i,s);return ye.create(o,n)},createDataFile(e,t,r,i,s,o){var n=t;e&&(e="string"==typeof e?e:ye.getPath(e),n=t?Q.join2(e,t):e);var a=le(i,s),c=ye.create(n,a);if(r){if("string"==typeof r){for(var h=new Array(r.length),l=0,d=r.length;l<d;++l)h[l]=r.charCodeAt(l);r=h}ye.chmod(c,146|a);var u=ye.open(c,577);ye.write(u,r,0,r.length,0,o),ye.close(u),ye.chmod(c,a)}},createDevice(e,t,r,i){var s=Q.join2("string"==typeof e?e:ye.getPath(e),t),o=le(!!r,!!i);ye.createDevice.major??=64;var n=ye.makedev(ye.createDevice.major++,0);return ye.registerDevice(n,{open(e){e.seekable=!1},close(e){i?.buffer?.length&&i(10)},read(e,t,i,s,o){for(var n=0,a=0;a<s;a++){var c;try{c=r()}catch(e){throw new ye.ErrnoError(29)}if(void 0===c&&0===n)throw new ye.ErrnoError(6);if(null==c)break;n++,t[i+a]=c}return n&&(e.node.atime=Date.now()),n},write(e,t,r,s,o){for(var n=0;n<s;n++)try{i(t[r+n])}catch(e){throw new ye.ErrnoError(29)}return s&&(e.node.mtime=e.node.ctime=Date.now()),n}}),ye.mkdev(s,o,n)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(globalThis.XMLHttpRequest)B("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{e.contents=c(e.url)}catch(e){throw new ye.ErrnoError(29)}},createLazyFile(e,t,r,s,o){class n{lengthKnown=!1;chunks=[];get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;e.open("HEAD",r,!1),e.send(null),e.status>=200&&e.status<300||304===e.status||B("Couldn't load "+r+". Status: "+e.status);var t,i=Number(e.getResponseHeader("Content-length")),s=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,n=1048576;s||(n=i);var a=this;a.setDataGetter((e=>{var t=e*n,s=(e+1)*n-1;return s=Math.min(s,i-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{e>t&&B("invalid range ("+e+", "+t+") or no bytes requested!"),t>i-1&&B("only "+i+" bytes available! programmer error!");var s=new XMLHttpRequest;return s.open("GET",r,!1),i!==n&&s.setRequestHeader("Range","bytes="+e+"-"+t),s.responseType="arraybuffer",s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.send(null),s.status>=200&&s.status<300||304===s.status||B("Couldn't load "+r+". Status: "+s.status),void 0!==s.response?new Uint8Array(s.response||[]):ne(s.responseText||"",!0)})(t,s)),void 0===a.chunks[e]&&B("doXHR failed!"),a.chunks[e]})),!o&&i||(n=i=1,i=this.getter(0).length,n=i,O("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=n,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){i||B("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var a={isDevice:!1,contents:new n}}else a={isDevice:!1,url:r};var c=ye.createFile(e,t,a,s,o);a.contents?c.contents=a.contents:a.url&&(c.contents=null,c.url=a.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var h={};for(const[e,t]of Object.entries(c.stream_ops))h[e]=(...e)=>(ye.forceLoadFile(c),t(...e));function l(e,t,r,i,s){var o=e.node.contents;if(s>=o.length)return 0;var n=Math.min(o.length-s,i);if(o.slice)for(var a=0;a<n;a++)t[r+a]=o[s+a];else for(a=0;a<n;a++)t[r+a]=o.get(s+a);return n}return h.read=(e,t,r,i,s)=>(ye.forceLoadFile(c),l(e,t,r,i,s)),h.mmap=(e,t,r,i,s)=>{ye.forceLoadFile(c);var o=ce();if(!o)throw new ye.ErrnoError(48);return l(e,y,o,t,r),{ptr:o,allocated:!0}},c.stream_ops=h,c}},Se=(e,t,r)=>{if(!e)return"";var i=te(S,e,t,r);return ee.decode(S.subarray(e,i))},we={calculateAt(e,t,r){if(Q.isAbs(t))return t;var i;if(i=-100===e?ye.cwd():we.getStreamFromFD(e).path,0==t.length){if(!r)throw new ye.ErrnoError(44);return i}return i+"/"+t},writeStat(e,t){x[e>>2]=t.dev,x[e+4>>2]=t.mode,x[e+8>>2]=t.nlink,x[e+12>>2]=t.uid,x[e+16>>2]=t.gid,x[e+20>>2]=t.rdev,C[e+24>>3]=BigInt(t.size),E[e+32>>2]=4096,E[e+36>>2]=t.blocks;var r=t.atime.getTime(),i=t.mtime.getTime(),s=t.ctime.getTime();return C[e+40>>3]=BigInt(Math.floor(r/1e3)),x[e+48>>2]=r%1e3*1e3*1e3,C[e+56>>3]=BigInt(Math.floor(i/1e3)),x[e+64>>2]=i%1e3*1e3*1e3,C[e+72>>3]=BigInt(Math.floor(s/1e3)),x[e+80>>2]=s%1e3*1e3*1e3,C[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){x[e+4>>2]=t.bsize,x[e+60>>2]=t.bsize,C[e+8>>3]=BigInt(t.blocks),C[e+16>>3]=BigInt(t.bfree),C[e+24>>3]=BigInt(t.bavail),C[e+32>>3]=BigInt(t.files),C[e+40>>3]=BigInt(t.ffree),x[e+48>>2]=t.fsid,x[e+64>>2]=t.flags,x[e+56>>2]=t.namelen},doMsync(e,t,r,i,s){if(!ye.isFile(t.node.mode))throw new ye.ErrnoError(43);if(2&i)return 0;var o=S.slice(e,e+r);ye.msync(t,o,s,r,i)},getStreamFromFD:e=>ye.getStreamChecked(e),varargs:void 0,getStr:e=>Se(e)},be=()=>{var e=E[+we.varargs>>2];return we.varargs+=4,e},Ee=be,xe={},Te=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function Pe(e){return this.fromWireType(x[e>>2])}var Ce={},ke={},De={},Oe=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ae=e=>{throw new Oe(e)},Fe=(e,t,r)=>{function i(t){var i=r(t);i.length!==e.length&&Ae("Mismatched type converter count");for(var s=0;s<e.length;++s)Be(e[s],i[s])}e.forEach((e=>De[e]=t));var s=new Array(t.length),o=[],n=0;for(let[e,r]of t.entries())ke.hasOwnProperty(r)?s[e]=ke[r]:(o.push(r),Ce.hasOwnProperty(r)||(Ce[r]=[]),Ce[r].push((()=>{s[e]=ke[r],++n===o.length&&i(s)})));0===o.length&&i(s)},Re=e=>{for(var t="";;){var r=S[e++];if(!r)return t;t+=String.fromCharCode(r)}},Le=class extends Error{constructor(e){super(e),this.name="BindingError"}},Me=e=>{throw new Le(e)};function Be(e,t,r={}){return function(e,t,r={}){var i=t.name;if(e||Me(`type "${i}" must have a positive integer typeid pointer`),ke.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Me(`Cannot register type '${i}' twice`)}if(ke[e]=t,delete De[e],Ce.hasOwnProperty(e)){var s=Ce[e];delete Ce[e],s.forEach((e=>e()))}}(e,t,r)}var Ie=(e,t,r)=>{switch(t){case 1:return r?e=>y[e]:e=>S[e];case 2:return r?e=>w[e>>1]:e=>b[e>>1];case 4:return r?e=>E[e>>2]:e=>x[e>>2];case 8:return r?e=>C[e>>3]:e=>k[e>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ue=e=>{Me(e.$$.ptrType.registeredClass.name+" instance already deleted")},We=!1,_e=e=>{},Ne=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},He=e=>globalThis.FinalizationRegistry?(We=new FinalizationRegistry((e=>{Ne(e.$$)})),He=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};We.register(e,r,e)}return e},_e=e=>We.unregister(e),He(e)):(He=e=>e,e),Ge=[];function Ve(){}var ze=(e,t)=>Object.defineProperty(t,"name",{value:e}),je={},$e=(e,t,r)=>{if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||Me(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},qe=(e,r,i)=>{t.hasOwnProperty(e)?((void 0===i||void 0!==t[e].overloadTable&&void 0!==t[e].overloadTable[i])&&Me(`Cannot register public name '${e}' twice`),$e(t,e,e),t[e].overloadTable.hasOwnProperty(i)&&Me(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),t[e].overloadTable[i]=r):(t[e]=r,t[e].argCount=i)};function Ye(e,t,r,i,s,o,n,a){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=s,this.getActualType=o,this.upcast=n,this.downcast=a,this.pureVirtualFunctions=[]}var Xe=(e,t,r)=>{for(;t!==r;)t.upcast||Me(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},Ze=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e};function Qe(e,t){if(null===t)return this.isReference&&Me(`null is not a valid ${this.name}`),0;t.$$||Me(`Cannot pass "${Ze(t)}" as a ${this.name}`),t.$$.ptr||Me(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,r,this.registeredClass)}function Je(e,t){var r;if(null===t)return this.isReference&&Me(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t&&t.$$||Me(`Cannot pass "${Ze(t)}" as a ${this.name}`),t.$$.ptr||Me(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&Me(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(r=Xe(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Me("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Me(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var s=t.clone();r=this.rawShare(r,Rt.toHandle((()=>s.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:Me("Unsupported sharing policy")}return r}function Ke(e,t){if(null===t)return this.isReference&&Me(`null is not a valid ${this.name}`),0;t.$$||Me(`Cannot pass "${Ze(t)}" as a ${this.name}`),t.$$.ptr||Me(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&Me(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,r,this.registeredClass)}var et=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var i=et(e,t,r.baseClass);return null===i?null:r.downcast(i)},tt={},rt=(e,t)=>(t.ptrType&&t.ptr||Ae("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Ae("Both smartPtrType and smartPtr must be specified"),t.count={value:1},He(Object.create(e,{$$:{value:t,writable:!0}})));function it(e,t,r,i,s,o,n,a,c,h,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=s,this.pointeeType=o,this.sharingPolicy=n,this.rawGetPointee=a,this.rawConstructor=c,this.rawShare=h,this.rawDestructor=l,s||void 0!==t.baseClass?this.toWireType=Je:i?(this.toWireType=Qe,this.destructorFunction=null):(this.toWireType=Ke,this.destructorFunction=null)}var st=(e,r,i)=>{t.hasOwnProperty(e)||Ae("Replacing nonexistent public symbol"),void 0!==t[e].overloadTable&&void 0!==i?t[e].overloadTable[i]=r:(t[e]=r,t[e].argCount=i)},ot=(e,t,r=!1)=>{e=Re(e);var i=z(t);return"function"!=typeof i&&Me(`unknown function pointer with signature ${e}: ${t}`),i};class nt extends Error{}var at=e=>{var t=dt(e),r=Re(t);return pt(t),r},ct=(e,t)=>{var r=[],i={};throw t.forEach((function e(t){i[t]||ke[t]||(De[t]?De[t].forEach(e):(r.push(t),i[t]=!0))})),new nt(`${e}: `+r.map(at).join([", "]))};function ht(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}function lt(e,t,r,i,s,o){var n=t.length;n<2&&Me("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,c=ht(t),h=!t[0].isVoid,l=t[0],d=t[1],u=[e,Me,i,s,Te,l.fromWireType.bind(l),d?.toWireType.bind(d)],p=2;p<n;++p){var f=t[p];u.push(f.toWireType.bind(f))}if(!c)for(p=a?1:2;p<t.length;++p)null!==t[p].destructorFunction&&u.push(t[p].destructorFunction);let v=function(e,t,r,i){var s=ht(e),o=e.length-2,n=[],a=["fn"];t&&a.push("thisWired");for(var c=0;c<o;++c)n.push(`arg${c}`),a.push(`arg${c}Wired`);n=n.join(","),a=a.join(",");var h=`return function (${n}) {\n`;s&&(h+="var destructors = [];\n");var l=s?"destructors":"null",d=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];for(t&&(h+=`var thisWired = toClassParamWire(${l}, this);\n`),c=0;c<o;++c){var u=`toArg${c}Wire`;h+=`var arg${c}Wired = ${u}(${l}, arg${c});\n`,d.push(u)}if(h+=(r||i?"var rv = ":"")+`invoker(${a});\n`,s)h+="runDestructors(destructors);\n";else for(c=t?1:2;c<e.length;++c){var p=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==e[c].destructorFunction&&(h+=`${p}_dtor(${p});\n`,d.push(`${p}_dtor`))}return r&&(h+="var ret = fromRetWire(rv);\nreturn ret;\n"),h+="}\n",new Function(d,h)}(t,a,h,o);var g=v(...u);return ze(e,g)}var dt,ut,pt,ft,vt,gt,mt,yt,St,wt,bt,Et,xt,Tt,Pt,Ct=(e,t)=>{for(var r=[],i=0;i<e;i++)r.push(x[t+4*i>>2]);return r},kt=e=>{const t=(e=e.trim()).indexOf("(");return-1===t?e:e.slice(0,t)},Dt=(e,t,r)=>(e instanceof Object||Me(`${r} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||Me(`${r} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||Me(`cannot call emscripten binding method ${r} on deleted object`),Xe(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),Ot=[],At=[0,1,,1,null,1,!0,1,!1,1],Ft=e=>{e>9&&0==--At[e+1]&&(At[e]=void 0,Ot.push(e))},Rt={toValue:e=>(e||Me(`Cannot use deleted val. handle = ${e}`),At[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Ot.pop()||At.length;return At[t]=e,At[t+1]=1,t}}}},Lt={name:"emscripten::val",fromWireType:e=>{var t=Rt.toValue(e);return Ft(e),t},toWireType:(e,t)=>Rt.toHandle(t),readValueFromPointer:Pe,destructorFunction:null},Mt=(e,t,r)=>{switch(t){case 1:return r?function(e){return this.fromWireType(y[e])}:function(e){return this.fromWireType(S[e])};case 2:return r?function(e){return this.fromWireType(w[e>>1])}:function(e){return this.fromWireType(b[e>>1])};case 4:return r?function(e){return this.fromWireType(E[e>>2])}:function(e){return this.fromWireType(x[e>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Bt=(e,t)=>{var r=ke[e];return void 0===r&&Me(`${t} has unknown type ${at(e)}`),r},It=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(T[e>>2])};case 8:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ut=Object.assign({optional:!0},Lt),Wt=(e,t,r)=>oe(e,S,t,r),_t=new TextDecoder("utf-16le"),Nt=(e,t,r)=>{var i=e>>1,s=te(b,i,t/2,r);return _t.decode(b.subarray(i,s))},Ht=(e,t,r)=>{if(r??=2147483647,r<2)return 0;for(var i=t,s=(r-=2)<2*e.length?r/2:e.length,o=0;o<s;++o){var n=e.charCodeAt(o);w[t>>1]=n,t+=2}return w[t>>1]=0,t-i},Gt=e=>2*e.length,Vt=(e,t,r)=>{for(var i="",s=e>>2,o=0;!(o>=t/4);o++){var n=x[s+o];if(!n&&!r)break;i+=String.fromCodePoint(n)}return i},zt=(e,t,r)=>{if(r??=2147483647,r<4)return 0;for(var i=t,s=i+r-4,o=0;o<e.length;++o){var n=e.codePointAt(o);if(n>65535&&o++,E[t>>2]=n,(t+=4)+4>s)break}return E[t>>2]=0,t-i},jt=e=>{for(var t=0,r=0;r<e.length;++r)e.codePointAt(r)>65535&&r++,t+=4;return t},$t=e=>{for(var t=e.split("."),r=0;r<4;r++){var i=Number(t[r]);if(isNaN(i))return null;t[r]=i}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0},qt={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var t,r=$t(e);if(null!==r)return e;if(null!==(r=(e=>{var t,r,i,s,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=Number(t[t.length-4])+256*Number(t[t.length-3]),t[t.length-3]=Number(t[t.length-2])+256*Number(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),i=0,s=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(s=0;s<8-t.length+1;s++)o[r+s]=0;i=s-1}else o[r+i]=ft(parseInt(t[r],16));else o[r+i]=t[r];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]})(e)))return e;if(qt.address_map.addrs[e])t=qt.address_map.addrs[e];else{var i=qt.address_map.id++;t="172.29."+(255&i)+"."+(65280&i),qt.address_map.names[t]=e,qt.address_map.addrs[e]=t}return t},lookup_addr:e=>qt.address_map.names[e]?qt.address_map.names[e]:null},Yt=0,Xt=[],Zt=(e,t,r)=>{var i=[],s=e(i,r);return i.length&&(x[t>>2]=Rt.toHandle(i)),s},Qt={},Jt=e=>{var t=Qt[e];return void 0===t?Re(e):t},Kt=[0,31,60,91,121,152,182,213,244,274,305,335],er=[0,31,59,90,120,151,181,212,243,273,304,334],tr=e=>e<-9007199254740992||e>9007199254740992?NaN:Number(e),rr={},ir=e=>{if(e instanceof U||"unwind"==e)return v;l(1,e)},sr=()=>H||Yt>0,or=e=>{v=e,sr()||(t.onExit?.(e),F=!0),l(e,new U(e))},nr=(e,t)=>{v=e,or(e)},ar=()=>performance.now(),cr=()=>Date.now(),hr=e=>{var t=(e-Tt.buffer.byteLength+65535)/65536|0;try{return Tt.grow(t),M(),1}catch(e){}},lr={},dr=()=>{if(!dr.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(var t in lr)void 0===lr[t]?delete e[t]:e[t]=lr[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);dr.strings=r}return dr.strings};if(ye.createPreloadedFile=(e,t,r,i,s,o,n,a,c,h)=>{me(e,t,r,i,s,a,c,h).then(o).catch(n)},ye.preloadFile=me,ye.staticInit(),(()=>{let e=Ve.prototype;Object.assign(e,{isAliasOf(e){if(!(this instanceof Ve))return!1;if(!(e instanceof Ve))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return t===i&&r===s},clone(){if(this.$$.ptr||Ue(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=He(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Ue(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Me("Object already scheduled for deletion"),_e(this),Ne(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ue(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Me("Object already scheduled for deletion"),Ge.push(this),Ge.length,this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(it.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:Pe,fromWireType:function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=((e,t)=>(t=((e,t)=>{for(void 0===t&&Me("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),tt[t]))(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function s(){return this.isSmartPointer?rt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):rt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,n=this.registeredClass.getActualType(t),a=je[n];if(!a)return s.call(this);o=this.isConst?a.constPointerType:a.pointerType;var c=et(t,this.registeredClass,o.registeredClass);return null===c?s.call(this):this.isSmartPointer?rt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):rt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}}),t.noExitRuntime&&(H=t.noExitRuntime),t.preloadPlugins&&(ge=t.preloadPlugins),t.print&&(O=t.print),t.printErr&&(A=t.printErr),t.wasmBinary&&(f=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&(h=t.thisProgram),t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()();t.addRunDependency=ve,t.removeRunDependency=fe,t.FS_preloadFile=me,t.FS_unlink=(...e)=>ye.unlink(...e),t.FS_createPath=(...e)=>ye.createPath(...e),t.FS_createDevice=(...e)=>ye.createDevice(...e),t.FS=ye,t.FS_createDataFile=de,t.FS_createLazyFile=(...e)=>ye.createLazyFile(...e);var ur,pr={Oi:function(){return t.HEAP8.length},ni:(e,t)=>z(e)(t),O:e=>{var t=new Y(e);return t.get_caught()||(t.set_caught(!0),$--),t.set_rethrown(!1),j.push(t),xt(e)},ma:()=>{gt(0,0);var e=j.pop();wt(e.excPtr),q=0},a:()=>Z([]),i:e=>Z([e]),$:(e,t)=>Z([e,t]),xa:(e,t,r)=>Z([e,t,r]),sf:()=>{var e=j.pop();e||B("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(j.push(e),e.set_rethrown(!0),e.set_caught(!1),$++),bt(t),q=t},n:(e,t,r)=>{throw new Y(e).init(t,r),bt(e),$++,q=e},ji:()=>$,h:e=>{throw q||(q=e),q},Ci:function(e,t){try{return e=we.getStr(e),ye.chmod(e,t),0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},Di:function(e,t,r,i){try{if(t=we.getStr(t),t=we.calculateAt(e,t),-8&r)return-28;var s=ye.lookupPath(t,{follow:!0}).node;if(!s)return-44;var o="";return 4&r&&(o+="r"),2&r&&(o+="w"),1&r&&(o+="x"),o&&ye.nodePermissions(s,o)?-2:0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},ff:function(e,t,r){we.varargs=r;try{var i=we.getStreamFromFD(e);switch(t){case 0:if((s=be())<0)return-28;for(;ye.streams[s];)s++;return ye.dupStream(i,s).fd;case 1:case 2:case 13:case 14:return 0;case 3:return i.flags;case 4:var s=be();return i.flags|=s,0;case 12:return s=Ee(),w[s+0>>1]=2,0}return-28}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},zi:function(e,t){try{return we.writeStat(t,ye.fstat(e))}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},Fi:function(e,t,r){we.varargs=r;try{var i=we.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return i.tty?0:-59;case 21505:if(!i.tty)return-59;if(i.tty.ops.ioctl_tcgets){var s=i.tty.ops.ioctl_tcgets(i),o=Ee();E[o>>2]=s.c_iflag||0,E[o+4>>2]=s.c_oflag||0,E[o+8>>2]=s.c_cflag||0,E[o+12>>2]=s.c_lflag||0;for(var n=0;n<32;n++)y[o+n+17]=s.c_cc[n]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!i.tty)return-59;if(i.tty.ops.ioctl_tcsets){o=Ee();var a=E[o>>2],c=E[o+4>>2],h=E[o+8>>2],l=E[o+12>>2],d=[];for(n=0;n<32;n++)d.push(y[o+n+17]);return i.tty.ops.ioctl_tcsets(i.tty,t,{c_iflag:a,c_oflag:c,c_cflag:h,c_lflag:l,c_cc:d})}return 0;case 21519:return i.tty?(o=Ee(),E[o>>2]=0,0):-59;case 21520:return i.tty?-28:-59;case 21537:case 21531:return o=Ee(),ye.ioctl(i,t,o);case 21523:if(!i.tty)return-59;if(i.tty.ops.ioctl_tiocgwinsz){var u=i.tty.ops.ioctl_tiocgwinsz(i.tty);o=Ee(),w[o>>1]=u[0],w[o+2>>1]=u[1]}return 0;default:return-28}}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},xi:function(e,t){try{return e=we.getStr(e),we.writeStat(t,ye.lstat(e))}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},si:function(e,t,r){try{return t=we.getStr(t),t=we.calculateAt(e,t),ye.mkdir(t,r,0),0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},wi:function(e,t,r,i){try{t=we.getStr(t);var s=256&i,o=4096&i;return i&=-6401,t=we.calculateAt(e,t,o),we.writeStat(r,s?ye.lstat(t):ye.stat(t))}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},eg:function(e,t,r,i){we.varargs=i;try{t=we.getStr(t),t=we.calculateAt(e,t);var s=i?be():0;return ye.open(t,r,s).fd}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},cg:function(e){try{return e=we.getStr(e),ye.rmdir(e),0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},yi:function(e,t){try{return e=we.getStr(e),we.writeStat(t,ye.stat(e))}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},dg:function(e,t,r){try{if(t=we.getStr(t),t=we.calculateAt(e,t),r){if(512!==r)return-28;ye.rmdir(t)}else ye.unlink(t);return 0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return-e.errno}},qi:()=>B(""),dk:e=>{var t=xe[e];delete xe[e];var r=t.rawConstructor,i=t.rawDestructor,s=t.fields,o=s.map((e=>e.getterReturnType)).concat(s.map((e=>e.setterArgumentType)));Fe([e],o,(e=>{var o={};for(var[n,a]of s.entries()){const t=e[n],r=a.getter,i=a.getterContext,c=e[n+s.length],h=a.setter,l=a.setterContext;o[a.fieldName]={read:e=>t.fromWireType(r(i,e)),write:(e,t)=>{var r=[];h(l,e,c.toWireType(r,t)),Te(r)},optional:t.optional}}return[{name:t.name,fromWireType:e=>{var t={};for(var r in o)t[r]=o[r].read(e);return i(e),t},toWireType:(e,t)=>{for(var s in o)if(!(s in t)&&!o[s].optional)throw new TypeError(`Missing field: "${s}"`);var n=r();for(s in o)o[s].write(n,t[s]);return null!==e&&e.push(i,n),n},readValueFromPointer:Pe,destructorFunction:i}]}))},Xh:(e,t,r,i,s)=>{t=Re(t);const o=0n===i;let n=e=>e;if(o){const e=8*r;n=t=>BigInt.asUintN(e,t),s=n(s)}Be(e,{name:t,fromWireType:n,toWireType:(e,t)=>("number"==typeof t&&(t=BigInt(t)),t),readValueFromPointer:Ie(t,r,!o),destructorFunction:null})},zk:(e,t,r,i)=>{Be(e,{name:t=Re(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},readValueFromPointer:function(e){return this.fromWireType(S[e])},destructorFunction:null})},Y:(e,t,r,i,s,o,n,a,c,h,l,d,u)=>{l=Re(l),o=ot(s,o),a&&=ot(n,a),h&&=ot(c,h),u=ot(d,u);var p=(e=>{var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(l);qe(p,(function(){ct(`Cannot construct ${l} due to unbound types`,[i])})),Fe([e,t,r],i?[i]:[],(t=>{var r,s;t=t[0],s=i?(r=t.registeredClass).instancePrototype:Ve.prototype;var n=ze(l,(function(...e){if(Object.getPrototypeOf(this)!==c)throw new Le(`Use 'new' to construct ${l}`);if(void 0===d.constructor_body)throw new Le(`${l} has no accessible constructor`);var t=d.constructor_body[e.length];if(void 0===t)throw new Le(`Tried to invoke ctor of ${l} with invalid number of parameters (${e.length}) - expected (${Object.keys(d.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)})),c=Object.create(s,{constructor:{value:n}});n.prototype=c;var d=new Ye(l,n,c,u,r,o,a,h);d.baseClass&&(d.baseClass.__derivedClasses??=[],d.baseClass.__derivedClasses.push(d));var f=new it(l,d,!0,!1,!1),v=new it(l+"*",d,!1,!1,!1),g=new it(l+" const*",d,!1,!0,!1);return je[e]={pointerType:v,constPointerType:g},st(p,n),[f,v,g]}))},bc:(e,t,r,i,s,o,n,a,c)=>{var h=Ct(r,i);t=Re(t),t=kt(t),o=ot(s,o,a),Fe([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`;function s(){ct(`Cannot call ${i} due to unbound types`,h)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.registeredClass.constructor;return void 0===c[t]?(s.argCount=r-1,c[t]=s):($e(c,t,i),c[t].overloadTable[r-1]=s),Fe([],h,(s=>{var h=[s[0],null].concat(s.slice(1)),l=lt(i,h,null,o,n,a);if(void 0===c[t].overloadTable?(l.argCount=r-1,c[t]=l):c[t].overloadTable[r-1]=l,e.registeredClass.__derivedClasses)for(const r of e.registeredClass.__derivedClasses)r.constructor.hasOwnProperty(t)||(r.constructor[t]=l);return[]})),[]}))},M:(e,t,r,i,s,o)=>{var n=Ct(t,r);s=ot(i,s),Fe([],[e],(e=>{var r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Le(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{ct(`Cannot construct ${e.name} due to unbound types`,n)},Fe([],n,(i=>(i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=lt(r,i,null,s,o),[]))),[]}))},y:(e,t,r,i,s,o,n,a,c,h)=>{var l=Ct(r,i);t=Re(t),t=kt(t),o=ot(s,o,c),Fe([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`;function s(){ct(`Cannot call ${i} due to unbound types`,l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var h=e.registeredClass.instancePrototype,d=h[t];return void 0===d||void 0===d.overloadTable&&d.className!==e.name&&d.argCount===r-2?(s.argCount=r-2,s.className=e.name,h[t]=s):($e(h,t,i),h[t].overloadTable[r-2]=s),Fe([],l,(s=>{var a=lt(i,s,e,o,n,c);return void 0===h[t].overloadTable?(a.argCount=r-2,h[t]=a):h[t].overloadTable[r-2]=a,[]})),[]}))},ld:(e,t,r,i,s,o,n,a,c,h)=>{t=Re(t),s=ot(i,s),Fe([],[e],(e=>{var i=`${(e=e[0]).name}.${t}`,l={get(){ct(`Cannot access ${i} due to unbound types`,[r,n])},enumerable:!0,configurable:!0};return l.set=c?()=>ct(`Cannot access ${i} due to unbound types`,[r,n]):e=>Me(i+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,t,l),Fe([],c?[r,n]:[r],(r=>{var n=r[0],l={get(){var t=Dt(this,e,i+" getter");return n.fromWireType(s(o,t))},enumerable:!0};if(c){c=ot(a,c);var d=r[1];l.set=function(t){var r=Dt(this,e,i+" setter"),s=[];c(h,r,d.toWireType(s,t)),Te(s)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},tk:e=>Be(e,Lt),kb:(e,r,i,s,o)=>{r=Re(r);const n=function(e){return 0===e?"object":1===e?"number":"string"}(o);switch(n){case"object":{function c(){}c.values={},Be(e,{name:r,constructor:c,valueType:n,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,t)=>t.value,readValueFromPointer:Mt(r,i,s),destructorFunction:null}),qe(r,c);break}case"number":Be(e,{name:r,keysMap:a={},valueType:n,fromWireType:e=>e,toWireType:(e,t)=>t,readValueFromPointer:Mt(r,i,s),destructorFunction:null}),qe(r,a),delete t[r].argCount;break;case"string":var a;Be(e,{name:r,valuesMap:{},reverseMap:{},keysMap:a={},valueType:n,fromWireType:function(e){return this.reverseMap[e]},toWireType:function(e,t){return this.valuesMap[t]},readValueFromPointer:Mt(r,i,s),destructorFunction:null}),qe(r,a),delete t[r].argCount}},ba:(e,t,r)=>{var i=Bt(e,"enum");switch(t=Re(t),i.valueType){case"object":var s=i.constructor,o=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:ze(`${i.name}_${t}`,(function(){}))}});s.values[r]=o,s[t]=o;break;case"number":i.keysMap[t]=r;break;case"string":i.valuesMap[t]=r,i.reverseMap[r]=t,i.keysMap[t]=t}},Vh:(e,t,r)=>{Be(e,{name:t=Re(t),fromWireType:e=>e,toWireType:(e,t)=>t,readValueFromPointer:It(t,r),destructorFunction:null})},P:(e,t,r,i,s,o,n,a)=>{var c=Ct(t,r);e=Re(e),e=kt(e),s=ot(i,s,n),qe(e,(function(){ct(`Cannot call ${e} due to unbound types`,c)}),t-1),Fe([],c,(r=>{var i=[r[0],null].concat(r.slice(1));return st(e,lt(e,i,null,s,o,n),t-1),[]}))},Nc:(e,t,r,i,s)=>{t=Re(t);let o=e=>e;if(0===i){var n=32-8*r;o=e=>e<<n>>>n,s=o(s)}Be(e,{name:t,fromWireType:o,toWireType:(e,t)=>t,readValueFromPointer:Ie(t,r,0!==i),destructorFunction:null})},rb:(e,t,r)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];function s(e){var t=x[e>>2],r=x[e+4>>2];return new i(y.buffer,r,t)}Be(e,{name:r=Re(r),fromWireType:s,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})},Te:(e,t)=>{Be(e,Ut)},yk:(e,t)=>{Be(e,{name:t=Re(t),fromWireType(e){var t,r=x[e>>2];return t=Se(e+4,r,!0),pt(e),t},toWireType(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT||Me("Cannot pass non-string to std::string"),r=i?se(t):t.length;var s=ut(4+r+1),o=s+4;return x[s>>2]=r,i?Wt(t,o,r+1):S.set(t,o),null!==e&&e.push(pt,s),s},readValueFromPointer:Pe,destructorFunction(e){pt(e)}})},Tf:(e,t,r)=>{var i,s,o;r=Re(r),2===t?(i=Nt,s=Ht,o=Gt):(i=Vt,s=zt,o=jt),Be(e,{name:r,fromWireType:e=>{var r=x[e>>2],s=i(e+4,r*t,!0);return pt(e),s},toWireType:(e,i)=>{"string"!=typeof i&&Me(`Cannot pass non-string to C++ string type ${r}`);var n=o(i),a=ut(4+n+t);return x[a>>2]=n/t,s(i,a+4,n+t),null!==e&&e.push(pt,a),a},readValueFromPointer:Pe,destructorFunction(e){pt(e)}})},wc:(e,t,r,i,s,o)=>{xe[e]={name:Re(t),rawConstructor:ot(r,i),rawDestructor:ot(s,o),fields:[]}},Vb:(e,t,r,i,s,o,n,a,c,h)=>{xe[e].fields.push({fieldName:Re(t),getterReturnType:r,getter:ot(i,s),getterContext:o,setterArgumentType:n,setter:ot(a,c),setterContext:h})},Ak:(e,t)=>{Be(e,{isVoid:!0,name:t=Re(t),fromWireType:()=>{},toWireType:(e,t)=>{}})},ii:e=>{var t=Se(e);return $t(qt.lookup_name(t))},pi:()=>{H=!1,Yt=0},ki:()=>{throw 1/0},dc:(e,t,r)=>{var[i,...s]=((e,t)=>{for(var r=new Array(e),i=0;i<e;++i)r[i]=Bt(x[t+4*i>>2],`parameter ${i}`);return r})(e,t),o=i.toWireType.bind(i),n=s.map((e=>e.readValueFromPointer.bind(e)));e--;var a,c={toValue:Rt.toValue},h=n.map(((e,t)=>{var r=`argFromPtr${t}`;return c[r]=e,`${r}(args${t?"+"+8*t:""})`}));switch(r){case 0:a="toValue(handle)";break;case 2:a="new (toValue(handle))";break;case 3:a="";break;case 1:c.getStringOrSymbol=Jt,a="toValue(handle)[getStringOrSymbol(methodName)]"}a+=`(${h})`,i.isVoid||(c.toReturnWire=o,c.emval_returnValue=Zt,a=`return emval_returnValue(toReturnWire, destructorsRef, ${a})`),a=`return function (handle, methodName, destructorsRef, args) {\n  ${a}\n  }`;var l,d,u=new Function(Object.keys(c),a)(...Object.values(c)),p=`methodCaller<(${s.map((e=>e.name))}) => ${i.name}>`;return l=ze(p,u),d=Xt.length,Xt.push(l),d},Bj:Ft,Yj:e=>e?(e=Jt(e),Rt.toHandle(globalThis[e])):Rt.toHandle(globalThis),Sj:(e,t)=>(e=Rt.toValue(e),t=Rt.toValue(t),Rt.toHandle(e[t])),Fk:e=>{e>9&&(At[e+1]+=1)},cc:(e,t,r,i,s)=>Xt[e](t,r,i,s),Zj:()=>Rt.toHandle([]),Nj:e=>Rt.toHandle(Jt(e)),Bk:e=>{var t=Rt.toValue(e);Te(t),Ft(e)},ri:function(e,t){e=tr(e);var r=new Date(1e3*e);E[t>>2]=r.getSeconds(),E[t+4>>2]=r.getMinutes(),E[t+8>>2]=r.getHours(),E[t+12>>2]=r.getDate(),E[t+16>>2]=r.getMonth(),E[t+20>>2]=r.getFullYear()-1900,E[t+24>>2]=r.getDay();var i=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?er:Kt)[e.getMonth()]+e.getDate()-1})(r);E[t+28>>2]=i,E[t+36>>2]=-60*r.getTimezoneOffset();var s=new Date(r.getFullYear(),0,1),o=new Date(r.getFullYear(),6,1).getTimezoneOffset(),n=s.getTimezoneOffset(),a=0|(o!=n&&r.getTimezoneOffset()==Math.min(n,o));E[t+32>>2]=a},hi:(e,t)=>{if(rr[e]&&(clearTimeout(rr[e].id),delete rr[e]),!t)return 0;var r=setTimeout((()=>{delete rr[e],(e=>{if(!F)try{e(),(()=>{if(!sr())try{nr(v)}catch(e){ir(e)}})()}catch(e){ir(e)}})((()=>vt(e,ar())))}),t);return rr[e]={id:r,timeout_ms:t},0},Ei:(e,t,r,i)=>{var s=(new Date).getFullYear(),o=new Date(s,0,1),n=new Date(s,6,1),a=o.getTimezoneOffset(),c=n.getTimezoneOffset(),h=Math.max(a,c);x[e>>2]=60*h,E[t>>2]=Number(a!=c);var l=e=>{var t=e>=0?"-":"+",r=Math.abs(e);return`UTC${t}${String(Math.floor(r/60)).padStart(2,"0")}${String(r%60).padStart(2,"0")}`},d=l(a),u=l(c);c<a?(Wt(d,r,17),Wt(u,i,17)):(Wt(d,i,17),Wt(u,r,17))},Bi:function(e,t,r){if(t=tr(t),!((i=e)>=0&&i<=3))return 28;var i,s;s=0===e?cr():ar();var o=Math.round(1e3*s*1e3);return C[r>>3]=BigInt(o),0},Ai:cr,dj:(e,t,r)=>{var i=(e=>{var t=(new Error).stack.toString(),r=t.split("\n");t="";var i=new RegExp("\\s*(.*?)@(.*?):([0-9]+):([0-9]+)"),s=new RegExp("\\s*at (.*?) \\((.*):(.*):(.*)\\)");for(var o of r){var n="",a="",c=0,h=0,l=s.exec(o);if(5==l?.length)n=l[1],a=l[2],c=l[3],h=l[4];else{if(l=i.exec(o),!(l?.length>=4)){t+=o+"\n";continue}n=l[1],a=l[2],c=l[3],h=0|l[4]}"_emscripten_log"!=n&&"_emscripten_get_callstack"!=n?24&e&&(64&e&&(a=a.substring(a.replace(/\\/g,"/").lastIndexOf("/")+1)),t+=`    at ${n} (${a}:${c}:${h})\n`):t=""}return t.replace(/\s+$/,"")})(e);return!t||r<=0?se(i)+1:Wt(i,t,r)+1},mi:()=>2147483648,li:e=>{var t,r=S.length,i=2147483648;if((e>>>=0)>i)return!1;for(var s=1;s<=4;s*=2){var o=r*(1+.2/s);o=Math.min(o,e+100663296);var n=Math.min(i,(t=Math.max(e,o),65536,65536*Math.ceil(t/65536)));if(hr(n))return!0}return!1},ui:(e,t)=>{var r=0,i=0;for(var s of dr()){var o=t+r;x[e+i>>2]=o,r+=Wt(s,o,1/0)+1,i+=4}return 0},vi:(e,t)=>{var r=dr();x[e>>2]=r.length;var i=0;for(var s of r)i+=se(s)+1;return x[t>>2]=i,0},Lh:nr,ef:function(e){try{var t=we.getStreamFromFD(e);return ye.close(t),0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return e.errno}},gg:function(e,t,r,i){try{var s=((e,t,r,i)=>{for(var s=0,o=0;o<r;o++){var n=x[t>>2],a=x[t+4>>2];t+=8;var c=ye.read(e,y,n,a,i);if(c<0)return-1;if(s+=c,c<a)break;void 0!==i&&(i+=c)}return s})(we.getStreamFromFD(e),t,r);return x[i>>2]=s,0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return e.errno}},ti:function(e,t,r,i){t=tr(t);try{if(isNaN(t))return 61;var s=we.getStreamFromFD(e);return ye.llseek(s,t,r),C[i>>3]=BigInt(s.position),s.getdents&&0===t&&0===r&&(s.getdents=null),0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return e.errno}},fg:function(e,t,r,i){try{var s=((e,t,r,i)=>{for(var s=0,o=0;o<r;o++){var n=x[t>>2],a=x[t+4>>2];t+=8;var c=ye.write(e,y,n,a,i);if(c<0)return-1;if(s+=c,c<a)break;void 0!==i&&(i+=c)}return s})(we.getStreamFromFD(e),t,r);return x[i>>2]=s,0}catch(e){if(void 0===ye||"ErrnoError"!==e.name)throw e;return e.errno}},ve:function(e){var t=V();try{return z(e)()}catch(e){if(G(t),e!==e+0)throw e;gt(1,0)}},ha:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},ca:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Cc:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},zg:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},j:function(e,t){var r=V();try{return z(e)(t)}catch(e){if(G(r),e!==e+0)throw e;gt(1,0)}},z:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},Bb:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Rb:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Ih:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Xe:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Xc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ua:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Ff:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},pb:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},wj:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Hf:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Xd:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},xj:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ug:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},q:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},Ha:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Wb:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Ia:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ch:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Wc:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},be:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Z:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Mj:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},dh:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},xh:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Wd:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ob:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Gb:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Ec:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ib:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ue:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},lc:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Fh:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Gi:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},Yf:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},l:function(e){var t=V();try{return z(e)()}catch(e){if(G(t),e!==e+0)throw e;gt(1,0)}},Md:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},jd:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ae:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Me:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},nh:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Nf:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Kh:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Jh:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},$e:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},yg:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Bc:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ze:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},wh:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Be:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},Tc:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},bk:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},uh:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Za:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},mb:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},ud:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Jj:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},kh:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Kf:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Jf:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Kc:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},c:function(e,t){var r=V();try{return z(e)(t)}catch(e){if(G(r),e!==e+0)throw e;gt(1,0)}},F:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},oa:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Ba:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Qe:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ph:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Af:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},He:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},vk:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Ie:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},je:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},_b:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Kj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Dh:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Rg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Sg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Yi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},Ta:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},ik:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Pe:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Na:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Gf:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Dj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},wk:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},jj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},ka:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},ed:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},yj:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Pj:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},tj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},uf:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},pa:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},gk:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Ea:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Jc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},ee:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Pc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ad:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Si:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},xe:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Fe:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},he:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},b:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},C:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},E:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Eb:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},qb:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Se:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},_a:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},di:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},vh:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},qc:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ed:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},hk:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ta:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Df:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},qd:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Yh:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Ye:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Sd:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},sa:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Yb:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Xa:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Zb:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},rj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},A:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},qk:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Aj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Nh:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ch:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},I:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},tb:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ld:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Pd:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ie:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Fa:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},rh:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Bf:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ra:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},af:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},eh:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Dd:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},cd:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},g:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},R:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},ia:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},hb:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Fc:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},_e:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},$j:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Ij:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ig:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},sd:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Fd:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Gd:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},uj:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Dc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Lg:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Fb:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ih:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Rf:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ge:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Da:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Zd:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Wi:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},uc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},xb:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},bh:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ah:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},qh:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},m:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},la:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Wa:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},$c:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Tj:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},De:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Kd:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Bd:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},yb:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},yd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},zd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Ag:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Hi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},sc:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ya:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Je:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Mb:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},gf:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Xi:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},lh:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},s:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},$b:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},ic:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ag:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Cg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},fh:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Pg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},Ah:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},_j:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},gc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},Ne:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Lj:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Ud:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Tb:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},r:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Pa:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Gj:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Ng:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},mj:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Vi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},lk:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},nj:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},xg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},u:function(e,t,r,i,s,o,n,a){var c=V();try{return z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},zj:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Lf:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Cd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},Uc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},rf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},Eh:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Vg:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},hc:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},ne:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},dd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},bg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},sj:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Ej:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},ea:function(e,t,r,i,s,o,n,a,c){var h=V();try{return z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Ab:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},vd:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Oj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},cj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},df:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ce:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},zf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},L:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{return z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},yf:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Yg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},ck:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},Zg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w){var b=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w)}catch(e){if(G(b),e!==e+0)throw e;gt(1,0)}},vb:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Rh:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T){var P=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T)}catch(e){if(G(P),e!==e+0)throw e;gt(1,0)}},Cf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P){var C=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P)}catch(e){if(G(C),e!==e+0)throw e;gt(1,0)}},fe:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},La:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Nd:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Rd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T){var P=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T)}catch(e){if(G(P),e!==e+0)throw e;gt(1,0)}},id:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O){var A=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O)}catch(e){if(G(A),e!==e+0)throw e;gt(1,0)}},wd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},Ob:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},_h:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},fd:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},bf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},wf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},hh:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},ye:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k){var D=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k)}catch(e){if(G(D),e!==e+0)throw e;gt(1,0)}},Ae:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D){var O=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D)}catch(e){if(G(O),e!==e+0)throw e;gt(1,0)}},zc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},ok:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},Gg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D){var O=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D)}catch(e){if(G(O),e!==e+0)throw e;gt(1,0)}},nc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},Dg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F){var R=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F)}catch(e){if(G(R),e!==e+0)throw e;gt(1,0)}},Fg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R){var L=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R)}catch(e){if(G(L),e!==e+0)throw e;gt(1,0)}},ke:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},pk:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T){var P=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T)}catch(e){if(G(P),e!==e+0)throw e;gt(1,0)}},Th:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C){var k=V();try{return z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C)}catch(e){if(G(k),e!==e+0)throw e;gt(1,0)}},ci:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Xf:function(e,t,r,i,s,o,n){var a=V();try{return z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},re:function(e,t,r,i,s,o){var n=V();try{return z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},kc:function(e,t,r){var i=V();try{return z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},od:function(e,t,r,i){var s=V();try{return z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},$f:function(e){var t=V();try{return z(e)()}catch(e){if(G(t),e!==e+0)throw e;return gt(1,0),0n}},Zf:function(e,t,r,i,s){var o=V();try{return z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;return gt(1,0),0n}},B:function(e){var t=V();try{z(e)()}catch(e){if(G(t),e!==e+0)throw e;gt(1,0)}},Id:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Ge:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Jd:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Uf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},ub:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},ad:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Gh:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Wh:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Ga:function(e,t,r,i){var s=V();try{z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},lj:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Hb:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Sb:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ec:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Wf:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Jb:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},rc:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ai:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},$h:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},Ek:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},oe:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C){var k=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C)}catch(e){if(G(k),e!==e+0)throw e;gt(1,0)}},vc:function(e,t,r){var i=V();try{z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},fb:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Vc:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ve:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},kd:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Db:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Pf:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ck:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Mc:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},pe:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Qa:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Cb:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ib:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},td:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Vf:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},d:function(e,t){var r=V();try{z(e)(t)}catch(e){if(G(r),e!==e+0)throw e;gt(1,0)}},v:function(e,t,r){var i=V();try{z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},V:function(e,t,r,i){var s=V();try{z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},za:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Ja:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},ak:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},eb:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Qh:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},_c:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},gd:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},xf:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Lc:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Qd:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},pc:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},yc:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},jf:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ze:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},le:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Uj:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},$a:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Qj:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},de:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Eg:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},pd:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},X:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},xc:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ke:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Xj:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},jb:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Tg:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},mg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},lg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k){var D=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k)}catch(e){if(G(D),e!==e+0)throw e;gt(1,0)}},Zi:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},K:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},zh:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},cb:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},me:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},w:function(e,t,r,i){var s=V();try{z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},Kb:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Qb:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},oh:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},sb:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},D:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},mk:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},mh:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ue:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},T:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},ij:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},$d:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Lb:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},cf:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},tc:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},nk:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},e:function(e,t,r){var i=V();try{z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},p:function(e,t,r,i){var s=V();try{z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},x:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},_:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Ra:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ub:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Aa:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Mf:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},gb:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Of:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},hg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Re:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},uk:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},$g:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Sh:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Oc:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Oh:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Od:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},S:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},vj:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ic:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ja:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Qi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Sc:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Td:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},rd:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ma:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},U:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},wa:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Cj:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Yd:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},ya:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},lb:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Hd:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},jg:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Nb:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Sf:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},f:function(e,t,r,i){var s=V();try{z(e)(t,r,i)}catch(e){if(G(s),e!==e+0)throw e;gt(1,0)}},G:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},da:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},Pb:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Oa:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},kj:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Ni:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},yh:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Kg:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Qf:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},vg:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Bg:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},sk:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},qf:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Ri:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Sa:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},$i:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Pi:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},gh:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Ef:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},ac:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ei:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},xk:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},qa:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},zb:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ti:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},va:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},hd:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},jc:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},Hj:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},_i:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},Va:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},jh:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},kk:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},ig:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},k:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},J:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},aa:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},ce:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Hh:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Mh:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},kg:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Qg:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},oc:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},aj:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ga:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},bb:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},fc:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Vd:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Ui:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},wg:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},_g:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x){var T=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x)}catch(e){if(G(T),e!==e+0)throw e;gt(1,0)}},jk:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},o:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},N:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},Ca:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},bd:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Hc:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Fj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Og:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},_d:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Rc:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Hg:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Yc:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Wj:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Ee:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Oe:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},th:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Jg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},db:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},We:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},t:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},fa:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},tf:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Mg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},se:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},sh:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},md:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},bi:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},rk:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},vf:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},fk:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},Le:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},mc:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},H:function(e,t,r,i,s,o,n,a){var c=V();try{z(e)(t,r,i,s,o,n,a)}catch(e){if(G(c),e!==e+0)throw e;gt(1,0)}},bj:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},Rj:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},gj:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},hj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},fi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b){var E=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b)}catch(e){if(G(E),e!==e+0)throw e;gt(1,0)}},we:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},hf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},W:function(e,t,r,i,s,o,n,a,c){var h=V();try{z(e)(t,r,i,s,o,n,a,c)}catch(e){if(G(h),e!==e+0)throw e;gt(1,0)}},ab:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},tg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},sg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},If:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},mf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Ji:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},ua:function(e,t,r,i,s,o,n,a,c,h){var l=V();try{z(e)(t,r,i,s,o,n,a,c,h)}catch(e){if(G(l),e!==e+0)throw e;gt(1,0)}},ph:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},xd:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},ek:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},nb:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},na:function(e,t,r,i,s,o,n,a,c,h,l){var d=V();try{z(e)(t,r,i,s,o,n,a,c,h,l)}catch(e){if(G(d),e!==e+0)throw e;gt(1,0)}},Bh:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},ej:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},fj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S){var w=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S)}catch(e){if(G(w),e!==e+0)throw e;gt(1,0)}},kf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Ka:function(e,t,r,i,s,o,n,a,c,h,l,d){var u=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d)}catch(e){if(G(u),e!==e+0)throw e;gt(1,0)}},Vj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},qe:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},og:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},wb:function(e,t,r,i,s,o,n,a,c,h,l,d,u){var p=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u)}catch(e){if(G(p),e!==e+0)throw e;gt(1,0)}},Ac:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},pg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x){var T=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x)}catch(e){if(G(T),e!==e+0)throw e;gt(1,0)}},Dk:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},Gc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p){var f=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p)}catch(e){if(G(f),e!==e+0)throw e;gt(1,0)}},Zh:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},Xb:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){var v=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f)}catch(e){if(G(v),e!==e+0)throw e;gt(1,0)}},te:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y){var S=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y)}catch(e){if(G(S),e!==e+0)throw e;gt(1,0)}},Wg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C){var k=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C)}catch(e){if(G(k),e!==e+0)throw e;gt(1,0)}},Xg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P){var C=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P)}catch(e){if(G(C),e!==e+0)throw e;gt(1,0)}},ng:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},Qc:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){var g=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v)}catch(e){if(G(g),e!==e+0)throw e;gt(1,0)}},rg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){var m=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g)}catch(e){if(G(m),e!==e+0)throw e;gt(1,0)}},of:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y){var S=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y)}catch(e){if(G(S),e!==e+0)throw e;gt(1,0)}},pf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},qg:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T){var P=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T)}catch(e){if(G(P),e!==e+0)throw e;gt(1,0)}},nf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C){var k=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C)}catch(e){if(G(k),e!==e+0)throw e;gt(1,0)}},Mi:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R,L,M,B,I,U,W){var _=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R,L,M,B,I,U,W)}catch(e){if(G(_),e!==e+0)throw e;gt(1,0)}},Uh:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){var y=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m)}catch(e){if(G(y),e!==e+0)throw e;gt(1,0)}},oj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R){var L=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R)}catch(e){if(G(L),e!==e+0)throw e;gt(1,0)}},pj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R){var L=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F,R)}catch(e){if(G(L),e!==e+0)throw e;gt(1,0)}},qj:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F){var R=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O,A,F)}catch(e){if(G(R),e!==e+0)throw e;gt(1,0)}},ug:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w){var b=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w)}catch(e){if(G(b),e!==e+0)throw e;gt(1,0)}},lf:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E){var x=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E)}catch(e){if(G(x),e!==e+0)throw e;gt(1,0)}},Ii:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x){var T=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x)}catch(e){if(G(T),e!==e+0)throw e;gt(1,0)}},Li:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P){var C=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P)}catch(e){if(G(C),e!==e+0)throw e;gt(1,0)}},Ki:function(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k){var D=V();try{z(e)(t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k)}catch(e){if(G(D),e!==e+0)throw e;gt(1,0)}},nd:function(e,t,r,i,s,o,n){var a=V();try{z(e)(t,r,i,s,o,n)}catch(e){if(G(a),e!==e+0)throw e;gt(1,0)}},_f:function(e,t,r,i,s){var o=V();try{z(e)(t,r,i,s)}catch(e){if(G(o),e!==e+0)throw e;gt(1,0)}},Zc:function(e,t,r,i,s,o){var n=V();try{z(e)(t,r,i,s,o)}catch(e){if(G(n),e!==e+0)throw e;gt(1,0)}},gi:function(e,t,r){var i=V();try{z(e)(t,r)}catch(e){if(G(i),e!==e+0)throw e;gt(1,0)}},Q:e=>e,oi:or};return ur=await async function(){function e(e,r){return function(e){dt=e.Ik,t._BitbybitOcct_Init=e.Jk,ut=e.Kk,pt=e.Mk,ft=e.Nk,vt=e.Ok,gt=e.Pk,mt=e.Qk,yt=e.Rk,St=e.Sk,wt=e.Tk,bt=e.Uk,Et=e.Vk,xt=e.Wk,Tt=e.Gk,Pt=e.Lk}(ur=e.exports),M(),ur}var r,i={a:pr};return t.instantiateWasm?new Promise(((r,s)=>{t.instantiateWasm(i,((t,i)=>{r(e(t))}))})):(D??=t.locateFile?(r="bitbybit-dev-occt.dec37f82.wasm",t.locateFile?t.locateFile(r,u):u+r):new URL(s(558),s.b).href,e((await I(f,D,i)).instance))}(),function e(){function r(){t.calledRun=!0,F||(L=!0,t.noFSInit||ye.initialized||ye.init(),ae.init(),ur.Hk(),ye.ignorePermissions=!1,g?.(t),t.onRuntimeInitialized?.(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),_.push(e);var e;W(_)}())}ue>0?pe=e:(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),N.push(e);var e;W(N)}(),ue>0?pe=e:t.setStatus?(t.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>t.setStatus("")),1),r()}),1)):r())}(),L?t:new Promise(((e,t)=>{g=e,m=t}))};class Lt{constructor(e){this.occ=e,this.hashesFromPreviousRun={},this.usedHashes={},this.argCache={}}cleanAllCache(){Object.keys(this.argCache).forEach((e=>{if(this.argCache[e])try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.isShape(e)&&(this.occ.BRepTools_Clean_Force(e,!0),this.occ.BRepTools_CleanGeometry(e)),e.delete()}catch(e){}})):(this.isShape(t)&&(this.occ.BRepTools_Clean_Force(t,!0),this.occ.BRepTools_CleanGeometry(t)),t.delete()))}catch(e){}})),this.argCache={},this.usedHashes={},this.hashesFromPreviousRun={}}cleanCacheForHash(e){if(this.argCache[e])try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.isShape(e)&&(this.occ.BRepTools_Clean_Force(e,!0),this.occ.BRepTools_CleanGeometry(e)),e.delete()}catch(e){}})):(this.isShape(t)&&(this.occ.BRepTools_Clean_Force(t,!0),this.occ.BRepTools_CleanGeometry(t)),t.delete()))}catch(e){}delete this.argCache[e],delete this.usedHashes[e],delete this.hashesFromPreviousRun[e]}cleanUpCache(){const e=Object.keys(this.usedHashes),t=Object.keys(this.hashesFromPreviousRun);let r=[];t.length>0&&(r=t.filter((t=>!e.includes(t)))),r.length>0&&r.forEach((e=>{if(this.argCache[e]){try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.isShape(e)&&(this.occ.BRepTools_Clean_Force(e,!0),this.occ.BRepTools_CleanGeometry(e)),e.delete()}catch(e){}})):(this.isShape(t)&&(this.occ.BRepTools_Clean_Force(t,!0),this.occ.BRepTools_CleanGeometry(t)),t.delete()))}catch(e){}delete this.argCache[e]}delete this.usedHashes[e]})),this.hashesFromPreviousRun=Object.assign({},this.usedHashes)}isOCCTObject(e){return null!=e&&!Array.isArray(e)&&void 0!==e.$$||Array.isArray(e)&&e.length>0&&void 0!==e[0].$$}isShape(e){return null!=e&&void 0!==e.$$&&"function"==typeof e.ShapeType}isEntityHandle(e){return null!=e&&void 0!==e.$$&&"function"!=typeof e.ShapeType}cacheOp(e,t){let r=null;const i=this.computeHash(e);this.usedHashes[i]=i,this.hashesFromPreviousRun[i]=i;const s=this.checkCache(i);if(s)this.isOCCTObject(s)?(r=s,r.hash=s.hash):s.value&&(r=s.value);else if(r=t(),Array.isArray(r)&&this.isOCCTObject(r))r.forEach(((t,r)=>{const i=this.computeHash(Object.assign(Object.assign({},e),{index:r}));t.hash=i,this.addToCache(i,t)}));else if(this.isOCCTObject(r))r.hash=i,this.addToCache(i,r);else if(r&&r.compound&&r.data&&r.shapes&&r.shapes.length>0){const t=r,s=this.computeHash(Object.assign(Object.assign({},e),{index:"compound"}));t.compound.hash=s,this.addToCache(s,t.compound),t.shapes.forEach(((t,r)=>{const i=this.computeHash(Object.assign(Object.assign({},e),{index:r}));t.shape.hash=i,this.addToCache(i,t.shape)})),this.addToCache(i,{value:t})}else if(r&&"object"==typeof r&&"success"in r&&"document"in r&&this.isEntityHandle(r.document)){const t=this.computeHash(Object.assign(Object.assign({},e),{index:"document"}));r.document.hash=t,this.addToCache(t,r.document),this.addToCache(i,{value:r})}else this.addToCache(i,{value:r});return r}checkCache(e){const t=this.argCache[e];if(!t)return null;if(this.isOCCTObject(t))if(Array.isArray(t))for(const r of t)try{if(r.IsNull&&r.IsNull())return delete this.argCache[e],null}catch(t){return delete this.argCache[e],null}else try{if(t.IsNull&&t.IsNull())return delete this.argCache[e],null}catch(t){return delete this.argCache[e],null}return t}addToCache(e,t){const r=t;return null!==r&&"object"==typeof r&&(r.hash=e),this.argCache[e]=r,e}computeHash(e,t){let r=JSON.stringify(e);r=r.replace(/("ptr":(-?[0-9]*?),)/g,""),r=r.replace(/("ptr":(-?[0-9]*))/g,""),r.includes("ptr")&&console.error("YOU DONE MESSED UP YOUR REGEX.");const i=Math.random.toString()+r;return t?i:this.stringToHash(i)}stringToHash(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}remove(e,t){return e.filter((e=>e.hash!==t.hash||e.ptr!==t.ptr))}}let Mt,Bt,It,Ut,Wt;const _t={};function Nt(e,t){let r="";return(null==t?void 0:t.inputs)&&(r=`Input values were: {${Object.entries(t.inputs).map((([e,t])=>`${e}: ${JSON.stringify(t)}`)).join(",")}}. `),`OCCT computation failed. ${e} While executing function ${(null==t?void 0:t.functionName)?`- ${t.functionName}`:""}. ${r}`}class Ht{static distributeBetweenBounds(e,t,r,i=!1){const s=[];let o=r;for(i&&s.push(o);o>t;)o-=e,s.push(o);return s}static computeSideA(e,t){const r=e*Math.PI/180,i=t/Math.cos(r),s=Math.pow(i,2)-Math.pow(t,2);return Math.sqrt(s)}static computeSideAFromHypotenuseAndAngle(e,t){const r=e*Math.PI/180;return t*Math.sin(r)}static computeHypotenuse(e,t){return t/Math.cos(e*Math.PI/180)}}var Gt,Vt,zt,jt,$t,qt;!function(e){e.low="low",e.middle="middle",e.high="high"}(Gt||(Gt={}));class Yt{constructor(){this.lod=Gt.low}}class Xt{}class Zt{constructor(e,t,r,i,s,o,n,a,c){this.swirl=.6,this.nrOfDivisions=10,this.addRadiusNarrow=.4,this.addRadiusWide=.2,this.addMiddleHeight=1.6,this.addTopHeight=1.5,this.thickness=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.swirl=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.addRadiusNarrow=r),void 0!==i&&(this.addRadiusWide=i),void 0!==s&&(this.addMiddleHeight=s),void 0!==o&&(this.addTopHeight=o),void 0!==n&&(this.thickness=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c)}}class Qt{constructor(){this.type="parametric-model",this.name="serenitySwirl"}}class Jt{}class Kt{constructor(e,t,r,i,s,o,n,a,c,h,l,d){this.profilePoints=[[2,0,0],[4,5,0],[1.5,10,0],[3,14,0]],this.nrOfSides=6,this.nrOfVerticalArches=4,this.archCenterThickness=.8,this.edgesThickness=.2,this.thickness=1,this.baseHeight=.4,this.patchHoles=!0,this.lod=Gt.high,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.nrOfSides=e),void 0!==t&&(this.nrOfVerticalArches=t),void 0!==r&&(this.archCenterThickness=r),void 0!==i&&(this.edgesThickness=i),void 0!==s&&(this.thickness=s),void 0!==o&&(this.baseHeight=o),void 0!==n&&(this.patchHoles=n),void 0!==a&&(this.lod=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.origin=h),void 0!==l&&(this.direction=l),void 0!==d&&(this.scale=d)}}class er{constructor(){this.type="parametric-model",this.name="arabicArchway"}}class tr{}class rr{}class ir{}class sr{constructor(e,t,r,i,s,o,n,a){this.textHeading="LOVE YOU",this.textName="NORA",this.fullModel=!0,this.thickness=6,this.decorationThickness=1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textHeading=e),void 0!==t&&(this.textName=t),void 0!==r&&(this.fullModel=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.decorationThickness=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.origin=n),void 0!==a&&(this.direction=a)}}class or{constructor(){this.type="parametric-model",this.name="eternalLove"}}class nr{}class ar{constructor(e,t,r,i,s,o,n,a,c,h,l,d){this.height=6,this.radiusBottom=4,this.radiusTopOffset=2,this.thickness=.6,this.fillet=.2,this.nrOfHandles=1,this.handleDist=2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.fillet=s),void 0!==o&&(this.nrOfHandles=o),void 0!==n&&(this.handleDist=n),void 0!==a&&(this.precision=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.scale=h),void 0!==l&&(this.origin=l),void 0!==d&&(this.direction=d)}}class cr{constructor(){this.type="parametric-model",this.name="calmCup"}}class hr{}class lr{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w){this.height=8,this.radiusBottom=4,this.radiusTopOffset=2,this.radiusMidOffset=2,this.rotationTopAngle=20,this.rotationMidAngle=20,this.nrSkinCellsVertical=5,this.nrSkinCellsHorizontal=10,this.nrSkinCellDivisionsTop=1,this.nrSkinCellDivisionsBottom=3,this.skinCellOuterHeight=.4,this.skinCellInnerHeight=.3,this.skinCellBottomHeight=.4,this.skinCellTopHeight=.4,this.thickness=.6,this.bottomThickness=1,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.radiusMidOffset=i),void 0!==s&&(this.rotationTopAngle=s),void 0!==o&&(this.rotationMidAngle=o),void 0!==n&&(this.nrSkinCellsVertical=n),void 0!==a&&(this.nrSkinCellsHorizontal=a),void 0!==c&&(this.nrSkinCellDivisionsTop=c),void 0!==h&&(this.nrSkinCellDivisionsBottom=h),void 0!==l&&(this.skinCellOuterHeight=l),void 0!==d&&(this.skinCellInnerHeight=d),void 0!==u&&(this.skinCellBottomHeight=u),void 0!==p&&(this.skinCellTopHeight=p),void 0!==f&&(this.thickness=f),void 0!==v&&(this.bottomThickness=v),void 0!==g&&(this.precision=g),void 0!==m&&(this.rotation=m),void 0!==y&&(this.scale=y),void 0!==S&&(this.origin=S),void 0!==w&&(this.direction=w)}}class dr{constructor(){this.type="parametric-model",this.name="dragonCup"}}class ur{}class pr{}class fr{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){this.heightBottom=5,this.heightTop=16,this.widthBack=25,this.widthFront=10,this.length=16,this.backOffset=6,this.thickness=.4,this.applyOrnaments=!1,this.filletRadius=2,this.phoneHeight=16.8,this.phoneWidth=7.8,this.phoneThickness=.7,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.heightBottom=e),void 0!==t&&(this.heightTop=t),void 0!==r&&(this.widthBack=r),void 0!==i&&(this.widthFront=i),void 0!==s&&(this.length=s),void 0!==o&&(this.backOffset=o),void 0!==n&&(this.thickness=n),void 0!==a&&(this.applyOrnaments=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.phoneHeight=h),void 0!==l&&(this.phoneWidth=l),void 0!==d&&(this.phoneThickness=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class vr{constructor(){this.type="parametric-model",this.name="phoneNest"}}class gr extends Xt{}class mr{}class yr extends Xt{}class Sr{}class wr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class br{}class Er{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y){this.textTop="Pepper",this.textFront="For Your Spicy Needs",this.nrSides=4,this.nrOffsets=1,this.height=6,this.radiusBase=4,this.radiusOffset=2,this.coverHeight=1,this.baseHeight=1,this.thickness=.6,this.ornamentalThickness=.1,this.nrOrnamnetsPerSide=10,this.invertOrnaments=!1,this.fillet=.2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textTop=e),void 0!==t&&(this.textFront=t),void 0!==r&&(this.nrSides=r),void 0!==i&&(this.nrOffsets=i),void 0!==s&&(this.height=s),void 0!==o&&(this.coverHeight=o),void 0!==n&&(this.baseHeight=n),void 0!==a&&(this.radiusBase=a),void 0!==c&&(this.radiusOffset=c),void 0!==h&&(this.thickness=h),void 0!==l&&(this.ornamentalThickness=l),void 0!==d&&(this.nrOrnamnetsPerSide=d),void 0!==u&&(this.invertOrnaments=u),void 0!==p&&(this.fillet=p),void 0!==f&&(this.precision=f),void 0!==v&&(this.rotation=v),void 0!==g&&(this.scale=g),void 0!==m&&(this.origin=m),void 0!==y&&(this.direction=y)}}class xr{constructor(){this.type="parametric-model",this.name="spicyBox"}}class Tr{}class Pr{}class Cr{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T){this.title="Your Name",this.subtitle="And Message",this.includeLogo=!0,this.thickness=.4,this.kerf=.01,this.phoneWidth=8,this.phoneHeight=16,this.phoneThickness=1,this.backLength=10,this.angle=20,this.offsetAroundPhone=.5,this.penShelf=1,this.phoneLockHeight=.5,this.filletRadius=.3,this.includePattern=!1,this.densityPattern=.4,this.holesForWire=!0,this.wireInputThickness=1.5,this.includeModel=!0,this.includeDrawings=!0,this.spacingDrawings=.5,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.title=e),void 0!==t&&(this.subtitle=t),void 0!==r&&(this.includeLogo=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.kerf=s),void 0!==o&&(this.phoneWidth=o),void 0!==n&&(this.phoneHeight=n),void 0!==a&&(this.phoneThickness=a),void 0!==c&&(this.backLength=c),void 0!==h&&(this.angle=h),void 0!==l&&(this.offsetAroundPhone=l),void 0!==d&&(this.penShelf=d),void 0!==u&&(this.phoneLockHeight=u),void 0!==p&&(this.filletRadius=p),void 0!==f&&(this.includePattern=f),void 0!==v&&(this.densityPattern=v),void 0!==g&&(this.holesForWire=g),void 0!==m&&(this.wireInputThickness=m),void 0!==y&&(this.includeModel=y),void 0!==S&&(this.includeDrawings=S),void 0!==w&&(this.spacingDrawings=w),void 0!==b&&(this.rotation=b),void 0!==E&&(this.origin=E),void 0!==x&&(this.direction=x),void 0!==T&&(this.scale=T)}}class kr{}class Dr{constructor(){this.cutWiresColor="#000000",this.engravingWiresColor="#0000ff",this.fileName="bitbybit-droplets-phone-holder",this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7}}class Or{constructor(){this.fileName="bitbybit-droplets-phone-holder",this.adjustYZ=!0}}class Ar{constructor(){this.type="parametric-model",this.name="dropletsPhoneHolder"}}class Fr{}class Rr{}class Lr{}class Mr{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m,y,S,w,b,E,x,T,P,C,k,D,O){this.widthFirstWing=4,this.lengthFirstWing=10,this.terraceWidth=3,this.widthSecondWing=5,this.lengthSecondWing=10,this.heightWalls=3,this.roofAngleFirstWing=15,this.roofAngleSecondWing=25,this.roofOffset=.5,this.roofInsideOverhang=.5,this.roofMaxDistAttachmentBeams=.8,this.roofAttachmentBeamWidth=.2,this.roofAttachmentBeamHeight=.05,this.roofOutsideOverhang=.5,this.columnSize=.3,this.ceilingBeamHeight=.25,this.ceilingBeamWidth=.1,this.nrCeilingBeamsBetweenColumns=3,this.distBetweenColumns=2,this.floorHeight=.1,this.groundLevel=.6,this.facadePanelThickness=.05,this.windowWidthOffset=.1,this.windowHeightOffset=.2,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05,this.lod=Gt.high,this.skinOpacity=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.widthFirstWing=e),void 0!==t&&(this.lengthFirstWing=t),void 0!==r&&(this.terraceWidth=r),void 0!==i&&(this.widthSecondWing=i),void 0!==s&&(this.lengthSecondWing=s),void 0!==o&&(this.heightWalls=o),void 0!==n&&(this.roofAngleFirstWing=n),void 0!==a&&(this.roofAngleSecondWing=a),void 0!==c&&(this.roofOffset=c),void 0!==h&&(this.roofInsideOverhang=h),void 0!==l&&(this.roofMaxDistAttachmentBeams=l),void 0!==d&&(this.roofAttachmentBeamWidth=d),void 0!==u&&(this.roofAttachmentBeamHeight=u),void 0!==p&&(this.roofOutsideOverhang=p),void 0!==f&&(this.columnSize=f),void 0!==v&&(this.ceilingBeamHeight=v),void 0!==g&&(this.ceilingBeamWidth=g),void 0!==m&&(this.nrCeilingBeamsBetweenColumns=m),void 0!==y&&(this.distBetweenColumns=y),void 0!==S&&(this.floorHeight=S),void 0!==w&&(this.groundLevel=w),void 0!==b&&(this.facadePanelThickness=b),void 0!==E&&(this.windowWidthOffset=E),void 0!==x&&(this.windowHeightOffset=x),void 0!==T&&(this.windowFrameThickness=T),void 0!==P&&(this.windowGlassFrameThickness=P),void 0!==C&&(this.lod=C),void 0!==k&&(this.skinOpacity=k),void 0!==D&&(this.rotation=D),void 0!==O&&(this.origin=O)}}class Br{constructor(){this.type="parametric-model",this.name="zenHideout"}}class Ir{}class Ur{}class Wr{constructor(){this.wallThickness=.4,this.facadePanelThickness=.05,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThckness=.05,this.height=3,this.lengthFirst=1,this.lengthSecond=2,this.rotation=0}}class _r{constructor(){this.thickness=.3,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThickness=.05,this.height=3,this.width=1,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0]}}class Nr extends _r{}class Hr extends Wr{}class Gr{constructor(){this.name="sandwitch-panel",this.createWindow=!0,this.createInnerPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelWidth=.4,this.exteriorPanelHeight=3,this.exteriorPanelThickness=.05,this.exteriorPanelBottomOffset=0,this.interiorPanelWidth=.4,this.interiorPanelHeight=3,this.interiorPanelThickness=.05,this.interiorPanelBottomOffset=0,this.windowWidthOffset=0,this.windowHeightOffset=0,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05}}class Vr{constructor(){this.name="sandwitch-panel-flex",this.createInteriorPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelThickness=.05,this.interiorPanelThickness=.05,this.interiorPanelPolygonPoints=[],this.exteriorPanelPolygonPoints=[]}}class zr extends Gr{}class jr extends Vr{}class $r{}class qr{}class Yr{}class Xr{}class Zr{}class Qr{}class Jr{constructor(){this.invert=!1,this.widthFirstLanding=1,this.widthSecondLanding=1,this.lengthFirstWing=2,this.lengthSecondWing=1,this.maxWishedStepHeight=.25,this.stepHeightWidthProportion=1.35,this.totalHeight=1,this.rotation=0,this.origin=[0,0,0]}}class Kr extends Jr{}class ei{}class ti{constructor(){this.name="roof-cover",this.roofAngle=15,this.roofLength=3,this.roofWidth=3,this.roofOutsideOverhang=.5,this.roofInsideOverhang=1,this.roofOverhangFacade=.1,this.roofThickness=.05,this.roofCoverHeight=.3,this.rotation=0,this.lod=Gt.high,this.center=[0,0,0],this.direction=[0,1,0]}}class ri extends ti{}class ii{}class si{}class oi{constructor(){this.widthFirstWing=1,this.widthSecondWing=2,this.lengthStairFirstWing=2,this.lengthStairSecondWing=1,this.lengthWallFirstWing=2,this.lengthWallSecondWing=1,this.facadePanelThickness=.05,this.wallThickness=3,this.wallHeightExterior=3,this.wallHeightInterior=3,this.windowFrameOffsetTop=.3,this.windowFrameThickness=.1,this.glassFrameThickness=.05,this.doorWidth=1,this.windowWidthOffset=.3,this.stairTotalHeight=1,this.createStair=!1,this.flipDirection=!1,this.rotation=0,this.origin=[0,0,0]}}class ni{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.5,this.holeDiameter=1.5,this.holeDistToBottom=2.5,this.stickLength=1.2,this.stickDiameter=.5,this.baseAttachmentHeight=2,this.roofOverhang=1,this.rotation=0,this.chimneyHeight=1,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.holeDiameter=s),void 0!==o&&(this.holeDistToBottom=o),void 0!==n&&(this.stickLength=n),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.rotation=l),void 0!==d&&(this.chimneyHeight=d),void 0!==u&&(this.origin=u)}}class ai{constructor(){this.type="parametric-model",this.name="wingtipVilla"}}class ci{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.3,this.holeDiameter=1.2,this.holeDistToBottom=2.5,this.stickLength=.9,this.stickDiameter=.3,this.baseAttachmentHeight=2,this.roofOverhang=.5,this.roofAngle=20,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.holeDiameter=s),void 0!==o&&(this.holeDistToBottom=o),void 0!==n&&(this.stickLength=n),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.roofAngle=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.origin=u)}}class hi{constructor(){this.type="parametric-model",this.name="chirpyChalet"}}class li{}class di{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f){this.sittingHeight=.45,this.backRestOffset=.1,this.backRestHeight=.7,this.width=.45,this.length=.45,this.thickness=.05,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.sittingHeight=e),void 0!==t&&(this.backRestOffset=t),void 0!==r&&(this.backRestHeight=r),void 0!==i&&(this.width=i),void 0!==s&&(this.length=s),void 0!==o&&(this.thickness=o),void 0!==n&&(this.nrOrnamentPlanks=n),void 0!==a&&(this.ornamentDepth=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.precision=h),void 0!==l&&(this.drawEdges=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.scale=u),void 0!==p&&(this.origin=p),void 0!==f&&(this.direction=f)}}class ui{constructor(){this.type="parametric-model",this.name="snakeChair"}}class pi extends Xt{}class fi{}class vi extends Xt{}class gi{}class mi{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class yi{}class Si{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v){this.height=.74,this.width=1,this.length=2,this.topThickness=.02,this.topOffset=.03,this.bottomThickness=.05,this.minFillet=.2,this.radiusLegTop=.03,this.radiusLegBottom=.01,this.nrLegPairs=2,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.topThickness=i),void 0!==s&&(this.topOffset=s),void 0!==o&&(this.bottomThickness=o),void 0!==n&&(this.minFillet=n),void 0!==a&&(this.radiusLegTop=a),void 0!==c&&(this.radiusLegBottom=c),void 0!==h&&(this.nrLegPairs=h),void 0!==l&&(this.precision=l),void 0!==d&&(this.drawEdges=d),void 0!==u&&(this.rotation=u),void 0!==p&&(this.scale=p),void 0!==f&&(this.origin=f),void 0!==v&&(this.direction=v)}}class wi{constructor(){this.type="parametric-model",this.name="elegantTable"}}class bi extends Xt{}class Ei{}class xi extends Xt{}class Ti extends Xt{}class Pi{constructor(){this.index=0}}class Ci{}class ki{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Di{}class Oi{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g,m){this.height=.4,this.width=1,this.length=1.2,this.chamfer=.01,this.topThickness=.05,this.topGlassOffset=.2,this.glassThickness=.005,this.glassHolderLength=.02,this.shelfTopOffset=.15,this.shelfThickness=.03,this.legWidth=.1,this.legDepth=.05,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.chamfer=i),void 0!==s&&(this.topThickness=s),void 0!==o&&(this.topGlassOffset=o),void 0!==n&&(this.glassThickness=n),void 0!==a&&(this.glassHolderLength=a),void 0!==c&&(this.shelfTopOffset=c),void 0!==h&&(this.shelfThickness=h),void 0!==l&&(this.legWidth=l),void 0!==d&&(this.legDepth=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Ai{constructor(){this.type="parametric-model",this.name="goodCoffeeTable"}}class Fi extends Xt{}class Ri{}class Li extends Xt{}class Mi extends Xt{}class Bi extends Xt{}class Ii{constructor(){this.index=0}}class Ui{}class Wi{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class _i{}class Ni{constructor(e,t,r,i,s,o,n,a,c,h,l,d,u,p,f,v,g){this.height=.74,this.width=1,this.length=2,this.supportLength=.5,this.shelfHeight=.2,this.thickness=.05,this.glassThickness=.005,this.glassOffset=0,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.supportLength=i),void 0!==s&&(this.shelfHeight=s),void 0!==o&&(this.thickness=o),void 0!==n&&(this.glassThickness=n),void 0!==a&&(this.glassOffset=a),void 0!==c&&(this.nrOrnamentPlanks=c),void 0!==h&&(this.ornamentDepth=h),void 0!==l&&(this.filletRadius=l),void 0!==d&&(this.precision=d),void 0!==u&&(this.drawEdges=u),void 0!==p&&(this.rotation=p),void 0!==f&&(this.scale=f),void 0!==v&&(this.origin=v),void 0!==g&&(this.direction=g)}}class Hi{constructor(){this.type="parametric-model",this.name="snakeTable"}}class Gi extends Xt{}class Vi{}class zi extends Xt{}class ji{}class $i{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}!function(e){e.Aboreto="Aboreto",e.Bungee="Bungee",e.IndieFlower="IndieFlower",e.Lugrasimo="Lugrasimo",e.Orbitron="Orbitron",e.Roboto="Roboto",e.RobotoSlab="RobotoSlab",e.Silkscreen="Silkscreen",e.Tektur="Tektur",e.Workbench="Workbench"}(Vt||(Vt={})),function(e){e.Regular="Regular",e.Black="Black",e.Bold="Bold",e.ExtraBold="ExtraBold",e.Medium="Medium",e.SemiBold="SemiBold",e.BlackItalic="BlackItalic",e.BoldItalic="BoldItalic",e.Italic="Italic",e.Light="Light",e.LightItalic="LightItalic",e.MediumItalic="MediumItalic",e.Thin="Thin",e.ThinItalic="ThinItalic",e.ExtraLight="ExtraLight"}(zt||(zt={})),function(e){e.separatedExtrusion="separatedExtrusion",e.integratedExtrusion="integratedExtrusion",e.cutout="cutout"}(jt||(jt={})),function(e){e.compound="compound",e.cutout="originalCutout",e.cutoutInsideCharacter="cutoutInsideCharacter"}($t||($t={})),function(e){e.leftTop="leftTop",e.leftMiddle="leftMiddle",e.leftBottom="leftBottom",e.centerTop="centerTop",e.centerMiddle="centerMiddle",e.centerBottom="centerBottom",e.rightTop="rightTop",e.rightMiddle="rightMiddle",e.rightBottom="rightBottom"}(qt||(qt={}));const qi=[{key:"Aboreto",variants:["Regular"]},{key:"Bungee",variants:["Regular"]},{key:"IndieFlower",variants:["Regular"]},{key:"Lugrasimo",variants:["Regular"]},{key:"Orbitron",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Roboto",variants:["Black","BlackItalic","Bold","BoldItalic","Italic","Light","LightItalic","Medium","MediumItalic","Regular","Thin","ThinItalic"]},{key:"RobotoSlab",variants:["Black","Bold","ExtraBold","ExtraLight","Light","Medium","Regular","SemiBold","Thin"]},{key:"Silkscreen",variants:["Bold","Regular"]},{key:"Tektur",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Workbench",variants:["Regular"]}];class Yi{constructor(e,t,r,i,s,o,n,a,c){this.text="bitbybit.dev",this.fontType=Vt.Roboto,this.fontVariant=zt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=qt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontType=t),void 0!==r&&(this.fontVariant=r),void 0!==i&&(this.fontSize=i),void 0!==s&&(this.height=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.origin=n),void 0!==a&&(this.direction=a),void 0!==c&&(this.originAlignment=c)}}class Xi{constructor(e,t,r,i,s,o,n,a){this.text="bitbybit.dev",this.fontUrl="https://git-cdn.bitbybit.dev/latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=qt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontUrl=t),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==s&&(this.rotation=s),void 0!==o&&(this.origin=o),void 0!==n&&(this.direction=n),void 0!==a&&(this.originAlignment=a)}}class Zi{constructor(e,t,r,i,s,o,n,a){this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=qt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.letterPaths=t),void 0!==r&&(this.fontSize=r),void 0!==i&&(this.height=i),void 0!==s&&(this.rotation=s),void 0!==o&&(this.origin=o),void 0!==n&&(this.direction=n),void 0!==a&&(this.originAlignment=a)}}class Qi{constructor(e,t,r,i,s,o,n,a,c,h,l,d){this.facePlanar=!1,this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=Vt.Roboto,this.fontVariant=zt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==s&&(this.fontType=s),void 0!==o&&(this.fontVariant=o),void 0!==n&&(this.fontSize=n),void 0!==a&&(this.height=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.originParamU=h),void 0!==l&&(this.originParamV=l),void 0!==d&&(this.originAlignment=d)}}class Ji{constructor(e,t,r,i,s,o,n,a,c,h,l){this.facePlanar=!1,this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://git-cdn.bitbybit.dev/latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==s&&(this.fontUrl=s),void 0!==o&&(this.fontSize=o),void 0!==n&&(this.height=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class Ki{constructor(e,t,r,i,s,o,n,a,c,h,l){this.facePlanar=!1,this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==s&&(this.letterPaths=s),void 0!==o&&(this.fontSize=o),void 0!==n&&(this.height=n),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class es{constructor(){this.type="parametric-model",this.name="text3d"}}class ts{constructor(){this.index=0}}class rs{}class is{}class ss{constructor(e,t,r,i,s,o,n,a,c,h){this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=Vt.Roboto,this.fontVariant=zt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.fontType=r),void 0!==i&&(this.fontVariant=i),void 0!==s&&(this.fontSize=s),void 0!==o&&(this.height=o),void 0!==n&&(this.rotation=n),void 0!==a&&(this.originParamU=a),void 0!==c&&(this.originParamV=c),void 0!==h&&(this.originAlignment=h)}}class os{constructor(e,t,r,i,s,o,n,a,c){this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://git-cdn.bitbybit.dev/latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.fontUrl=r),void 0!==i&&(this.fontSize=i),void 0!==s&&(this.height=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.originParamU=n),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class ns{constructor(e,t,r,i,s,o,n,a,c){this.faceTextVar=jt.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=qt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.letterPaths=r),void 0!==i&&(this.fontSize=i),void 0!==s&&(this.height=s),void 0!==o&&(this.rotation=o),void 0!==n&&(this.originParamU=n),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class as{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class cs{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class hs{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class ls{constructor(e,t,r,i){this.uNumber=10,this.vNumber=10,this.height=.2,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==i&&(this.height=i),void 0!==t&&(this.uNumber=t),void 0!==r&&(this.vNumber=r)}}class ds{constructor(e,t,r,i,s,o,n){this.uNumber=10,this.vNumber=5,this.defaultHeight=.2,this.affectMinHeight=0,this.affectMaxHeight=1,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==t&&(this.affectorPoints=t),void 0!==r&&(this.uNumber=r),void 0!==i&&(this.vNumber=i),void 0!==s&&(this.affectMinHeight=s),void 0!==o&&(this.affectMaxHeight=o),void 0!==n&&(this.precision=n)}}class us{constructor(){this.type="parametric-model",this.name="patternsFacePatternPyramidSimple"}}class ps{constructor(){this.index=0}}class fs{}class vs{}class gs{}class ms{}class ys{constructor(){this.faceIndex=0}}class Ss{constructor(){this.faceIndex=0,this.uIndex=0,this.vIndex=0}}class ws{constructor(){this.faceIndex=0,this.uIndex=0}}class bs{constructor(){this.faceIndex=0,this.vIndex=0}}class Es{}class xs{}var Ts,Ps,Cs;!function(e){e.wire="wire",e.face="face",e.solid="solid"}(Ts||(Ts={}));class ks{constructor(e,t,r,i){this.occtService=e,this.dependencies=r,this.occtAdv=t,this.base=i}wingtipVilla(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","chimneyHeight","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.chimneyHeight<=0?t=`chimney height can't be ${e.chimneyHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const r=e.baseAttachmentHeight,i=e.roofOverhang,s=e.chimneyHeight,o=(e.interiorWidth+2*e.thickness)/2,n=Ht.computeSideA(45,o),a=function(e,t){const r=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(r)}(n,o),c=e.thickness,h=[],l=t.shapes.wire.createPolygonWire({points:[[-o,-r-c,0],[o,-r-c,0],[o,e.interiorHeight,0],[0,e.interiorHeight+n,0],[-o,e.interiorHeight,0]].reverse()});h.push(l);const d=e.interiorLength+e.thickness,u=t.shapes.wire.createPolygonWire({points:[[-o,-c,d],[o,-c,d],[o,e.interiorHeight,d],[0,e.interiorHeight+n,d],[-o,e.interiorHeight,d]].reverse()});h.push(u);const p=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,d]});h.push(p);const f=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,d+c]});h.push(f);const v=t.shapes.face.createFaceFromWire({shape:f,planar:!0});h.push(v);const g=t.operations.extrude({shape:v,direction:[0,0,e.stickLength]}),m=t.shapes.solid.createBoxFromCorner({corner:[-o+c,-c,c],width:e.interiorWidth,length:e.interiorLength,height:c}),y=t.shapes.solid.createBoxFromCorner({corner:[-o,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),S=t.shapes.solid.createBoxFromCorner({corner:[o-c,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),w=t.shapes.solid.createBoxFromCorner({corner:[0,0,0],width:a+i,length:e.interiorLength+2*c+i,height:c}),b=t.shapes.solid.createBoxFromCorner({corner:[0,-c,0],width:a+i+c,length:e.interiorLength+2*c+i,height:c}),E=t.transforms.rotate({shape:w,angle:-45,axis:[0,0,1]});h.push(E);const x=t.transforms.translate({shape:E,translation:[0,e.interiorHeight+n,0]}),T=t.shapes.edge.getCornerPointsOfEdgesForShape({shape:x}),P=t.transforms.rotate({shape:b,angle:225,axis:[0,0,1]});h.push(P);const C=t.transforms.translate({shape:P,translation:T[3]}),k=t.shapes.face.createFaceFromWire({shape:l,planar:!0});h.push(k);const D=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),O=t.shapes.face.createFaceFromWire({shape:u,planar:!0});h.push(O);const A=t.operations.splitShapeWithShapes({shape:O,shapes:[p],nonDestructive:!0,localFuzzyTolerance:1e-4});h.push(...A),console.log(A);const F=t.shapes.face.getFace({shape:A[1],index:0});h.push(F);const R=t.operations.makeThickSolidSimple({shape:F,offset:-e.thickness}),L=function(e,t,r){const i=e.shapes.face.getFaces({shape:t})[3],s=e.shapes.face.getFaceCenterOfMass({shape:i}),o=e.transforms.scale3d({shape:i,scale:[.3,.3,.3],center:s}),n=e.shapes.edge.getCornerPointsOfEdgesForShape({shape:o}),a=n[0],c=n[1],h=n[2],l=n[3],d=Math.max(a[1],c[1],h[1],l[1]),u=[a[0],d+r,a[2]],p=[c[0],d+r,c[2]],f=[h[0],d+r,h[2]],v=[l[0],d+r,l[2]],g=e.shapes.wire.createPolygonWire({points:[a,c,h,l]}),m=e.shapes.wire.createPolygonWire({points:[u,p,f,v]}),y=e.operations.loft({shapes:[g,m],makeSolid:!0});return i.delete(),o.delete(),g.delete(),m.delete(),y}(t,x,s),M=[m,D,R,y,S,x,C,g,t.shapes.compound.makeCompound({shapes:[x,C]}),t.shapes.compound.makeCompound({shapes:[D,R,y,S]}),L],B=M.map(((r,i)=>{const s=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),I=t.shapes.compound.makeCompound({shapes:B});return M.forEach((e=>e.delete())),h.forEach((e=>e.delete())),{compound:I,shapes:B.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"wingtipVilla",roof:{compound:"8",shapes:["5","6"]},walls:{compound:"9",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"7"},chimney:{shape:"10"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}chirpyChalet(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","roofAngle","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const r=e.baseAttachmentHeight,i=e.roofOverhang,s=e.roofAngle,o=e.interiorWidth/2,n=e.interiorLength+2*e.thickness,a=Ht.computeSideA(s,n),c=Ht.computeSideA(s,n-e.thickness),h=function(e,t){const r=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(r)}(a,n),l=e.thickness,d=[],u=t.shapes.wire.createPolygonWire({points:[[-o,-r-l,0],[o,-r-l,0],[o,e.interiorHeight+c,0],[-o,e.interiorHeight+c,0]].reverse()});d.push(u);const p=e.interiorLength+e.thickness,f=t.shapes.wire.createPolygonWire({points:[[-o,-l,p],[o,-l,p],[o,e.interiorHeight,p],[-o,e.interiorHeight,p]].reverse()});d.push(f);const v=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,p]});d.push(v);const g=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,p+l]});d.push(g);const m=t.shapes.face.createFaceFromWire({shape:g,planar:!0});d.push(m);const y=t.operations.extrude({shape:m,direction:[0,0,e.stickLength]}),S=t.shapes.solid.createBoxFromCorner({corner:[-o,-l,l],width:e.interiorWidth,length:e.interiorLength,height:l}),w=t.shapes.wire.createPolygonWire({points:[[-o,-l,0],[-o,-l,p+l],[-o,e.interiorHeight,p+l],[-o,e.interiorHeight+a,0]].reverse()}),b=t.shapes.face.createFaceFromWire({shape:w,planar:!0}),E=t.operations.extrude({shape:b,direction:[-l,0,0]}),x=t.transforms.translate({shape:E,translation:[e.interiorWidth+l,0,0]}),T=t.shapes.solid.createBoxFromCorner({corner:[-o-l-i,0,0],width:e.interiorWidth+2*l+2*i,length:h+i,height:l}),P=t.transforms.rotate({shape:T,angle:s,axis:[1,0,0]});d.push(P);const C=t.transforms.translate({shape:P,translation:[0,e.interiorHeight+a,0]}),k=t.shapes.face.createFaceFromWire({shape:u,planar:!0});d.push(k);const D=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),O=t.shapes.face.createFaceFromWire({shape:f,planar:!0});d.push(O);const A=t.operations.splitShapeWithShapes({shape:O,shapes:[v],nonDestructive:!0,localFuzzyTolerance:1e-4});d.push(...A);const F=t.shapes.face.getFace({shape:A[1],index:0});d.push(F);const R=t.operations.makeThickSolidSimple({shape:F,offset:-e.thickness}),L=[S,D,R,E,x,C,y,t.shapes.compound.makeCompound({shapes:[C]}),t.shapes.compound.makeCompound({shapes:[D,R,E,x]})],M=L.map(((r,i)=>{const s=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),B=t.shapes.compound.makeCompound({shapes:M});return L.forEach((e=>e.delete())),d.forEach((e=>e.delete())),{compound:B,shapes:M.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"chirpyChalet",roof:{compound:"7",shapes:["5","6"]},walls:{compound:"8",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"6"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}serenitySwirl(t){return function(t,r,i){if(function(e){let t;if(["swirl","nrOfDivisions","addRadiusNarrow","addRadiusWide","addMiddleHeight","addTopHeight","thickness","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.swirl<0?t="swirl value should be between 0 and 1":e.nrOfDivisions<=0?t=`nrOfDivisions can't be ${e.nrOfDivisions}, which is lower or equal to 0`:e.addRadiusNarrow<0?t=`addRadiusNarrow can't be ${e.addRadiusNarrow}, which is lower then 0`:e.addRadiusWide<0?t=`addRadiusWide can't be ${e.addRadiusWide}, which is lower then 0`:e.addMiddleHeight<=0?t=`addMiddleHeight can't be ${e.addMiddleHeight}, which is lower or equal to 0`:e.addTopHeight<=0?t=`addTopHeight can't be ${e.addTopHeight}, which is lower or equal to 0`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!i.serenitySwirl)throw new Error("Could not compute, to use Serenity Swirl algorithm you must be subscribed.");try{const s=`\n            ${i.serenitySwirl}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}arabicArchway(t){return function(t,r,i){if(function(e){let t;if(["nrOfSides","thickness","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.nrOfSides<0?t="swirl value should be between 0 and 1":e.nrOfSides<3?t=`nrOfSides can't be ${e.nrOfSides}, which is lower to 3`:e.nrOfSides>30?t=`nrOfSides can't be ${e.nrOfSides}, which is higher then 30`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!i.arabicArchway)throw new Error("Could not compute, to use Arabic Archway algorithm you must be subscribed.");try{const s=`\n            ${i.arabicArchway}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}eternalLove(t){return function(t,r,i,s){if(!s.eternalLove)throw new Error("Could not compute, to use Eternal Love algorithm you must be subscribed to our silver plan.");try{const o=`\n            ${s.eternalLove}\n        `;return new Function(o).apply({inputs:t,occt:r,occtAdv:i,Inputs:e,Text3D:B})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}calmCup(t){return function(t,r,i,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","fillet","nrOfHandles","handleDist","precision","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<6*e.thickness?t="Height must be at least 6 times greater than thickness.":e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.fillet<0||e.fillet>e.thickness/2?t="Fillet must be greater than 0 and less than half of the thickness.":e.handleDist<=2*e.thickness?t="Handle distance from cup must be greater than 2 times the thickness.":e.nrOfHandles<0||e.nrOfHandles>2?t="Nr of handles must be between 0 and 2.":e.radiusTopOffset>.75*e.radiusBottom&&(t="Top offset radius must be less than 0.75 times the bottom radius."),t)throw new Error(t)}(t),!s.calmCup)throw new Error("Could not compute, to use Calm Cup algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.calmCup}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}spicyBox(t){return function(t,r,i,s){if(!s.spicyBox)throw new Error("Could not compute, to use Spicy Box algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.spicyBox}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dragonCup(t){return function(t,r,i,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","nrSkinCellsHorizontal","nrSkinCellsVertical","precision","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.nrSkinCellsHorizontal<=2?t="Nr of horizontal skin cells must be larger than 2.":e.nrSkinCellsVertical<1&&(t="Nr of horizontal skin cells must be larger than 0."),t)throw new Error(t)}(t),!s.dragonCup)throw new Error("Could not compute, to use Dragon Cup algorithm you must be subscribed to our silver plan.");try{const o=`\n            ${s.dragonCup}\n        `;return new Function(o).apply({inputs:t,occt:r,occtAdv:i,Inputs:e,Advanced:G})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}zenHideout(t){return function(t,r,i){if(function(e){let t;if([].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),t)throw new Error(t)}(t),!i.zenHideout)throw new Error("Could not compute, to use Zen Hideout algorithm you must be subscribed.");try{const s=`\n            ${i.zenHideout}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e,Things:M,MathHelper:Ht,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}elegantTable(t){return function(t,r,i,s){if(!s.elegantTable)throw new Error("Could not compute, to use Elegant Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.elegantTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}goodCoffeeTable(t){return function(t,r,i,s){if(function(e){let t;if(["height","width","length","topThickness","topGlassOffset","glassThickness","glassHolderLength","chamfer","legWidth","legDepth","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<=e.topThickness?t="Height must be greated then top thickness.":e.width<=0?t="Width must be greater than 0.":e.width<=2*(e.topGlassOffset+e.glassHolderLength)?t="Width must be greater than two top glass offsets and glass holder lengths.":e.length<=0?t="Length must be greater than 0.":e.length<=2*(e.topGlassOffset+e.glassHolderLength)?t="Length must be greater than two top glass offsets and glass holder lengths.":e.topThickness<=2*e.glassThickness?t="Table top thickness must be greater 2 x glass thickness.":e.glassThickness<=0?t="Glass thickness must be greater than 0":e.glassHolderLength<e.glassThickness?t="Glass holder length must be at least as long as glass thickness.":e.shelfTopOffset>e.height-e.topThickness-e.shelfThickness?t=`Shelf top offset is larger than ${e.height-e.topThickness-e.shelfThickness}, which make it go underground.`:e.chamfer>=e.topThickness/2?t="Chamfer distance must be lower or equal than half of the top thickness.":e.chamfer>=e.shelfThickness/2?t="Chamfer distance must be lower or equal than half of the shelf thickness.":e.chamfer>=e.topGlassOffset/2?t="Chamfer distance must be lower or equal than half of the top glass offset.":e.chamfer>=e.legWidth/2?t="Chamfer distance must be lower or equal than half of the leg width.":e.chamfer>=e.legDepth/2?t="Chamfer distance must be lower or equal than half of the leg depth.":e.width<=2*e.legWidth?t="Width of the table must be greater or equal to the width of the two legs.":e.length<=2*e.legDepth?t="Length of the table must be greater or equal to the length of the two legs.":e.legDepth>=e.topGlassOffset+e.glassHolderLength?t="The depth of the leg must be lower or equal to the sum of glass offset and glass holder length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.goodCoffeeTable)throw new Error("Could not compute, to use Good Coffee Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.goodCoffeeTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeChair(t){return function(t,r,i,s){if(function(e){let t;if(["sittingHeight","backRestOffset","backRestHeight","width","length","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.sittingHeight<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.backRestOffset<0?t="Back rest offset can't be negative.":e.backRestHeight<=0?t="Back rest height must be greater than 0":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.sittingHeight/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.filletRadius>=e.backRestHeight/2?t="Fillet radius must be lower than half of the back height.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeChair)throw new Error("Could not compute, to use Snake Chair algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.snakeChair}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeTable(t){return function(t,r,i,s){if(function(e){let t;if(["height","width","length","shelfHeight","supportLength","glassThickness","glassOffset","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.height/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeTable)throw new Error("Could not compute, to use Snake Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.snakeTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}phoneNest(t){return function(t,r,i,s){if(!s.phoneNest)throw new Error("Could not compute, to use Phone Nest algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.phoneNest}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:Ft})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dropletsPhoneHolder(t){return function(t,r,i,s,o){if(!o.dropletsPhoneHolder)throw new Error("Could not compute, to use Droplets Phone Holder algorithm you must be subscribed.");try{const n=`\n            ${o.dropletsPhoneHolder}\n        `;return new Function(n).apply({inputs:t,occt:r,occtAdv:i,base:s,Inputs:e,Things:M,ShapeParser:Ft,Text3D:B})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.base,this.dependencies)}}function Ds(e,t,r){const i=[];Rs(e.letterPaths,r,t,i);const s=new es;return e.height>0?Fs(i,t,e.height,e.rotation,e.origin,e.direction,s):As(i,t,e.rotation,e.origin,e.direction,s)}function Os(e,t,r,i){const s=r.find((t=>t.name===`${e.fontType}-${e.fontVariant}`));if(!s)throw new Error(`Font ${e.fontType}-${e.fontVariant}.ttf does not exist. Current font probably does not have corresponding variant.`);const o=s.font.getPath(e.text,0,0,e.fontSize),n=[];let a=s.font.getPaths(e.text,0,0,e.fontSize,{});const c=s.font.getAdvanceWidth(e.text,e.fontSize),h=o.getBoundingBox();switch(e.originAlignment){case qt.leftBottom:break;case qt.leftMiddle:a=s.font.getPaths(e.text,0,(h.y2-h.y1)/2,e.fontSize,{});break;case qt.leftTop:a=s.font.getPaths(e.text,0,h.y2-h.y1,e.fontSize,{});break;case qt.centerBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,0,e.fontSize,{});break;case qt.centerMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,(h.y2-h.y1)/2,e.fontSize,{});break;case qt.centerTop:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,h.y2-h.y1,e.fontSize,{});break;case qt.rightBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1),0,e.fontSize,{});break;case qt.rightMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1),(h.y2-h.y1)/2,e.fontSize,{});break;case qt.rightTop:a=s.font.getPaths(e.text,-(h.x2-h.x1),h.y2-h.y1,e.fontSize,{})}Rs(a,i,t,n);const l=new es;return l.advanceWidth=c,l.boundingBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},e.height>0?Fs(n,t,e.height,e.rotation,e.origin,e.direction,l):As(n,t,e.rotation,e.origin,e.direction,l)}function As(e,t,r,i,s,o){const n=e.map((e=>{const o=t.transforms.rotate({shape:e,angle:r,axis:[0,1,0]}),n=t.transforms.alignAndTranslate({shape:o,center:i,direction:s});return o.delete(),n}));n.reverse(),e.forEach((e=>e.delete()));const a=t.shapes.face.getFacesCentersOfMass({shapes:n});o.characterCenterCoordinates=a;const c=t.shapes.compound.makeCompound({shapes:n});return o.characterParts=n.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),Ls(o,c)}function Fs(e,t,r,i,s,o,n){const a=e.map((e=>t.operations.extrude({shape:e,direction:[0,r,0]})));e.forEach((e=>e.delete()));const c=a.map((e=>{const r=t.transforms.rotate({shape:e,angle:i,axis:[0,1,0]}),n=t.transforms.alignAndTranslate({shape:r,center:s,direction:o});return r.delete(),n}));c.reverse();const h=t.shapes.solid.getSolidsCentersOfMass({shapes:c});n.characterCenterCoordinates=h;const l=t.shapes.compound.makeCompound({shapes:c});return n.characterParts=c.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),Ls(n,l)}function Rs(e,t,r,i){e.forEach((e=>{const s=e.commands,o=[];let n,a,c;for(let e=0;e<s.length;e++){const i=s[e];if("M"===i.type)n=[-i.x,0,i.y],a=n,c=new t.BRepBuilderAPI_MakeWire;else if("Z"===i.type)try{const e=c.Wire();let r=null;if(o.length>0){const i=new t.BRepBuilderAPI_MakeFace(o[o.length-1],e);i.IsDone()&&(r=i.Face()),i.delete()}else r=t.MakeFaceFromWireOnlyPlane(e,!0);r&&o.push(r),e.delete(),c.delete()}catch(e){console.error("We could not create faces from this font probably due to self intersections! You should try removing weird characters and pick a more reliable font like 'Roboto'.",e),c&&c.delete()}else if("L"===i.type){const e=[-i.x,0,i.y];if(a[0]===e[0]&&a[2]===e[2])continue;const t=r.shapes.edge.line({start:a,end:e});c.AddEdge(t),t.delete(),a=e}else if("Q"===i.type){const e=[-i.x1,0,i.y1],t=[-i.x,0,i.y],s=[a,e,t],o=r.shapes.wire.createBezier({points:s,closed:!1});c.AddWire(o),o.delete(),a=t}else if("C"===i.type){const e=[-i.x,0,i.y],t=[a,[-i.x1,0,i.y1],[-i.x2,0,i.y2],e],s=r.shapes.wire.createBezier({points:t,closed:!1});c.AddWire(s),s.delete(),a=e}}if(void 0!==o[o.length-1]){const e=o[o.length-1],t=new Be.BasicShapeRepairDto;t.shape=e,t.minTolerance=1e-8,t.maxTolerance=1e-4,t.precision=.001;const s=r.shapeFix.basicShapeRepair(t);e.delete(),i.push(s)}}))}function Ls(e,t){if(e){const r=[],i=Ft.parse(e,r,"text-3d");return{compound:t,shapes:[{id:"1",shape:t},...r],data:Object.assign({compound:"1"},i)}}}String.prototype.codePointAt||(Cs=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=r)){var s,o=t.charCodeAt(i);return o>=55296&&o<=56319&&r>i+1&&(s=t.charCodeAt(i+1))>=56320&&s<=57343?1024*(o-55296)+s-56320+65536:o}},(Ps=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}())?Ps(String.prototype,"codePointAt",{value:Cs,configurable:!0,writable:!0}):String.prototype.codePointAt=Cs);function Ms(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Bs(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Ms,this.dtree=new Ms}var Is=new Ms,Us=new Ms,Ws=new Uint8Array(30),_s=new Uint16Array(30),Ns=new Uint8Array(30),Hs=new Uint16Array(30),Gs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vs=new Ms,zs=new Uint8Array(320);function js(e,t,r,i){var s,o;for(s=0;s<r;++s)e[s]=0;for(s=0;s<30-r;++s)e[s+r]=s/r|0;for(o=i,s=0;s<30;++s)t[s]=o,o+=1<<e[s]}var $s=new Uint16Array(16);function qs(e,t,r,i){var s,o;for(s=0;s<16;++s)e.table[s]=0;for(s=0;s<i;++s)e.table[t[r+s]]++;for(e.table[0]=0,o=0,s=0;s<16;++s)$s[s]=o,o+=e.table[s];for(s=0;s<i;++s)t[r+s]&&(e.trans[$s[t[r+s]]++]=s)}function Ys(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function Xs(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+r}function Zs(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,i=0,s=0,o=e.tag;do{i=2*i+(1&o),o>>>=1,++s,r+=t.table[s],i-=t.table[s]}while(i>=0);return e.tag=o,e.bitcount-=s,t.trans[r+i]}function Qs(e,t,r){var i,s,o,n,a,c;for(i=Xs(e,5,257),s=Xs(e,5,1),o=Xs(e,4,4),n=0;n<19;++n)zs[n]=0;for(n=0;n<o;++n){var h=Xs(e,3,0);zs[Gs[n]]=h}for(qs(Vs,zs,0,19),a=0;a<i+s;){var l=Zs(e,Vs);switch(l){case 16:var d=zs[a-1];for(c=Xs(e,2,3);c;--c)zs[a++]=d;break;case 17:for(c=Xs(e,3,3);c;--c)zs[a++]=0;break;case 18:for(c=Xs(e,7,11);c;--c)zs[a++]=0;break;default:zs[a++]=l}}qs(t,zs,0,i),qs(r,zs,i,s)}function Js(e,t,r){for(;;){var i,s,o,n,a=Zs(e,t);if(256===a)return 0;if(a<256)e.dest[e.destLen++]=a;else for(i=Xs(e,Ws[a-=257],_s[a]),s=Zs(e,r),n=o=e.destLen-Xs(e,Ns[s],Hs[s]);n<o+i;++n)e.dest[e.destLen++]=e.dest[n]}}function Ks(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(Is,Us),js(Ws,_s,4,3),js(Ns,Hs,2,1),Ws[28]=0,_s[28]=258;var eo=function(e,t){var r,i,s=new Bs(e,t);do{switch(r=Ys(s),Xs(s,2,0)){case 0:i=Ks(s);break;case 1:i=Js(s,Is,Us);break;case 2:Qs(s,s.ltree,s.dtree),i=Js(s,s.ltree,s.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!r);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest};function to(e,t,r,i,s){return Math.pow(1-s,3)*e+3*Math.pow(1-s,2)*s*t+3*(1-s)*Math.pow(s,2)*r+Math.pow(s,3)*i}function ro(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function io(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function so(e){throw new Error(e)}function oo(e,t){e||so(t)}ro.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},ro.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},ro.prototype.addX=function(e){this.addPoint(e,null)},ro.prototype.addY=function(e){this.addPoint(null,e)},ro.prototype.addBezier=function(e,t,r,i,s,o,n,a){var c=[e,t],h=[r,i],l=[s,o],d=[n,a];this.addPoint(e,t),this.addPoint(n,a);for(var u=0;u<=1;u++){var p=6*c[u]-12*h[u]+6*l[u],f=-3*c[u]+9*h[u]-9*l[u]+3*d[u],v=3*h[u]-3*c[u];if(0!==f){var g=Math.pow(p,2)-4*v*f;if(!(g<0)){var m=(-p+Math.sqrt(g))/(2*f);0<m&&m<1&&(0===u&&this.addX(to(c[u],h[u],l[u],d[u],m)),1===u&&this.addY(to(c[u],h[u],l[u],d[u],m)));var y=(-p-Math.sqrt(g))/(2*f);0<y&&y<1&&(0===u&&this.addX(to(c[u],h[u],l[u],d[u],y)),1===u&&this.addY(to(c[u],h[u],l[u],d[u],y)))}}else{if(0===p)continue;var S=-v/p;0<S&&S<1&&(0===u&&this.addX(to(c[u],h[u],l[u],d[u],S)),1===u&&this.addY(to(c[u],h[u],l[u],d[u],S)))}}},ro.prototype.addQuad=function(e,t,r,i,s,o){var n=e+2/3*(r-e),a=t+2/3*(i-t),c=n+1/3*(s-e),h=a+1/3*(o-t);this.addBezier(e,t,n,a,c,h,s,o)},io.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},io.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},io.prototype.curveTo=io.prototype.bezierCurveTo=function(e,t,r,i,s,o){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:i,x:s,y:o})},io.prototype.quadTo=io.prototype.quadraticCurveTo=function(e,t,r,i){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:i})},io.prototype.close=io.prototype.closePath=function(){this.commands.push({type:"Z"})},io.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof ro){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},io.prototype.getBoundingBox=function(){for(var e=new ro,t=0,r=0,i=0,s=0,o=0;o<this.commands.length;o++){var n=this.commands[o];switch(n.type){case"M":e.addPoint(n.x,n.y),t=i=n.x,r=s=n.y;break;case"L":e.addPoint(n.x,n.y),i=n.x,s=n.y;break;case"Q":e.addQuad(i,s,n.x1,n.y1,n.x,n.y),i=n.x,s=n.y;break;case"C":e.addBezier(i,s,n.x1,n.y1,n.x2,n.y2,n.x,n.y),i=n.x,s=n.y;break;case"Z":i=t,s=r;break;default:throw new Error("Unexpected path command "+n.type)}}return e.isEmpty()&&e.addPoint(0,0),e},io.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},io.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e=arguments,r="",i=0;i<arguments.length;i+=1){var s=e[i];s>=0&&i>0&&(r+=" "),r+=t(s)}return r}e=void 0!==e?e:2;for(var i="",s=0;s<this.commands.length;s+=1){var o=this.commands[s];"M"===o.type?i+="M"+r(o.x,o.y):"L"===o.type?i+="L"+r(o.x,o.y):"C"===o.type?i+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?i+="Q"+r(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(i+="Z")}return i},io.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},io.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var no={fail:so,argument:oo,assert:oo},ao=2147483648,co={},ho={},lo={};function uo(e){return function(){return e}}ho.BYTE=function(e){return no.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},lo.BYTE=uo(1),ho.CHAR=function(e){return[e.charCodeAt(0)]},lo.CHAR=uo(1),ho.CHARARRAY=function(e){void 0===e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},lo.CHARARRAY=function(e){return void 0===e?0:e.length},ho.USHORT=function(e){return[e>>8&255,255&e]},lo.USHORT=uo(2),ho.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},lo.SHORT=uo(2),ho.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},lo.UINT24=uo(3),ho.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},lo.ULONG=uo(4),ho.LONG=function(e){return e>=ao&&(e=-(2*ao-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},lo.LONG=uo(4),ho.FIXED=ho.ULONG,lo.FIXED=lo.ULONG,ho.FWORD=ho.SHORT,lo.FWORD=lo.SHORT,ho.UFWORD=ho.USHORT,lo.UFWORD=lo.USHORT,ho.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},lo.LONGDATETIME=uo(8),ho.TAG=function(e){return no.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},lo.TAG=uo(4),ho.Card8=ho.BYTE,lo.Card8=lo.BYTE,ho.Card16=ho.USHORT,lo.Card16=lo.USHORT,ho.OffSize=ho.BYTE,lo.OffSize=lo.BYTE,ho.SID=ho.USHORT,lo.SID=lo.USHORT,ho.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?ho.NUMBER16(e):ho.NUMBER32(e)},lo.NUMBER=function(e){return ho.NUMBER(e).length},ho.NUMBER16=function(e){return[28,e>>8&255,255&e]},lo.NUMBER16=uo(3),ho.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},lo.NUMBER32=uo(5),ho.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var i=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*i)/i).toString()}for(var s="",o=0,n=t.length;o<n;o+=1){var a=t[o];s+="e"===a?"-"===t[++o]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var c=[30],h=0,l=(s+=1&s.length?"f":"ff").length;h<l;h+=2)c.push(parseInt(s.substr(h,2),16));return c},lo.REAL=function(e){return ho.REAL(e).length},ho.NAME=ho.CHARARRAY,lo.NAME=lo.CHARARRAY,ho.STRING=ho.CHARARRAY,lo.STRING=lo.CHARARRAY,co.UTF8=function(e,t,r){for(var i=[],s=r,o=0;o<s;o++,t+=1)i[o]=e.getUint8(t);return String.fromCharCode.apply(null,i)},co.UTF16=function(e,t,r){for(var i=[],s=r/2,o=0;o<s;o++,t+=2)i[o]=e.getUint16(t);return String.fromCharCode.apply(null,i)},ho.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var i=e.charCodeAt(r);t[t.length]=i>>8&255,t[t.length]=255&i}return t},lo.UTF16=function(e){return 2*e.length};var po={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};co.MACSTRING=function(e,t,r,i){var s=po[i];if(void 0!==s){for(var o="",n=0;n<r;n++){var a=e.getUint8(t+n);o+=a<=127?String.fromCharCode(a):s[127&a]}return o}};var fo,vo="function"==typeof WeakMap&&new WeakMap;function go(e){return e>=-128&&e<=127}function mo(e,t,r){for(var i=0,s=e.length;t<s&&i<64&&0===e[t];)++t,++i;return r.push(128|i-1),t}function yo(e,t,r){for(var i=0,s=e.length,o=t;o<s&&i<64;){var n=e[o];if(!go(n))break;if(0===n&&o+1<s&&0===e[o+1])break;++o,++i}r.push(i-1);for(var a=t;a<o;++a)r.push(e[a]+256&255);return o}function So(e,t,r){for(var i=0,s=e.length,o=t;o<s&&i<64;){var n=e[o];if(0===n)break;if(go(n)&&o+1<s&&go(e[o+1]))break;++o,++i}r.push(64|i-1);for(var a=t;a<o;++a){var c=e[a];r.push(c+65536>>8&255,c+256&255)}return o}ho.MACSTRING=function(e,t){var r=function(e){if(!fo)for(var t in fo={},po)fo[t]=new String(t);var r=fo[e];if(void 0!==r){if(vo){var i=vo.get(r);if(void 0!==i)return i}var s=po[e];if(void 0!==s){for(var o={},n=0;n<s.length;n++)o[s.charCodeAt(n)]=n+128;return vo&&vo.set(r,o),o}}}(t);if(void 0!==r){for(var i=[],s=0;s<e.length;s++){var o=e.charCodeAt(s);if(o>=128&&void 0===(o=r[o]))return;i[s]=o}return i}},lo.MACSTRING=function(e,t){var r=ho.MACSTRING(e,t);return void 0!==r?r.length:0},ho.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var i=e[t];t=0===i?mo(e,t,r):i>=-128&&i<=127?yo(e,t,r):So(e,t,r)}return r},ho.INDEX=function(e){for(var t=1,r=[t],i=[],s=0;s<e.length;s+=1){var o=ho.OBJECT(e[s]);Array.prototype.push.apply(i,o),t+=o.length,r.push(t)}if(0===i.length)return[0,0];for(var n=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,c=[void 0,ho.BYTE,ho.USHORT,ho.UINT24,ho.ULONG][a],h=0;h<r.length;h+=1){var l=c(r[h]);Array.prototype.push.apply(n,l)}return Array.prototype.concat(ho.Card16(e.length),ho.OffSize(a),n,i)},lo.INDEX=function(e){return ho.INDEX(e).length},ho.DICT=function(e){for(var t=[],r=Object.keys(e),i=r.length,s=0;s<i;s+=1){var o=parseInt(r[s],0),n=e[o];t=(t=t.concat(ho.OPERAND(n.value,n.type))).concat(ho.OPERATOR(o))}return t},lo.DICT=function(e){return ho.DICT(e).length},ho.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},ho.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)no.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(ho.OPERAND(e[i],t[i]));else if("SID"===t)r=r.concat(ho.NUMBER(e));else if("offset"===t)r=r.concat(ho.NUMBER32(e));else if("number"===t)r=r.concat(ho.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(ho.REAL(e))}return r},ho.OP=ho.BYTE,lo.OP=lo.BYTE;var wo="function"==typeof WeakMap&&new WeakMap;function bo(e,t,r){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var i=0;i<t.length;i+=1){var s=t[i];this[s.name]=s.value}if(this.tableName=e,this.fields=t,r)for(var o=Object.keys(r),n=0;n<o.length;n+=1){var a=o[n],c=r[a];void 0!==this[a]&&(this[a]=c)}}function Eo(e,t,r){void 0===r&&(r=t.length);var i=new Array(t.length+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var s=0;s<t.length;s++)i[s+1]={name:e+s,type:"USHORT",value:t[s]};return i}function xo(e,t,r){var i=t.length,s=new Array(i+1);s[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)s[o+1]={name:e+o,type:"TABLE",value:r(t[o],o)};return s}function To(e,t,r){var i=t.length,s=[];s[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)s=s.concat(r(t[o],o));return s}function Po(e){1===e.format?bo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Eo("glyph",e.glyphs))):2===e.format?bo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(To("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):no.assert(!1,"Coverage format must be 1 or 2.")}function Co(e){bo.call(this,"scriptListTable",To("scriptRecord",e,(function(e,t){var r=e.script,i=r.defaultLangSys;return no.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new bo("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new bo("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Eo("featureIndex",i.featureIndexes)))}].concat(To("langSys",r.langSysRecords,(function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new bo("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Eo("featureIndex",r.featureIndexes)))}]}))))}]})))}function ko(e){bo.call(this,"featureListTable",To("featureRecord",e,(function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new bo("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(Eo("lookupListIndex",r.lookupListIndexes)))}]})))}function Do(e,t){bo.call(this,"lookupListTable",xo("lookup",e,(function(e){var r=t[e.lookupType];return no.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new bo("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(xo("subtable",e.subtables,r)))})))}ho.CHARSTRING=function(e){if(wo){var t=wo.get(e);if(void 0!==t)return t}for(var r=[],i=e.length,s=0;s<i;s+=1){var o=e[s];r=r.concat(ho[o.type](o.value))}return wo&&wo.set(e,r),r},lo.CHARSTRING=function(e){return ho.CHARSTRING(e).length},ho.OBJECT=function(e){var t=ho[e.type];return no.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},lo.OBJECT=function(e){var t=lo[e.type];return no.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},ho.TABLE=function(e){for(var t=[],r=e.fields.length,i=[],s=[],o=0;o<r;o+=1){var n=e.fields[o],a=ho[n.type];no.argument(void 0!==a,"No encoding function for field type "+n.type+" ("+n.name+")");var c=e[n.name];void 0===c&&(c=n.value);var h=a(c);"TABLE"===n.type?(s.push(t.length),t=t.concat([0,0]),i.push(h)):t=t.concat(h)}for(var l=0;l<i.length;l+=1){var d=s[l],u=t.length;no.argument(u<65536,"Table "+e.tableName+" too big."),t[d]=u>>8,t[d+1]=255&u,t=t.concat(i[l])}return t},lo.TABLE=function(e){for(var t=0,r=e.fields.length,i=0;i<r;i+=1){var s=e.fields[i],o=lo[s.type];no.argument(void 0!==o,"No sizeOf function for field type "+s.type+" ("+s.name+")");var n=e[s.name];void 0===n&&(n=s.value),t+=o(n),"TABLE"===s.type&&(t+=2)}return t},ho.RECORD=ho.TABLE,lo.RECORD=lo.TABLE,ho.LITERAL=function(e){return e},lo.LITERAL=function(e){return e.length},bo.prototype.encode=function(){return ho.TABLE(this)},bo.prototype.sizeOf=function(){return lo.TABLE(this)},Po.prototype=Object.create(bo.prototype),Po.prototype.constructor=Po,Co.prototype=Object.create(bo.prototype),Co.prototype.constructor=Co,ko.prototype=Object.create(bo.prototype),ko.prototype.constructor=ko,Do.prototype=Object.create(bo.prototype),Do.prototype.constructor=Do;var Oo={Table:bo,Record:bo,Coverage:Po,ScriptList:Co,FeatureList:ko,LookupList:Do,ushortList:Eo,tableList:xo,recordList:To};function Ao(e,t){return e.getUint8(t)}function Fo(e,t){return e.getUint16(t,!1)}function Ro(e,t){return e.getUint32(t,!1)}function Lo(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var Mo={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Bo(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Bo.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Bo.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Bo.prototype.parseCard8=Bo.prototype.parseByte,Bo.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Bo.prototype.parseCard16=Bo.prototype.parseUShort,Bo.prototype.parseSID=Bo.prototype.parseUShort,Bo.prototype.parseOffset16=Bo.prototype.parseUShort,Bo.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Bo.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},Bo.prototype.parseULong=function(){var e=Ro(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Bo.prototype.parseOffset32=Bo.prototype.parseULong,Bo.prototype.parseFixed=function(){var e=Lo(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Bo.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,i="";this.relativeOffset+=e;for(var s=0;s<e;s++)i+=String.fromCharCode(t.getUint8(r+s));return i},Bo.prototype.parseTag=function(){return this.parseString(4)},Bo.prototype.parseLongDateTime=function(){var e=Ro(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},Bo.prototype.parseVersion=function(e){var t=Fo(this.data,this.offset+this.relativeOffset),r=Fo(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},Bo.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=Mo[e]*t},Bo.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint32(i),i+=4;return this.relativeOffset+=4*e,t},Bo.prototype.parseOffset16List=Bo.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint16(i),i+=2;return this.relativeOffset+=2*e,t},Bo.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getInt16(i),i+=2;return this.relativeOffset+=2*e,t},Bo.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint8(i++);return this.relativeOffset+=e,t},Bo.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Bo.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Bo.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=Object.keys(t),s=0;s<e;s++){for(var o={},n=0;n<i.length;n++){var a=i[n],c=t[a];o[a]=c.call(this)}r[s]=o}return r},Bo.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=Object.keys(t),s=0;s<e;s++){for(var o={},n=0;n<i.length;n++){var a=i[n],c=t[a];o[a]=c.call(this)}r[s]=o}return r},Bo.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var s=t[i],o=e[s];r[s]=o.call(this)}return r},Bo.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},Bo.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),i=0;i<t;i++)r[i]=this.parseValueRecord(e);return r},Bo.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new Bo(this.data,this.offset+t).parseStruct(e)},Bo.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new Bo(this.data,this.offset+t).parseStruct(e)},Bo.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,i=this.relativeOffset,s=new Array(r),o=0;o<r;o++){var n=t[o];if(0!==n)if(this.relativeOffset=n,e){for(var a=this.parseOffset16List(),c=new Array(a.length),h=0;h<a.length;h++)this.relativeOffset=n+a[h],c[h]=e.call(this);s[o]=c}else s[o]=this.parseUShortList();else s[o]=void 0}return this.relativeOffset=i,s},Bo.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var i=new Array(r),s=0;s<r;s++)i[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},Bo.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Bo.uShort,end:Bo.uShort,classId:Bo.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},Bo.list=function(e,t){return function(){return this.parseList(e,t)}},Bo.list32=function(e,t){return function(){return this.parseList32(e,t)}},Bo.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},Bo.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},Bo.pointer=function(e){return function(){return this.parsePointer(e)}},Bo.pointer32=function(e){return function(){return this.parsePointer32(e)}},Bo.tag=Bo.prototype.parseTag,Bo.byte=Bo.prototype.parseByte,Bo.uShort=Bo.offset16=Bo.prototype.parseUShort,Bo.uShortList=Bo.prototype.parseUShortList,Bo.uLong=Bo.offset32=Bo.prototype.parseULong,Bo.uLongList=Bo.prototype.parseULongList,Bo.struct=Bo.prototype.parseStruct,Bo.coverage=Bo.prototype.parseCoverage,Bo.classDef=Bo.prototype.parseClassDef;var Io={reserved:Bo.uShort,reqFeatureIndex:Bo.uShort,featureIndexes:Bo.uShortList};Bo.prototype.parseScriptList=function(){return this.parsePointer(Bo.recordList({tag:Bo.tag,script:Bo.pointer({defaultLangSys:Bo.pointer(Io),langSysRecords:Bo.recordList({tag:Bo.tag,langSys:Bo.pointer(Io)})})}))||[]},Bo.prototype.parseFeatureList=function(){return this.parsePointer(Bo.recordList({tag:Bo.tag,feature:Bo.pointer({featureParams:Bo.offset16,lookupListIndexes:Bo.uShortList})}))||[]},Bo.prototype.parseLookupList=function(e){return this.parsePointer(Bo.list(Bo.pointer((function(){var t=this.parseUShort();no.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),i=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(Bo.pointer(e[t])),markFilteringSet:i?this.parseUShort():void 0}}))))||[]},Bo.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return no.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Bo.offset32,featureTableSubstitutionOffset:Bo.offset32})}))||[]};var Uo={getByte:Ao,getCard8:Ao,getUShort:Fo,getCard16:Fo,getShort:function(e,t){return e.getInt16(t,!1)},getULong:Ro,getFixed:Lo,getTag:function(e,t){for(var r="",i=t;i<t+4;i+=1)r+=String.fromCharCode(e.getInt8(i));return r},getOffset:function(e,t,r){for(var i=0,s=0;s<r;s+=1)i<<=8,i+=e.getUint8(t+s);return i},getBytes:function(e,t,r){for(var i=[],s=t;s<r;s+=1)i.push(e.getUint8(s));return i},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:Bo};function Wo(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}var _o={parse:function(e,t){var r={};r.version=Uo.getUShort(e,t),no.argument(0===r.version,"cmap table version should be 0."),r.numTables=Uo.getUShort(e,t+2);for(var i=-1,s=r.numTables-1;s>=0;s-=1){var o=Uo.getUShort(e,t+4+8*s),n=Uo.getUShort(e,t+4+8*s+2);if(3===o&&(0===n||1===n||10===n)||0===o&&(0===n||1===n||2===n||3===n||4===n)){i=Uo.getULong(e,t+4+8*s+4);break}}if(-1===i)throw new Error("No valid cmap sub-tables found.");var a=new Uo.Parser(e,t+i);if(r.format=a.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var i=0;i<r;i+=1)for(var s=t.parseULong(),o=t.parseULong(),n=t.parseULong(),a=s;a<=o;a+=1)e.glyphIndexMap[a]=n,n++}(r,a);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,i,s){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var n=new Uo.Parser(r,i+s+14),a=new Uo.Parser(r,i+s+16+2*o),c=new Uo.Parser(r,i+s+16+4*o),h=new Uo.Parser(r,i+s+16+6*o),l=i+s+16+8*o,d=0;d<o-1;d+=1)for(var u=void 0,p=n.parseUShort(),f=a.parseUShort(),v=c.parseShort(),g=h.parseUShort(),m=f;m<=p;m+=1)0!==g?(l=h.offset+h.relativeOffset-2,l+=g,l+=2*(m-f),0!==(u=Uo.getUShort(r,l))&&(u=u+v&65535)):u=m+v&65535,e.glyphIndexMap[m]=u}(r,a,e,t,i)}return r},make:function(e){var t,r=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new Oo.Table("cmap",i);for(s.segments=[],t=0;t<e.length;t+=1){for(var o=e.get(t),n=0;n<o.unicodes.length;n+=1)Wo(s,o.unicodes[n],t);s.segments=s.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(s);var a=s.segments.length,c=0,h=[],l=[],d=[],u=[],p=[],f=[];for(t=0;t<a;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(h=h.concat({name:"end_"+t,type:"USHORT",value:v.end}),l=l.concat({name:"start_"+t,type:"USHORT",value:v.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),u=u.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):c+=1,r||void 0===v.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(a-c),s.searchRange=2*Math.pow(2,Math.floor(Math.log(a-c)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(h),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(l),s.fields=s.fields.concat(d),s.fields=s.fields.concat(u),s.fields=s.fields.concat(p),s.cmap4Length=14+2*h.length+2+2*l.length+2*d.length+2*u.length+2*p.length,!r){var g=16+4*f.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),s.fields=s.fields.concat(f)}return s}},No=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Ho=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Go=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Vo=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function zo(e){this.font=e}function jo(e){this.cmap=e}function $o(e,t){this.encoding=e,this.charset=t}function qo(e){switch(e.version){case 1:this.names=Vo.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<Vo.length?this.names[t]=Vo[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-Vo.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=Vo[r+e.glyphNameIndex[r]];break;default:this.names=[]}}zo.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var i=0;i<r.length;i+=1)for(var s=r.get(i),o=0;o<s.unicodes.length;o+=1)if(s.unicodes[o]===t)return i;return null},jo.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},$o.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},qo.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},qo.prototype.glyphIndexToName=function(e){return this.names[e]};var Yo=function(e,t,r,i,s){e.beginPath(),e.moveTo(t,r),e.lineTo(i,s),e.stroke()};function Xo(e){this.bindConstructorValues(e)}function Zo(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function Qo(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];i.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=i}this.length=t&&t.length||0}Xo.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||new io,{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},Xo.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},Xo.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Xo.prototype.getPath=function(e,t,r,i,s){var o,n;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72,i||(i={});var a=i.xScale,c=i.yScale;if(i.hinting&&s&&s.hinting&&(n=this.path&&s.hinting.exec(this,r)),n)o=s.hinting.getCommands(n),e=Math.round(e),t=Math.round(t),a=c=1;else{o=this.path.commands;var h=1/(this.path.unitsPerEm||1e3)*r;void 0===a&&(a=h),void 0===c&&(c=h)}for(var l=new io,d=0;d<o.length;d+=1){var u=o[d];"M"===u.type?l.moveTo(e+u.x*a,t+-u.y*c):"L"===u.type?l.lineTo(e+u.x*a,t+-u.y*c):"Q"===u.type?l.quadraticCurveTo(e+u.x1*a,t+-u.y1*c,e+u.x*a,t+-u.y*c):"C"===u.type?l.curveTo(e+u.x1*a,t+-u.y1*c,e+u.x2*a,t+-u.y2*c,e+u.x*a,t+-u.y*c):"Z"===u.type&&l.closePath()}return l},Xo.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var i=this.points[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return no.argument(0===t.length,"There are still points left in the current contour."),e},Xo.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],i=0;i<e.length;i+=1){var s=e[i];"Z"!==s.type&&(t.push(s.x),r.push(s.y)),"Q"!==s.type&&"C"!==s.type||(t.push(s.x1),r.push(s.y1)),"C"===s.type&&(t.push(s.x2),r.push(s.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},Xo.prototype.draw=function(e,t,r,i,s){this.getPath(t,r,i,s).draw(e)},Xo.prototype.drawPoints=function(e,t,r,i){function s(t,r,i,s){e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(r+t[o].x*s,i+t[o].y*s),e.arc(r+t[o].x*s,i+t[o].y*s,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24;for(var o=1/this.path.unitsPerEm*i,n=[],a=[],c=this.path,h=0;h<c.commands.length;h+=1){var l=c.commands[h];void 0!==l.x&&n.push({x:l.x,y:-l.y}),void 0!==l.x1&&a.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&a.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",s(n,t,r,o),e.fillStyle="red",s(a,t,r,o)},Xo.prototype.drawMetrics=function(e,t,r,i){var s;t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24,s=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",Yo(e,t,-1e4,t,1e4),Yo(e,-1e4,r,1e4,r);var o=this.xMin||0,n=this.yMin||0,a=this.xMax||0,c=this.yMax||0,h=this.advanceWidth||0;e.strokeStyle="blue",Yo(e,t+o*s,-1e4,t+o*s,1e4),Yo(e,t+a*s,-1e4,t+a*s,1e4),Yo(e,-1e4,r+-n*s,1e4,r+-n*s),Yo(e,-1e4,r+-c*s,1e4,r+-c*s),e.strokeStyle="green",Yo(e,t+h*s,-1e4,t+h*s,1e4)},Qo.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var i=0;i<r.unicodes.length;i++)t.addUnicode(r.unicodes[i]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},Qo.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var Jo={GlyphSet:Qo,glyphLoader:function(e,t){return new Xo({index:t,font:e})},ttfGlyphLoader:function(e,t,r,i,s,o){return function(){var n=new Xo({index:t,font:e});return n.path=function(){r(n,i,s);var t=o(e.glyphs,n);return t.unitsPerEm=e.unitsPerEm,t},Zo(n,"xMin","_xMin"),Zo(n,"xMax","_xMax"),Zo(n,"yMin","_yMin"),Zo(n,"yMax","_yMax"),n}},cffGlyphLoader:function(e,t,r,i){return function(){var s=new Xo({index:t,font:e});return s.path=function(){var t=r(e,s,i);return t.unitsPerEm=e.unitsPerEm,t},s}}};function Ko(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!Ko(e[r],t[r]))return!1;return!0}return!1}function en(e){return e.length<1240?107:e.length<33900?1131:32768}function tn(e,t,r){var i,s,o=[],n=[],a=Uo.getCard16(e,t);if(0!==a){var c=Uo.getByte(e,t+2);i=t+(a+1)*c+2;for(var h=t+3,l=0;l<a+1;l+=1)o.push(Uo.getOffset(e,h,c)),h+=c;s=i+o[a]}else s=t+2;for(var d=0;d<o.length-1;d+=1){var u=Uo.getBytes(e,i+o[d],i+o[d+1]);r&&(u=r(u)),n.push(u)}return{objects:n,startOffset:t,endOffset:s}}function rn(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),s=i>>4,o=15&i;if(15===s)break;if(t+=r[s],15===o)break;t+=r[o]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function sn(e,t,r){t=void 0!==t?t:0;var i=new Uo.Parser(e,t),s=[],o=[];for(r=void 0!==r?r:e.length;i.relativeOffset<r;){var n=i.parseByte();n<=21?(12===n&&(n=1200+i.parseByte()),s.push([n,o]),o=[]):o.push(rn(i,n))}return function(e){for(var t={},r=0;r<e.length;r+=1){var i,s=e[r][0],o=e[r][1];if(i=1===o.length?o[0]:o,t.hasOwnProperty(s)&&!isNaN(t[s]))throw new Error("Object "+t+" already has key "+s);t[s]=i}return t}(s)}function on(e,t){return t<=390?No[t]:e[t-391]}function nn(e,t,r){for(var i,s={},o=0;o<t.length;o+=1){var n=t[o];if(Array.isArray(n.type)){var a=[];a.length=n.type.length;for(var c=0;c<n.type.length;c++)void 0===(i=void 0!==e[n.op]?e[n.op][c]:void 0)&&(i=void 0!==n.value&&void 0!==n.value[c]?n.value[c]:null),"SID"===n.type[c]&&(i=on(r,i)),a[c]=i;s[n.name]=a}else void 0===(i=e[n.op])&&(i=void 0!==n.value?n.value:null),"SID"===n.type&&(i=on(r,i)),s[n.name]=i}return s}var an=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],cn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function hn(e,t){return nn(sn(e,0,e.byteLength),an,t)}function ln(e,t,r,i){return nn(sn(e,t,r),cn,i)}function dn(e,t,r,i){for(var s=[],o=0;o<r.length;o+=1){var n=hn(new DataView(new Uint8Array(r[o]).buffer),i);n._subrs=[],n._subrsBias=0,n._defaultWidthX=0,n._nominalWidthX=0;var a=n.private[0],c=n.private[1];if(0!==a&&0!==c){var h=ln(e,c+t,a,i);if(n._defaultWidthX=h.defaultWidthX,n._nominalWidthX=h.nominalWidthX,0!==h.subrs){var l=tn(e,c+h.subrs+t);n._subrs=l.objects,n._subrsBias=en(n._subrs)}n._privateDict=h}s.push(n)}return s}function un(e,t,r){var i,s,o,n,a,c,h,l,d=new io,u=[],p=0,f=!1,v=!1,g=0,m=0;if(e.isCIDFont){var y=e.tables.cff.topDict._fdSelect[t.index],S=e.tables.cff.topDict._fdArray[y];a=S._subrs,c=S._subrsBias,h=S._defaultWidthX,l=S._nominalWidthX}else a=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,h=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var w=h;function b(e,t){v&&d.closePath(),d.moveTo(e,t),v=!0}function E(){u.length%2!=0&&!f&&(w=u.shift()+l),p+=u.length>>1,u.length=0,f=!0}return function r(h){for(var y,S,x,T,P,C,k,D,O,A,F,R,L=0;L<h.length;){var M=h[L];switch(L+=1,M){case 1:case 3:case 18:case 23:E();break;case 4:u.length>1&&!f&&(w=u.shift()+l,f=!0),m+=u.pop(),b(g,m);break;case 5:for(;u.length>0;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 6:for(;u.length>0&&(g+=u.shift(),d.lineTo(g,m),0!==u.length);)m+=u.shift(),d.lineTo(g,m);break;case 7:for(;u.length>0&&(m+=u.shift(),d.lineTo(g,m),0!==u.length);)g+=u.shift(),d.lineTo(g,m);break;case 8:for(;u.length>0;)i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n+u.shift(),d.curveTo(i,s,o,n,g,m);break;case 10:P=u.pop()+c,(C=a[P])&&r(C);break;case 11:return;case 12:switch(M=h[L],L+=1,M){case 35:i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),k=o+u.shift(),D=n+u.shift(),O=k+u.shift(),A=D+u.shift(),F=O+u.shift(),R=A+u.shift(),g=F+u.shift(),m=R+u.shift(),u.shift(),d.curveTo(i,s,o,n,k,D),d.curveTo(O,A,F,R,g,m);break;case 34:i=g+u.shift(),s=m,o=i+u.shift(),n=s+u.shift(),k=o+u.shift(),D=n,O=k+u.shift(),A=n,F=O+u.shift(),R=m,g=F+u.shift(),d.curveTo(i,s,o,n,k,D),d.curveTo(O,A,F,R,g,m);break;case 36:i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),k=o+u.shift(),D=n,O=k+u.shift(),A=n,F=O+u.shift(),R=A+u.shift(),g=F+u.shift(),d.curveTo(i,s,o,n,k,D),d.curveTo(O,A,F,R,g,m);break;case 37:i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),k=o+u.shift(),D=n+u.shift(),O=k+u.shift(),A=D+u.shift(),F=O+u.shift(),R=A+u.shift(),Math.abs(F-g)>Math.abs(R-m)?g=F+u.shift():m=R+u.shift(),d.curveTo(i,s,o,n,k,D),d.curveTo(O,A,F,R,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+M),u.length=0}break;case 14:u.length>0&&!f&&(w=u.shift()+l,f=!0),v&&(d.closePath(),v=!1);break;case 19:case 20:E(),L+=p+7>>3;break;case 21:u.length>2&&!f&&(w=u.shift()+l,f=!0),m+=u.pop(),b(g+=u.pop(),m);break;case 22:u.length>1&&!f&&(w=u.shift()+l,f=!0),b(g+=u.pop(),m);break;case 24:for(;u.length>2;)i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n+u.shift(),d.curveTo(i,s,o,n,g,m);g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 25:for(;u.length>6;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);i=g+u.shift(),s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n+u.shift(),d.curveTo(i,s,o,n,g,m);break;case 26:for(u.length%2&&(g+=u.shift());u.length>0;)i=g,s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o,m=n+u.shift(),d.curveTo(i,s,o,n,g,m);break;case 27:for(u.length%2&&(m+=u.shift());u.length>0;)i=g+u.shift(),s=m,o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n,d.curveTo(i,s,o,n,g,m);break;case 28:y=h[L],S=h[L+1],u.push((y<<24|S<<16)>>16),L+=2;break;case 29:P=u.pop()+e.gsubrsBias,(C=e.gsubrs[P])&&r(C);break;case 30:for(;u.length>0&&(i=g,s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n+(1===u.length?u.shift():0),d.curveTo(i,s,o,n,g,m),0!==u.length);)i=g+u.shift(),s=m,o=i+u.shift(),n=s+u.shift(),m=n+u.shift(),g=o+(1===u.length?u.shift():0),d.curveTo(i,s,o,n,g,m);break;case 31:for(;u.length>0&&(i=g+u.shift(),s=m,o=i+u.shift(),n=s+u.shift(),m=n+u.shift(),g=o+(1===u.length?u.shift():0),d.curveTo(i,s,o,n,g,m),0!==u.length);)i=g,s=m+u.shift(),o=i+u.shift(),n=s+u.shift(),g=o+u.shift(),m=n+(1===u.length?u.shift():0),d.curveTo(i,s,o,n,g,m);break;default:M<32?console.log("Glyph "+t.index+": unknown operator "+M):M<247?u.push(M-139):M<251?(y=h[L],L+=1,u.push(256*(M-247)+y+108)):M<255?(y=h[L],L+=1,u.push(256*-(M-251)-y-108)):(y=h[L],S=h[L+1],x=h[L+2],T=h[L+3],L+=4,u.push((y<<24|S<<16|x<<8|T)/65536))}}}(r),t.advanceWidth=w,d}function pn(e,t){var r,i=No.indexOf(e);return i>=0&&(r=i),(i=t.indexOf(e))>=0?r=i+No.length:(r=No.length+t.length,t.push(e)),r}function fn(e,t,r){for(var i={},s=0;s<e.length;s+=1){var o=e[s],n=t[o.name];void 0===n||Ko(n,o.value)||("SID"===o.type&&(n=pn(n,r)),i[o.op]={name:o.name,type:o.type,value:n})}return i}function vn(e,t){var r=new Oo.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=fn(an,e,t),r}function gn(e){var t=new Oo.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function mn(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,s=0,o=0;o<r.commands.length;o+=1){var n=void 0,a=void 0,c=r.commands[o];if("Q"===c.type){var h=1/3,l=2/3;c={type:"C",x:c.x,y:c.y,x1:Math.round(h*i+l*c.x1),y1:Math.round(h*s+l*c.y1),x2:Math.round(h*c.x+l*c.x1),y2:Math.round(h*c.y+l*c.y1)}}if("M"===c.type)n=Math.round(c.x-i),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:n}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(c.x),s=Math.round(c.y);else if("L"===c.type)n=Math.round(c.x-i),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:n}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(c.x),s=Math.round(c.y);else if("C"===c.type){var d=Math.round(c.x1-i),u=Math.round(c.y1-s),p=Math.round(c.x2-c.x1),f=Math.round(c.y2-c.y1);n=Math.round(c.x-c.x2),a=Math.round(c.y-c.y2),t.push({name:"dx1",type:"NUMBER",value:d}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:p}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:n}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(c.x),s=Math.round(c.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var yn={parse:function(e,t,r,i){r.tables.cff={};var s=function(e,t){var r={};return r.formatMajor=Uo.getCard8(e,t),r.formatMinor=Uo.getCard8(e,t+1),r.size=Uo.getCard8(e,t+2),r.offsetSize=Uo.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}(e,t),o=tn(e,s.endOffset,Uo.bytesToString),n=tn(e,o.endOffset),a=tn(e,n.endOffset,Uo.bytesToString),c=tn(e,a.endOffset);r.gsubrs=c.objects,r.gsubrsBias=en(r.gsubrs);var h=dn(e,t,n.objects,a.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var l=h[0];if(r.tables.cff.topDict=l,l._privateDict&&(r.defaultWidthX=l._privateDict.defaultWidthX,r.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var d=l.fdArray,u=l.fdSelect;if(0===d||0===u)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=tn(e,d+=t),f=dn(e,t,p.objects,a.objects);l._fdArray=f,u+=t,l._fdSelect=function(e,t,r,i){var s,o=[],n=new Uo.Parser(e,t),a=n.parseCard8();if(0===a)for(var c=0;c<r;c++){if((s=n.parseCard8())>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");o.push(s)}else{if(3!==a)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);var h,l=n.parseCard16(),d=n.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var u=0;u<l;u++){if(s=n.parseCard8(),h=n.parseCard16(),s>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");if(h>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;d<h;d++)o.push(s);d=h}if(h!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return o}(e,u,r.numGlyphs,f.length)}var v,g=t+l.private[1],m=ln(e,g,l.private[0],a.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var y=g+m.subrs,S=tn(e,y);r.subrs=S.objects,r.subrsBias=en(r.subrs)}else r.subrs=[],r.subrsBias=0;i.lowMemory?(v=function(e,t){var r,i,s=[],o=Uo.getCard16(e,t);if(0!==o){var n=Uo.getByte(e,t+2);r=t+(o+1)*n+2;for(var a=t+3,c=0;c<o+1;c+=1)s.push(Uo.getOffset(e,a,n)),a+=n;i=r+s[o]}else i=t+2;return{offsets:s,startOffset:t,endOffset:i}}(e,t+l.charStrings),r.nGlyphs=v.offsets.length):(v=tn(e,t+l.charStrings),r.nGlyphs=v.objects.length);var w=function(e,t,r,i){var s,o,n=new Uo.Parser(e,t);r-=1;var a=[".notdef"],c=n.parseCard8();if(0===c)for(var h=0;h<r;h+=1)s=n.parseSID(),a.push(on(i,s));else if(1===c)for(;a.length<=r;){s=n.parseSID(),o=n.parseCard8();for(var l=0;l<=o;l+=1)a.push(on(i,s)),s+=1}else{if(2!==c)throw new Error("Unknown charset format "+c);for(;a.length<=r;){s=n.parseSID(),o=n.parseCard16();for(var d=0;d<=o;d+=1)a.push(on(i,s)),s+=1}}return a}(e,t+l.charset,r.nGlyphs,a.objects);if(0===l.encoding?r.cffEncoding=new $o(Ho,w):1===l.encoding?r.cffEncoding=new $o(Go,w):r.cffEncoding=function(e,t,r){var i,s={},o=new Uo.Parser(e,t),n=o.parseCard8();if(0===n)for(var a=o.parseCard8(),c=0;c<a;c+=1)s[i=o.parseCard8()]=c;else{if(1!==n)throw new Error("Unknown encoding format "+n);var h=o.parseCard8();i=1;for(var l=0;l<h;l+=1)for(var d=o.parseCard8(),u=o.parseCard8(),p=d;p<=d+u;p+=1)s[p]=i,i+=1}return new $o(s,r)}(e,t+l.encoding,w),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new Jo.GlyphSet(r),i.lowMemory)r._push=function(i){var s=function(e,t,r,i,s){var o=Uo.getCard16(r,i),n=0;0!==o&&(n=i+(o+1)*Uo.getByte(r,i+2)+2);var a=Uo.getBytes(r,n+t[e],n+t[e+1]);return a}(i,v.offsets,e,t+l.charStrings);r.glyphs.push(i,Jo.cffGlyphLoader(r,i,un,s))};else for(var b=0;b<r.nGlyphs;b+=1){var E=v.objects[b];r.glyphs.push(b,Jo.cffGlyphLoader(r,b,un,E))}},make:function(e,t){for(var r,i=new Oo.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),s=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},n=[],a=1;a<e.length;a+=1)r=e.get(a),n.push(r.name);var c=[];i.header=new Oo.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),i.nameIndex=function(e){var t=new Oo.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var h=vn(o,c);i.topDictIndex=gn(h),i.globalSubrIndex=new Oo.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),i.charsets=function(e,t){for(var r=new Oo.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var s=pn(e[i],t);r.fields.push({name:"glyph_"+i,type:"SID",value:s})}return r}(n,c),i.charStringsIndex=function(e){for(var t=new Oo.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var i=e.get(r),s=mn(i);t.charStrings.push({name:i.name,type:"CHARSTRING",value:s})}return t}(e),i.privateDict=function(e,t){var r=new Oo.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=fn(cn,{},t),r}(0,c),i.stringIndex=function(e){var t=new Oo.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(c);var l=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();return o.charset=l,o.encoding=0,o.charStrings=o.charset+i.charsets.sizeOf(),o.private[1]=o.charStrings+i.charStringsIndex.sizeOf(),h=vn(o,c),i.topDictIndex=gn(h),i}},Sn={parse:function(e,t){var r={},i=new Uo.Parser(e,t);return r.version=i.parseVersion(),r.fontRevision=Math.round(1e3*i.parseFixed())/1e3,r.checkSumAdjustment=i.parseULong(),r.magicNumber=i.parseULong(),no.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=i.parseUShort(),r.unitsPerEm=i.parseUShort(),r.created=i.parseLongDateTime(),r.modified=i.parseLongDateTime(),r.xMin=i.parseShort(),r.yMin=i.parseShort(),r.xMax=i.parseShort(),r.yMax=i.parseShort(),r.macStyle=i.parseUShort(),r.lowestRecPPEM=i.parseUShort(),r.fontDirectionHint=i.parseShort(),r.indexToLocFormat=i.parseShort(),r.glyphDataFormat=i.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new Oo.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},wn={parse:function(e,t){var r={},i=new Uo.Parser(e,t);return r.version=i.parseVersion(),r.ascender=i.parseShort(),r.descender=i.parseShort(),r.lineGap=i.parseShort(),r.advanceWidthMax=i.parseUShort(),r.minLeftSideBearing=i.parseShort(),r.minRightSideBearing=i.parseShort(),r.xMaxExtent=i.parseShort(),r.caretSlopeRise=i.parseShort(),r.caretSlopeRun=i.parseShort(),r.caretOffset=i.parseShort(),i.relativeOffset+=8,r.metricDataFormat=i.parseShort(),r.numberOfHMetrics=i.parseUShort(),r},make:function(e){return new Oo.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},bn={parse:function(e,t,r,i,s,o,n){n.lowMemory?function(e,t,r,i,s){var o,n;e._hmtxTableData={};for(var a=new Uo.Parser(t,r),c=0;c<s;c+=1)c<i&&(o=a.parseUShort(),n=a.parseShort()),e._hmtxTableData[c]={advanceWidth:o,leftSideBearing:n}}(e,t,r,i,s):function(e,t,r,i,s){for(var o,n,a=new Uo.Parser(e,t),c=0;c<i;c+=1){c<r&&(o=a.parseUShort(),n=a.parseShort());var h=s.get(c);h.advanceWidth=o,h.leftSideBearing=n}}(t,r,i,s,o)},make:function(e){for(var t=new Oo.Table("hmtx",[]),r=0;r<e.length;r+=1){var i=e.get(r),s=i.advanceWidth||0,o=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:s}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return t}},En={make:function(e){for(var t=new Oo.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",i=12+4*e.length,s=0;s<e.length;++s){var o=r.indexOf(e[s]);o<0&&(o=r.length,r+=e[s]),t.fields.push({name:"offset "+s,type:"USHORT",value:i+o}),t.fields.push({name:"length "+s,type:"USHORT",value:e[s].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new Uo.Parser(e,t),i=r.parseULong();no.argument(1===i,"Unsupported ltag table version."),r.skip("uLong",1);for(var s=r.parseULong(),o=[],n=0;n<s;n++){for(var a="",c=t+r.parseUShort(),h=r.parseUShort(),l=c;l<c+h;++l)a+=String.fromCharCode(e.getInt8(l));o.push(a)}return o}},xn={parse:function(e,t){var r={},i=new Uo.Parser(e,t);return r.version=i.parseVersion(),r.numGlyphs=i.parseUShort(),1===r.version&&(r.maxPoints=i.parseUShort(),r.maxContours=i.parseUShort(),r.maxCompositePoints=i.parseUShort(),r.maxCompositeContours=i.parseUShort(),r.maxZones=i.parseUShort(),r.maxTwilightPoints=i.parseUShort(),r.maxStorage=i.parseUShort(),r.maxFunctionDefs=i.parseUShort(),r.maxInstructionDefs=i.parseUShort(),r.maxStackElements=i.parseUShort(),r.maxSizeOfInstructions=i.parseUShort(),r.maxComponentElements=i.parseUShort(),r.maxComponentDepth=i.parseUShort()),r},make:function(e){return new Oo.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Tn=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Pn={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Cn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},kn={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Dn(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return Pn[t];case 3:return kn[t]}}var On="utf-16",An={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Fn={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Rn(e,t,r){switch(e){case 0:return On;case 1:return Fn[r]||An[t];case 3:if(1===t||10===t)return On}}function Ln(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function Mn(e,t,r,i,s,o){return new Oo.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:o}])}function Bn(e,t){var r=function(e,t){var r=e.length,i=t.length-r+1;e:for(var s=0;s<i;s++)for(;s<i;s++){for(var o=0;o<r;o++)if(t[s+o]!==e[o])continue e;return s}return-1}(e,t);if(r<0){r=t.length;for(var i=0,s=e.length;i<s;++i)t.push(e[i])}return r}var In={parse:function(e,t,r){for(var i={},s=new Uo.Parser(e,t),o=s.parseUShort(),n=s.parseUShort(),a=s.offset+s.parseUShort(),c=0;c<n;c++){var h=s.parseUShort(),l=s.parseUShort(),d=s.parseUShort(),u=s.parseUShort(),p=Tn[u]||u,f=s.parseUShort(),v=s.parseUShort(),g=Dn(h,d,r),m=Rn(h,l,d);if(void 0!==m&&void 0!==g){var y;if(y=m===On?co.UTF16(e,a+v,f):co.MACSTRING(e,a+v,f,m)){var S=i[p];void 0===S&&(S=i[p]={}),S[g]=y}}}return 1===o&&s.parseUShort(),i},make:function(e,t){var r,i=[],s={},o=Ln(Tn);for(var n in e){var a=o[n];if(void 0===a&&(a=n),r=parseInt(a),isNaN(r))throw new Error('Name table entry "'+n+'" does not exist, see nameTableNames for complete list.');s[r]=e[n],i.push(r)}for(var c=Ln(Pn),h=Ln(kn),l=[],d=[],u=0;u<i.length;u++){var p=s[r=i[u]];for(var f in p){var v=p[f],g=1,m=c[f],y=Cn[m],S=Rn(g,y,m),w=ho.MACSTRING(v,S);void 0===w&&(g=0,(m=t.indexOf(f))<0&&(m=t.length,t.push(f)),y=4,w=ho.UTF16(v));var b=Bn(w,d);l.push(Mn(g,y,m,r,w.length,b));var E=h[f];if(void 0!==E){var x=ho.UTF16(v),T=Bn(x,d);l.push(Mn(3,1,E,r,x.length,T))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var P=new Oo.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),C=0;C<l.length;C++)P.fields.push({name:"record_"+C,type:"RECORD",value:l[C]});return P.fields.push({name:"strings",type:"LITERAL",value:d}),P}},Un=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Wn={parse:function(e,t){var r={},i=new Uo.Parser(e,t);r.version=i.parseUShort(),r.xAvgCharWidth=i.parseShort(),r.usWeightClass=i.parseUShort(),r.usWidthClass=i.parseUShort(),r.fsType=i.parseUShort(),r.ySubscriptXSize=i.parseShort(),r.ySubscriptYSize=i.parseShort(),r.ySubscriptXOffset=i.parseShort(),r.ySubscriptYOffset=i.parseShort(),r.ySuperscriptXSize=i.parseShort(),r.ySuperscriptYSize=i.parseShort(),r.ySuperscriptXOffset=i.parseShort(),r.ySuperscriptYOffset=i.parseShort(),r.yStrikeoutSize=i.parseShort(),r.yStrikeoutPosition=i.parseShort(),r.sFamilyClass=i.parseShort(),r.panose=[];for(var s=0;s<10;s++)r.panose[s]=i.parseByte();return r.ulUnicodeRange1=i.parseULong(),r.ulUnicodeRange2=i.parseULong(),r.ulUnicodeRange3=i.parseULong(),r.ulUnicodeRange4=i.parseULong(),r.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),r.fsSelection=i.parseUShort(),r.usFirstCharIndex=i.parseUShort(),r.usLastCharIndex=i.parseUShort(),r.sTypoAscender=i.parseShort(),r.sTypoDescender=i.parseShort(),r.sTypoLineGap=i.parseShort(),r.usWinAscent=i.parseUShort(),r.usWinDescent=i.parseUShort(),r.version>=1&&(r.ulCodePageRange1=i.parseULong(),r.ulCodePageRange2=i.parseULong()),r.version>=2&&(r.sxHeight=i.parseShort(),r.sCapHeight=i.parseShort(),r.usDefaultChar=i.parseUShort(),r.usBreakChar=i.parseUShort(),r.usMaxContent=i.parseUShort()),r},make:function(e){return new Oo.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Un,getUnicodeRange:function(e){for(var t=0;t<Un.length;t+=1){var r=Un[t];if(e>=r.begin&&e<r.end)return t}return-1}},_n={parse:function(e,t){var r={},i=new Uo.Parser(e,t);switch(r.version=i.parseVersion(),r.italicAngle=i.parseFixed(),r.underlinePosition=i.parseShort(),r.underlineThickness=i.parseShort(),r.isFixedPitch=i.parseULong(),r.minMemType42=i.parseULong(),r.maxMemType42=i.parseULong(),r.minMemType1=i.parseULong(),r.maxMemType1=i.parseULong(),r.version){case 1:r.names=Vo.slice();break;case 2:r.numberOfGlyphs=i.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var s=0;s<r.numberOfGlyphs;s++)r.glyphNameIndex[s]=i.parseUShort();r.names=[];for(var o=0;o<r.numberOfGlyphs;o++)if(r.glyphNameIndex[o]>=Vo.length){var n=i.parseChar();r.names.push(i.parseString(n))}break;case 2.5:r.numberOfGlyphs=i.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.offset[a]=i.parseChar()}return r},make:function(){return new Oo.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Nn=new Array(9);Nn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Bo.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(Bo.coverage),substitute:this.parseOffset16List()}:void no.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},Nn[2]=function(){var e=this.parseUShort();return no.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Bo.coverage),sequences:this.parseListOfLists()}},Nn[3]=function(){var e=this.parseUShort();return no.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Bo.coverage),alternateSets:this.parseListOfLists()}},Nn[4]=function(){var e=this.parseUShort();return no.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Bo.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var Hn={sequenceIndex:Bo.uShort,lookupListIndex:Bo.uShort};Nn[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(Bo.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Hn)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(Bo.coverage),classDef:this.parsePointer(Bo.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,Hn)}}))};if(3===t){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,Bo.pointer(Bo.coverage)),lookupRecords:this.parseRecordList(i,Hn)}}no.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Nn[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Bo.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Hn)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(Bo.coverage),backtrackClassDef:this.parsePointer(Bo.classDef),inputClassDef:this.parsePointer(Bo.classDef),lookaheadClassDef:this.parsePointer(Bo.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Hn)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(Bo.pointer(Bo.coverage)),inputCoverage:this.parseList(Bo.pointer(Bo.coverage)),lookaheadCoverage:this.parseList(Bo.pointer(Bo.coverage)),lookupRecords:this.parseRecordList(Hn)}:void no.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Nn[7]=function(){var e=this.parseUShort();no.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new Bo(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:Nn[t].call(r)}},Nn[8]=function(){var e=this.parseUShort();return no.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Bo.coverage),backtrackCoverage:this.parseList(Bo.pointer(Bo.coverage)),lookaheadCoverage:this.parseList(Bo.pointer(Bo.coverage)),substitutes:this.parseUShortList()}};var Gn=new Array(9);Gn[1]=function(e){return 1===e.substFormat?new Oo.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Oo.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)}].concat(Oo.ushortList("substitute",e.substitute)))},Gn[2]=function(e){return no.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new Oo.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)}].concat(Oo.tableList("seqSet",e.sequences,(function(e){return new Oo.Table("sequenceSetTable",Oo.ushortList("sequence",e))}))))},Gn[3]=function(e){return no.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Oo.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)}].concat(Oo.tableList("altSet",e.alternateSets,(function(e){return new Oo.Table("alternateSetTable",Oo.ushortList("alternate",e))}))))},Gn[4]=function(e){return no.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Oo.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)}].concat(Oo.tableList("ligSet",e.ligatureSets,(function(e){return new Oo.Table("ligatureSetTable",Oo.tableList("ligature",e,(function(e){return new Oo.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Oo.ushortList("component",e.components,e.components.length+1)))})))}))))},Gn[6]=function(e){if(1===e.substFormat){var t=new Oo.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new Oo.Coverage(e.coverage)}].concat(Oo.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new Oo.Table("chainRuleSetTable",Oo.tableList("chainRule",e,(function(e){var t=Oo.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(Oo.ushortList("inputGlyph",e.input,e.input.length+1)).concat(Oo.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(Oo.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,r){t=t.concat({name:"sequenceIndex"+r,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:e.lookupListIndex})})),new Oo.Table("chainRuleTable",t)})))}))));return t}if(2===e.substFormat)no.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,t){r.push({name:"backtrackCoverage"+t,type:"TABLE",value:new Oo.Coverage(e)})})),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,t){r.push({name:"inputCoverage"+t,type:"TABLE",value:new Oo.Coverage(e)})})),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,t){r.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new Oo.Coverage(e)})})),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,t){r=r.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})})),new Oo.Table("chainContextTable",r)}no.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var Vn={parse:function(e,t){var r=new Bo(e,t=t||0),i=r.parseVersion(1);return no.argument(1===i||1.1===i,"Unsupported GSUB table version."),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Nn)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Nn),variations:r.parseFeatureVariationsList()}},make:function(e){return new Oo.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Oo.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Oo.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Oo.LookupList(e.lookups,Gn)}])}},zn={parse:function(e,t){var r=new Uo.Parser(e,t),i=r.parseULong();no.argument(1===i,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var s=r.parseULong(),o={},n=0;n<s;n++){var a=r.parseTag(),c=r.parseULong(),h=r.parseULong(),l=co.UTF8(e,t+c,h);o[a]=l}return o},make:function(e){var t=Object.keys(e).length,r="",i=16+12*t,s=new Oo.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var n=r.length;r+=e[o],s.fields.push({name:"tag "+o,type:"TAG",value:o}),s.fields.push({name:"offset "+o,type:"ULONG",value:i+n}),s.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),s}};function jn(e){return Math.log(e)/Math.log(2)|0}function $n(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%Math.pow(2,32)}function qn(e,t,r,i){return new Oo.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==i?i:0}])}function Yn(e){var t=new Oo.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,jn(t.numTables));t.searchRange=16*r,t.entrySelector=jn(r),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],s=[],o=t.sizeOf()+qn().sizeOf()*t.numTables;o%4!=0;)o+=1,s.push({name:"padding",type:"BYTE",value:0});for(var n=0;n<e.length;n+=1){var a=e[n];no.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid.");var c=a.sizeOf(),h=qn(a.tableName,$n(a.encode()),o,c);for(i.push({name:h.tag+" Table Record",type:"RECORD",value:h}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),o+=c,no.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,s.push({name:"padding",type:"BYTE",value:0})}return i.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(i),t.fields=t.fields.concat(s),t}function Xn(e,t,r){for(var i=0;i<t.length;i+=1){var s=e.charToGlyphIndex(t[i]);if(s>0)return e.glyphs.get(s).getMetrics()}return r}function Zn(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}var Qn=function(e){for(var t,r=[],i=[],s=[],o=[],n=[],a=[],c=[],h=0,l=0,d=0,u=0,p=0,f=0;f<e.glyphs.length;f+=1){var v=e.glyphs.get(f),g=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+f+"): advanceWidth is not a number.");(t>g||void 0===t)&&g>0&&(t=g),h<g&&(h=g);var m=Wn.getUnicodeRange(g);if(m<32)l|=1<<m;else if(m<64)d|=1<<m-32;else if(m<96)u|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<m-96}if(".notdef"!==v.name){var y=v.getMetrics();r.push(y.xMin),i.push(y.yMin),s.push(y.xMax),o.push(y.yMax),a.push(y.leftSideBearing),c.push(y.rightSideBearing),n.push(v.advanceWidth)}}var S={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,s),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,n),advanceWidthAvg:Zn(n),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,c)};S.ascender=e.ascender,S.descender=e.descender;var w=Sn.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:S.xMin,yMin:S.yMin,xMax:S.xMax,yMax:S.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),b=wn.make({ascender:S.ascender,descender:S.descender,advanceWidthMax:S.advanceWidthMax,minLeftSideBearing:S.minLeftSideBearing,minRightSideBearing:S.minRightSideBearing,xMaxExtent:S.maxLeftSideBearing+(S.xMax-S.xMin),numberOfHMetrics:e.glyphs.length}),E=xn.make(e.glyphs.length),x=Wn.make(Object.assign({xAvgCharWidth:Math.round(S.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:h,ulUnicodeRange1:l,ulUnicodeRange2:d,ulUnicodeRange3:u,ulUnicodeRange4:p,sTypoAscender:S.ascender,sTypoDescender:S.descender,sTypoLineGap:0,usWinAscent:S.yMax,usWinDescent:Math.abs(S.yMin),ulCodePageRange1:1,sxHeight:Xn(e,"xyvw",{yMax:Math.round(S.ascender/2)}).yMax,sCapHeight:Xn(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",S).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),T=bn.make(e.glyphs),P=_o.make(e.glyphs),C=e.getEnglishName("fontFamily"),k=e.getEnglishName("fontSubfamily"),D=C+" "+k,O=e.getEnglishName("postScriptName");O||(O=C.replace(/\s/g,"")+"-"+k);var A={};for(var F in e.names)A[F]=e.names[F];A.uniqueID||(A.uniqueID={en:e.getEnglishName("manufacturer")+":"+D}),A.postScriptName||(A.postScriptName={en:O}),A.preferredFamily||(A.preferredFamily=e.names.fontFamily),A.preferredSubfamily||(A.preferredSubfamily=e.names.fontSubfamily);var R=[],L=In.make(A,R),M=R.length>0?En.make(R):void 0,B=_n.make(),I=yn.make(e.glyphs,{version:e.getEnglishName("version"),fullName:D,familyName:C,weightName:k,postScriptName:O,unitsPerEm:e.unitsPerEm,fontBBox:[0,S.yMin,S.ascender,S.advanceWidthMax]}),U=e.metas&&Object.keys(e.metas).length>0?zn.make(e.metas):void 0,W=[w,b,E,x,L,P,B,I,T];M&&W.push(M),e.tables.gsub&&W.push(Vn.make(e.tables.gsub)),U&&W.push(U);for(var _=Yn(W),N=$n(_.encode()),H=_.fields,G=!1,V=0;V<H.length;V+=1)if("head table"===H[V].name){H[V].value.checkSumAdjustment=2981146554-N,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return _};function Jn(e,t){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>>1,o=e[s].tag;if(o===t)return s;o<t?r=s+1:i=s-1}return-r-1}function Kn(e,t){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>>1,o=e[s];if(o===t)return s;o<t?r=s+1:i=s-1}return-r-1}function ea(e,t){for(var r,i=0,s=e.length-1;i<=s;){var o=i+s>>>1,n=(r=e[o]).start;if(n===t)return r;n<t?i=o+1:s=o-1}if(i>0)return t>(r=e[i-1]).end?0:r}function ta(e,t){this.font=e,this.tableName=t}function ra(e){ta.call(this,e,"gpos")}function ia(e){ta.call(this,e,"gsub")}function sa(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function oa(e,t,r){for(var i=e.subtables,s=0;s<i.length;s++){var o=i[s];if(o.substFormat===t)return o}if(r)return i.push(r),r}function na(e,t){if(!e)throw t}function aa(e,t,r,i,s){var o;return(t&i)>0?(o=e.parseByte(),t&s||(o=-o),o=r+o):o=(t&s)>0?r:r+e.parseShort(),o}function ca(e,t,r){var i,s,o=new Uo.Parser(t,r);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),e.numberOfContours>0){for(var n=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)n.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var c=0;c<e.instructionLength;c+=1)e.instructions.push(o.parseByte());var h=n[n.length-1]+1;i=[];for(var l=0;l<h;l+=1)if(s=o.parseByte(),i.push(s),(8&s)>0)for(var d=o.parseByte(),u=0;u<d;u+=1)i.push(s),l+=1;if(no.argument(i.length===h,"Bad flags."),n.length>0){var p,f=[];if(h>0){for(var v=0;v<h;v+=1)s=i[v],(p={}).onCurve=!!(1&s),p.lastPointOfContour=n.indexOf(v)>=0,f.push(p);for(var g=0,m=0;m<h;m+=1)s=i[m],(p=f[m]).x=aa(o,s,g,2,16),g=p.x;for(var y=0,S=0;S<h;S+=1)s=i[S],(p=f[S]).y=aa(o,s,y,4,32),y=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var w=!0;w;){i=o.parseUShort();var b={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(b.dx=o.parseShort(),b.dy=o.parseShort()):b.matchedPoints=[o.parseUShort(),o.parseUShort()]:(2&i)>0?(b.dx=o.parseChar(),b.dy=o.parseChar()):b.matchedPoints=[o.parseByte(),o.parseByte()],(8&i)>0?b.xScale=b.yScale=o.parseF2Dot14():(64&i)>0?(b.xScale=o.parseF2Dot14(),b.yScale=o.parseF2Dot14()):(128&i)>0&&(b.xScale=o.parseF2Dot14(),b.scale01=o.parseF2Dot14(),b.scale10=o.parseF2Dot14(),b.yScale=o.parseF2Dot14()),e.components.push(b),w=!!(32&i)}if(256&i){e.instructionLength=o.parseUShort(),e.instructions=[];for(var E=0;E<e.instructionLength;E+=1)e.instructions.push(o.parseByte())}}}function ha(e,t){for(var r=[],i=0;i<e.length;i+=1){var s=e[i],o={x:t.xScale*s.x+t.scale01*s.y+t.dx,y:t.scale10*s.x+t.yScale*s.y+t.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};r.push(o)}return r}function la(e){var t=new io;if(!e)return t;for(var r=function(e){for(var t=[],r=[],i=0;i<e.length;i+=1){var s=e[i];r.push(s),s.lastPointOfContour&&(t.push(r),r=[])}return no.argument(0===r.length,"There are still points left in the current contour."),t}(e),i=0;i<r.length;++i){var s=r[i],o=null,n=s[s.length-1],a=s[0];if(n.onCurve)t.moveTo(n.x,n.y);else if(a.onCurve)t.moveTo(a.x,a.y);else{var c={x:.5*(n.x+a.x),y:.5*(n.y+a.y)};t.moveTo(c.x,c.y)}for(var h=0;h<s.length;++h)if(o=n,n=a,a=s[(h+1)%s.length],n.onCurve)t.lineTo(n.x,n.y);else{var l=a;o.onCurve||(n.x,o.x,n.y,o.y),a.onCurve||(l={x:.5*(n.x+a.x),y:.5*(n.y+a.y)}),t.quadraticCurveTo(n.x,n.y,l.x,l.y)}t.closePath()}return t}function da(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var i=t.components[r],s=e.get(i.glyphIndex);if(s.getPath(),s.points){var o=void 0;if(void 0===i.matchedPoints)o=ha(s.points,i);else{if(i.matchedPoints[0]>t.points.length-1||i.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+t.name);var n=t.points[i.matchedPoints[0]],a=s.points[i.matchedPoints[1]],c={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};a=ha([a],c)[0],c.dx=n.x-a.x,c.dy=n.y-a.y,o=ha(s.points,c)}t.points=t.points.concat(o)}}return la(t.points)}ta.prototype={searchTag:Jn,binSearch:Kn,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var i=e.scripts[r].tag;if("DFLT"===i)return i;"latn"===i&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var i=r.scripts,s=Jn(r.scripts,e);if(s>=0)return i[s].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-s,0,o),o.script}}},getLangSysTable:function(e,t,r){var i=this.getScriptTable(e,r);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var s=Jn(i.langSysRecords,t);if(s>=0)return i.langSysRecords[s].langSys;if(r){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-s,0,o),o.langSys}}},getFeatureTable:function(e,t,r,i){var s=this.getLangSysTable(e,t,i);if(s){for(var o,n=s.featureIndexes,a=this.font.tables[this.tableName].features,c=0;c<n.length;c++)if((o=a[n[c]]).tag===r)return o.feature;if(i){var h=a.length;return no.assert(0===h||r>=a[h-1].tag,"Features must be added in alphabetical order."),o={tag:r,feature:{params:0,lookupListIndexes:[]}},a.push(o),n.push(h),o.feature}}},getLookupTables:function(e,t,r,i,s){var o=this.getFeatureTable(e,t,r,s),n=[];if(o){for(var a,c=o.lookupListIndexes,h=this.font.tables[this.tableName].lookups,l=0;l<c.length;l++)(a=h[c[l]]).lookupType===i&&n.push(a);if(0===n.length&&s){a={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=h.length;return h.push(a),c.push(d),[a]}}return n},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=ea(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=Kn(e.glyphs,t);return r>=0?r:-1;case 2:var i=ea(e.ranges,t);return i?i.index+t-i.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,i=0;i<r.length;i++)for(var s=r[i],o=s.start,n=s.end,a=o;a<=n;a++)t.push(a);return t}},ra.prototype=ta.prototype,ra.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},ra.prototype.getKerningValue=function(e,t,r){for(var i=0;i<e.length;i++)for(var s=e[i].subtables,o=0;o<s.length;o++){var n=s[o],a=this.getCoverageIndex(n.coverage,t);if(!(a<0))switch(n.posFormat){case 1:for(var c=n.pairSets[a],h=0;h<c.length;h++){var l=c[h];if(l.secondGlyph===r)return l.value1&&l.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(n.classDef1,t),u=this.getGlyphClass(n.classDef2,r),p=n.classRecords[d][u];return p.value1&&p.value1.xAdvance||0}}return 0},ra.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},ia.prototype=ta.prototype,ia.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ia.prototype.getSingle=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,1),o=0;o<s.length;o++)for(var n=s[o].subtables,a=0;a<n.length;a++){var c=n[a],h=this.expandCoverage(c.coverage),l=void 0;if(1===c.substFormat){var d=c.deltaGlyphId;for(l=0;l<h.length;l++){var u=h[l];i.push({sub:u,by:u+d})}}else{var p=c.substitute;for(l=0;l<h.length;l++)i.push({sub:h[l],by:p[l]})}}return i},ia.prototype.getMultiple=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,2),o=0;o<s.length;o++)for(var n=s[o].subtables,a=0;a<n.length;a++){var c=n[a],h=this.expandCoverage(c.coverage),l=void 0;for(l=0;l<h.length;l++){var d=h[l],u=c.sequences[l];i.push({sub:d,by:u})}}return i},ia.prototype.getAlternates=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,3),o=0;o<s.length;o++)for(var n=s[o].subtables,a=0;a<n.length;a++)for(var c=n[a],h=this.expandCoverage(c.coverage),l=c.alternateSets,d=0;d<h.length;d++)i.push({sub:h[d],by:l[d]});return i},ia.prototype.getLigatures=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,4),o=0;o<s.length;o++)for(var n=s[o].subtables,a=0;a<n.length;a++)for(var c=n[a],h=this.expandCoverage(c.coverage),l=c.ligatureSets,d=0;d<h.length;d++)for(var u=h[d],p=l[d],f=0;f<p.length;f++){var v=p[f];i.push({sub:[u].concat(v.components),by:v.ligGlyph})}return i},ia.prototype.addSingle=function(e,t,r,i){var s=oa(this.getLookupTables(r,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});no.assert(1===s.coverage.format,"Single: unable to modify coverage table format "+s.coverage.format);var o=t.sub,n=this.binSearch(s.coverage.glyphs,o);n<0&&(n=-1-n,s.coverage.glyphs.splice(n,0,o),s.substitute.splice(n,0,0)),s.substitute[n]=t.by},ia.prototype.addMultiple=function(e,t,r,i){no.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var s=oa(this.getLookupTables(r,i,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});no.assert(1===s.coverage.format,"Multiple: unable to modify coverage table format "+s.coverage.format);var o=t.sub,n=this.binSearch(s.coverage.glyphs,o);n<0&&(n=-1-n,s.coverage.glyphs.splice(n,0,o),s.sequences.splice(n,0,0)),s.sequences[n]=t.by},ia.prototype.addAlternate=function(e,t,r,i){var s=oa(this.getLookupTables(r,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});no.assert(1===s.coverage.format,"Alternate: unable to modify coverage table format "+s.coverage.format);var o=t.sub,n=this.binSearch(s.coverage.glyphs,o);n<0&&(n=-1-n,s.coverage.glyphs.splice(n,0,o),s.alternateSets.splice(n,0,0)),s.alternateSets[n]=t.by},ia.prototype.addLigature=function(e,t,r,i){var s=this.getLookupTables(r,i,e,4,!0)[0],o=s.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=o),no.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var n=t.sub[0],a=t.sub.slice(1),c={ligGlyph:t.by,components:a},h=this.binSearch(o.coverage.glyphs,n);if(h>=0){for(var l=o.ligatureSets[h],d=0;d<l.length;d++)if(sa(l[d].components,a))return;l.push(c)}else h=-1-h,o.coverage.glyphs.splice(h,0,n),o.ligatureSets.splice(h,0,[c])},ia.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r);case"ccmp":return this.getMultiple(e,t,r).concat(this.getLigatures(e,t,r));case"stch":return this.getMultiple(e,t,r)}},ia.prototype.add=function(e,t,r,i){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,i);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,i):this.addAlternate(e,t,r,i);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,i);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,r,i):this.addLigature(e,t,r,i)}};var ua,pa,fa,va,ga={getPath:la,parse:function(e,t,r,i,s){return s.lowMemory?function(e,t,r,i){var s=new Jo.GlyphSet(i);return i._push=function(o){var n=r[o];n!==r[o+1]?s.push(o,Jo.ttfGlyphLoader(i,o,ca,e,t+n,da)):s.push(o,Jo.glyphLoader(i,o))},s}(e,t,r,i):function(e,t,r,i){for(var s=new Jo.GlyphSet(i),o=0;o<r.length-1;o+=1){var n=r[o];n!==r[o+1]?s.push(o,Jo.ttfGlyphLoader(i,o,ca,e,t+n,da)):s.push(o,Jo.glyphLoader(i,o))}return s}(e,t,r,i)}};function ma(e){this.font=e,this.getCommands=function(e){return ga.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function ya(e){return e}function Sa(e){return Math.sign(e)*Math.round(Math.abs(e))}function wa(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function ba(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ea(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function xa(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Ta=function(e){var t=this.srPeriod,r=this.srPhase,i=1;return e<0&&(e=-e,i=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*i:e*i},Pa={x:1,y:0,axis:"x",distance:function(e,t,r,i){return(r?e.xo:e.x)-(i?t.xo:t.x)},interpolate:function(e,t,r,i){var s,o,n,a,c,h,l;if(!i||i===this)return s=e.xo-t.xo,o=e.xo-r.xo,c=t.x-t.xo,h=r.x-r.xo,0===(l=(n=Math.abs(s))+(a=Math.abs(o)))?void(e.x=e.xo+(c+h)/2):void(e.x=e.xo+(c*a+h*n)/l);s=i.distance(e,t,!0,!0),o=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(n=Math.abs(s))+(a=Math.abs(o)))?Pa.setRelative(e,e,(c*a+h*n)/l,i,!0):Pa.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,i,s){if(i&&i!==this){var o=s?t.xo:t.x,n=s?t.yo:t.y,a=o+r*i.x,c=n+r*i.y;e.x=a+(e.y-c)/i.normalSlope}else e.x=(s?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Ca={x:0,y:1,axis:"y",distance:function(e,t,r,i){return(r?e.yo:e.y)-(i?t.yo:t.y)},interpolate:function(e,t,r,i){var s,o,n,a,c,h,l;if(!i||i===this)return s=e.yo-t.yo,o=e.yo-r.yo,c=t.y-t.yo,h=r.y-r.yo,0===(l=(n=Math.abs(s))+(a=Math.abs(o)))?void(e.y=e.yo+(c+h)/2):void(e.y=e.yo+(c*a+h*n)/l);s=i.distance(e,t,!0,!0),o=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(n=Math.abs(s))+(a=Math.abs(o)))?Ca.setRelative(e,e,(c*a+h*n)/l,i,!0):Ca.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:0,setRelative:function(e,t,r,i,s){if(i&&i!==this){var o=s?t.xo:t.x,n=s?t.yo:t.y,a=o+r*i.x,c=n+r*i.y;e.y=c+i.normalSlope*(e.x-a)}else e.y=(s?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function ka(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Da(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1==(e/=r)&&0===t?Pa:0===e&&1===t?Ca:new ka(e,t)}function Oa(e,t,r,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Pa),Object.freeze(Ca),ka.prototype.distance=function(e,t,r,i){return this.x*Pa.distance(e,t,r,i)+this.y*Ca.distance(e,t,r,i)},ka.prototype.interpolate=function(e,t,r,i){var s,o,n,a,c,h,l;n=i.distance(e,t,!0,!0),a=i.distance(e,r,!0,!0),s=i.distance(t,t,!1,!0),o=i.distance(r,r,!1,!0),0!==(l=(c=Math.abs(n))+(h=Math.abs(a)))?this.setRelative(e,e,(s*h+o*c)/l,i,!0):this.setRelative(e,e,(s+o)/2,i,!0)},ka.prototype.setRelative=function(e,t,r,i,s){i=i||this;var o=s?t.xo:t.x,n=s?t.yo:t.y,a=o+r*i.x,c=n+r*i.y,h=i.normalSlope,l=this.slope,d=e.x,u=e.y;e.x=(l*d-h*a+c-u)/(l-h),e.y=l*(e.x-d)+u},ka.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Oa.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Oa.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Aa=Object.freeze(new Oa(0,0)),Fa={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Ra(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Pa,this.round=Sa}}function La(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new Oa(0,0)}function Ma(e,t){var r,i=e.prog,s=e.ip,o=1;do{if(88===(r=i[++s]))o++;else if(89===r)o--;else if(64===r)s+=i[s+1]+1;else if(65===r)s+=2*i[s+1]+1;else if(r>=176&&r<=183)s+=r-176+1;else if(r>=184&&r<=191)s+=2*(r-184+1);else if(t&&1===o&&27===r)break}while(o>0);e.ip=s}function Ba(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function Ia(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Ua(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function Wa(e,t){var r,i,s=t.stack,o=s.pop(),n=s.pop(),a=t.z2[o],c=t.z1[n];exports.DEBUG&&console.log("SPVTL["+e+"]",o,n),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.pv=t.dpv=Da(r,i)}function _a(e,t){var r,i,s=t.stack,o=s.pop(),n=s.pop(),a=t.z2[o],c=t.z1[n];exports.DEBUG&&console.log("SFVTL["+e+"]",o,n),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.fv=Da(r,i)}function Na(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Ha(e,t){var r=t.stack.pop(),i=t.z0[r],s=t.fv,o=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var n=o.distance(i,Aa);e&&(n=t.round(n)),s.setRelative(i,Aa,n,o),s.touch(i),t.rp0=t.rp1=r}function Ga(e,t){var r,i,s,o=t.z2,n=o.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<n;a++)r=o[a],e.touched(r)||(i=r.prevTouched(e))!==r&&(i===(s=r.nextTouched(e))&&e.setRelative(r,r,e.distance(i,i,!1,!0),e,!0),e.interpolate(r,i,s,e))}function Va(e,t){for(var r=t.stack,i=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[i],o=t.fv,n=t.pv,a=t.loop,c=t.z2;a--;){var h=r.pop(),l=c[h],d=n.distance(s,s,!1,!0);o.setRelative(l,l,d,n),o.touch(l),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",h)}t.loop=1}function za(e,t){var r=t.stack,i=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[i],o=t.fv,n=t.pv,a=r.pop(),c=t.z2[t.contours[a]],h=c;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",a);var l=n.distance(s,s,!1,!0);do{h!==s&&o.setRelative(h,h,l,n),h=h.nextPointOnContour}while(h!==c)}function ja(e,t){var r,i,s=t.stack,o=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[o],a=t.fv,c=t.pv,h=s.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",h),h){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=c.distance(n,n,!1,!0),d=r.length-2,u=0;u<d;u++)i=r[u],a.setRelative(i,i,l,c)}function $a(e,t){var r=t.stack,i=r.pop()/64,s=r.pop(),o=t.z1[s],n=t.z0[t.rp0],a=t.fv,c=t.pv;a.setRelative(o,n,i,c),a.touch(o),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",i,s),t.rp1=t.rp0,t.rp2=s,e&&(t.rp0=s)}function qa(e,t){var r=t.stack,i=r.pop(),s=r.pop(),o=t.z0[s],n=t.fv,a=t.pv,c=t.cvt[i];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",i,"(",c,")",s);var h=a.distance(o,Aa);e&&(Math.abs(h-c)<t.cvCutIn&&(h=c),h=t.round(h)),n.setRelative(o,Aa,h,a),0===t.zp0&&(o.xo=o.x,o.yo=o.y),n.touch(o),t.rp0=t.rp1=s}function Ya(e,t){var r=t.stack,i=r.pop(),s=t.z2[i];exports.DEBUG&&console.log(t.step,"GC["+e+"]",i),r.push(64*t.dpv.distance(s,Aa,e,!1))}function Xa(e,t){var r=t.stack,i=r.pop(),s=r.pop(),o=t.z1[i],n=t.z0[s],a=t.dpv.distance(n,o,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",i,s,"->",a),t.stack.push(Math.round(64*a))}function Za(e,t){var r=t.stack,i=r.pop(),s=t.fv,o=t.pv,n=t.ppem,a=t.deltaBase+16*(e-1),c=t.deltaShift,h=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",i,r);for(var l=0;l<i;l++){var d=r.pop(),u=r.pop();if(a+((240&u)>>4)===n){var p=(15&u)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",d,"by",p*c);var f=h[d];s.setRelative(f,f,p*c,o)}}}function Qa(e,t){var r=t.stack,i=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(i/64))}function Ja(e,t){var r=t.stack,i=r.pop(),s=t.ppem,o=t.deltaBase+16*(e-1),n=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",i,r);for(var a=0;a<i;a++){var c=r.pop(),h=r.pop();if(o+((240&h)>>4)===s){var l=(15&h)-8;l>=0&&l++;var d=l*n;exports.DEBUG&&console.log(t.step,"DELTACFIX",c,"by",d),t.cvt[c]+=d}}}function Ka(e,t){var r,i,s=t.stack,o=s.pop(),n=s.pop(),a=t.z2[o],c=t.z1[n];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",o,n),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.dpv=Da(r,i)}function ec(e,t){var r=t.stack,i=t.prog,s=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)r.push(i[++s]);t.ip=s}function tc(e,t){var r=t.ip,i=t.prog,s=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var n=i[++r]<<8|i[++r];32768&n&&(n=-(1+(65535^n))),s.push(n)}t.ip=r}function rc(e,t,r,i,s,o){var n,a,c,h,l=o.stack,d=e&&l.pop(),u=l.pop(),p=o.rp0,f=o.z0[p],v=o.z1[u],g=o.minDis,m=o.fv,y=o.dpv;c=(a=n=y.distance(v,f,!0,!0))>=0?1:-1,a=Math.abs(a),e&&(h=o.cvt[d],i&&Math.abs(a-h)<o.cvCutIn&&(a=h)),r&&a<g&&(a=g),i&&(a=o.round(a)),m.setRelative(v,f,c*a,y),m.touch(v),exports.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(i?"R":"_")+(0===s?"Gr":1===s?"Bl":2===s?"Wh":"")+"]",e?d+"("+o.cvt[d]+","+h+")":"",u,"(d =",n,"->",c*a,")"),o.rp1=o.rp0,o.rp2=u,t&&(o.rp0=u)}function ic(e){this.char=e,this.state={},this.activeState=null}function sc(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function oc(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function nc(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function ac(e){this.eventId=e,this.subscribers=[]}function cc(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach((function(e){Object.defineProperty(t.events,e,{value:new ac(e)})})),e&&r.forEach((function(r){var i=e[r];"function"==typeof i&&t.events[r].subscribe(i)})),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function hc(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],cc.call(this,e)}function lc(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function dc(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function uc(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function pc(e){return/[A-z]/.test(e)}function fc(e){this.font=e,this.features={}}function vc(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function gc(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,i=0;i<r.length;i++){var s=r[i];if(e>=s.start&&e<=s.end){var o=e-s.start;return s.index+o}}break;default:return-1}return-1}function mc(e,t){return-1===gc(e,t.coverage)?null:e+t.deltaGlyphId}function yc(e,t){var r=gc(e,t.coverage);return-1===r?null:t.substitute[r]}function Sc(e,t){for(var r=[],i=0;i<e.length;i++){var s=e[i],o=t.current,n=gc(o=Array.isArray(o)?o[0]:o,s);-1!==n&&r.push(n)}return r.length!==e.length?-1:r}function wc(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var i=Sc(t.inputCoverage,e);if(-1===i)return[];var s=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var o=e.lookahead.slice(s);o.length&&uc(o[0].char);)o.shift();var n=new nc(o,0),a=Sc(t.lookaheadCoverage,n),c=[].concat(e.backtrack);for(c.reverse();c.length&&uc(c[0].char);)c.shift();if(c.length<t.backtrackCoverage.length)return[];var h=new nc(c,0),l=Sc(t.backtrackCoverage,h),d=[];if(i.length===t.inputCoverage.length&&a.length===t.lookaheadCoverage.length&&l.length===t.backtrackCoverage.length)for(var u=0;u<t.lookupRecords.length;u++)for(var p=t.lookupRecords[u].lookupListIndex,f=this.getLookupByIndex(p),v=0;v<f.subtables.length;v++){var g=f.subtables[v],m=this.getLookupMethod(f,g);if("12"===this.getSubstitutionType(f,g))for(var y=0;y<i.length;y++){var S=m(e.get(y));S&&d.push(S)}}return d}function bc(e,t){var r,i=gc(e.current,t.coverage);if(-1===i)return null;for(var s=t.ligatureSets[i],o=0;o<s.length;o++){r=s[o];for(var n=0;n<r.components.length&&e.lookahead[n]===r.components[n];n++)if(n===r.components.length-1)return r}return null}function Ec(e,t){var r=gc(e,t.coverage);return-1===r?null:t.sequences[r]}ma.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,i=this._prepState;if(!i||i.ppem!==t){var s=this._fpgmState;if(!s){Ra.prototype=Fa,(s=this._fpgmState=new Ra("fpgm",r.tables.fpgm)).funcs=[],s.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),s.step=-1);try{pa(s)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Ra.prototype=s,(i=this._prepState=new Ra("prep",r.tables.prep)).ppem=t;var o=r.tables.cvt;if(o)for(var n=i.cvt=new Array(o.length),a=t/r.unitsPerEm,c=0;c<o.length;c++)n[c]=o[c]*a;else i.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{pa(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return fa(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},fa=function(e,t){var r,i,s,o=t.ppem/t.font.unitsPerEm,n=o,a=e.components;if(Ra.prototype=t,a){var c=t.font;i=[],r=[];for(var h=0;h<a.length;h++){var l=a[h],d=c.glyphs.get(l.glyphIndex);s=new Ra("glyf",d.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+h+"---"),s.step=-1),va(d,s,o,n);for(var u=Math.round(l.dx*o),p=Math.round(l.dy*n),f=s.gZone,v=s.contours,g=0;g<f.length;g++){var m=f[g];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+u,m.yo=m.y=m.y+p}var y=i.length;i.push.apply(i,f);for(var S=0;S<v.length;S++)r.push(v[S]+y)}e.instructions&&!s.inhibitGridFit&&((s=new Ra("glyf",e.instructions)).gZone=s.z0=s.z1=s.z2=i,s.contours=r,i.push(new Oa(0,0),new Oa(Math.round(e.advanceWidth*o),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),s.step=-1),pa(s),i.length-=2)}else s=new Ra("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),s.step=-1),va(e,s,o,n),i=s.gZone;return i},va=function(e,t,r,i){for(var s,o,n,a=e.points||[],c=a.length,h=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[],d=0;d<c;d++)s=a[d],h[d]=new Oa(s.x*r,s.y*i,s.lastPointOfContour,s.onCurve);for(var u=0;u<c;u++)s=h[u],o||(o=s,l.push(u)),s.lastPointOfContour?(s.nextPointOnContour=o,o.prevPointOnContour=s,o=void 0):(n=h[u+1],s.nextPointOnContour=n,n.prevPointOnContour=s);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var p=0;p<c;p++)console.log(p,h[p].x,h[p].y)}if(h.push(new Oa(0,0),new Oa(Math.round(e.advanceWidth*r),0)),pa(t),h.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var f=0;f<c;f++)console.log(f,h[f].x,h[f].y)}}},pa=function(e){var t=e.prog;if(t){var r,i=t.length;for(e.ip=0;e.ip<i;e.ip++){if(exports.DEBUG&&e.step++,!(r=ua[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}},ua=[Ba.bind(void 0,Ca),Ba.bind(void 0,Pa),Ia.bind(void 0,Ca),Ia.bind(void 0,Pa),Ua.bind(void 0,Ca),Ua.bind(void 0,Pa),Wa.bind(void 0,0),Wa.bind(void 0,1),_a.bind(void 0,0),_a.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.pv=e.dpv=Da(i,r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.fv=Da(i,r)},function(e){var t=e.stack,r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){var t=e.stack,r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop(),s=t.pop(),o=t.pop(),n=t.pop(),a=e.z0,c=e.z1,h=a[r],l=a[i],d=c[s],u=c[o],p=e.z2[n];exports.DEBUG&&console.log("ISECT[], ",r,i,s,o,n);var f=h.x,v=h.y,g=l.x,m=l.y,y=d.x,S=d.y,w=u.x,b=u.y,E=(f-g)*(S-b)-(v-m)*(y-w),x=f*m-v*g,T=y*b-S*w;p.x=(x*(y-w)-T*(f-g))/E,p.y=(x*(S-b)-T*(v-m))/E},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||La(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||La(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||La(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||La(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=Sa},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=ba},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),Ma(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},Na,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(i)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,i);var s=e.ip,o=e.prog;e.prog=e.funcs[r];for(var n=0;n<i;n++)pa(e),exports.DEBUG&&console.log(++e.step,n+1<i?"next loopcall":"done loopcall",n);e.ip=s,e.prog=o},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,i=e.prog;e.prog=e.funcs[t],pa(e),e.ip=r,e.prog=i,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,i=e.ip,s=t.pop(),o=i;for(exports.DEBUG&&console.log(e.step,"FDEF[]",s);45!==r[++i];);e.ip=i,e.funcs[s]=r.slice(o+1,i)},void 0,Ha.bind(void 0,0),Ha.bind(void 0,1),Ga.bind(void 0,Ca),Ga.bind(void 0,Pa),Va.bind(void 0,0),Va.bind(void 0,1),za.bind(void 0,0),za.bind(void 0,1),ja.bind(void 0,0),ja.bind(void 0,1),function(e){for(var t=e.stack,r=e.loop,i=e.fv,s=t.pop()/64,o=e.z2;r--;){var n=t.pop(),a=o[n];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",n,s),i.setRelative(a,a,s),i.touch(a)}e.loop=1},function(e){for(var t=e.stack,r=e.rp1,i=e.rp2,s=e.loop,o=e.z0[r],n=e.z1[i],a=e.fv,c=e.dpv,h=e.z2;s--;){var l=t.pop(),d=h[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"IP[]",l,r,"<->",i),a.interpolate(d,o,n,c),a.touch(d)}e.loop=1},$a.bind(void 0,0),$a.bind(void 0,1),function(e){for(var t=e.stack,r=e.rp0,i=e.z0[r],s=e.loop,o=e.fv,n=e.pv,a=e.z1;s--;){var c=t.pop(),h=a[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"ALIGNRP[]",c),o.setRelative(h,i,0,n),o.touch(h)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=wa},qa.bind(void 0,0),qa.bind(void 0,1),function(e){var t=e.prog,r=e.ip,i=e.stack,s=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",s);for(var o=0;o<s;o++)i.push(t[++r]);e.ip=r},function(e){var t=e.ip,r=e.prog,i=e.stack,s=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",s);for(var o=0;o<s;o++){var n=r[++t]<<8|r[++t];32768&n&&(n=-(1+(65535^n))),i.push(n)}e.ip=t},function(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var i=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"WS",i,s),r[s]=i},function(e){var t=e.stack,r=e.store,i=t.pop();exports.DEBUG&&console.log(e.step,"RS",i);var s=r&&r[i]||0;t.push(s)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,i),e.cvt[i]=r/64},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])},Ya.bind(void 0,0),Ya.bind(void 0,1),void 0,Xa.bind(void 0,0),Xa.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,i),t.push(i<r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,i),t.push(i<=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,i),t.push(i>r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,i),t.push(i>=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,i),t.push(r===i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,i),t.push(r!==i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(Ma(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,i),t.push(r&&i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,i),t.push(r||i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)},Za.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,i),t.push(i+r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,i),t.push(i-r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,i),t.push(64*i/r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,i),t.push(i*r/64)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64))},Qa.bind(void 0,0),Qa.bind(void 0,1),Qa.bind(void 0,2),Qa.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,i),e.cvt[i]=r*e.ppem/e.font.unitsPerEm},Za.bind(void 0,2),Za.bind(void 0,3),Ja.bind(void 0,1),Ja.bind(void 0,2),Ja.bind(void 0,3),function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Ta,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Ta,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=ya},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ea},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=xa},Na,Na,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},Ka.bind(void 0,0),Ka.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(i=35),32&r&&(i|=4096),t.push(i)},void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(i),t.push(r),t.push(s)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,i),t.push(Math.max(i,r))},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,i),t.push(Math.min(i,r))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ec.bind(void 0,1),ec.bind(void 0,2),ec.bind(void 0,3),ec.bind(void 0,4),ec.bind(void 0,5),ec.bind(void 0,6),ec.bind(void 0,7),ec.bind(void 0,8),tc.bind(void 0,1),tc.bind(void 0,2),tc.bind(void 0,3),tc.bind(void 0,4),tc.bind(void 0,5),tc.bind(void 0,6),tc.bind(void 0,7),tc.bind(void 0,8),rc.bind(void 0,0,0,0,0,0),rc.bind(void 0,0,0,0,0,1),rc.bind(void 0,0,0,0,0,2),rc.bind(void 0,0,0,0,0,3),rc.bind(void 0,0,0,0,1,0),rc.bind(void 0,0,0,0,1,1),rc.bind(void 0,0,0,0,1,2),rc.bind(void 0,0,0,0,1,3),rc.bind(void 0,0,0,1,0,0),rc.bind(void 0,0,0,1,0,1),rc.bind(void 0,0,0,1,0,2),rc.bind(void 0,0,0,1,0,3),rc.bind(void 0,0,0,1,1,0),rc.bind(void 0,0,0,1,1,1),rc.bind(void 0,0,0,1,1,2),rc.bind(void 0,0,0,1,1,3),rc.bind(void 0,0,1,0,0,0),rc.bind(void 0,0,1,0,0,1),rc.bind(void 0,0,1,0,0,2),rc.bind(void 0,0,1,0,0,3),rc.bind(void 0,0,1,0,1,0),rc.bind(void 0,0,1,0,1,1),rc.bind(void 0,0,1,0,1,2),rc.bind(void 0,0,1,0,1,3),rc.bind(void 0,0,1,1,0,0),rc.bind(void 0,0,1,1,0,1),rc.bind(void 0,0,1,1,0,2),rc.bind(void 0,0,1,1,0,3),rc.bind(void 0,0,1,1,1,0),rc.bind(void 0,0,1,1,1,1),rc.bind(void 0,0,1,1,1,2),rc.bind(void 0,0,1,1,1,3),rc.bind(void 0,1,0,0,0,0),rc.bind(void 0,1,0,0,0,1),rc.bind(void 0,1,0,0,0,2),rc.bind(void 0,1,0,0,0,3),rc.bind(void 0,1,0,0,1,0),rc.bind(void 0,1,0,0,1,1),rc.bind(void 0,1,0,0,1,2),rc.bind(void 0,1,0,0,1,3),rc.bind(void 0,1,0,1,0,0),rc.bind(void 0,1,0,1,0,1),rc.bind(void 0,1,0,1,0,2),rc.bind(void 0,1,0,1,0,3),rc.bind(void 0,1,0,1,1,0),rc.bind(void 0,1,0,1,1,1),rc.bind(void 0,1,0,1,1,2),rc.bind(void 0,1,0,1,1,3),rc.bind(void 0,1,1,0,0,0),rc.bind(void 0,1,1,0,0,1),rc.bind(void 0,1,1,0,0,2),rc.bind(void 0,1,1,0,0,3),rc.bind(void 0,1,1,0,1,0),rc.bind(void 0,1,1,0,1,1),rc.bind(void 0,1,1,0,1,2),rc.bind(void 0,1,1,0,1,3),rc.bind(void 0,1,1,1,0,0),rc.bind(void 0,1,1,1,0,1),rc.bind(void 0,1,1,1,0,2),rc.bind(void 0,1,1,1,0,3),rc.bind(void 0,1,1,1,1,0),rc.bind(void 0,1,1,1,1,1),rc.bind(void 0,1,1,1,1,2),rc.bind(void 0,1,1,1,1,3)],ic.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},ic.prototype.getState=function(e){return this.state[e]||null},hc.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},hc.prototype.composeRUD=function(e){var t=this,r=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),i=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter((function(e){return!i(e)}))])},hc.prototype.replaceRange=function(e,t,r,i){t=null!==t?t:this.tokens.length;var s=r.every((function(e){return e instanceof ic}));if(!isNaN(e)&&this.inboundIndex(e)&&s){var o=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return i||this.dispatch("replaceToken",[e,t,r]),[o,r]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},hc.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof ic){var i=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[i[0],t]}return{FAIL:"replaceToken: invalid token or index."}},hc.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var i=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[i,e,t]),i},hc.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}return{FAIL:"removeToken: invalid token index."}},hc.prototype.insertToken=function(e,t,r){return e.every((function(e){return e instanceof ic}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},hc.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe((function(i,s){var o=[i,s],n=[i,s];if(null===t||!0===t.apply(this,o)){var a=r.apply(this,n);i.setState(e,a)}})),this.registeredModifiers.push(e)},ac.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},ac.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},nc.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},nc.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},hc.prototype.rangeToText=function(e){if(e instanceof sc)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},hc.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},hc.prototype.getContext=function(e){return this.registeredContexts[e]||null},hc.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},hc.prototype.dispatch=function(e,t){var r=this,i=this.events[e];i instanceof ac&&i.subscribers.forEach((function(e){e.apply(r,t||[])}))},hc.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof r)return{FAIL:"missing context end check."};var i=new oc(e,t,r);return this.registeredContexts[e]=i,this.contextCheckers.push(i),i},hc.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},hc.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},hc.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)e.hasOwnProperty(t)&&(e[t].ranges=[])},hc.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var r=new nc(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},hc.prototype.setEndOffset=function(e,t){var r=new sc(this.getContext(t).openRange.startIndex,e,t),i=this.getContext(t).ranges;return r.rangeId=t+"."+i.length,i.push(r),this.getContext(t).openRange=null,r},hc.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach((function(i){var s=i.contextName,o=t.getContext(s).openRange;if(!o&&i.checkStart(e)&&(o=new sc(r,null,s),t.getContext(s).openRange=o,t.dispatch("contextStart",[s,r])),o&&i.checkEnd(e)){var n=r-o.startIndex+1,a=t.setEndOffset(n,s);t.dispatch("contextEnd",[s,a])}}))},hc.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var i=t[r],s=new nc(t,r);this.dispatch("next",[s]),this.runContextCheck(s);var o=new ic(i);this.tokens.push(o),this.dispatch("newToken",[o,s])}return this.dispatch("end",[this.tokens]),this.tokens},fc.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if("DFLT"===r.tag)return r.script.defaultLangSys.featureIndexes}return[]},fc.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===e&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var o=0;o<s.length;o++){var n=s[o];if(n.tag===e)return n.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},fc.prototype.mapTagsToFeatures=function(e,t){for(var r={},i=0;i<e.length;i++){var s=e[i].tag,o=e[i].feature;r[s]=o}this.features[t].tags=r},fc.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var i=this.font.tables.gsub;return t=r.map((function(e){return i.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},fc.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},fc.prototype.getLookupMethod=function(e,t){var r=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return mc.apply(r,[e,t])};case"12":return function(e){return yc.apply(r,[e,t])};case"63":return function(e){return wc.apply(r,[e,t])};case"41":return function(e){return bc.apply(r,[e,t])};case"21":return function(e){return Ec.apply(r,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},fc.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,i=this.getFeature({tag:e.tag,script:e.script});if(!i)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var s=this.getFeatureLookups(i),o=[].concat(t.context),n=0;n<s.length;n++)for(var a=s[n],c=this.getLookupSubtables(a),h=0;h<c.length;h++){var l=c[h],d=this.getSubstitutionType(a,l),u=this.getLookupMethod(a,l),p=void 0;switch(d){case"11":(p=u(t.current))&&o.splice(r,1,new vc({id:11,tag:e.tag,substitution:p}));break;case"12":(p=u(t.current))&&o.splice(r,1,new vc({id:12,tag:e.tag,substitution:p}));break;case"63":p=u(t),Array.isArray(p)&&p.length&&o.splice(r,1,new vc({id:63,tag:e.tag,substitution:p}));break;case"41":(p=u(t))&&o.splice(r,1,new vc({id:41,tag:e.tag,substitution:p}));break;case"21":(p=u(t.current))&&o.splice(r,1,new vc({id:21,tag:e.tag,substitution:p}))}t=new nc(o,r),Array.isArray(p)&&!p.length||(p=null)}return o.length?o:null},fc.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&r},fc.prototype.getLookupSubtables=function(e){return e.subtables||null},fc.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},fc.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},fc.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var xc={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&lc(t)||!lc(r)&&lc(t)},endCheck:function(e){var t=e.get(1);return null===t||!lc(t)}},Tc={startCheck:function(e){var t=e.current,r=e.get(-1);return(lc(t)||uc(t))&&!lc(r)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!lc(t)&&!uc(t):var r=/\s/.test(t);if(!r)return!0;if(r)if(!e.lookahead.some((function(e){return lc(e)||uc(e)})))return!0;break;default:return!1}}},Pc={11:function(e,t,r){t[r].setState(e.tag,e.substitution)},12:function(e,t,r){t[r].setState(e.tag,e.substitution)},63:function(e,t,r){e.substitution.forEach((function(i,s){t[r+s].setState(e.tag,i)}))},41:function(e,t,r){var i=t[r];i.setState(e.tag,e.substitution.ligGlyph);for(var s=e.substitution.components.length,o=0;o<s;o++)(i=t[r+o+1]).setState("deleted",!0)}};function Cc(e,t,r){e instanceof vc&&Pc[e.id]&&Pc[e.id](e,t,r)}function kc(e){var t=this,r="arab",i=this.featuresTags[r],s=this.tokenizer.getRangeTokens(e);if(1!==s.length){var o=new nc(s.map((function(e){return e.getState("glyphIndex")})),0),n=new nc(s.map((function(e){return e.char})),0);s.forEach((function(e,a){if(!uc(e.char)){o.setCurrentIndex(a),n.setCurrentIndex(a);var c,h=0;switch(function(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var i=t[r],s=dc(i),o=uc(i);if(!s&&!o)return!0;if(s)return!1}return!1}(n)&&(h|=1),function(e){if(dc(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!uc(e.lookahead[t]))return!0;return!1}(n)&&(h|=2),h){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi"}if(-1!==i.indexOf(c)){var l=t.query.lookupFeature({tag:c,script:r,contextParams:o});if(l instanceof Error)return console.info(l.message);l.forEach((function(e,t){e instanceof vc&&(Cc(e,s,t),o.context[t]=e.substitution)}))}}}))}}function Dc(e,t){return new nc(e.map((function(e){return e.activeState.value})),t||0)}function Oc(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=Dc(r);i.context.forEach((function(e,s){i.setCurrentIndex(s);var o=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:i});o.length&&(o.forEach((function(e){return Cc(e,r,s)})),i=Dc(r))}))}var Ac={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&pc(t)||!pc(r)&&pc(t)},endCheck:function(e){var t=e.get(1);return null===t||!pc(t)}};function Fc(e,t){return new nc(e.map((function(e){return e.activeState.value})),t||0)}function Rc(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=Fc(r);i.context.forEach((function(e,s){i.setCurrentIndex(s);var o=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:i});o.length&&(o.forEach((function(e){return Cc(e,r,s)})),i=Fc(r))}))}function Lc(e){this.baseDir=e||"ltr",this.tokenizer=new hc,this.featuresTags={}}function Mc(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function Bc(){return Mc.call(this,"latinWord"),Mc.call(this,"arabicWord"),Mc.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Ic(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var r=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())}))}function Uc(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Wc(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(Uc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){kc.call(e,t)})))}function _c(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("rlig")&&(Uc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Oc.call(e,t)})))}function Nc(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("liga")&&(Uc.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){Rc.call(e,t)})))}function Hc(e){(e=e||{}).tables=e.tables||{},e.empty||(na(e.familyName,"When creating a new Font object, familyName is required."),na(e.styleName,"When creating a new Font object, styleName is required."),na(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),na(e.ascender,"When creating a new Font object, ascender is required."),na(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new Jo.GlyphSet(this,e.glyphs||[]),this.encoding=new zo(this),this.position=new ra(this),this.substitution=new ia(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new ma(this):void 0}})}function Gc(e,t){var r=JSON.stringify(e),i=256;for(var s in t){var o=parseInt(s);if(o&&!(o<256)){if(JSON.stringify(t[s])===r)return o;i<=o&&(i=o+1)}}return t[i]=e,i}function Vc(e,t,r){var i=Gc(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function zc(e,t,r){var i={},s=new Uo.Parser(e,t);return i.tag=s.parseTag(),i.minValue=s.parseFixed(),i.defaultValue=s.parseFixed(),i.maxValue=s.parseFixed(),s.skip("uShort",1),i.name=r[s.parseUShort()]||{},i}function jc(e,t,r,i){for(var s=[{name:"nameID_"+e,type:"USHORT",value:Gc(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<r.length;++o){var n=r[o].tag;s.push({name:"axis_"+e+" "+n,type:"FIXED",value:t.coordinates[n]<<16})}return s}function $c(e,t,r,i){var s={},o=new Uo.Parser(e,t);s.name=i[o.parseUShort()]||{},o.skip("uShort",1),s.coordinates={};for(var n=0;n<r.length;++n)s.coordinates[r[n].tag]=o.parseFixed();return s}Lc.prototype.setText=function(e){this.text=e},Lc.prototype.contextChecks={latinWordCheck:Ac,arabicWordCheck:xc,arabicSentenceCheck:Tc},Lc.prototype.registerFeatures=function(e,t){var r=this,i=t.filter((function(t){return r.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(i):this.featuresTags[e]=i},Lc.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new fc(e));for(var r=0;r<t.length;r++){var i=t[r];this.query.supports({script:i.script})&&this.registerFeatures(i.script,i.tags)}},Lc.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)},Lc.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},Lc.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Wc.call(this),_c.call(this)),this.checkContextReady("latinWord")&&Nc.call(this),this.checkContextReady("arabicSentence")&&Ic.call(this)},Lc.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),Bc.call(this),this.applyFeaturesToContexts())},Lc.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},Lc.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var i=this.tokenizer.tokens[r];if(!i.state.deleted){var s=i.activeState.value;t.push(Array.isArray(s)?s[0]:s)}}return t},Hc.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Hc.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Hc.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Hc.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},Hc.prototype.stringToGlyphs=function(e,t){var r=this,i=new Lc;i.registerModifier("glyphIndex",null,(function(e){return r.charToGlyphIndex(e.char)}));var s=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;i.applyFeatures(this,s);for(var o=i.getTextGlyphs(e),n=o.length,a=new Array(n),c=this.glyphs.get(0),h=0;h<n;h+=1)a[h]=this.glyphs.get(o[h])||c;return a},Hc.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Hc.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Hc.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Hc.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},Hc.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Hc.prototype.forEachGlyph=function(e,t,r,i,s,o){t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:72,s=Object.assign({},this.defaultRenderOptions,s);var n,a=1/this.unitsPerEm*i,c=this.stringToGlyphs(e,s);if(s.kerning){var h=s.script||this.position.getDefaultScriptName();n=this.position.getKerningTables(h,s.language)}for(var l=0;l<c.length;l+=1){var d=c[l];o.call(this,d,t,r,i,s),d.advanceWidth&&(t+=d.advanceWidth*a),s.kerning&&l<c.length-1&&(t+=(n?this.position.getKerningValue(n,d.index,c[l+1].index):this.getKerningValue(d,c[l+1]))*a),s.letterSpacing?t+=s.letterSpacing*i:s.tracking&&(t+=s.tracking/1e3*i)}return t},Hc.prototype.getPath=function(e,t,r,i,s){var o=new io;return this.forEachGlyph(e,t,r,i,s,(function(e,t,r,i){var n=e.getPath(t,r,i,s,this);o.extend(n)})),o},Hc.prototype.getPaths=function(e,t,r,i,s){var o=[];return this.forEachGlyph(e,t,r,i,s,(function(e,t,r,i){var n=e.getPath(t,r,i,s,this);o.push(n)})),o},Hc.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,(function(){}))},Hc.prototype.draw=function(e,t,r,i,s,o){this.getPath(t,r,i,s,o).draw(e)},Hc.prototype.drawPoints=function(e,t,r,i,s,o){this.forEachGlyph(t,r,i,s,o,(function(t,r,i,s){t.drawPoints(e,r,i,s)}))},Hc.prototype.drawMetrics=function(e,t,r,i,s,o){this.forEachGlyph(t,r,i,s,o,(function(t,r,i,s){t.drawMetrics(e,r,i,s)}))},Hc.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Hc.prototype.validate=function(){var e=this;function t(t){var r=e.getEnglishName(t);r&&r.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Hc.prototype.toTables=function(){return Qn(this)},Hc.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Hc.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t},Hc.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var i=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var o=new DataView(i),n=new Blob([o],{type:"font/opentype"}),a=document.createElement("a");a.href=window.URL.createObjectURL(n),a.download=e;var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),a.dispatchEvent(c)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=s(256),l=function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),i=0;i<t.length;++i)t[i]=r[i];return t}(i);h.writeFileSync(e,l)}},Hc.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Hc.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Hc.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var qc={make:function(e,t){var r=new Oo.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var i=0;i<e.axes.length;i++)r.fields=r.fields.concat(Vc(i,e.axes[i],t));for(var s=0;s<e.instances.length;s++)r.fields=r.fields.concat(jc(s,e.instances[s],e.axes,t));return r},parse:function(e,t,r){var i=new Uo.Parser(e,t),s=i.parseULong();no.argument(65536===s,"Unsupported fvar table version.");var o=i.parseOffset16();i.skip("uShort",1);for(var n=i.parseUShort(),a=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),l=[],d=0;d<n;d++)l.push(zc(e,t+o+d*a,r));for(var u=[],p=t+o+n*a,f=0;f<c;f++)u.push($c(e,p+f*h,l,r));return{axes:l,instances:u}}},Yc=function(){return{coverage:this.parsePointer(Bo.coverage),attachPoints:this.parseList(Bo.pointer(Bo.uShortList))}},Xc=function(){var e=this.parseUShort();return no.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},Zc=function(){return this.parseList(Bo.pointer(Xc))},Qc=function(){return{coverage:this.parsePointer(Bo.coverage),ligGlyphs:this.parseList(Bo.pointer(Zc))}},Jc=function(){return this.parseUShort(),this.parseList(Bo.pointer(Bo.coverage))},Kc={parse:function(e,t){var r=new Bo(e,t=t||0),i=r.parseVersion(1);no.argument(1===i||1.2===i||1.3===i,"Unsupported GDEF table version.");var s={version:i,classDef:r.parsePointer(Bo.classDef),attachList:r.parsePointer(Yc),ligCaretList:r.parsePointer(Qc),markAttachClassDef:r.parsePointer(Bo.classDef)};return i>=1.2&&(s.markGlyphSets=r.parsePointer(Jc)),s}},eh=new Array(10);eh[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(Bo.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(Bo.coverage),values:this.parseValueRecordList()}:void no.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},eh[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();no.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(Bo.coverage),i=this.parseUShort(),s=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(Bo.pointer(Bo.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))))};if(2===t){var o=this.parsePointer(Bo.classDef),n=this.parsePointer(Bo.classDef),a=this.parseUShort(),c=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,classDef1:o,classDef2:n,class1Count:a,class2Count:c,classRecords:this.parseList(a,Bo.list(c,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))}}},eh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},eh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},eh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},eh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},eh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},eh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},eh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var th=new Array(10),rh={parse:function(e,t){var r=new Bo(e,t=t||0),i=r.parseVersion(1);return no.argument(1===i||1.1===i,"Unsupported GPOS table version "+i),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(eh)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(eh),variations:r.parseFeatureVariationsList()}},make:function(e){return new Oo.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Oo.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Oo.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Oo.LookupList(e.lookups,th)}])}},ih={parse:function(e,t){var r=new Uo.Parser(e,t),i=r.parseUShort();if(0===i)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();no.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var s=0;s<i;s+=1){var o=e.parseUShort(),n=e.parseUShort(),a=e.parseShort();t[o+","+n]=a}return t}(r);if(1===i)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0===r){var i=e.parseUShort();e.skip("uShort",3);for(var s=0;s<i;s+=1){var o=e.parseUShort(),n=e.parseUShort(),a=e.parseShort();t[o+","+n]=a}}return t}(r);throw new Error("Unsupported kern table version ("+i+").")}},sh={parse:function(e,t,r,i){for(var s=new Uo.Parser(e,t),o=i?s.parseUShort:s.parseULong,n=[],a=0;a<r+1;a+=1){var c=o.call(s);i&&(c*=2),n.push(c)}return n}};function oh(e,t){s(256).readFile(e,(function(e,r){if(e)return t(e.message);t(null,function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;++i)r[i]=e[i];return t}(r))}))}function nh(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function ah(e,t){for(var r=[],i=12,s=0;s<t;s+=1){var o=Uo.getTag(e,i),n=Uo.getULong(e,i+4),a=Uo.getULong(e,i+8),c=Uo.getULong(e,i+12);r.push({tag:o,checksum:n,offset:a,length:c,compression:!1}),i+=16}return r}function ch(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if(eo(r,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function hh(e,t){var r,i;t=null==t?{}:t;var s,o,n,a,c,h,l,d,u,p,f,v,g,m=new Hc({empty:!0}),y=new DataView(e,0),S=[],w=Uo.getTag(y,0);if(w===String.fromCharCode(0,1,0,0)||"true"===w||"typ1"===w)m.outlinesFormat="truetype",S=ah(y,s=Uo.getUShort(y,4));else if("OTTO"===w)m.outlinesFormat="cff",S=ah(y,s=Uo.getUShort(y,4));else{if("wOFF"!==w)throw new Error("Unsupported OpenType signature "+w);var b=Uo.getTag(y,4);if(b===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==b)throw new Error("Unsupported OpenType flavor "+w);m.outlinesFormat="cff"}S=function(e,t){for(var r=[],i=44,s=0;s<t;s+=1){var o,n=Uo.getTag(e,i),a=Uo.getULong(e,i+4),c=Uo.getULong(e,i+8),h=Uo.getULong(e,i+12);o=c<h&&"WOFF",r.push({tag:n,offset:a,compression:o,compressedLength:c,length:h}),i+=20}return r}(y,s=Uo.getUShort(y,12))}for(var E=0;E<s;E+=1){var x=S[E],T=void 0;switch(x.tag){case"cmap":T=ch(y,x),m.tables.cmap=_o.parse(T.data,T.offset),m.encoding=new jo(m.tables.cmap);break;case"cvt ":T=ch(y,x),g=new Uo.Parser(T.data,T.offset),m.tables.cvt=g.parseShortList(x.length/2);break;case"fvar":n=x;break;case"fpgm":T=ch(y,x),g=new Uo.Parser(T.data,T.offset),m.tables.fpgm=g.parseByteList(x.length);break;case"head":T=ch(y,x),m.tables.head=Sn.parse(T.data,T.offset),m.unitsPerEm=m.tables.head.unitsPerEm,r=m.tables.head.indexToLocFormat;break;case"hhea":T=ch(y,x),m.tables.hhea=wn.parse(T.data,T.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":d=x;break;case"ltag":T=ch(y,x),i=En.parse(T.data,T.offset);break;case"maxp":T=ch(y,x),m.tables.maxp=xn.parse(T.data,T.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":f=x;break;case"OS/2":T=ch(y,x),m.tables.os2=Wn.parse(T.data,T.offset);break;case"post":T=ch(y,x),m.tables.post=_n.parse(T.data,T.offset),m.glyphNames=new qo(m.tables.post);break;case"prep":T=ch(y,x),g=new Uo.Parser(T.data,T.offset),m.tables.prep=g.parseByteList(x.length);break;case"glyf":a=x;break;case"loca":p=x;break;case"CFF ":o=x;break;case"kern":u=x;break;case"GDEF":c=x;break;case"GPOS":h=x;break;case"GSUB":l=x;break;case"meta":v=x}}var P=ch(y,f);if(m.tables.name=In.parse(P.data,P.offset,i),m.names=m.tables.name,a&&p){var C=0===r,k=ch(y,p),D=sh.parse(k.data,k.offset,m.numGlyphs,C),O=ch(y,a);m.glyphs=ga.parse(O.data,O.offset,D,m,t)}else{if(!o)throw new Error("Font doesn't contain TrueType or CFF outlines.");var A=ch(y,o);yn.parse(A.data,A.offset,m,t)}var F=ch(y,d);if(bn.parse(m,F.data,F.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),function(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),i=0;i<r.length;i+=1){var s=r[i],o=t[s];void 0===e._IndexToUnicodeMap[o]?e._IndexToUnicodeMap[o]={unicodes:[parseInt(s)]}:e._IndexToUnicodeMap[o].unicodes.push(parseInt(s))}}(e):function(e){for(var t,r=e.tables.cmap.glyphIndexMap,i=Object.keys(r),s=0;s<i.length;s+=1){var o=i[s],n=r[o];(t=e.glyphs.get(n)).addUnicode(parseInt(o))}for(var a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?e.isCIDFont?t.name="gid"+a:t.name=e.cffEncoding.charset[a]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(a))}(e)}(m,t),u){var R=ch(y,u);m.kerningPairs=ih.parse(R.data,R.offset)}else m.kerningPairs={};if(c){var L=ch(y,c);m.tables.gdef=Kc.parse(L.data,L.offset)}if(h){var M=ch(y,h);m.tables.gpos=rh.parse(M.data,M.offset),m.position.init()}if(l){var B=ch(y,l);m.tables.gsub=Vn.parse(B.data,B.offset)}if(n){var I=ch(y,n);m.tables.fvar=qc.parse(I.data,I.offset,m.names)}if(v){var U=ch(y,v);m.tables.meta=zn.parse(U.data,U.offset),m.metas=m.tables.meta}return m}function lh(e,t,r,i,s=!0){const o=e.map((e=>{const i=t.shapes.wire.getWires({shape:e}),s=i.map((e=>t.shapes.wire.placeWireOnFace({wire:e,face:r.face}))),o=t.shapes.face.createFaceFromWires({shapes:s,planar:r.facePlanar}),n=new Be.BasicShapeRepairDto;n.shape=o,n.minTolerance=1e-8,n.maxTolerance=1e-4;const a=t.shapeFix.basicShapeRepair(n),c=t.shapes.face.getFaces({shape:a});return i.forEach((e=>e.delete())),s.forEach((e=>e.delete())),o.delete(),a.delete(),c})),n=new es;let a;if(r.faceTextVar===jt.separatedExtrusion&&0===r.height){a=t.shapes.compound.makeCompound({shapes:o.flat()});const e=o.map((e=>{const r=t.shapes.face.getFacesCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=e,n.characterParts=o.map(((e,r)=>({id:`character-${r.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}})))}else if(r.faceTextVar===jt.separatedExtrusion&&0!==r.height){const e=o.map((e=>e.map((e=>t.operations.makeThickSolidSimple({shape:e,offset:r.height}))))),s=e.map((e=>{const r=t.shapes.solid.getSolidsCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=s,a=t.shapes.compound.makeCompound({shapes:e.flat()}),n.characterParts=e.map(((e,r)=>({id:`character-${r.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}})))}else if(r.faceTextVar===jt.integratedExtrusion&&0!==r.height){const e=o.map((e=>e.map((e=>t.operations.makeThickSolidSimple({shape:e,offset:r.height}))))),c=e.map((e=>{const r=t.shapes.solid.getSolidsCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=c;const h=o.flat(),l=e.map((e=>e.map((e=>{const i=t.shapes.face.getFaces({shape:e}),s=i.filter((e=>{let t=!0;return h.some((t=>t.IsSame(e)))&&(t=!1),t}));r.height<0&&s.forEach((e=>e.Reverse()));const o=t.shapes.shell.sewFaces({shapes:s,tolerance:1e-4});return i.forEach((e=>e.delete())),o}))));if(e.forEach((e=>e.forEach((e=>e.delete())))),n.characterParts=l.map(((e,r)=>({id:`character-${r.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=t.booleans.difference({shape:r.face,shapes:h,keepEdges:!1}),i=t.shapes.face.getFaces({shape:e});e.delete(),a=t.shapes.shell.sewFaces({shapes:[...i,...l.flat()],tolerance:1e-4}),n.faceParts=i.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?$t.cutout:$t.cutoutInsideCharacter,shapes:{face:e}})))}else a=t.shapes.compound.makeCompound({shapes:n.characterParts.map((e=>e.shapes.compound))})}else if(r.faceTextVar===jt.integratedExtrusion&&0===r.height)if(n.characterParts=o.map(((e,r)=>({id:`character-${r.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=o.flat(),s=t.booleans.difference({shape:r.face,shapes:e,keepEdges:!1}),c=t.shapes.face.getFaces({shape:s});s.delete();const h=t.shapes.shell.sewFaces({shapes:[...c,...o.flat()],tolerance:1e-4}),l=o.map((e=>{const r=t.shapes.face.getFacesCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=l,a=h,n.faceParts=c.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?$t.cutout:$t.cutoutInsideCharacter,shapes:{face:e}})))}else a=t.shapes.compound.makeCompound({shapes:n.characterParts.map((e=>e.shapes.compound))});else if(r.faceTextVar===jt.cutout){if(n.characterParts=o.map(((e,r)=>({id:`character-${r.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=t.booleans.difference({shape:r.face,shapes:o.flat(),keepEdges:!1}),s=t.shapes.face.getFaces({shape:e}),c=o.map((e=>{const r=t.shapes.face.getFacesCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=c,a=e,n.faceParts=s.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?$t.cutout:$t.cutoutInsideCharacter,shapes:{face:e}})))}}else{const e=o.map((e=>t.shapes.compound.makeCompound({shapes:e}))),r=o.map((e=>{const r=t.shapes.face.getFacesCentersOfMass({shapes:e});return i.averageVector(r)}));n.characterCenterCoordinates=r,a=t.shapes.compound.makeCompound({shapes:e}),n.characterParts=e.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}})))}return{res:n,compound:a,placedFacesOfLetters:o}}function dh(e,t){if(e){const r=[],i=Ft.parse(e,r,"text-3d-face");return{compound:t,shapes:[{id:"1",shape:t},...r],data:Object.assign({compound:"1"},i)}}}function uh(e,t,r,i,s,o){const n=new es;if(e.length>0){const o=t.booleans.difference({shape:r,shapes:e,keepEdges:!1}),a=t.shapes.face.getFaces({shape:o});o.delete();const c=t.shapes.shell.sewFaces({shapes:[...a,...i],tolerance:1e-4});n.compound=c,s.length>0&&(n.compound=t.shapes.compound.makeCompound({shapes:[...s,c]})),n.faceParts=a.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?$t.cutout:$t.cutoutInsideCharacter,shapes:{face:e}})))}else n.compound=t.shapes.compound.makeCompound({shapes:o.map((e=>e.compound))});return n}class ph{constructor(e,t,r,i){this.fonts=[],this.occtService=e,this.dependencies=t,this.occ=r,this.vectorHelper=i}loadFonts(e){return t=this,r=void 0,s=function*(){return new Promise(((t,r)=>{try{void 0!==e&&Array.isArray(e)&&0===e.length&&t({});const r=e?qi.filter((t=>e.includes(t.key))):qi,i=r.reduce(((e,t)=>e+t.variants.length),0);let s=0;r.forEach((e=>{e.variants.forEach((r=>{const o=e.key,n=`${o}-${r}`;!function(e,t,r){r=null==r?{}:r;var i="undefined"!=typeof window||r.isUrl?nh:oh;new Promise((function(s,o){i(e,(function(e,i){if(e){if(t)return t(e);o(e)}var n;try{n=hh(i,r)}catch(e){if(t)return t(e,null);o(e)}if(t)return t(null,n);s(n)}))}))}(`${Me.BITBYBIT_CDN_URL}/fonts/${o}/${n}.ttf`,((e,a)=>{e||(this.fonts.push({name:n,type:o,variant:r,font:a}),s++,s===i&&t({}))}),{isUrl:!0})}))}))}catch(e){r(e)}}))},new((i=void 0)||(i=Promise))((function(e,o){function n(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(t,r||[])).next())}));var t,r,i,s}text3dUrl(e){return Ds(e,this.occtService,this.occ)}text3d(e){return Os(e,this.occtService,this.fonts,this.occ)}text3dFace(e){return function(e,t,r,i,s){const o=new Be.DataOnUVDto;o.shape=e.face,o.paramU=e.originParamU,o.paramV=e.originParamV;const n=t.shapes.face.uvOnFace(o),a=[n[1],0,n[0]],c=new Yi;c.direction=[0,1,0],c.fontSize=e.fontSize,c.fontType=e.fontType,c.fontVariant=e.fontVariant,c.height=0,c.origin=a,c.originAlignment=e.originAlignment,c.rotation=e.rotation,c.text=e.text;const h=Os(c,t,r,i);h.data.name="text3dFace";const l=h.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),{res:d,compound:u}=lh(l,t,e,s);return dh(d,u)}(e,this.occtService,this.fonts,this.occ,this.vectorHelper)}text3dFaceUrl(e){return function(e,t,r,i){const s=new Be.DataOnUVDto;s.shape=e.face,s.paramU=e.originParamU,s.paramV=e.originParamV;const o=t.shapes.face.uvOnFace(s),n=[o[1],0,o[0]],a=new Zi;a.direction=[0,1,0],a.fontSize=e.fontSize,a.letterPaths=e.letterPaths,a.height=0,a.origin=n,a.originAlignment=e.originAlignment,a.rotation=e.rotation,a.text=e.text;const c=Ds(a,t,r);c.data.name="text3dFace";const h=c.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),{res:l,compound:d}=lh(h,t,e,i);return dh(l,d)}(e,this.occtService,this.occ,this.vectorHelper)}texts3dFace(e){return function(e,t,r,i,s){const o=[],n=[],a=[],c=e.definitions.map((c=>{const h=new Be.DataOnUVDto;h.shape=e.face,h.paramU=c.originParamU,h.paramV=c.originParamV;const l=t.shapes.face.uvOnFace(h),d=[l[1],0,l[0]],u=new Yi;return u.direction=[0,1,0],u.fontSize=c.fontSize,u.fontType=c.fontType,u.fontVariant=c.fontVariant,u.height=0,u.origin=d,u.originAlignment=c.originAlignment,u.rotation=c.rotation,u.text=c.text,function(e,t,r,i,s,o,n,a,c){e.data.name="text3dFace";const h=lh(e.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),t,Object.assign({face:r,facePlanar:i},s),o,!1);return s.faceTextVar!==jt.cutout&&s.faceTextVar!==jt.integratedExtrusion||n.push(...h.placedFacesOfLetters.flat()),s.faceTextVar===jt.integratedExtrusion?h.res.characterParts.forEach((e=>a.push(e.shapes.compound))):s.faceTextVar===jt.separatedExtrusion&&c.push(h.compound),h}(Os(u,t,r,i),t,e.face,e.facePlanar,c,s,o,n,a)})),h=uh(o,t,e.face,n,a,c);h.originalInputs=e;const l=c.map((e=>e.res.characterParts)).flat();return l.forEach(((e,t)=>e.id=`texts-character-${t}-${e.id}`)),h.characterParts=l,dh(h,h.compound)}(e,this.occtService,this.fonts,this.occ,this.vectorHelper)}texts3dFaceUrl(e){return function(e,t,r,i){const s=[],o=[],n=[],a=e.definitions.map((a=>{const c=new Be.DataOnUVDto;c.shape=e.face,c.paramU=a.originParamU,c.paramV=a.originParamV;const h=t.shapes.face.uvOnFace(c),l=[h[1],0,h[0]],d=new Zi;return d.direction=[0,1,0],d.fontSize=a.fontSize,d.letterPaths=a.letterPaths,d.height=0,d.origin=l,d.originAlignment=a.originAlignment,d.rotation=a.rotation,d.text=a.text,function(e,t,r,i,s,o,n,a){e.data.name="text3dFace";const c=lh(e.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),t,Object.assign({face:r.face,facePlanar:r.facePlanar},i),s,!1);return i.faceTextVar!==jt.cutout&&i.faceTextVar!==jt.integratedExtrusion||o.push(...c.placedFacesOfLetters.flat()),i.faceTextVar===jt.integratedExtrusion?c.res.characterParts.forEach((e=>n.push(e.shapes.compound))):i.faceTextVar===jt.separatedExtrusion&&a.push(c.compound),c}(Ds(d,t,r),t,e,a,i,s,o,n)})),c=uh(s,t,e.face,o,n,a),h=a.map((e=>e.res.characterParts)).flat();return h.forEach(((e,t)=>e.id=`texts-character-${t}-${e.id}`)),c.characterParts=h,dh(c,c.compound)}(e,this.occtService,this.occ,this.vectorHelper)}pyramidSimple(t){return function(t,r,i,s,o){if(function(e){let t;if(["uNumber","vNumber","height","precision"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!o.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple algorithm you must be subscribed to our silver or gold plan.");try{const n=`\n            ${o.patternsFacePatternPyramidSimple}\n        `,a=new Function(n),c={name:"pyramidSimple"};return a.apply({inputs:t,occt:r,occ:i,vectorHelper:s,Inputs:e,Advanced:G,ShapeParser:Ft,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}pyramidSimpleAffectors(t){return function(t,r,i,s,o){if(function(e){let t;if(["uNumber","vNumber","defaultHeight","affectMinHeight","affectMaxHeight","precision"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!o.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple Affectors algorithm you must be subscribed to our silver or gold plan.");try{const n=`\n            ${o.patternsFacePatternPyramidSimple}\n        `,a=new Function(n),c={name:"pyramidSimpleAffectors"};return a.apply({inputs:t,occt:r,occ:i,vectorHelper:s,Inputs:e,Advanced:G,ShapeParser:Ft,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}}class fh{constructor(e){this.dependencies={serenitySwirl:void 0};const t=new Ue,r=new Ie,i=new vh;this.occtService=new At(e,new wt(t,r,e)),this.advanced=new ph(this.occtService,this.dependencies,e,t),this.things=new ks(this.occtService,this.advanced,this.dependencies,i)}}class vh{constructor(){this.geometryHelper=new ke,this.math=new be,this.vector=new Pe(this.math,this.geometryHelper),this.logic=new we,this.lists=new Se}}var gh=function(){return gh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},gh.apply(this,arguments)};addEventListener("message",(function(e){var t=e.data;"initialise"===t.type?function(e){void 0===e&&(e={});var t=Me.BITBYBIT_CDN_URL+"/wasm/bitbybit-dev-occt.dec37f82.wasm",r=e.locateFile;return Rt(gh(gh({},e),{locateFile:function(e,i){if(r){var s=r(e,i);if(s)return s}return e.endsWith(".wasm")?t:i+e}}))}().then((function(e){return r=void 0,i=void 0,o=function(){var r,i;return function(e,t){var r,i,s,o,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(n=0)),n;)try{if(r=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!((s=(s=n.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(6===a[0]&&n.label<s[1]){n.label=s[1],s=a;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(a);break}s[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(s){switch(s.label){case 0:r=new fh(e),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.advanced.loadFonts(t.loadFonts)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),console.error(i),[3,4];case 4:return((e,t,r)=>{Bt=new Lt(e);const i=new Ue,s=new Ie;Mt=new At(e,new wt(i,s,e)),It=new te(Bt),Ut=new re(Bt),Wt=new ie,t&&(Mt.plugins=t,Object.entries(_t).forEach((([e,t])=>{Mt.plugins.dependencies[e]=t}))),postMessage("occ-initialised")})(e,r),postMessage("occ-initialised"),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,a)}c((o=o.apply(r,i||[])).next())}));var r,i,s,o})):((e,t)=>{let r;t("busy");try{const{functionName:i,inputs:s}=e.action,o=function(e){return se[e]}(i);o?r=o(s,{openCascade:Mt,cacheHelper:Bt,shapeResolver:It,addPendingDependency:(e,t)=>{_t[e]=t}}).result:K.has(i)||(r=function(e){const t=It.resolveShapeReferences(e.inputs),r=Bt.cacheOp(e,(()=>Wt.callFunction(Mt,e.functionName,t)));return Ut.serializeResult(r)}(e.action)),t({uid:e.uid,result:r})}catch(r){t({uid:e.uid,result:void 0,error:Nt(r,e.action)})}})(t,postMessage)}))})();