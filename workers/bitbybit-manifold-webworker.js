(()=>{var t,e,s={430:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});const o=s.p+"static/js/manifold.b03f5972.wasm"},764:(t,e,s)=>{"use strict";t.exports=s.p+"956447fcc1fc40ca7b39.js"},677:()=>{}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}};return s[t](n,n.exports,r),n.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(s,o){if(1&o&&(s=this(s)),8&o)return s;if("object"==typeof s&&s){if(4&o&&s.__esModule)return s;if(16&o&&"function"==typeof s.then)return s}var n=Object.create(null);r.r(n);var i={};t=t||[null,e({}),e([]),e(e)];for(var a=2&o&&s;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>s[t]));return i.default=()=>s,r.d(n,i),n},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var o=s.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=s[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=void 0,(()=>{"use strict";var t,e,s,o,n,i,a,c,l,h,u,d,f,m,p,v,g,y;(g=t||(t={}))[g.loading=0]="loading",g[g.loaded=1]="loaded",g[g.initialised=2]="initialised",g[g.computing=3]="computing";class b{constructor(){this.hashesFromPreviousRun={},this.usedHashes={},this.argCache={},this.manifoldObjectHashes=new Set}cleanAllCache(){Object.keys(this.argCache).forEach((t=>{if(this.argCache[t])try{const e=this.argCache[t];this.isManifoldObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete()}catch(t){}})):e.delete())}catch(t){}})),this.argCache={},this.usedHashes={},this.hashesFromPreviousRun={},this.manifoldObjectHashes.clear()}cleanCacheForHash(t){if(this.argCache[t])try{const e=this.argCache[t];this.isManifoldObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete()}catch(t){}})):e.delete())}catch(t){}delete this.argCache[t],delete this.usedHashes[t],delete this.hashesFromPreviousRun[t],this.manifoldObjectHashes.delete(t)}cleanUpCache(){const t=Object.keys(this.usedHashes),e=Object.keys(this.hashesFromPreviousRun);let s=[];e.length>0&&(s=e.filter((e=>!t.includes(e)))),s.length>0&&s.forEach((t=>{if(this.argCache[t]){try{const e=this.argCache[t];this.isManifoldObject(e)&&(Array.isArray(e)?e.forEach((t=>{try{t.delete()}catch(t){}})):e.delete())}catch(t){}delete this.argCache[t]}delete this.usedHashes[t],this.manifoldObjectHashes.delete(t)})),this.hashesFromPreviousRun=Object.assign({},this.usedHashes)}isManifoldObject(t){return null!=t&&!Array.isArray(t)&&void 0!==t.$$||Array.isArray(t)&&t.length>0&&void 0!==t[0].$$}cacheOp(t,e){let s=null;const o=this.computeHash(t);this.usedHashes[o]=o,this.hashesFromPreviousRun[o]=o;const r=this.checkCache(o);if(r)this.isManifoldObject(r)?(s=r,s.hash=r.hash):r.value&&(s=r.value);else if(s=e(),Array.isArray(s)&&this.isManifoldObject(s))s.forEach(((e,s)=>{const o=this.computeHash(Object.assign(Object.assign({},t),{index:s}));e.hash=o,this.addToCache(o,e),this.usedHashes[o]=o,this.hashesFromPreviousRun[o]=o}));else if(this.isManifoldObject(s))s.hash=o,this.addToCache(o,s);else if(s&&s.compound&&s.data&&s.manifolds&&s.manifolds.length>0){const e=s,r=this.computeHash(Object.assign(Object.assign({},t),{index:"compound"}));e.compound.hash=r,this.addToCache(r,e.compound),this.usedHashes[r]=r,this.hashesFromPreviousRun[r]=r,e.manifolds.forEach(((e,s)=>{const o=this.computeHash(Object.assign(Object.assign({},t),{index:s}));e.manifold.hash=o,this.addToCache(o,e.manifold),this.usedHashes[o]=o,this.hashesFromPreviousRun[o]=o})),this.addToCache(o,{value:e})}else this.addToCache(o,{value:s});return s}checkCache(t){const e=this.argCache[t];return e?(void 0===e.value||this.isManifoldObject(e))&&this.manifoldObjectHashes.has(t)&&!this.isManifoldObject(e)?(delete this.argCache[t],this.manifoldObjectHashes.delete(t),null):e:null}addToCache(t,e){const s=e;return null!==s&&"object"==typeof s&&(s.hash=t),this.argCache[t]=s,this.isManifoldObject(s)&&this.manifoldObjectHashes.add(t),t}computeHash(t,e){let s=JSON.stringify(t);s=s.replace(/("ptr":(-?[0-9]*?),)/g,""),s=s.replace(/("ptr":(-?[0-9]*))/g,""),s.includes("ptr")&&console.error("YOU DONE MESSED UP YOUR REGEX.");const o=Math.random.toString()+s;return e?o:this.stringToHash(o)}stringToHash(t){let e=0;if(0===t.length)return e;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e|=0;return e}remove(t,e){return t.filter((t=>t.hash!==e.hash||t.ptr!==e.ptr))}}!function(t){let e,s;!function(t){t.evenOdd="EvenOdd",t.nonZero="NonZero",t.positive="Positive",t.negative="Negative"}(e=t.fillRuleEnum||(t.fillRuleEnum={})),function(t){t.square="Square",t.round="Round",t.miter="Miter",t.bevel="Bevel"}(s=t.manifoldJoinTypeEnum||(t.manifoldJoinTypeEnum={})),t.DecomposedManifoldMeshDto=class{},t.DrawManifoldOrCrossSectionDto=class{constructor(t,e,s,o,r,n,i,a,c,l,h){this.faceOpacity=1,this.faceColour="#ff0000",this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.manifoldOrCrossSection=t),void 0!==e&&(this.faceOpacity=e),void 0!==s&&(this.faceMaterial=s),void 0!==o&&(this.faceColour=o),void 0!==r&&(this.crossSectionColour=r),void 0!==n&&(this.crossSectionWidth=n),void 0!==i&&(this.crossSectionOpacity=i),void 0!==a&&(this.computeNormals=a),void 0!==c&&(this.drawTwoSided=c),void 0!==l&&(this.backFaceColour=l),void 0!==h&&(this.backFaceOpacity=h)}},t.DrawManifoldsOrCrossSectionsDto=class{constructor(t,e,s,o,r,n,i,a,c,l,h){this.faceColour="#ff0000",this.faceOpacity=1,this.crossSectionColour="#ff00ff",this.crossSectionWidth=2,this.crossSectionOpacity=1,this.computeNormals=!1,this.drawTwoSided=!0,this.backFaceColour="#0000ff",this.backFaceOpacity=1,void 0!==t&&(this.manifoldsOrCrossSections=t),void 0!==e&&(this.faceOpacity=e),void 0!==s&&(this.faceMaterial=s),void 0!==o&&(this.faceColour=o),void 0!==r&&(this.crossSectionColour=r),void 0!==n&&(this.crossSectionWidth=n),void 0!==i&&(this.crossSectionOpacity=i),void 0!==a&&(this.computeNormals=a),void 0!==c&&(this.drawTwoSided=c),void 0!==l&&(this.backFaceColour=l),void 0!==h&&(this.backFaceOpacity=h)}},t.CreateFromMeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.FromPolygonPointsDto=class{constructor(t){void 0!==t&&(this.polygonPoints=t)}},t.CrossSectionFromPolygonPointsDto=class{constructor(t,s,o,r){this.fillRule=e.positive,this.removeDuplicates=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==s&&(this.fillRule=s),void 0!==o&&(this.removeDuplicates=o),void 0!==r&&(this.tolerance=r)}},t.CrossSectionFromPolygonsPointsDto=class{constructor(t,s,o,r){this.fillRule=e.positive,this.removeDuplicates=!1,this.tolerance=1e-7,void 0!==t&&(this.polygonPoints=t),void 0!==s&&(this.fillRule=s),void 0!==o&&(this.removeDuplicates=o),void 0!==r&&(this.tolerance=r)}},t.CubeDto=class{constructor(t,e){this.center=!0,this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.CreateContourSectionDto=class{constructor(t,s){this.fillRule=e.evenOdd,void 0!==t&&(this.polygons=t),void 0!==s&&(this.fillRule=s)}},t.SquareDto=class{constructor(t,e){this.center=!1,this.size=1,void 0!==t&&(this.center=t),void 0!==e&&(this.size=e)}},t.SphereDto=class{constructor(t,e){this.radius=1,void 0!==t&&(this.radius=t),void 0!==e&&(this.circularSegments=e)}},t.CylinderDto=class{constructor(t,e,s,o,r){this.height=1,this.radiusLow=1,this.radiusHigh=1,this.circularSegments=32,this.center=!0,void 0!==t&&(this.height=t),void 0!==e&&(this.radiusLow=e),void 0!==s&&(this.radiusHigh=s),void 0!==o&&(this.circularSegments=o),void 0!==r&&(this.center=r)}},t.CircleDto=class{constructor(t,e){this.radius=1,this.circularSegments=32,void 0!==t&&(this.radius=t),void 0!==e&&(this.circularSegments=e)}},t.RectangleDto=class{constructor(t,e,s){this.length=1,this.height=1,this.center=!1,void 0!==t&&(this.length=t),void 0!==e&&(this.height=e),void 0!==s&&(this.center=s)}},t.ManifoldDto=class{constructor(t){void 0!==t&&(this.manifold=t)}},t.CalculateNormalsDto=class{constructor(t,e,s){this.normalIdx=0,this.minSharpAngle=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e),void 0!==s&&(this.minSharpAngle=s)}},t.CalculateCurvatureDto=class{constructor(t){void 0!==t&&(this.manifold=t)}},t.CountDto=class{constructor(t){void 0!==t&&(this.count=t)}},t.ManifoldsMinGapDto=class{constructor(t,e,s){this.searchLength=100,void 0!==t&&(this.manifold1=t),void 0!==e&&(this.manifold2=e),void 0!==s&&(this.searchLength=s)}},t.ManifoldRefineToleranceDto=class{constructor(t,e){this.tolerance=1e-6,void 0!==t&&(this.manifold=t),void 0!==e&&(this.tolerance=e)}},t.ManifoldRefineLengthDto=class{constructor(t,e){this.length=.1,void 0!==t&&(this.manifold=t),void 0!==e&&(this.length=e)}},t.ManifoldRefineDto=class{constructor(t,e){this.number=1,void 0!==t&&(this.manifold=t),void 0!==e&&(this.number=e)}},t.ManifoldSmoothByNormalsDto=class{constructor(t,e){this.normalIdx=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldSimplifyDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.tolerance=e)}},t.ManifoldSetPropertiesDto=class{constructor(t,e,s){this.numProp=3,void 0!==t&&(this.manifold=t),void 0!==e&&(this.numProp=e),void 0!==s&&(this.propFunc=s)}},t.ManifoldSmoothOutDto=class{constructor(t,e,s){this.minSharpAngle=60,this.minSmoothness=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.minSharpAngle=e),void 0!==s&&(this.minSmoothness=s)}},t.HullPointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.SliceDto=class{constructor(t){this.height=.5,void 0!==t&&(this.manifold=t)}},t.MeshDto=class{constructor(t){void 0!==t&&(this.mesh=t)}},t.MeshVertexIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.vertexIndex=e)}},t.MeshTriangleRunIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.triangleRunIndex=e)}},t.MeshHalfEdgeIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.halfEdgeIndex=e)}},t.MeshTriangleIndexDto=class{constructor(t,e){void 0!==t&&(this.mesh=t),void 0!==e&&(this.triangleIndex=e)}},t.CrossSectionDto=class{constructor(t){void 0!==t&&(this.crossSection=t)}},t.CrossSectionsDto=class{constructor(t){void 0!==t&&(this.crossSections=t)}},t.ExtrudeDto=class{constructor(t){this.height=1,this.nDivisions=1,this.twistDegrees=0,this.scaleTopX=1,this.scaleTopY=1,this.center=!0,void 0!==t&&(this.crossSection=t)}},t.RevolveDto=class{constructor(t,e,s,o){this.matchProfile=!0,this.circularSegments=32,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.revolveDegrees=e),void 0!==s&&(this.matchProfile=s),void 0!==o&&(this.circularSegments=o)}},t.OffsetDto=class{constructor(t,e,o,r,n){this.joinType=s.round,this.miterLimit=2,this.circularSegments=32,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.delta=e),void 0!==o&&(this.joinType=o),void 0!==r&&(this.miterLimit=r),void 0!==n&&(this.circularSegments=n)}},t.SimplifyDto=class{constructor(t,e){this.epsilon=1e-6,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.epsilon=e)}},t.ComposeDto=class{constructor(t){void 0!==t&&(this.polygons=t)}},t.MirrorCrossSectionDto=class{constructor(t,e){this.normal=[1,0],void 0!==t&&(this.crossSection=t),void 0!==e&&(this.normal=e)}},t.Scale2DCrossSectionDto=class{constructor(t,e){this.vector=[2,2],void 0!==t&&(this.crossSection=t),void 0!==e&&(this.vector=e)}},t.TranslateCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.vector=e)}},t.RotateCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.degrees=e)}},t.ScaleCrossSectionDto=class{constructor(t,e){this.factor=2,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.factor=e)}},t.TranslateXYCrossSectionDto=class{constructor(t,e,s){this.x=0,this.y=0,void 0!==t&&(this.crossSection=t),void 0!==e&&(this.x=e),void 0!==s&&(this.y=s)}},t.TransformCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.transform=e)}},t.CrossSectionWarpDto=class{constructor(t,e){void 0!==t&&(this.crossSection=t),void 0!==e&&(this.warpFunc=e)}},t.MirrorDto=class{constructor(t,e){this.normal=[1,0,0],void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e)}},t.Scale3DDto=class{constructor(t,e){this.vector=[2,2,2],void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.TranslateDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.TranslateByVectorsDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vectors=e)}},t.RotateDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.vector=e)}},t.RotateXYZDto=class{constructor(t,e,s,o){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.x=e),void 0!==s&&(this.y=s),void 0!==o&&(this.z=o)}},t.ScaleDto=class{constructor(t,e){this.factor=2,void 0!==t&&(this.manifold=t),void 0!==e&&(this.factor=e)}},t.TranslateXYZDto=class{constructor(t,e,s,o){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.x=e),void 0!==s&&(this.y=s),void 0!==o&&(this.z=o)}},t.TransformDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.transform=e)}},t.TransformsDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.transforms=e)}},t.ManifoldWarpDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.warpFunc=e)}},t.TwoCrossSectionsDto=class{constructor(t,e){void 0!==t&&(this.crossSection1=t),void 0!==e&&(this.crossSection2=e)}},t.TwoManifoldsDto=class{constructor(t,e){void 0!==t&&(this.manifold1=t),void 0!==e&&(this.manifold2=e)}},t.SplitManifoldsDto=class{constructor(t,e){void 0!==t&&(this.manifoldToSplit=t),void 0!==e&&(this.manifoldCutter=e)}},t.TrimByPlaneDto=class{constructor(t,e,s){this.normal=[1,0,0],this.originOffset=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==s&&(this.originOffset=s)}},t.SplitByPlaneDto=class{constructor(t,e,s){this.normal=[1,0,0],this.originOffset=0,void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==s&&(this.originOffset=s)}},t.SplitByPlaneOnOffsetsDto=class{constructor(t,e,s){this.normal=[1,0,0],this.originOffsets=[0],void 0!==t&&(this.manifold=t),void 0!==e&&(this.normal=e),void 0!==s&&(this.originOffsets=s)}},t.ManifoldsDto=class{constructor(t){void 0!==t&&(this.manifolds=t)}},t.ManifoldToMeshDto=class{constructor(t,e){void 0!==t&&(this.manifold=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldsToMeshesDto=class{constructor(t,e){void 0!==t&&(this.manifolds=t),void 0!==e&&(this.normalIdx=e)}},t.DecomposeManifoldOrCrossSectionDto=class{constructor(t,e){void 0!==t&&(this.manifoldOrCrossSection=t),void 0!==e&&(this.normalIdx=e)}},t.ManifoldOrCrossSectionDto=class{constructor(t){void 0!==t&&(this.manifoldOrCrossSection=t)}},t.ManifoldsOrCrossSectionsDto=class{constructor(t){void 0!==t&&(this.manifoldsOrCrossSections=t)}},t.DecomposeManifoldsOrCrossSectionsDto=class{constructor(t,e){void 0!==t&&(this.manifoldsOrCrossSections=t),void 0!==e&&(this.normalIdx=e)}}}(e||(e={}));class x{constructor(t){this.manifold=t}manifoldFromMesh(t){const{Manifold:e}=this.manifold;return new e(t.mesh)}fromPolygonPoints(t){const{Manifold:s}=this.manifold,o=t.polygonPoints,r=new Map,n=[],i=[];let a=0;for(const t of o)if(t&&3===t.length)for(const e of t){if(!e||3!==e.length||e.some(isNaN))throw console.warn(`Skipping invalid point data in triangle: ${JSON.stringify(e)}`),new Error(`Invalid point data encountered: ${JSON.stringify(e)} in triangle ${JSON.stringify(t)}`);const s=`${e[0]},${e[1]},${e[2]}`;let o;r.has(s)?o=r.get(s):(o=a,r.set(s,o),n.push(e[0],e[1],e[2]),a++),i.push(o)}else console.warn(`Skipping invalid polygon data (expected 3 vertices): ${JSON.stringify(t)}`);const c=Float32Array.from(n),l=Uint32Array.from(i),h=new e.DecomposedManifoldMeshDto;return h.numProp=3,h.vertProperties=c,h.triVerts=l,new s(h)}cube(t){const{Manifold:e}=this.manifold,{cube:s}=e;return s(t.size,t.center)}sphere(t){const{Manifold:e}=this.manifold,{sphere:s}=e;return s(t.radius,t.circularSegments)}tetrahedron(){const{Manifold:t}=this.manifold,{tetrahedron:e}=t;return e()}cylinder(t){const{Manifold:e}=this.manifold,{cylinder:s}=e;return s(t.height,t.radiusLow,t.radiusHigh,t.circularSegments,t.center)}}class P{constructor(t){this.manifold=t}split(t){return t.manifoldToSplit.split(t.manifoldCutter)}splitByPlane(t){return t.manifold.splitByPlane(t.normal,t.originOffset)}splitByPlaneOnOffsets(t){const e=[],s=[t.manifold.asOriginal()],o=[];return t.originOffsets.forEach(((r,n)=>{if(s[n]){const i=s[n].splitByPlane(t.normal,r);i[1].isEmpty()||i[0].isEmpty()?i[1].isEmpty()&&!i[0].isEmpty()?(s.push(i[0]),o.push(i[1])):!i[1].isEmpty()&&i[0].isEmpty()?(e.push(i[1]),o.push(i[0])):i[0].isEmpty()&&i[1].isEmpty()&&o.push(...i):(e.push(i[1]),s.push(i[0]))}})),s.forEach((t=>t.delete())),o.forEach((t=>t.delete())),e}trimByPlane(t){return t.manifold.asOriginal().trimByPlane(t.normal,t.originOffset)}subtract(t){return t.manifold1.subtract(t.manifold2)}add(t){return t.manifold1.add(t.manifold2)}intersect(t){return t.manifold1.intersect(t.manifold2)}differenceTwo(t){const{Manifold:e}=this.manifold,{difference:s}=e;return s(t.manifold1,t.manifold2)}difference(t){const{Manifold:e}=this.manifold,{difference:s}=e;return s(t.manifolds)}unionTwo(t){const{Manifold:e}=this.manifold,{union:s}=e;return s(t.manifold1,t.manifold2)}union(t){const{Manifold:e}=this.manifold,{union:s}=e;return s(t.manifolds)}intersectionTwo(t){const{Manifold:e}=this.manifold,{intersection:s}=e;return s(t.manifold1,t.manifold2)}intersection(t){const{Manifold:e}=this.manifold,{intersection:s}=e;return s(t.manifolds)}}class C{constructor(t){this.manifold=t}hull(t){return t.manifold.hull()}hullPoints(t){const{Manifold:e}=this.manifold,{hull:s}=e;return s(t.points)}slice(t){return t.manifold.slice(t.height)}project(t){return t.manifold.project()}setTolerance(t){return t.manifold.setTolerance(t.tolerance)}asOriginal(t){return t.manifold.asOriginal()}reserveIds(t){const{Manifold:e}=this.manifold,{reserveIDs:s}=e;return s(t.count)}compose(t){const{Manifold:e}=this.manifold,{compose:s}=e;return s(t.manifolds)}decompose(t){return t.manifold.decompose()}calculateNormals(t){return t.manifold.calculateNormals(t.normalIdx,t.minSharpAngle)}calculateCurvature(t){return t.manifold.calculateCurvature(t.gaussianIdx,t.meanIdx)}refineToTolerance(t){return t.manifold.refineToTolerance(t.tolerance)}refineToLength(t){return t.manifold.refineToLength(t.length)}refine(t){return t.manifold.refine(t.number)}smoothOut(t){return t.manifold.smoothOut(t.minSharpAngle,t.minSmoothness)}smoothByNormals(t){return t.manifold.smoothByNormals(t.normalIdx)}simplify(t){return t.manifold.simplify(t.tolerance)}setProperties(t){return t.manifold.setProperties(t.numProp,t.propFunc)}}class D{constructor(t){this.manifold=t}scale3D(t){return t.manifold.scale(t.vector)}scale(t){return t.manifold.scale(t.vector)}mirror(t){return t.manifold.mirror(t.normal)}translate(t){return t.manifold.translate(t.vector)}translateByVectors(t){return t.vectors.map((e=>t.manifold.translate(e)))}rotate(t){return t.manifold.rotate(t.vector)}rotateXYZ(t){return t.manifold.rotate(t.x,t.y,t.z)}translateXYZ(t){return t.manifold.translate(t.x,t.y,t.z)}transform(t){return t.manifold.transform(t.transform)}transforms(t){let e=t.manifold;const s=[];t.transforms.forEach((t=>{e=e.transform(t),s.push(e)}));const o=s.pop();return s.forEach((t=>{t.delete()})),o}warp(t){return t.manifold.warp(t.warpFunc)}}class S{constructor(t){this.manifold=t}volume(t){return t.manifold.volume()}surfaceArea(t){return t.manifold.surfaceArea()}isEmpty(t){return t.manifold.isEmpty()}numVert(t){return t.manifold.numVert()}numTri(t){return t.manifold.numTri()}numEdge(t){return t.manifold.numEdge()}numProp(t){return t.manifold.numProp()}numPropVert(t){return t.manifold.numPropVert()}boundingBox(t){const e=t.manifold.boundingBox();return[e.min,e.max]}tolerance(t){return t.manifold.tolerance()}genus(t){return t.manifold.genus()}minGap(t){return t.manifold1.minGap(t.manifold2,t.searchLength)}originalID(t){return t.manifold.originalID()}status(t){return t.manifold.status()}}class w{constructor(t){this.shapes=new x(t),this.booleans=new P(t),this.operations=new C(t),this.transforms=new D(t),this.evaluate=new S(t)}manifoldToMesh(t){return t.manifold.getMesh(t.normalIdx)}manifoldsToMeshes(t){return t.manifolds.map(((e,s)=>{const o=t.normalIdx?t.normalIdx[s]:void 0;return this.manifoldToMesh({manifold:e,normalIdx:o})}))}}class T{constructor(t){this.manifold=t}create(t){const{CrossSection:e}=this.manifold;return new e(t.polygons,t.fillRule)}square(t){const{CrossSection:e}=this.manifold,{square:s}=e;return s(t.size,t.center)}circle(t){const{CrossSection:e}=this.manifold,{circle:s}=e;return s(t.radius,t.circularSegments)}rectangle(t){const{CrossSection:e}=this.manifold,{square:s}=e;return s([t.length,t.height],t.center)}}class M{constructor(t){this.manifold=t}hull(t){return t.crossSection.hull()}extrude(t){return t.crossSection.extrude(t.height,t.nDivisions,t.twistDegrees,[t.scaleTopX,t.scaleTopY],t.center)}revolve(t){const e=t.crossSection.revolve(t.circularSegments,t.revolveDegrees);return t.matchProfile?e.rotate([-90,0,0]):e}offset(t){return t.crossSection.offset(t.delta,t.joinType,t.miterLimit,t.circularSegments)}simplify(t){return t.crossSection.simplify(t.epsilon)}compose(t){const{CrossSection:e}=this.manifold,{compose:s}=e;return s(t.polygons)}decompose(t){return t.crossSection.decompose()}}class O{constructor(t){this.manifold=t}scale2D(t){return t.crossSection.scale(t.vector)}scale(t){return t.crossSection.scale(t.factor)}mirror(t){return t.crossSection.mirror(t.normal)}translate(t){return t.crossSection.translate(t.vector)}translateXY(t){return t.crossSection.translate([t.x,t.y])}rotate(t){return t.crossSection.rotate(t.degrees)}transform(t){return t.crossSection.transform(t.transform)}warp(t){return t.crossSection.warp(t.warpFunc)}}class E{constructor(t){this.manifold=t}subtract(t){return t.crossSection1.subtract(t.crossSection2)}add(t){return t.crossSection1.add(t.crossSection2)}intersect(t){return t.crossSection1.intersect(t.crossSection2)}differenceTwo(t){const{CrossSection:e}=this.manifold,{difference:s}=e;return s(t.crossSection1,t.crossSection2)}difference(t){const{CrossSection:e}=this.manifold,{difference:s}=e;return s(t.crossSections)}unionTwo(t){const{CrossSection:e}=this.manifold,{union:s}=e;return s(t.crossSection1,t.crossSection2)}union(t){const{CrossSection:e}=this.manifold,{union:s}=e;return s(t.crossSections)}intersectionTwo(t){const{CrossSection:e}=this.manifold,{intersection:s}=e;return s(t.crossSection1,t.crossSection2)}intersection(t){const{CrossSection:e}=this.manifold,{intersection:s}=e;return s(t.crossSections)}}class A{constructor(t){this.manifold=t}area(t){return t.crossSection.area()}isEmpty(t){return t.crossSection.isEmpty()}numVert(t){return t.crossSection.numVert()}numContour(t){return t.crossSection.numContour()}bounds(t){const e=t.crossSection.bounds();return[e.min,e.max]}}class I{constructor(t,e){this.manifold=t,this.base=e,this.shapes=new T(t),this.operations=new M(t),this.transforms=new O(t),this.booleans=new E(t),this.evaluate=new A(t)}crossSectionFromPoints(t){let e=t.points;t.removeDuplicates&&(e=this.base.point.removeConsecutiveDuplicates({points:e,checkFirstAndLast:!0,tolerance:t.tolerance||1e-7}));const s=e.map((t=>[t[0],t[1]]));return this.manifold.CrossSection.ofPolygons([s],t.fillRule)}crossSectionFromPolygons(t){let e=t.polygonPoints;t.removeDuplicates&&(e=e.map((e=>this.base.point.removeConsecutiveDuplicates({points:e,checkFirstAndLast:!0,tolerance:t.tolerance||1e-7}))));const s=e.map((t=>t.map((t=>[t[0],t[1]]))));return this.manifold.CrossSection.ofPolygons(s,t.fillRule)}crossSectionToPolygons(t){return t.crossSection.toPolygons()}crossSectionToPoints(t){return t.crossSection.toPolygons().map((t=>t.map((t=>[t[0],t[1],0]))))}crossSectionsToPolygons(t){return t.crossSections.map((t=>this.crossSectionToPolygons({crossSection:t})))}crossSectionsToPoints(t){return t.crossSections.map((t=>this.crossSectionToPoints({crossSection:t})))}deleteCrossSection(t){t.crossSection.delete()}deleteCrossSections(t){t.crossSections.forEach((t=>this.deleteCrossSection({crossSection:t})))}}class ${constructor(t){this.manifold=t}position(t){const e=t.mesh.position(t.vertexIndex);return[e[0],e[1],e[2]]}tangent(t){const e=t.mesh.tangent(t.halfEdgeIndex);return[e[0],e[1],e[2],e[4]]}verts(t){const e=t.mesh.verts(t.triangleIndex);return[e[0],e[1],e[2]]}extras(t){return[...t.mesh.extras(t.vertexIndex)]}transform(t){return[...t.mesh.transform(t.triangleRunIndex)]}numProp(t){return t.mesh.numProp}numVert(t){return t.mesh.numVert}numTri(t){return t.mesh.numTri}numRun(t){return t.mesh.numRun}}class F{constructor(t){this.manifold=t}merge(t){return t.mesh.merge()}}class L{constructor(t){this.operations=new F(t),this.evaluate=new $(t)}}!function(t){t.HexDto=class{constructor(t){this.color="#0000ff",void 0!==t&&(this.color=t)}},t.InvertHexDto=class{constructor(t){this.color="#0000ff",this.blackAndWhite=!1,void 0!==t&&(this.color=t)}},t.HexDtoMapped=class{constructor(t,e,s){this.color="#0000ff",this.from=0,this.to=255,void 0!==t&&(this.color=t),void 0!==e&&(this.from=e),void 0!==s&&(this.to=s)}},t.RGBObjectMaxDto=class{constructor(t,e){this.min=0,this.max=255,void 0!==t&&(this.rgb=t),void 0!==e&&(this.max=e)}},t.RGBMinMaxDto=class{constructor(t,e,s,o,r){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==t&&(this.r=t),void 0!==e&&(this.g=e),void 0!==s&&(this.b=s),void 0!==o&&(this.min=o),void 0!==r&&(this.max=r)}},t.RGBObjectDto=class{constructor(t){void 0!==t&&(this.rgb=t)}}}(s||(s={})),function(t){let e;!function(t){t.first="first",t.last="last"}(e=t.firstLastEnum||(t.firstLastEnum={})),t.ListItemDto=class{constructor(t,e,s){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==s&&(this.clone=s)}},t.SubListDto=class{constructor(t,e,s,o){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexStart=e),void 0!==s&&(this.indexEnd=s),void 0!==o&&(this.clone=o)}},t.ListCloneDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RepeatInPatternDto=class{constructor(t){this.clone=!0,this.lengthLimit=100,void 0!==t&&(this.list=t)}},t.SortDto=class{constructor(t,e,s){this.clone=!0,this.orderAsc=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==s&&(this.orderAsc=s)}},t.SortJsonDto=class{constructor(t,e,s){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e),void 0!==s&&(this.orderAsc=s)}},t.ListDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.GroupListDto=class{constructor(t,e,s){this.nrElements=2,this.keepRemainder=!1,void 0!==t&&(this.list=t),void 0!==e&&(this.nrElements=e),void 0!==s&&(this.keepRemainder=s)}},t.MultiplyItemDto=class{constructor(t,e){void 0!==t&&(this.item=t),void 0!==e&&(this.times=e)}},t.AddItemAtIndexDto=class{constructor(t,e,s,o){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==s&&(this.index=s),void 0!==o&&(this.clone=o)}},t.AddItemAtIndexesDto=class{constructor(t,e,s,o){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==s&&(this.indexes=s),void 0!==o&&(this.clone=o)}},t.AddItemsAtIndexesDto=class{constructor(t,e,s,o){this.indexes=[0],this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.items=e),void 0!==s&&(this.indexes=s),void 0!==o&&(this.clone=o)}},t.RemoveItemAtIndexDto=class{constructor(t,e,s){this.index=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.index=e),void 0!==s&&(this.clone=s)}},t.RemoveItemsAtIndexesDto=class{constructor(t,e,s){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.indexes=e),void 0!==s&&(this.clone=s)}},t.RemoveNthItemDto=class{constructor(t,e,s,o){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==s&&(this.offset=s),void 0!==o&&(this.clone=o)}},t.RandomThresholdDto=class{constructor(t,e,s){this.threshold=1,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.threshold=e),void 0!==s&&(this.clone=s)}},t.RemoveDuplicatesDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.clone=e)}},t.RemoveDuplicatesToleranceDto=class{constructor(t,e,s){this.tolerance=1e-7,this.clone=!0,void 0!==t&&(this.list=t),void 0!==s&&(this.tolerance=s),void 0!==e&&(this.clone=e)}},t.GetByPatternDto=class{constructor(t,e){this.pattern=[!0,!0,!1],void 0!==t&&(this.list=t),void 0!==e&&(this.pattern=e)}},t.GetNthItemDto=class{constructor(t,e,s,o){this.nth=2,this.offset=0,this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.nth=e),void 0!==s&&(this.offset=s),void 0!==o&&(this.clone=o)}},t.GetLongestListLength=class{constructor(t){void 0!==t&&(this.lists=t)}},t.MergeElementsOfLists=class{constructor(t,e){this.level=0,void 0!==t&&(this.lists=t),void 0!==e&&(this.level=e)}},t.AddItemDto=class{constructor(t,e,s){this.clone=!0,void 0!==t&&(this.list=t),void 0!==e&&(this.item=e),void 0!==s&&(this.clone=s)}},t.AddItemFirstLastDto=class{constructor(t,s,o,r){this.position=e.last,this.clone=!0,void 0!==t&&(this.list=t),void 0!==s&&(this.item=s),void 0!==o&&(this.position=o),void 0!==r&&(this.clone=r)}},t.ConcatenateDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.lists=t),void 0!==e&&(this.clone=e)}},t.IncludesDto=class{constructor(t,e){void 0!==t&&(this.list=t),void 0!==e&&(this.item=e)}},t.InterleaveDto=class{constructor(t,e){this.clone=!0,void 0!==t&&(this.lists=t),void 0!==e&&(this.clone=e)}}}(o||(o={})),function(t){let e;!function(t){t.less="<",t.lessOrEqual="<=",t.greater=">",t.greaterOrEqual=">=",t.tripleEqual="===",t.tripleNotEqual="!==",t.equal="==",t.notEqual="!="}(e=t.BooleanOperatorsEnum||(t.BooleanOperatorsEnum={})),t.ComparisonDto=class{constructor(t,e,s){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==s&&(this.operator=s)}},t.BooleanDto=class{constructor(t){this.boolean=!1,void 0!==t&&(this.boolean=t)}},t.BooleanListDto=class{constructor(t){void 0!==t&&(this.booleans=t)}},t.ValueGateDto=class{constructor(t,e){this.boolean=!1,void 0!==t&&(this.value=t),void 0!==e&&(this.boolean=e)}},t.TwoValueGateDto=class{constructor(t,e){void 0!==t&&(this.value1=t),void 0!==e&&(this.value2=e)}},t.RandomBooleansDto=class{constructor(t){this.length=10,this.trueThreshold=.5,void 0!==t&&(this.length=t)}},t.TwoThresholdRandomGradientDto=class{},t.ThresholdBooleanListDto=class{},t.ThresholdGapsBooleanListDto=class{}}(n||(n={})),function(t){let e,s,o;!function(t){t.add="add",t.subtract="subtract",t.multiply="multiply",t.divide="divide",t.power="power",t.modulus="modulus"}(e=t.mathTwoNrOperatorEnum||(t.mathTwoNrOperatorEnum={})),function(t){t.absolute="absolute",t.negate="negate",t.ln="ln",t.log10="log10",t.tenPow="tenPow",t.round="round",t.floor="floor",t.ceil="ceil",t.sqrt="sqrt",t.sin="sin",t.cos="cos",t.tan="tan",t.asin="asin",t.acos="acos",t.atan="atan",t.log="log",t.exp="exp",t.radToDeg="radToDeg",t.degToRad="degToRad"}(s=t.mathOneNrOperatorEnum||(t.mathOneNrOperatorEnum={})),function(t){t.easeInSine="easeInSine",t.easeOutSine="easeOutSine",t.easeInOutSine="easeInOutSine",t.easeInQuad="easeInQuad",t.easeOutQuad="easeOutQuad",t.easeInOutQuad="easeInOutQuad",t.easeInCubic="easeInCubic",t.easeOutCubic="easeOutCubic",t.easeInOutCubic="easeInOutCubic",t.easeInQuart="easeInQuart",t.easeOutQuart="easeOutQuart",t.easeInOutQuart="easeInOutQuart",t.easeInQuint="easeInQuint",t.easeOutQuint="easeOutQuint",t.easeInOutQuint="easeInOutQuint",t.easeInExpo="easeInExpo",t.easeOutExpo="easeOutExpo",t.easeInOutExpo="easeInOutExpo",t.easeInCirc="easeInCirc",t.easeOutCirc="easeOutCirc",t.easeInOutCirc="easeInOutCirc",t.easeInElastic="easeInElastic",t.easeOutElastic="easeOutElastic",t.easeInOutElastic="easeInOutElastic",t.easeInBack="easeInBack",t.easeOutBack="easeOutBack",t.easeInOutBack="easeInOutBack",t.easeInBounce="easeInBounce",t.easeOutBounce="easeOutBounce",t.easeInOutBounce="easeInOutBounce"}(o=t.easeEnum||(t.easeEnum={})),t.ModulusDto=class{constructor(t,e){this.number=1,this.modulus=2,void 0!==t&&(this.number=t),void 0!==e&&(this.modulus=e)}},t.NumberDto=class{constructor(t){this.number=1,void 0!==t&&(this.number=t)}},t.EaseDto=class{constructor(t){this.x=.5,this.min=0,this.max=1,void 0!==t&&(this.x=t)}},t.RoundToDecimalsDto=class{constructor(t,e){this.number=1.123456,this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}},t.ActionOnTwoNumbersDto=class{constructor(t,e,s){this.first=1,this.second=1,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e),void 0!==s&&(this.operation=s)}},t.TwoNumbersDto=class{constructor(t,e){this.first=1,this.second=2,void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.ActionOnOneNumberDto=class{constructor(t,e){this.number=1,void 0!==t&&(this.number=t),void 0!==e&&(this.operation=e)}},t.RemapNumberDto=class{constructor(t,e,s,o,r){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==t&&(this.number=t),void 0!==e&&(this.fromLow=e),void 0!==s&&(this.fromHigh=s),void 0!==o&&(this.toLow=o),void 0!==r&&(this.toHigh=r)}},t.RandomNumberDto=class{constructor(t,e){this.low=0,this.high=1,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e)}},t.RandomNumbersDto=class{constructor(t,e,s){this.low=0,this.high=1,this.count=10,void 0!==t&&(this.low=t),void 0!==e&&(this.high=e),void 0!==s&&(this.count=s)}},t.ToFixedDto=class{constructor(t,e){this.decimalPlaces=2,void 0!==t&&(this.number=t),void 0!==e&&(this.decimalPlaces=e)}},t.ClampDto=class{constructor(t,e,s){this.number=.5,this.min=0,this.max=1,void 0!==t&&(this.number=t),void 0!==e&&(this.min=e),void 0!==s&&(this.max=s)}},t.LerpDto=class{constructor(t,e,s){this.start=0,this.end=1,this.t=.5,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==s&&(this.t=s)}},t.InverseLerpDto=class{constructor(t,e,s){this.start=0,this.end=1,this.value=.5,void 0!==t&&(this.start=t),void 0!==e&&(this.end=e),void 0!==s&&(this.value=s)}},t.WrapDto=class{constructor(t,e,s){this.number=1.5,this.min=0,this.max=1,void 0!==t&&(this.number=t),void 0!==e&&(this.min=e),void 0!==s&&(this.max=s)}},t.PingPongDto=class{constructor(t,e){this.t=.5,this.length=1,void 0!==t&&(this.t=t),void 0!==e&&(this.length=e)}},t.MoveTowardsDto=class{constructor(t,e,s){this.current=0,this.target=1,this.maxDelta=.1,void 0!==t&&(this.current=t),void 0!==e&&(this.target=e),void 0!==s&&(this.maxDelta=s)}}}(i||(i={})),function(t){t.PointDto=class{constructor(t){void 0!==t&&(this.point=t)}},t.PointXYZDto=class{constructor(t,e,s){this.x=0,this.y=0,this.z=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==s&&(this.z=s)}},t.PointXYDto=class{constructor(t,e){this.x=0,this.y=0,void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},t.PointsDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.TwoPointsDto=class{constructor(t,e){void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e)}},t.DrawPointDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.point=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.size=s),void 0!==o&&(this.colours=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.pointMesh=n)}},t.DrawPointsDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.size=s),void 0!==o&&(this.colours=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.pointsMesh=n)}},t.TransformPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.transformation=e)}},t.TransformPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},t.TranslatePointsWithVectorsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translations=e)}},t.TranslatePointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.translation=e)}},t.TranslateXYZPointsDto=class{constructor(t,e,s,o){this.x=0,this.y=1,this.z=0,void 0!==t&&(this.points=t),void 0!==e&&(this.x=e),void 0!==s&&(this.y=s),void 0!==o&&(this.z=o)}},t.ScalePointsCenterXYZDto=class{constructor(t,e,s){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==s&&(this.scaleXyz=s)}},t.StretchPointsDirFromCenterDto=class{constructor(t,e,s,o){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.points=t),void 0!==e&&(this.center=e),void 0!==s&&(this.direction=s),void 0!==o&&(this.scale=o)}},t.RotatePointsCenterAxisDto=class{constructor(t,e,s,o){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.points=t),void 0!==e&&(this.angle=e),void 0!==s&&(this.axis=s),void 0!==o&&(this.center=o)}},t.TransformsForPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.transformation=e)}},t.ThreePointsNormalDto=class{constructor(t,e,s,o){this.reverseNormal=!1,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==s&&(this.point3=s),void 0!==o&&(this.reverseNormal=o)}},t.ThreePointsToleranceDto=class{constructor(t,e,s,o){this.tolerance=1e-7,void 0!==t&&(this.start=t),void 0!==e&&(this.center=e),void 0!==s&&(this.end=s),void 0!==o&&(this.tolerance=o)}},t.PointsMaxFilletsHalfLineDto=class{constructor(t,e,s){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==t&&(this.points=t),void 0!==e&&(this.checkLastWithFirst=e),void 0!==s&&(this.tolerance=s)}},t.RemoveConsecutiveDuplicatesDto=class{constructor(t,e,s){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.tolerance=e),void 0!==s&&(this.checkFirstAndLast=s)}},t.ClosestPointFromPointsDto=class{constructor(t,e){void 0!==t&&(this.points=t),void 0!==e&&(this.point=e)}},t.TwoPointsToleranceDto=class{constructor(t,e,s){this.tolerance=1e-7,void 0!==t&&(this.point1=t),void 0!==e&&(this.point2=e),void 0!==s&&(this.tolerance=s)}},t.StartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoint=e)}},t.StartEndPointsListDto=class{constructor(t,e){void 0!==t&&(this.startPoint=t),void 0!==e&&(this.endPoints=e)}},t.MultiplyPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.amountOfPoints=e)}},t.SpiralDto=class{constructor(t,e,s,o,r){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==t&&(this.radius=t),void 0!==e&&(this.numberPoints=e),void 0!==s&&(this.widening=s),void 0!==o&&(this.factor=o),void 0!==r&&(this.phi=r)}},t.HexGridScaledToFitDto=class{constructor(t,e,s,o,r,n){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==s&&(this.nrHexagonsInHeight=s),void 0!==o&&(this.nrHexagonsInWidth=o),void 0!==r&&(this.centerGrid=r),void 0!==n&&(this.pointsOnGround=n)}},t.HexGridCentersDto=class{constructor(t,e,s,o,r){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==t&&(this.nrHexagonsX=t),void 0!==e&&(this.nrHexagonsY=e),void 0!==s&&(this.radiusHexagon=s),void 0!==o&&(this.orientOnCenter=o),void 0!==r&&(this.pointsOnGround=r)}}}(a||(a={})),function(t){t.TextDto=class{constructor(t){this.text="Hello World",void 0!==t&&(this.text=t)}},t.TextSplitDto=class{constructor(t,e){this.text="a,b,c",this.separator=",",void 0!==t&&(this.text=t),void 0!==e&&(this.separator=e)}},t.TextReplaceDto=class{constructor(t,e,s){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==t&&(this.text=t),void 0!==e&&(this.search=e),void 0!==s&&(this.replaceWith=s)}},t.TextJoinDto=class{constructor(t,e){this.separator=",",void 0!==t&&(this.list=t),void 0!==e&&(this.separator=e)}},t.ToStringDto=class{constructor(t){void 0!==t&&(this.item=t)}},t.ToStringEachDto=class{constructor(t){void 0!==t&&(this.list=t)}},t.TextFormatDto=class{constructor(t,e){this.text="Hello {0}",this.values=["World"],void 0!==t&&(this.text=t),void 0!==e&&(this.values=e)}},t.TextSearchDto=class{constructor(t,e){this.text="hello world",this.search="world",void 0!==t&&(this.text=t),void 0!==e&&(this.search=e)}},t.TextSubstringDto=class{constructor(t,e,s){this.text="hello world",this.start=0,this.end=5,void 0!==t&&(this.text=t),void 0!==e&&(this.start=e),void 0!==s&&(this.end=s)}},t.TextIndexDto=class{constructor(t,e){this.text="hello",this.index=0,void 0!==t&&(this.text=t),void 0!==e&&(this.index=e)}},t.TextPadDto=class{constructor(t,e,s){this.text="x",this.length=3,this.padString="a",void 0!==t&&(this.text=t),void 0!==e&&(this.length=e),void 0!==s&&(this.padString=s)}},t.TextRepeatDto=class{constructor(t,e){this.text="ha",this.count=3,void 0!==t&&(this.text=t),void 0!==e&&(this.count=e)}},t.TextConcatDto=class{constructor(t){this.texts=["hello"," ","world"],void 0!==t&&(this.texts=t)}},t.TextRegexDto=class{constructor(t,e,s){this.text="hello123world",this.pattern="[0-9]+",this.flags="g",void 0!==t&&(this.text=t),void 0!==e&&(this.pattern=e),void 0!==s&&(this.flags=s)}},t.TextRegexReplaceDto=class{constructor(t,e,s,o){this.text="hello123world456",this.pattern="[0-9]+",this.flags="g",this.replaceWith="X",void 0!==t&&(this.text=t),void 0!==e&&(this.pattern=e),void 0!==s&&(this.flags=s),void 0!==o&&(this.replaceWith=o)}},t.VectorCharDto=class{constructor(t,e,s,o,r){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==t&&(this.char=t),void 0!==e&&(this.xOffset=e),void 0!==s&&(this.yOffset=s),void 0!==o&&(this.height=o),void 0!==r&&(this.extrudeOffset=r)}},t.VectorTextDto=class{constructor(t,e,s,o,r,n,i,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==t&&(this.text=t),void 0!==e&&(this.xOffset=e),void 0!==s&&(this.yOffset=s),void 0!==o&&(this.height=o),void 0!==r&&(this.lineSpacing=r),void 0!==n&&(this.letterSpacing=n),void 0!==i&&(this.align=i),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(c||(c={})),function(t){t.RotationCenterAxisDto=class{constructor(t,e,s){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.axis=e),void 0!==s&&(this.center=s)}},t.RotationCenterDto=class{constructor(t,e){this.angle=90,this.center=[0,0,0],void 0!==t&&(this.angle=t),void 0!==e&&(this.center=e)}},t.RotationCenterYawPitchRollDto=class{constructor(t,e,s,o){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==t&&(this.yaw=t),void 0!==e&&(this.pitch=e),void 0!==s&&(this.roll=s),void 0!==o&&(this.center=o)}},t.ScaleXYZDto=class{constructor(t){this.scaleXyz=[1,1,1],void 0!==t&&(this.scaleXyz=t)}},t.StretchDirCenterDto=class{constructor(t,e,s){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e),void 0!==s&&(this.direction=s)}},t.ScaleCenterXYZDto=class{constructor(t,e){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==t&&(this.center=t),void 0!==e&&(this.scaleXyz=e)}},t.UniformScaleDto=class{constructor(t){this.scale=1,void 0!==t&&(this.scale=t)}},t.UniformScaleFromCenterDto=class{constructor(t,e){this.scale=1,this.center=[0,0,0],void 0!==t&&(this.scale=t),void 0!==e&&(this.center=e)}},t.TranslationXYZDto=class{constructor(t){this.translation=[0,0,0],void 0!==t&&(this.translation=t)}},t.TranslationsXYZDto=class{constructor(t){void 0!==t&&(this.translations=t)}}}(l||(l={})),function(t){t.DateDto=class{constructor(t){void 0!==t&&(this.date=t)}},t.DateStringDto=class{constructor(t){void 0!==t&&(this.dateString=t)}},t.DateSecondsDto=class{constructor(t,e){this.seconds=30,void 0!==t&&(this.date=t),void 0!==e&&(this.seconds=e)}},t.DateDayDto=class{constructor(t,e){this.day=1,void 0!==t&&(this.date=t),void 0!==e&&(this.day=e)}},t.DateYearDto=class{constructor(t,e){this.year=1,void 0!==t&&(this.date=t),void 0!==e&&(this.year=e)}},t.DateMonthDto=class{constructor(t,e){this.month=1,void 0!==t&&(this.date=t),void 0!==e&&(this.month=e)}},t.DateHoursDto=class{constructor(t,e){this.hours=1,void 0!==t&&(this.date=t),void 0!==e&&(this.hours=e)}},t.DateMinutesDto=class{constructor(t,e){this.minutes=1,void 0!==t&&(this.date=t),void 0!==e&&(this.minutes=e)}},t.DateMillisecondsDto=class{constructor(t,e){this.milliseconds=1,void 0!==t&&(this.date=t),void 0!==e&&(this.milliseconds=e)}},t.DateTimeDto=class{constructor(t,e){this.time=1,void 0!==t&&(this.date=t),void 0!==e&&(this.time=e)}},t.CreateFromUnixTimeStampDto=class{constructor(t){this.unixTimeStamp=1,void 0!==t&&(this.unixTimeStamp=t)}},t.CreateDateDto=class{constructor(t,e,s,o,r,n,i){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==t&&(this.year=t),void 0!==e&&(this.month=e),void 0!==s&&(this.day=s),void 0!==o&&(this.hours=o),void 0!==r&&(this.minutes=r),void 0!==n&&(this.seconds=n),void 0!==i&&(this.milliseconds=i)}}}(h||(h={})),function(t){t.LinePointsDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.LineStartEndPointsDto=class{constructor(t,e){void 0!==t&&(this.startPoints=t),void 0!==e&&(this.endPoints=e)}},t.DrawLineDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.line=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.colours=s),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.lineMesh=n)}},t.DrawLinesDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.lines=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.colours=s),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.linesMesh=n)}},t.PointsLinesDto=class{constructor(t){void 0!==t&&(this.points=t)}},t.LineDto=class{constructor(t){void 0!==t&&(this.line=t)}},t.SegmentDto=class{constructor(t){void 0!==t&&(this.segment=t)}},t.SegmentsDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.LinesDto=class{constructor(t){void 0!==t&&(this.lines=t)}},t.LineLineIntersectionDto=class{constructor(t,e,s){this.checkSegmentsOnly=!0,void 0!==t&&(this.line1=t),void 0!==e&&(this.line2=e),void 0!==s&&(this.tolerance=s)}},t.PointOnLineDto=class{constructor(t,e){this.param=.5,void 0!==t&&(this.line=t),void 0!==e&&(this.param=e)}},t.TransformLineDto=class{constructor(t,e){void 0!==t&&(this.line=t),void 0!==e&&(this.transformation=e)}},t.TransformsLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}},t.TransformLinesDto=class{constructor(t,e){void 0!==t&&(this.lines=t),void 0!==e&&(this.transformation=e)}}}(u||(u={})),function(t){t.PolylineCreateDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},t.PolylinePropertiesDto=class{constructor(t,e){this.isClosed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.isClosed=e)}},t.PolylineDto=class{constructor(t){void 0!==t&&(this.polyline=t)}},t.PolylinesDto=class{constructor(t){void 0!==t&&(this.polylines=t)}},t.TransformPolylineDto=class{constructor(t,e){void 0!==t&&(this.polyline=t),void 0!==e&&(this.transformation=e)}},t.DrawPolylineDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polyline=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.colours=s),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.polylineMesh=n)}},t.DrawPolylinesDto=class{constructor(t,e,s,o,r,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==t&&(this.polylines=t),void 0!==e&&(this.opacity=e),void 0!==s&&(this.colours=s),void 0!==o&&(this.size=o),void 0!==r&&(this.updatable=r),void 0!==n&&(this.polylinesMesh=n)}},t.SegmentsToleranceDto=class{constructor(t){this.tolerance=1e-5,void 0!==t&&(this.segments=t)}},t.PolylineToleranceDto=class{constructor(t,e){this.tolerance=1e-5,void 0!==t&&(this.polyline=t),void 0!==e&&(this.tolerance=e)}},t.TwoPolylinesToleranceDto=class{constructor(t,e,s){this.tolerance=1e-5,void 0!==t&&(this.polyline1=t),void 0!==e&&(this.polyline2=e),void 0!==s&&(this.tolerance=s)}}}(d||(d={})),(y=f||(f={})).SignedDistanceFromPlaneToPointDto=class{constructor(t,e){void 0!==t&&(this.point=t),void 0!==e&&(this.plane=e)}},y.TriangleDto=class{constructor(t){void 0!==t&&(this.triangle=t)}},y.TriangleToleranceDto=class{constructor(t){this.tolerance=1e-7,void 0!==t&&(this.triangle=t)}},y.TriangleTriangleToleranceDto=class{constructor(t,e,s){this.tolerance=1e-7,void 0!==t&&(this.triangle1=t),void 0!==e&&(this.triangle2=e),void 0!==s&&(this.tolerance=s)}},y.MeshMeshToleranceDto=class{constructor(t,e,s){this.tolerance=1e-7,void 0!==t&&(this.mesh1=t),void 0!==e&&(this.mesh2=e),void 0!==s&&(this.tolerance=s)}},function(t){t.DxfLineSegmentDto=class{constructor(t,e){void 0!==t&&(this.start=t),void 0!==e&&(this.end=e)}},t.DxfArcSegmentDto=class{constructor(t,e,s,o){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e),void 0!==s&&(this.startAngle=s),void 0!==o&&(this.endAngle=o)}},t.DxfCircleSegmentDto=class{constructor(t,e){void 0!==t&&(this.center=t),void 0!==e&&(this.radius=e)}},t.DxfPolylineSegmentDto=class{constructor(t,e,s){this.closed=!1,void 0!==t&&(this.points=t),void 0!==e&&(this.closed=e),void 0!==s&&(this.bulges=s)}},t.DxfSplineSegmentDto=class{constructor(t,e,s){this.degree=3,this.closed=!1,void 0!==t&&(this.controlPoints=t),void 0!==e&&(this.degree=e),void 0!==s&&(this.closed=s)}},t.DxfPathDto=class{constructor(t){void 0!==t&&(this.segments=t)}},t.DxfPathsPartDto=class{constructor(t,e,s){this.layer="Default",this.color="#000000",void 0!==t&&(this.layer=t),void 0!==e&&(this.color=e),void 0!==s&&(this.paths=s)}},t.DxfModelDto=class{constructor(t,e,s){this.colorFormat="aci",this.acadVersion="AC1009",void 0!==t&&(this.dxfPathsParts=t),void 0!==e&&(this.colorFormat=e),void 0!==s&&(this.acadVersion=s)}}}(m||(m={})),function(t){t.TwoVectorsDto=class{constructor(t,e){void 0!==t&&(this.first=t),void 0!==e&&(this.second=e)}},t.VectorBoolDto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.RemoveAllDuplicateVectorsDto=class{constructor(t,e){this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.tolerance=e)}},t.RemoveConsecutiveDuplicateVectorsDto=class{constructor(t,e,s){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==t&&(this.vectors=t),void 0!==e&&(this.checkFirstAndLast=e),void 0!==s&&(this.tolerance=s)}},t.VectorsTheSameDto=class{constructor(t,e,s){this.tolerance=1e-7,void 0!==t&&(this.vec1=t),void 0!==e&&(this.vec2=e),void 0!==s&&(this.tolerance=s)}},t.VectorDto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.VectorStringDto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.Vector3Dto=class{constructor(t){void 0!==t&&(this.vector=t)}},t.RangeMaxDto=class{constructor(t){void 0!==t&&(this.max=t)}},t.VectorXYZDto=class{constructor(t,e,s){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e),void 0!==s&&(this.z=s)}},t.VectorXYDto=class{constructor(t,e){void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},t.SpanDto=class{constructor(t,e,s){this.step=.1,this.min=0,this.max=1,void 0!==t&&(this.step=t),void 0!==e&&(this.min=e),void 0!==s&&(this.max=s)}},t.SpanEaseItemsDto=class{constructor(t,e,s,o){this.nrItems=100,this.min=0,this.max=1,this.ease=i.easeEnum.easeInSine,this.intervals=!1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==s&&(this.max=s),void 0!==o&&(this.ease=o)}},t.SpanLinearItemsDto=class{constructor(t,e,s){this.nrItems=100,this.min=0,this.max=1,void 0!==t&&(this.nrItems=t),void 0!==e&&(this.min=e),void 0!==s&&(this.max=s)}},t.RayPointDto=class{constructor(t,e,s){void 0!==t&&(this.point=t),void 0!==e&&(this.distance=e),void 0!==s&&(this.vector=s)}},t.VectorsDto=class{constructor(t){void 0!==t&&(this.vectors=t)}},t.FractionTwoVectorsDto=class{constructor(t,e,s){this.fraction=.5,void 0!==t&&(this.fraction=t),void 0!==e&&(this.first=e),void 0!==s&&(this.second=s)}},t.VectorScalarDto=class{constructor(t,e){void 0!==t&&(this.scalar=t),void 0!==e&&(this.vector=e)}},t.TwoVectorsReferenceDto=class{constructor(t,e,s){void 0!==t&&(this.reference=t),void 0!==e&&(this.first=e),void 0!==s&&(this.second=s)}}}(p||(p={})),function(t){let e,s,o,r;!function(t){t.left="left",t.center="center",t.right="right"}(e=t.horizontalAlignEnum||(t.horizontalAlignEnum={})),function(t){t.top="top",t.middle="middle",t.bottom="bottom"}(s=t.verticalAlignmentEnum||(t.verticalAlignmentEnum={})),function(t){t.top="top",t.bottom="bottom"}(o=t.topBottomEnum||(t.topBottomEnum={})),function(t){t.topLeft="topLeft",t.topMid="topMid",t.topRight="topRight",t.midLeft="midLeft",t.midMid="midMid",t.midRight="midRight",t.bottomLeft="bottomLeft",t.bottomMid="bottomMid",t.bottomRight="bottomRight"}(r=t.basicAlignmentEnum||(t.basicAlignmentEnum={}))}(v||(v={}));class R{getItem(t){if(t.index<0||t.index>=t.list.length)throw new Error("Index out of bounds");let e;return e=t.clone?structuredClone(t.list[t.index]):t.list[t.index],e}getFirstItem(t){if(0===t.list.length)throw new Error("List is empty");let e;return e=t.clone?structuredClone(t.list[0]):t.list[0],e}getLastItem(t){if(0===t.list.length)throw new Error("List is empty");let e;return e=t.clone?structuredClone(t.list[t.list.length-1]):t.list[t.list.length-1],e}randomGetThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[];for(let o=0;o<t.list.length;o++)Math.random()<t.threshold&&s.push(e[o]);return s}getSubList(t){let e;return e=t.clone?structuredClone(t.list.slice(t.indexStart,t.indexEnd)):t.list.slice(t.indexStart,t.indexEnd),e}getNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[];for(let o=0;o<e.length;o++)(o+t.offset)%t.nth==0&&s.push(e[o]);return s}getByPattern(t){const{list:e,pattern:s}=t;if(!s||0===s.length)throw new Error("Pattern is empty or does not exist");const o=s.length,r=e.length,n=[];if(o>=r)e.forEach(((t,e)=>{!0===s[e]&&n.push(t)}));else{const t=[],i=Math.ceil(r/o);for(let e=0;e<i;e++)t.push(...s);e.forEach(((e,s)=>{!0===t[s]&&n.push(e)}))}return n}mergeElementsOfLists(t){const e=t.lists,s=t.level,o=[],r=[];e.forEach((t=>{const e=t.flat(s);o.push(e)}));const n=this.getLongestListLength({lists:o});for(let t=0;t<n;t++){const e=[];for(let s=0;s<o.length;s++){const r=o[s][t];void 0!==r&&e.push(r)}e.length>0&&r.push(e)}let i=[];if(s>0)for(let t=0;t<s;t++)t===s-1&&0!==t?i[t-1].push(r):t===s-1?i.push(r):i.push([]);else i=r;return i}getLongestListLength(t){let e=0;return t.lists?(t.lists.forEach((t=>{t.length>e&&(e=t.length)})),e):void 0}reverse(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.reverse()}shuffle(t){let e=t.list;t.clone&&(e=structuredClone(t.list));for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}flipLists(t){if(t.list.length>0){const e=t.list[0].length;let s=!0;if(t.list.forEach((t=>{t.length!==e&&(s=!1)})),s){const s=[];for(let o=0;o<e;o++){const e=[];t.list.forEach((t=>{e.push(t[o])})),s.push(e)}return s}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(t){return(t=>{const{nrElements:e,list:s,keepRemainder:o}=t,r=e,n=[];let i=[];return s.forEach(((t,e)=>{i.push(t),(e+1)%r==0&&(n.push(i),i=[]),i.length>0&&o&&e===s.length-1&&n.push(i)})),n})(t)}includes(t){return t.list.includes(t.item)}findIndex(t){return t.list.indexOf(t.item)}getListDepth(t){let e=0,s=!0,o=t.list;for(;s;){let t=!1;for(let e=0;e<o.length;e++)Array.isArray(o[e])&&(t=!0);o=o.flat(),t?e++:(e++,s=!1)}return e}listLength(t){return t.list.length}addItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,0,t.item),e}addItemAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));let s=[...t.indexes];return s=s.filter((t=>t>=0&&t<=e.length)),s.sort(((t,e)=>t-e)),s.forEach(((s,o)=>{s>=0&&s+o<=e.length&&e.splice(s+o,0,t.item)})),e}addItemsAtIndexes(t){if(t.items.length!==t.indexes.length)throw new Error("Items and indexes must have the same length");for(let e=0;e<t.indexes.length;e++)if(e>0&&t.indexes[e-1]>t.indexes[e])throw new Error("Indexes must be in ascending order");let e=t.list;return t.clone&&(e=structuredClone(t.list)),[...t.indexes].forEach(((s,o)=>{s>=0&&s+o<=e.length&&e.splice(s+o,0,t.items[o])})),e}removeItemAtIndex(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<=e.length&&e.splice(t.index,1),e}removeFirstItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.length>0&&e.shift(),e}removeLastItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.length>0&&e.pop(),e}removeItemAtIndexFromEnd(t){let e=t.list;if(t.clone&&(e=structuredClone(t.list)),t.index>=0&&t.index<e.length){const s=e.length-1-t.index;e.splice(s,1)}return e}removeItemsAtIndexes(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[...t.indexes];return s.sort(((t,e)=>e-t)),s.forEach((t=>{t>=0&&t<e.length&&e.splice(t,1)})),e}removeAllItems(t){return t.list.length=0,t.list}removeNthItem(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[];for(let o=0;o<e.length;o++)(o+t.offset)%t.nth!=0&&s.push(e[o]);return s}randomRemoveThreshold(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[];for(let o=0;o<t.list.length;o++)Math.random()>t.threshold&&s.push(e[o]);return s}removeDuplicateNumbers(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((t,e,s)=>s.indexOf(t)===e))}removeDuplicateNumbersTolerance(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((e,s,o)=>o.findIndex((s=>Math.abs(s-e)<t.tolerance))===s))}removeDuplicates(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.filter(((t,e,s)=>s.indexOf(t)===e))}addItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.push(t.item),e}prependItem(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),e.unshift(t.item),e}addItemFirstLast(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.position===o.firstLastEnum.first?e.unshift(t.item):e.push(t.item),e}concatenate(t){let e=[];return t.clone?t.lists.forEach((t=>{e=e.concat(structuredClone(t))})):t.lists.forEach((t=>{e=e.concat(t)})),e}createEmptyList(){return[]}repeat(t){const e=[];for(let s=0;s<t.times;s++)e.push(t.item);return e}repeatInPattern(t){let e=t.list;t.clone&&(e=structuredClone(t.list));const s=[];let o=0,r=0;for(;o<t.lengthLimit;)s.push(e[r]),r++,r===e.length&&(r=0),o++;return s}sortNumber(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((t,e)=>t-e)):e.sort(((t,e)=>e-t))}sortTexts(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort():e.sort().reverse()}sortByPropValue(t){let e=t.list;return t.clone&&(e=structuredClone(t.list)),t.orderAsc?e.sort(((e,s)=>e[t.property]-s[t.property])):e.sort(((e,s)=>s[t.property]-e[t.property]))}interleave(t){const e=t.clone?structuredClone(t.lists):t.lists;if(!e||0===e.length)throw new Error("Lists array is empty or does not exist");const s=[],o=Math.max(...e.map((t=>t.length)));for(let t=0;t<o;t++)for(const o of e)t<o.length&&s.push(o[t]);return s}}class N{number(t){return t.number}twoNrOperation(t){let e;switch(t.operation){case i.mathTwoNrOperatorEnum.add:e=t.first+t.second;break;case i.mathTwoNrOperatorEnum.subtract:e=t.first-t.second;break;case i.mathTwoNrOperatorEnum.multiply:e=t.first*t.second;break;case i.mathTwoNrOperatorEnum.divide:e=t.first/t.second;break;case i.mathTwoNrOperatorEnum.power:e=Math.pow(t.first,t.second);break;case i.mathTwoNrOperatorEnum.modulus:e=t.first%t.second}return e}modulus(t){return this.twoNrOperation({first:t.number,second:t.modulus,operation:i.mathTwoNrOperatorEnum.modulus})}roundToDecimals(t){return Math.round(t.number*Math.pow(10,t.decimalPlaces))/Math.pow(10,t.decimalPlaces)}roundAndRemoveTrailingZeros(t){const e=Math.round(t.number*Math.pow(10,t.decimalPlaces))/Math.pow(10,t.decimalPlaces);return parseFloat(e.toFixed(t.decimalPlaces))}oneNrOperation(t){let e;switch(t.operation){case i.mathOneNrOperatorEnum.absolute:e=Math.abs(t.number);break;case i.mathOneNrOperatorEnum.negate:e=-t.number;break;case i.mathOneNrOperatorEnum.ln:e=Math.log(t.number);break;case i.mathOneNrOperatorEnum.log10:e=Math.log10(t.number);break;case i.mathOneNrOperatorEnum.tenPow:e=Math.pow(10,t.number);break;case i.mathOneNrOperatorEnum.round:e=Math.round(t.number);break;case i.mathOneNrOperatorEnum.floor:e=Math.floor(t.number);break;case i.mathOneNrOperatorEnum.ceil:e=Math.ceil(t.number);break;case i.mathOneNrOperatorEnum.sqrt:e=Math.sqrt(t.number);break;case i.mathOneNrOperatorEnum.sin:e=Math.sin(t.number);break;case i.mathOneNrOperatorEnum.cos:e=Math.cos(t.number);break;case i.mathOneNrOperatorEnum.tan:e=Math.tan(t.number);break;case i.mathOneNrOperatorEnum.asin:e=Math.asin(t.number);break;case i.mathOneNrOperatorEnum.acos:e=Math.acos(t.number);break;case i.mathOneNrOperatorEnum.atan:e=Math.atan(t.number);break;case i.mathOneNrOperatorEnum.log:e=Math.log(t.number);break;case i.mathOneNrOperatorEnum.exp:e=Math.exp(t.number);break;case i.mathOneNrOperatorEnum.degToRad:e=t.number*Math.PI/180;break;case i.mathOneNrOperatorEnum.radToDeg:e=180*t.number/Math.PI}return e}remap(t){return(t.number-t.fromLow)*(t.toHigh-t.toLow)/(t.fromHigh-t.fromLow)+t.toLow}random(){return Math.random()}randomNumber(t){return Math.random()*(t.high-t.low)+t.low}randomNumbers(t){const e=[];for(let s=0;s<t.count;s++)e.push(this.randomNumber(t));return e}pi(){return Math.PI}toFixed(t){return t.number.toFixed(t.decimalPlaces)}add(t){return t.first+t.second}subtract(t){return t.first-t.second}multiply(t){return t.first*t.second}divide(t){return t.first/t.second}power(t){return Math.pow(t.first,t.second)}sqrt(t){return Math.sqrt(t.number)}abs(t){return Math.abs(t.number)}round(t){return Math.round(t.number)}floor(t){return Math.floor(t.number)}ceil(t){return Math.ceil(t.number)}negate(t){return-t.number}ln(t){return Math.log(t.number)}log10(t){return Math.log10(t.number)}tenPow(t){return Math.pow(10,t.number)}sin(t){return Math.sin(t.number)}cos(t){return Math.cos(t.number)}tan(t){return Math.tan(t.number)}asin(t){return Math.asin(t.number)}acos(t){return Math.acos(t.number)}atan(t){return Math.atan(t.number)}exp(t){return Math.exp(t.number)}degToRad(t){return t.number*Math.PI/180}radToDeg(t){return 180*t.number/Math.PI}ease(t){const e=t.x,s=t.min,o=t.max,r=this[t.ease](e);return this.remap({number:r,fromLow:0,fromHigh:1,toLow:s,toHigh:o})}clamp(t){return Math.max(t.min,Math.min(t.max,t.number))}lerp(t){return t.start+(t.end-t.start)*t.t}inverseLerp(t){return t.start===t.end?0:(t.value-t.start)/(t.end-t.start)}smoothstep(t){const e=Math.max(0,Math.min(1,t.number));return e*e*(3-2*e)}sign(t){return Math.sign(t.number)}fract(t){return t.number-Math.floor(t.number)}wrap(t){const e=t.max-t.min;if(0===e)return t.min;const s=(t.number-t.min)%e;return s<0?s+t.max:s+t.min}pingPong(t){const e=Math.abs(t.t)%(2*t.length);return e>t.length?2*t.length-e:e}moveTowards(t){const e=t.target-t.current;return Math.abs(e)<=t.maxDelta?t.target:t.current+Math.sign(e)*t.maxDelta}easeInSine(t){return 1-Math.cos(t*Math.PI/2)}easeOutSine(t){return Math.sin(t*Math.PI/2)}easeInOutSine(t){return-(Math.cos(Math.PI*t)-1)/2}easeInQuad(t){return t*t}easeOutQuad(t){return 1-(1-t)*(1-t)}easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}easeInCubic(t){return t*t*t}easeOutCubic(t){return 1-Math.pow(1-t,3)}easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}easeInQuart(t){return t*t*t*t}easeOutQuart(t){return 1-Math.pow(1-t,4)}easeInOutQuart(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}easeInQuint(t){return t*t*t*t*t}easeOutQuint(t){return 1-Math.pow(1-t,5)}easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}easeInExpo(t){return 0===t?0:Math.pow(2,10*t-10)}easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}easeInCirc(t){return 1-Math.sqrt(1-t*t)}easeOutCirc(t){return Math.sqrt(1-Math.pow(t-1,2))}easeInOutCirc(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}easeInBack(t){return 2.70158*t*t*t-1.70158*t*t}easeOutBack(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}easeInOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}easeInElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}easeOutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}easeInOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}easeInBounce(t){return 1-this.easeOutBounce(1-t)}easeOutBounce(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375}easeInOutBounce(t){return t<.5?(1-this.easeOutBounce(1-2*t))/2:(1+this.easeOutBounce(2*t-1))/2}}class k{constructor(t,e,s,o){this.geometryHelper=t,this.transforms=e,this.vector=s,this.lists=o}transformPoint(t){const e=t.transformation;let s=[t.point];return s=this.geometryHelper.transformControlPoints(e,s),s[0]}transformPoints(t){return this.geometryHelper.transformControlPoints(t.transformation,t.points)}transformsForPoints(t){if(t.points.length!==t.transformation.length)throw new Error("You must provide equal nr of points and transformations");return t.points.map(((e,s)=>this.geometryHelper.transformControlPoints(t.transformation[s],[e])[0]))}translatePoints(t){const e=this.transforms.translationXYZ({translation:t.translation});return this.geometryHelper.transformControlPoints(e,t.points)}translatePointsWithVectors(t){if(t.points.length!==t.translations.length)throw new Error("You must provide equal nr of points and translations");const e=this.transforms.translationsXYZ({translations:t.translations});return t.points.map(((t,s)=>this.geometryHelper.transformControlPoints(e[s],[t])[0]))}translateXYZPoints(t){const e=this.transforms.translationXYZ({translation:[t.x,t.y,t.z]});return this.geometryHelper.transformControlPoints(e,t.points)}scalePointsCenterXYZ(t){const e=this.transforms.scaleCenterXYZ({center:t.center,scaleXyz:t.scaleXyz});return this.geometryHelper.transformControlPoints(e,t.points)}stretchPointsDirFromCenter(t){const e=this.transforms.stretchDirFromCenter({center:t.center,scale:t.scale,direction:t.direction});return this.geometryHelper.transformControlPoints(e,t.points)}rotatePointsCenterAxis(t){const e=this.transforms.rotationCenterAxis({center:t.center,axis:t.axis,angle:t.angle});return this.geometryHelper.transformControlPoints(e,t.points)}boundingBoxOfPoints(t){const e=[],s=[],o=[];t.points.forEach((t=>{e.push(t[0]),s.push(t[1]),o.push(t[2])}));const r=[Math.min(...e),Math.min(...s),Math.min(...o)],n=[Math.max(...e),Math.max(...s),Math.max(...o)];return{min:r,max:n,center:[(r[0]+n[0])/2,(r[1]+n[1])/2,(r[2]+n[2])/2],width:n[0]-r[0],height:n[1]-r[1],length:n[2]-r[2]}}closestPointFromPointsDistance(t){return this.closestPointFromPointData(t).distance}closestPointFromPointsIndex(t){return this.closestPointFromPointData(t).index}closestPointFromPoints(t){return this.closestPointFromPointData(t).point}distance(t){const e=t.endPoint[0]-t.startPoint[0],s=t.endPoint[1]-t.startPoint[1],o=t.endPoint[2]-t.startPoint[2];return Math.sqrt(e*e+s*s+o*o)}distancesToPoints(t){return t.endPoints.map((e=>this.distance({startPoint:t.startPoint,endPoint:e})))}multiplyPoint(t){const e=[];for(let s=0;s<t.amountOfPoints;s++)e.push([t.point[0],t.point[1],t.point[2]]);return e}getX(t){return t.point[0]}getY(t){return t.point[1]}getZ(t){return t.point[2]}averagePoint(t){const e=[],s=[],o=[];return t.points.forEach((t=>{e.push(t[0]),s.push(t[1]),o.push(t[2])})),[e.reduce(((t,e)=>t+e),0)/t.points.length,s.reduce(((t,e)=>t+e),0)/t.points.length,o.reduce(((t,e)=>t+e),0)/t.points.length]}pointXYZ(t){return[t.x,t.y,t.z]}pointXY(t){return[t.x,t.y]}spiral(t){const e=t.phi,s=Math.log(e)/(Math.PI/t.widening),o=[],r=t.radius/t.numberPoints;for(let e=0;e<t.radius;e+=r){const r=Math.log(e/t.factor)/s,n=e*Math.cos(r),i=e*Math.sin(r);o.push([n||0,i||0,0])}return o}hexGrid(t){const e=Math.sqrt(Math.pow(t.radiusHexagon,2)-Math.pow(t.radiusHexagon/2,2)),s=[];for(let o=0;o<t.nrHexagonsX;o++){const r=o*e*2;for(let o=0;o<t.nrHexagonsY;o++){const n=(t.radiusHexagon+t.radiusHexagon/2)*o,i=r+(o%2==0?0:e);s.push([i,n,0])}}if(t.orientOnCenter){const t=s[s.length-1][0]/2,e=s[s.length-1][1]/2;s.forEach(((o,r)=>{s[r]=[o[0]-t,o[1]-e,0]}))}return t.pointsOnGround&&s.forEach(((t,e)=>{s[e]=[t[0],0,t[1]]})),s}hexGridScaledToFit(t){var e,s,o,r;let n=t.width,i=t.height,a=t.nrHexagonsInHeight,c=t.nrHexagonsInWidth,l=null!==(e=t.extendTop)&&void 0!==e&&e,h=null!==(s=t.extendBottom)&&void 0!==s&&s,u=null!==(o=t.extendLeft)&&void 0!==o&&o,d=null!==(r=t.extendRight)&&void 0!==r&&r;const{flatTop:f=!1,centerGrid:m=!1,pointsOnGround:p=!1}=t;if(f){const e=n;n=t.height,i=e;const s=c;c=a,a=s;const o=l,r=h;l=u,h=d,u=r,d=o}if(n<=0||i<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const v=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===v.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=v.map((t=>this.getRegularHexagonVertices(t,1)));let y=1/0,b=-1/0,x=1/0,P=-1/0;for(const t of g)for(const e of t)e[0]<y&&(y=e[0]),e[0]>b&&(b=e[0]),e[1]<x&&(x=e[1]),e[1]>P&&(P=e[1]);const C=b-y,D=P-x,S=C>1e-9?n/C:1,w=D>1e-9?i/D:1;let T=v.map((t=>[(t[0]-y)*S,(t[1]-x)*w,0])),M=g.map((t=>t.map((t=>[(t[0]-y)*S,(t[1]-x)*w,0])))),O=1/0,E=-1/0,A=0;if(0!==M.length){const t=M[0];if(A=this.safestPointsMaxFilletHalfLine({points:t,checkLastWithFirst:!0,tolerance:1e-7}),t.forEach(((e,s)=>{const o=t[(s+1)%t.length],r=this.distance({startPoint:e,endPoint:o});r<O&&(O=r),r>E&&(E=r)})),l||h||u||d){const e=t[0],s=t[1],o=e[1]-s[1],r=s[0]-e[0];if(l&&!h){const t={center:[0,0,0],direction:[0,1,0],scale:i/(i-o)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(h&&!l){const t={center:[0,i,0],direction:[0,-1,0],scale:i/(i-o)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(l&&h){const t={center:[0,i/2,0],direction:[0,1,0],scale:i/(i-2*o)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(u&&!d){const t={center:[n,0,0],direction:[1,0,0],scale:n/(n-r)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(d&&!u){const t={center:[0,0,0],direction:[1,0,0],scale:n/(n-r)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}if(u&&d){const t={center:[n/2,0,0],direction:[1,0,0],scale:n/(n-2*r)};M=M.map((e=>(t.points=e,this.stretchPointsDirFromCenter(t)))),t.points=T,T=this.stretchPointsDirFromCenter(t)}}}if(f){T=this.rotatePointsCenterAxis({points:T,center:[n/2,i/2,0],axis:[0,0,1],angle:90}),M=M.map((t=>this.rotatePointsCenterAxis({points:t,center:[n/2,i/2,0],axis:[0,0,1],angle:90})));const t=this.vector.sub({first:[i/2,n/2,0],second:[n/2,i/2,0]});T=this.translatePoints({points:T,translation:t}),M=M.map((e=>this.translatePoints({points:e,translation:t})))}if(m){let t=n/2,e=i/2;f&&(t=i/2,e=n/2);for(let s=0;s<T.length;s++)T[s][0]-=t,T[s][1]-=e;for(let s=0;s<M.length;s++)for(let o=0;o<M[s].length;o++)M[s][o][0]-=t,M[s][o][1]-=e}if(p){for(let t=0;t<T.length;t++)T[t]=[T[t][0],0,T[t][1]];for(let t=0;t<M.length;t++)for(let e=0;e<M[t].length;e++)M[t][e]=[M[t][e][0],0,M[t][e][1]]}if(f){const e=this.lists.groupNth({list:M.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),s=this.lists.flipLists({list:e});s.forEach((t=>t.reverse())),M=s.flat();const o=this.lists.groupNth({list:T.reverse(),nrElements:t.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:o});r.forEach((t=>t.reverse())),T=r.flat()}return{centers:T,hexagons:M,shortestDistEdge:O,longestDistEdge:E,maxFilletRadius:A}}maxFilletRadius(t){const{start:e,center:s,end:o,tolerance:r=1e-7}=t,n=this.vector.sub({first:e,second:o}),i=this.vector.sub({first:s,second:o}),a=this.vector.length({vector:n}),c=this.vector.length({vector:i});if(a<r||c<r)return 0;const l=this.vector.normalized({vector:n}),h=this.vector.normalized({vector:i});if(!l||!h)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:l,second:h})));if(u>1-r)return 0;if(u<-1+r)return 0;const d=Math.acos(u),f=Math.tan(d/2);return f<r?0:Math.min(a,c)*f}maxFilletRadiusHalfLine(t){const{start:e,center:s,end:o,tolerance:r=1e-7}=t,n=this.vector.sub({first:e,second:o}),i=this.vector.sub({first:s,second:o}),a=this.vector.length({vector:n}),c=this.vector.length({vector:i});if(a<r||c<r)return 0;const l=this.vector.normalized({vector:n}),h=this.vector.normalized({vector:i});if(!l||!h)return 0;const u=Math.max(-1,Math.min(1,this.vector.dot({first:l,second:h})));if(u>1-r||u<-1+r)return 0;const d=Math.acos(u),f=Math.tan(d/2);return f<r?0:Math.min(a/2,c/2)*f}maxFilletsHalfLine(t){const{points:e,checkLastWithFirst:s=!1,tolerance:o=1e-7}=t,r=e.length,n=[];if(r<3)return n;for(let t=1;t<r-1;t++){const s=e[t-1],r=e[t],i={start:s,center:e[t+1],end:r,tolerance:o};n.push(this.maxFilletRadiusHalfLine(i))}if(s&&r>=3){const t=e[r-1],s=e[0],i={start:t,center:e[1],end:s,tolerance:o};n.push(this.maxFilletRadiusHalfLine(i));const a=e[r-2],c=e[r-1],l={start:a,center:e[0],end:c,tolerance:o};n.push(this.maxFilletRadiusHalfLine(l))}return n}safestPointsMaxFilletHalfLine(t){const e=this.maxFilletsHalfLine(t);if(0===e.length)return 0;const s=Math.min(...e);return Math.max(0,s)}removeConsecutiveDuplicates(t){return this.geometryHelper.removeConsecutivePointDuplicates(t.points,t.checkFirstAndLast,t.tolerance)}normalFromThreePoints(t){const e=t.point1,s=t.point2,o=t.point3;if(!e||!s||!o||3!==e.length||3!==s.length||3!==o.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const r=s[0]-e[0],n=s[1]-e[1],i=s[2]-e[2],a=o[0]-e[0],c=o[1]-e[1],l=o[2]-e[2];let h=n*l-i*c,u=i*a-r*l,d=r*c-n*a;if(0!==h||0!==u||0!==d)return t.reverseNormal&&(h=-h,u=-u,d=-d),this.vector.normalized({vector:[h,u,d]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(t){let e,s,o=Number.MAX_SAFE_INTEGER;for(let r=0;r<t.points.length;r++){const n=t.points[r],i=this.distance({startPoint:t.point,endPoint:n});i<o&&(o=i,e=r,s=n)}return{index:e+1,distance:o,point:s}}twoPointsAlmostEqual(t){const e=t.point1,s=t.point2;return this.distance({startPoint:e,endPoint:s})<t.tolerance}sortPoints(t){return[...t.points].sort(((t,e)=>t[0]!==e[0]?t[0]-e[0]:t[1]!==e[1]?t[1]-e[1]:t[2]-e[2]))}getRegularHexagonVertices(t,e){const s=[],o=t[0],r=t[1],n=t[2],i=Math.PI/3;for(let t=0;t<6;t++){const a=i*t;s.push([o+e*Math.sin(a),r+e*Math.cos(a),n])}return s}}const H={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12],176:[14,7,21,5,20,4,18,4,16,5,14,7,13,9,14,10,16,10,18,9,20,7,21],178:[14,5,17,5,18,6,19,7,20,9,21,10,21,11,20,12,19,12,18,11,17,10,16,6,14,12,14],179:[14,5,21,11,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],181:[19,4,14,4,-7,void 0,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],185:[14,7,19,8,20,10,21,10,14],188:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],189:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,15,4,15,5,16,6,17,7,19,7,20,6,20,5,19,4,17,2,15,0,21,0],190:[26,4,21,10,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],215:[18,3,15,15,3,void 0,15,15,3,3],247:[22,4,9,18,9,void 0,11,15,10,14,11,13,12,14,11,15,void 0,11,5,10,4,11,3,12,4,11,5],177:[26,13,18,13,6,void 0,4,12,22,12,void 0,4,3,22,3],8304:[14,8,21,7,20,6,19,5,17,5,15,6,14,8,14,9,14,11,15,12,17,12,19,11,20,9,21,8,21],8308:[14,10,21,6,17,12,17,void 0,10,21,10,14],8309:[14,11,21,6,21,5,17,6,17,7,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],8310:[14,11,19,10,20,9,21,7,21,6,20,5,18,5,15,6,14,8,14,9,14,10,15,11,16,11,17,10,18,9,18,8,17,7,16,6,15],8311:[14,11,21,7,14,void 0,5,21,11,21],8312:[14,8,21,7,20,6,19,6,18,7,17,8,17,9,18,10,19,10,20,9,21,8,21,7,20,void 0,8,17,7,16,6,15,6,14,7,13,8,13,9,14,10,15,10,16,9,17],8313:[14,10,17,9,16,8,16,7,17,6,18,6,19,7,20,8,20,9,19,10,18,10,15,9,14,7,14,6,15,5,16],8320:[14,8,7,7,6,6,5,5,3,5,1,6,0,8,0,9,0,11,1,12,3,12,5,11,6,9,7,8,7],8321:[14,7,5,8,6,10,7,10,0],8322:[14,5,4,5,5,6,6,7,7,9,7,10,6,11,5,11,4,10,3,9,2,6,0,12,0],8323:[14,5,7,11,7,8,4,10,4,11,3,12,2,12,1,11,0,9,0,7,1,6,2,5,3],8324:[14,10,7,6,3,12,3,void 0,10,7,10,0],8776:[24,3,11,4,13,6,14,8,14,10,13,14,10,16,9,18,9,20,10,21,12,void 0,3,5,4,7,6,8,8,8,10,7,14,4,16,3,18,3,20,4,21,6],8730:[20,4,12,6,8,8,0,void 0,8,0,10,21,void 0,10,21,20,21],8731:[24,2,21,5,21,4,19,5,18,6,17,6,16,5,15,3,15,2,16,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8732:[24,5,21,3,18,6,18,void 0,5,21,5,15,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8960:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,6,3,16,18]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class _{constructor(t){this.point=t}create(t){return t.text}split(t){return t.text.split(t.separator)}replaceAll(t){return t.text.split(t.search).join(t.replaceWith)}join(t){return t.list.join(t.separator)}toString(t){return t.item.toString()}toStringEach(t){return t.list.map((t=>t.toString()))}format(t){return t.text.replace(/{(\d+)}/g,((e,s)=>void 0!==t.values[s]?t.values[s]:e))}includes(t){return t.text.includes(t.search)}startsWith(t){return t.text.startsWith(t.search)}endsWith(t){return t.text.endsWith(t.search)}indexOf(t){return t.text.indexOf(t.search)}lastIndexOf(t){return t.text.lastIndexOf(t.search)}substring(t){return t.text.substring(t.start,t.end)}slice(t){return t.text.slice(t.start,t.end)}charAt(t){return t.text.charAt(t.index)}trim(t){return t.text.trim()}trimStart(t){return t.text.trimStart()}trimEnd(t){return t.text.trimEnd()}padStart(t){return t.text.padStart(t.length,t.padString)}padEnd(t){return t.text.padEnd(t.length,t.padString)}toUpperCase(t){return t.text.toUpperCase()}toLowerCase(t){return t.text.toLowerCase()}toUpperCaseFirst(t){return t.text?t.text.charAt(0).toUpperCase()+t.text.slice(1):t.text}toLowerCaseFirst(t){return t.text?t.text.charAt(0).toLowerCase()+t.text.slice(1):t.text}repeat(t){return t.text.repeat(t.count)}reverse(t){return t.text.split("").reverse().join("")}length(t){return t.text.length}isEmpty(t){return!t.text||0===t.text.trim().length}concat(t){return t.texts.join("")}regexTest(t){return new RegExp(t.pattern,t.flags).test(t.text)}regexMatch(t){const e=new RegExp(t.pattern,t.flags),s=t.text.match(e);return s?Array.from(s):null}regexReplace(t){const e=new RegExp(t.pattern,t.flags);return t.text.replace(e,t.replaceWith)}regexSearch(t){const e=new RegExp(t.pattern,t.flags);return t.text.search(e)}regexSplit(t){const e=new RegExp(t.pattern,t.flags);return t.text.split(e)}vectorChar(t){const{xOffset:e,yOffset:s,font:o,input:r,height:n,extrudeOffset:i}=this.vectorParamsChar(t);let a=r.charCodeAt(0);a&&o[a]||(a=63);const c=[].concat(o[a]),l=(n-i)/o.height,h=i/2,u=c.shift()*l,d=[];let f=[];for(let t=0,o=c.length;t<o;t+=2){const o=l*c[t]+e,r=l*c[t+1]+s+h;void 0===c[t]?(d.push(f),f=[],t--):f.push([o,0,r])}return f.length&&d.push(f),{width:u,height:n,paths:d}}vectorText(t){const{xOffset:e,yOffset:s,height:o,align:r,extrudeOffset:n,lineSpacing:i,letterSpacing:a}=Object.assign({},H,t),c=t.text;if("string"!=typeof c)throw new Error("text must be a string");const l=o*a;let h=0,u={width:0,height:0,chars:[]},d=[];const f=()=>{h=Math.max(h,u.width),u.chars.length&&d.push(u),u={width:0,height:0,chars:[]}};let m,p=e,g=s;const y=c.length;for(let t=0;t<y;t++){const s=c[t];if("\n"===s){f(),p=e,g-=o*i;continue}m=this.vectorChar({xOffset:p,yOffset:g,height:o,extrudeOffset:n,char:s});const r=m.width+l;p+=r,u.width+=r,u.height=Math.max(u.height,m.height)," "!==s&&(u.chars=u.chars.concat(m))}if(u.chars.length&&f(),d=d.map((t=>{const e=h-t.width;return r===v.horizontalAlignEnum.right?this.translateLine({x:e},t):r===v.horizontalAlignEnum.center?this.translateLine({x:e/2},t):t})),t.centerOnOrigin){const t=[];d.forEach((e=>{e.chars.forEach((e=>{e.paths.forEach((e=>{t.push(...e)}))}))}));const e=this.point.boundingBoxOfPoints({points:t});d.forEach((t=>{t.chars.forEach((t=>(t.paths=t.paths.map((t=>this.point.translatePoints({points:t,translation:[-e.center[0],-e.center[1],-e.center[2]]}))),t)))}))}return d}vectorParamsChar(t){const e=Object.assign({},H,t);return e.input=t.char||e.char,e}translateLine(t,e){const{x:s,y:o}=Object.assign({x:0,y:0},t);return e.chars=e.chars.map((t=>(t.paths=t.paths.map((t=>this.point.translatePoints({points:t,translation:[s,0,o]}))),t))),e}}class V{constructor(t,e){this.math=t,this.geometryHelper=e}removeAllDuplicateVectors(t){return this.geometryHelper.removeAllDuplicateVectors(t.vectors,t.tolerance)}removeConsecutiveDuplicateVectors(t){return this.geometryHelper.removeConsecutiveVectorDuplicates(t.vectors,t.checkFirstAndLast,t.tolerance)}vectorsTheSame(t){return this.geometryHelper.vectorsTheSame(t.vec1,t.vec2,t.tolerance)}angleBetween(t){return this.math.radToDeg({number:Math.acos(this.dot({first:t.first,second:t.second})/(this.norm({vector:t.first})*this.norm({vector:t.second})))})}angleBetweenNormalized2d(t){const e=t.first[0]*t.second[1]-t.first[1]*t.second[0];return this.math.radToDeg({number:Math.atan2(e,this.dot({first:t.first,second:t.second}))})}positiveAngleBetween(t){const e=this.signedAngleBetween(t);return e<0?360+e:e}addAll(t){const e=[];for(let s=0;s<t.vectors[0].length;s++){let o=0;for(const e of t.vectors)o+=e[s];e.push(o)}return e}add(t){const e=[];for(let s=0;s<t.first.length;s++)e.push(t.first[s]+t.second[s]);return e}all(t){return t.vector.every((t=>t))}cross(t){const e=[];return e.push(t.first[1]*t.second[2]-t.first[2]*t.second[1]),e.push(t.first[2]*t.second[0]-t.first[0]*t.second[2]),e.push(t.first[0]*t.second[1]-t.first[1]*t.second[0]),e}distSquared(t){let e=0;for(let s=0;s<t.first.length;s++)e+=Math.pow(t.first[s]-t.second[s],2);return e}dist(t){return Math.sqrt(this.distSquared(t))}div(t){const e=[];for(let s=0;s<t.vector.length;s++)e.push(t.vector[s]/t.scalar);return e}domain(t){return t.vector[t.vector.length-1]-t.vector[0]}dot(t){let e=0;for(let s=0;s<t.first.length;s++)e+=t.first[s]*t.second[s];return e}finite(t){return t.vector.map((t=>isFinite(t)))}isZero(t){return 0===this.norm({vector:t.vector})}lerp(t){return this.add({first:this.mul({vector:t.first,scalar:t.fraction}),second:this.mul({vector:t.second,scalar:1-t.fraction})})}max(t){return Math.max(...t.vector)}min(t){return Math.min(...t.vector)}mul(t){const e=[];for(let s=0;s<t.vector.length;s++)e.push(t.vector[s]*t.scalar);return e}neg(t){const e=[];for(let s=0;s<t.vector.length;s++)e.push(-t.vector[s]);return e}normSquared(t){return this.dot({first:t.vector,second:t.vector})}norm(t){const e=this.normSquared(t);return 0!==e?Math.sqrt(e):e}normalized(t){if(!(this.length({vector:t.vector})<=1e-8))return this.div({scalar:this.norm(t),vector:t.vector})}onRay(t){return this.add({first:t.point,second:this.mul({vector:t.vector,scalar:t.distance})})}vectorXYZ(t){return[t.x,t.y,t.z]}vectorXY(t){return[t.x,t.y]}range(t){const e=[];for(let s=0;s<t.max;s++)e.push(s);return e}signedAngleBetween(t){const e=this.cross({first:t.first,second:t.second}),s=this.norm({vector:t.first})*this.norm({vector:t.second}),o=this.dot({first:t.first,second:t.second}),r=this.norm({vector:e})/s,n=o/s,i=Math.atan2(r,n),a=this.dot({first:t.reference,second:e})>0?i:2*Math.PI-i;return this.math.radToDeg({number:a})}span(t){const e=[];for(let s=t.min;s<=t.max;s+=t.step)e.push(s);return e}spanEaseItems(t){const e=[];for(let s=0;s<t.nrItems;s++){const o=1*s/(t.nrItems-1);e.push(this.math.ease({x:o,ease:t.ease,min:t.min,max:t.max}))}return t.intervals?e.map(((t,e,s)=>0===e?t:t-s[e-1])):e}spanLinearItems(t){const e=[],s=t.max-t.min;for(let o=0;o<t.nrItems;o++){const r=s*o/(t.nrItems-1);e.push(r+t.min)}return e}sub(t){const e=[];for(let s=0;s<t.first.length;s++)e.push(t.first[s]-t.second[s]);return e}sum(t){return t.vector.reduce(((t,e)=>t+e),0)}lengthSq(t){const e=t.vector;return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}length(t){return Math.sqrt(this.lengthSq(t))}parseNumbers(t){return t.vector.map((t=>parseFloat(t)))}}class j{constructor(t,e){this.vector=t,this.math=e}rotationCenterAxis(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationAxis(t.axis,this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterX(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationX(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterY(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationY(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationZ(this.math.degToRad({number:t.angle})),this.translation(t.center[0],t.center[1],t.center[2])]}rotationCenterYawPitchRoll(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:t.yaw}),this.math.degToRad({number:t.pitch}),this.math.degToRad({number:t.roll})),this.translation(t.center[0],t.center[1],t.center[2])]}scaleCenterXYZ(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2]),this.translation(t.center[0],t.center[1],t.center[2])]}scaleXYZ(t){return[this.scaling(t.scaleXyz[0],t.scaleXyz[1],t.scaleXyz[2])]}stretchDirFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.stretchDirection(t.direction,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}uniformScale(t){return[this.scaling(t.scale,t.scale,t.scale)]}uniformScaleFromCenter(t){return[this.translation(-t.center[0],-t.center[1],-t.center[2]),this.scaling(t.scale,t.scale,t.scale),this.translation(t.center[0],t.center[1],t.center[2])]}translationXYZ(t){return[this.translation(t.translation[0],t.translation[1],t.translation[2])]}translationsXYZ(t){return t.translations.map((t=>[this.translation(t[0],t[1],t[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(t,e,s){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1]}scaling(t,e,s){return[t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1]}rotationAxis(t,e){const s=Math.sin(-e),o=Math.cos(-e),r=1-o,n=this.vector.normalized({vector:t}),i=n[0],a=n[1],c=n[2],l=this.identity();return l[0]=i*i*r+o,l[1]=i*a*r-c*s,l[2]=i*c*r+a*s,l[3]=0,l[4]=a*i*r+c*s,l[5]=a*a*r+o,l[6]=a*c*r-i*s,l[7]=0,l[8]=c*i*r-a*s,l[9]=c*a*r+i*s,l[10]=c*c*r+o,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}rotationX(t){const e=Math.sin(t),s=Math.cos(t);return[1,0,0,0,0,s,e,0,0,-e,s,0,0,0,0,1]}rotationY(t){const e=Math.sin(t),s=Math.cos(t);return[s,0,-e,0,0,1,0,0,e,0,s,0,0,0,0,1]}rotationZ(t){const e=Math.sin(t),s=Math.cos(t);return[s,e,0,0,-e,s,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(t,e,s){const o=.5*s,r=.5*e,n=.5*t,i=Math.sin(o),a=Math.cos(o),c=Math.sin(r),l=Math.cos(r),h=Math.sin(n),u=Math.cos(n),d=u*c*a+h*l*i,f=h*l*a-u*c*i,m=u*l*i-h*c*a,p=u*l*a+h*c*i;return this.rotationMatrixFromQuat(d,f,m,p)}rotationMatrixFromQuat(t,e,s,o){const r=t*t,n=e*e,i=s*s,a=t*e,c=s*o,l=s*t,h=e*o,u=e*s,d=t*o,f=this.identity();return f[0]=1-2*(n+i),f[1]=2*(a+c),f[2]=2*(l-h),f[3]=0,f[4]=2*(a-c),f[5]=1-2*(i+r),f[6]=2*(u+d),f[7]=0,f[8]=2*(l+h),f[9]=2*(u-d),f[10]=1-2*(n+r),f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}stretchDirection(t,e){const s=this.vector.normalized({vector:t}),[o,r,n]=s;if(isNaN(o)||0===o&&0===r&&0===n)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const i=e-1;return[1+i*o*o,i*r*o,i*n*o,0,i*o*r,1+i*r*r,i*n*r,0,i*o*n,i*r*n,1+i*n*n,0,0,0,0,1]}}class B{constructor(){this.getArrayDepth=t=>Array.isArray(t)?1+Math.max(...t.map(this.getArrayDepth)):0}transformControlPoints(t,e){return this.getFlatTransformations(t).forEach((t=>{e=this.transformPointsByMatrixArray(e,t)})),e}getFlatTransformations(t){let e=[];return 3===this.getArrayDepth(t)?t.forEach((t=>{e.push(...t)})):e=t,e}transformPointsByMatrixArray(t,e){return this.transformPointsCoordinates(t,e)}transformPointsCoordinates(t,e){const s=[];for(const o of t){const t=this.transformCoordinates(o[0],o[1],o[2],e);s.push(t)}return s}removeAllDuplicateVectors(t,e=1e-7){const s=[];return t.forEach((t=>{s.some((s=>this.vectorsTheSame(t,s,e)))||s.push(t)})),s}removeConsecutiveVectorDuplicates(t,e=!0,s=1e-7){const o=[];if(t.length>1){for(let e=1;e<t.length;e++){const r=t[e],n=t[e-1];this.vectorsTheSame(r,n,s)||o.push(n),e===t.length-1&&o.push(r)}if(e){const t=o[0],e=o[o.length-1];this.vectorsTheSame(t,e,s)&&o.pop()}}else 1===t.length&&o.push(...t);return o}vectorsTheSame(t,e,s){let o=!1;if(t.length!==e.length)return o;o=!0;for(let r=0;r<t.length;r++)if(!this.approxEq(t[r],e[r],s)){o=!1;break}return o}approxEq(t,e,s){return Math.abs(t-e)<s}removeConsecutivePointDuplicates(t,e=!0,s=1e-7){const o=[];if(t.length>1){for(let e=1;e<t.length;e++){const r=t[e],n=t[e-1];this.arePointsTheSame(r,n,s)||o.push(n),e===t.length-1&&o.push(r)}if(e){const t=o[0],e=o[o.length-1];this.arePointsTheSame(t,e,s)&&o.pop()}}else 1===t.length&&o.push(...t);return o}arePointsTheSame(t,e,s){let o=!1;return 2===t.length&&2===e.length?this.approxEq(t[0],e[0],s)&&this.approxEq(t[1],e[1],s)&&(o=!0):3===t.length&&3===e.length&&this.approxEq(t[0],e[0],s)&&this.approxEq(t[1],e[1],s)&&this.approxEq(t[2],e[2],s)&&(o=!0),o}transformCoordinates(t,e,s,o){const r=o,n=t*r[0]+e*r[4]+s*r[8]+r[12],i=t*r[1]+e*r[5]+s*r[9]+r[13],a=t*r[2]+e*r[6]+s*r[10]+r[14],c=1/(t*r[3]+e*r[7]+s*r[11]+r[15]);return[n*c,i*c,a*c]}}class W{constructor(t,e,s){this.vector=t,this.point=e,this.geometryHelper=s}getStartPoint(t){return t.line.start}getEndPoint(t){return t.line.end}length(t){return this.point.distance({startPoint:t.line.start,endPoint:t.line.end})}reverse(t){return{start:t.line.end,end:t.line.start}}transformLine(t){const e=t.transformation;let s=[t.line.start,t.line.end];return s=this.geometryHelper.transformControlPoints(e,s),{start:s[0],end:s[1]}}transformsForLines(t){return t.lines.map(((e,s)=>{const o=t.transformation[s];let r=[e.start,e.end];return r=this.geometryHelper.transformControlPoints(o,r),{start:r[0],end:r[1]}}))}create(t){return{start:t.start,end:t.end}}createSegment(t){return[t.start,t.end]}getPointOnLine(t){const e=t.line.start,s=t.line.end,o=t.param,r=[s[0]-e[0],s[1]-e[1],s[2]-e[2]];return[e[0]+o*r[0],e[1]+o*r[1],e[2]+o*r[2]]}linesBetweenPoints(t){const e=[];for(let s=1;s<t.points.length;s++){const o=t.points[s-1],r=t.points[s];e.push({start:o,end:r})}return e}linesBetweenStartAndEndPoints(t){return t.startPoints.map(((e,s)=>({start:e,end:t.endPoints[s]}))).filter((t=>0!==this.point.distance({startPoint:t.start,endPoint:t.end})))}lineToSegment(t){return[t.line.start,t.line.end]}linesToSegments(t){return t.lines.map((t=>[t.start,t.end]))}segmentToLine(t){return{start:t.segment[0],end:t.segment[1]}}segmentsToLines(t){return t.segments.map((t=>({start:t[0],end:t[1]})))}lineLineIntersection(t){const e=t.tolerance||1e-6,s=t.checkSegmentsOnly,o=t.line1,r=t.line2;if(!((null==o?void 0:o.start)&&o.end&&(null==r?void 0:r.start)&&r.end&&3===o.start.length&&3===o.end.length&&3===r.start.length&&3===r.end.length))return void console.error("Invalid line input to lineLineIntersection");const n=o.start,i=this.vector.sub({first:o.end,second:o.start}),a=r.start,c=this.vector.sub({first:r.end,second:r.start}),l=this.vector.sub({first:a,second:n}),h=this.vector.lengthSq({vector:i}),u=this.vector.lengthSq({vector:c});if(h<e*e||u<e*e)return;const d=this.vector.cross({first:i,second:c});if(this.vector.lengthSq({vector:d})<e*e){const t=this.vector.cross({first:l,second:i}),o=e*e*h;if(this.vector.lengthSq({vector:t})<o){if(s){const t=h<e*e?1:h,s=this.vector.dot({first:i,second:l})/t,o=this.vector.sub({first:r.end,second:n}),a=this.vector.dot({first:i,second:o})/t,c=[Math.min(s,a),Math.max(s,a)],u=[0,1];return Math.max(u[0],c[0]),void Math.min(u[1],c[1])}return n}return}const f=this.vector.dot({first:l,second:d}),m=e*e*e;if(Math.abs(f)>m)return;const p=h,v=u,g=this.vector.dot({first:i,second:c}),y=this.vector.dot({first:i,second:l}),b=this.vector.dot({first:c,second:l}),x=p*v-g*g;if(Math.abs(x)<e*e)return void console.error("Internal error: Denominator near zero after non-parallel check.");const P=(v*y-g*b)/x,C=(g*y-p*b)/x;if(s&&(P<-e||P>1+e||C<-e||C>1+e))return;const D=this.getPointOnLine({param:P,line:o});return[Math.abs(D[0])<e?0:D[0],Math.abs(D[1])<e?0:D[1],Math.abs(D[2])<e?0:D[2]]}}class z{constructor(t,e,s,o){this.vector=t,this.point=e,this.line=s,this.geometryHelper=o}length(t){let e=0;for(let s=1;s<t.polyline.points.length;s++){const o=t.polyline.points[s-1],r=t.polyline.points[s];e+=this.point.distance({startPoint:o,endPoint:r})}return e}countPoints(t){return t.polyline.points.length}getPoints(t){return t.polyline.points}reverse(t){return{points:t.polyline.points.reverse()}}transformPolyline(t){const e=t.transformation;let s=t.polyline.points;return s=this.geometryHelper.transformControlPoints(e,s),{points:s}}create(t){var e;return{points:t.points,isClosed:null!==(e=t.isClosed)&&void 0!==e&&e}}polylineToLines(t){return this.polylineToSegments(t).map((t=>({start:t[0],end:t[1]})))}polylineToSegments(t){const e=t.polyline,s=[],o=e.points,r=o.length;if(r<2)return s;for(let t=0;t<r-1;t++)s.push([o[t],o[t+1]]);return e.isClosed&&r>=2&&(this.point.twoPointsAlmostEqual({point1:o[r-1],point2:o[0],tolerance:1e-9})||s.push([o[r-1],o[0]])),s}polylineSelfIntersection(t){const{polyline:e,tolerance:s}=t,o=this.polylineToLines({polyline:e}),r=o.length;if(r<3)return[];const n=[],i=null!=s?s:1e-6;for(let t=0;t<r;t++)for(let s=t+1;s<r;s++){let a=s===t+1;if(!a&&e.isClosed&&0===t&&s===r-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:o[t],line2:o[s],checkSegmentsOnly:!0,tolerance:i});if(c){let t=!1;for(const e of n)if(this.point.twoPointsAlmostEqual({point1:c,point2:e,tolerance:i})){t=!0;break}t||n.push(c)}}return n}twoPolylineIntersection(t){const{polyline1:e,polyline2:s,tolerance:o}=t,r=this.polylineToLines({polyline:e}),n=this.polylineToLines({polyline:s}),i=[],a=null!=o?o:1e-6;for(const t of r)for(const e of n){const s=this.line.lineLineIntersection({line1:t,line2:e,checkSegmentsOnly:!0,tolerance:a});if(s){let t=!1;for(const e of i)if(this.point.twoPointsAlmostEqual({point1:s,point2:e,tolerance:a})){t=!0;break}t||i.push(s)}}return i}sortSegmentsIntoPolylines(t){var e;const s=null!==(e=t.tolerance)&&void 0!==e?e:1e-5,o=t.segments;if(!o||0===o.length)return[];const r=s*s,n=o.length,i=new Array(n).fill(!1),a=[],c=new Map,l=1/s,h=t=>`${Math.round(t[0]*l)},${Math.round(t[1]*l)},${Math.round(t[2]*l)}`;for(let t=0;t<n;t++){const e=o[t];if(this.point.twoPointsAlmostEqual({point1:e[0],point2:e[1],tolerance:s})){i[t]=!0;continue}const r=h(e[0]),n=h(e[1]),a={segmentIndex:t,endpointIndex:0,coords:e[0]},l={segmentIndex:t,endpointIndex:1,coords:e[1]};c.has(r)||c.set(r,[]),c.get(r).push(a),n!==r?(c.has(n)||c.set(n,[]),c.get(n).push(l)):c.get(r).push(l)}const u=t=>{const e=[],o=Math.round(t[0]*l),n=Math.round(t[1]*l),a=Math.round(t[2]*l);for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++)for(let r=-1;r<=1;r++)e.push(`${o+t},${n+s},${a+r}`);let h,u=r;for(const o of e){const e=c.get(o);if(e)for(const o of e)if(!i[o.segmentIndex]){const e=this.vector.sub({first:o.coords,second:t}),r=this.vector.lengthSq({vector:e});r<u&&this.point.twoPointsAlmostEqual({point1:o.coords,point2:t,tolerance:s})&&(h=o,u=r)}}if(h&&!i[h.segmentIndex])return h};for(let t=0;t<n;t++){if(i[t])continue;i[t]=!0;const e=o[t],r=[e[0],e[1]];let c=e[0],l=e[1],h=!1,d=0;for(;d++<n;){const t=u(l);if(!t)break;const e=o[t.segmentIndex],n=0===t.endpointIndex?e[1]:e[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:c,tolerance:s})){h=!0,i[t.segmentIndex]=!0;break}i[t.segmentIndex]=!0,r.push(n),l=n}if(d=0,!h)for(;d++<n;){const t=u(c);if(!t)break;const e=o[t.segmentIndex],n=0===t.endpointIndex?e[1]:e[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:l,tolerance:s})){h=!0,i[t.segmentIndex]=!0;break}i[t.segmentIndex]=!0,r.unshift(n),c=n}!h&&r.length>=2&&(h=this.point.twoPointsAlmostEqual({point1:c,point2:l,tolerance:s})),h&&r.length>2&&this.point.twoPointsAlmostEqual({point1:r[r.length-1],point2:r[0],tolerance:s})&&r.pop(),a.push({points:r,isClosed:h})}return a}maxFilletsHalfLine(t){return this.point.maxFilletsHalfLine({points:t.polyline.points,checkLastWithFirst:t.polyline.isClosed,tolerance:t.tolerance})}safestFilletRadius(t){const e=this.maxFilletsHalfLine(t);if(0===e.length)return 0;const s=Math.min(...e);return Math.max(0,s)}}class q{constructor(t,e){this.vector=t,this.polyline=e}signedDistanceToPlane(t){return this.vector.dot({first:t.plane.normal,second:t.point})-t.plane.d}calculateTrianglePlane(t){const e=Math.pow(t.tolerance||1e-7,2),s=this.vector.sub({first:t.triangle[1],second:t.triangle[0]}),o=this.vector.sub({first:t.triangle[2],second:t.triangle[0]}),r=this.vector.cross({first:s,second:o});if(this.vector.lengthSq({vector:r})<e)return;const n=this.vector.normalized({vector:r});return{normal:n,d:this.vector.dot({first:n,second:t.triangle[0]})}}triangleTriangleIntersection(t){const e=t.triangle1,s=t.triangle2,o=t.tolerance||1e-7,r=e[0],n=e[1],i=e[2],a=s[0],c=s[1],l=s[2],h=this.calculateTrianglePlane({triangle:e,tolerance:o}),u=this.calculateTrianglePlane({triangle:s,tolerance:o});if(!h||!u)return;const d=[this.signedDistanceToPlane({point:a,plane:h}),this.signedDistanceToPlane({point:c,plane:h}),this.signedDistanceToPlane({point:l,plane:h})];if(d[0]>o&&d[1]>o&&d[2]>o||d[0]<-o&&d[1]<-o&&d[2]<-o)return;const f=[this.signedDistanceToPlane({point:r,plane:u}),this.signedDistanceToPlane({point:n,plane:u}),this.signedDistanceToPlane({point:i,plane:u})];if(f[0]>o&&f[1]>o&&f[2]>o||f[0]<-o&&f[1]<-o&&f[2]<-o)return;const m=f.every((t=>Math.abs(t)<o)),p=d.every((t=>Math.abs(t)<o));if(m&&p)return;const v=this.vector.cross({first:h.normal,second:u.normal}),g=this.vector.dot({first:v,second:v});if(g<o*o)return;const y=[],b=[],x=[[r,n],[n,i],[i,r]],P=f;for(let t=0;t<3;++t){const e=x[t][0],s=x[t][1],r=P[t],n=P[(t+1)%3];if(Math.abs(r)<o&&y.push(e),r*n<0&&Math.abs(r-n)>o){const t=r/(r-n);y.push(this.computeIntersectionPoint(e,s,t))}}const C=[[a,c],[c,l],[l,a]],D=d;for(let t=0;t<3;++t){const e=C[t][0],s=C[t][1],r=D[t],n=D[(t+1)%3];if(Math.abs(r)<o&&b.push(e),r*n<0&&Math.abs(r-n)>o){const t=r/(r-n);b.push(this.computeIntersectionPoint(e,s,t))}}if(y.length<2||b.length<2)return;const S=h.normal,w=u.normal,T=h.d,M=u.d,O=this.vector.mul({vector:w,scalar:T}),E=this.vector.mul({vector:S,scalar:M}),A=this.vector.sub({first:O,second:E}),I=this.vector.cross({first:A,second:v}),$=this.vector.mul({vector:I,scalar:1/g}),F=y.map((t=>this.vector.dot({first:this.vector.sub({first:t,second:$}),second:v}))),L=b.map((t=>this.vector.dot({first:this.vector.sub({first:t,second:$}),second:v}))),R=[Math.min(...F),Math.max(...F)],N=[Math.min(...L),Math.max(...L)],k=Math.max(R[0],N[0]),H=Math.min(R[1],N[1]);if(k<H-o*g){const t=this.vector.add({first:$,second:this.vector.mul({vector:v,scalar:k/g})}),e=this.vector.add({first:$,second:this.vector.mul({vector:v,scalar:H/g})}),s=this.vector.sub({first:t,second:e});return this.vector.lengthSq({vector:s})>o*o?[t,e]:void 0}}meshMeshIntersectionSegments(t){const e=t.mesh1,s=t.mesh2,o=[];for(let r=0;r<e.length;++r)for(let n=0;n<s.length;++n){const i=e[r],a=s[n],c=this.triangleTriangleIntersection({triangle1:i,triangle2:a,tolerance:t.tolerance});c&&o.push(c)}return o}meshMeshIntersectionPolylines(t){const e=this.meshMeshIntersectionSegments(t);return this.polyline.sortSegmentsIntoPolylines({segments:e,tolerance:t.tolerance})}meshMeshIntersectionPoints(t){return this.meshMeshIntersectionPolylines(t).map((t=>t.isClosed?[...t.points,t.points[0]]:t.points))}computeIntersectionPoint(t,e,s){return this.vector.add({first:t,second:this.vector.mul({vector:this.vector.sub({first:e,second:t}),scalar:s})})}}class Y{constructor(){this.entityHandle=256,this.colorFormat="aci",this.acadVersion="AC1009"}generateDxf(t){this.colorFormat=t.colorFormat||"aci",this.acadVersion=t.acadVersion||"AC1009";const e=[];return e.push(...this.generateHeader()),e.push(...this.generateTables(t)),e.push(...this.generateBlocks()),e.push(...this.generateEntities(t)),e.push("0","EOF"),e.join("\n")}generateHeader(){const t=["0","SECTION","2","HEADER","9","$ACADVER","1",this.acadVersion];return"AC1009"===this.acadVersion?t.push("9","$DWGCODEPAGE","3","ascii","9","$HANDSEED","5","0"):t.push("9","$DWGCODEPAGE","3","ANSI_1252","9","$LASTSAVEDBY","1","bitbybit.dev","9","$HANDSEED","5","20000"),t.push("0","ENDSEC"),t}generateTables(t){const e=["0","SECTION","2","TABLES"];return"AC1009"===this.acadVersion&&e.push(...this.generateVportTable()),e.push(...this.generateLineTypeTable()),e.push(...this.generateLayerTable(t)),e.push(...this.generateStyleTable()),"AC1009"===this.acadVersion&&(e.push(...this.generateViewTable()),e.push(...this.generateUcsTable()),e.push(...this.generateAppidTable()),e.push(...this.generateDimstyleTable())),e.push("0","ENDSEC"),e}generateLineTypeTable(){const t=["0","TABLE","2","LTYPE","70","1"];return"AC1015"===this.acadVersion&&t.push("5","5","100","AcDbSymbolTable"),t.push("0","LTYPE","2","CONTINUOUS","70","AC1009"===this.acadVersion?"64":"0","3","Solid line","72","65","73","0","40","0.0"),"AC1015"===this.acadVersion&&t.splice(t.indexOf("LTYPE")+1,0,"5","14","100","AcDbSymbolTableRecord","100","AcDbLinetypeTableRecord"),t.push("0","ENDTAB"),t}generateStyleTable(){const t=["0","TABLE","2","STYLE","70","1"];return"AC1015"===this.acadVersion&&t.push("5","3","100","AcDbSymbolTable"),t.push("0","STYLE","2","STANDARD","70","0","40","0.0","41","1.0","50","0.0","71","0","42","0.2","3","txt","4",""),"AC1015"===this.acadVersion&&t.splice(t.indexOf("STYLE")+1,0,"5","11","100","AcDbSymbolTableRecord","100","AcDbTextStyleTableRecord"),t.push("0","ENDTAB"),t}generateVportTable(){return["0","TABLE","2","VPORT","70","2","0","VPORT","2","*ACTIVE","70","0","10","0.0","20","0.0","11","1.0","21","1.0","12","15.0","22","11.101231","13","0.0","23","0.0","14","0.1","24","0.1","15","0.5","25","0.5","16","0.0","26","0.0","36","1.0","17","0.0","27","0.0","37","0.0","40","22.202462","41","1.351201","42","50.0","43","0.0","44","0.0","50","0.0","51","0.0","71","0","72","100","73","1","74","1","75","1","76","0","77","0","78","0","0","ENDTAB"]}generateViewTable(){return["0","TABLE","2","VIEW","70","0","0","ENDTAB"]}generateUcsTable(){return["0","TABLE","2","UCS","70","0","0","ENDTAB"]}generateAppidTable(){return["0","TABLE","2","APPID","70","1","0","APPID","2","ACAD","70","64","0","ENDTAB"]}generateDimstyleTable(){return["0","TABLE","2","DIMSTYLE","70","0","0","ENDTAB"]}generateBlocks(){return["0","SECTION","2","BLOCKS","0","ENDSEC"]}generateLayerTable(t){const e=new Set;t.dxfPathsParts&&t.dxfPathsParts.forEach((t=>{t.layer&&e.add(t.layer)})),0===e.size&&e.add("0");const s=["0","TABLE","2","LAYER","70",e.size.toString()];return"AC1015"===this.acadVersion&&s.splice(4,0,"5","2","100","AcDbSymbolTable"),e.forEach((t=>{if(s.push("0","LAYER","2",t,"70","0","62","7","6","CONTINUOUS"),"AC1015"===this.acadVersion){const t=s.lastIndexOf("LAYER")+1;s.splice(t,0,"5",this.getNextHandle(),"100","AcDbSymbolTableRecord","100","AcDbLayerTableRecord")}})),s.push("0","ENDTAB"),s}generateEntities(t){const e=["0","SECTION","2","ENTITIES"];return t.dxfPathsParts&&t.dxfPathsParts.forEach((t=>{t.paths&&t.paths.forEach((s=>{s.segments&&s.segments.forEach((s=>{e.push(...this.generateSegmentEntity(s,t))}))}))})),e.push("0","ENDSEC"),e}generateSegmentEntity(t,e){return this.isLineSegment(t)?this.generateLineEntity(t,e):this.isArcSegment(t)?this.generateArcEntity(t,e):this.isCircleSegment(t)?this.generateCircleEntity(t,e):this.isPolylineSegment(t)?this.generatePolylineEntity(t,e):this.isSplineSegment(t)?this.generateSplineEntity(t,e):[]}isLineSegment(t){return void 0!==t.start&&void 0!==t.end&&void 0===t.radius}isArcSegment(t){return void 0!==t.center&&void 0!==t.radius&&void 0!==t.startAngle&&void 0!==t.endAngle}isCircleSegment(t){return void 0!==t.center&&void 0!==t.radius&&void 0===t.startAngle}isPolylineSegment(t){return void 0!==t.points&&Array.isArray(t.points)}isSplineSegment(t){return void 0!==t.controlPoints&&Array.isArray(t.controlPoints)}generateLineEntity(t,e){const s=["0","LINE","8",e.layer||"0"];if(void 0!==e.color&&this.convertColorToDxf(e.color).forEach((t=>s.push(t.code,t.value))),s.push("10",t.start[0].toFixed(6),"20",t.start[1].toFixed(6),"30","0.00","11",t.end[0].toFixed(6),"21",t.end[1].toFixed(6),"31","0.00"),"AC1015"===this.acadVersion){s.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const t=s.indexOf("10");s.splice(t,0,"100","AcDbLine")}return s}generateCircleEntity(t,e){const s=["0","CIRCLE","8",e.layer||"0"];if(void 0!==e.color&&this.convertColorToDxf(e.color).forEach((t=>s.push(t.code,t.value))),s.push("10",t.center[0].toFixed(6),"20",t.center[1].toFixed(6),"30","0.00","40",t.radius.toFixed(6)),"AC1015"===this.acadVersion){s.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const t=s.indexOf("10");s.splice(t,0,"100","AcDbCircle")}return s}generateArcEntity(t,e){const s=["0","ARC","8",e.layer||"0"];if("AC1009"===this.acadVersion&&s.push("6"," "),void 0!==e.color&&this.convertColorToDxf(e.color).forEach((t=>s.push(t.code,t.value))),s.push("10",t.center[0].toFixed(6),"20",t.center[1].toFixed(6),"30","AC1009"===this.acadVersion?"":"0.0","40",t.radius.toFixed(6),"50",t.startAngle.toFixed(6),"51",t.endAngle.toFixed(6)),"AC1015"===this.acadVersion){s.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const t=s.indexOf("10");s.splice(t,0,"100","AcDbCircle");const e=s.indexOf("50");s.splice(e,0,"100","AcDbArc")}return s}generatePolylineEntity(t,e){const s=["0","LWPOLYLINE","8",e.layer||"0"];void 0!==e.color&&this.convertColorToDxf(e.color).forEach((t=>s.push(t.code,t.value)));const o=t.closed||t.points.length>2&&this.isClosedPolyline(t.points);if(s.push("90",t.points.length.toString(),"70",o?"1":"0"),"AC1015"===this.acadVersion){s.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const t=s.indexOf("90");s.splice(t,0,"100","AcDbPolyline")}return t.points.forEach(((e,o)=>{if(s.push("10",e[0].toFixed(6),"20",e[1].toFixed(6)),t.bulges&&t.bulges.length>o){const e=t.bulges[o];0!==e&&s.push("42",e.toFixed(6))}})),s}generateSplineEntity(t,e){const s=["0","SPLINE","8",e.layer||"0"];void 0!==e.color&&this.convertColorToDxf(e.color).forEach((t=>s.push(t.code,t.value)));const o=t.degree||3,r=t.controlPoints.length,n=r+o+1,i=t.closed?9:8;if(s.push("210","0.0","220","0.0","230","1.0","70",i.toString(),"71",o.toString(),"72",n.toString(),"73",r.toString(),"74","0"),"AC1015"===this.acadVersion){s.splice(2,0,"5",this.getNextHandle(),"100","AcDbEntity");const t=s.indexOf("210");s.splice(t,0,"100","AcDbSpline")}for(let t=0;t<n;t++)s.push("40",t.toFixed(6));return t.controlPoints.forEach((t=>{s.push("10",t[0].toFixed(6),"20",t[1].toFixed(6),"30","0.0")})),s}isClosedPolyline(t){if(t.length<3)return!1;const e=t[0],s=t[t.length-1];return Math.abs(e[0]-s[0])<1e-10&&Math.abs(e[1]-s[1])<1e-10}getNextHandle(){return(++this.entityHandle).toString(16).toUpperCase()}convertColorToDxf(t){if(/^\d+$/.test(t)){const e=parseInt(t,10);if(e>=1&&e<=255)return[{code:"62",value:t}]}if(t.startsWith("#")){const e=t.substring(1);if(6===e.length){const t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return"truecolor"===this.colorFormat?[{code:"62",value:"256"},{code:"420",value:(65536*t+256*s+o).toString()}]:[{code:"62",value:this.rgbToAciColorIndex(t,s,o).toString()}]}}return[{code:"62",value:"7"}]}rgbToAciColorIndex(t,e,s){const o={1:[255,0,0],2:[255,255,0],3:[0,255,0],4:[0,255,255],5:[0,0,255],6:[255,0,255],7:[255,255,255],8:[128,128,128],9:[192,192,192]};if(t<30&&e<30&&s<30)return 7;let r=7,n=1/0;for(const[i,[a,c,l]]of Object.entries(o)){const o=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-c,2)+Math.pow(s-l,2));o<n&&(n=o,r=parseInt(i))}return r}}class X{constructor(){this.dxfGenerator=new Y}lineSegment(t){return t}arcSegment(t){return t}circleSegment(t){return t}polylineSegment(t){return t}splineSegment(t){return t}path(t){return t}pathsPart(t){return t}dxfCreate(t){return this.dxfGenerator.generateDxf(t)}}class U{constructor(){this.dxf=new X}}class G{}G.BITBYBIT_CDN_URL="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.21.0";class Z{constructor(){this.geometryHelper=new B,this.math=new N,this.vector=new V(this.math,this.geometryHelper),this.transforms=new j(this.vector,this.math),this.lists=new R,this.point=new k(this.geometryHelper,this.transforms,this.vector,this.lists),this.line=new W(this.vector,this.point,this.geometryHelper),this.polyline=new z(this.vector,this.point,this.line,this.geometryHelper),this.textService=new _(this.point),this.mesh=new q(this.vector,this.polyline),this.io=new U}}class Q{constructor(t){this.base=new Z,this.crossSection=new I(t,this.base),this.manifold=new w(t),this.mesh=new L(t)}toPolygonPoints(t){if(t.manifold.getMesh){const e=t.manifold.getMesh();if(!e||!e.vertProperties||!e.triVerts||0===e.vertProperties.length||0===e.triVerts.length)return console.warn("Manifold does not contain valid mesh data or is empty."),[];const s=e.vertProperties,o=e.triVerts,r=e.numProp;if(r<3)throw new Error(`Cannot convert to PolygonPoints: Expected numProp >= 3 (for x, y, z), but found ${r}.`);if(o.length%3!=0)throw new Error(`Mesh data corruption: triVerts length (${o.length}) is not a multiple of 3.`);const n=[],i=s.length/r;for(let t=0;t<o.length;t+=3){const e=o[t],a=o[t+1],c=o[t+2];if(e>=i||a>=i||c>=i){console.error(`Invalid vertex index found in triVerts at offset ${t}. Max index should be ${i-1}. Indices: ${e}, ${a}, ${c}`);continue}const l=e*r,h=a*r,u=c*r,d=[[s[l],s[l+1],s[l+2]],[s[h],s[h+1],s[h+2]],[s[u],s[u+1],s[u+2]]];n.push(d)}return n}}decomposeManifoldOrCrossSection(t){return t.manifoldOrCrossSection.getMesh?t.manifoldOrCrossSection.getMesh(t.normalIdx):t.manifoldOrCrossSection.toPolygons()}decomposeManifoldsOrCrossSections(t){return t.manifoldsOrCrossSections.map(((e,s)=>{const o=t.normalIdx?t.normalIdx[s]:void 0;return this.decomposeManifoldOrCrossSection({manifoldOrCrossSection:e,normalIdx:o})}))}}let J,K,tt;var et,st=(et="file:///Users/matasubarevicius/Documents/MyProjects/bitbybit-ui/projects/bitbybit-runners/browser-babylon/node_modules/manifold-3d/manifold.js",async function(t={}){var e,s,o=t,n=new Promise(((t,o)=>{e=t,s=o})),i="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(c){const{createRequire:t}=await Promise.resolve().then(r.t.bind(r,677,19));var l=t("file:///Users/matasubarevicius/Documents/MyProjects/bitbybit-ui/projects/bitbybit-runners/browser-babylon/node_modules/manifold-3d/manifold.js")}var h=!1;o.setup=function(){if(h)return;function t(t,e,s=(t=>t)){if(e)for(let o of e)t.push_back(s(o));return t}function e(t,e=(t=>t)){const s=[],o=t.size();for(let r=0;r<o;r++)s.push(e(t.get(r)));return s}function s(e){return e[0].length<3&&(e=[e]),t(new o.Vector2_vec2,e,(e=>t(new o.Vector_vec2,e,(t=>t instanceof Array?{x:t[0],y:t[1]}:t))))}function r(t){for(let e=0;e<t.size();e++)t.get(e).delete();t.delete()}function n(t){return t[0]instanceof Array?{x:t[0][0],y:t[0][1]}:"number"==typeof t[0]?{x:t[0]||0,y:t[1]||0}:t[0]}function i(t){return t[0]instanceof Array?{x:t[0][0],y:t[0][1],z:t[0][2]}:"number"==typeof t[0]?{x:t[0]||0,y:t[1]||0,z:t[2]||0}:t[0]}function a(t){return"EvenOdd"==t?0:"NonZero"==t?1:"Negative"==t?3:2}h=!0,o.initTBB();const c=o.CrossSection;function l(t,e="Positive"){if(t instanceof c)return t;{const o=s(t),n=new c(o,a(e));return r(o),n}}o.CrossSection.prototype.translate=function(...t){return this._Translate(n(t))},o.CrossSection.prototype.scale=function(t){return"number"==typeof t?this._Scale({x:t,y:t}):this._Scale(n([t]))},o.CrossSection.prototype.mirror=function(t){return this._Mirror(n([t]))},o.CrossSection.prototype.warp=function(t){const e=ye((function(e){const s=[W(e,"double"),W(e+8,"double")];t(s),z(e,s[0],"double"),z(e+8,s[1],"double")}),"vi"),s=this._Warp(e);return be(e),s},o.CrossSection.prototype.decompose=function(){const t=this._Decompose(),s=e(t);return t.delete(),s},o.CrossSection.prototype.bounds=function(){const t=this._Bounds();return{min:["x","y"].map((e=>t.min[e])),max:["x","y"].map((e=>t.max[e]))}},o.CrossSection.prototype.offset=function(t,e="Round",s=2,o=0){return this._Offset(t,function(t){return"Round"==t?1:"Miter"==t?2:0}(e),s,o)},o.CrossSection.prototype.simplify=function(t=1e-6){return this._Simplify(t)},o.CrossSection.prototype.extrude=function(t,e=0,s=0,r=[1,1],i=!1){r=n([r]);const a=o._Extrude(this._ToPolygons(),t,e,s,r);return i?a.translate([0,0,-t/2]):a},o.CrossSection.prototype.revolve=function(t=0,e=360){return o._Revolve(this._ToPolygons(),t,e)},o.CrossSection.prototype.add=function(t){return this._add(l(t))},o.CrossSection.prototype.subtract=function(t){return this._subtract(l(t))},o.CrossSection.prototype.intersect=function(t){return this._intersect(l(t))},o.CrossSection.prototype.toPolygons=function(){const t=this._ToPolygons(),e=function(t,e=(t=>t)){const s=[],o=t.size();for(let r=0;r<o;r++){const o=t.get(r),n=o.size(),i=[];for(let t=0;t<n;t++)i.push(e(o.get(t)));s.push(i)}return s}(t,(t=>[t.x,t.y]));return t.delete(),e},o.Manifold.prototype.smoothOut=function(t=60,e=0){return this._SmoothOut(t,e)},o.Manifold.prototype.warp=function(t){const e=ye((function(e){const s=[W(e,"double"),W(e+8,"double"),W(e+16,"double")];t(s),z(e,s[0],"double"),z(e+8,s[1],"double"),z(e+16,s[2],"double")}),"vi"),s=this._Warp(e);be(e);const r=s.status();if("NoError"!==r)throw new o.ManifoldError(r);return s},o.Manifold.prototype.calculateNormals=function(t,e=60){return this._CalculateNormals(t,e)},o.Manifold.prototype.setProperties=function(t,e){const s=this.numProp(),o=ye((function(o,r,n){const i=[];for(let e=0;e<t;++e)i[e]=W(o+8*e,"double");const a=[];for(let t=0;t<3;++t)a[t]=W(r+8*t,"double");const c=[];for(let t=0;t<s;++t)c[t]=W(n+8*t,"double");e(i,a,c);for(let e=0;e<t;++e)z(o+8*e,i[e],"double")}),"viii"),r=this._SetProperties(t,o);return be(o),r},o.Manifold.prototype.translate=function(...t){return this._Translate(i(t))},o.Manifold.prototype.rotate=function(t,e,s){return Array.isArray(t)?this._Rotate(...t):this._Rotate(t,e||0,s||0)},o.Manifold.prototype.scale=function(t){return"number"==typeof t?this._Scale({x:t,y:t,z:t}):this._Scale(i([t]))},o.Manifold.prototype.mirror=function(t){return this._Mirror(i([t]))},o.Manifold.prototype.trimByPlane=function(t,e=0){return this._TrimByPlane(i([t]),e)},o.Manifold.prototype.slice=function(t=0){const e=this._Slice(t),s=new c(e,a("Positive"));return r(e),s},o.Manifold.prototype.project=function(){const t=this._Project(),e=new c(t,a("Positive"));return r(t),e},o.Manifold.prototype.split=function(t){const s=this._Split(t),o=e(s);return s.delete(),o},o.Manifold.prototype.splitByPlane=function(t,s=0){const o=this._SplitByPlane(i([t]),s),r=e(o);return o.delete(),r},o.Manifold.prototype.decompose=function(){const t=this._Decompose(),s=e(t);return t.delete(),s},o.Manifold.prototype.boundingBox=function(){const t=this._boundingBox();return{min:["x","y","z"].map((e=>t.min[e])),max:["x","y","z"].map((e=>t.max[e]))}};class u{constructor({numProp:t=3,triVerts:e=new Uint32Array,vertProperties:s=new Float32Array,mergeFromVert:o,mergeToVert:r,runIndex:n,runOriginalID:i,faceID:a,halfedgeTangent:c,runTransform:l}={}){this.numProp=t,this.triVerts=e,this.vertProperties=s,this.mergeFromVert=o,this.mergeToVert=r,this.runIndex=n,this.runOriginalID=i,this.faceID=a,this.halfedgeTangent=c,this.runTransform=l}get numTri(){return this.triVerts.length/3}get numVert(){return this.vertProperties.length/this.numProp}get numRun(){return this.runOriginalID.length}merge(){const{changed:t,mesh:e}=o._Merge(this);return Object.assign(this,{...e}),t}verts(t){return this.triVerts.subarray(3*t,3*(t+1))}position(t){return this.vertProperties.subarray(this.numProp*t,this.numProp*t+3)}extras(t){return this.vertProperties.subarray(this.numProp*t+3,this.numProp*(t+1))}tangent(t){return this.halfedgeTangent.subarray(4*t,4*(t+1))}transform(t){const e=new Array(16);for(const s of[0,1,2,3])for(const o of[0,1,2])e[4*s+o]=this.runTransform[12*t+3*s+o];return e[15]=1,e}}function d(t){return function(...e){1==e.length&&(e=e[0]);const s=new o.Vector_crossSection;for(const t of e)s.push_back(l(t));const r=o["_crossSection"+t](s);return s.delete(),r}}o.Mesh=u,o.Manifold.prototype.getMesh=function(t=-1){return new u(this._GetMeshJS(t))},o.ManifoldError=function(t,...e){let s="Unknown error";switch(t){case"NonFiniteVertex":s="Non-finite vertex";break;case"NotManifold":s="Not manifold";break;case"VertexOutOfBounds":s="Vertex index out of bounds";break;case"PropertiesWrongLength":s="Properties have wrong length";break;case"MissingPositionProperties":s="Less than three properties";break;case"MergeVectorsDifferentLengths":s="Merge vectors have different lengths";break;case"MergeIndexOutOfBounds":s="Merge index out of bounds";break;case"TransformWrongLength":s="Transform vector has wrong length";break;case"RunIndexWrongLength":s="Run index vector has wrong length";break;case"FaceIDWrongLength":s="Face ID vector has wrong length";case"InvalidConstruction":s="Manifold constructed with invalid parameters"}const o=Error.apply(this,[s,...e]);o.name=this.name="ManifoldError",this.message=o.message,this.stack=o.stack,this.code=t},o.ManifoldError.prototype=Object.create(Error.prototype,{constructor:{value:o.ManifoldError,writable:!0,configurable:!0}}),o.CrossSection=function(t,e="Positive"){const o=s(t),n=new c(o,a(e));return r(o),n},o.CrossSection.ofPolygons=function(t,e="Positive"){return new o.CrossSection(t,e)},o.CrossSection.square=function(...t){let e;e=0==t.length?{x:1,y:1}:"number"==typeof t[0]?{x:t[0],y:t[0]}:n(t);const s=t[1]||!1;return o._Square(e,s)},o.CrossSection.circle=function(t,e=0){return o._Circle(t,e)},o.CrossSection.compose=d("Compose"),o.CrossSection.union=d("UnionN"),o.CrossSection.difference=d("DifferenceN"),o.CrossSection.intersection=d("IntersectionN"),o.CrossSection.hull=function(...e){1==e.length&&(e=e[0]);let s=new o.Vector_vec2;for(const r of e)if(r instanceof c)o._crossSectionCollectVertices(s,r);else if(r instanceof Array&&2==r.length&&"number"==typeof r[0])s.push_back({x:r[0],y:r[1]});else if(r.x)s.push_back(r);else{const e=2==r[0].length&&"number"==typeof r[0][0]||r[0].x?[r]:r;for(const o of e)t(s,o,(t=>t instanceof Array?{x:t[0],y:t[1]}:t))}const r=o._crossSectionHullPoints(s);return s.delete(),r},o.CrossSection.prototype=Object.create(c.prototype),Object.defineProperty(o.CrossSection,Symbol.hasInstance,{get:()=>t=>t instanceof c});const f=o.Manifold;function m(t){return function(...e){1==e.length&&(e=e[0]);const s=new o.Vector_manifold;for(const t of e)s.push_back(t);const r=o["_manifold"+t+"N"](s);return s.delete(),r}}o.Manifold=function(t){const e=new f(t),s=e.status();if("NoError"!==s)throw new o.ManifoldError(s);return e},o.Manifold.ofMesh=function(t){return new o.Manifold(t)},o.Manifold.tetrahedron=function(){return o._Tetrahedron()},o.Manifold.cube=function(...t){let e;e=0==t.length?{x:1,y:1,z:1}:"number"==typeof t[0]?{x:t[0],y:t[0],z:t[0]}:i(t);const s=t[1]||!1;return o._Cube(e,s)},o.Manifold.cylinder=function(t,e,s=-1,r=0,n=!1){return o._Cylinder(t,e,s,r,n)},o.Manifold.sphere=function(t,e=0){return o._Sphere(t,e)},o.Manifold.smooth=function(e,s=[]){const r=new o.Vector_smoothness;t(r,s);const n=o._Smooth(e,r);return r.delete(),n},o.Manifold.extrude=function(t,e,s=0,r=0,n=[1,1],i=!1){return(t instanceof c?t:o.CrossSection(t,"Positive")).extrude(e,s,r,n,i)},o.Manifold.revolve=function(t,e=0,s=360){return(t instanceof c?t:o.CrossSection(t,"Positive")).revolve(e,s)},o.Manifold.reserveIDs=function(t){return o._ReserveIDs(t)},o.Manifold.compose=function(e){const s=new o.Vector_manifold;t(s,e);const r=o._manifoldCompose(s);return s.delete(),r},o.Manifold.union=m("Union"),o.Manifold.difference=m("Difference"),o.Manifold.intersection=m("Intersection"),o.Manifold.levelSet=function(t,e,s,r=0,n=-1){const i={min:{x:e.min[0],y:e.min[1],z:e.min[2]},max:{x:e.max[0],y:e.max[1],z:e.max[2]}},a=ye((function(e){const s=W(e,"double"),o=W(e+8,"double"),r=W(e+16,"double");return t([s,o,r])}),"di"),c=o._LevelSet(a,i,s,r,n);return be(a),c},o.Manifold.hull=function(...e){1==e.length&&(e=e[0]);let s=new o.Vector_vec3;for(const r of e)r instanceof f?o._manifoldCollectVertices(s,r):r instanceof Array&&3==r.length&&"number"==typeof r[0]?s.push_back({x:r[0],y:r[1],z:r[2]}):r.x?s.push_back(r):t(s,r,(t=>t instanceof Array?{x:t[0],y:t[1],z:t[2]}:t));const r=o._manifoldHullPoints(s);return s.delete(),r},o.Manifold.prototype=Object.create(f.prototype),Object.defineProperty(o.Manifold,Symbol.hasInstance,{get:()=>t=>t instanceof f}),o.triangulate=function(t,n=-1,i=!0){const a=s(t),c=e(o._Triangulate(a,n,i),(t=>[t[0],t[1],t[2]]));return r(a),c}};var u,d,f=Object.assign({},o),m="";if(c){var p=l("fs"),v=l("path");m=l("url").fileURLToPath(new URL(r(764),r.b)),d=t=>(t=_(t)?new URL(t):v.normalize(t),p.readFileSync(t)),u=(t,e=!0)=>(t=_(t)?new URL(t):v.normalize(t),new Promise(((s,o)=>{p.readFile(t,e?void 0:"utf8",((t,r)=>{t?o(t):s(e?r.buffer:r)}))}))),!o.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(i||a)&&(a?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),et&&(m=et),m=m.startsWith("blob:")?"":m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1),a&&(d=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=t=>_(t)?new Promise(((e,s)=>{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=()=>{(200==o.status||0==o.status&&o.response)&&s(o.response),e(o.status)},o.onerror=e,o.send(null)})):fetch(t,{credentials:"same-origin"}).then((t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url)))));o.print||console.log.bind(console);var g,y,b=o.printErr||console.error.bind(console);Object.assign(o,f),f=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram,o.quit&&o.quit,o.wasmBinary&&(g=o.wasmBinary);var x,P,C,D,S,w,T,M,O=!1;function E(){var t=y.buffer;o.HEAP8=x=new Int8Array(t),o.HEAP16=C=new Int16Array(t),o.HEAPU8=P=new Uint8Array(t),o.HEAPU16=D=new Uint16Array(t),o.HEAP32=S=new Int32Array(t),o.HEAPU32=w=new Uint32Array(t),o.HEAPF32=T=new Float32Array(t),o.HEAPF64=M=new Float64Array(t)}var A=[],I=[],$=[],F=0,L=null,R=null;function N(t){o.onAbort?.(t),b(t="Aborted("+t+")"),O=!0,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw s(e),e}var k,H=t=>t.startsWith("data:application/octet-stream;base64,"),_=t=>t.startsWith("file://");function V(t){if(t==k&&g)return new Uint8Array(g);if(d)return d(t);throw"both async and sync fetching of the wasm failed"}function j(t,e,s){return function(t){return g?Promise.resolve().then((()=>V(t))):u(t).then((t=>new Uint8Array(t)),(()=>V(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then(s,(t=>{b(`failed to asynchronously prepare wasm: ${t}`),N(t)}))}var B=t=>{for(;t.length>0;)t.shift()(o)};function W(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return x[t>>>0];case"i16":return C[t>>>1>>>0];case"i32":return S[t>>>2>>>0];case"i64":N("to do getValue(i64) use WASM_BIGINT");case"float":return T[t>>>2>>>0];case"double":return M[t>>>3>>>0];case"*":return w[t>>>2>>>0];default:N(`invalid type for getValue: ${e}`)}}function z(t,e,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":case"i8":x[t>>>0]=e;break;case"i16":C[t>>>1>>>0]=e;break;case"i32":S[t>>>2>>>0]=e;break;case"i64":N("to do setValue(i64) use WASM_BIGINT");case"float":T[t>>>2>>>0]=e;break;case"double":M[t>>>3>>>0]=e;break;case"*":w[t>>>2>>>0]=e;break;default:N(`invalid type for setValue: ${s}`)}}o.noExitRuntime;class q{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){w[this.ptr+4>>>2>>>0]=t}get_type(){return w[this.ptr+4>>>2>>>0]}set_destructor(t){w[this.ptr+8>>>2>>>0]=t}get_destructor(){return w[this.ptr+8>>>2>>>0]}set_caught(t){t=t?1:0,x[this.ptr+12>>>0]=t}get_caught(){return 0!=x[this.ptr+12>>>0]}set_rethrown(t){t=t?1:0,x[this.ptr+13>>>0]=t}get_rethrown(){return 0!=x[this.ptr+13>>>0]}init(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)}set_adjusted_ptr(t){w[this.ptr+16>>>2>>>0]=t}get_adjusted_ptr(){return w[this.ptr+16>>>2>>>0]}get_exception_ptr(){if(Te(this.get_type()))return w[this.excPtr>>>2>>>0];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var Y={},X=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function U(t){return this.fromWireType(w[t>>>2>>>0])}var G,Z,Q,J={},K={},tt={},st=t=>{throw new G(t)},ot=(t,e,s)=>{function o(e){var o=s(e);o.length!==t.length&&st("Mismatched type converter count");for(var r=0;r<t.length;++r)it(t[r],o[r])}t.forEach((function(t){tt[t]=e}));var r=new Array(e.length),n=[],i=0;e.forEach(((t,e)=>{K.hasOwnProperty(t)?r[e]=K[t]:(n.push(t),J.hasOwnProperty(t)||(J[t]=[]),J[t].push((()=>{r[e]=K[t],++i===n.length&&o(r)})))})),0===n.length&&o(r)},rt=t=>{for(var e="",s=t;P[s>>>0];)e+=Z[P[s++>>>0]];return e},nt=t=>{throw new Q(t)};function it(t,e,s={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(t,e,s={}){var o=e.name;if(t||nt(`type "${o}" must have a positive integer typeid pointer`),K.hasOwnProperty(t)){if(s.ignoreDuplicateRegistrations)return;nt(`Cannot register type '${o}' twice`)}if(K[t]=e,delete tt[t],J.hasOwnProperty(t)){var r=J[t];delete J[t],r.forEach((t=>t()))}}(t,e,s)}var at,ct=t=>{nt(t.$$.ptrType.registeredClass.name+" instance already deleted")},lt=!1,ht=t=>{},ut=t=>{t.count.value-=1,0===t.count.value&&(t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)})(t)},dt=(t,e,s)=>{if(e===s)return t;if(void 0===s.baseClass)return null;var o=dt(t,e,s.baseClass);return null===o?null:s.downcast(o)},ft={},mt=[],pt=()=>{for(;mt.length;){var t=mt.pop();t.$$.deleteScheduled=!1,t.delete()}},vt={},gt=(t,e)=>(e.ptrType&&e.ptr||st("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&st("Both smartPtrType and smartPtr must be specified"),e.count={value:1},yt(Object.create(t,{$$:{value:e,writable:!0}})));var yt=t=>"undefined"==typeof FinalizationRegistry?(yt=t=>t,t):(lt=new FinalizationRegistry((t=>{ut(t.$$)})),yt=t=>{var e=t.$$;if(e.smartPtr){var s={$$:e};lt.register(t,s,t)}return t},ht=t=>lt.unregister(t),yt(t));function bt(){}var xt=(t,e)=>Object.defineProperty(e,"name",{value:t}),Pt=(t,e,s)=>{if(void 0===t[e].overloadTable){var o=t[e];t[e]=function(...o){return t[e].overloadTable.hasOwnProperty(o.length)||nt(`Function '${s}' called with an invalid number of arguments (${o.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[o.length].apply(this,o)},t[e].overloadTable=[],t[e].overloadTable[o.argCount]=o}},Ct=(t,e,s)=>{o.hasOwnProperty(t)?((void 0===s||void 0!==o[t].overloadTable&&void 0!==o[t].overloadTable[s])&&nt(`Cannot register public name '${t}' twice`),Pt(o,t,t),o.hasOwnProperty(s)&&nt(`Cannot register multiple overloads of a function with the same number of arguments (${s})!`),o[t].overloadTable[s]=e):(o[t]=e,void 0!==s&&(o[t].numArguments=s))};function Dt(t,e,s,o,r,n,i,a){this.name=t,this.constructor=e,this.instancePrototype=s,this.rawDestructor=o,this.baseClass=r,this.getActualType=n,this.upcast=i,this.downcast=a,this.pureVirtualFunctions=[]}var St=(t,e,s)=>{for(;e!==s;)e.upcast||nt(`Expected null or instance of ${s.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t};function wt(t,e){if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),0;e.$$||nt(`Cannot pass "${Zt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`);var s=e.$$.ptrType.registeredClass;return St(e.$$.ptr,s,this.registeredClass)}function Tt(t,e){var s;if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),this.isSmartPointer?(s=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,s),s):0;e&&e.$$||nt(`Cannot pass "${Zt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&nt(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var o=e.$$.ptrType.registeredClass;if(s=St(e.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&nt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?s=e.$$.smartPtr:nt(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:s=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)s=e.$$.smartPtr;else{var r=e.clone();s=this.rawShare(s,qt.toHandle((()=>r.delete()))),null!==t&&t.push(this.rawDestructor,s)}break;default:nt("Unsupporting sharing policy")}return s}function Mt(t,e){if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),0;e.$$||nt(`Cannot pass "${Zt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&nt(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var s=e.$$.ptrType.registeredClass;return St(e.$$.ptr,s,this.registeredClass)}function Ot(t,e,s,o,r,n,i,a,c,l,h){this.name=t,this.registeredClass=e,this.isReference=s,this.isConst=o,this.isSmartPointer=r,this.pointeeType=n,this.sharingPolicy=i,this.rawGetPointee=a,this.rawConstructor=c,this.rawShare=l,this.rawDestructor=h,r||void 0!==e.baseClass?this.toWireType=Tt:o?(this.toWireType=wt,this.destructorFunction=null):(this.toWireType=Mt,this.destructorFunction=null)}var Et,At,It=(t,e,s)=>{o.hasOwnProperty(t)||st("Replacing nonexistent public symbol"),void 0!==o[t].overloadTable&&void 0!==s?o[t].overloadTable[s]=e:(o[t]=e,o[t].argCount=s)},$t=t=>Et.get(t),Ft=(t,e)=>(...s)=>((t,e,s=[])=>{if(t.includes("j"))return((t,e,s)=>(t=t.replace(/p/g,"i"),(0,o["dynCall_"+t])(e,...s)))(t,e,s);var r=$t(e)(...s);return"p"==t[0]?r>>>0:r})(t,e,s),Lt=(t,e)=>{var s=(t=rt(t)).includes("j")||t.includes("p")?Ft(t,e):$t(e);return"function"!=typeof s&&nt(`unknown function pointer with signature ${t}: ${e}`),s},Rt=t=>{var e=De(t),s=rt(e);return we(e),s},Nt=(t,e)=>{var s=[],o={};throw e.forEach((function t(e){o[e]||K[e]||(tt[e]?tt[e].forEach(t):(s.push(e),o[e]=!0))})),new At(`${t}: `+s.map(Rt).join([", "]))},kt=(t,e)=>{for(var s=[],o=0;o<t;o++)s.push(w[e+4*o>>>2>>>0]);return s};function Ht(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}function _t(t,e){if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var s=xt(t.name||"unknownFunctionName",(function(){}));s.prototype=t.prototype;var o=new s,r=t.apply(o,e);return r instanceof Object?r:o}function Vt(t,e,s,o,r,n){var i=e.length;i<2&&nt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==e[1]&&null!==s,c=Ht(e),l="void"!==e[0].name,h=[t,nt,o,r,X,e[0],e[1]],u=0;u<i-2;++u)h.push(e[u+2]);if(!c)for(u=a?1:2;u<e.length;++u)null!==e[u].destructorFunction&&h.push(e[u].destructorFunction);let[d,f]=function(t,e,s,o){for(var r=Ht(t),n=t.length,i="",a="",c=0;c<n-2;++c)i+=(0!==c?", ":"")+"arg"+c,a+=(0!==c?", ":"")+"arg"+c+"Wired";var l=`\n        return function (${i}) {\n        if (arguments.length !== ${n-2}) {\n          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${n-2}');\n        }`;r&&(l+="var destructors = [];\n");var h=r?"destructors":"null",u=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];for(e&&(l+="var thisWired = classParam['toWireType']("+h+", this);\n"),c=0;c<n-2;++c)l+="var arg"+c+"Wired = argType"+c+"['toWireType']("+h+", arg"+c+");\n",u.push("argType"+c);if(e&&(a="thisWired"+(a.length>0?", ":"")+a),l+=(s||o?"var rv = ":"")+"invoker(fn"+(a.length>0?", ":"")+a+");\n",r)l+="runDestructors(destructors);\n";else for(c=e?1:2;c<t.length;++c){var d=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(l+=`${d}_dtor(${d});\n`,u.push(`${d}_dtor`))}return s&&(l+="var ret = retType['fromWireType'](rv);\nreturn ret;\n"),[u,l+="}\n"]}(e,a,l,n);d.push(f);var m=_t(Function,d)(...h);return xt(t,m)}var jt=t=>{const e=(t=t.trim()).indexOf("(");return-1!==e?t.substr(0,e):t},Bt=[],Wt=[];function zt(t){(t>>>=0)>9&&0==--Wt[t+1]&&(Wt[t]=void 0,Bt.push(t))}var qt={toValue:t=>(t||nt("Cannot use deleted val. handle = "+t),Wt[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=Bt.pop()||Wt.length;return Wt[e]=t,Wt[e+1]=1,e}}}},Yt={name:"emscripten::val",fromWireType:t=>{var e=qt.toValue(t);return zt(t),e},toWireType:(t,e)=>qt.toHandle(e),argPackAdvance:8,readValueFromPointer:U,destructorFunction:null};function Xt(t){return it(t>>>=0,Yt)}var Ut=(t,e,s)=>{switch(e){case 1:return s?function(t){return this.fromWireType(x[t>>>0])}:function(t){return this.fromWireType(P[t>>>0])};case 2:return s?function(t){return this.fromWireType(C[t>>>1>>>0])}:function(t){return this.fromWireType(D[t>>>1>>>0])};case 4:return s?function(t){return this.fromWireType(S[t>>>2>>>0])}:function(t){return this.fromWireType(w[t>>>2>>>0])};default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Gt=(t,e)=>{var s=K[t];return void 0===s&&nt(`${e} has unknown type ${Rt(t)}`),s},Zt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},Qt=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(T[t>>>2>>>0])};case 8:return function(t){return this.fromWireType(M[t>>>3>>>0])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},Jt=(t,e,s)=>{switch(e){case 1:return s?t=>x[t>>>0]:t=>P[t>>>0];case 2:return s?t=>C[t>>>1>>>0]:t=>D[t>>>1>>>0];case 4:return s?t=>S[t>>>2>>>0]:t=>w[t>>>2>>>0];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Kt="undefined"!=typeof TextDecoder?new TextDecoder:void 0,te="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,ee=(t,e)=>{for(var s=t,o=s>>1,r=o+e/2;!(o>=r)&&D[o>>>0];)++o;if((s=o<<1)-t>32&&te)return te.decode(P.subarray(t>>>0,s>>>0));for(var n="",i=0;!(i>=e/2);++i){var a=C[t+2*i>>>1>>>0];if(0==a)break;n+=String.fromCharCode(a)}return n},se=(t,e,s)=>{if(s??=2147483647,s<2)return 0;for(var o=e,r=(s-=2)<2*t.length?s/2:t.length,n=0;n<r;++n){var i=t.charCodeAt(n);C[e>>>1>>>0]=i,e+=2}return C[e>>>1>>>0]=0,e-o},oe=t=>2*t.length,re=(t,e)=>{for(var s=0,o="";!(s>=e/4);){var r=S[t+4*s>>>2>>>0];if(0==r)break;if(++s,r>=65536){var n=r-65536;o+=String.fromCharCode(55296|n>>10,56320|1023&n)}else o+=String.fromCharCode(r)}return o},ne=(t,e,s)=>{if(e>>>=0,s??=2147483647,s<4)return 0;for(var o=e,r=o+s-4,n=0;n<t.length;++n){var i=t.charCodeAt(n);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),S[e>>>2>>>0]=i,(e+=4)+4>r)break}return S[e>>>2>>>0]=0,e-o},ie=t=>{for(var e=0,s=0;s<t.length;++s){var o=t.charCodeAt(s);o>=55296&&o<=57343&&++s,e+=4}return e},ae=(t,e,s)=>{var o=[],r=t.toWireType(o,s);return o.length&&(w[e>>>2>>>0]=qt.toHandle(o)),r},ce={},le=t=>{var e=ce[t];return void 0===e?rt(t):e},he=[];Reflect.construct;var ue,de,fe,me=t=>{var e=(t-y.buffer.byteLength+65535)/65536;try{return y.grow(e),E(),1}catch(t){}},pe=(t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},ve=[],ge=(t,e)=>Et.set(t,e),ye=(t,e)=>{var s=(t=>(ue||(ue=new WeakMap,((t,e)=>{if(ue)for(var s=0;s<0+e;s++){var o=$t(s);o&&ue.set(o,s)}})(0,Et.length)),ue.get(t)||0))(t);if(s)return s;var o=(()=>{if(ve.length)return ve.pop();try{Et.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return Et.length-1})();try{ge(o,t)}catch(s){if(!(s instanceof TypeError))throw s;var r=((t,e)=>{if("function"==typeof WebAssembly.Function)return new WebAssembly.Function((t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},s={parameters:[],results:"v"==t[0]?[]:[e[t[0]]]},o=1;o<t.length;++o)s.parameters.push(e[t[o]]);return s})(e),t);var s=[1];((t,e)=>{var s=t.slice(0,1),o=t.slice(1),r={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),pe(o.length,e);for(var n=0;n<o.length;++n)e.push(r[o[n]]);"v"==s?e.push(0):e.push(1,r[s])})(e,s);var o=[0,97,115,109,1,0,0,0,1];pe(s.length,o),o.push(...s),o.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var r=new WebAssembly.Module(new Uint8Array(o));return new WebAssembly.Instance(r,{e:{f:t}}).exports.f})(t,e);ge(o,r)}return ue.set(t,o),o},be=t=>{ue.delete($t(t)),ge(t,null),ve.push(t)};G=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},(()=>{for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Z=t})(),Q=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Object.assign(bt.prototype,{isAliasOf(t){if(!(this instanceof bt))return!1;if(!(t instanceof bt))return!1;var e=this.$$.ptrType.registeredClass,s=this.$$.ptr;t.$$=t.$$;for(var o=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)s=e.upcast(s),e=e.baseClass;for(;o.baseClass;)r=o.upcast(r),o=o.baseClass;return e===o&&s===r},clone(){if(this.$$.ptr||ct(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=yt(Object.create(Object.getPrototypeOf(this),{$$:{value:(t=this.$$,{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType})}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nt("Object already scheduled for deletion"),ht(this),ut(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nt("Object already scheduled for deletion"),mt.push(this),1===mt.length&&at&&at(pt),this.$$.deleteScheduled=!0,this}}),o.getInheritedInstanceCount=()=>Object.keys(vt).length,o.getLiveInheritedInstances=()=>{var t=[];for(var e in vt)vt.hasOwnProperty(e)&&t.push(vt[e]);return t},o.flushPendingDeletes=pt,o.setDelayFunction=t=>{at=t,mt.length&&at&&at(pt)},Object.assign(Ot.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){this.rawDestructor?.(t)},argPackAdvance:8,readValueFromPointer:U,fromWireType:function(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var s=((t,e)=>(e=((t,e)=>{for(void 0===e&&nt("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e})(t,e),vt[e]))(this.registeredClass,e);if(void 0!==s){if(0===s.$$.count.value)return s.$$.ptr=e,s.$$.smartPtr=t,s.clone();var o=s.clone();return this.destructor(t),o}function r(){return this.isSmartPointer?gt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):gt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var n,i=this.registeredClass.getActualType(e),a=ft[i];if(!a)return r.call(this);n=this.isConst?a.constPointerType:a.pointerType;var c=dt(e,this.registeredClass,n.registeredClass);return null===c?r.call(this):this.isSmartPointer?gt(n.registeredClass.instancePrototype,{ptrType:n,ptr:c,smartPtrType:this,smartPtr:t}):gt(n.registeredClass.instancePrototype,{ptrType:n,ptr:c})}}),At=o.UnboundTypeError=(de=Error,(fe=xt("UnboundTypeError",(function(t){this.name="UnboundTypeError",this.message=t;var e=new Error(t).stack;void 0!==e&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(de.prototype),fe.prototype.constructor=fe,fe.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},fe),Wt.push(0,1,void 0,1,null,1,!0,1,!1,1),o.count_emval_handles=()=>Wt.length/2-5-Bt.length;var xe,Pe={i:function(t,e,s){throw e>>>=0,s>>>=0,new q(t>>>=0).init(e,s),t},D:()=>{N("")},n:function(t){var e=Y[t>>>=0];delete Y[t];var s=e.rawConstructor,o=e.rawDestructor,r=e.fields,n=r.map((t=>t.getterReturnType)).concat(r.map((t=>t.setterArgumentType)));ot([t],n,(t=>{var n={};return r.forEach(((e,s)=>{var o=e.fieldName,i=t[s],a=e.getter,c=e.getterContext,l=t[s+r.length],h=e.setter,u=e.setterContext;n[o]={read:t=>i.fromWireType(a(c,t)),write:(t,e)=>{var s=[];h(u,t,l.toWireType(s,e)),X(s)}}})),[{name:e.name,fromWireType:t=>{var e={};for(var s in n)e[s]=n[s].read(t);return o(t),e},toWireType:(t,e)=>{for(var r in n)if(!(r in e))throw new TypeError(`Missing field: "${r}"`);var i=s();for(r in n)n[r].write(i,e[r]);return null!==t&&t.push(o,i),i},argPackAdvance:8,readValueFromPointer:U,destructorFunction:o}]}))},C:function(t,e,s,o,r){},H:function(t,e,s,o){it(t>>>=0,{name:e=rt(e>>>=0),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?s:o},argPackAdvance:8,readValueFromPointer:function(t){return this.fromWireType(P[t>>>0])},destructorFunction:null})},h:function(t,e,s,o,r,n,i,a,c,l,h,u,d){t>>>=0,e>>>=0,s>>>=0,o>>>=0,r>>>=0,n>>>=0,i>>>=0,a>>>=0,c>>>=0,l>>>=0,u>>>=0,d>>>=0,h=rt(h>>>=0),n=Lt(r,n),a&&=Lt(i,a),l&&=Lt(c,l),d=Lt(u,d);var f=(t=>{if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?`_${t}`:t})(h);Ct(f,(function(){Nt(`Cannot construct ${h} due to unbound types`,[o])})),ot([t,e,s],o?[o]:[],(e=>{var s,r;e=e[0],r=o?(s=e.registeredClass).instancePrototype:bt.prototype;var i=xt(h,(function(...t){if(Object.getPrototypeOf(this)!==c)throw new Q("Use 'new' to construct "+h);if(void 0===u.constructor_body)throw new Q(h+" has no accessible constructor");var e=u.constructor_body[t.length];if(void 0===e)throw new Q(`Tried to invoke ctor of ${h} with invalid number of parameters (${t.length}) - expected (${Object.keys(u.constructor_body).toString()}) parameters instead!`);return e.apply(this,t)})),c=Object.create(r,{constructor:{value:i}});i.prototype=c;var u=new Dt(h,i,c,d,s,n,a,l);u.baseClass&&(u.baseClass.__derivedClasses??=[],u.baseClass.__derivedClasses.push(u));var m=new Ot(h,u,!0,!1,!1),p=new Ot(h+"*",u,!1,!1,!1),v=new Ot(h+" const*",u,!1,!0,!1);return ft[t]={pointerType:p,constPointerType:v},It(f,i),[m,p,v]}))},g:function(t,e,s,o,r,n){t>>>=0,o>>>=0,r>>>=0,n>>>=0;var i=kt(e,s>>>=0);r=Lt(o,r),ot([],[t],(t=>{var s=`constructor ${(t=t[0]).name}`;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new Q(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.registeredClass.constructor_body[e-1]=()=>{Nt(`Cannot construct ${t.name} due to unbound types`,i)},ot([],i,(o=>(o.splice(1,0,null),t.registeredClass.constructor_body[e-1]=Vt(s,o,null,r,n),[]))),[]}))},a:function(t,e,s,o,r,n,i,a,c){t>>>=0,e>>>=0,r>>>=0,n>>>=0,i>>>=0;var l=kt(s,o>>>=0);e=rt(e),e=jt(e),n=Lt(r,n),ot([],[t],(t=>{var o=`${(t=t[0]).name}.${e}`;function r(){Nt(`Cannot call ${o} due to unbound types`,l)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var h=t.registeredClass.instancePrototype,u=h[e];return void 0===u||void 0===u.overloadTable&&u.className!==t.name&&u.argCount===s-2?(r.argCount=s-2,r.className=t.name,h[e]=r):(Pt(h,e,o),h[e].overloadTable[s-2]=r),ot([],l,(r=>{var a=Vt(o,r,t,n,i,c);return void 0===h[e].overloadTable?(a.argCount=s-2,h[e]=a):h[e].overloadTable[s-2]=a,[]})),[]}))},G:Xt,t:function(t,e,s,o){function r(){}t>>>=0,s>>>=0,e=rt(e>>>=0),r.values={},it(t,{name:e,constructor:r,fromWireType:function(t){return this.constructor.values[t]},toWireType:(t,e)=>e.value,argPackAdvance:8,readValueFromPointer:Ut(e,s,o),destructorFunction:null}),Ct(e,r)},e:function(t,e,s){e>>>=0;var o=Gt(t>>>=0,"enum");e=rt(e);var r=o.constructor,n=Object.create(o.constructor.prototype,{value:{value:s},constructor:{value:xt(`${o.name}_${e}`,(function(){}))}});r.values[s]=n,r[e]=n},x:function(t,e,s){s>>>=0,it(t>>>=0,{name:e=rt(e>>>=0),fromWireType:t=>t,toWireType:(t,e)=>e,argPackAdvance:8,readValueFromPointer:Qt(e,s),destructorFunction:null})},c:function(t,e,s,o,r,n,i){t>>>=0,o>>>=0,r>>>=0,n>>>=0;var a=kt(e,s>>>=0);t=rt(t),t=jt(t),r=Lt(o,r),Ct(t,(function(){Nt(`Cannot call ${t} due to unbound types`,a)}),e-1),ot([],a,(s=>{var o=[s[0],null].concat(s.slice(1));return It(t,Vt(t,o,null,r,n,i),e-1),[]}))},j:function(t,e,s,o,r){t>>>=0,s>>>=0,e=rt(e>>>=0),-1===r&&(r=4294967295);var n=t=>t;if(0===o){var i=32-8*s;n=t=>t<<i>>>i}var a=e.includes("unsigned");it(t,{name:e,fromWireType:n,toWireType:a?function(t,e){return this.name,e>>>0}:function(t,e){return this.name,e},argPackAdvance:8,readValueFromPointer:Jt(e,s,0!==o),destructorFunction:null})},f:function(t,e,s){s>>>=0;var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=w[t>>>2>>>0],s=w[t+4>>>2>>>0];return new o(x.buffer,s,e)}it(t>>>=0,{name:s=rt(s),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},k:function(t,e){Xt(t>>>=0)},w:function(t,e){t>>>=0;var s="std::string"===(e=rt(e>>>=0));it(t,{name:e,fromWireType(t){var e,o,r,n=w[t>>>2>>>0],i=t+4;if(s)for(var a=i,c=0;c<=n;++c){var l=i+c;if(c==n||0==P[l>>>0]){var h=(o=a,r=l-a,(o>>>=0)?((t,e,s)=>{for(var o=(e>>>=0)+s,r=e;t[r]&&!(r>=o);)++r;if(r-e>16&&t.buffer&&Kt)return Kt.decode(t.subarray(e,r));for(var n="";e<r;){var i=t[e++];if(128&i){var a=63&t[e++];if(192!=(224&i)){var c=63&t[e++];if((i=224==(240&i)?(15&i)<<12|a<<6|c:(7&i)<<18|a<<12|c<<6|63&t[e++])<65536)n+=String.fromCharCode(i);else{var l=i-65536;n+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else n+=String.fromCharCode((31&i)<<6|a)}else n+=String.fromCharCode(i)}return n})(P,o,r):"");void 0===e?e=h:(e+=String.fromCharCode(0),e+=h),a=l+1}}else{var u=new Array(n);for(c=0;c<n;++c)u[c]=String.fromCharCode(P[i+c>>>0]);e=u.join("")}return we(t),e},toWireType(t,e){var o;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r="string"==typeof e;r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||nt("Cannot pass non-string to std::string"),o=s&&r?(t=>{for(var e=0,s=0;s<t.length;++s){var o=t.charCodeAt(s);o<=127?e++:o<=2047?e+=2:o>=55296&&o<=57343?(e+=4,++s):e+=3}return e})(e):e.length;var n=Se(4+o+1),i=n+4;if(w[n>>>2>>>0]=o,s&&r)((t,e,s,o)=>{if(!(o>0))return 0;for(var r=(s>>>=0)+o-1,n=0;n<t.length;++n){var i=t.charCodeAt(n);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127){if(s>=r)break;e[s++>>>0]=i}else if(i<=2047){if(s+1>=r)break;e[s++>>>0]=192|i>>6,e[s++>>>0]=128|63&i}else if(i<=65535){if(s+2>=r)break;e[s++>>>0]=224|i>>12,e[s++>>>0]=128|i>>6&63,e[s++>>>0]=128|63&i}else{if(s+3>=r)break;e[s++>>>0]=240|i>>18,e[s++>>>0]=128|i>>12&63,e[s++>>>0]=128|i>>6&63,e[s++>>>0]=128|63&i}}e[s>>>0]=0})(e,P,i,o+1);else if(r)for(var a=0;a<o;++a){var c=e.charCodeAt(a);c>255&&(we(i),nt("String has UTF-16 code units that do not fit in 8 bits")),P[i+a>>>0]=c}else for(a=0;a<o;++a)P[i+a>>>0]=e[a];return null!==t&&t.push(we,n),n},argPackAdvance:8,readValueFromPointer:U,destructorFunction(t){we(t)}})},s:function(t,e,s){var o,r,n,i;t>>>=0,e>>>=0,s=rt(s>>>=0),2===e?(o=ee,r=se,i=oe,n=t=>D[t>>>1>>>0]):4===e&&(o=re,r=ne,i=ie,n=t=>w[t>>>2>>>0]),it(t,{name:s,fromWireType:t=>{for(var s,r=w[t>>>2>>>0],i=t+4,a=0;a<=r;++a){var c=t+4+a*e;if(a==r||0==n(c)){var l=o(i,c-i);void 0===s?s=l:(s+=String.fromCharCode(0),s+=l),i=c+e}}return we(t),s},toWireType:(t,o)=>{"string"!=typeof o&&nt(`Cannot pass non-string to C++ string type ${s}`);var n=i(o),a=Se(4+n+e);return w[a>>>2>>>0]=n/e,r(o,a+4,n+e),null!==t&&t.push(we,a),a},argPackAdvance:8,readValueFromPointer:U,destructorFunction(t){we(t)}})},o:function(t,e,s,o,r,n){e>>>=0,s>>>=0,o>>>=0,r>>>=0,n>>>=0,Y[t>>>=0]={name:rt(e),rawConstructor:Lt(s,o),rawDestructor:Lt(r,n),fields:[]}},l:function(t,e,s,o,r,n,i,a,c,l){e>>>=0,s>>>=0,o>>>=0,r>>>=0,n>>>=0,i>>>=0,a>>>=0,c>>>=0,l>>>=0,Y[t>>>=0].fields.push({fieldName:rt(e),getterReturnType:s,getter:Lt(o,r),getterContext:n,setterArgumentType:i,setter:Lt(a,c),setterContext:l})},I:function(t,e){it(t>>>=0,{isVoid:!0,name:e=rt(e>>>=0),argPackAdvance:0,fromWireType:()=>{},toWireType:(t,e)=>{}})},F:function(t,e,s){return t>>>=0,e>>>=0,s>>>=0,P.copyWithin(t>>>0,e>>>0,e+s>>>0)},v:function(t,e,s){return t>>>=0,e>>>=0,s>>>=0,t=qt.toValue(t),e=Gt(e,"emval::as"),ae(e,s,t)},z:function(t,e,s,o,r){return e>>>=0,s>>>=0,o>>>=0,r>>>=0,(t=he[t>>>=0])(e=qt.toValue(e),e[s=le(s)],o,r)},b:zt,m:function(t,e){return t>>>=0,e>>>=0,(t=qt.toValue(t))==qt.toValue(e)},y:function(t,e,s){var o=((t,e)=>{for(var s=new Array(t),o=0;o<t;++o)s[o]=Gt(w[e+4*o>>>2>>>0],"parameter "+o);return s})(t,e>>>=0),r=o.shift();t--;var n="return function (obj, func, destructorsRef, args) {\n",i=0,a=[];0===s&&a.push("obj");for(var c=["retType"],l=[r],h=0;h<t;++h)a.push("arg"+h),c.push("argType"+h),l.push(o[h]),n+=`  var arg${h} = argType${h}.readValueFromPointer(args${i?"+"+i:""});\n`,i+=o[h].argPackAdvance;n+=`  var rv = ${1===s?"new func":"func.call"}(${a.join(", ")});\n`,r.isVoid||(c.push("emval_returnValue"),l.push(ae),n+="  return emval_returnValue(retType, destructorsRef, rv);\n"),n+="};\n",c.push(n);var u,d,f=_t(Function,c)(...l),m=`methodCaller<(${o.map((t=>t.name)).join(", ")}) => ${r.name}>`;return u=xt(m,f),d=he.length,he.push(u),d},B:function(t,e){return t>>>=0,e>>>=0,t=qt.toValue(t),e=qt.toValue(e),qt.toHandle(t[e])},u:function(t){(t>>>=0)>9&&(Wt[t+1]+=1)},q:function(t){return t>>>=0,qt.toHandle(le(t))},A:function(){return qt.toHandle({})},p:function(t){t>>>=0;var e=qt.toValue(t);X(e),zt(t)},r:function(t,e,s){t>>>=0,e>>>=0,s>>>=0,t=qt.toValue(t),e=qt.toValue(e),s=qt.toValue(s),t[e]=s},d:function(t,e){e>>>=0;var s=(t=Gt(t>>>=0,"_emval_take_value")).readValueFromPointer(e);return qt.toHandle(s)},E:function(t){t>>>=0;var e=P.length,s=4294901760;if(t>s)return!1;for(var o,r=1;r<=4;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296);var i=Math.min(s,(o=Math.max(t,n))+(65536-o%65536)%65536);if(me(i))return!0}return!1}},Ce=function(){var t,e,n,i,a={a:Pe};function l(t,e){var s;return Ce=function(t){var e,s=t=>e=>t(e)>>>0;return(t=Object.assign({},t)).L=s(t.L),t.N=s(t.N),t._emscripten_stack_alloc=s(t._emscripten_stack_alloc),t.emscripten_stack_get_current=(e=t.emscripten_stack_get_current,()=>e()>>>0),t}(Ce=t.exports),y=Ce.J,E(),Et=Ce.M,s=Ce.K,I.unshift(s),function(t){if(F--,o.monitorRunDependencies?.(F),0==F&&(null!==L&&(clearInterval(L),L=null),R)){var e=R;R=null,e()}}(),Ce}if(F++,o.monitorRunDependencies?.(F),o.instantiateWasm)try{return o.instantiateWasm(a,l)}catch(t){b(`Module.instantiateWasm callback failed with error: ${t}`),s(t)}return k||(k=function(){if(o.locateFile){var t="manifold.wasm";return H(t)?t:(e=t,o.locateFile?o.locateFile(e,m):m+e)}var e;return new URL(r(430),r.b).href}()),(t=g,e=k,n=a,i=function(t){l(t.instance)},t||"function"!=typeof WebAssembly.instantiateStreaming||H(e)||_(e)||c||"function"!=typeof fetch?j(e,n,i):fetch(e,{credentials:"same-origin"}).then((t=>WebAssembly.instantiateStreaming(t,n).then(i,(function(t){return b(`wasm streaming compile failed: ${t}`),b("falling back to ArrayBuffer instantiation"),j(e,n,i)}))))).catch(s),{}}(),De=t=>(De=Ce.L)(t),Se=t=>(Se=Ce.N)(t),we=t=>(we=Ce.O)(t),Te=t=>(Te=Ce.P)(t);function Me(){function t(){xe||(xe=!0,o.calledRun=!0,O||(B(I),e(o),o.onRuntimeInitialized?.(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)t=o.postRun.shift(),$.unshift(t);var t;B($)}()))}F>0||(function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)t=o.preRun.shift(),A.unshift(t);var t;B(A)}(),F>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.addFunction=ye,o.removeFunction=be,R=function t(){xe||Me(),xe||(R=t)},o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Me(),n});const ot=st;(async()=>{const t=await ot({locateFile:()=>G.BITBYBIT_CDN_URL+"/wasm/manifold-3-3-2.wasm"});var e;t.setup(),e=t,K=new b,J=new Q(e),postMessage("manifold-initialised"),postMessage("manifold-initialised")})(),addEventListener("message",(({data:t})=>{((t,e)=>{let s;e("busy");try{if("manifoldToMesh"!==t.action.functionName&&"manifoldsToMeshes"!==t.action.functionName&&"deleteManifoldOrCrossSection"!==t.action.functionName&&"deleteManifoldsOrCrossSections"!==t.action.functionName&&"manifoldToMeshPointer"!==t.action.functionName&&"startedTheRun"!==t.action.functionName&&"cleanAllCache"!==t.action.functionName&&"addManifoldPluginDependency"!==t.action.functionName){Object.keys(t.action.inputs).forEach((e=>{const s=t.action.inputs[e];if(s&&s.type&&"manifold-shape"===s.type&&s.hash){const s=K.checkCache(t.action.inputs[e].hash);if(!s)throw new Error(`Manifold with hash ${t.action.inputs[e].hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);t.action.inputs[e]=s}s&&Array.isArray(s)&&s.length>0&&(s[0].type&&"manifold-shape"===s[0].type&&s[0].hash?t.action.inputs[e]=t.action.inputs[e].map((t=>{const e=K.checkCache(t.hash);if(!e)throw new Error(`Manifold with hash ${t.hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);return e})):Array.isArray(s[0])&&s[0][0].type&&"manifold-shape"===s[0][0].type&&s[0][0].hash&&(t.action.inputs[e]=t.action.inputs[e].map((t=>t.map((t=>{const e=K.checkCache(t.hash);if(!e)throw new Error(`Manifold with hash ${t.hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);return e}))))))}));const e=t.action.functionName.split(".");let o;if(o=3===e.length?K.cacheOp(t.action,(()=>J[e[0]][e[1]][e[2]](t.action.inputs))):2===e.length?K.cacheOp(t.action,(()=>J[e[0]][e[1]](t.action.inputs))):K.cacheOp(t.action,(()=>J[t.action.functionName](t.action.inputs))),K.isManifoldObject(o))s=Array.isArray(o)?o.map((t=>({hash:t.hash,type:"manifold-shape"}))):{hash:o.hash,type:"manifold-shape"};else if(o&&o.compound&&o.data&&o.manifolds&&o.manifolds.length>0){const t=o;t.manifolds=t.manifolds.map((t=>({id:t.id,manifold:{hash:t.manifold.hash,type:"manifold-shape"}}))),t.compound={hash:t.compound.hash,type:"manifold-shape"},s=t}else s=o}if("addManifoldPluginDependency"===t.action.functionName&&(J&&J.plugins?Object.keys(t.action.inputs).forEach((e=>{J.plugins.dependencies[e]=t.action.inputs[e]})):tt=t.action.inputs),"manifoldToMesh"===t.action.functionName){const e=K.checkCache(t.action.inputs.manifold.hash);if(!e)throw new Error(`Manifold with hash ${t.action.inputs.manifold.hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);t.action.inputs.manifold=e,s=J.decomposeManifoldOrCrossSection(t.action.inputs)}if("manifoldToMeshPointer"===t.action.functionName){const e=K.checkCache(t.action.inputs.manifold.hash);if(!e)throw new Error(`Manifold with hash ${t.action.inputs.manifold.hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);t.action.inputs.manifold=e;const o=J.manifold.manifoldToMesh(t.action.inputs),r=K.computeHash(t.action);K.addToCache(r,o),s={hash:r,type:"manifold-shape"}}if("manifoldsToMeshes"===t.action.functionName){if(!(t.action.inputs.manifolds&&t.action.inputs.manifolds.length>0))throw new Error("No manifolds detected");t.action.inputs.manifolds=t.action.inputs.manifolds.map((t=>{const e=K.checkCache(t.hash);if(!e)throw new Error(`Manifold with hash ${t.hash} not found in cache. The cache may have been cleaned. Please regenerate the manifold.`);return e})),s=J.decomposeManifoldsOrCrossSections(t.action.inputs)}"deleteManifoldOrCrossSection"===t.action.functionName&&(K.cleanCacheForHash(t.action.inputs.manifoldOrCrossSection.hash),s={}),"deleteManifoldsOrCrossSections"===t.action.functionName&&(t.action.inputs.manifoldsOrCrossSections.forEach((t=>K.cleanCacheForHash(t.hash))),s={}),"startedTheRun"===t.action.functionName&&(K&&Object.keys(K.usedHashes).length>1e4&&K.cleanAllCache(),s={}),"cleanAllCache"===t.action.functionName&&(K.cleanAllCache(),s={}),e({uid:t.uid,result:s})}catch(s){let o,r;t&&t.action&&t.action.inputs&&(o=`Input values were: {${Object.keys(t.action.inputs).map((e=>`${e}: ${JSON.stringify(t.action.inputs[e])}`)).join(",")}}. `),t&&t.action&&t.action.functionName&&(r=`- ${t.action.functionName}`),e({uid:t.uid,result:void 0,error:`Manifold computation failed. ${s} While executing function ${r}. ${o}`})}})(t,postMessage)}))})()})();