/*! For license information please see bitbybit-occt-webworker.js.LICENSE.txt */
(()=>{var e={725:()=>{},439:()=>{},699:()=>{},256:()=>{}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{Base:()=>H,OCCT:()=>G});var t={};r.r(t),r.d(t,{LodDto:()=>bt,lodEnum:()=>ft});var i={};r.r(i),r.d(i,{Part:()=>wt});var s={};r.r(s),r.d(s,{SerenitySwirlData:()=>xt,SerenitySwirlDto:()=>Et});var n={};r.r(n),r.d(n,{ArabicArchwayData:()=>Ct,ArabicArchwayDrawingPart:()=>kt,ArabicArchwayDrawingPartShapes:()=>Ot,ArabicArchwayDto:()=>Pt,ArabicArchwayDtoBase:()=>Tt});var o={};r.r(o),r.d(o,{ArabicArchway:()=>n,SerenitySwirl:()=>s});var a={};r.r(a),r.d(a,{EternalLoveData:()=>_t,EternalLoveDto:()=>Dt,EternalLoveDtoBase:()=>At});var c={};r.r(c),r.d(c,{EternalLove:()=>a});var h={};r.r(h),r.d(h,{CalmCupData:()=>Mt,CalmCupDto:()=>Rt,CalmCupDtoBase:()=>Ft});var l={};r.r(l),r.d(l,{DragonCupData:()=>It,DragonCupDto:()=>Bt,DragonCupDtoBase:()=>Lt,DragonCupModelDto:()=>Ut});var d={};r.r(d),r.d(d,{CalmCup:()=>h,DragonCup:()=>l});var u={};r.r(u),r.d(u,{PhoneNestData:()=>Gt,PhoneNestDrawDto:()=>qt,PhoneNestDrawingPart:()=>Ht,PhoneNestDrawingPartShapes:()=>Vt,PhoneNestDto:()=>Nt,PhoneNestDtoBase:()=>Wt,PhoneNestMainPart:()=>zt,PhoneNestModelDto:()=>jt});var p={};r.r(p),r.d(p,{PhoneNest:()=>u});var f={};r.r(f),r.d(f,{SpicyBoxData:()=>$t,SpicyBoxDto:()=>Xt,SpicyBoxDtoBase:()=>Yt,SpicyBoxModelDto:()=>Zt});var v={};r.r(v),r.d(v,{SpicyBox:()=>f});var g={};r.r(g),r.d(g,{Boxes:()=>v,Cups:()=>d,Desktop:()=>p,Medals:()=>c,Vases:()=>o});var m={};r.r(m),r.d(m,{DropletsPhoneHolderData:()=>rr,DropletsPhoneHolderDrawingPart:()=>ir,DropletsPhoneHolderDrawingPartShapes:()=>sr,DropletsPhoneHolderDto:()=>Jt,DropletsPhoneHolderDtoBase:()=>Qt,DropletsPhoneHolderModelDto:()=>Kt,DropletsPhoneHolderModelDxfDto:()=>er,DropletsPhoneHolderModelStepDto:()=>tr});var S={};r.r(S),r.d(S,{DropletsPhoneHolder:()=>m});var y={};r.r(y),r.d(y,{Gadgets:()=>S});var b={};r.r(b),r.d(b,{ZenHideoutData:()=>ar,ZenHideoutDrawingPart:()=>cr,ZenHideoutDrawingPartShapes:()=>hr,ZenHideoutDto:()=>or,ZenHideoutDtoBase:()=>nr});var w={};r.r(w),r.d(w,{ZenHideout:()=>b});var E={};r.r(E),r.d(E,{BeamPart:()=>br,CeilingPart:()=>Ar,ColumnPart:()=>yr,CornerEntranceDto:()=>_r,CornerEntrancePart:()=>Cr,CornerPart:()=>Sr,CornerStairDto:()=>Tr,CornerStairPart:()=>Pr,FloorPart:()=>Dr,Houses:()=>w,RoofBeamsPart:()=>Er,RoofCoverOneSidedDto:()=>kr,RoofCoverPart:()=>Or,RoofPanelPart:()=>xr,RoofPart:()=>wr,SandwitchPanelDto:()=>fr,SandwitchPanelFlexDto:()=>vr,SandwitchPart:()=>gr,SandwitchPartFlex:()=>mr,WindowCornerDto:()=>lr,WindowCornerPart:()=>pr,WindowRectangularDto:()=>dr,WindowRectangularPart:()=>ur});var x={};r.r(x),r.d(x,{WingtipVillaData:()=>Rr,WingtipVillaDto:()=>Fr});var T={};r.r(T),r.d(T,{ChirpyChaletData:()=>Lr,ChirpyChaletDto:()=>Mr});var P={};r.r(P),r.d(P,{ChirpyChalet:()=>T,WingtipVilla:()=>x});var C={};r.r(C),r.d(C,{BirdHouses:()=>P});var k={};r.r(k),r.d(k,{SnakeChairData:()=>Ur,SnakeChairDrawDto:()=>Vr,SnakeChairDrawingPart:()=>Wr,SnakeChairDrawingPartShapes:()=>Nr,SnakeChairDto:()=>Ir,SnakeChairDtoBase:()=>Br,SnakeChairMainPart:()=>Gr,SnakeChairModelDto:()=>Hr});var O={};r.r(O),r.d(O,{SnakeChair:()=>k});var A={};r.r(A),r.d(A,{ElegantTableData:()=>qr,ElegantTableDrawDto:()=>Kr,ElegantTableDrawingPart:()=>Yr,ElegantTableDrawingPartShapes:()=>Xr,ElegantTableDto:()=>jr,ElegantTableDtoBase:()=>zr,ElegantTableLegByIndexDto:()=>Qr,ElegantTableLegPart:()=>$r,ElegantTableModelDto:()=>Jr,ElegantTableTopPart:()=>Zr});var D={};r.r(D),r.d(D,{GoodCoffeeTableData:()=>ri,GoodCoffeeTableDrawDto:()=>li,GoodCoffeeTableDrawingPart:()=>ii,GoodCoffeeTableDrawingPartShapes:()=>si,GoodCoffeeTableDto:()=>ti,GoodCoffeeTableDtoBase:()=>ei,GoodCoffeeTableLegByIndexDto:()=>ci,GoodCoffeeTableLegPart:()=>ni,GoodCoffeeTableModelDto:()=>hi,GoodCoffeeTableShelfPart:()=>oi,GoodCoffeeTableTopPart:()=>ai});var _={};r.r(_),r.d(_,{SnakeTableData:()=>pi,SnakeTableDrawDto:()=>Si,SnakeTableDrawingPart:()=>fi,SnakeTableDrawingPartShapes:()=>vi,SnakeTableDto:()=>ui,SnakeTableDtoBase:()=>di,SnakeTableMainPart:()=>gi,SnakeTableModelDto:()=>mi});var F={};r.r(F),r.d(F,{ElegantTable:()=>A,GoodCoffeeTable:()=>D,SnakeTable:()=>_});var R={};r.r(R),r.d(R,{Chairs:()=>O,Tables:()=>F});var M={};r.r(M),r.d(M,{Architecture:()=>E,Enums:()=>t,Furniture:()=>R,KidsCorner:()=>C,LaserCutting:()=>y,Shared:()=>i,ThreeDPrinting:()=>g});var L={};r.r(L),r.d(L,{FontDefinition:()=>Ti,Text3DData:()=>Ei,Text3DDto:()=>bi,Text3DFaceDefinitionDto:()=>Ci,Text3DFaceDto:()=>wi,Text3DLetterByIndexDto:()=>xi,Text3DModelDto:()=>Pi,Texts3DFaceDto:()=>ki,faceTextVarEnum:()=>mt,faceTypeEnum:()=>St,fontVariantsEnum:()=>gt,fontsEnum:()=>vt,fontsModel:()=>yi,recAlignmentEnum:()=>yt});var B={};r.r(B),r.d(B,{PyramidSimpeByIndexDto:()=>_i,PyramidSimpleAffectorsDto:()=>Ai,PyramidSimpleCellPart:()=>Ni,PyramidSimpleData:()=>Di,PyramidSimpleDto:()=>Oi,PyramidSimpleFacePart:()=>Gi,PyramidSimpleModelCellDto:()=>Li,PyramidSimpleModelCellsDto:()=>Ri,PyramidSimpleModelCellsIndexDto:()=>Mi,PyramidSimpleModelDto:()=>Fi,PyramidSimpleModelFaceCellIndexDto:()=>Ii,PyramidSimpleModelFaceCellsUIndexDto:()=>Ui,PyramidSimpleModelFaceCellsVIndexDto:()=>Wi,PyramidSimpleModelFaceIndexDto:()=>Bi});var I={};r.r(I),r.d(I,{PyramidSimple:()=>B});var U={};r.r(U),r.d(U,{FacePatterns:()=>I});var W={};r.r(W),r.d(W,{outputShapeEnum:()=>Hi});var N,G,H,V,z,j,q,Y,X,$,Z,Q,J,K,ee,te,re={};r.r(re),r.d(re,{Enums:()=>W,Patterns:()=>U,Text3D:()=>L}),(te=N||(N={})).loading="loading",te.loaded="loaded",te.initialised="initialised",te.computing="computing";class ie{starLines(e,t,r,i,s){let n=[];const o=2*Math.PI/r;for(let i=0;i<r;i++){const r=i*o,a=s||0,c=[t*Math.cos(r),a,t*Math.sin(r)],h=[e*Math.cos(r+o/2),0,e*Math.sin(r+o/2)],l=[t*Math.cos(r+o),a,t*Math.sin(r+o)];n.push({start:c,end:h}),n.push({start:h,end:l})}return i&&(n=n.slice(0,n.length/2)),n}parallelogram(e,t,r,i){const s=r*Math.PI/180;let n,o,a,c,h,l,d,u;i?(n=-e/2,o=-t/2,a=e/2,c=-t/2,h=e/2,l=t/2,d=-e/2,u=t/2):(n=0,o=0,a=e,c=0,h=e,l=t,d=0,u=t);const p=t*Math.tan(s)/2;n+=p,a+=p,h-=p,d-=p;const f=[n,0,o],v=[a,0,c],g=[h,0,l],m=[d,0,u];return[{start:f,end:v},{start:v,end:g},{start:g,end:m},{start:m,end:f}]}ngon(e,t,r){const i=2*Math.PI/e,s=[];for(let n=0;n<e;n++){const e=[r[0]+t*Math.cos(n*i),0,r[1]+t*Math.sin(n*i)],o=[r[0]+t*Math.cos((n+1)*i),0,r[1]+t*Math.sin((n+1)*i)];s.push({start:e,end:o})}return s}polygonL(e,t,r,i){return[[0,0,0],[t,0,0],[t,0,-e],[-r,0,-e],[-r,0,i],[0,0,i]]}polygonLInverted(e,t,r,i){return e>=i&&(e=i-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),r>=t&&(r=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[0,0,0],[t,0,0],[t,0,e],[r,0,e],[r,0,i],[0,0,i]]}polygonLMiddle(e,t,r,i){return e>=i&&(e=i-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),r>=t&&(r=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[r/2,0,e/2],[r/2,0,i],[-r/2,0,i],[-r/2,0,-e/2],[t,0,-e/2],[t,0,e/2]]}}class se{constructor(){this.tolerance=1e-5}degToRad(e){return e*(Math.PI/180)}remap(e,t,r,i,s){return(e-t)/(r-t)*(s-i)+i}removeAllDuplicateVectors(e,t=1e-7){const r=[];return e.forEach((e=>{r.some((r=>this.vectorsTheSame(e,r,t)))||r.push(e)})),r}removeConsecutiveDuplicates(e,t=!0){const r=[];if(e.length>1){for(let t=1;t<e.length;t++){const i=e[t],s=e[t-1];this.vectorsTheSame(i,s,this.tolerance)||r.push(s),t===e.length-1&&r.push(i)}if(t){const e=r[0],t=r[r.length-1];this.vectorsTheSame(e,t,this.tolerance)&&r.pop()}}else 1===e.length&&r.push(...e);return r}vectorsTheSame(e,t,r){let i=!1;if(e.length!==t.length)return i;i=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],r)){i=!1;break}return i}approxEq(e,t,r){return Math.abs(e-t)<r}averageVector(e){return e.reduce(((e,t)=>e.map(((e,r)=>e+t[r]))),[0,0,0]).map((t=>t/e.length))}magnitude(e){return Math.sqrt(e.reduce(((e,t)=>e+t*t),0))}normalize(e){const t=this.magnitude(e);return e.map((e=>e/t))}translatePoint(e,t,r){return[e[0]+t[0]*r,e[1]+t[1]*r,e[2]+t[2]*r]}angleBetweenVectors(e,t){const r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],i=this.magnitude(e),s=this.magnitude(t);return Math.acos(r/(i*s))}distanceBetweenPoints(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}}!function(e){let t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S;!function(e){e.arc="arc",e.intersection="intersection",e.tangent="tangent"}(t=e.joinTypeEnum||(e.joinTypeEnum={})),function(e){e.skin="skin",e.pipe="pipe",e.rectoVerso="rectoVerso"}(r=e.bRepOffsetModeEnum||(e.bRepOffsetModeEnum={})),function(e){e.approxChordLength="approxChordLength",e.approxCentripetal="approxCentripetal",e.approxIsoParametric="approxIsoParametric"}(i=e.approxParametrizationTypeEnum||(e.approxParametrizationTypeEnum={})),function(e){e.outside="outside",e.inside="inside",e.middle="middle"}(s=e.directionEnum||(e.directionEnum={})),function(e){e.iges="iges",e.step="step"}(n=e.fileTypeEnum||(e.fileTypeEnum={})),function(e){e.forward="forward",e.reversed="reversed",e.internal="internal",e.external="external"}(o=e.topAbsOrientationEnum||(e.topAbsOrientationEnum={})),function(e){e.in="in",e.out="out",e.on="on",e.unknown="unknown"}(a=e.topAbsStateEnum||(e.topAbsStateEnum={})),function(e){e.unknown="unknown",e.vertex="vertex",e.edge="edge",e.wire="wire",e.face="face",e.shell="shell",e.solid="solid",e.compSolid="compSolid",e.compound="compound",e.shape="shape"}(c=e.shapeTypeEnum||(e.shapeTypeEnum={})),function(e){e.unqualified="unqualified",e.enclosing="enclosing",e.enclosed="enclosed",e.outside="outside",e.noqualifier="noqualifier"}(h=e.gccEntPositionEnum||(e.gccEntPositionEnum={})),function(e){e.keepSide1="keepSide1",e.keepSide2="keepSide2",e.all="all"}(l=e.positionResultEnum||(e.positionResultEnum={})),function(e){e.none="none",e.keepSide1="keepSide1",e.keepSide2="keepSide2"}(d=e.circleInclusionEnum||(e.circleInclusionEnum={})),function(e){e.none="none",e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(u=e.twoCircleInclusionEnum||(e.twoCircleInclusionEnum={})),function(e){e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(p=e.fourSidesStrictEnum||(e.fourSidesStrictEnum={})),function(e){e.outside="outside",e.inside="inside"}(f=e.twoSidesStrictEnum||(e.twoSidesStrictEnum={})),function(e){e.allWithAll="allWithAll",e.inOrder="inOrder",e.inOrderClosed="inOrderClosed"}(v=e.combinationCirclesForFaceEnum||(e.combinationCirclesForFaceEnum={})),function(e){e[e.curve=0]="curve",e[e.edge=1]="edge",e[e.wire=2]="wire",e[e.face=3]="face"}(g=e.typeSpecificityEnum||(e.typeSpecificityEnum={})),function(e){e.all="all",e.closest="closest",e.furthest="furthest",e.closestAndFurthest="closestAndFurthest"}(m=e.pointProjectionTypeEnum||(e.pointProjectionTypeEnum={})),function(e){e.isCorrectedFrenet="isCorrectedFrenet",e.isFixed="isFixed",e.isFrenet="isFrenet",e.isConstantNormal="isConstantNormal",e.isDarboux="isDarboux",e.isGuideAC="isGuideAC",e.isGuidePlan="isGuidePlan",e.isGuideACWithContact="isGuideACWithContact",e.isGuidePlanWithContact="isGuidePlanWithContact",e.isDiscreteTrihedron="isDiscreteTrihedron"}(S=e.geomFillTrihedronEnum||(e.geomFillTrihedronEnum={})),e.DecomposedMeshDto=class{constructor(e,t){void 0!==e&&(this.faceList=e),void 0!==t&&(this.edgeList=t)}},e.DecomposedFaceDto=class{},e.DecomposedEdgeDto=class{},e.ShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.PointDto=class{constructor(e){this.point=[0,0,0],void 0!==e&&(this.point=e)}},e.XYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.ConstraintTanLinesFromPtToCircleDto=class{constructor(e,t,r,i,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==s&&(this.circleRemainder=s)}},e.ConstraintTanLinesFromTwoPtsToCircleDto=class{constructor(e,t,r,i,s,n){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point1=t),void 0!==r&&(this.point1=r),void 0!==i&&(this.tolerance=i),void 0!==s&&(this.positionResult=s),void 0!==n&&(this.circleRemainder=n)}},e.ConstraintTanLinesOnTwoCirclesDto=class{constructor(e,t,r,i,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainders=u.none,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.positionResult=i),void 0!==s&&(this.circleRemainders=s)}},e.ConstraintTanCirclesOnTwoCirclesDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.ConstraintTanCirclesOnCircleAndPntDto=class{constructor(e,t,r,i){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.radius=i)}},e.CurveAndSurfaceDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.surface=t)}},e.FilletTwoEdgesInPlaneDto=class{constructor(e,t,r,i,s,n){this.planeOrigin=[0,0,0],this.planeDirection=[0,1,0],this.radius=.3,this.solution=-1,void 0!==e&&(this.edge1=e),void 0!==t&&(this.edge2=t),void 0!==r&&(this.planeOrigin=r),void 0!==i&&(this.planeDirection=i),void 0!==s&&(this.radius=s),void 0!==n&&(this.solution=n)}},e.ClosestPointsOnShapeFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.BoundingBoxDto=class{constructor(e){void 0!==e&&(this.bbox=e)}},e.BoundingBoxPropsDto=class{constructor(e,t,r,i){this.min=[0,0,0],this.max=[0,0,0],this.center=[0,0,0],this.size=[0,0,0],void 0!==e&&(this.min=e),void 0!==t&&(this.max=t),void 0!==r&&(this.center=r),void 0!==i&&(this.size=i)}},e.BoundingSpherePropsDto=class{constructor(e,t){this.center=[0,0,0],this.radius=0,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.SplitWireOnPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.ClosestPointsOnShapesFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t)}},e.ClosestPointsBetweenTwoShapesDto=class{constructor(e,t){void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t)}},e.FaceFromSurfaceAndWireDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.surface=e),void 0!==t&&(this.wire=t),void 0!==r&&(this.inside=r)}},e.WireOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t)}},e.DrawShapeDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shape=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==s&&(this.faceMaterial=s),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==o&&(this.edgeWidth=o),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==S&&(this.faceIndexColour=S)}},e.DrawShapesDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shapes=e),void 0!==t&&(this.faceOpacity=t),void 0!==r&&(this.edgeOpacity=r),void 0!==i&&(this.edgeColour=i),void 0!==s&&(this.faceMaterial=s),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==o&&(this.edgeWidth=o),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==S&&(this.faceIndexColour=S)}},e.FaceSubdivisionDto=class{constructor(e,t,r,i,s,n,o,a,c){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepU=!1,this.removeStartEdgeU=!1,this.removeEndEdgeU=!1,this.shiftHalfStepV=!1,this.removeStartEdgeV=!1,this.removeEndEdgeV=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepU=i),void 0!==s&&(this.removeStartEdgeU=s),void 0!==n&&(this.removeEndEdgeU=n),void 0!==o&&(this.shiftHalfStepV=o),void 0!==a&&(this.removeStartEdgeV=a),void 0!==c&&(this.removeEndEdgeV=c)}},e.FaceSubdivisionToWiresDto=class{constructor(e,t,r,i,s,n){this.nrDivisions=10,this.isU=!0,this.shiftHalfStep=!1,this.removeStart=!1,this.removeEnd=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisions=t),void 0!==r&&(this.isU=r),void 0!==i&&(this.shiftHalfStep=i),void 0!==s&&(this.removeStart=s),void 0!==n&&(this.removeEnd=n)}},e.FaceSubdivideToRectangleWiresDto=class{constructor(e,t,r,i,s,n,o,a,c){this.nrRectanglesU=10,this.nrRectanglesV=10,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==s&&(this.scalePatternV=s),void 0!==n&&(this.filletPattern=n),void 0!==o&&(this.inclusionPattern=o),void 0!==a&&(this.offsetFromBorderU=a),void 0!==c&&(this.offsetFromBorderV=c)}},e.FaceSubdivideToHexagonWiresDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,this.extendUUp=!1,this.extendUBottom=!1,this.extendVUp=!1,this.extendVBottom=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==s&&(this.scalePatternU=s),void 0!==n&&(this.scalePatternV=n),void 0!==o&&(this.filletPattern=o),void 0!==a&&(this.inclusionPattern=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h),void 0!==l&&(this.extendUUp=l),void 0!==d&&(this.extendUBottom=d),void 0!==u&&(this.extendVUp=u),void 0!==p&&(this.extendVBottom=p)}},e.FaceSubdivideToHexagonHolesDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==r&&(this.nrHexagonsU=r),void 0!==i&&(this.flatU=i),void 0!==s&&(this.holesToFaces=s),void 0!==n&&(this.scalePatternU=n),void 0!==o&&(this.scalePatternV=o),void 0!==a&&(this.filletPattern=a),void 0!==c&&(this.inclusionPattern=c),void 0!==h&&(this.offsetFromBorderU=h),void 0!==l&&(this.offsetFromBorderV=l)}},e.FaceSubdivideToRectangleHolesDto=class{constructor(e,t,r,i,s,n,o,a,c,h){this.nrRectanglesU=10,this.nrRectanglesV=10,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==r&&(this.nrRectanglesU=r),void 0!==i&&(this.scalePatternU=i),void 0!==s&&(this.scalePatternV=s),void 0!==n&&(this.filletPattern=n),void 0!==o&&(this.inclusionPattern=o),void 0!==a&&(this.holesToFaces=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h)}},e.FaceSubdivisionControlledDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepNthU=0,this.shiftHalfStepUOffsetN=0,this.removeStartEdgeNthU=0,this.removeStartEdgeUOffsetN=0,this.removeEndEdgeNthU=0,this.removeEndEdgeUOffsetN=0,this.shiftHalfStepNthV=0,this.shiftHalfStepVOffsetN=0,this.removeStartEdgeNthV=0,this.removeStartEdgeVOffsetN=0,this.removeEndEdgeNthV=0,this.removeEndEdgeVOffsetN=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==r&&(this.nrDivisionsV=r),void 0!==i&&(this.shiftHalfStepNthU=i),void 0!==s&&(this.shiftHalfStepUOffsetN=s),void 0!==n&&(this.removeStartEdgeNthU=n),void 0!==o&&(this.removeStartEdgeUOffsetN=o),void 0!==a&&(this.removeEndEdgeNthU=a),void 0!==c&&(this.removeEndEdgeUOffsetN=c),void 0!==h&&(this.shiftHalfStepNthV=h),void 0!==l&&(this.shiftHalfStepVOffsetN=l),void 0!==d&&(this.removeStartEdgeNthV=d),void 0!==u&&(this.removeStartEdgeVOffsetN=u),void 0!==p&&(this.removeEndEdgeNthV=p),void 0!==f&&(this.removeEndEdgeVOffsetN=f)}},e.FaceLinearSubdivisionDto=class{constructor(e,t,r,i,s,n,o){this.isU=!0,this.param=.5,this.nrPoints=10,this.shiftHalfStep=!1,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r),void 0!==i&&(this.nrPoints=i),void 0!==s&&(this.shiftHalfStep=s),void 0!==n&&(this.removeStartPoint=n),void 0!==o&&(this.removeEndPoint=o)}},e.WireAlongParamDto=class{constructor(e,t,r){this.isU=!0,this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.param=r)}},e.WiresAlongParamsDto=class{constructor(e,t,r){this.isU=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==r&&(this.params=r)}},e.DataOnUVDto=class{constructor(e,t,r){this.paramU=.5,this.paramV=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.paramU=t),void 0!==r&&(this.paramV=r)}},e.DataOnUVsDto=class{constructor(e,t){this.paramsUV=[[.5,.5]],void 0!==e&&(this.shape=e),void 0!==t&&(this.paramsUV=t)}},e.PolygonDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolygonsDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polygons=e),void 0!==t&&(this.returnCompound=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolylinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.returnCompound=t)}},e.SquareDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.RectangleDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i)}},e.LPolygonDto=class{constructor(e,t,r,i,n,o,a,c){this.widthFirst=1,this.lengthFirst=2,this.widthSecond=.5,this.lengthSecond=2,this.align=s.outside,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.widthFirst=e),void 0!==t&&(this.lengthFirst=t),void 0!==r&&(this.widthSecond=r),void 0!==i&&(this.lengthSecond=i),void 0!==n&&(this.align=n),void 0!==o&&(this.rotation=o),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}},e.BoxDto=class{constructor(e,t,r,i,s){this.width=1,this.length=2,this.height=3,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.center=i),void 0!==s&&(this.originOnCenter=s)}},e.CubeDto=class{constructor(e,t,r){this.size=1,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==r&&(this.originOnCenter=r)}},e.BoxFromCornerDto=class{constructor(e,t,r,i){this.width=1,this.length=2,this.height=3,this.corner=[0,0,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==r&&(this.height=r),void 0!==i&&(this.corner=i)}},e.SphereDto=class{constructor(e,t){this.radius=1,this.center=[0,0,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t)}},e.ConeDto=class{constructor(e,t,r,i,s,n){this.radius1=2,this.radius2=1,this.height=2,this.angle=360,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius1=e),void 0!==t&&(this.radius2=t),void 0!==r&&(this.height=r),void 0!==i&&(this.angle=i),void 0!==s&&(this.center=s),void 0!==n&&(this.direction=n)}},e.LineDto=class{constructor(e,t){this.start=[0,0,0],this.end=[0,1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineWithExtensionsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,1,0],this.extensionStart=.1,this.extensionEnd=.1,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.extensionStart=r),void 0!==i&&(this.extensionEnd=i)}},e.LinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.returnCompound=t)}},e.ArcEdgeTwoPointsTangentDto=class{constructor(e,t,r){this.start=[0,0,0],this.tangentVec=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.tangentVec=t),void 0!==r&&(this.end=r)}},e.ArcEdgeCircleTwoPointsDto=class{constructor(e,t,r,i){this.start=[0,0,0],this.end=[0,0,1],this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.start=t),void 0!==r&&(this.end=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCircleTwoAnglesDto=class{constructor(e,t,r,i){this.alphaAngle1=0,this.alphaAngle2=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle1=t),void 0!==r&&(this.alphaAngle2=r),void 0!==i&&(this.sense=i)}},e.ArcEdgeCirclePointAngleDto=class{constructor(e,t,r,i){this.alphaAngle=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle=t),void 0!==i&&(this.sense=i)}},e.ArcEdgeThreePointsDto=class{constructor(e,t,r){this.start=[0,0,0],this.middle=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.middle=t),void 0!==r&&(this.end=r)}},e.CylinderDto=class{constructor(e,t,r,i,s,n){this.radius=1,this.height=2,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,this.originOnCenter=!1,void 0!==e&&(this.radius=e),void 0!==t&&(this.height=t),void 0!==r&&(this.center=r),void 0!==i&&(this.direction=i),void 0!==s&&(this.angle=s),void 0!==n&&(this.originOnCenter=n)}},e.CylindersOnLinesDto=class{constructor(e,t){void 0!==e&&(this.radius=e),void 0!==t&&(this.lines=t)}},e.FilletDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletShapesDto=class{constructor(e,t,r,i){this.radius=.1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.indexes=i)}},e.FilletEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r)}},e.FilletEdgesListOneRadiusDto=class{constructor(e,t,r){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radius=r)}},e.FilletEdgeVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.FilletEdgesVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusLists=r),void 0!==i&&(this.paramsULists=i)}},e.FilletEdgesSameVariableRadiusDto=class{constructor(e,t,r,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.radiusList=r),void 0!==i&&(this.paramsU=i)}},e.Fillet3DWiresDto=class{constructor(e,t,r,i,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==s&&(this.indexes=s)}},e.Fillet3DWireDto=class{constructor(e,t,r,i,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.radiusList=i),void 0!==s&&(this.indexes=s)}},e.ChamferDto=class{constructor(e,t,r,i){this.distance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.distanceList=r),void 0!==i&&(this.indexes=i)}},e.ChamferEdgesListDto=class{constructor(e,t,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.distanceList=r)}},e.ChamferEdgeDistAngleDto=class{constructor(e,t,r,i,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.angle=s)}},e.ChamferEdgeTwoDistancesDto=class{constructor(e,t,r,i,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.face=r),void 0!==i&&(this.distance1=i),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesTwoDistancesListsDto=class{constructor(e,t,r,i,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances1=i),void 0!==s&&(this.distances2=s)}},e.ChamferEdgesTwoDistancesDto=class{constructor(e,t,r,i,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance1=i),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesDistsAnglesDto=class{constructor(e,t,r,i,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distances=i),void 0!==s&&(this.angles=s)}},e.ChamferEdgesDistAngleDto=class{constructor(e,t,r,i,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==r&&(this.faces=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.angle=s)}},e.BSplineDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BSplinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bSplines=e),void 0!==t&&(this.returnCompound=t)}},e.WireFromTwoCirclesTanDto=class{constructor(e,t,r,i,s){this.keepLines=f.outside,this.circleRemainders=p.outside,this.tolerance=1e-7,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==r&&(this.keepLines=r),void 0!==i&&(this.circleRemainders=i),void 0!==s&&(this.tolerance=s)}},e.FaceFromMultipleCircleTanWiresDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.circles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.FaceFromMultipleCircleTanWireCollectionsDto=class{constructor(e,t,r,i){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.listsOfCircles=e),void 0!==t&&(this.combination=t),void 0!==r&&(this.unify=r),void 0!==i&&(this.tolerance=i)}},e.ZigZagBetweenTwoWiresDto=class{constructor(e,t,r,i,s,n){this.nrZigZags=20,this.divideByEqualDistance=!1,this.zigZagsPerEdge=!0,void 0!==e&&(this.wire1=e),void 0!==t&&(this.wire2=t),void 0!==r&&(this.nrZigZags=r),void 0!==i&&(this.inverse=i),void 0!==s&&(this.divideByEqualDistance=s),void 0!==n&&(this.zigZagsPerEdge=n)}},e.InterpolationDto=class{constructor(e,t,r){this.periodic=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.periodic=t),void 0!==r&&(this.tolerance=r)}},e.InterpolateWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.interpolations=e),void 0!==t&&(this.returnCompound=t)}},e.BezierDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BezierWeightsDto=class{constructor(e,t,r){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.weights=t),void 0!==r&&(this.closed=r)}},e.BezierWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bezierWires=e),void 0!==t&&(this.returnCompound=t)}},e.DivideDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.ProjectWireDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wire=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.ProjectPointsOnShapeDto=class{constructor(e,t,r,i){this.direction=[0,10,0],void 0!==e&&(this.points=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.projectionType=i)}},e.WiresToPointsDto=class{constructor(e,t,r,i,s,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==s&&(this.uTolerance=s),void 0!==n&&(this.minimumLength=n)}},e.EdgesToPointsDto=class{constructor(e,t,r,i,s,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==r&&(this.curvatureDeflection=r),void 0!==i&&(this.minimumOfPoints=i),void 0!==s&&(this.uTolerance=s),void 0!==n&&(this.minimumLength=n)}},e.ProjectWiresDto=class{constructor(e,t,r){this.direction=[0,1,0],void 0!==e&&(this.wires=e),void 0!==t&&(this.shape=t),void 0!==r&&(this.direction=r)}},e.DivideShapesDto=class{constructor(e,t,r,i){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.removeStartPoint=r),void 0!==i&&(this.removeEndPoint=i)}},e.DataOnGeometryAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t)}},e.DataOnGeometryesAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.param=t)}},e.PointInFaceDto=class{constructor(e,t,r,i){this.tEdgeParam=.5,this.distance2DParam=.5,void 0!==e&&(this.face=e),void 0!==t&&(this.edge=t),void 0!==r&&(this.tEdgeParam=r),void 0!==i&&(this.distance2DParam=i)}},e.PointsOnWireAtEqualLengthDto=class{constructor(e,t,r,i,s){this.length=.5,this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeFirst=i),void 0!==s&&(this.includeLast=s)}},e.PointsOnWireAtPatternOfLengthsDto=class{constructor(e,t,r,i,s){this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t),void 0!==r&&(this.tryNext=r),void 0!==i&&(this.includeLast=i),void 0!==s&&(this.includeLast=s)}},e.DataOnGeometryAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryesAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryAtLengthsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t)}},e.CircleDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.HexagonsInGridDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==s&&(this.flatTop=s),void 0!==n&&(this.extendTop=n),void 0!==o&&(this.extendBottom=o),void 0!==a&&(this.extendLeft=a),void 0!==c&&(this.extendRight=c),void 0!==h&&(this.scalePatternWidth=h),void 0!==l&&(this.scalePatternHeight=l),void 0!==d&&(this.filletPattern=d),void 0!==u&&(this.inclusionPattern=u)}},e.LoftDto=class{constructor(e,t){this.makeSolid=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t)}},e.LoftAdvancedDto=class{constructor(e,t,r,s,n,o,a,c,h,l,d,u){this.makeSolid=!1,this.closed=!1,this.periodic=!1,this.straight=!1,this.nrPeriodicSections=10,this.useSmoothing=!1,this.maxUDegree=3,this.tolerance=1e-7,this.parType=i.approxCentripetal,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t),void 0!==r&&(this.closed=r),void 0!==s&&(this.periodic=s),void 0!==n&&(this.straight=n),void 0!==o&&(this.nrPeriodicSections=o),void 0!==a&&(this.useSmoothing=a),void 0!==c&&(this.maxUDegree=c),void 0!==h&&(this.tolerance=h),void 0!==l&&(this.parType=l),void 0!==d&&(this.startVertex=d),void 0!==u&&(this.endVertex=u)}},e.OffsetDto=class{constructor(e,t,r,i){this.distance=.2,this.tolerance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.face=t),void 0!==r&&(this.distance=r),void 0!==i&&(this.tolerance=i)}},e.OffsetAdvancedDto=class{constructor(e,r,i,s,n,o){this.distance=.2,this.tolerance=.1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.face=r),void 0!==i&&(this.distance=i),void 0!==s&&(this.tolerance=s),void 0!==n&&(this.joinType=n),void 0!==o&&(this.removeIntEdges=o)}},e.RevolveDto=class{constructor(e,t,r,i){this.angle=360,this.direction=[0,1,0],this.copy=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.copy=i)}},e.ShapeShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.WiresOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t)}},e.PipeWiresCylindricalDto=class{constructor(e,t,r,i,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==s&&(this.forceApproxC1=s)}},e.PipeWireCylindricalDto=class{constructor(e,t,r,i,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.makeSolid=r),void 0!==i&&(this.trihedronEnum=i),void 0!==s&&(this.forceApproxC1=s)}},e.PipePolygonWireNGonDto=class{constructor(e,t,r,i,s,n){this.radius=.1,this.nrCorners=6,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.makeSolid=i),void 0!==s&&(this.trihedronEnum=s),void 0!==n&&(this.forceApproxC1=n)}},e.ExtrudeDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t)}},e.ExtrudeShapesDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.direction=t)}},e.SplitDto=class{constructor(e,t){this.localFuzzyTolerance=1e-4,this.nonDestructive=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.UnionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.DifferenceDto=class{constructor(e,t,r){this.keepEdges=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.keepEdges=r)}},e.IntersectionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.ShapeDto=class{constructor(e){void 0!==e&&(this.shape=e)}},e.MeshMeshIntersectionTwoShapesDto=class{constructor(e,t,r,i){this.precision1=.01,this.precision2=.01,void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t),void 0!==r&&(this.precision1=r),void 0!==i&&(this.precision2=i)}},e.MeshMeshesIntersectionOfShapesDto=class{constructor(e,t,r,i){this.precision=.01,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.precisionShapes=i)}},e.CompareShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.otherShape=t)}},e.FixSmallEdgesInWireDto=class{constructor(e,t,r){this.lockvtx=!1,this.precsmall=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.lockvtx=t),void 0!==r&&(this.precsmall=r)}},e.BasicShapeRepairDto=class{constructor(e,t,r,i){this.precision=.001,this.maxTolerance=.01,this.minTolerance=1e-4,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.maxTolerance=r),void 0!==i&&(this.minTolerance=i)}},e.FixClosedDto=class{constructor(e,t){this.precision=-.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t)}},e.ShapesWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.ShapeWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.tolerance=t)}},e.ShapeIndexDto=class{constructor(e,t){this.index=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.EdgeIndexDto=class{constructor(e,t){this.index=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.RotationExtrudeDto=class{constructor(e,t,r,i){this.height=1,this.angle=360,this.makeSolid=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.height=t),void 0!==r&&(this.angle=r),void 0!==i&&(this.makeSolid=i)}},e.ThickSolidByJoinDto=class{constructor(e,r,i,s,n,o,a,c){this.offset=1,this.tolerance=.001,this.intersection=!1,this.selfIntersection=!1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==r&&(this.shapes=r),void 0!==i&&(this.offset=i),void 0!==s&&(this.tolerance=s),void 0!==n&&(this.intersection=n),void 0!==o&&(this.selfIntersection=o),void 0!==a&&(this.joinType=a),void 0!==c&&(this.removeIntEdges=c)}},e.TransformDto=class{constructor(e,t,r,i,s){this.translation=[0,0,0],this.rotationAxis=[0,1,0],this.rotationAngle=0,this.scaleFactor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t),void 0!==r&&(this.rotationAxis=r),void 0!==i&&(this.rotationAngle=i),void 0!==s&&(this.scaleFactor=s)}},e.TransformShapesDto=class{constructor(e,t,r,i,s){this.translations=[[0,0,0]],this.rotationAxes=[[0,1,0]],this.rotationAngles=[0],this.scaleFactors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t),void 0!==r&&(this.rotationAxes=r),void 0!==i&&(this.rotationAngles=i),void 0!==s&&(this.scaleFactors=s)}},e.TranslateDto=class{constructor(e,t){this.translation=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t)}},e.TranslateShapesDto=class{constructor(e,t){this.translations=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t)}},e.AlignNormAndAxisDto=class{constructor(e,t,r,i,s,n,o){this.fromOrigin=[0,0,0],this.fromNorm=[1,0,0],this.fromAx=[0,0,1],this.toOrigin=[0,1,0],this.toNorm=[0,1,0],this.toAx=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromNorm=r),void 0!==i&&(this.fromAx=i),void 0!==s&&(this.toOrigin=s),void 0!==n&&(this.toNorm=n),void 0!==o&&(this.toAx=o)}},e.AlignDto=class{constructor(e,t,r,i,s){this.fromOrigin=[0,0,0],this.fromDirection=[0,0,1],this.toOrigin=[0,1,0],this.toDirection=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==r&&(this.fromDirection=r),void 0!==i&&(this.toOrigin=i),void 0!==s&&(this.toDirection=s)}},e.AlignShapesDto=class{constructor(e,t,r,i,s){this.fromOrigins=[[0,0,0]],this.fromDirections=[[0,0,1]],this.toOrigins=[[0,1,0]],this.toDirections=[[0,1,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.fromOrigins=t),void 0!==r&&(this.fromDirections=r),void 0!==i&&(this.toOrigins=i),void 0!==s&&(this.toDirections=s)}},e.MirrorDto=class{constructor(e,t,r){this.origin=[0,0,0],this.direction=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.direction=r)}},e.MirrorShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.directions=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.directions=r)}},e.MirrorAlongNormalDto=class{constructor(e,t,r){this.origin=[0,0,0],this.normal=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==r&&(this.normal=r)}},e.MirrorAlongNormalShapesDto=class{constructor(e,t,r){this.origins=[[0,0,0]],this.normals=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==r&&(this.normals=r)}},e.AlignAndTranslateDto=class{constructor(e,t,r){this.direction=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.center=r)}},e.UnifySameDomainDto=class{constructor(e,t,r,i){this.unifyEdges=!0,this.unifyFaces=!0,this.concatBSplines=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.unifyEdges=t),void 0!==r&&(this.unifyFaces=r),void 0!==i&&(this.concatBSplines=i)}},e.FilterFacesPointsDto=class{constructor(e,t,r,i,s,n,o,a,c,h){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,this.flatPointsArray=!0,void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==s&&(this.gapTolerance=s),void 0!==n&&(this.keepIn=n),void 0!==o&&(this.keepOn=o),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c),void 0!==h&&(this.flatPointsArray=h)}},e.FilterFacePointsDto=class{constructor(e,t,r,i,s,n,o,a,c){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.useBndBox=i),void 0!==s&&(this.gapTolerance=s),void 0!==n&&(this.keepIn=n),void 0!==o&&(this.keepOn=o),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c)}},e.FilterSolidPointsDto=class{constructor(e,t,r,i,s,n,o){this.tolerance=1e-4,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==r&&(this.tolerance=r),void 0!==i&&(this.keepIn=i),void 0!==s&&(this.keepOn=s),void 0!==n&&(this.keepOut=n),void 0!==o&&(this.keepUnknown=o)}},e.AlignAndTranslateShapesDto=class{constructor(e,t,r){this.directions=[[0,1,0]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.directions=t),void 0!==r&&(this.centers=r)}},e.RotateDto=class{constructor(e,t,r){this.axis=[0,0,1],this.angle=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.angle=r)}},e.RotateAroundCenterDto=class{constructor(e,t,r,i){this.angle=0,this.center=[0,0,0],this.axis=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.center=r),void 0!==i&&(this.axis=i)}},e.RotateShapesDto=class{constructor(e,t,r){this.angles=[0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.axes=t),void 0!==r&&(this.angles=r)}},e.RotateAroundCenterShapesDto=class{constructor(e,t,r,i){this.angles=[0],this.centers=[[0,0,0]],this.axes=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.angles=t),void 0!==r&&(this.centers=r),void 0!==i&&(this.axes=i)}},e.ScaleDto=class{constructor(e,t){this.factor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.factor=t)}},e.ScaleShapesDto=class{constructor(e,t){this.factors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.factors=t)}},e.Scale3DDto=class{constructor(e,t,r){this.scale=[1,1,1],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.scale=t),void 0!==r&&(this.center=r)}},e.Scale3DShapesDto=class{constructor(e,t,r){this.scales=[[1,1,1]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.scales=t),void 0!==r&&(this.centers=r)}},e.ShapeToMeshDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.ShapeFacesToPolygonPointsDto=class{constructor(e,t,r,i){this.precision=.01,this.adjustYtoZ=!1,this.reversedPoints=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.reversedPoints=i)}},e.ShapesToMeshesDto=class{constructor(e,t,r){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.precision=t),void 0!==r&&(this.adjustYtoZ=r)}},e.SaveStepDto=class{constructor(e,t,r,i){this.fileName="shape.step",this.adjustYtoZ=!1,this.tryDownload=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustYtoZ=r),void 0!==i&&(this.tryDownload=i)}},e.SaveStlDto=class{constructor(e,t,r,i,s,n){this.fileName="shape.stl",this.precision=.01,this.adjustYtoZ=!1,this.tryDownload=!0,this.binary=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.precision=r),void 0!==i&&(this.adjustYtoZ=i),void 0!==s&&(this.tryDownload=s),void 0!==n&&(this.binary=n)}},e.ImportStepIgesFromTextDto=class{constructor(e,t,r){this.fileType=n.step,this.adjustZtoY=!0,void 0!==e&&(this.text=e),void 0!==t&&(this.fileType=t),void 0!==r&&(this.adjustZtoY=r)}},e.ImportStepIgesDto=class{constructor(e,t){this.adjustZtoY=!0,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.adjustZtoY=t)}},e.LoadStepOrIgesDto=class{constructor(e,t,r){this.fileName="shape.igs",this.adjustZtoY=!0,void 0!==e&&(this.filetext=e),void 0!==t&&(this.fileName=t),void 0!==r&&(this.adjustZtoY=r)}},e.CompoundShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.ThisckSolidSimpleDto=class{constructor(e,t){this.offset=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t)}},e.Offset3DWireDto=class{constructor(e,t,r){this.offset=1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t),void 0!==r&&(this.direction=r)}},e.FaceFromWireDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.planar=t)}},e.FaceFromWireOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FacesFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.FaceFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FacesFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FaceFromWiresOnFaceDto=class{constructor(e,t,r){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==r&&(this.inside=r)}},e.SewDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.FaceIsoCurveAtParamDto=class{constructor(e,t,r){this.dir="u",void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t),void 0!==r&&(this.dir=r)}},e.DivideFaceToUVPointsDto=class{constructor(e,t,r,i){this.nrOfPointsU=10,this.nrOfPointsV=10,this.flat=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfPointsU=t),void 0!==r&&(this.nrOfPointsV=r),void 0!==i&&(this.flat=i)}},e.Geom2dEllipseDto=class{constructor(e,t,r,i,s){this.center=[0,0],this.direction=[1,0],this.radiusMinor=1,this.radiusMajor=2,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i),void 0!==s&&(this.sense=s)}},e.Geom2dCircleDto=class{constructor(e,t,r,i){this.center=[0,0],this.direction=[1,0],this.radius=1,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radius=r),void 0!==i&&(this.sense=i)}},e.ChristmasTreeDto=class{constructor(e,t,r,i,s,n,o,a,c,h){this.height=6,this.innerDist=1.5,this.outerDist=3,this.nrSkirts=5,this.trunkHeight=1,this.trunkWidth=1,this.half=!1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.innerDist=t),void 0!==r&&(this.outerDist=r),void 0!==i&&(this.nrSkirts=i),void 0!==s&&(this.trunkHeight=s),void 0!==n&&(this.trunkWidth=n),void 0!==o&&(this.half=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c),void 0!==h&&(this.direction=h)}},e.StarDto=class{constructor(e,t,r,i,s,n,o){this.center=[0,0,0],this.direction=[0,1,0],this.numRays=7,this.half=!1,void 0!==e&&(this.outerRadius=e),void 0!==t&&(this.innerRadius=t),void 0!==r&&(this.numRays=r),void 0!==i&&(this.center=i),void 0!==s&&(this.direction=s),void 0!==n&&(this.offsetOuterEdges=n),void 0!==o&&(this.half=o)}},e.ParallelogramDto=class{constructor(e,t,r,i,s,n){this.center=[0,0,0],this.direction=[0,1,0],this.aroundCenter=!0,this.width=2,this.height=1,this.angle=15,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.aroundCenter=r),void 0!==i&&(this.width=i),void 0!==s&&(this.height=s),void 0!==n&&(this.angle=n)}},e.Heart2DDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.rotation=0,this.sizeApprox=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.rotation=r),void 0!==i&&(this.sizeApprox=i)}},e.NGonWireDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.nrCorners=6,this.radius=1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.nrCorners=r),void 0!==i&&(this.radius=i)}},e.EllipseDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,1,0],this.radiusMinor=1,this.radiusMajor=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==r&&(this.radiusMinor=r),void 0!==i&&(this.radiusMajor=i)}},e.TextWiresDto=class{constructor(e,t,r,i,s,n,o,a,c,h,l,d){this.text="Hello World",this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=2,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.lineSpacing=s),void 0!==n&&(this.letterSpacing=n),void 0!==o&&(this.align=o),void 0!==a&&(this.extrudeOffset=a),void 0!==d&&(this.centerOnOrigin=d)}},e.GeomCylindricalSurfaceDto=class{constructor(e,t,r){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.Geom2dTrimmedCurveDto=class{constructor(e,t,r,i,s){this.u1=0,this.u2=1,this.sense=!0,this.adjustPeriodic=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.u1=t),void 0!==r&&(this.u2=r),void 0!==i&&(this.sense=i),void 0!==s&&(this.adjustPeriodic=s)}},e.Geom2dSegmentDto=class{constructor(e,t){this.start=[0,0],this.end=[1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.SliceDto=class{constructor(e,t,r){this.step=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.step=t),void 0!==r&&(this.direction=r)}},e.SliceInStepPatternDto=class{constructor(e,t,r){this.steps=[.1,.2],this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.steps=t),void 0!==r&&(this.direction=r)}},e.SimpleLinearLengthDimensionDto=class{constructor(e,t,r,i,s,n,o,a){this.offsetFromPoints=0,this.crossingSize=.2,this.decimalPlaces=2,this.labelSuffix="(cm)",this.labelSize=.1,this.labelOffset=.3,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromPoints=i),void 0!==s&&(this.crossingSize=s),void 0!==n&&(this.labelSuffix=n),void 0!==o&&(this.labelSize=o),void 0!==a&&(this.labelOffset=a)}},e.SimpleAngularDimensionDto=class{constructor(e,t,r,i,s,n,o,a,c,h){this.direction1=[1,0,0],this.direction2=[0,0,1],this.center=[0,0,0],this.radius=4,this.offsetFromCenter=.5,this.extraSize=0,this.decimalPlaces=2,this.labelSuffix="(deg)",this.labelSize=.1,this.labelOffset=.3,this.radians=!1,void 0!==e&&(this.direction1=e),void 0!==t&&(this.direction2=t),void 0!==r&&(this.center=r),void 0!==i&&(this.radius=i),void 0!==s&&(this.offsetFromCenter=s),void 0!==n&&(this.extraSize=n),void 0!==o&&(this.radians=o),void 0!==a&&(this.labelSuffix=a),void 0!==c&&(this.labelSize=c),void 0!==h&&(this.labelOffset=h)}},e.PinWithLabelDto=class{constructor(e,t,r,i,s,n,o){this.startPoint=[0,0,0],this.endPoint=[0,5,2],this.direction=[0,0,1],this.offsetFromStart=0,this.label="Pin",this.labelOffset=.3,this.labelSize=.1,void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.offsetFromStart=i),void 0!==s&&(this.label=s),void 0!==n&&(this.labelOffset=n),void 0!==o&&(this.labelSize=o)}}}(G||(G={})),function(e){let t;!function(e){e.left="left",e.center="center",e.right="right"}(t=e.horizontalAlignEnum||(e.horizontalAlignEnum={}))}(H||(H={}));class ne{constructor(e,t){this.occ=e,this.och=t}geom2dEllipse(e){const t=this.och.entitiesService.gpAx2d(e.center,e.direction),r=new this.occ.Geom2d_Ellipse_2(t,e.radiusMajor,e.radiusMinor,e.sense);return t.delete(),r}geom2dCircle(e){const t=this.och.entitiesService.gpAx2d(e.center,e.direction),r=new this.occ.Geom2d_Circle_2(t,e.radius,e.sense);return t.delete(),r}geom2dTrimmedCurve(e){const t=new this.occ.Handle_Geom2d_Curve_2(e.shape);return new this.occ.Geom2d_TrimmedCurve(t,e.u1,e.u2,e.sense,e.adjustPeriodic)}geom2dSegment(e){const t=this.och.entitiesService.gpPnt2d(e.start),r=this.och.entitiesService.gpPnt2d(e.end),i=new this.occ.GCE2d_MakeSegment_1(t,r),s=i.Value().get();return t.delete(),r.delete(),i.delete(),s}get2dPointFrom2dCurveOnParam(e){const t=e.shape.Value(e.param),r=[t.X(),t.Y()];return t.delete(),r}geomCircleCurve(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,G.typeSpecificityEnum.curve)}geomEllipseCurve(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,G.typeSpecificityEnum.curve)}}class oe{constructor(e,t){this.occ=e,this.och=t}cylindricalSurface(e){const t=this.och.entitiesService.gpAx3_4(e.center,e.direction),r=new this.occ.Geom_CylindricalSurface_1(t,e.radius);return t.delete(),r}surfaceFromFace(e){return this.och.surfaceFromFace(e)}}class ae{constructor(e,t){this.curves=new ne(e,t),this.surfaces=new oe(e,t)}}class ce{constructor(e,t){this.occ=e,this.och=t}makeEdgeFromGeom2dCurveAndSurface(e){return this.och.edgesService.makeEdgeFromGeom2dCurveAndSurface(e)}line(e){return this.och.edgesService.lineEdge(e)}arcThroughThreePoints(e){return this.och.edgesService.arcThroughThreePoints(e)}arcThroughTwoPointsAndTangent(e){return this.och.edgesService.arcThroughTwoPointsAndTangent(e)}arcFromCircleAndTwoPoints(e){return this.och.edgesService.arcFromCircleAndTwoPoints(e)}arcFromCircleAndTwoAngles(e){return this.och.edgesService.arcFromCircleAndTwoAngles(e)}arcFromCirclePointAndAngle(e){return this.och.edgesService.arcFromCirclePointAndAngle(e)}createCircleEdge(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,G.typeSpecificityEnum.edge)}createEllipseEdge(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,G.typeSpecificityEnum.edge)}removeInternalEdges(e){const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e.shape,!0,!0,!1);t.Build();const r=t.Shape();return t.delete(),r}getEdge(e){return this.och.shapeGettersService.getEdge(e)}edgesToPoints(e){return this.och.edgesService.edgesToPoints(e)}reversedEdge(e){const t=e.shape.Reversed(),r=this.och.converterService.getActualTypeOfShape(t);return t.delete(),r}pointOnEdgeAtParam(e){return this.och.edgesService.pointOnEdgeAtParam(e)}pointsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtParam({shape:t,param:e.param})))}tangentOnEdgeAtParam(e){return this.och.edgesService.tangentOnEdgeAtParam(e)}tangentsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtParam({shape:t,param:e.param})))}startPointOnEdge(e){return this.och.edgesService.startPointOnEdge(e)}startPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.startPointOnEdge({shape:e})))}endPointOnEdge(e){return this.och.edgesService.endPointOnEdge(e)}endPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.endPointOnEdge({shape:e})))}pointOnEdgeAtLength(e){return this.och.edgesService.pointOnEdgeAtLength(e)}pointsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtLength({shape:t,length:e.length})))}tangentOnEdgeAtLength(e){return this.och.edgesService.tangentOnEdgeAtLength(e)}tangentsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtLength({shape:t,length:e.length})))}divideEdgeByParamsToPoints(e){return this.och.edgesService.divideEdgeByParamsToPoints(e)}divideEdgesByParamsToPoints(e){return e.shapes.map((t=>this.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}divideEdgeByEqualDistanceToPoints(e){return this.och.edgesService.divideEdgeByEqualDistanceToPoints(e)}divideEdgesByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}isEdgeLinear(e){return this.och.edgesService.isEdgeLinear(e)}isEdgeCircular(e){return this.och.edgesService.isEdgeCircular(e)}getEdges(e){return this.och.shapeGettersService.getEdges(e)}getEdgesAlongWire(e){return this.och.edgesService.getEdgesAlongWire(e)}getCircularEdgesAlongWire(e){return this.och.edgesService.getCircularEdgesAlongWire(e)}getLinearEdgesAlongWire(e){return this.och.edgesService.getLinearEdgesAlongWire(e)}getEdgeLength(e){return this.och.edgesService.getEdgeLength(e)}getEdgeLengthsOfShape(e){return this.och.edgesService.getEdgeLengthsOfShape(e)}getEdgesLengths(e){return this.och.edgesService.getEdgesLengths(e)}getEdgeCenterOfMass(e){return this.och.geomService.getLinearCenterOfMass(e)}getEdgesCentersOfMass(e){return this.och.edgesService.getEdgesCentersOfMass(e)}getCornerPointsOfEdgesForShape(e){return this.och.edgesService.getCornerPointsOfEdgesForShape(e)}getCircularEdgeCenterPoint(e){return this.och.edgesService.getCircularEdgeCenterPoint(e)}getCircularEdgeRadius(e){return this.och.edgesService.getCircularEdgeRadius(e)}getCircularEdgePlaneDirection(e){return this.och.edgesService.getCircularEdgePlaneDirection(e)}constraintTanLinesFromTwoPtsToCircle(e){return this.och.edgesService.constraintTanLinesFromTwoPtsToCircle(e)}constraintTanLinesFromPtToCircle(e){return this.och.edgesService.constraintTanLinesFromPtToCircle(e)}constraintTanLinesOnTwoCircles(e){return this.och.edgesService.constraintTanLinesOnTwoCircles(e)}constraintTanCirclesOnTwoCircles(e){return this.och.edgesService.constraintTanCirclesOnTwoCircles(e)}constraintTanCirclesOnCircleAndPnt(e){return this.och.edgesService.constraintTanCirclesOnCircleAndPnt(e)}}class he{constructor(e,t){this.occ=e,this.och=t}createFaceFromWire(e){return this.och.facesService.createFaceFromWire(e)}createFaceFromWireOnFace(e){return this.och.facesService.createFaceFromWireOnFace(e)}createFacesFromWiresOnFace(e){return this.och.facesService.createFacesFromWiresOnFace(e)}createFaceFromWires(e){return this.och.facesService.createFaceFromWires(e)}createFacesFromWires(e){return this.och.facesService.createFacesFromWires(e)}createFaceFromWiresOnFace(e){return this.och.facesService.createFaceFromWiresOnFace(e)}faceFromSurface(e){return this.och.facesService.faceFromSurface(e)}faceFromSurfaceAndWire(e){return this.och.facesService.faceFromSurfaceAndWire(e)}getUMinBound(e){return this.och.facesService.getUMinBound(e)}getUMaxBound(e){return this.och.facesService.getUMaxBound(e)}getVMinBound(e){return this.och.facesService.getVMinBound(e)}getVMaxBound(e){return this.och.facesService.getVMaxBound(e)}subdivideToPointsControlled(e){return this.och.facesService.subdivideToPointsControlled(e)}subdivideToPoints(e){return this.och.facesService.subdivideToPoints(e)}subdivideToWires(e){return this.och.facesService.subdivideToWires(e)}subdivideToRectangleWires(e){return this.och.facesService.subdivideToRectangleWires(e)}subdivideToRectangleHoles(e){return this.och.facesService.subdivideToRectangleHoles(e)}subdivideToHexagonWires(e){return this.och.facesService.subdivideToHexagonWires(e)}subdivideToHexagonHoles(e){return this.och.facesService.subdivideToHexagonHoles(e)}subdivideToNormals(e){return this.och.facesService.subdivideToNormals(e)}subdivideToPointsOnParam(e){return this.och.facesService.subdivideToPointsOnParam(e)}wireAlongParam(e){return this.och.facesService.wireAlongParam(e)}wiresAlongParams(e){return this.och.facesService.wiresAlongParams(e)}subdivideToUVOnParam(e){return this.och.facesService.subdivideToUVOnParam(e)}subdivideToUV(e){return this.och.facesService.subdivideToUV(e)}uvOnFace(e){return this.och.facesService.uvOnFace(e)}pointsOnUVs(e){return this.och.facesService.pointsOnUVs(e)}normalsOnUVs(e){return this.och.facesService.normalsOnUVs(e)}pointOnUV(e){return this.och.facesService.pointOnUV(e)}normalOnUV(e){return this.och.facesService.faceNormalOnUV(e)}createPolygonFace(e){return this.och.facesService.createPolygonFace(e)}createCircleFace(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,G.typeSpecificityEnum.face)}hexagonsInGrid(e){const t=this.och.wiresService.hexagonsInGrid(e);return this.och.facesService.createFacesFromWires({shapes:t,planar:!0})}createEllipseFace(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,G.typeSpecificityEnum.face)}createSquareFace(e){return this.och.facesService.createSquareFace(e)}createRectangleFace(e){return this.och.facesService.createRectangleFace(e)}createFaceFromMultipleCircleTanWireCollections(e){return this.och.facesService.createFaceFromMultipleCircleTanWireCollections(e)}createFaceFromMultipleCircleTanWires(e){return this.och.facesService.createFaceFromMultipleCircleTanWires(e)}getFace(e){return this.och.shapeGettersService.getFace(e)}getFaces(e){return this.och.shapeGettersService.getFaces(e)}reversedFace(e){const t=e.shape.Reversed(),r=this.och.converterService.getActualTypeOfShape(t);return t.delete(),r}getFaceArea(e){return this.och.facesService.getFaceArea(e)}getFacesAreas(e){return this.och.facesService.getFacesAreas(e)}getFaceCenterOfMass(e){return this.och.facesService.getFaceCenterOfMass(e)}getFacesCentersOfMass(e){return this.och.facesService.getFacesCentersOfMass(e)}filterFacePoints(e){return this.och.facesService.filterFacePoints(e)}filterFacesPoints(e){let t=e.shapes.map((t=>this.och.facesService.filterFacePoints(Object.assign(Object.assign({},e),{shape:t}))));return e.flatPointsArray&&(t=t.flat()),t}}class le{constructor(e,t){this.occ=e,this.och=t}makeCompound(e){return this.och.converterService.makeCompound(e)}getShapesOfCompound(e){return this.och.shapeGettersService.getShapesOfCompound(e)}}class de{constructor(e,t){this.occ=e,this.och=t}vertexFromXYZ(e){return this.och.verticesService.vertexFromXYZ(e)}vertexFromPoint(e){return this.och.verticesService.vertexFromPoint(e)}verticesFromPoints(e){return this.och.verticesService.verticesFromPoints(e)}verticesCompoundFromPoints(e){return this.och.verticesService.verticesCompoundFromPoints(e)}getVertices(e){return this.och.verticesService.getVertices(e)}getVerticesAsPoints(e){return this.och.verticesService.getVerticesAsPoints(e)}verticesToPoints(e){return this.och.verticesService.verticesToPoints(e)}vertexToPoint(e){return this.och.verticesService.vertexToPoint(e)}projectPoints(e){return this.och.verticesService.projectPoints(e)}}class ue{constructor(e,t){this.occ=e,this.och=t}purgeInternalEdges(e){const t=new this.occ.TopOpeBRepTool_PurgeInternalEdges(e.shape,!0);if(t.Perform(),t.IsDone())return t.Shape();throw new Error("Could not purge internal edges for the shape")}unifySameDomain(e){const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e.shape,e.unifyEdges,e.unifyFaces,e.concatBSplines);return t.Build(),t.Shape()}isClosed(e){return e.shape.Closed_1()}isConvex(e){return e.shape.Convex_1()}isChecked(e){return e.shape.Checked_1()}isFree(e){return e.shape.Free_1()}isInfinite(e){return e.shape.Infinite_1()}isModified(e){return e.shape.Modified_1()}isLocked(e){return e.shape.Locked_1()}isNull(e){return e.shape.IsNull()}isEqual(e){return e.shape.IsEqual(e.otherShape)}isNotEqual(e){return e.shape.IsNotEqual(e.otherShape)}isPartner(e){return e.shape.IsPartner(e.otherShape)}isSame(e){return e.shape.IsSame(e.otherShape)}getOrientation(e){const t=e.shape.Orientation_1();let r;return t===this.occ.TopAbs_Orientation.TopAbs_FORWARD?r=G.topAbsOrientationEnum.forward:t===this.occ.TopAbs_Orientation.TopAbs_REVERSED?r=G.topAbsOrientationEnum.reversed:t===this.occ.TopAbs_Orientation.TopAbs_INTERNAL?r=G.topAbsOrientationEnum.internal:t===this.occ.TopAbs_Orientation.TopAbs_EXTERNAL&&(r=G.topAbsOrientationEnum.external),r}getShapeType(e){return this.och.enumService.getShapeTypeEnum(e.shape)}}class pe{constructor(e,t){this.occ=e,this.och=t}sewFaces(e){return this.och.shellsService.sewFaces(e)}isClosed(e){return this.occ.BRep_Tool.IsClosed_1(e.shape)}getShellSurfaceArea(e){return this.och.shellsService.getShellSurfaceArea(e)}}class fe{constructor(e,t){this.occ=e,this.och=t}fromClosedShell(e){return this.och.solidsService.fromClosedShell(e)}createBox(e){return this.och.solidsService.createBox(e)}createCube(e){return this.och.solidsService.createCube(e)}createBoxFromCorner(e){return this.och.solidsService.createBoxFromCorner(e)}createCylinder(e){return this.och.solidsService.createCylinder(e)}createCylindersOnLines(e){return this.och.solidsService.createCylindersOnLines(e)}createSphere(e){return this.och.solidsService.createSphere(e)}createCone(e){return this.och.solidsService.createCone(e)}getSolidSurfaceArea(e){return this.och.solidsService.getSolidSurfaceArea(e)}getSolidVolume(e){return this.och.solidsService.getSolidVolume(e)}getSolidsVolumes(e){return this.och.solidsService.getSolidsVolumes(e)}getSolidCenterOfMass(e){return this.och.solidsService.getSolidCenterOfMass(e)}getSolidsCentersOfMass(e){return this.och.solidsService.getSolidsCentersOfMass(e)}getSolids(e){return this.och.solidsService.getSolids(e)}filterSolidPoints(e){return this.och.solidsService.filterSolidPoints(e)}}class ve{constructor(e,t){this.occ=e,this.och=t}createPolygonWire(e){return this.och.wiresService.createPolygonWire(e)}createPolygons(e){const t=e.polygons.map((e=>this.createPolygonWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createPolylineWire(e){return this.och.wiresService.createPolylineWire(e)}createPolylines(e){const t=e.polylines.map((e=>this.createPolylineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createLineWire(e){return this.och.wiresService.createLineWire(e)}createLineWireWithExtensions(e){return this.och.wiresService.createLineWireWithExtensions(e)}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezier(e){return this.och.wiresService.createBezier(e)}createBezierWires(e){const t=e.bezierWires.map((e=>this.createBezier(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezierWeights(e){return this.och.wiresService.createBezierWeights(e)}interpolatePoints(e){return this.och.wiresService.interpolatePoints(e)}interpolateWires(e){const t=e.interpolations.map((e=>this.interpolatePoints(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}splitOnPoints(e){return this.och.wiresService.splitOnPoints(e)}combineEdgesAndWiresIntoAWire(e){return this.och.converterService.combineEdgesAndWiresIntoAWire(e)}createWireFromEdge(e){return this.och.wiresService.createWireFromEdge(e)}addEdgesAndWiresToWire(e){return this.och.wiresService.addEdgesAndWiresToWire(e)}createBSpline(e){return this.och.wiresService.createBSpline(e)}createBSplines(e){const t=e.bSplines.map((e=>this.createBSpline(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}hexagonsInGrid(e){return this.och.wiresService.hexagonsInGrid(e)}createZigZagBetweenTwoWires(e){return this.och.wiresService.createZigZagBetweenTwoWires(e)}divideWireByParamsToPoints(e){return this.och.wiresService.divideWireByParamsToPoints(e)}divideWiresByParamsToPoints(e){return e.shapes.map((t=>this.divideWireByParamsToPoints(Object.assign(Object.assign({},e),{shape:t}))))}divideWireByEqualDistanceToPoints(e){return this.och.wiresService.divideWireByEqualDistanceToPoints(e)}divideWiresByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideWireByEqualDistanceToPoints(Object.assign(Object.assign({},e),{shape:t}))))}pointOnWireAtParam(e){return this.och.wiresService.pointOnWireAtParam(e)}pointOnWireAtLength(e){return this.och.wiresService.pointOnWireAtLength(e)}pointsOnWireAtLengths(e){return this.och.wiresService.pointsOnWireAtLengths(e)}pointsOnWireAtEqualLength(e){return this.och.wiresService.pointsOnWireAtEqualLength(e)}pointsOnWireAtPatternOfLengths(e){return this.och.wiresService.pointsOnWireAtPatternOfLengths(e)}tangentOnWireAtParam(e){return this.och.wiresService.tangentOnWireAtParam(e)}tangentOnWireAtLength(e){return this.och.wiresService.tangentOnWireAtLength(e)}derivativesOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=new this.occ.GCPnts_AbscissaPoint_2(r,e.length,r.FirstParameter()),s=i.Parameter(),n=this.och.entitiesService.gpPnt([0,0,0]),o=this.och.entitiesService.gpVec([0,0,0]),a=this.och.entitiesService.gpVec([0,0,0]),c=this.och.entitiesService.gpVec([0,0,0]);r.D3(s,n,o,a,c);const h=[[o.X(),o.Y(),o.Z()],[a.X(),a.Y(),a.Z()],[c.X(),c.Y(),c.Z()]];return o.delete(),a.delete(),c.delete(),r.delete(),i.delete(),n.delete(),h}derivativesOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.och.entitiesService.gpPnt([0,0,0]),s=this.och.entitiesService.gpVec([0,0,0]),n=this.och.entitiesService.gpVec([0,0,0]),o=this.och.entitiesService.gpVec([0,0,0]),a=this.och.vecHelper.remap(e.param,0,1,r.FirstParameter(),r.LastParameter());r.D3(a,i,s,n,o);const c=[[s.X(),s.Y(),s.Z()],[n.X(),n.Y(),n.Z()],[o.X(),o.Y(),o.Z()]];return s.delete(),n.delete(),o.delete(),r.delete(),i.delete(),c}startPointOnWire(e){return this.och.wiresService.startPointOnWire(e)}midPointOnWire(e){return this.och.wiresService.midPointOnWire(e)}endPointOnWire(e){return this.och.wiresService.endPointOnWire(e)}createCircleWire(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,G.typeSpecificityEnum.wire)}createEllipseWire(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,G.typeSpecificityEnum.wire)}textWires(e){return this.och.wiresService.textWires(e)}textWiresWithData(e){return this.och.wiresService.textWiresWithData(e)}createSquareWire(e){return this.och.wiresService.createSquareWire(e)}createStarWire(e){return this.och.wiresService.createStarWire(e)}createChristmasTreeWire(e){return this.och.wiresService.createChristmasTreeWire(e)}createParallelogramWire(e){return this.och.wiresService.createParallelogramWire(e)}createHeartWire(e){return this.och.wiresService.createHeartWire(e)}createNGonWire(e){return this.och.wiresService.createNGonWire(e)}createRectangleWire(e){return this.och.wiresService.createRectangleWire(e)}createLPolygonWire(e){return this.och.wiresService.createLPolygonWire(e)}getWire(e){return this.och.shapeGettersService.getWire(e)}getWires(e){return this.och.shapeGettersService.getWires(e)}getWireLength(e){return this.och.wiresService.getWireLength(e)}getWiresLengths(e){return this.och.wiresService.getWiresLengths(e)}isWireClosed(e){return this.och.wiresService.isWireClosed(e)}getWireCenterOfMass(e){return this.och.wiresService.getWireCenterOfMass(e)}getWiresCentersOfMass(e){return e.shapes.map((e=>this.och.wiresService.getWireCenterOfMass({shape:e})))}reversedWire(e){return this.och.wiresService.reversedWire(e)}reversedWireFromReversedEdges(e){return this.och.wiresService.reversedWireFromReversedEdges(e)}placeWireOnFace(e){const t=e.wire,r=e.face,i=this.och.surfaceFromFace({shape:r});return this.och.wiresService.placeWire(t,i)}placeWiresOnFace(e){const t=e.wires,r=e.face,i=this.och.surfaceFromFace({shape:r});return t.map((e=>this.och.wiresService.placeWire(e,i)))}closeOpenWire(e){const t=e.shape,r=this.och.wiresService.startPointOnWire({shape:t}),i=this.och.wiresService.endPointOnWire({shape:t});if(this.och.vecHelper.vectorsTheSame(r,i,1e-7))return t;const s=this.createLineWire({start:i,end:r}),n=this.addEdgesAndWiresToWire({shape:t,shapes:[s]});return s.delete(),n}project(e){const t=e.wire,r=this.och.entitiesService.gpDir(e.direction),i=new this.occ.BRepProj_Projection_1(t,e.shape,r),s=i.Shape();return r.delete(),i.delete(),s}wiresToPoints(e){const t=this.getWires({shape:e.shape}),r=[];return t.forEach((t=>{const i=this.och.edgesService.edgesToPoints(Object.assign(Object.assign({},e),{shape:t})).flat(),s=this.och.vecHelper.removeConsecutiveDuplicates(i,!1);r.push(s)})),r}projectWires(e){const t=[];return e.wires.forEach((r=>{const i=this.och.entitiesService.gpDir(e.direction),s=new this.occ.BRepProj_Projection_1(r,e.shape,i),n=s.Shape();t.push(n),i.delete(),s.delete()})),t}createWireFromTwoCirclesTan(e){return this.och.wiresService.createWireFromTwoCirclesTan(e)}}class ge{constructor(e,t){this.vertex=new de(e,t),this.edge=new ce(e,t),this.wire=new ve(e,t),this.face=new he(e,t),this.shell=new pe(e,t),this.solid=new fe(e,t),this.compound=new le(e,t),this.shape=new ue(e,t)}}class me{constructor(e){this.occ=e}BRep_Tool_Range_1(e,t,r){return this.occ.BRep_Tool.Range_1(e,t,r)}BRep_Tool_Curve_2(e,t,r){return this.occ.BRep_Tool.Curve_2(e,t,r)}BRepTools_UVBounds_1(e,t,r,i,s){return this.occ.BRepTools.UVBounds_1(e,t,r,i,s)}}class Se{constructor(e){this.occ=e}forEachWire(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_WIRE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_WIRE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,this.occ.TopoDS.Wire_2(i.Current()));i.delete()}forEachEdge(e,t){const r={};let i=0;const s=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(s.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);s.More();s.Next()){const e=this.occ.TopoDS.Edge_1(s.Current()),n=e.HashCode(1e8);Object.prototype.hasOwnProperty.call(r,n)||(r[n]=i,i++,t(i,e))}return s.delete(),r}forEachEdgeAlongWire(e,t){const r={};let i=0;const s=new this.occ.BRepTools_WireExplorer_1;for(s.Init_1(e);s.More();s.Next()){const e=this.occ.TopoDS.Edge_1(s.Current()),n=e.HashCode(1e8);Object.prototype.hasOwnProperty.call(r,n)||(r[n]=i,i++,t(i,e))}return s.delete(),r}forEachFace(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_FACE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_FACE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,this.occ.TopoDS.Face_1(i.Current()));i.delete()}forEachShell(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_SHELL,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_SHELL,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,this.occ.TopoDS.Shell_1(i.Current()));i.delete()}forEachVertex(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,this.occ.TopoDS.Vertex_1(i.Current()));i.delete()}forEachSolid(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_SOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_SOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,this.occ.TopoDS.Solid_2(i.Current()));i.delete()}forEachCompound(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,i.Current());i.delete()}forEachCompSolid(e,t){let r=0;const i=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(i.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);i.More();i.Next())t(r++,i.Current());i.delete()}forEachShapeInCompound(e,t){let r=0;const i=new this.occ.TopoDS_Iterator_1;for(i.Initialize(e,!0,!0);i.More();i.Next())t(r++,i.Value());i.delete()}}class ye{constructor(e){this.occ=e}getShapeTypeEnum(e){let t=G.shapeTypeEnum.unknown;const r=e.ShapeType();return t=r===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?G.shapeTypeEnum.edge:r===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE?G.shapeTypeEnum.wire:r===this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX?G.shapeTypeEnum.vertex:r===this.occ.TopAbs_ShapeEnum.TopAbs_SOLID?G.shapeTypeEnum.solid:r===this.occ.TopAbs_ShapeEnum.TopAbs_SHELL?G.shapeTypeEnum.shell:r===this.occ.TopAbs_ShapeEnum.TopAbs_FACE?G.shapeTypeEnum.face:r===this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID?G.shapeTypeEnum.compSolid:r===this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND?G.shapeTypeEnum.compound:G.shapeTypeEnum.shape,t}getGccEntPositionFromEnum(e){let t=this.occ.GccEnt_Position.GccEnt_noqualifier;return t=e===G.gccEntPositionEnum.unqualified?this.occ.GccEnt_Position.GccEnt_unqualified:e===G.gccEntPositionEnum.enclosed?this.occ.GccEnt_Position.GccEnt_enclosed:e===G.gccEntPositionEnum.enclosing?this.occ.GccEnt_Position.GccEnt_enclosing:e===G.gccEntPositionEnum.outside?this.occ.GccEnt_Position.GccEnt_outside:(G.gccEntPositionEnum.noqualifier,this.occ.GccEnt_Position.GccEnt_noqualifier),t}getTopAbsStateEnum(e){let t=G.topAbsStateEnum.unknown;return t=e===this.occ.TopAbs_State.TopAbs_IN?G.topAbsStateEnum.in:e===this.occ.TopAbs_State.TopAbs_OUT?G.topAbsStateEnum.out:e===this.occ.TopAbs_State.TopAbs_ON?G.topAbsStateEnum.on:G.topAbsStateEnum.unknown,t}convertFourSidesStrictEnumToTwoCircleInclusionEnum(e){return e===G.fourSidesStrictEnum.inside?G.twoCircleInclusionEnum.inside:e===G.fourSidesStrictEnum.outside?G.twoCircleInclusionEnum.outside:e===G.fourSidesStrictEnum.insideOutside?G.twoCircleInclusionEnum.insideOutside:e===G.fourSidesStrictEnum.outsideInside?G.twoCircleInclusionEnum.outsideInside:G.twoCircleInclusionEnum.none}getGeomFillTrihedronEnumOCCTValue(e){return e===G.geomFillTrihedronEnum.isConstantNormal?this.occ.GeomFill_Trihedron.GeomFill_IsConstantNormal:e===G.geomFillTrihedronEnum.isCorrectedFrenet?this.occ.GeomFill_Trihedron.GeomFill_IsCorrectedFrenet:e===G.geomFillTrihedronEnum.isDarboux?this.occ.GeomFill_Trihedron.GeomFill_IsDarboux:e===G.geomFillTrihedronEnum.isDiscreteTrihedron?this.occ.GeomFill_Trihedron.GeomFill_IsDiscreteTrihedron:e===G.geomFillTrihedronEnum.isFixed?this.occ.GeomFill_Trihedron.GeomFill_IsFixed:e===G.geomFillTrihedronEnum.isFrenet?this.occ.GeomFill_Trihedron.GeomFill_IsFrenet:e===G.geomFillTrihedronEnum.isGuideAC?this.occ.GeomFill_Trihedron.GeomFill_IsGuideAC:e===G.geomFillTrihedronEnum.isGuideACWithContact?this.occ.GeomFill_Trihedron.GeomFill_IsGuideACWithContact:e===G.geomFillTrihedronEnum.isGuidePlan?this.occ.GeomFill_Trihedron.GeomFill_IsGuidePlan:e===G.geomFillTrihedronEnum.isGuidePlanWithContact?this.occ.GeomFill_Trihedron.GeomFill_IsGuidePlanWithContact:this.occ.GeomFill_Trihedron.GeomFill_IsConstantNormal}}class be{constructor(e){this.occ=e}getActualTypeOfShape(e){let t=e;return t=e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?this.occ.TopoDS.Edge_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE?this.occ.TopoDS.Wire_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX?this.occ.TopoDS.Vertex_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SOLID?this.occ.TopoDS.Solid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SHELL?this.occ.TopoDS.Shell_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_FACE?this.occ.TopoDS.Face_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID?this.occ.TopoDS.CompSolid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND?this.occ.TopoDS.Compound_1(e):e,t}combineEdgesAndWiresIntoAWire(e){if(void 0===e.shapes)throw Error("Shapes are not defined");const t=new this.occ.BRepBuilderAPI_MakeWire_1;if(e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?t.Add_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE&&t.Add_2(e)})),t.IsDone()){this.occ.BRepLib.BuildCurves3d_1(t.Wire(),1e-7,this.occ.GeomAbs_Shape.GeomAbs_C1,14,0);const e=t.Wire();return t.delete(),e}{let e;const r=t.Error();throw t.delete(),r===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire?e="Wire is disconnected and can not be constructed":r===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire?e="Wire is empty and can not be constructed":r===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire?e="Wire is non manifold and can not be constructed":r===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone&&(e="Wire is done"),new Error(e)}}vertexToPoint(e){const t=this.occ.BRep_Tool.Pnt(e.shape),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}getGeomCurveFromEdge(e,t,r){const i=e.Location_1();return this.occ.BRep_Tool.Curve_1(e,i,t,r).get()}makeCompound(e){const t=new this.occ.TopoDS_Compound,r=new this.occ.BRep_Builder;return r.MakeCompound(t),e.shapes.forEach((e=>{const i=new this.occ.BRepBuilderAPI_Copy_2(e,!0,!1),s=i.Shape();r.Add(t,s),i.delete(),s.delete()})),r.delete(),t}makeCompoundIfNeeded(e,t){if(t){const t=this.makeCompound({shapes:e});return e.forEach((e=>e.delete())),t}return e}}class we{constructor(e){this.occ=e}createCircle(e,t,r,i){const s=this.gcMakeCircle(t,r,e);if(i===G.typeSpecificityEnum.curve)return s;{const e=this.bRepBuilderAPIMakeEdge(s);if(i===G.typeSpecificityEnum.edge)return e;{const t=this.bRepBuilderAPIMakeWire(e);if(i===G.typeSpecificityEnum.wire)return e.delete(),t;if(i===G.typeSpecificityEnum.face)return this.bRepBuilderAPIMakeFaceFromWire(t,!0)}}return s}createEllipse(e,t,r,i,s){const n=this.gcMakeEllipse(r,i,e,t);if(s===G.typeSpecificityEnum.curve)return n;{const e=this.bRepBuilderAPIMakeEdge(n);if(s===G.typeSpecificityEnum.edge)return e;{const t=this.bRepBuilderAPIMakeWire(e);if(s===G.typeSpecificityEnum.wire)return e.delete(),t;if(s===G.typeSpecificityEnum.face)return this.bRepBuilderAPIMakeFaceFromWire(t,!0)}}return n}makeVertex(e){const t=this.gpPnt(e),r=new this.occ.BRepBuilderAPI_MakeVertex(t),i=r.Vertex();return t.delete(),r.delete(),i}gpPnt2d(e){return new this.occ.gp_Pnt2d_3(e[0],e[1])}gpPnt(e){return new this.occ.gp_Pnt_3(e[0],e[1],e[2])}gpVec(e){return new this.occ.gp_Vec_4(e[0],e[1],e[2])}gpXYZ(e){return new this.occ.gp_XYZ_2(e[0],e[1],e[2])}gpVec2d(e){return new this.occ.gp_Vec2d_4(e[0],e[1])}gpDir(e){return new this.occ.gp_Dir_4(e[0],e[1],e[2])}gpDir2d(e){return new this.occ.gp_Dir2d_4(e[0],e[1])}gcMakeCircle(e,t,r){const i=new this.occ.GC_MakeCircle_2(this.gpAx2(e,t),r),s=i.Value().get();return i.delete(),s}gcMakeEllipse(e,t,r,i){const s=this.gpAx2(e,t),n=new this.occ.GC_MakeEllipse_2(s,i,r);if(n.IsDone()){const e=n.Value().get();return n.delete(),s.delete(),e}throw new Error("Ellipse could not be created.")}bRepBuilderAPIMakeEdge(e){const t=this.castToHandleGeomCurve(e),r=new this.occ.BRepBuilderAPI_MakeEdge_24(t),i=r.Edge();return r.delete(),t.delete(),i}bRepBuilderAPIMakeWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e),r=t.Wire();return t.delete(),r}bRepBuilderAPIMakeShell(e){const t=this.occ.BRep_Tool.Surface_2(e),r=new this.occ.BRepBuilderAPI_MakeShell_2(t,!1),i=r.Shell();return r.delete(),t.delete(),i}bRepBuilderAPIMakeFaceFromWires(e,t,r,i){let s;const n=[];return e.forEach((e=>{if(n.length>0){const t=new this.occ.BRepBuilderAPI_MakeFace_22(n[n.length-1],e);n.push(t.Face()),t.delete()}else{let s;if(r){const t=this.occ.BRep_Tool.Surface_2(r);s=new this.occ.BRepBuilderAPI_MakeFace_21(t,e,i)}else s=new this.occ.BRepBuilderAPI_MakeFace_15(e,t);n.push(s.Face()),s.delete()}})),n.length>0&&(s=n.pop(),n.forEach((e=>e.delete()))),s}bRepBuilderAPIMakeFaceFromWire(e,t){const r=new this.occ.BRepBuilderAPI_MakeFace_15(e,t),i=r.Face();return r.delete(),i}bRepBuilderAPIMakeFacesFromWiresOnFace(e,t,r){const i=this.occ.BRep_Tool.Surface_2(e),s=t.map((e=>this.bRepBuilderAPIMakeFaceFromWireOnSurface(i,e,r)));return i.delete(),s}bRepBuilderAPIMakeFaceFromWireOnFace(e,t,r){const i=this.occ.BRep_Tool.Surface_2(e),s=this.bRepBuilderAPIMakeFaceFromWireOnSurface(i,t,r);return i.delete(),s}bRepBuilderAPIMakeFaceFromWireOnSurface(e,t,r){const i=new this.occ.BRepBuilderAPI_MakeFace_21(e,t,r),s=i.Face();return i.delete(),s}bRepBuilderAPIMakeFaceFromSurface(e,t){const r=new this.occ.Handle_Geom_Surface_2(e),i=new this.occ.BRepBuilderAPI_MakeFace_8(r,t),s=i.Face();return i.delete(),r.delete(),s}bRepBuilderAPIMakeFaceFromSurfaceAndWire(e,t,r){const i=new this.occ.Handle_Geom_Surface_2(e),s=new this.occ.BRepBuilderAPI_MakeFace_21(i,t,r),n=s.Face();return s.delete(),i.delete(),n}bRepPrimAPIMakeSphere(e,t,r){const i=this.gpAx2(e,t),s=new this.occ.BRepPrimAPI_MakeSphere_9(i,r),n=s.Shape();return s.delete(),i.delete(),n}gpAx3_3(e,t,r){return new this.occ.gp_Ax3_3(this.gpPnt(e),this.gpDir(t),this.gpDir(r))}gpAx3_4(e,t){return new this.occ.gp_Ax3_4(this.gpPnt(e),this.gpDir(t))}gpAx2(e,t){return new this.occ.gp_Ax2_3(this.gpPnt(e),this.gpDir(t))}gpAx2FromTwoVectors(e,t,r){return new this.occ.gp_Ax2_2(this.gpPnt(e),this.gpDir(t),this.gpDir(r))}gpAx1(e,t){return new this.occ.gp_Ax1_2(this.gpPnt(e),this.gpDir(t))}gpAx2d(e,t){const r=this.gpPnt2d(e),i=this.gpDir2d(t);return new this.occ.gp_Ax2d_2(r,i)}gpAx22d(e,t,r){const i=this.gpPnt2d(e),s=this.gpDir2d(t),n=this.gpDir2d(r),o=new this.occ.gp_Ax22d_2(i,s,n);return s.delete(),n.delete(),i.delete(),o}gpPln(e,t){const r=this.gpPnt(e),i=this.gpDir(t),s=new this.occ.gp_Pln_3(r,i);return r.delete(),i.delete(),s}bRepPrimAPIMakeCylinder(e,t,r,i,s){const n=this.gpAx2(e,t),o=new this.occ.BRepPrimAPI_MakeCylinder_4(n,r,i,s),a=o.Shape();return o.delete(),n.delete(),a}bRepPrimAPIMakeCylinderBetweenPoints(e,t,r){const i=this.gpPnt(e),s=this.gpPnt(t),n=new this.occ.gp_Vec_5(i,s),o=n.Magnitude(),a=this.gpAx2(e,[n.X(),n.Y(),n.Z()]),c=new this.occ.BRepPrimAPI_MakeCylinder_3(a,r,o),h=c.Shape();return c.delete(),a.delete(),i.delete(),s.delete(),n.delete(),h}bRepPrimAPIMakeBox(e,t,r,i){const s=this.gpPnt([-e/2+i[0],-r/2+i[1],-t/2+i[2]]),n=new this.occ.BRepPrimAPI_MakeBox_3(s,e,r,t),o=n.Shape();return n.delete(),s.delete(),o}castToHandleGeomCurve(e){return new this.occ.Handle_Geom_Curve_2(e)}}class Ee{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u){this.occ=e,this.enumService=t,this.entitiesService=r,this.converterService=i,this.booleansService=s,this.shapeGettersService=n,this.edgesService=o,this.transformsService=a,this.vecHelper=c,this.wiresService=h,this.facesService=l,this.solidsService=d,this.shellsService=u}loftAdvanced(e){if(e.periodic&&!e.closed)throw new Error("Cant construct periodic non closed loft.");const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,e.straight,e.tolerance),r=[],i=[];if(e.startVertex){const r=this.entitiesService.makeVertex(e.startVertex);t.AddVertex(r),i.push(r)}if(e.closed&&!e.periodic)e.shapes.push(e.shapes[0]);else if(e.closed&&e.periodic){const i=[];e.shapes.forEach((t=>{this.enumService.getShapeTypeEnum(t)===G.shapeTypeEnum.edge&&(t=this.entitiesService.bRepBuilderAPIMakeWire(t));const r=this.wiresService.divideWireByParamsToPoints({shape:t,nrOfDivisions:e.nrPeriodicSections,removeStartPoint:!1,removeEndPoint:!1});i.push(r)}));for(let s=0;s<=e.nrPeriodicSections;s++){const n=i.map((e=>e[s])),o=this.wiresService.interpolatePoints({points:n,tolerance:e.tolerance,periodic:!0});t.AddWire(o),r.push(o)}}e.periodic||e.shapes.forEach((e=>{t.AddWire(e)}));const s=[];if(e.endVertex){const r=this.entitiesService.makeVertex(e.endVertex);t.AddVertex(r),s.push(r)}let n;e.useSmoothing&&t.SetSmoothing(e.useSmoothing),e.maxUDegree&&t.SetMaxDegree(e.maxUDegree),e.parType===G.approxParametrizationTypeEnum.approxChordLength?n=this.occ.Approx_ParametrizationType.Approx_ChordLength:e.parType===G.approxParametrizationTypeEnum.approxCentripetal?n=this.occ.Approx_ParametrizationType.Approx_Centripetal:e.parType===G.approxParametrizationTypeEnum.approxIsoParametric&&(n=this.occ.Approx_ParametrizationType.Approx_IsoParametric),n&&t.SetParType(n),t.CheckCompatibility(!1);const o=t.Shape(),a=this.converterService.getActualTypeOfShape(o);return o.delete(),t.delete(),r.forEach((e=>e.delete())),i.forEach((e=>e.delete())),s.forEach((e=>e.delete())),a}closestPointsBetweenTwoShapes(e,t){const r=new this.occ.Message_ProgressRange_1,i=new this.occ.BRepExtrema_DistShapeShape_2(e,t,this.occ.Extrema_ExtFlag.Extrema_ExtFlag_MIN,this.occ.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad,r),s=new this.occ.Message_ProgressRange_1;if(i.Perform(s),i.IsDone()&&i.NbSolution()>0){const e=i.PointOnShape1(1),t=i.PointOnShape2(1);return[[e.X(),e.Y(),e.Z()],[t.X(),t.Y(),t.Z()]]}throw new Error("Closest points could not be found.")}closestPointsOnShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>e[1]))}closestPointsOnShapesFromPoints(e){const t=e.points.map((e=>this.entitiesService.makeVertex(e))),r=[];return e.shapes.forEach((e=>{const i=t.map((t=>this.closestPointsBetweenTwoShapes(t,e)));r.push(...i.map((e=>e[1])))})),r}distancesToShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>this.vecHelper.distanceBetweenPoints(e[0],e[1])))}boundingBoxOfShape(e){const t=new this.occ.Bnd_Box_1;this.occ.BRepBndLib.Add(e.shape,t,!1);const r=t.CornerMin(),i=t.CornerMax(),s=[r.X(),r.Y(),r.Z()],n=[i.X(),i.Y(),i.Z()],o=[(r.X()+i.X())/2,(r.Y()+i.Y())/2,(r.Z()+i.Z())/2],a=[i.X()-r.X(),i.Y()-r.Y(),i.Z()-r.Z()];return t.delete(),{min:s,max:n,center:o,size:a}}boundingBoxShapeOfShape(e){const t=this.boundingBoxOfShape(e);return this.solidsService.createBoxFromCorner({corner:t.min,width:t.size[0],height:t.size[1],length:t.size[2]})}boundingSphereOfShape(e){const t=this.boundingBoxOfShape(e),r=t.center;return{center:r,radius:this.vecHelper.distanceBetweenPoints(t.min,r)}}boundingSphereShapeOfShape(e){const t=this.boundingSphereOfShape(e);return this.solidsService.createSphere({center:t.center,radius:t.radius})}loft(e){const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,!1,1e-6);e.shapes.forEach((e=>{this.enumService.getShapeTypeEnum(e)===G.shapeTypeEnum.edge&&(e=this.entitiesService.bRepBuilderAPIMakeWire(e)),t.AddWire(e)})),t.CheckCompatibility(!1);const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);return r.delete(),t.delete(),i}offset(e){return this.offsetAdv({shape:e.shape,face:e.face,distance:e.distance,tolerance:e.tolerance,joinType:G.joinTypeEnum.arc,removeIntEdges:!1})}offsetAdv(e){if(e.tolerance||(e.tolerance=.1),0===e.distance)return e.shape;let t;const r=this.getJoinType(e.joinType),i=this.occ.BRepOffset_Mode.BRepOffset_Skin,s=[];if(this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.wire||this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.edge){let n;this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.edge?(n=this.entitiesService.bRepBuilderAPIMakeWire(e.shape),s.push(n)):n=e.shape;try{t=new this.occ.BRepOffsetAPI_MakeOffset_1,e.face?t.Init_1(e.face,r,!1):t.Init_2(r,!1),t.AddWire(n);const i=new this.occ.Message_ProgressRange_1;t.Build(i),t.Perform(e.distance,0)}catch(s){t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(n,e.distance,e.tolerance,i,!1,!1,r,e.removeIntEdges,new this.occ.Message_ProgressRange_1)}}else{const s=e.shape;t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(s,e.distance,e.tolerance,i,!1,!1,r,e.removeIntEdges,new this.occ.Message_ProgressRange_1)}const n=t.Shape(),o=this.converterService.getActualTypeOfShape(n);return n.delete(),t&&t.delete(),s.forEach((e=>e.delete())),o}offset3DWire(e){const t=this.extrude({shape:e.shape,direction:e.direction}),r=this.makeThickSolidSimple({shape:t,offset:e.offset}),i=this.shapeGettersService.getEdges({shape:e.shape}).length,s=(4*i+2)/2-1,n=s-i+1,o=[];let a;this.shapeGettersService.getFaces({shape:r}).forEach(((e,t)=>{if(t>=n&&t<=s){const t=this.shapeGettersService.getEdges({shape:e})[2];o.push(t)}}));try{a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:o}),a=a.Reversed(),a=this.converterService.getActualTypeOfShape(a)}catch(e){return a=o,a}return a}extrudeShapes(e){return e.shapes.map((t=>{const r=this.extrude({shape:t,direction:e.direction}),i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}))}extrude(e){const t=new this.occ.gp_Vec_4(e.direction[0],e.direction[1],e.direction[2]),r=new this.occ.BRepPrimAPI_MakePrism_1(e.shape,t,!1,!0),i=r.Shape();return r.delete(),t.delete(),i}splitShapeWithShapes(e){const t=new this.occ.BOPAlgo_Builder_1;let r;if(t.SetNonDestructive(e.nonDestructive),t.SetFuzzyValue(e.localFuzzyTolerance),t.AddArgument(e.shape),e.shapes.forEach((e=>{t.AddArgument(e)})),t.Perform(new this.occ.Message_ProgressRange_1),e.nonDestructive){const e=t.Shape();r=this.shapeGettersService.getShapesOfCompound({shape:e})}else{const i=t.Modified(e.shape),s=this.occ.BitByBitDev.BitListOfShapesToCompound(i);r=this.shapeGettersService.getShapesOfCompound({shape:s})}return r}revolve(e){let t;if(e.angle||(e.angle=360),e.direction||(e.direction=[0,0,1]),e.angle>=360){const r=new this.occ.gp_Pnt_3(0,0,0),i=new this.occ.gp_Dir_4(e.direction[0],e.direction[1],e.direction[2]),s=new this.occ.gp_Ax1_2(r,i),n=new this.occ.BRepPrimAPI_MakeRevol_2(e.shape,s,e.copy);t=n.Shape(),n.delete(),r.delete(),i.delete(),s.delete()}else{const r=new this.occ.gp_Pnt_3(0,0,0),i=new this.occ.gp_Dir_4(e.direction[0],e.direction[1],e.direction[2]),s=new this.occ.gp_Ax1_2(r,i),n=new this.occ.BRepPrimAPI_MakeRevol_1(e.shape,s,.0174533*e.angle,e.copy);t=n.Shape(),n.delete(),r.delete(),i.delete(),s.delete()}const r=this.converterService.getActualTypeOfShape(t);return t.delete(),r}rotatedExtrude(e){const t=this.transformsService.translate({translation:[0,e.height,0],shape:e.shape}),r=this.transformsService.rotate({axis:[0,1,0],angle:e.angle,shape:t}),i=this.wiresService.createBSpline({points:[[0,0,0],[0,e.height,0]],closed:!1}),s=[];for(let t=0;t<=30;t++){const r=t/30;s.push([20*Math.sin(r*e.angle*.0174533),e.height*r,20*Math.cos(r*e.angle*.0174533)])}const n=this.wiresService.createBSpline({points:s,closed:!1}),o=new this.occ.BRepOffsetAPI_MakePipeShell(i);o.SetMode_5(n,!0,this.occ.BRepFill_TypeOfContact.BRepFill_NoContact),o.Add_1(e.shape,!1,!1),o.Add_1(r,!1,!1),o.Build(new this.occ.Message_ProgressRange_1),(e.makeSolid||void 0===e.makeSolid)&&o.MakeSolid();const a=o.Shape(),c=this.converterService.getActualTypeOfShape(a);return a.delete(),o.delete(),n.delete(),i.delete(),r.delete(),t.delete(),c}pipe(e){const t=new this.occ.BRepOffsetAPI_MakePipeShell(e.shape);e.shapes.forEach((e=>{t.Add_1(e,!1,!1)})),t.Build(new this.occ.Message_ProgressRange_1),t.MakeSolid();const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);return r.delete(),t.delete(),i}pipePolylineWireNGon(e){const t=e.shape,r=this.shapeGettersService.getEdge({shape:t,index:1}),i=this.edgesService.pointOnEdgeAtParam({shape:r,param:0}),s=this.edgesService.tangentOnEdgeAtParam({shape:r,param:0}),n=this.wiresService.createNGonWire({radius:e.radius,center:i,direction:s,nrCorners:e.nrCorners}),o=this.wiresService.reversedWire({shape:n});let a=o;e.makeSolid&&(a=this.facesService.createFaceFromWire({shape:o,planar:!0}));const c=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),h=new this.occ.BRepOffsetAPI_MakePipe_2(t,a,c,!!e.forceApproxC1);h.Build(new this.occ.Message_ProgressRange_1);const l=h.Shape(),d=this.converterService.getActualTypeOfShape(l);return l.delete(),h.delete(),n.delete(),o.delete(),d}pipeWireCylindrical(e){const t=e.shape,r=this.shapeGettersService.getEdges({shape:t})[0],i=this.edgesService.startPointOnEdge({shape:r}),s=this.edgesService.tangentOnEdgeAtParam({shape:r,param:0}),n=this.entitiesService.createCircle(e.radius,i,s,e.makeSolid?G.typeSpecificityEnum.face:G.typeSpecificityEnum.wire),o=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),a=new this.occ.BRepOffsetAPI_MakePipe_2(t,n,o,!!e.forceApproxC1);a.Build(new this.occ.Message_ProgressRange_1);const c=a.Shape(),h=this.converterService.getActualTypeOfShape(c);return c.delete(),a.delete(),n.delete(),h}pipeWiresCylindrical(e){return e.shapes.map((t=>this.pipeWireCylindrical({shape:t,radius:e.radius,makeSolid:e.makeSolid,trihedronEnum:e.trihedronEnum,forceApproxC1:e.forceApproxC1})))}makeThickSolidSimple(e){const t=new this.occ.BRepOffsetAPI_MakeThickSolid;t.MakeThickSolidBySimple(e.shape,e.offset),t.Build(new this.occ.Message_ProgressRange_1);const r=t.Shape(),i=this.converterService.getActualTypeOfShape(r);let s=i;if(e.offset>0){const e=this.shapeGettersService.getFaces({shape:i}).map((e=>e.Reversed()));s=this.shellsService.sewFaces({shapes:e,tolerance:1e-7}),i.delete()}return t.delete(),r.delete(),s}makeThickSolidByJoin(e){const t=new this.occ.TopTools_ListOfShape_1;e.shapes.forEach((e=>{t.Append_1(e)}));const r=new this.occ.BRepOffsetAPI_MakeThickSolid,i=this.getJoinType(e.joinType);r.MakeThickSolidByJoin(e.shape,t,e.offset,e.tolerance,this.occ.BRepOffset_Mode.BRepOffset_Skin,e.intersection,e.selfIntersection,i,e.removeIntEdges,new this.occ.Message_ProgressRange_1);const s=r.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),r.delete(),t.delete(),n}getJoinType(e){let t;switch(e){case G.joinTypeEnum.arc:t=this.occ.GeomAbs_JoinType.GeomAbs_Arc;break;case G.joinTypeEnum.intersection:t=this.occ.GeomAbs_JoinType.GeomAbs_Intersection;break;case G.joinTypeEnum.tangent:t=this.occ.GeomAbs_JoinType.GeomAbs_Tangent}return t}getBRepOffsetMode(e){let t;switch(e){case G.bRepOffsetModeEnum.skin:t=this.occ.BRepOffset_Mode.BRepOffset_Skin;break;case G.bRepOffsetModeEnum.pipe:t=this.occ.BRepOffset_Mode.BRepOffset_Pipe;break;case G.bRepOffsetModeEnum.rectoVerso:t=this.occ.BRepOffset_Mode.BRepOffset_RectoVerso}return t}slice(e){if(e.step<=0)throw new Error("Step needs to be positive.");const{bbox:t,transformedShape:r}=this.createBBoxAndTransformShape(e.shape,e.direction),i=[];if(!t.IsThin(1e-4)){const{minY:s,maxY:n,maxDist:o}=this.computeBounds(t),a=[];for(let t=s;t<n;t+=e.step){const e=this.facesService.createSquareFace({size:o,center:[0,t,0],direction:[0,1,0]});a.push(e)}this.applySlices(r,a,e.direction,i)}return this.converterService.makeCompound({shapes:i})}sliceInStepPattern(e){if(!e.steps||0===e.steps.length)throw new Error("Steps must be provided with at elast one positive value");const{bbox:t,transformedShape:r}=this.createBBoxAndTransformShape(e.shape,e.direction),i=[];if(!t.IsThin(1e-4)){const{minY:s,maxY:n,maxDist:o}=this.computeBounds(t),a=[];let c=0;for(let t=s;t<n;t+=e.steps[c]){const r=this.facesService.createSquareFace({size:o,center:[0,t,0],direction:[0,1,0]});a.push(r),void 0===e.steps[c+1]?c=0:c++}this.applySlices(r,a,e.direction,i)}return this.converterService.makeCompound({shapes:i})}createBBoxAndTransformShape(e,t){const r=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:t,toOrigin:[0,0,0],toDirection:[0,1,0]}),i=new this.occ.Bnd_Box_1;return this.occ.BRepBndLib.Add(r,i,!1),{bbox:i,transformedShape:r}}computeBounds(e){const t=e.CornerMin(),r=e.CornerMax(),i=t.Y(),s=r.Y(),n=t.X(),o=r.X(),a=t.Z(),c=o-n,h=r.Z()-a;let l=c>=h?c:h;return l*=1.2,{minY:i,maxY:s,maxDist:l}}applySlices(e,t,r,i){const s=[];if(this.enumService.getShapeTypeEnum(e)===G.shapeTypeEnum.solid)s.push(e);else{const t=this.shapeGettersService.getSolids({shape:e});s.push(...t)}if(0===s.length)throw new Error("No solids found to slice.");s.forEach((e=>{const s=new G.IntersectionDto;s.keepEdges=!0,s.shapes=[e];const n=this.converterService.makeCompound({shapes:t});s.shapes.push(n),this.booleansService.intersection(s).forEach((e=>{if(e&&!e.IsNull()){const t=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:r});i.push(t)}}))}))}}class xe{constructor(e,t,r,i){this.occ=e,this.converterService=t,this.entitiesService=r,this.vecHelper=i}alignAndTranslate(e){const t=this.align({shape:e.shape,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:e.direction}),r=this.translate({shape:t,translation:e.center});return t.delete(),r}scale3d(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),r=new this.occ.gp_GTrsf_1,i=e.scale,s=new this.occ.gp_Mat_2(i[0],0,0,0,i[1],0,0,0,i[2]);let n;r.SetVectorialPart(s);try{const i=new this.occ.BRepBuilderAPI_GTransform_2(t,r,!1),s=new this.occ.Message_ProgressRange_1;i.Build(s);const o=i.Shape();n=this.translate({shape:o,translation:e.center}),i.delete(),o.delete(),s.delete()}catch(e){throw new Error("Could not scale the shape")}return t.delete(),r.delete(),s.delete(),n}translate(e){const t=new this.occ.gp_Trsf_1,r=new this.occ.gp_Vec_4(e.translation[0],e.translation[1],e.translation[2]);t.SetTranslation_1(r);const i=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=i.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),t.delete(),i.delete(),r.delete(),n}mirror(e){const t=new this.occ.gp_Trsf_1,r=this.entitiesService.gpAx1(e.origin,e.direction);t.SetMirror_2(r);const i=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=i.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),i.delete(),t.delete(),r.delete(),n}mirrorAlongNormal(e){const t=new this.occ.gp_Trsf_1,r=this.entitiesService.gpAx2(e.origin,e.normal);t.SetMirror_3(r);const i=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=i.Shape(),n=this.converterService.getActualTypeOfShape(s);return r.delete(),s.delete(),i.delete(),t.delete(),n}rotate(e){let t;if(0!==e.angle){const t=new this.occ.gp_Trsf_1,r=new this.occ.gp_Vec_4(e.axis[0],e.axis[1],e.axis[2]),i=new this.occ.gp_Dir_4(e.axis[0],e.axis[1],e.axis[2]),s=new this.occ.gp_Pnt_3(0,0,0),n=new this.occ.gp_Ax1_2(s,i);t.SetRotation_1(n,this.vecHelper.degToRad(e.angle));const o=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),a=o.Shape(),c=this.converterService.getActualTypeOfShape(a);return a.delete(),r.delete(),i.delete(),s.delete(),n.delete(),o.delete(),t.delete(),c}t=e.shape;const r=this.converterService.getActualTypeOfShape(t);return 0!==e.angle&&t.delete(),r}align(e){const t=new this.occ.gp_Trsf_1,r=this.entitiesService.gpAx3_4(e.fromOrigin,e.fromDirection),i=this.entitiesService.gpAx3_4(e.toOrigin,e.toDirection);t.SetDisplacement(r,i);const s=new this.occ.TopLoc_Location_2(t),n=e.shape.Moved(s,!1);t.delete(),r.delete(),i.delete();const o=this.converterService.getActualTypeOfShape(n);return n.delete(),o}alignNormAndAxis(e){const t=new this.occ.gp_Trsf_1,r=this.entitiesService.gpAx3_3(e.fromOrigin,e.fromNorm,e.fromAx),i=this.entitiesService.gpAx3_3(e.toOrigin,e.toNorm,e.toAx);t.SetDisplacement(r,i);const s=new this.occ.TopLoc_Location_2(t),n=e.shape.Moved(s,!1);t.delete(),r.delete(),i.delete();const o=this.converterService.getActualTypeOfShape(n);return n.delete(),o}}class Te{constructor(e,t){this.occ=e,this.shapeGettersService=t}intersection(e){if(e.shapes.length<2)throw new Error("Intersection requires 2 or more shapes to be given");const t=e.shapes[0];let r=[];for(let i=1;i<e.shapes.length;i++){let s;const n=new this.occ.Message_ProgressRange_1,o=new this.occ.BRepAlgoAPI_Common_3(t,e.shapes[i],n),a=new this.occ.Message_ProgressRange_1;o.HasGenerated()&&(o.Build(a),s=o.Shape(),r.push(s)),n.delete(),o.delete(),a.delete()}return!e.keepEdges&&r.length>0&&(r=r.map((e=>{const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e,!0,!0,!1);t.Build();const r=t.Shape();return t.delete(),r}))),r}difference(e){let t=e.shape;const r=e.shapes;for(let e=0;e<r.length;e++){r[e]&&!r[e].IsNull()||console.error("Tool in Difference is null!");const i=new this.occ.Message_ProgressRange_1,s=new this.occ.BRepAlgoAPI_Cut_3(t,r[e],i),n=new this.occ.Message_ProgressRange_1;s.Build(n),t=s.Shape(),i.delete(),n.delete(),s.delete()}if(!e.keepEdges){const e=new this.occ.ShapeUpgrade_UnifySameDomain_2(t,!0,!0,!1);e.Build();const r=e.Shape();t.delete(),t=r,e.delete()}return 1===this.shapeGettersService.getNumSolidsInCompound(t)&&(t=this.shapeGettersService.getSolidFromCompound(t,0)),t}union(e){let t=e.shapes[0];for(let r=0;r<e.shapes.length;r++){const i=new this.occ.Message_ProgressRange_1,s=new this.occ.BRepAlgoAPI_Fuse_3(t,e.shapes[r],i),n=new this.occ.Message_ProgressRange_1;s.Build(n),t=s.Shape(),i.delete(),n.delete(),s.delete()}if(!e.keepEdges){const e=new this.occ.ShapeUpgrade_UnifySameDomain_2(t,!0,!0,!1);e.Build(),t=e.Shape(),e.delete()}return t}}class Pe{constructor(e,t,r){this.occ=e,this.enumService=t,this.iteratorService=r}getNumSolidsInCompound(e){if(!e||this.enumService.getShapeTypeEnum(e)!==G.shapeTypeEnum.compound||e.IsNull())throw new Error("Shape is not a compound or is null.");let t=0;return this.iteratorService.forEachSolid(e,(()=>{t++})),t}getSolidFromCompound(e,t){if(!e||e.ShapeType()>this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID||e.IsNull())return console.error("Not a compound shape!"),e;t||(t=0);let r=e,i=0;return this.iteratorService.forEachSolid(e,((e,s)=>{e===t&&(r=this.occ.TopoDS.Solid_1(s)),i++})),0===i&&console.error("NO SOLIDS FOUND IN SHAPE!"),r.hash=e.hash+1,r}getEdges(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachEdge(e.shape,((e,r)=>{t.push(r)})),t}getEdge(e){if(!e.shape||e.shape.ShapeType&&e.shape.ShapeType()>this.occ.TopAbs_ShapeEnum.TopAbs_WIRE||e.shape.IsNull())throw new Error("Edge can not be found for shape that is not provided or is of incorrect type");e.index||(e.index=0);let t={},r=!1;if(this.iteratorService.forEachEdge(e.shape,((i,s)=>{i===e.index&&(t=s,r=!0)})),r)return t;throw new Error(`Edge can not be found for shape on index ${e.index}`)}getWires(e){const t=[];return this.iteratorService.forEachWire(e.shape,((e,r)=>{t.push(r)})),t}getWire(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===G.shapeTypeEnum.wire||t===G.shapeTypeEnum.edge||t===G.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");let r;if(e.index||(e.index=0),this.iteratorService.forEachWire(e.shape,((t,i)=>{t===e.index&&(r=this.occ.TopoDS.Wire_1(i))})),!r)throw Error("Wire not found");return r}getFaces(e){const t=[];return this.iteratorService.forEachFace(e.shape,((e,r)=>{t.push(r)})),t}getSolids(e){const t=[];return this.iteratorService.forEachSolid(e.shape,((e,r)=>{t.push(r)})),t}getFace(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===G.shapeTypeEnum.wire||t===G.shapeTypeEnum.edge||t===G.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");e.index||(e.index=0);let r={},i=0;if(this.iteratorService.forEachFace(e.shape,((t,s)=>{t===e.index&&(r=this.occ.TopoDS.Face_1(s)),i++})),i<e.index||e.index<0)throw new Error("Face index is out of range");return r}getVertices(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.vertex)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachVertex(e.shape,((e,r)=>{t.push(r)})),t}getShapesOfCompound(e){const t=[];return this.iteratorService.forEachShapeInCompound(e.shape,((e,r)=>{t.push(r)})),t}}class Ce{constructor(e,t,r,i,s,n,o,a,c,h){this.occ=e,this.occRefReturns=t,this.shapeGettersService=r,this.entitiesService=i,this.iteratorService=s,this.converterService=n,this.enumService=o,this.geomService=a,this.transformsService=c,this.vecHelper=h}getCornerPointsOfEdgesForShape(e){const t=this.shapeGettersService.getEdges(e);let r=[];return t.forEach((e=>{const t={current:0},i={current:0},s=this.occRefReturns.BRep_Tool_Curve_2(e,t,i);try{const e=s.get();if(e){const s=e.Value(t.current),n=e.Value(i.current),o=[s.X(),s.Y(),s.Z()],a=[n.X(),n.Y(),n.Z()];s.delete(),n.delete(),r.push(o),r.push(a)}}catch(e){console.log(e)}})),r.length>0&&(r=this.vecHelper.removeAllDuplicateVectors(r)),r}getCircularEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeCircular({shape:e})))}getLinearEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeLinear({shape:e})))}getEdgesAlongWire(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===G.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[],r=this.fixEdgeOrientationsAlongWire(e);return this.iteratorService.forEachEdgeAlongWire(r,((e,r)=>{t.push(r)})),t}fixEdgeOrientationsAlongWire(e){const t=[];return this.iteratorService.forEachEdgeAlongWire(e.shape,((e,r)=>{t.push(r)})),this.converterService.combineEdgesAndWiresIntoAWire({shapes:t})}arcThroughThreePoints(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpPnt(e.middle),i=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_4(t,r,i),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),r.delete(),i.delete(),s.delete(),n.delete(),o.delete(),a}arcThroughTwoPointsAndTangent(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpVec(e.tangentVec),i=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_5(t,r,i),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),r.delete(),i.delete(),s.delete(),n.delete(),o.delete(),a}arcFromCircleAndTwoAngles(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.vecHelper.degToRad(e.alphaAngle1),i=this.vecHelper.degToRad(e.alphaAngle2),s=new this.occ.GC_MakeArcOfCircle_1(t,r,i,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),s.delete(),n.delete(),o.delete(),a}arcFromCirclePointAndAngle(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.vecHelper.degToRad(e.alphaAngle),i=this.entitiesService.gpPnt(e.point),s=new this.occ.GC_MakeArcOfCircle_2(t,i,r,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),s.delete(),i.delete(),n.delete(),o.delete(),a}lineEdge(e){const t=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpPnt(e.end),i=new this.occ.GC_MakeSegment_1(t,r).Value(),s=i.get(),n=new this.occ.Handle_Geom_Curve_2(s),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return o.delete(),n.delete(),t.delete(),r.delete(),i.delete(),s.delete(),a}getEdgeLength(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e.shape),r=t.Wire(),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.curveLength({shape:i});return i.delete(),r.delete(),t.delete(),s}getEdgeLengthsOfShape(e){return this.shapeGettersService.getEdges({shape:e.shape}).map((e=>this.getEdgeLength({shape:e})))}getEdgesLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getEdgeLength({shape:e})))}getEdgesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.geomService.getLinearCenterOfMass({shape:e})))}edgesToPoints(e){const t=this.enumService.getShapeTypeEnum(e.shape);let r=[];r=t===G.shapeTypeEnum.edge?[e.shape]:t===G.shapeTypeEnum.wire?this.getEdgesAlongWire({shape:e.shape}):this.shapeGettersService.getEdges({shape:e.shape});const i=[],s=r.map((e=>this.startPointOnEdge({shape:e})));return r.forEach((t=>{const r=[],s=new this.occ.TopLoc_Location_1,n=new this.occ.BRepAdaptor_Curve_2(t),o=new this.occ.GCPnts_TangentialDeflection_2(n,e.angularDeflection,e.curvatureDeflection,e.minimumOfPoints,e.uTolerance,e.minimumLength),a=o.NbPoints(),c=[];for(let e=0;e<a;e++){const t=o.Value(e+1);r.push([t.X(),t.Y(),t.Z()]),c.push(t)}i.push(r),c.forEach((e=>e.delete())),s.delete(),n.delete(),o.delete()})),i.forEach(((e,t)=>{const r=this.vecHelper.distanceBetweenPoints(e[0],s[t]);this.vecHelper.distanceBetweenPoints(s[t],e[e.length-1])<r&&e.reverse()})),i}startPointOnEdge(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.pointOnCurveAtParam({shape:i,param:0});return i.delete(),s}endPointOnEdge(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.pointOnCurveAtParam({shape:i,param:1});return i.delete(),s}makeEdgeFromGeom2dCurveAndSurfaceBounded(e,t,r){const i=new this.occ.Handle_Geom2d_Curve_2(e.curve),s=new this.occ.Handle_Geom_Surface_2(e.surface),n=new this.occ.BRepBuilderAPI_MakeEdge_31(i,s,t,r),o=n.Shape(),a=this.converterService.getActualTypeOfShape(o);return o.delete(),n.delete(),a}makeEdgeFromGeom2dCurveAndSurface(e){const t=new this.occ.Handle_Geom2d_Curve_2(e.curve),r=new this.occ.Handle_Geom_Surface_2(e.surface),i=new this.occ.BRepBuilderAPI_MakeEdge_30(t,r),s=i.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),i.delete(),n}constraintTanLinesFromTwoPtsToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),i=new G.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle;const s=this.transformsService.align(i),n=this.entitiesService.makeVertex(e.point1);i.shape=n;const o=this.transformsService.align(i);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.entitiesService.makeVertex(e.point2);i.shape=h;const l=this.transformsService.align(i);h.delete();const d=this.converterService.vertexToPoint({shape:l});l.delete();const u=this.entitiesService.gpPnt2d([d[0],d[1]]),p=this.getGpCircle2dFromEdge({shape:s});s.delete();const f=new this.occ.GccEnt_QualifiedCirc(p,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified));p.delete();const v=new this.occ.GccAna_Lin2d2Tan_2(f,c,e.tolerance),g=new this.occ.GccAna_Lin2d2Tan_2(f,u,e.tolerance);f.delete();const m=[];for(let e=1;e<=v.NbSolutions();e++){const s=v.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:a});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=o;const c=this.transformsService.align(i);m.push(c),s.delete(),n.delete(),o.delete()}v.delete();const S=[];for(let e=1;e<=g.NbSolutions();e++){const s=g.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:d});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=o;const a=this.transformsService.align(i);S.push(a),s.delete(),n.delete(),o.delete()}g.delete();let y=[];if(y=e.positionResult===G.positionResultEnum.all?[...m,...S]:e.positionResult===G.positionResultEnum.keepSide1?[m[1],S[0]]:e.positionResult===G.positionResultEnum.keepSide2?[m[0],S[1]]:[...m,...S],2===y.length&&e.circleRemainder!==G.circleInclusionEnum.none){let t,r;e.positionResult===G.positionResultEnum.keepSide2?e.circleRemainder===G.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:y[1]}),r=this.startPointOnEdge({shape:y[0]})):e.circleRemainder===G.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:y[0]}),r=this.startPointOnEdge({shape:y[1]})):e.positionResult===G.positionResultEnum.keepSide1&&(e.circleRemainder===G.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:y[0]}),r=this.startPointOnEdge({shape:y[1]})):e.circleRemainder===G.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:y[1]}),r=this.startPointOnEdge({shape:y[0]})));const i=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:r,sense:!0});y.splice(1,0,i)}return y}constraintTanLinesFromPtToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),i=new G.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle;const s=this.transformsService.align(i),n=this.entitiesService.makeVertex(e.point);i.shape=n;const o=this.transformsService.align(i);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified));h.delete();const d=new this.occ.GccAna_Lin2d2Tan_2(l,c,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const s=d.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:a});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=o;const c=this.transformsService.align(i);u.push(c),s.delete(),n.delete(),o.delete()}d.delete();let p=[];if(p=e.positionResult===G.positionResultEnum.all?[...u]:e.positionResult===G.positionResultEnum.keepSide1?[u[0]]:e.positionResult===G.positionResultEnum.keepSide2?[u[1]]:[...u],2===p.length&&e.circleRemainder!==G.circleInclusionEnum.none){let t,r;e.circleRemainder===G.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:p[1]}),r=this.startPointOnEdge({shape:p[0]})):e.circleRemainder===G.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:p[0]}),r=this.startPointOnEdge({shape:p[1]}));const i=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:r,sense:!0});p.splice(1,0,i)}return p}constraintTanLinesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),r=this.getCircularEdgeCenterPoint({shape:e.circle1}),i=new G.AlignDto;i.fromDirection=t,i.toDirection=[0,0,1],i.fromOrigin=r,i.toOrigin=[0,0,0],i.shape=e.circle1;const s=this.transformsService.align(i);i.shape=e.circle2;const n=this.transformsService.align(i),o=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:n});s.delete(),n.delete();const c=new this.occ.GccEnt_QualifiedCirc(o,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified));o.delete(),a.delete();const l=new this.occ.GccAna_Lin2d2Tan_3(c,h,e.tolerance),d=new this.occ.GccAna_Lin2d2Tan_3(h,c,e.tolerance);c.delete(),h.delete();const u=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);u.push(t)}l.delete();const p=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);p.push(t)}let f;d.delete(),4===p.length?f=[p[2],p[1],p[0],p[3]]:2===p.length&&(f=[p[1],p[0]]);const v=[];for(let e=0;e<u.length;e++){const s=u[e],n=f[e],o=s.Location(),a=[o.X(),o.Y(),0],c=n.Location(),h=[c.X(),c.Y(),0],l=this.lineEdge({start:a,end:h});i.fromDirection=[0,0,1],i.toDirection=t,i.fromOrigin=[0,0,0],i.toOrigin=r,i.shape=l;const d=this.transformsService.align(i);v.push(d),l.delete(),s.delete(),n.delete(),o.delete(),c.delete()}let g=[];if(g=e.positionResult===G.positionResultEnum.all?[...v]:e.positionResult===G.positionResultEnum.keepSide1&&4===v.length?[v[1],v[3]]:e.positionResult===G.positionResultEnum.keepSide2&&4===v.length?[v[0],v[2]]:e.positionResult===G.positionResultEnum.keepSide1&&2===v.length?[]:e.positionResult===G.positionResultEnum.keepSide2&&2===v.length?[v[0],v[1]]:[...v],2===g.length&&e.circleRemainders!==G.twoCircleInclusionEnum.none){let t,r,i,s;e.circleRemainders===G.twoCircleInclusionEnum.outside?(e.positionResult===G.positionResultEnum.keepSide2||e.positionResult===G.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})):e.positionResult===G.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})),i=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===G.twoCircleInclusionEnum.inside?(e.positionResult===G.positionResultEnum.keepSide2||e.positionResult===G.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})):e.positionResult===G.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})),i=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]})):e.circleRemainders===G.twoCircleInclusionEnum.insideOutside?(e.positionResult===G.positionResultEnum.keepSide2||e.positionResult===G.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})):e.positionResult===G.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})),i=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===G.twoCircleInclusionEnum.outsideInside&&(e.positionResult===G.positionResultEnum.keepSide2||e.positionResult===G.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),r=this.startPointOnEdge({shape:g[0]})):e.positionResult===G.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),r=this.startPointOnEdge({shape:g[1]})),i=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]}));const n=this.arcFromCircleAndTwoPoints({circle:e.circle1,start:t,end:r,sense:!0}),o=this.arcFromCircleAndTwoPoints({circle:e.circle2,start:i,end:s,sense:!0});g.unshift(n),g.push(o)}return g}constraintTanCirclesOnCircleAndPnt(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),r=this.getCircularEdgeCenterPoint({shape:e.circle}),{alignOpt:i,circle1Aligned:s}=this.alignCircle(t,r,e.circle),n=this.entitiesService.makeVertex(e.point);i.shape=n;const o=this.transformsService.align(i);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified));h.delete();const d=new this.occ.GccAna_Circ2d2TanRad_3(l,c,e.radius,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);u.push(t)}d.delete();const p=[];for(let e=0;e<u.length;e++){const s=u[e],n=this.reconstructCircleAndAlignBack(u,s,i,t,r);p.push(n)}return p}alignCircle(e,t,r){const i=new G.AlignDto;return i.fromDirection=e,i.toDirection=[0,0,1],i.fromOrigin=t,i.toOrigin=[0,0,0],i.shape=r,{alignOpt:i,circle1Aligned:this.transformsService.align(i)}}constraintTanCirclesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),r=this.getCircularEdgeCenterPoint({shape:e.circle1}),{alignOpt:i,circle1Aligned:s}=this.alignCircle(t,r,e.circle1);i.shape=e.circle2;const n=this.transformsService.align(i),o=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:n});s.delete(),n.delete();const c=new this.occ.GccEnt_QualifiedCirc(o,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(G.gccEntPositionEnum.unqualified));o.delete(),a.delete();const l=new this.occ.GccAna_Circ2d2TanRad_1(c,h,e.radius,e.tolerance);c.delete(),h.delete();const d=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);d.push(t)}l.delete();const u=[];for(let e=0;e<d.length;e++){const s=d[e],n=this.reconstructCircleAndAlignBack(d,s,i,t,r);u.push(n)}return u}divideEdgeByParamsToPoints(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:i}),i.FirstParameter(),i.LastParameter());return i.delete(),r.delete(),s}divideEdgeByEqualDistanceToPoints(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.divideCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r.delete(),s}pointOnEdgeAtParam(e){const t=e.shape,{uMin:r,uMax:i}=this.getEdgeBounds(t),s=this.converterService.getGeomCurveFromEdge(t,r,i),n=this.entitiesService.gpPnt([0,0,0]),o=this.vecHelper.remap(e.param,0,1,r,i);if(s){s.D0(o,n);const e=[n.X(),n.Y(),n.Z()];return n.delete(),e}}reconstructCircleAndAlignBack(e,t,r,i,s){const n=t.Location(),o=[n.X(),n.Y(),0],a=this.entitiesService.createCircle(t.Radius(),o,[0,0,1],G.typeSpecificityEnum.edge);r.fromDirection=[0,0,1],r.toDirection=i,r.fromOrigin=[0,0,0],r.toOrigin=s,r.shape=a;const c=this.transformsService.align(r);return a.delete(),t.delete(),n.delete(),c}arcFromCircleAndTwoPoints(e){const t=this.getGpCircleFromEdge({shape:e.circle}),r=this.entitiesService.gpPnt(e.start),i=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_3(t,r,i,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),r.delete(),i.delete(),s.delete(),n.delete(),o.delete(),a}getCircularEdgePlaneDirection(e){const t=this.getGpCircleFromEdge(e),r=t.Position(),i=r.Direction(),s=[i.X(),i.Y(),i.Z()];return i.delete(),r.delete(),t.delete(),s}getCircularEdgeCenterPoint(e){const t=this.getGpCircleFromEdge(e),r=t.Location(),i=[r.X(),r.Y(),r.Z()];return r.delete(),t.delete(),i}getCircularEdgeRadius(e){const t=this.getGpCircleFromEdge(e),r=t.Radius();return t.delete(),r}getGpCircleFromEdge(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{const e=t.Circle();return t.delete(),e}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}getGpCircle2dFromEdge(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{const e=t.Circle(),r=e.Position(),i=e.Location(),s=this.entitiesService.gpAx2d([i.X(),i.Y()],[1,0]),n=e.Radius(),o=new this.occ.gp_Circ2d_2(s,n,!0);return t.delete(),e.delete(),r.delete(),i.delete(),s.delete(),o}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}tangentOnEdgeAtParam(e){const t=e.shape,{uMin:r,uMax:i}=this.getEdgeBounds(t),s=this.converterService.getGeomCurveFromEdge(t,r,i),n=this.vecHelper.remap(e.param,0,1,r,i),o=s.DN(n,1),a=[o.X(),o.Y(),o.Z()];return o.delete(),a}pointOnEdgeAtLength(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.pointOnCurveAtLength(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r.delete(),s}tangentOnEdgeAtLength(e){const t=e.shape,r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),i=new this.occ.BRepAdaptor_CompCurve_2(r,!1),s=this.geomService.tangentOnCurveAtLength(Object.assign(Object.assign({},e),{shape:i}));return r.delete(),i.delete(),s}getEdgeBounds(e){const t={current:0},r={current:0};return this.occRefReturns.BRep_Tool_Range_1(e,t,r),{uMin:t.current,uMax:r.current}}isEdgeCircular(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{return t.Circle(),t.delete(),!0}catch(e){return!1}}isEdgeLinear(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{return t.Line(),t.delete(),!0}catch(e){return!1}}}class ke{constructor(e,t,r){this.occ=e,this.vecHelper=t,this.entitiesService=r}curveLength(e){return this.occ.GCPnts_AbscissaPoint.Length_1(e.shape)}pointOnCurveAtParam(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]),i=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter());t.D0(i,r);const s=[r.X(),r.Y(),r.Z()];return r.delete(),s}pointOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint_2(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=this.entitiesService.gpPnt([0,0,0]);e.shape.D0(r,i);const s=[i.X(),i.Y(),i.Z()];return t.delete(),i.delete(),s}pointsOnCurveAtLengths(e){return e.lengths.map((t=>this.pointOnCurveAtLength({shape:e.shape,length:t})))}tangentOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint_2(e.shape,e.length,e.shape.FirstParameter()),r=t.Parameter(),i=e.shape.DN(r,1),s=[i.X(),i.Y(),i.Z()];return i.delete(),t.delete(),s}tangentOnCurveAtParam(e){const t=e.shape,r=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter()),i=t.DN(r,1),s=[i.X(),i.Y(),i.Z()];return i.delete(),s}divideCurveByEqualLengthDistance(e){const t=e.shape,r=this.occ.GCPnts_AbscissaPoint.Length_5(t,t.FirstParameter(),t.LastParameter()),i=r/e.nrOfDivisions,s=[];for(let e=0;e<=r+1e-9;e+=i)s.push(e);return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const r=new this.occ.GCPnts_AbscissaPoint_2(t,e,t.FirstParameter()),i=r.Parameter();return r.delete(),i})).map((e=>{const r=this.entitiesService.gpPnt([0,0,0]);t.D0(e,r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}))}divideCurveToNrSegments(e,t,r){const i=e.shape,s=[];for(let i=0;i<=e.nrOfDivisions;i++){const n=i/e.nrOfDivisions,o=this.vecHelper.remap(n,0,1,t,r);s.push(o)}return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const t=this.entitiesService.gpPnt([0,0,0]);i.D0(e,t);const r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}startPointOnCurve(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]);t.D0(t.FirstParameter(),r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}endPointOnCurve(e){const t=e.shape,r=this.entitiesService.gpPnt([0,0,0]);t.D0(t.LastParameter(),r);const i=[r.X(),r.Y(),r.Z()];return r.delete(),i}getLinearCenterOfMass(e){const t=e.shape,r=new this.occ.GProp_GProps_1;this.occ.BRepGProp.LinearProperties(t,r,!1,!1);const i=r.CentreOfMass(),s=[i.X(),i.Y(),i.Z()];return r.delete(),s}}class Oe{constructor(){this.type="text",this.name="text"}}class Ae{}class De{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f){this.occ=e,this.occRefReturns=t,this.vector=r,this.point=i,this.shapesHelperService=s,this.shapeGettersService=n,this.transformsService=o,this.enumService=a,this.entitiesService=c,this.converterService=h,this.geomService=l,this.edgesService=d,this.textService=u,this.filletsService=p,this.operationsService=f}getWireLength(e){const t=new this.occ.BRepAdaptor_CompCurve_2(e.shape,!1),r=this.geomService.curveLength({shape:t});return t.delete(),r}getWiresLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getWireLength({shape:e})))}createRectangleWire(e){const t=e.width/2,r=e.length/2,i=[[t,0,r],[-t,0,r],[-t,0,-r],[t,0,-r]].reverse(),s=this.createPolygonWire({points:i}),n=this.transformsService.alignAndTranslate({shape:s,direction:e.direction,center:e.center});return s.delete(),n}createSquareWire(e){return this.createRectangleWire({width:e.size,length:e.size,center:e.center,direction:e.direction})}reversedWire(e){const t=e.shape.Reversed(),r=this.converterService.getActualTypeOfShape(t);return t.delete(),r}reversedWireFromReversedEdges(e){const t=e.shape,r=this.edgesService.getEdgesAlongWire({shape:t}).map((e=>this.converterService.getActualTypeOfShape(e.Reversed()))),i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r.reverse()}),s=this.converterService.getActualTypeOfShape(i);return i.delete(),r.forEach((e=>e.delete())),s}createChristmasTreeWire(e){const t=this.createLineWire({start:[e.innerDist,0,0],end:[0,e.height,0]}),r=this.createLineWire({start:[e.outerDist,0,0],end:[0,e.height,0]}),i=this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),s=this.divideWireByEqualDistanceToPoints({shape:r,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),n=[];if(e.trunkWidth>0&&e.trunkHeight>0?(n.push([0,-e.trunkHeight,0]),n.push([e.trunkWidth/2,-e.trunkHeight,0]),n.push([e.trunkWidth/2,0,0])):n.push([0,0,0]),i.forEach(((t,r)=>{const i=s[r];0===r?n.push(i):0!==r&&r<s.length-1?(n.push([t[0],i[1]+e.height/e.nrSkirts*.1,t[2]]),n.push(i)):n.push(t)})),!e.half){const e=n.map((e=>[-e[0],e[1],e[2]]));e.pop(),n.push(...e.reverse())}let o;if(e.trunkHeight>0&&e.trunkWidth>0){const t=n.map((t=>[t[0],t[1]+e.trunkHeight,t[2]]));o=this.createPolylineWire({points:t})}else o=this.createPolylineWire({points:n});const a=this.transformsService.rotate({shape:o,angle:e.rotation,axis:[0,1,0]});return this.transformsService.alignAndTranslate({shape:a,direction:e.direction,center:e.origin})}createStarWire(e){const t=this.shapesHelperService.starLines(e.innerRadius,e.outerRadius,e.numRays,e.half,e.offsetOuterEdges),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createParallelogramWire(e){const t=this.shapesHelperService.parallelogram(e.width,e.height,e.angle,e.aroundCenter),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createHeartWire(e){const t=e.sizeApprox/2,r=[[0,0,.7*t],[t/6,0,.9*t],[t/2,0,t],[.75*t,0,.9*t],[t,0,t/4],[t/2,0,-t/2],[0,0,-t]],i=r.map((e=>[-e[0],e[1],e[2]])),s=1e-5,n=this.interpolatePoints({points:r,periodic:!1,tolerance:s}),o=this.interpolatePoints({points:i.reverse(),periodic:!1,tolerance:s}),a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[n,o]}),c=this.transformsService.rotate({shape:a,angle:e.rotation,axis:[0,1,0]}),h=this.transformsService.alignAndTranslate({shape:c,direction:e.direction,center:e.center});return a.delete(),c.delete(),n.delete(),o.delete(),h}createNGonWire(e){const t=this.shapesHelperService.ngon(e.nrCorners,e.radius,[0,0]),r=[];t.forEach((e=>{r.push(this.edgesService.lineEdge(e))}));const i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return i.delete(),s}createLPolygonWire(e){let t;switch(e.align){case G.directionEnum.outside:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case G.directionEnum.inside:t=this.shapesHelperService.polygonLInverted(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case G.directionEnum.middle:t=this.shapesHelperService.polygonLMiddle(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;default:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond)}const r=this.createPolygonWire({points:t}),i=this.transformsService.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:i,direction:e.direction,center:e.center});return r.delete(),i.delete(),s}createPolygonWire(e){const t=[];for(let r=0;r<e.points.length;r++)t.push(this.entitiesService.gpPnt(e.points[r]));const r=new this.occ.BRepBuilderAPI_MakeWire_1;for(let i=0;i<e.points.length-1;i++){const e=t[i],s=t[i+1],n=this.makeWireBetweenTwoPoints(e,s);r.Add_2(n)}const i=t[e.points.length-1],s=t[0],n=this.makeWireBetweenTwoPoints(i,s);r.Add_2(n);const o=r.Wire();return r.delete(),o}createPolylineWire(e){const t=[];for(let r=0;r<e.points.length;r++)t.push(this.entitiesService.gpPnt(e.points[r]));const r=new this.occ.BRepBuilderAPI_MakeWire_1;for(let i=0;i<e.points.length-1;i++){const e=t[i],s=t[i+1],n=this.makeWireBetweenTwoPoints(e,s);r.Add_2(n)}const i=r.Wire();return r.delete(),i}createLineWire(e){const t=[];t.push(this.entitiesService.gpPnt(e.start)),t.push(this.entitiesService.gpPnt(e.end));const r=new this.occ.BRepBuilderAPI_MakeWire_1;for(let e=0;e<t.length-1;e++){const i=t[e],s=t[e+1],n=this.makeWireBetweenTwoPoints(i,s);r.Add_2(n)}const i=r.Wire();return r.delete(),i}createLineWireWithExtensions(e){const t=this.vector.normalized({vector:this.vector.sub({first:e.end,second:e.start})}),r=this.vector.mul({vector:t,scalar:-e.extensionStart}),i=this.vector.mul({vector:t,scalar:e.extensionEnd}),s=this.vector.add({first:e.start,second:r}),n=this.vector.add({first:e.end,second:i});return this.createLineWire({start:s,end:n})}makeWireBetweenTwoPoints(e,t){const r=new this.occ.GC_MakeSegment_1(e,t),i=r.Value(),s=i.get(),n=new this.occ.BRepBuilderAPI_MakeEdge_24(new this.occ.Handle_Geom_Curve_2(s)),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return n.delete(),r.delete(),i.delete(),s.delete(),o.delete(),a.delete(),c}divideWireByParamsToPoints(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:r}),r.FirstParameter(),r.LastParameter());return r.delete(),i}divideWireByEqualDistanceToPoints(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.divideCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.pointOnCurveAtParam(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}tangentOnWireAtParam(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.tangentOnCurveAtParam(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.pointOnCurveAtLength(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointsOnWireAtLengths(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.pointsOnCurveAtLengths(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}pointsOnWireAtEqualLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.getWireLength({shape:t})/e.length,s=[];let n=0;for(let t=0;t<i;t++)s.push(e.length*t),n+=e.length;e.includeFirst||s.shift(),e.tryNext&&s.push(n+e.length);const o=this.geomService.pointsOnCurveAtLengths({lengths:s,shape:r});return e.includeLast&&o.push(this.endPointOnWire({shape:t})),r.delete(),o}pointsOnWireAtPatternOfLengths(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.getWireLength({shape:t}),s=[];let n=0,o=0,a=!1;for(;!a;)for(let t=0;t<e.lengths.length;t++){const r=e.lengths[t];if(!(n+r<=i)){a=!0;break}s.push(n+r),n+=r,o=t}e.includeFirst&&s.unshift(0),e.tryNext&&(o+1<e.lengths.length?s.push(n+e.lengths[o+1]):s.push(n+e.lengths[0]));const c=this.geomService.pointsOnCurveAtLengths({lengths:s,shape:r});return e.includeLast&&c.push(this.endPointOnWire({shape:t})),r.delete(),c}tangentOnWireAtLength(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1),i=this.geomService.tangentOnCurveAtLength(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i}interpolatePoints(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length),r=[];for(let i=1;i<=e.points.length;i++){const s=this.entitiesService.gpPnt(e.points[i-1]);r.push(s),t.SetValue(i,s)}const i=this.occ.BitByBitDev.BitInterpolate(t,e.periodic,e.tolerance);if(i.IsNull())return r.forEach((e=>e.delete())),void t.delete();{const e=i.get(),s=new this.occ.Handle_Geom_Curve_2(e),n=new this.occ.BRepBuilderAPI_MakeEdge_24(s),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return i.Nullify(),i.delete(),s.Nullify(),s.delete(),n.delete(),o.delete(),a.delete(),r.forEach((e=>e.delete())),t.delete(),c}}isWireClosed(e){const t=this.startPointOnWire({shape:e.shape}),r=this.endPointOnWire({shape:e.shape});return this.vector.vectorsTheSame({vec1:r,vec2:t,tolerance:1e-7})}splitOnPoints(e){const t=e.shape,r=e.points,i=this.shapeGettersService.getEdges({shape:t});if(0===i.length)return[];const s=[],n=i[0];let o={current:0},a={current:0};this.occRefReturns.BRep_Tool_Curve_2(n,o,a),s.push({edgeIndex:0,parameter:o.current}),r.forEach((e=>{let t=1/0,r=-1,n=0;i.forEach(((i,s)=>{const o={current:0},a={current:0},c=this.occRefReturns.BRep_Tool_Curve_2(i,o,a),h=o.current,l=a.current,d=this.entitiesService.gpPnt(e),u=new this.occ.GeomAPI_ProjectPointOnCurve_2(d,c);if(u.NbPoints()>0){const e=u.LowerDistanceParameter(),i=Math.max(h,Math.min(l,e)),o=u.Distance(1);o<t&&(t=o,r=s,n=i)}})),r>=0&&s.push({edgeIndex:r,parameter:n})}));const c=i[i.length-1];o={current:0},a={current:0},this.occRefReturns.BRep_Tool_Curve_2(c,o,a),s.push({edgeIndex:i.length-1,parameter:a.current});const h=s.filter(((e,t,r)=>t===r.findIndex((t=>t.edgeIndex===e.edgeIndex&&t.parameter===e.parameter))));h.sort(((e,t)=>e.edgeIndex!==t.edgeIndex?e.edgeIndex-t.edgeIndex:e.parameter-t.parameter));const l=[];for(let e=0;e<h.length-1;e++){const t=h[e],r=h[e+1],s=new this.occ.BRepBuilderAPI_MakeWire_1;if(t.edgeIndex===r.edgeIndex){const e=i[t.edgeIndex],n={current:0},o={current:0},a=this.occRefReturns.BRep_Tool_Curve_2(e,n,o);if(t.parameter===r.parameter)continue;const c=new this.occ.Geom_TrimmedCurve(a,t.parameter,r.parameter,!0,!0),h=new this.occ.Handle_Geom_Curve_2(c),l=new this.occ.BRepBuilderAPI_MakeEdge_24(h).Edge();s.Add_1(l)}else{const e=i[t.edgeIndex],n={current:0},o={current:0},a=this.occRefReturns.BRep_Tool_Curve_2(e,n,o),c=o.current;if(t.parameter<c){const e=new this.occ.Geom_TrimmedCurve(a,t.parameter,c,!0,!0),r=new this.occ.Handle_Geom_Curve_2(e),i=new this.occ.BRepBuilderAPI_MakeEdge_24(r).Edge();s.Add_1(i)}for(let e=t.edgeIndex+1;e<r.edgeIndex;e++)s.Add_1(i[e]);const h=i[r.edgeIndex],l={current:0},d={current:0},u=this.occRefReturns.BRep_Tool_Curve_2(h,l,d),p=l.current;if(r.parameter>p){const e=new this.occ.Geom_TrimmedCurve(u,p,r.parameter,!0,!0),t=new this.occ.Handle_Geom_Curve_2(e),i=new this.occ.BRepBuilderAPI_MakeEdge_24(t).Edge();s.Add_1(i)}}if(s.IsDone()){const e=s.Wire();l.push(e)}}return l}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createWireFromTwoCirclesTan(e){const t=this.shapeGettersService.getEdges({shape:e.circle1}),r=this.shapeGettersService.getEdges({shape:e.circle2});if(1===t.length&&1===r.length){const i=t[0],s=r[0],n=this.edgesService.constraintTanLinesOnTwoCircles({circle1:i,circle2:s,positionResult:e.keepLines===G.twoSidesStrictEnum.outside?G.positionResultEnum.keepSide2:G.positionResultEnum.keepSide1,circleRemainders:this.enumService.convertFourSidesStrictEnumToTwoCircleInclusionEnum(e.circleRemainders),tolerance:e.tolerance}),o=this.converterService.combineEdgesAndWiresIntoAWire({shapes:n});return n.forEach((e=>e.delete())),i.delete(),s.delete(),o}throw new Error("Could not find the edges of the provided circle wires.")}createZigZagBetweenTwoWires(e){const t=e.wire1,r=e.wire2;let i=[],s=[];if(e.zigZagsPerEdge){const n=this.edgesService.getEdgesAlongWire({shape:t}),o=this.edgesService.getEdgesAlongWire({shape:r});e.divideByEqualDistance?(i=n.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=o.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})))):(i=n.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=o.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))))}else e.divideByEqualDistance?(i=[this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByEqualDistanceToPoints({shape:r,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]):(i=[this.divideWireByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByParamsToPoints({shape:r,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]);const n=i.map(((t,r)=>{const i=s[r],n=[];for(let r=0;r<t.length;r++)r%2==0?e.inverse?n.push(i[r]):n.push(t[r]):e.inverse?n.push(t[r]):n.push(i[r]);return this.createPolylineWire({points:n})}));return this.converterService.combineEdgesAndWiresIntoAWire({shapes:n})}getWireCenterOfMass(e){return this.geomService.getLinearCenterOfMass(e)}hexagonsInGrid(e){const t=this.point.hexGridScaledToFit(Object.assign(Object.assign({},e),{centerGrid:!0,pointsOnGround:!0})),r=t.hexagons.map((e=>this.createPolygonWire({points:e})));let i=0,s=0,n=0,o=0;const a=[];for(let c=0;c<e.nrHexagonsInHeight;c++)for(let h=0;h<e.nrHexagonsInWidth;h++){let l=1;e.scalePatternWidth&&e.scalePatternWidth.length>0&&(l=e.scalePatternWidth[i],i++,i>=e.scalePatternWidth.length&&(i=0));let d=1;e.scalePatternHeight&&e.scalePatternHeight.length>0&&(d=e.scalePatternHeight[s],s++,s>=e.scalePatternHeight.length&&(s=0));let u=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(u=e.inclusionPattern[n],n++,n>=e.inclusionPattern.length&&(n=0));let p=0;if(e.filletPattern&&e.filletPattern.length>0&&(p=e.filletPattern[o],o++,o>=e.filletPattern.length&&(o=0)),u){p=t.maxFilletRadius*p;const i=r[c*e.nrHexagonsInWidth+h],s=t.centers[c*e.nrHexagonsInWidth+h];if(p>0){const e=this.filletsService.fillet2d({shape:i,radius:p}),t=[l,1,d];let r=e;1===l&&1===d||(r=this.transformsService.scale3d({shape:e,center:s,scale:t})),a.push(r)}else{const e=[l,1,d];let t=i;1===l&&1===d||(t=this.transformsService.scale3d({shape:i,center:s,scale:e})),a.push(t)}}}return a}createWireFromEdge(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e.shape),r=t.Wire();return t.delete(),r}createBSpline(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0)),r=[];for(let i=1;i<=e.points.length;i++){const s=this.entitiesService.gpPnt(e.points[i-1]);r.push(s),t.SetValue(i,s)}e.closed&&t.SetValue(e.points.length+1,t.Value(1));const i=new this.occ.GeomAPI_PointsToBSpline_2(t,3,8,this.occ.GeomAbs_Shape.GeomAbs_C2,.001),s=i.Curve(),n=s.get(),o=new this.occ.Handle_Geom_Curve_2(n),a=new this.occ.BRepBuilderAPI_MakeEdge_24(o),c=a.Edge(),h=new this.occ.BRepBuilderAPI_MakeWire_2(c),l=h.Wire();return r.forEach((e=>e.delete())),t.delete(),i.delete(),s.Nullify(),s.delete(),o.Nullify(),o.delete(),a.delete(),c.delete(),h.delete(),l}createBezier(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0));for(let r=1;r<=e.points.length;r++)t.SetValue(r,this.entitiesService.gpPnt(e.points[r-1]));e.closed&&t.SetValue(e.points.length+1,t.Value(1));const r=new this.occ.Geom_BezierCurve_1(t),i=new this.occ.Handle_Geom_Curve_2(r),s=new this.occ.BRepBuilderAPI_MakeEdge_24(i),n=s.Edge(),o=new this.occ.BRepBuilderAPI_MakeWire_2(n),a=o.Wire();return o.delete(),s.delete(),n.delete(),i.delete(),t.delete(),a}createBezierWeights(e){if(!e.closed&&e.points.length!==e.weights.length)throw new Error("Number of points and weights must be the same when bezier is not clsoed.");if(e.closed&&e.points.length!==e.weights.length-1)throw new Error("Number of points must be one less than number of weights when bezier is clsoed.");const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0));for(let r=1;r<=e.points.length;r++)t.SetValue(r,this.entitiesService.gpPnt(e.points[r-1]));e.closed&&t.SetValue(e.points.length+1,t.Value(1));const r=new this.occ.TColStd_Array1OfReal_2(1,e.weights.length);for(let t=1;t<=e.weights.length;t++)r.SetValue(t,e.weights[t-1]);const i=new this.occ.Geom_BezierCurve_2(t,r),s=new this.occ.Handle_Geom_Curve_2(i),n=new this.occ.BRepBuilderAPI_MakeEdge_24(s),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return a.delete(),n.delete(),o.delete(),s.delete(),t.delete(),r.delete(),c}addEdgesAndWiresToWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire_1;let r;if(t.Add_2(e.shape),e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?t.Add_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE&&t.Add_2(e)})),!t.IsDone())throw new Error("Wire could not be constructed. Check if edges and wires do not have disconnected elements.");return r=t.Wire(),t.delete(),r}startPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.startPointOnCurve({shape:r})}midPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.pointOnCurveAtParam({shape:r,param:.5})}endPointOnWire(e){const t=e.shape,r=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.endPointOnCurve({shape:r})}textWires(e){const t=this.textService.vectorText(e),r=[];return t.forEach((e=>{e.chars.forEach((e=>{e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&r.push(t)}))}))})),r}textWiresWithData(e){const t=this.textService.vectorText(e),r=[],i=[];t.forEach((e=>{e.chars.forEach(((e,t)=>{const s=[];e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&(r.push(t),s.push(t))}));const n=this.converterService.makeCompound({shapes:s});i.push({id:`char-${t}`,shape:n})}))}));const s=this.converterService.makeCompound({shapes:r}),n=new Oe,o=this.operationsService.boundingBoxOfShape({shape:s}),a=o.max[0]-o.min[0],c=o.max[1]-o.min[1];n.width=a,n.height=c,n.compound="text-compound";const h=new Ae;return h.data=n,h.compound=s,h.shapes=[{id:"text-compound",shape:s},...i],h}placeWire(e,t){const r=this.shapeGettersService.getEdges({shape:e}),i=[];r.forEach((e=>{const r={current:0},s={current:0};this.occRefReturns.BRep_Tool_Range_1(e,r,s);const n=this.occRefReturns.BRep_Tool_Curve_2(e,r,s);if(!n.IsNull()){const e=this.entitiesService.gpPln([0,0,0],[0,1,0]),o=this.occ.GeomAPI.To2d(n,e),a=o.get(),c=this.edgesService.makeEdgeFromGeom2dCurveAndSurfaceBounded({curve:a,surface:t},r.current,s.current);c&&i.push(c),e.delete(),o.delete()}n.delete()})),r.forEach((e=>e.delete()));const s=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i});return i.forEach((e=>e.delete())),s}}class _e{constructor(e,t,r,i,s,n,o,a,c,h,l,d){this.occ=e,this.occRefReturns=t,this.entitiesService=r,this.enumService=i,this.shapeGettersService=s,this.converterService=n,this.booleansService=o,this.wiresService=a,this.transformsService=c,this.vectorService=h,this.point=l,this.filletsService=d}createFaceFromWireOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWireOnFace(e.face,e.wire,e.inside)}createFacesFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFacesFromWiresOnFace(e.face,e.wires,e.inside)}createFaceFromWire(e){let t;if(this.enumService.getShapeTypeEnum(e.shape)!==G.shapeTypeEnum.wire)throw new Error("Provided input shape is not a wire");if(e.planar){const r=this.occ.TopoDS.Wire_1(e.shape);t=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(r,e.planar),r.delete()}else{const r=3,i=15,s=2,n=!1,o=1e-5,a=1e-4,c=.01,h=.1,l=8,d=9,u=new this.occ.BRepFill_Filling(r,i,s,n,o,a,c,h,l,d),p=this.shapeGettersService.getEdges(e);if(p.forEach((e=>{u.Add_1(e,this.occ.GeomAbs_Shape.GeomAbs_C0,!0)})),u.Build(),!u.IsDone())throw new Error("Could not create non planar face");t=u.Face(),u.delete(),p.forEach((e=>e.delete()))}return t}getFaceArea(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.SurfaceProperties_1(e.shape,t,!1,!1);const r=t.Mass();return t.delete(),r}getFacesAreas(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceArea({shape:e})))}getFaceCenterOfMass(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.SurfaceProperties_1(e.shape,t,!1,!1);const r=t.CentreOfMass(),i=[r.X(),r.Y(),r.Z()];return t.delete(),r.delete(),i}getFacesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceCenterOfMass({shape:e})))}filterFacePoints(e){const t=[];if(e.points.length>0){const r=new this.occ.BRepClass_FaceClassifier_1;return e.points.forEach((i=>{const s=this.entitiesService.gpPnt(i);r.Perform_2(e.shape,s,e.tolerance,e.useBndBox,e.gapTolerance);const n=r.State(),o=this.enumService.getTopAbsStateEnum(n);e.keepOn&&o===G.topAbsStateEnum.on&&t.push(i),e.keepIn&&o===G.topAbsStateEnum.in&&t.push(i),e.keepOut&&o===G.topAbsStateEnum.out&&t.push(i),e.keepUnknown&&o===G.topAbsStateEnum.unknown&&t.push(i),s.delete()})),r.delete(),t}return[]}createSquareFace(e){const t=this.wiresService.createSquareWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),r}createRectangleFace(e){const t=this.wiresService.createRectangleWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),r}createFaceFromMultipleCircleTanWires(e){const t=e.circles,r=[];if(e.combination===G.combinationCirclesForFaceEnum.allWithAll)for(let i=0;i<t.length;i++)for(let s=i+1;s<t.length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[s],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);r.push(o)}else if(e.combination===G.combinationCirclesForFaceEnum.inOrder)for(let i=0;i<t.length-1;i++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[i+1],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);r.push(n)}else if(e.combination===G.combinationCirclesForFaceEnum.inOrderClosed)for(let i=0;i<t.length;i++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i],circle2:t[(i+1)%t.length],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);r.push(n)}let i;return i=e.unify?this.booleansService.union({shapes:r,keepEdges:!1}):this.converterService.makeCompound({shapes:r}),i}createFaceFromMultipleCircleTanWireCollections(e){const t=e.listsOfCircles,r=[];if(e.combination===G.combinationCirclesForFaceEnum.allWithAll)for(let i=0;i<t.length;i++){const s=t[i],n=t[i+1];if(!n)break;for(let t=0;t<s.length;t++)for(let i=0;i<n.length;i++){const o=s[t],a=n[i],c=this.wiresService.createWireFromTwoCirclesTan({circle1:o,circle2:a,keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),h=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(c,!0);r.push(h)}}else if(e.combination===G.combinationCirclesForFaceEnum.inOrder){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrder strategy.");for(let i=0;i<t.length-1;i++)for(let s=0;s<t[i].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i+1][s],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);r.push(o)}}else if(e.combination===G.combinationCirclesForFaceEnum.inOrderClosed){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrderClosed strategy.");for(let i=0;i<t.length-1;i++)for(let s=0;s<t[i].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i+1][s],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);r.push(o)}for(let i=0;i<t.length;i++)for(let s=0;s<t[i].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[i][s],circle2:t[i][(s+1)%t[i].length],keepLines:G.twoSidesStrictEnum.outside,circleRemainders:G.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);r.push(o)}}let i;return i=e.unify?this.booleansService.union({shapes:r,keepEdges:!1}):this.converterService.makeCompound({shapes:r}),i}faceNormalOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),{uMin:i,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=i+(s-i)*e.paramU,c=n+(o-n)*e.paramV,h=this.entitiesService.gpDir([0,1,0]);this.occ.GeomLib.NormEstim(r,this.entitiesService.gpPnt2d([a,c]),1e-7,h),t.Orientation_1()===this.occ.TopAbs_Orientation.TopAbs_REVERSED&&h.Reverse();const l=[h.X(),h.Y(),h.Z()];return h.delete(),r.delete(),l}getUVBounds(e){const t={current:0},r={current:0},i={current:0},s={current:0};return this.occRefReturns.BRepTools_UVBounds_1(e,t,r,i,s),{uMin:t.current,uMax:r.current,vMin:i.current,vMax:s.current}}createFaceFromWires(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.shapes,e.planar)}createFaceFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.wires,!1,e.face,e.inside)}createFacesFromWires(e){return e.shapes.map((t=>this.createFaceFromWire({shape:t,planar:e.planar})))}faceFromSurface(e){const t=this.entitiesService.bRepBuilderAPIMakeFaceFromSurface(e.shape,e.tolerance);if(t.IsNull())throw t.delete(),new Error("Could not construct a face from the surface. Check if surface is not infinite.");return t}faceFromSurfaceAndWire(e){const t=this.entitiesService.bRepBuilderAPIMakeFaceFromSurfaceAndWire(e.surface,e.wire,e.inside);if(t.IsNull())throw t.delete(),new Error("Could not construct a face from the surface. Check if surface is not infinite.");return t}getUMinBound(e){const t=e.shape,{uMin:r}=this.getUVBounds(t);return r}getUMaxBound(e){const t=e.shape,{uMax:r}=this.getUVBounds(t);return r}getVMinBound(e){const t=e.shape,{vMin:r}=this.getUVBounds(t);return r}getVMaxBound(e){const t=e.shape,{vMax:r}=this.getUVBounds(t);return r}subdivideToPointsControlled(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.nrDivisionsU;t++){const r=(n-s)/(e.nrDivisionsU-1),h=r/2,l=r*t;for(let r=0;r<e.nrDivisionsV;r++){const n=(a-o)/(e.nrDivisionsV-1),d=n/2;let u=o+n*r;u+=e.shiftHalfStepNthV&&(t+e.shiftHalfStepVOffsetN)%e.shiftHalfStepNthV==0?d:0;let p=s+l;p+=e.shiftHalfStepNthU&&(r+e.shiftHalfStepUOffsetN)%e.shiftHalfStepNthU==0?h:0;const f=this.entitiesService.gpPnt([0,0,0]);i.D0(p,u,f);const v=[f.X(),f.Y(),f.Z()];let g=!0;(0===t&&e.removeStartEdgeNthU&&(r+e.removeStartEdgeUOffsetN)%e.removeStartEdgeNthU==0||t===e.nrDivisionsU-1&&e.removeEndEdgeNthU&&(r+e.removeEndEdgeUOffsetN)%e.removeEndEdgeNthU==0||0===r&&e.removeStartEdgeNthV&&(t+e.removeStartEdgeVOffsetN)%e.removeStartEdgeNthV==0||r===e.nrDivisionsV-1&&e.removeEndEdgeNthV&&(t+e.removeEndEdgeVOffsetN)%e.removeEndEdgeNthV==0)&&(g=!1),g&&c.push(v),f.delete()}}return r.delete(),c}subdivideToPoints(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartEdgeU?1:0,l=e.removeEndEdgeU?1:0,d=e.removeStartEdgeV?1:0,u=e.removeEndEdgeV?1:0;for(let t=0+h;t<e.nrDivisionsU-l;t++){const r=(n-s)/(e.nrDivisionsU-1),h=r/2,l=r*t,p=s+(e.shiftHalfStepU?h:0)+l;for(let t=0+d;t<e.nrDivisionsV-u;t++){const r=(a-o)/(e.nrDivisionsV-1),s=r/2,n=r*t,h=o+(e.shiftHalfStepV?s:0)+n,l=this.entitiesService.gpPnt([0,0,0]);i.D0(p,h,l);const d=[l.X(),l.Y(),l.Z()];c.push(d),l.delete()}}return r.delete(),c}subdivideToWires(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=1/e.nrDivisions;for(let t=0;t<=e.nrDivisions;t++){const e=h*t;c.push(e)}if(e.removeStart&&c.shift(),e.removeEnd&&c.pop(),e.shiftHalfStep){const e=h/2;c.forEach(((t,r)=>{c[r]=c[r]+e}))}const l=[];for(let t=0;t<c.length;t++){const r=c[t],h=this.placeWireOnParamSurface(e.isU,r,s,n,o,a,i);l.push(h)}return r.delete(),l}subdivideToRectangleWires(e){var t;if(void 0===e.shape)throw Error("Face not defined");const r=[],i=e.shape,s=this.occ.BRep_Tool.Surface_2(i).get(),{uMin:n,uMax:o,vMin:a,vMax:c}=this.getUVBounds(i),h=[],l=(1-2*e.offsetFromBorderU)/e.nrRectanglesU,d=l/2;for(let t=0;t<e.nrRectanglesU;t++){const r=l*t+d+e.offsetFromBorderU;h.push(r)}const u=[],p=(1-2*e.offsetFromBorderV)/e.nrRectanglesV,f=p/2;for(let t=0;t<e.nrRectanglesV;t++){const r=p*t+f+e.offsetFromBorderV;u.push(r)}const v=this.wiresService.createLineWire({start:[0,0,0],end:[1,0,0]}),g=this.wiresService.createLineWire({start:[0,0,0],end:[0,0,1]}),m=this.wiresService.placeWire(v,s),S=this.wiresService.placeWire(g,s),y=this.wiresService.getWireLength({shape:m}),b=this.wiresService.getWireLength({shape:S}),w=o-n,E=c-a,x=[];let T=0,P=0,C=0,k=0;const O=[];for(let i=0;i<h.length;i++)for(let o=0;o<u.length;o++){let c=1;e.scalePatternU&&e.scalePatternU.length>0&&(c=e.scalePatternU[T],T++,T>=e.scalePatternU.length&&(T=0));let d=1;e.scalePatternV&&e.scalePatternV.length>0&&(d=e.scalePatternV[P],P++,P>=e.scalePatternV.length&&(P=0));let f=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(f=e.inclusionPattern[C],C++,C>=e.inclusionPattern.length&&(C=0));let v=0;if(e.filletPattern&&e.filletPattern.length>0&&(v=e.filletPattern[k],k++,k>=e.filletPattern.length&&(k=0)),f){const e=p*d,f=l*c,g=Math.min(e*E*y,f*w*b);(g===e*E*y||g===f*w*b)&&(v*=g/2);const m=null===(t=O.find((t=>t.id===`${e}-${f}-${v}`)))||void 0===t?void 0:t.shape,S=[u[o]*E+a,0,h[i]*w+n];if(m){const e=this.transformsService.translate({shape:m,translation:S}),t=this.wiresService.placeWire(e,s);x.push(t)}else{const t=this.wiresService.createRectangleWire({width:e,length:f,center:[0,0,0],direction:[0,1,0]});if(v>0){const i=[E*y,1,w*b],n=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:i}),o=this.filletsService.fillet2d({shape:n,radius:v}),a=[1/y,1,1/b];let c=o;this.vectorService.vectorsTheSame(a,[1,1,1],1e-7)||(c=this.transformsService.scale3d({shape:o,center:[0,0,0],scale:a}));const h=this.transformsService.translate({shape:c,translation:S});r.push(t);const l=this.wiresService.placeWire(h,s);x.push(l),O.push({id:`${e}-${f}-${v}`,shape:c})}else{const i=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:[E,1,w]}),n=this.transformsService.translate({shape:i,translation:S});r.push(t);const o=this.wiresService.placeWire(n,s);x.push(o),O.push({id:`${e}-${f}-${v}`,shape:i})}}}}return r.forEach((e=>e.delete())),x}subdivideToRectangleHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToRectangleWires(e),r=this.shapeGettersService.getWires({shape:e.shape}),i=this.wiresService.getWiresLengths({shapes:r}),s=r[i.indexOf(Math.max(...i))],n=t.map((e=>this.wiresService.reversedWire({shape:e}))),o=[s,...n],a=this.createFaceFromWiresOnFace({wires:o,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),n.forEach((e=>e.delete())),[a,...d]}subdivideToHexagonWires(e){var t,r,i,s;if(void 0===e.shape)throw new Error("Face not defined");const n=[],o=e.shape,a=this.occ.BRep_Tool.Surface_2(o).get(),{uMin:c,uMax:h,vMin:l,vMax:d}=this.getUVBounds(o),u=h-c,p=d-l;if(u<=0||p<=0)return console.warn("Face has zero or negative parametric range. Skipping."),[];const f=u*(1-2*e.offsetFromBorderU),v=p*(1-2*e.offsetFromBorderV),g=c+u*e.offsetFromBorderU,m=l+p*e.offsetFromBorderV;if(f<=0||v<=0)return console.warn("Grid dimensions are zero or negative after applying offset. Skipping."),[];const S=this.point.hexGridScaledToFit({width:v,height:f,nrHexagonsInHeight:e.nrHexagonsU,nrHexagonsInWidth:e.nrHexagonsV,centerGrid:!1,pointsOnGround:!0,flatTop:e.flatU,extendTop:e.extendUUp,extendBottom:e.extendUBottom,extendLeft:e.extendVBottom,extendRight:e.extendVUp}),y=S.hexagons.map((e=>this.wiresService.createPolygonWire({points:e})));n.push(...y);const b=[m,0,g],w=y.map((e=>this.transformsService.translate({shape:e,translation:b})));n.push(...w);const E=this.point.translatePoints({points:S.centers,translation:b}),x=[];let T=0,P=0,C=0,k=0;const O=e.nrHexagonsU*e.nrHexagonsV;if(w.length!==O||E.length!==O)return console.error(`Generated ${w.length} hexagons, but expected ${O}. Check hexGridScaledToFit logic.`),[];for(let o=0;o<e.nrHexagonsU;o++)for(let c=0;c<e.nrHexagonsV;c++){const h=o*e.nrHexagonsV+c;let l=1;(null===(t=e.scalePatternU)||void 0===t?void 0:t.length)>0&&(l=e.scalePatternU[T%e.scalePatternU.length],T++);let d=1;(null===(r=e.scalePatternV)||void 0===r?void 0:r.length)>0&&(d=e.scalePatternV[P%e.scalePatternV.length],P++);let u=!0;(null===(i=e.inclusionPattern)||void 0===i?void 0:i.length)>0&&(u=e.inclusionPattern[C%e.inclusionPattern.length],C++);let p=0;if((null===(s=e.filletPattern)||void 0===s?void 0:s.length)>0&&(p=e.filletPattern[k%e.filletPattern.length],k++),u){const e=w[h],t=E[h];let r=e;const i=S.maxFilletRadius*p;if(i>1e-6){const t=this.filletsService.fillet2d({shape:e,radius:i});n.push(t),r=t}let s=r;const o=[d,1,l];if(Math.abs(l-1)>1e-6||Math.abs(d-1)>1e-6){const e=this.transformsService.scale3d({shape:r,center:t,scale:o});n.push(e),s=e}const c=this.wiresService.placeWire(s,a);x.push(c)}}return n.forEach((e=>{e.delete()})),x}subdivideToHexagonHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToHexagonWires(e),r=this.shapeGettersService.getWires({shape:e.shape}),i=this.wiresService.getWiresLengths({shapes:r}),s=r[i.indexOf(Math.max(...i))],n=t.map((e=>this.wiresService.reversedWire({shape:e}))),o=[s,...n],a=this.createFaceFromWiresOnFace({wires:o,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),n.forEach((e=>e.delete())),[a,...d]}subdivideToNormals(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),{uMin:i,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=[],c=e.removeStartEdgeU?1:0,h=e.removeEndEdgeU?1:0,l=e.removeStartEdgeV?1:0,d=e.removeEndEdgeV?1:0;for(let u=0+c;u<e.nrDivisionsU-h;u++){const c=(s-i)/(e.nrDivisionsU-1),h=c/2,p=c*u,f=i+(e.shiftHalfStepU?h:0)+p;for(let i=0+l;i<e.nrDivisionsV-d;i++){const s=(o-n)/(e.nrDivisionsV-1),c=s/2,h=s*i,l=n+(e.shiftHalfStepV?c:0)+h,d=this.entitiesService.gpDir([0,1,0]),u=this.entitiesService.gpPnt2d([f,l]);this.occ.GeomLib.NormEstim(r,u,1e-7,d),t.Orientation_1()===this.occ.TopAbs_Orientation.TopAbs_REVERSED&&d.Reverse();const p=[d.X(),d.Y(),d.Z()];a.push(p),d.delete(),u.delete()}}return r.delete(),a}wireAlongParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=this.placeWireOnParamSurface(e.isU,e.param,s,n,o,a,i);return r.delete(),c}placeWireOnParamSurface(e,t,r,i,s,n,o){let a,c=t;e?(c=r+(i-r)*t,a=this.wiresService.createLineWire({start:[s,0,c],end:[n,0,c]})):(c=s+(n-s)*t,a=this.wiresService.createLineWire({start:[c,0,r],end:[c,0,i]}));const h=this.wiresService.placeWire(a,o);return a.delete(),h}wiresAlongParams(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.params.length;t++){const r=e.params[t],h=this.placeWireOnParamSurface(e.isU,r,s,n,o,a,i);c.push(h)}return r.delete(),c}subdivideToPointsOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartPoint?1:0,l=e.removeEndPoint?1:0;let d=e.param;d=e.isU?s+(n-s)*d:o+(a-o)*d;for(let t=0+h;t<e.nrPoints-l;t++){let r;if(e.isU){const i=(a-o)/(e.nrPoints-1),s=i/2,n=i*t;r=o+(e.shiftHalfStep?s:0)+n}else{const i=(n-s)/(e.nrPoints-1),o=i/2,a=i*t;r=s+(e.shiftHalfStep?o:0)+a}const h=this.entitiesService.gpPnt([0,0,0]);e.isU?i.D0(d,r,h):i.D0(r,d,h);const l=[h.X(),h.Y(),h.Z()];c.push(l),h.delete()}return r.delete(),c}subdivideToUVOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:n}=this.getUVBounds(t),o=[],a=e.removeStartPoint?1:0,c=e.removeEndPoint?1:0;let h=e.param;h=e.isU?r+(i-r)*h:s+(n-s)*h;for(let t=0+a;t<e.nrPoints-c;t++){let a,c;if(e.isU){const r=(n-s)/(e.nrPoints-1),i=r/2,o=r*t;a=s+(e.shiftHalfStep?i:0)+o}else{const s=(i-r)/(e.nrPoints-1),n=s/2,o=s*t;a=r+(e.shiftHalfStep?n:0)+o}c=e.isU?[h,a]:[a,h],o.push(c)}return o}subdivideToUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:n}=this.getUVBounds(t),o=[],a=e.removeStartEdgeU?1:0,c=e.removeEndEdgeU?1:0,h=e.removeStartEdgeV?1:0,l=e.removeEndEdgeV?1:0;for(let t=0+a;t<e.nrDivisionsU-c;t++){const a=(i-r)/(e.nrDivisionsU-1),c=a/2,d=a*t,u=r+(e.shiftHalfStepU?c:0)+d;for(let t=0+h;t<e.nrDivisionsV-l;t++){const r=(n-s)/(e.nrDivisionsV-1),i=r/2,a=r*t,c=s+(e.shiftHalfStepV?i:0)+a;o.push([u,c])}}return o}uvOnFace(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:r,uMax:i,vMin:s,vMax:n}=this.getUVBounds(t);return[r+(i-r)*e.paramU,s+(n-s)*e.paramV]}pointsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t).get(),{uMin:i,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t);return e.paramsUV.map((e=>{const t=i+(s-i)*e[0],a=n+(o-n)*e[1],c=this.entitiesService.gpPnt([0,0,0]);r.D0(t,a,c);const h=[c.X(),c.Y(),c.Z()];return c.delete(),h}))}normalsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),{uMin:i,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=e.paramsUV.map((e=>{const t=i+(s-i)*e[0],a=n+(o-n)*e[1],c=this.entitiesService.gpDir([0,1,0]);this.occ.GeomLib.NormEstim(r,this.entitiesService.gpPnt2d([t,a]),1e-7,c);const h=[c.X(),c.Y(),c.Z()];return c.delete(),h}));return r.delete(),a}pointOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,r=this.occ.BRep_Tool.Surface_2(t),i=r.get();if(i){const{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=s+(n-s)*e.paramU,h=o+(a-o)*e.paramV,l=this.entitiesService.gpPnt([0,0,0]);i.D0(c,h,l);const d=[l.X(),l.Y(),l.Z()];return l.delete(),r.delete(),d}}normalOnUV(e){return this.faceNormalOnUV(e)}createPolygonFace(e){const t=this.wiresService.createPolygonWire(e),r=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!1);return t.delete(),r}}class Fe{constructor(e,t,r,i,s,n){this.occ=e,this.entitiesService=t,this.converterService=r,this.shapeGettersService=i,this.wiresService=s,this.booleansService=n}vertexFromXYZ(e){return this.entitiesService.makeVertex([e.x,e.y,e.z])}vertexFromPoint(e){return this.entitiesService.makeVertex(e.point)}verticesFromPoints(e){return e.points.map((e=>this.vertexFromPoint({point:e})))}verticesCompoundFromPoints(e){const t=this.verticesFromPoints(e);return this.converterService.makeCompound({shapes:t})}getVertices(e){return this.shapeGettersService.getVertices(e)}getVerticesAsPoints(e){const t=this.shapeGettersService.getVertices(e);return this.verticesToPoints({shapes:t})}verticesToPoints(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool.Pnt(e),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}pointsToVertices(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool.Pnt(e),r=[t.X(),t.Y(),t.Z()];return t.delete(),r}))}vertexToPoint(e){return this.converterService.vertexToPoint(e)}projectPoints(e){const t=e.points.map((t=>[t[0]+e.direction[0],t[1]+e.direction[1],t[2]+e.direction[2]])).map(((t,r)=>({start:e.points[r],end:t})));return this.wiresService.createLines({lines:t,returnCompound:!1}).map(((t,r)=>{const i=this.booleansService.intersection({shapes:[t,e.shape],keepEdges:!1}).map((e=>this.shapeGettersService.getVertices({shape:e})));if(i){const t=this.verticesToPoints({shapes:i.flat().filter((e=>void 0!==e))});return e.projectionType===G.pointProjectionTypeEnum.closest?[this.getClosestPointFromPoints(t,e.points[r])]:e.projectionType===G.pointProjectionTypeEnum.furthest?[this.getFurthestPointFromPoints(t,e.points[r])]:e.projectionType===G.pointProjectionTypeEnum.closestAndFurthest?[this.getClosestPointFromPoints(t,e.points[r]),this.getFurthestPointFromPoints(t,e.points[r])]:e.projectionType===G.pointProjectionTypeEnum.all?t:void 0}})).flat().filter((e=>void 0!==e))}getClosestPointFromPoints(e,t){let r=Number.MAX_VALUE,i=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s<r&&(r=s,i=e)})),i}getFurthestPointFromPoints(e,t){let r=0,i=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s>r&&(r=s,i=e)})),i}distanceBetweenTwoPoints(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}}class Re{constructor(e,t,r,i){this.occ=e,this.shapeGettersService=t,this.converterService=r,this.facesService=i}getShellSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}sewFaces(e){const t=new this.occ.BRepBuilderAPI_Sewing(e.tolerance,!0,!0,!0,!1);e.shapes.forEach((e=>{t.Add(e)}));const r=new this.occ.Message_ProgressRange_1;t.Perform(r);const i=t.SewedShape(),s=this.converterService.getActualTypeOfShape(i);return t.delete(),r.delete(),i.delete(),s}}class Me{constructor(e,t,r,i,s,n,o,a,c,h){this.occ=e,this.vecHelper=t,this.iteratorService=r,this.converterService=i,this.entitiesService=s,this.transformsService=n,this.shapeGettersService=o,this.edgesService=a,this.operationsService=c,this.facesService=h}filletEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.radius)throw Error("Radius not defined");const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational),r=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE),i=[];for(;r.More();){const s=this.occ.TopoDS.Edge_1(r.Current());i.push(s),t.Add_2(e.radius,s),r.Next()}const s=t.Shape();return t.delete(),r.delete(),i.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);let r,i=0,s=0;const n=e.indexes;if(this.iteratorService.forEachEdge(e.shape,((r,o)=>{if(n.includes(r)){let r=e.radius;if(e.radiusList&&(r=e.radiusList[s],s++),void 0===r)throw Error("Radius not defined, or radiusList not correct length");t.Add_2(r,o),i++}})),0===i)throw new Error("Fillet Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!");r=t.Shape(),t.delete();const o=this.converterService.getActualTypeOfShape(r);return r.delete(),o}}filletEdgesListOneRadius(e){if(e.edges&&e.edges.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach((r=>{t.Add_2(e.radius,r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesList(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.edges.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach(((r,i)=>{t.Add_2(e.radiusList[i],r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgeVariableRadius(e){if(e.paramsU&&e.paramsU.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);this.assignVariableFilletToEdge(e,t);const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesSameVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach((r=>{this.assignVariableFilletToEdge({edge:r,paramsU:e.paramsU,radiusList:e.radiusList,shape:e.shape},t)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}filletEdgesVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusLists&&e.radiusLists.length>0&&e.paramsULists.length===e.radiusLists.length&&e.paramsULists.length===e.edges.length&&e.radiusLists.length===e.edges.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach(((r,i)=>{this.assignVariableFilletToEdge({edge:r,paramsU:e.paramsULists[i],radiusList:e.radiusLists[i],shape:e.shape},t)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}assignVariableFilletToEdge(e,t){const r=new this.occ.TColgp_Array1OfPnt2d_2(1,e.paramsU.length);e.paramsU.forEach(((t,i)=>{r.SetValue(i+1,this.entitiesService.gpPnt2d([t,e.radiusList[i]]))})),t.Add_5(r,e.edge)}chamferEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.distance)throw Error("Distance is undefined");const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE),i=[];for(;r.More();){const s=this.occ.TopoDS.Edge_1(r.Current());i.push(s),t.Add_2(e.distance,s),r.Next()}const s=t.Shape();return t.delete(),r.delete(),i.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);let r,i=0,s=0;const n=e.indexes;this.iteratorService.forEachEdge(e.shape,((r,o)=>{if(n.includes(r)){let r=e.distance;if(e.distanceList&&(r=e.distanceList[s],s++),void 0===r)throw Error("Distance not defined and/or distance list incorrect length");t.Add_2(r,o),i++}})),0===i?(console.error("Chamfer Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!"),r=e.shape):r=t.Shape(),t.delete();const o=this.converterService.getActualTypeOfShape(r);return r.delete(),o}}chamferEdgesList(e){if(e.edges&&e.edges.length>0&&e.distanceList&&e.distanceList.length>0&&e.edges.length===e.distanceList.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{const s=e.distanceList[i];if(void 0===s)throw Error("Distance is not defined");t.Add_2(s,r)}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgeTwoDistances(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);t.Add_3(e.distance1,e.distance2,e.edge,e.face);const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}chamferEdgesTwoDistances(e){if(e.edges&&e.edges.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{t.Add_3(e.distance1,e.distance2,r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgesTwoDistancesLists(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances1&&e.distances1.length>0&&e.distances2&&e.distances2.length>0&&e.edges.length===e.faces.length&&e.edges.length===e.distances1.length&&e.edges.length===e.distances2.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{t.Add_3(e.distances1[i],e.distances2[i],r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgeDistAngle(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=this.vecHelper.degToRad(e.angle);t.AddDA(e.distance,r,e.edge,e.face);const i=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(i);return i.delete(),s}chamferEdgesDistsAngles(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances&&e.distances.length>0&&e.angles&&e.angles.length>0&&e.edges.length===e.distances.length&&e.edges.length===e.faces.length&&e.edges.length===e.angles.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((r,i)=>{const s=this.vecHelper.degToRad(e.angles[i]);t.AddDA(e.distances[i],s,r,e.faces[i])}));const r=t.Shape();t.delete();const i=this.converterService.getActualTypeOfShape(r);return r.delete(),i}}chamferEdgesDistAngle(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),r=this.vecHelper.degToRad(e.angle);e.edges.forEach(((i,s)=>{t.AddDA(e.distance,r,i,e.faces[s])}));const i=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(i);return i.delete(),s}}fillet2d(e){if(e.indexes&&e.radiusList&&e.radiusList.length!==e.indexes.length)throw new Error("When using radius list, length of the list must match index list of corners that you want to fillet.");let t,r=!1;if(e.shape.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_FACE)t=this.converterService.getActualTypeOfShape(e.shape),r=!0;else{if(e.shape.ShapeType()!==this.occ.TopAbs_ShapeEnum.TopAbs_WIRE)throw new Error("You can only fillet a 2d wire or a 2d face.");{const r=new this.occ.BRepBuilderAPI_MakeFace_15(e.shape,!0),i=new this.occ.Message_ProgressRange_1;r.Build(i);const s=r.Shape();t=this.converterService.getActualTypeOfShape(s),s.delete(),i.delete(),r.delete()}}const i=new this.occ.BRepFilletAPI_MakeFillet2d_2(t),s=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);let n=1;const o=[];for(;s.More();s.Next()){const e=this.occ.TopoDS.Vertex_1(s.Current());n%2==0&&o.push(e),n++}r||e.shape.Closed_1()||o.pop();let a=0;o.forEach(((t,r)=>{e.indexes?e.indexes.includes(r+1)&&(this.applyRadiusToVertex(e,i,t,a),a++):this.applyRadiusToVertex(e,i,t,r)}));const c=new this.occ.Message_ProgressRange_1;let h;if(i.Build(c),r)h=i.Shape();else if(i.IsDone()){const e=i.Shape(),t=this.shapeGettersService.getWires({shape:e});1===t.length&&(h=t[0])}else{const r=this.facesService.faceNormalOnUV({shape:t,paramU:.5,paramV:.5});h=this.fillet3DWire({shape:e.shape,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:r})}return s.delete(),i.delete(),c.delete(),o.forEach((e=>e.delete())),h}fillet3DWire(e){let t=!1;if(e.radiusList&&e.radiusList.length>0&&e.indexes&&e.indexes.length>0){if(e.radiusList.length!==e.indexes.length)throw new Error("Radius list and indexes are not the same length");t=!0}let r=this.edgesService.fixEdgeOrientationsAlongWire({shape:e.shape});if(t&&e.shape.Closed_1()){const t=this.edgesService.getEdgesAlongWire({shape:e.shape}),i=t.shift(),s=[...t,i];r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:s})}else r=this.converterService.getActualTypeOfShape(e.shape.Reversed());const i=this.operationsService.extrude({shape:r,direction:e.direction});let s=e.indexes;if(t){const t=e.indexes.filter((e=>e>2)),r=Math.max(...t),i=[5];let n=5;for(let e=0;e<r;e++)n+=3,i.push(n);s=e.indexes.map((t=>e.shape.Closed_1()?t<=2?t:i[t-3]:1===t?2:i[t-2]))}const n=this.filletEdges({shape:i,radius:e.radius,indexes:s,radiusList:e.radiusList}),o=[],a=this.shapeGettersService.getFaces({shape:n});a.forEach(((e,t)=>{const r=this.shapeGettersService.getEdges({shape:e})[3];o.push(r)}));const c=this.converterService.combineEdgesAndWiresIntoAWire({shapes:o}),h=this.transformsService.translate({shape:c,translation:e.direction.map((e=>-e))});return i.delete(),n.delete(),a.forEach((e=>e.delete())),o.forEach((e=>e.delete())),h}applyRadiusToVertex(e,t,r,i){if(e.radiusList){const s=e.radiusList;t.AddFillet(r,s[i])}else e.radius&&t.AddFillet(r,e.radius)}}class Le{constructor(e,t,r,i,s,n,o,a){this.occ=e,this.shapeGettersService=t,this.facesService=r,this.enumService=i,this.entitiesService=s,this.converterService=n,this.transformsService=o,this.vectorHelperService=a}fromClosedShell(e){const t=this.converterService.getActualTypeOfShape(e.shape),r=new this.occ.BRepBuilderAPI_MakeSolid_3(t),i=r.Solid();return r.delete(),t.delete(),i}createBox(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.height/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,t)}createCube(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.size/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.size,e.size,e.size,t)}createBoxFromCorner(e){const t=this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,e.corner),r=this.transformsService.translate({shape:t,translation:[e.width/2,e.height/2,e.length/2]});return t.delete(),r}createCylinder(e){const t=e.direction?e.direction:[0,1,0];let r,i;i=void 0===e.angle?2*Math.PI:this.vectorHelperService.degToRad(e.angle);const s=this.entitiesService.bRepPrimAPIMakeCylinder(e.center,t,e.radius,e.height,i);if(e.originOnCenter){const i=-e.height/2,n=this.vectorHelperService.normalize(t);r=this.transformsService.translate({shape:s,translation:[n[0]*i,n[1]*i,n[2]*i]}),s.delete()}else r=s;return r}createCylindersOnLines(e){return e.lines.map((t=>this.entitiesService.bRepPrimAPIMakeCylinderBetweenPoints(t.start,t.end,e.radius)))}createSphere(e){return this.entitiesService.bRepPrimAPIMakeSphere(e.center,[0,0,1],e.radius)}createCone(e){const t=this.entitiesService.gpAx2(e.center,e.direction),r=new this.occ.BRepPrimAPI_MakeCone_4(t,e.radius1,e.radius2,e.height,e.angle),i=r.Shape();return r.delete(),t.delete(),i}filterSolidPoints(e){const t=[];if(e.points.length>0){const r=new this.occ.BRepClass3d_SolidClassifier_1;return r.Load(e.shape),e.points.forEach((i=>{const s=this.entitiesService.gpPnt(i);r.Perform(s,e.tolerance);const n=r.State(),o=this.enumService.getTopAbsStateEnum(n);e.keepOn&&o===G.topAbsStateEnum.on&&t.push(i),e.keepIn&&o===G.topAbsStateEnum.in&&t.push(i),e.keepOut&&o===G.topAbsStateEnum.out&&t.push(i),e.keepUnknown&&o===G.topAbsStateEnum.unknown&&t.push(i),s.delete()})),r.delete(),t}return[]}getSolidVolume(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.VolumeProperties_1(e.shape,t,!0,!1,!1);const r=t.Mass();return t.delete(),r}getSolidSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}getSolidsVolumes(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidVolume({shape:e})))}getSolidCenterOfMass(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.VolumeProperties_1(e.shape,t,!0,!1,!1);const r=t.CentreOfMass(),i=[r.X(),r.Y(),r.Z()];return t.delete(),r.delete(),i}getSolidsCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidCenterOfMass({shape:e})))}getSolids(e){return this.shapeGettersService.getSolids(e)}}!function(e){e.HexDto=class{constructor(e){this.color="#0000ff",void 0!==e&&(this.color=e)}},e.InvertHexDto=class{constructor(e){this.color="#0000ff",this.blackAndWhite=!1,void 0!==e&&(this.color=e)}},e.HexDtoMapped=class{constructor(e,t,r){this.color="#0000ff",this.from=0,this.to=255,void 0!==e&&(this.color=e),void 0!==t&&(this.from=t),void 0!==r&&(this.to=r)}},e.RGBObjectMaxDto=class{constructor(e,t){this.min=0,this.max=255,void 0!==e&&(this.rgb=e),void 0!==t&&(this.max=t)}},e.RGBMinMaxDto=class{constructor(e,t,r,i,s){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==r&&(this.b=r),void 0!==i&&(this.min=i),void 0!==s&&(this.max=s)}},e.RGBObjectDto=class{constructor(e){void 0!==e&&(this.rgb=e)}}}(V||(V={})),function(e){let t;!function(e){e.first="first",e.last="last"}(t=e.firstLastEnum||(e.firstLastEnum={})),e.ListItemDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.SubListDto=class{constructor(e,t,r,i){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexStart=t),void 0!==r&&(this.indexEnd=r),void 0!==i&&(this.clone=i)}},e.ListCloneDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RepeatInPatternDto=class{constructor(e){this.clone=!0,this.lengthLimit=100,void 0!==e&&(this.list=e)}},e.SortDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.SortJsonDto=class{constructor(e,t,r){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==r&&(this.orderAsc=r)}},e.ListDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.GroupListDto=class{constructor(e,t,r){this.nrElements=2,this.keepRemainder=!1,void 0!==e&&(this.list=e),void 0!==t&&(this.nrElements=t),void 0!==r&&(this.keepRemainder=r)}},e.MultiplyItemDto=class{constructor(e,t){void 0!==e&&(this.item=e),void 0!==t&&(this.times=t)}},e.AddItemAtIndexDto=class{constructor(e,t,r,i){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.index=r),void 0!==i&&(this.clone=i)}},e.AddItemAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.AddItemsAtIndexesDto=class{constructor(e,t,r,i){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.items=t),void 0!==r&&(this.indexes=r),void 0!==i&&(this.clone=i)}},e.RemoveItemAtIndexDto=class{constructor(e,t,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==r&&(this.clone=r)}},e.RemoveItemsAtIndexesDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexes=t),void 0!==r&&(this.clone=r)}},e.RemoveNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.RandomThresholdDto=class{constructor(e,t,r){this.threshold=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.threshold=t),void 0!==r&&(this.clone=r)}},e.RemoveDuplicatesDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RemoveDuplicatesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.tolerance=r),void 0!==t&&(this.clone=t)}},e.GetByPatternDto=class{constructor(e,t){this.pattern=[!0,!0,!1],void 0!==e&&(this.list=e),void 0!==t&&(this.pattern=t)}},e.GetNthItemDto=class{constructor(e,t,r,i){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==r&&(this.offset=r),void 0!==i&&(this.clone=i)}},e.GetLongestListLength=class{constructor(e){void 0!==e&&(this.lists=e)}},e.MergeElementsOfLists=class{constructor(e,t){this.level=0,void 0!==e&&(this.lists=e),void 0!==t&&(this.level=t)}},e.AddItemDto=class{constructor(e,t,r){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==r&&(this.clone=r)}},e.AddItemFirstLastDto=class{constructor(e,r,i,s){this.position=t.last,this.clone=!0,void 0!==e&&(this.list=e),void 0!==r&&(this.item=r),void 0!==i&&(this.position=i),void 0!==s&&(this.clone=s)}}}(z||(z={})),function(e){let t;!function(e){e.less="<",e.lessOrEqual="<=",e.greater=">",e.greaterOrEqual=">=",e.tripleEqual="===",e.tripleNotEqual="!==",e.equal="==",e.notEqual="!="}(t=e.BooleanOperatorsEnum||(e.BooleanOperatorsEnum={})),e.ComparisonDto=class{constructor(e,t,r){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operator=r)}},e.BooleanDto=class{constructor(e){this.boolean=!1,void 0!==e&&(this.boolean=e)}},e.BooleanListDto=class{constructor(e){void 0!==e&&(this.booleans=e)}},e.ValueGateDto=class{constructor(e,t){this.boolean=!1,void 0!==e&&(this.value=e),void 0!==t&&(this.boolean=t)}},e.TwoValueGateDto=class{constructor(e,t){void 0!==e&&(this.value1=e),void 0!==t&&(this.value2=t)}},e.RandomBooleansDto=class{constructor(e){this.length=10,this.trueThreshold=.5,void 0!==e&&(this.length=e)}},e.TwoThresholdRandomGradientDto=class{},e.ThresholdBooleanListDto=class{},e.ThresholdGapsBooleanListDto=class{}}(j||(j={})),function(e){let t,r,i;!function(e){e.add="add",e.subtract="subtract",e.multiply="multiply",e.divide="divide",e.power="power",e.modulus="modulus"}(t=e.mathTwoNrOperatorEnum||(e.mathTwoNrOperatorEnum={})),function(e){e.absolute="absolute",e.negate="negate",e.ln="ln",e.log10="log10",e.tenPow="tenPow",e.round="round",e.floor="floor",e.ceil="ceil",e.sqrt="sqrt",e.sin="sin",e.cos="cos",e.tan="tan",e.asin="asin",e.acos="acos",e.atan="atan",e.log="log",e.exp="exp",e.radToDeg="radToDeg",e.degToRad="degToRad"}(r=e.mathOneNrOperatorEnum||(e.mathOneNrOperatorEnum={})),function(e){e.easeInSine="easeInSine",e.easeOutSine="easeOutSine",e.easeInOutSine="easeInOutSine",e.easeInQuad="easeInQuad",e.easeOutQuad="easeOutQuad",e.easeInOutQuad="easeInOutQuad",e.easeInCubic="easeInCubic",e.easeOutCubic="easeOutCubic",e.easeInOutCubic="easeInOutCubic",e.easeInQuart="easeInQuart",e.easeOutQuart="easeOutQuart",e.easeInOutQuart="easeInOutQuart",e.easeInQuint="easeInQuint",e.easeOutQuint="easeOutQuint",e.easeInOutQuint="easeInOutQuint",e.easeInExpo="easeInExpo",e.easeOutExpo="easeOutExpo",e.easeInOutExpo="easeInOutExpo",e.easeInCirc="easeInCirc",e.easeOutCirc="easeOutCirc",e.easeInOutCirc="easeInOutCirc",e.easeInElastic="easeInElastic",e.easeOutElastic="easeOutElastic",e.easeInOutElastic="easeInOutElastic",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack",e.easeInBounce="easeInBounce",e.easeOutBounce="easeOutBounce",e.easeInOutBounce="easeInOutBounce"}(i=e.easeEnum||(e.easeEnum={})),e.ModulusDto=class{constructor(e,t){this.number=1,this.modulus=2,void 0!==e&&(this.number=e),void 0!==t&&(this.modulus=t)}},e.NumberDto=class{constructor(e){this.number=1,void 0!==e&&(this.number=e)}},e.EaseDto=class{constructor(e){this.x=.5,this.min=0,this.max=1,void 0!==e&&(this.x=e)}},e.RoundToDecimalsDto=class{constructor(e,t){this.number=1.123456,this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}},e.ActionOnTwoNumbersDto=class{constructor(e,t,r){this.first=1,this.second=1,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==r&&(this.operation=r)}},e.TwoNumbersDto=class{constructor(e,t){this.first=1,this.second=2,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.ActionOnOneNumberDto=class{constructor(e,t){this.number=1,void 0!==e&&(this.number=e),void 0!==t&&(this.operation=t)}},e.RemapNumberDto=class{constructor(e,t,r,i,s){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==e&&(this.number=e),void 0!==t&&(this.fromLow=t),void 0!==r&&(this.fromHigh=r),void 0!==i&&(this.toLow=i),void 0!==s&&(this.toHigh=s)}},e.RandomNumberDto=class{constructor(e,t){this.low=0,this.high=1,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t)}},e.RandomNumbersDto=class{constructor(e,t,r){this.low=0,this.high=1,this.count=10,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t),void 0!==r&&(this.count=r)}},e.ToFixedDto=class{constructor(e,t){this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}}}(q||(q={})),function(e){e.PointDto=class{constructor(e){void 0!==e&&(this.point=e)}},e.PointXYZDto=class{constructor(e,t,r){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.PointXYDto=class{constructor(e,t){this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.TwoPointsDto=class{constructor(e,t){void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t)}},e.DrawPointDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.point=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.pointMesh=n)}},e.DrawPointsDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.size=r),void 0!==i&&(this.colours=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.pointsMesh=n)}},e.TransformPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.transformation=t)}},e.TransformPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.TranslatePointsWithVectorsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translations=t)}},e.TranslatePointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translation=t)}},e.TranslateXYZPointsDto=class{constructor(e,t,r,i){this.x=0,this.y=1,this.z=0,void 0!==e&&(this.points=e),void 0!==t&&(this.x=t),void 0!==r&&(this.y=r),void 0!==i&&(this.z=i)}},e.ScalePointsCenterXYZDto=class{constructor(e,t,r){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.scaleXyz=r)}},e.StretchPointsDirFromCenterDto=class{constructor(e,t,r,i){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r),void 0!==i&&(this.scale=i)}},e.RotatePointsCenterAxisDto=class{constructor(e,t,r,i){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.points=e),void 0!==t&&(this.angle=t),void 0!==r&&(this.axis=r),void 0!==i&&(this.center=i)}},e.TransformsForPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.ThreePointsNormalDto=class{constructor(e,t,r,i){this.reverseNormal=!1,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.point3=r),void 0!==i&&(this.reverseNormal=i)}},e.ThreePointsToleranceDto=class{constructor(e,t,r,i){this.tolerance=1e-7,void 0!==e&&(this.start=e),void 0!==t&&(this.center=t),void 0!==r&&(this.end=r),void 0!==i&&(this.tolerance=i)}},e.PointsMaxFilletsHalfLineDto=class{constructor(e,t,r){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.checkLastWithFirst=t),void 0!==r&&(this.tolerance=r)}},e.RemoveConsecutiveDuplicatesDto=class{constructor(e,t,r){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.tolerance=t),void 0!==r&&(this.checkFirstAndLast=r)}},e.ClosestPointFromPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.point=t)}},e.TwoPointsToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==r&&(this.tolerance=r)}},e.StartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t)}},e.StartEndPointsListDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoints=t)}},e.MultiplyPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.amountOfPoints=t)}},e.SpiralDto=class{constructor(e,t,r,i,s){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==e&&(this.radius=e),void 0!==t&&(this.numberPoints=t),void 0!==r&&(this.widening=r),void 0!==i&&(this.factor=i),void 0!==s&&(this.phi=s)}},e.HexGridScaledToFitDto=class{constructor(e,t,r,i,s,n){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==r&&(this.nrHexagonsInHeight=r),void 0!==i&&(this.nrHexagonsInWidth=i),void 0!==s&&(this.centerGrid=s),void 0!==n&&(this.pointsOnGround=n)}},e.HexGridCentersDto=class{constructor(e,t,r,i,s){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==e&&(this.nrHexagonsX=e),void 0!==t&&(this.nrHexagonsY=t),void 0!==r&&(this.radiusHexagon=r),void 0!==i&&(this.orientOnCenter=i),void 0!==s&&(this.pointsOnGround=s)}}}(Y||(Y={})),function(e){e.TextDto=class{constructor(e){this.text="Hello World",void 0!==e&&(this.text=e)}},e.TextSplitDto=class{constructor(e,t){this.text="a,b,c",this.separator=",",void 0!==e&&(this.text=e),void 0!==t&&(this.separator=t)}},e.TextReplaceDto=class{constructor(e,t,r){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==e&&(this.text=e),void 0!==t&&(this.search=t),void 0!==r&&(this.replaceWith=r)}},e.TextJoinDto=class{constructor(e,t){this.separator=",",void 0!==e&&(this.list=e),void 0!==t&&(this.separator=t)}},e.ToStringDto=class{constructor(e){void 0!==e&&(this.item=e)}},e.ToStringEachDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.TextFormatDto=class{constructor(e,t){this.text="Hello {0}",this.values=["World"],void 0!==e&&(this.text=e),void 0!==t&&(this.values=t)}},e.VectorCharDto=class{constructor(e,t,r,i,s){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==e&&(this.char=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.extrudeOffset=s)}},e.VectorTextDto=class{constructor(e,t,r,i,s,n,o,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==r&&(this.yOffset=r),void 0!==i&&(this.height=i),void 0!==s&&(this.lineSpacing=s),void 0!==n&&(this.letterSpacing=n),void 0!==o&&(this.align=o),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(X||(X={})),function(e){e.RotationCenterAxisDto=class{constructor(e,t,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.axis=t),void 0!==r&&(this.center=r)}},e.RotationCenterDto=class{constructor(e,t){this.angle=90,this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.center=t)}},e.RotationCenterYawPitchRollDto=class{constructor(e,t,r,i){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==e&&(this.yaw=e),void 0!==t&&(this.pitch=t),void 0!==r&&(this.roll=r),void 0!==i&&(this.center=i)}},e.ScaleXYZDto=class{constructor(e){this.scaleXyz=[1,1,1],void 0!==e&&(this.scaleXyz=e)}},e.StretchDirCenterDto=class{constructor(e,t,r){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t),void 0!==r&&(this.direction=r)}},e.ScaleCenterXYZDto=class{constructor(e,t){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.center=e),void 0!==t&&(this.scaleXyz=t)}},e.UniformScaleDto=class{constructor(e){this.scale=1,void 0!==e&&(this.scale=e)}},e.UniformScaleFromCenterDto=class{constructor(e,t){this.scale=1,this.center=[0,0,0],void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t)}},e.TranslationXYZDto=class{constructor(e){this.translation=[0,0,0],void 0!==e&&(this.translation=e)}},e.TranslationsXYZDto=class{constructor(e){void 0!==e&&(this.translations=e)}}}($||($={})),function(e){e.DateDto=class{constructor(e){void 0!==e&&(this.date=e)}},e.DateStringDto=class{constructor(e){void 0!==e&&(this.dateString=e)}},e.DateSecondsDto=class{constructor(e,t){this.seconds=30,void 0!==e&&(this.date=e),void 0!==t&&(this.seconds=t)}},e.DateDayDto=class{constructor(e,t){this.day=1,void 0!==e&&(this.date=e),void 0!==t&&(this.day=t)}},e.DateYearDto=class{constructor(e,t){this.year=1,void 0!==e&&(this.date=e),void 0!==t&&(this.year=t)}},e.DateMonthDto=class{constructor(e,t){this.month=1,void 0!==e&&(this.date=e),void 0!==t&&(this.month=t)}},e.DateHoursDto=class{constructor(e,t){this.hours=1,void 0!==e&&(this.date=e),void 0!==t&&(this.hours=t)}},e.DateMinutesDto=class{constructor(e,t){this.minutes=1,void 0!==e&&(this.date=e),void 0!==t&&(this.minutes=t)}},e.DateMillisecondsDto=class{constructor(e,t){this.milliseconds=1,void 0!==e&&(this.date=e),void 0!==t&&(this.milliseconds=t)}},e.DateTimeDto=class{constructor(e,t){this.time=1,void 0!==e&&(this.date=e),void 0!==t&&(this.time=t)}},e.CreateFromUnixTimeStampDto=class{constructor(e){this.unixTimeStamp=1,void 0!==e&&(this.unixTimeStamp=e)}},e.CreateDateDto=class{constructor(e,t,r,i,s,n,o){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==e&&(this.year=e),void 0!==t&&(this.month=t),void 0!==r&&(this.day=r),void 0!==i&&(this.hours=i),void 0!==s&&(this.minutes=s),void 0!==n&&(this.seconds=n),void 0!==o&&(this.milliseconds=o)}}}(Z||(Z={})),function(e){e.LinePointsDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineStartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoints=e),void 0!==t&&(this.endPoints=t)}},e.DrawLineDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.line=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.lineMesh=n)}},e.DrawLinesDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.linesMesh=n)}},e.PointsLinesDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.LineDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.SegmentDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.LinesDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.LineLineIntersectionDto=class{constructor(e,t,r){this.checkSegmentsOnly=!0,void 0!==e&&(this.line1=e),void 0!==t&&(this.line2=t),void 0!==r&&(this.tolerance=r)}},e.PointOnLineDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.line=e),void 0!==t&&(this.param=t)}},e.TransformLineDto=class{constructor(e,t){void 0!==e&&(this.line=e),void 0!==t&&(this.transformation=t)}},e.TransformsLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}},e.TransformLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}}}(Q||(Q={})),function(e){e.PolylineCreateDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylinePropertiesDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.TransformPolylineDto=class{constructor(e,t){void 0!==e&&(this.polyline=e),void 0!==t&&(this.transformation=t)}},e.DrawPolylineDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polyline=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.polylineMesh=n)}},e.DrawPolylinesDto=class{constructor(e,t,r,i,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.opacity=t),void 0!==r&&(this.colours=r),void 0!==i&&(this.size=i),void 0!==s&&(this.updatable=s),void 0!==n&&(this.polylinesMesh=n)}},e.SegmentsToleranceDto=class{constructor(e){this.tolerance=1e-5,void 0!==e&&(this.segments=e)}},e.PolylineToleranceDto=class{constructor(e,t){this.tolerance=1e-5,void 0!==e&&(this.polyline=e),void 0!==t&&(this.tolerance=t)}},e.TwoPolylinesToleranceDto=class{constructor(e,t,r){this.tolerance=1e-5,void 0!==e&&(this.polyline1=e),void 0!==t&&(this.polyline2=t),void 0!==r&&(this.tolerance=r)}}}(J||(J={})),function(e){e.SignedDistanceFromPlaneToPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.plane=t)}},e.TriangleDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.TriangleToleranceDto=class{constructor(e){this.tolerance=1e-7,void 0!==e&&(this.triangle=e)}},e.TriangleTriangleToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.triangle1=e),void 0!==t&&(this.triangle2=t),void 0!==r&&(this.tolerance=r)}},e.MeshMeshToleranceDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.mesh1=e),void 0!==t&&(this.mesh2=t),void 0!==r&&(this.tolerance=r)}}}(K||(K={})),function(e){e.TwoVectorsDto=class{constructor(e,t){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.VectorBoolDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RemoveAllDuplicateVectorsDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.tolerance=t)}},e.RemoveConsecutiveDuplicateVectorsDto=class{constructor(e,t,r){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.checkFirstAndLast=t),void 0!==r&&(this.tolerance=r)}},e.VectorsTheSameDto=class{constructor(e,t,r){this.tolerance=1e-7,void 0!==e&&(this.vec1=e),void 0!==t&&(this.vec2=t),void 0!==r&&(this.tolerance=r)}},e.VectorDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.Vector3Dto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RangeMaxDto=class{constructor(e){void 0!==e&&(this.max=e)}},e.VectorXYZDto=class{constructor(e,t,r){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==r&&(this.z=r)}},e.VectorXYDto=class{constructor(e,t){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.SpanDto=class{constructor(e,t,r){this.step=.1,this.min=0,this.max=1,void 0!==e&&(this.step=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.SpanEaseItemsDto=class{constructor(e,t,r,i){this.nrItems=100,this.min=0,this.max=1,this.ease=q.easeEnum.easeInSine,this.intervals=!1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r),void 0!==i&&(this.ease=i)}},e.SpanLinearItemsDto=class{constructor(e,t,r){this.nrItems=100,this.min=0,this.max=1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==r&&(this.max=r)}},e.RayPointDto=class{constructor(e,t,r){void 0!==e&&(this.point=e),void 0!==t&&(this.distance=t),void 0!==r&&(this.vector=r)}},e.VectorsDto=class{constructor(e){void 0!==e&&(this.vectors=e)}},e.FractionTwoVectorsDto=class{constructor(e,t,r){this.fraction=.5,void 0!==e&&(this.fraction=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}},e.VectorScalarDto=class{constructor(e,t){void 0!==e&&(this.scalar=e),void 0!==t&&(this.vector=t)}},e.TwoVectorsReferenceDto=class{constructor(e,t,r){void 0!==e&&(this.reference=e),void 0!==t&&(this.first=t),void 0!==r&&(this.second=r)}}}(ee||(ee={}));class Be{getItem(e){if(e.index<0||e.index>=e.list.length)throw new Error("Index out of bounds");let t;return t=e.clone?structuredClone(e.list[e.index]):e.list[e.index],t}randomGetThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()<e.threshold&&r.push(t[i]);return r}getSubList(e){let t;return t=e.clone?structuredClone(e.list.slice(e.indexStart,e.indexEnd)):e.list.slice(e.indexStart,e.indexEnd),t}getNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth==0&&r.push(t[i]);return r}getByPattern(e){const{list:t,pattern:r}=e;if(!r||0===r.length)throw new Error("Pattern is empty or does not exist");const i=r.length,s=t.length,n=[];if(i>=s)t.forEach(((e,t)=>{!0===r[t]&&n.push(e)}));else{const e=[],o=Math.ceil(s/i);for(let t=0;t<o;t++)e.push(...r);t.forEach(((t,r)=>{!0===e[r]&&n.push(t)}))}return n}mergeElementsOfLists(e){const t=e.lists,r=e.level,i=[],s=[];t.forEach((e=>{const t=e.flat(r);i.push(t)}));const n=this.getLongestListLength({lists:i});for(let e=0;e<n;e++){const t=[];for(let r=0;r<i.length;r++){const s=i[r][e];void 0!==s&&t.push(s)}t.length>0&&s.push(t)}let o=[];if(r>0)for(let e=0;e<r;e++)e===r-1&&0!==e?o[e-1].push(s):e===r-1?o.push(s):o.push([]);else o=s;return o}getLongestListLength(e){let t=0;return e.lists?(e.lists.forEach((e=>{e.length>t&&(t=e.length)})),t):void 0}reverse(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.reverse()}flipLists(e){if(e.list.length>0){const t=e.list[0].length;let r=!0;if(e.list.forEach((e=>{e.length!==t&&(r=!1)})),r){const r=[];for(let i=0;i<t;i++){const t=[];e.list.forEach((e=>{t.push(e[i])})),r.push(t)}return r}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(e){return(e=>{const{nrElements:t,list:r,keepRemainder:i}=e,s=t,n=[];let o=[];return r.forEach(((e,t)=>{o.push(e),(t+1)%s==0&&(n.push(o),o=[]),o.length>0&&i&&t===r.length-1&&n.push(o)})),n})(e)}getListDepth(e){let t=0,r=!0,i=e.list;for(;r;){let e=!1;for(let t=0;t<i.length;t++)Array.isArray(i[t])&&(e=!0);i=i.flat(),e?t++:(t++,r=!1)}return t}listLength(e){return e.list.length}addItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,0,e.item),t}addItemAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));let r=[...e.indexes];return r=r.filter((e=>e>=0&&e<=t.length)),r.sort(((e,t)=>e-t)),r.forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.item)})),t}addItemsAtIndexes(e){if(e.items.length!==e.indexes.length)throw new Error("Items and indexes must have the same length");for(let t=0;t<e.indexes.length;t++)if(t>0&&e.indexes[t-1]>e.indexes[t])throw new Error("Indexes must be in ascending order");let t=e.list;return e.clone&&(t=structuredClone(e.list)),[...e.indexes].forEach(((r,i)=>{r>=0&&r+i<=t.length&&t.splice(r+i,0,e.items[i])})),t}removeItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,1),t}removeItemsAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[...e.indexes];return r.sort(((e,t)=>t-e)),r.forEach((e=>{e>=0&&e<t.length&&t.splice(e,1)})),t}removeAllItems(e){return e.list.length=0,e.list}removeNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<t.length;i++)(i+e.offset)%e.nth!=0&&r.push(t[i]);return r}randomRemoveThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];for(let i=0;i<e.list.length;i++)Math.random()>e.threshold&&r.push(t[i]);return r}removeDuplicateNumbers(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((e,t,r)=>r.indexOf(e)===t))}removeDuplicateNumbersTolerance(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((t,r,i)=>i.findIndex((r=>Math.abs(r-t)<e.tolerance))===r))}addItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.push(e.item),t}prependItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.unshift(e.item),t}addItemFirstLast(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.position===z.firstLastEnum.first?t.unshift(e.item):t.push(e.item),t}createEmptyList(){return[]}repeat(e){const t=[];for(let r=0;r<e.times;r++)t.push(e.item);return t}repeatInPattern(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const r=[];let i=0,s=0;for(;i<e.lengthLimit;)r.push(t[s]),s++,s===t.length&&(s=0),i++;return r}sortNumber(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((e,t)=>e-t)):t.sort(((e,t)=>t-e))}sortTexts(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort():t.sort().reverse()}sortByPropValue(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((t,r)=>t[e.property]-r[e.property])):t.sort(((t,r)=>r[e.property]-t[e.property]))}}class Ie{boolean(e){return e.boolean}randomBooleans(e){const t=[];for(let r=0;r<e.length;r++)t.push(Math.random()<e.trueThreshold);return t}twoThresholdRandomGradient(e){const t=[];return e.numbers.forEach((r=>{if(r<e.thresholdTotalTrue)t.push(!0);else if(r>e.thresholdTotalFalse)t.push(!1);else{const i=r-e.thresholdTotalTrue,s=(e.thresholdTotalFalse-e.thresholdTotalTrue)/e.nrLevels,n=Math.ceil(i/s)/e.nrLevels;Math.random()>n?t.push(!0):t.push(!1)}})),t}thresholdBooleanList(e){const t=[];return e.numbers.forEach((r=>{r<e.threshold?t.push(!0):t.push(!1)})),e.inverse?t.map((e=>!e)):t}thresholdGapsBooleanList(e){const t=[];return e.numbers.forEach((r=>{let i=!1;e.gapThresholds.forEach((e=>{const s=e[0],n=e[1];r>=s&&r<=n&&(t.push(!0),i=!0)})),i||t.push(!1)})),e.inverse?t.map((e=>!e)):t}not(e){return!e.boolean}notList(e){return e.booleans.map((e=>!e))}compare(e){switch(e.operator){case"==":return e.first==e.second;case"!=":return e.first!=e.second;case"===":return e.first===e.second;case"!==":return e.first!==e.second;case"<":return e.first<e.second;case"<=":return e.first<=e.second;case">":return e.first>e.second;case">=":return e.first>=e.second;default:return!1}}valueGate(e){return e.boolean?e.value:void 0}firstDefinedValueGate(e){let t;return t=void 0!==e.value1?e.value1:void 0!==e.value2?e.value2:void 0,t}}class Ue{number(e){return e.number}twoNrOperation(e){let t;switch(e.operation){case q.mathTwoNrOperatorEnum.add:t=e.first+e.second;break;case q.mathTwoNrOperatorEnum.subtract:t=e.first-e.second;break;case q.mathTwoNrOperatorEnum.multiply:t=e.first*e.second;break;case q.mathTwoNrOperatorEnum.divide:t=e.first/e.second;break;case q.mathTwoNrOperatorEnum.power:t=Math.pow(e.first,e.second);break;case q.mathTwoNrOperatorEnum.modulus:t=e.first%e.second}return t}modulus(e){return this.twoNrOperation({first:e.number,second:e.modulus,operation:q.mathTwoNrOperatorEnum.modulus})}roundToDecimals(e){return Math.round(e.number*Math.pow(10,e.decimalPlaces))/Math.pow(10,e.decimalPlaces)}oneNrOperation(e){let t;switch(e.operation){case q.mathOneNrOperatorEnum.absolute:t=Math.abs(e.number);break;case q.mathOneNrOperatorEnum.negate:t=-e.number;break;case q.mathOneNrOperatorEnum.ln:t=Math.log(e.number);break;case q.mathOneNrOperatorEnum.log10:t=Math.log10(e.number);break;case q.mathOneNrOperatorEnum.tenPow:t=Math.pow(10,e.number);break;case q.mathOneNrOperatorEnum.round:t=Math.round(e.number);break;case q.mathOneNrOperatorEnum.floor:t=Math.floor(e.number);break;case q.mathOneNrOperatorEnum.ceil:t=Math.ceil(e.number);break;case q.mathOneNrOperatorEnum.sqrt:t=Math.sqrt(e.number);break;case q.mathOneNrOperatorEnum.sin:t=Math.sin(e.number);break;case q.mathOneNrOperatorEnum.cos:t=Math.cos(e.number);break;case q.mathOneNrOperatorEnum.tan:t=Math.tan(e.number);break;case q.mathOneNrOperatorEnum.asin:t=Math.asin(e.number);break;case q.mathOneNrOperatorEnum.acos:t=Math.acos(e.number);break;case q.mathOneNrOperatorEnum.atan:t=Math.atan(e.number);break;case q.mathOneNrOperatorEnum.log:t=Math.log(e.number);break;case q.mathOneNrOperatorEnum.exp:t=Math.exp(e.number);break;case q.mathOneNrOperatorEnum.degToRad:t=e.number*Math.PI/180;break;case q.mathOneNrOperatorEnum.radToDeg:t=180*e.number/Math.PI}return t}remap(e){return(e.number-e.fromLow)*(e.toHigh-e.toLow)/(e.fromHigh-e.fromLow)+e.toLow}random(){return Math.random()}randomNumber(e){return Math.random()*(e.high-e.low)+e.low}randomNumbers(e){const t=[];for(let r=0;r<e.count;r++)t.push(this.randomNumber(e));return t}pi(){return Math.PI}toFixed(e){return e.number.toFixed(e.decimalPlaces)}add(e){return e.first+e.second}subtract(e){return e.first-e.second}multiply(e){return e.first*e.second}divide(e){return e.first/e.second}power(e){return Math.pow(e.first,e.second)}sqrt(e){return Math.sqrt(e.number)}abs(e){return Math.abs(e.number)}round(e){return Math.round(e.number)}floor(e){return Math.floor(e.number)}ceil(e){return Math.ceil(e.number)}negate(e){return-e.number}ln(e){return Math.log(e.number)}log10(e){return Math.log10(e.number)}tenPow(e){return Math.pow(10,e.number)}sin(e){return Math.sin(e.number)}cos(e){return Math.cos(e.number)}tan(e){return Math.tan(e.number)}asin(e){return Math.asin(e.number)}acos(e){return Math.acos(e.number)}atan(e){return Math.atan(e.number)}exp(e){return Math.exp(e.number)}degToRad(e){return e.number*Math.PI/180}radToDeg(e){return 180*e.number/Math.PI}ease(e){const t=e.x,r=e.min,i=e.max,s=this[e.ease](t);return this.remap({number:s,fromLow:0,fromHigh:1,toLow:r,toHigh:i})}easeInSine(e){return 1-Math.cos(e*Math.PI/2)}easeOutSine(e){return Math.sin(e*Math.PI/2)}easeInOutSine(e){return-(Math.cos(Math.PI*e)-1)/2}easeInQuad(e){return e*e}easeOutQuad(e){return 1-(1-e)*(1-e)}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}easeInCubic(e){return e*e*e}easeOutCubic(e){return 1-Math.pow(1-e,3)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}easeInQuart(e){return e*e*e*e}easeOutQuart(e){return 1-Math.pow(1-e,4)}easeInOutQuart(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}easeInQuint(e){return e*e*e*e*e}easeOutQuint(e){return 1-Math.pow(1-e,5)}easeInOutQuint(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}easeInExpo(e){return 0===e?0:Math.pow(2,10*e-10)}easeOutExpo(e){return 1===e?1:1-Math.pow(2,-10*e)}easeInOutExpo(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}easeInCirc(e){return 1-Math.sqrt(1-e*e)}easeOutCirc(e){return Math.sqrt(1-Math.pow(e-1,2))}easeInOutCirc(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}easeInBack(e){return 2.70158*e*e*e-1.70158*e*e}easeOutBack(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}easeInOutBack(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}easeInElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)}easeOutElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1}easeInOutElastic(e){const t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}easeInBounce(e){return 1-this.easeOutBounce(1-e)}easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375}easeInOutBounce(e){return e<.5?(1-this.easeOutBounce(1-2*e))/2:(1+this.easeOutBounce(2*e-1))/2}}class We{constructor(e,t,r,i){this.geometryHelper=e,this.transforms=t,this.vector=r,this.lists=i}transformPoint(e){const t=e.transformation;let r=[e.point];return r=this.geometryHelper.transformControlPoints(t,r),r[0]}transformPoints(e){return this.geometryHelper.transformControlPoints(e.transformation,e.points)}transformsForPoints(e){if(e.points.length!==e.transformation.length)throw new Error("You must provide equal nr of points and transformations");return e.points.map(((t,r)=>this.geometryHelper.transformControlPoints(e.transformation[r],[t])[0]))}translatePoints(e){const t=this.transforms.translationXYZ({translation:e.translation});return this.geometryHelper.transformControlPoints(t,e.points)}translatePointsWithVectors(e){if(e.points.length!==e.translations.length)throw new Error("You must provide equal nr of points and translations");const t=this.transforms.translationsXYZ({translations:e.translations});return e.points.map(((e,r)=>this.geometryHelper.transformControlPoints(t[r],[e])[0]))}translateXYZPoints(e){const t=this.transforms.translationXYZ({translation:[e.x,e.y,e.z]});return this.geometryHelper.transformControlPoints(t,e.points)}scalePointsCenterXYZ(e){const t=this.transforms.scaleCenterXYZ({center:e.center,scaleXyz:e.scaleXyz});return this.geometryHelper.transformControlPoints(t,e.points)}stretchPointsDirFromCenter(e){const t=this.transforms.stretchDirFromCenter({center:e.center,scale:e.scale,direction:e.direction});return this.geometryHelper.transformControlPoints(t,e.points)}rotatePointsCenterAxis(e){const t=this.transforms.rotationCenterAxis({center:e.center,axis:e.axis,angle:e.angle});return this.geometryHelper.transformControlPoints(t,e.points)}boundingBoxOfPoints(e){const t=[],r=[],i=[];e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])}));const s=[Math.min(...t),Math.min(...r),Math.min(...i)],n=[Math.max(...t),Math.max(...r),Math.max(...i)];return{min:s,max:n,center:[(s[0]+n[0])/2,(s[1]+n[1])/2,(s[2]+n[2])/2],width:n[0]-s[0],height:n[1]-s[1],length:n[2]-s[2]}}closestPointFromPointsDistance(e){return this.closestPointFromPointData(e).distance}closestPointFromPointsIndex(e){return this.closestPointFromPointData(e).index}closestPointFromPoints(e){return this.closestPointFromPointData(e).point}distance(e){const t=e.endPoint[0]-e.startPoint[0],r=e.endPoint[1]-e.startPoint[1],i=e.endPoint[2]-e.startPoint[2];return Math.sqrt(t*t+r*r+i*i)}distancesToPoints(e){return e.endPoints.map((t=>this.distance({startPoint:e.startPoint,endPoint:t})))}multiplyPoint(e){const t=[];for(let r=0;r<e.amountOfPoints;r++)t.push([e.point[0],e.point[1],e.point[2]]);return t}getX(e){return e.point[0]}getY(e){return e.point[1]}getZ(e){return e.point[2]}averagePoint(e){const t=[],r=[],i=[];return e.points.forEach((e=>{t.push(e[0]),r.push(e[1]),i.push(e[2])})),[t.reduce(((e,t)=>e+t),0)/e.points.length,r.reduce(((e,t)=>e+t),0)/e.points.length,i.reduce(((e,t)=>e+t),0)/e.points.length]}pointXYZ(e){return[e.x,e.y,e.z]}pointXY(e){return[e.x,e.y]}spiral(e){const t=e.phi,r=Math.log(t)/(Math.PI/e.widening),i=[],s=e.radius/e.numberPoints;for(let t=0;t<e.radius;t+=s){const s=Math.log(t/e.factor)/r,n=t*Math.cos(s),o=t*Math.sin(s);i.push([n||0,o||0,0])}return i}hexGrid(e){const t=Math.sqrt(Math.pow(e.radiusHexagon,2)-Math.pow(e.radiusHexagon/2,2)),r=[];for(let i=0;i<e.nrHexagonsX;i++){const s=i*t*2;for(let i=0;i<e.nrHexagonsY;i++){const n=(e.radiusHexagon+e.radiusHexagon/2)*i,o=s+(i%2==0?0:t);r.push([o,n,0])}}if(e.orientOnCenter){const e=r[r.length-1][0]/2,t=r[r.length-1][1]/2;r.forEach(((i,s)=>{r[s]=[i[0]-e,i[1]-t,0]}))}return e.pointsOnGround&&r.forEach(((e,t)=>{r[t]=[e[0],0,e[1]]})),r}hexGridScaledToFit(e){var t,r,i,s;let n=e.width,o=e.height,a=e.nrHexagonsInHeight,c=e.nrHexagonsInWidth,h=null!==(t=e.extendTop)&&void 0!==t&&t,l=null!==(r=e.extendBottom)&&void 0!==r&&r,d=null!==(i=e.extendLeft)&&void 0!==i&&i,u=null!==(s=e.extendRight)&&void 0!==s&&s;const{flatTop:p=!1,centerGrid:f=!1,pointsOnGround:v=!1}=e;if(p){const t=n;n=e.height,o=t;const r=c;c=a,a=r;const i=h,s=l;h=d,l=u,d=s,u=i}if(n<=0||o<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const m=g.map((e=>this.getRegularHexagonVertices(e,1)));let S=1/0,y=-1/0,b=1/0,w=-1/0;for(const e of m)for(const t of e)t[0]<S&&(S=t[0]),t[0]>y&&(y=t[0]),t[1]<b&&(b=t[1]),t[1]>w&&(w=t[1]);const E=y-S,x=w-b,T=E>1e-9?n/E:1,P=x>1e-9?o/x:1;let C=g.map((e=>[(e[0]-S)*T,(e[1]-b)*P,0])),k=m.map((e=>e.map((e=>[(e[0]-S)*T,(e[1]-b)*P,0])))),O=1/0,A=-1/0,D=0;if(0!==k.length){const e=k[0];if(D=this.safestPointsMaxFilletHalfLine({points:e,checkLastWithFirst:!0,tolerance:1e-7}),e.forEach(((t,r)=>{const i=e[(r+1)%e.length],s=this.distance({startPoint:t,endPoint:i});s<O&&(O=s),s>A&&(A=s)})),h||l||d||u){const t=e[0],r=e[1],i=t[1]-r[1],s=r[0]-t[0];if(h&&!l){const e={center:[0,0,0],direction:[0,1,0],scale:o/(o-i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(l&&!h){const e={center:[0,o,0],direction:[0,-1,0],scale:o/(o-i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(h&&l){const e={center:[0,o/2,0],direction:[0,1,0],scale:o/(o-2*i)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&!u){const e={center:[n,0,0],direction:[1,0,0],scale:n/(n-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(u&&!d){const e={center:[0,0,0],direction:[1,0,0],scale:n/(n-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&u){const e={center:[n/2,0,0],direction:[1,0,0],scale:n/(n-2*s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}}}if(p){C=this.rotatePointsCenterAxis({points:C,center:[n/2,o/2,0],axis:[0,0,1],angle:90}),k=k.map((e=>this.rotatePointsCenterAxis({points:e,center:[n/2,o/2,0],axis:[0,0,1],angle:90})));const e=this.vector.sub({first:[o/2,n/2,0],second:[n/2,o/2,0]});C=this.translatePoints({points:C,translation:e}),k=k.map((t=>this.translatePoints({points:t,translation:e})))}if(f){let e=n/2,t=o/2;p&&(e=o/2,t=n/2);for(let r=0;r<C.length;r++)C[r][0]-=e,C[r][1]-=t;for(let r=0;r<k.length;r++)for(let i=0;i<k[r].length;i++)k[r][i][0]-=e,k[r][i][1]-=t}if(v){for(let e=0;e<C.length;e++)C[e]=[C[e][0],0,C[e][1]];for(let e=0;e<k.length;e++)for(let t=0;t<k[e].length;t++)k[e][t]=[k[e][t][0],0,k[e][t][1]]}if(p){const t=this.lists.groupNth({list:k.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),r=this.lists.flipLists({list:t});r.forEach((e=>e.reverse())),k=r.flat();const i=this.lists.groupNth({list:C.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),s=this.lists.flipLists({list:i});s.forEach((e=>e.reverse())),C=s.flat()}return{centers:C,hexagons:k,shortestDistEdge:O,longestDistEdge:A,maxFilletRadius:D}}maxFilletRadius(e){const{start:t,center:r,end:i,tolerance:s=1e-7}=e,n=this.vector.sub({first:t,second:i}),o=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:n}),c=this.vector.length({vector:o});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:o});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s)return 0;if(d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a,c)*p}maxFilletRadiusHalfLine(e){const{start:t,center:r,end:i,tolerance:s=1e-7}=e,n=this.vector.sub({first:t,second:i}),o=this.vector.sub({first:r,second:i}),a=this.vector.length({vector:n}),c=this.vector.length({vector:o});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:o});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s||d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a/2,c/2)*p}maxFilletsHalfLine(e){const{points:t,checkLastWithFirst:r=!1,tolerance:i=1e-7}=e,s=t.length,n=[];if(s<3)return n;for(let e=1;e<s-1;e++){const r=t[e-1],s=t[e],o={start:r,center:t[e+1],end:s,tolerance:i};n.push(this.maxFilletRadiusHalfLine(o))}if(r&&s>=3){const e=t[s-1],r=t[0],o={start:e,center:t[1],end:r,tolerance:i};n.push(this.maxFilletRadiusHalfLine(o));const a=t[s-2],c=t[s-1],h={start:a,center:t[0],end:c,tolerance:i};n.push(this.maxFilletRadiusHalfLine(h))}return n}safestPointsMaxFilletHalfLine(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}removeConsecutiveDuplicates(e){return this.geometryHelper.removeConsecutivePointDuplicates(e.points,e.checkFirstAndLast,e.tolerance)}normalFromThreePoints(e){const t=e.point1,r=e.point2,i=e.point3;if(!t||!r||!i||3!==t.length||3!==r.length||3!==i.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const s=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=i[0]-t[0],c=i[1]-t[1],h=i[2]-t[2];let l=n*h-o*c,d=o*a-s*h,u=s*c-n*a;if(0!==l||0!==d||0!==u)return e.reverseNormal&&(l=-l,d=-d,u=-u),this.vector.normalized({vector:[l,d,u]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(e){let t,r,i=Number.MAX_SAFE_INTEGER;for(let s=0;s<e.points.length;s++){const n=e.points[s],o=this.distance({startPoint:e.point,endPoint:n});o<i&&(i=o,t=s,r=n)}return{index:t+1,distance:i,point:r}}twoPointsAlmostEqual(e){const t=e.point1,r=e.point2;return this.distance({startPoint:t,endPoint:r})<e.tolerance}sortPoints(e){return[...e.points].sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]))}getRegularHexagonVertices(e,t){const r=[],i=e[0],s=e[1],n=e[2],o=Math.PI/3;for(let e=0;e<6;e++){const a=o*e;r.push([i+t*Math.sin(a),s+t*Math.cos(a),n])}return r}}const Ne={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class Ge{constructor(e){this.point=e}create(e){return e.text}split(e){return e.text.split(e.separator)}replaceAll(e){return e.text.split(e.search).join(e.replaceWith)}join(e){return e.list.join(e.separator)}toString(e){return e.item.toString()}toStringEach(e){return e.list.map((e=>e.toString()))}format(e){return e.text.replace(/{(\d+)}/g,((t,r)=>void 0!==e.values[r]?e.values[r]:t))}vectorChar(e){const{xOffset:t,yOffset:r,font:i,input:s,height:n,extrudeOffset:o}=this.vectorParamsChar(e);let a=s.charCodeAt(0);a&&i[a]||(a=63);const c=[].concat(i[a]),h=(n-o)/i.height,l=o/2,d=c.shift()*h,u=[];let p=[];for(let e=0,i=c.length;e<i;e+=2){const i=h*c[e]+t,s=h*c[e+1]+r+l;void 0===c[e]?(u.push(p),p=[],e--):p.push([i,0,s])}return p.length&&u.push(p),{width:d,height:n,paths:u}}vectorText(e){const{xOffset:t,yOffset:r,height:i,align:s,extrudeOffset:n,lineSpacing:o,letterSpacing:a}=Object.assign({},Ne,e),c=e.text;if("string"!=typeof c)throw new Error("text must be a string");const h=i*a;let l=0,d={width:0,height:0,chars:[]},u=[];const p=()=>{l=Math.max(l,d.width),d.chars.length&&u.push(d),d={width:0,height:0,chars:[]}};let f,v=t,g=r;const m=c.length;for(let e=0;e<m;e++){const r=c[e];if("\n"===r){p(),v=t,g-=i*o;continue}f=this.vectorChar({xOffset:v,yOffset:g,height:i,extrudeOffset:n,char:r});const s=f.width+h;v+=s,d.width+=s,d.height=Math.max(d.height,f.height)," "!==r&&(d.chars=d.chars.concat(f))}if(d.chars.length&&p(),u=u.map((e=>{const t=l-e.width;return s===H.horizontalAlignEnum.right?this.translateLine({x:t},e):s===H.horizontalAlignEnum.center?this.translateLine({x:t/2},e):e})),e.centerOnOrigin){const e=[];u.forEach((t=>{t.chars.forEach((t=>{t.paths.forEach((t=>{e.push(...t)}))}))}));const t=this.point.boundingBoxOfPoints({points:e});u.forEach((e=>{e.chars.forEach((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[-t.center[0],-t.center[1],-t.center[2]]}))),e)))}))}return u}vectorParamsChar(e){const t=Object.assign({},Ne,e);return t.input=e.char||t.char,t}translateLine(e,t){const{x:r,y:i}=Object.assign({x:0,y:0},e);return t.chars=t.chars.map((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[r,0,i]}))),e))),t}}class He{constructor(e,t){this.math=e,this.geometryHelper=t}removeAllDuplicateVectors(e){return this.geometryHelper.removeAllDuplicateVectors(e.vectors,e.tolerance)}removeConsecutiveDuplicateVectors(e){return this.geometryHelper.removeConsecutiveVectorDuplicates(e.vectors,e.checkFirstAndLast,e.tolerance)}vectorsTheSame(e){return this.geometryHelper.vectorsTheSame(e.vec1,e.vec2,e.tolerance)}angleBetween(e){return this.math.radToDeg({number:Math.acos(this.dot({first:e.first,second:e.second})/(this.norm({vector:e.first})*this.norm({vector:e.second})))})}angleBetweenNormalized2d(e){const t=e.first[0]*e.second[1]-e.first[1]*e.second[0];return this.math.radToDeg({number:Math.atan2(t,this.dot({first:e.first,second:e.second}))})}positiveAngleBetween(e){const t=this.signedAngleBetween(e);return t<0?360+t:t}addAll(e){const t=[];for(let r=0;r<e.vectors[0].length;r++){let i=0;for(const t of e.vectors)i+=t[r];t.push(i)}return t}add(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]+e.second[r]);return t}all(e){return e.vector.every((e=>e))}cross(e){const t=[];return t.push(e.first[1]*e.second[2]-e.first[2]*e.second[1]),t.push(e.first[2]*e.second[0]-e.first[0]*e.second[2]),t.push(e.first[0]*e.second[1]-e.first[1]*e.second[0]),t}distSquared(e){let t=0;for(let r=0;r<e.first.length;r++)t+=Math.pow(e.first[r]-e.second[r],2);return t}dist(e){return Math.sqrt(this.distSquared(e))}div(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]/e.scalar);return t}domain(e){return e.vector[e.vector.length-1]-e.vector[0]}dot(e){let t=0;for(let r=0;r<e.first.length;r++)t+=e.first[r]*e.second[r];return t}finite(e){return e.vector.map((e=>isFinite(e)))}isZero(e){return 0===this.norm({vector:e.vector})}lerp(e){return this.add({first:this.mul({vector:e.first,scalar:e.fraction}),second:this.mul({vector:e.second,scalar:1-e.fraction})})}max(e){return Math.max(...e.vector)}min(e){return Math.min(...e.vector)}mul(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(e.vector[r]*e.scalar);return t}neg(e){const t=[];for(let r=0;r<e.vector.length;r++)t.push(-e.vector[r]);return t}normSquared(e){return this.dot({first:e.vector,second:e.vector})}norm(e){const t=this.normSquared(e);return 0!==t?Math.sqrt(t):t}normalized(e){if(!(this.length({vector:e.vector})<=1e-8))return this.div({scalar:this.norm(e),vector:e.vector})}onRay(e){return this.add({first:e.point,second:this.mul({vector:e.vector,scalar:e.distance})})}vectorXYZ(e){return[e.x,e.y,e.z]}vectorXY(e){return[e.x,e.y]}range(e){const t=[];for(let r=0;r<e.max;r++)t.push(r);return t}signedAngleBetween(e){const t=this.cross({first:e.first,second:e.second}),r=this.norm({vector:e.first})*this.norm({vector:e.second}),i=this.dot({first:e.first,second:e.second}),s=this.norm({vector:t})/r,n=i/r,o=Math.atan2(s,n),a=this.dot({first:e.reference,second:t})>0?o:2*Math.PI-o;return this.math.radToDeg({number:a})}span(e){const t=[];for(let r=e.min;r<=e.max;r+=e.step)t.push(r);return t}spanEaseItems(e){const t=[];for(let r=0;r<e.nrItems;r++){const i=1*r/(e.nrItems-1);t.push(this.math.ease({x:i,ease:e.ease,min:e.min,max:e.max}))}return e.intervals?t.map(((e,t,r)=>0===t?e:e-r[t-1])):t}spanLinearItems(e){const t=[],r=e.max-e.min;for(let i=0;i<e.nrItems;i++){const s=r*i/(e.nrItems-1);t.push(s+e.min)}return t}sub(e){const t=[];for(let r=0;r<e.first.length;r++)t.push(e.first[r]-e.second[r]);return t}sum(e){return e.vector.reduce(((e,t)=>e+t),0)}lengthSq(e){const t=e.vector;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}length(e){return Math.sqrt(this.lengthSq(e))}}class Ve{constructor(e,t){this.vector=e,this.math=t}rotationCenterAxis(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationAxis(e.axis,this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterX(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationX(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterY(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationY(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationZ(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterYawPitchRoll(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:e.yaw}),this.math.degToRad({number:e.pitch}),this.math.degToRad({number:e.roll})),this.translation(e.center[0],e.center[1],e.center[2])]}scaleCenterXYZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]),this.translation(e.center[0],e.center[1],e.center[2])]}scaleXYZ(e){return[this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2])]}stretchDirFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.stretchDirection(e.direction,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}uniformScale(e){return[this.scaling(e.scale,e.scale,e.scale)]}uniformScaleFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scale,e.scale,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}translationXYZ(e){return[this.translation(e.translation[0],e.translation[1],e.translation[2])]}translationsXYZ(e){return e.translations.map((e=>[this.translation(e[0],e[1],e[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(e,t,r){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1]}scaling(e,t,r){return[e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1]}rotationAxis(e,t){const r=Math.sin(-t),i=Math.cos(-t),s=1-i,n=this.vector.normalized({vector:e}),o=n[0],a=n[1],c=n[2],h=this.identity();return h[0]=o*o*s+i,h[1]=o*a*s-c*r,h[2]=o*c*s+a*r,h[3]=0,h[4]=a*o*s+c*r,h[5]=a*a*s+i,h[6]=a*c*s-o*r,h[7]=0,h[8]=c*o*s-a*r,h[9]=c*a*s+o*r,h[10]=c*c*s+i,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}rotationX(e){const t=Math.sin(e),r=Math.cos(e);return[1,0,0,0,0,r,t,0,0,-t,r,0,0,0,0,1]}rotationY(e){const t=Math.sin(e),r=Math.cos(e);return[r,0,-t,0,0,1,0,0,t,0,r,0,0,0,0,1]}rotationZ(e){const t=Math.sin(e),r=Math.cos(e);return[r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(e,t,r){const i=.5*r,s=.5*t,n=.5*e,o=Math.sin(i),a=Math.cos(i),c=Math.sin(s),h=Math.cos(s),l=Math.sin(n),d=Math.cos(n),u=d*c*a+l*h*o,p=l*h*a-d*c*o,f=d*h*o-l*c*a,v=d*h*a+l*c*o;return this.rotationMatrixFromQuat(u,p,f,v)}rotationMatrixFromQuat(e,t,r,i){const s=e*e,n=t*t,o=r*r,a=e*t,c=r*i,h=r*e,l=t*i,d=t*r,u=e*i,p=this.identity();return p[0]=1-2*(n+o),p[1]=2*(a+c),p[2]=2*(h-l),p[3]=0,p[4]=2*(a-c),p[5]=1-2*(o+s),p[6]=2*(d+u),p[7]=0,p[8]=2*(h+l),p[9]=2*(d-u),p[10]=1-2*(n+s),p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}stretchDirection(e,t){const r=this.vector.normalized({vector:e}),[i,s,n]=r;if(isNaN(i)||0===i&&0===s&&0===n)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const o=t-1;return[1+o*i*i,o*s*i,o*n*i,0,o*i*s,1+o*s*s,o*n*s,0,o*i*n,o*s*n,1+o*n*n,0,0,0,0,1]}}class ze{constructor(){this.getArrayDepth=e=>Array.isArray(e)?1+Math.max(...e.map(this.getArrayDepth)):0}transformControlPoints(e,t){return this.getFlatTransformations(e).forEach((e=>{t=this.transformPointsByMatrixArray(t,e)})),t}getFlatTransformations(e){let t=[];return 3===this.getArrayDepth(e)?e.forEach((e=>{t.push(...e)})):t=e,t}transformPointsByMatrixArray(e,t){return this.transformPointsCoordinates(e,t)}transformPointsCoordinates(e,t){const r=[];for(const i of e){const e=this.transformCoordinates(i[0],i[1],i[2],t);r.push(e)}return r}removeAllDuplicateVectors(e,t=1e-7){const r=[];return e.forEach((e=>{r.some((r=>this.vectorsTheSame(e,r,t)))||r.push(e)})),r}removeConsecutiveVectorDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];this.vectorsTheSame(s,n,r)||i.push(n),t===e.length-1&&i.push(s)}if(t){const e=i[0],t=i[i.length-1];this.vectorsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}vectorsTheSame(e,t,r){let i=!1;if(e.length!==t.length)return i;i=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],r)){i=!1;break}return i}approxEq(e,t,r){return Math.abs(e-t)<r}removeConsecutivePointDuplicates(e,t=!0,r=1e-7){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];this.arePointsTheSame(s,n,r)||i.push(n),t===e.length-1&&i.push(s)}if(t){const e=i[0],t=i[i.length-1];this.arePointsTheSame(e,t,r)&&i.pop()}}else 1===e.length&&i.push(...e);return i}arePointsTheSame(e,t,r){let i=!1;return 2===e.length&&2===t.length?this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&(i=!0):3===e.length&&3===t.length&&this.approxEq(e[0],t[0],r)&&this.approxEq(e[1],t[1],r)&&this.approxEq(e[2],t[2],r)&&(i=!0),i}transformCoordinates(e,t,r,i){const s=i,n=e*s[0]+t*s[4]+r*s[8]+s[12],o=e*s[1]+t*s[5]+r*s[9]+s[13],a=e*s[2]+t*s[6]+r*s[10]+s[14],c=1/(e*s[3]+t*s[7]+r*s[11]+s[15]);return[n*c,o*c,a*c]}}class je{constructor(e,t,r){this.vector=e,this.point=t,this.geometryHelper=r}getStartPoint(e){return e.line.start}getEndPoint(e){return e.line.end}length(e){return this.point.distance({startPoint:e.line.start,endPoint:e.line.end})}reverse(e){return{start:e.line.end,end:e.line.start}}transformLine(e){const t=e.transformation;let r=[e.line.start,e.line.end];return r=this.geometryHelper.transformControlPoints(t,r),{start:r[0],end:r[1]}}transformsForLines(e){return e.lines.map(((t,r)=>{const i=e.transformation[r];let s=[t.start,t.end];return s=this.geometryHelper.transformControlPoints(i,s),{start:s[0],end:s[1]}}))}create(e){return{start:e.start,end:e.end}}getPointOnLine(e){const t=e.line.start,r=e.line.end,i=e.param,s=[r[0]-t[0],r[1]-t[1],r[2]-t[2]];return[t[0]+i*s[0],t[1]+i*s[1],t[2]+i*s[2]]}linesBetweenPoints(e){const t=[];for(let r=1;r<e.points.length;r++){const i=e.points[r-1],s=e.points[r];t.push({start:i,end:s})}return t}linesBetweenStartAndEndPoints(e){return e.startPoints.map(((t,r)=>({start:t,end:e.endPoints[r]}))).filter((e=>0!==this.point.distance({startPoint:e.start,endPoint:e.end})))}lineToSegment(e){return[e.line.start,e.line.end]}linesToSegments(e){return e.lines.map((e=>[e.start,e.end]))}segmentToLine(e){return{start:e.segment[0],end:e.segment[1]}}segmentsToLines(e){return e.segments.map((e=>({start:e[0],end:e[1]})))}lineLineIntersection(e){const t=e.tolerance||1e-6,r=e.checkSegmentsOnly,i=e.line1,s=e.line2;if(!((null==i?void 0:i.start)&&i.end&&(null==s?void 0:s.start)&&s.end&&3===i.start.length&&3===i.end.length&&3===s.start.length&&3===s.end.length))return void console.error("Invalid line input to lineLineIntersection");const n=i.start,o=this.vector.sub({first:i.end,second:i.start}),a=s.start,c=this.vector.sub({first:s.end,second:s.start}),h=this.vector.sub({first:a,second:n}),l=this.vector.lengthSq({vector:o}),d=this.vector.lengthSq({vector:c});if(l<t*t||d<t*t)return;const u=this.vector.cross({first:o,second:c});if(this.vector.lengthSq({vector:u})<t*t){const e=this.vector.cross({first:h,second:o}),i=t*t*l;if(this.vector.lengthSq({vector:e})<i){if(r){const e=l<t*t?1:l,r=this.vector.dot({first:o,second:h})/e,i=this.vector.sub({first:s.end,second:n}),a=this.vector.dot({first:o,second:i})/e,c=[Math.min(r,a),Math.max(r,a)],d=[0,1];return Math.max(d[0],c[0]),void Math.min(d[1],c[1])}return n}return}const p=this.vector.dot({first:h,second:u}),f=t*t*t;if(Math.abs(p)>f)return;const v=l,g=d,m=this.vector.dot({first:o,second:c}),S=this.vector.dot({first:o,second:h}),y=this.vector.dot({first:c,second:h}),b=v*g-m*m;if(Math.abs(b)<t*t)return void console.error("Internal error: Denominator near zero after non-parallel check.");const w=(g*S-m*y)/b,E=(m*S-v*y)/b;if(r&&(w<-t||w>1+t||E<-t||E>1+t))return;const x=this.getPointOnLine({param:w,line:i});return[Math.abs(x[0])<t?0:x[0],Math.abs(x[1])<t?0:x[1],Math.abs(x[2])<t?0:x[2]]}}class qe{constructor(e,t,r,i){this.vector=e,this.point=t,this.line=r,this.geometryHelper=i}length(e){let t=0;for(let r=1;r<e.polyline.points.length;r++){const i=e.polyline.points[r-1],s=e.polyline.points[r];t+=this.point.distance({startPoint:i,endPoint:s})}return t}countPoints(e){return e.polyline.points.length}getPoints(e){return e.polyline.points}reverse(e){return{points:e.polyline.points.reverse()}}transformPolyline(e){const t=e.transformation;let r=e.polyline.points;return r=this.geometryHelper.transformControlPoints(t,r),{points:r}}create(e){return{points:e.points}}polylineToLines(e){return this.polylineToSegments(e).map((e=>({start:e[0],end:e[1]})))}polylineToSegments(e){const t=e.polyline,r=[],i=t.points,s=i.length;if(s<2)return r;for(let e=0;e<s-1;e++)r.push([i[e],i[e+1]]);return t.isClosed&&s>=2&&(this.point.twoPointsAlmostEqual({point1:i[s-1],point2:i[0],tolerance:1e-9})||r.push([i[s-1],i[0]])),r}polylineSelfIntersection(e){const{polyline:t,tolerance:r}=e,i=this.polylineToLines({polyline:t}),s=i.length;if(s<3)return[];const n=[],o=null!=r?r:1e-6;for(let e=0;e<s;e++)for(let r=e+1;r<s;r++){let a=r===e+1;if(!a&&t.isClosed&&0===e&&r===s-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:i[e],line2:i[r],checkSegmentsOnly:!0,tolerance:o});if(c){let e=!1;for(const t of n)if(this.point.twoPointsAlmostEqual({point1:c,point2:t,tolerance:o})){e=!0;break}e||n.push(c)}}return n}twoPolylineIntersection(e){const{polyline1:t,polyline2:r,tolerance:i}=e,s=this.polylineToLines({polyline:t}),n=this.polylineToLines({polyline:r}),o=[],a=null!=i?i:1e-6;for(const e of s)for(const t of n){const r=this.line.lineLineIntersection({line1:e,line2:t,checkSegmentsOnly:!0,tolerance:a});if(r){let e=!1;for(const t of o)if(this.point.twoPointsAlmostEqual({point1:r,point2:t,tolerance:a})){e=!0;break}e||o.push(r)}}return o}sortSegmentsIntoPolylines(e){var t;const r=null!==(t=e.tolerance)&&void 0!==t?t:1e-5,i=e.segments;if(!i||0===i.length)return[];const s=r*r,n=i.length,o=new Array(n).fill(!1),a=[],c=new Map,h=1/r,l=e=>`${Math.round(e[0]*h)},${Math.round(e[1]*h)},${Math.round(e[2]*h)}`;for(let e=0;e<n;e++){const t=i[e];if(this.point.twoPointsAlmostEqual({point1:t[0],point2:t[1],tolerance:r})){o[e]=!0;continue}const s=l(t[0]),n=l(t[1]),a={segmentIndex:e,endpointIndex:0,coords:t[0]},h={segmentIndex:e,endpointIndex:1,coords:t[1]};c.has(s)||c.set(s,[]),c.get(s).push(a),n!==s?(c.has(n)||c.set(n,[]),c.get(n).push(h)):c.get(s).push(h)}const d=e=>{const t=[],i=Math.round(e[0]*h),n=Math.round(e[1]*h),a=Math.round(e[2]*h);for(let e=-1;e<=1;e++)for(let r=-1;r<=1;r++)for(let s=-1;s<=1;s++)t.push(`${i+e},${n+r},${a+s}`);let l,d=s;for(const i of t){const t=c.get(i);if(t)for(const i of t)if(!o[i.segmentIndex]){const t=this.vector.sub({first:i.coords,second:e}),s=this.vector.lengthSq({vector:t});s<d&&this.point.twoPointsAlmostEqual({point1:i.coords,point2:e,tolerance:r})&&(l=i,d=s)}}if(l&&!o[l.segmentIndex])return l};for(let e=0;e<n;e++){if(o[e])continue;o[e]=!0;const t=i[e],s=[t[0],t[1]];let c=t[0],h=t[1],l=!1,u=0;for(;u++<n;){const e=d(h);if(!e)break;const t=i[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:c,tolerance:r})){l=!0,o[e.segmentIndex]=!0;break}o[e.segmentIndex]=!0,s.push(n),h=n}if(u=0,!l)for(;u++<n;){const e=d(c);if(!e)break;const t=i[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:h,tolerance:r})){l=!0,o[e.segmentIndex]=!0;break}o[e.segmentIndex]=!0,s.unshift(n),c=n}!l&&s.length>=2&&(l=this.point.twoPointsAlmostEqual({point1:c,point2:h,tolerance:r})),l&&s.length>2&&this.point.twoPointsAlmostEqual({point1:s[s.length-1],point2:s[0],tolerance:r})&&s.pop(),a.push({points:s,isClosed:l})}return a}maxFilletsHalfLine(e){return this.point.maxFilletsHalfLine({points:e.polyline.points,checkLastWithFirst:e.polyline.isClosed,tolerance:e.tolerance})}safestFilletRadius(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const r=Math.min(...t);return Math.max(0,r)}}class Ye{constructor(e,t){this.vector=e,this.polyline=t}signedDistanceToPlane(e){return this.vector.dot({first:e.plane.normal,second:e.point})-e.plane.d}calculateTrianglePlane(e){const t=Math.pow(e.tolerance||1e-7,2),r=this.vector.sub({first:e.triangle[1],second:e.triangle[0]}),i=this.vector.sub({first:e.triangle[2],second:e.triangle[0]}),s=this.vector.cross({first:r,second:i});if(this.vector.lengthSq({vector:s})<t)return;const n=this.vector.normalized({vector:s});return{normal:n,d:this.vector.dot({first:n,second:e.triangle[0]})}}triangleTriangleIntersection(e){const t=e.triangle1,r=e.triangle2,i=e.tolerance||1e-7,s=t[0],n=t[1],o=t[2],a=r[0],c=r[1],h=r[2],l=this.calculateTrianglePlane({triangle:t,tolerance:i}),d=this.calculateTrianglePlane({triangle:r,tolerance:i});if(!l||!d)return;const u=[this.signedDistanceToPlane({point:a,plane:l}),this.signedDistanceToPlane({point:c,plane:l}),this.signedDistanceToPlane({point:h,plane:l})];if(u[0]>i&&u[1]>i&&u[2]>i||u[0]<-i&&u[1]<-i&&u[2]<-i)return;const p=[this.signedDistanceToPlane({point:s,plane:d}),this.signedDistanceToPlane({point:n,plane:d}),this.signedDistanceToPlane({point:o,plane:d})];if(p[0]>i&&p[1]>i&&p[2]>i||p[0]<-i&&p[1]<-i&&p[2]<-i)return;const f=p.every((e=>Math.abs(e)<i)),v=u.every((e=>Math.abs(e)<i));if(f&&v)return;const g=this.vector.cross({first:l.normal,second:d.normal}),m=this.vector.dot({first:g,second:g});if(m<i*i)return;const S=[],y=[],b=[[s,n],[n,o],[o,s]],w=p;for(let e=0;e<3;++e){const t=b[e][0],r=b[e][1],s=w[e],n=w[(e+1)%3];if(Math.abs(s)<i&&S.push(t),s*n<0&&Math.abs(s-n)>i){const e=s/(s-n);S.push(this.computeIntersectionPoint(t,r,e))}}const E=[[a,c],[c,h],[h,a]],x=u;for(let e=0;e<3;++e){const t=E[e][0],r=E[e][1],s=x[e],n=x[(e+1)%3];if(Math.abs(s)<i&&y.push(t),s*n<0&&Math.abs(s-n)>i){const e=s/(s-n);y.push(this.computeIntersectionPoint(t,r,e))}}if(S.length<2||y.length<2)return;const T=l.normal,P=d.normal,C=l.d,k=d.d,O=this.vector.mul({vector:P,scalar:C}),A=this.vector.mul({vector:T,scalar:k}),D=this.vector.sub({first:O,second:A}),_=this.vector.cross({first:D,second:g}),F=this.vector.mul({vector:_,scalar:1/m}),R=S.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:F}),second:g}))),M=y.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:F}),second:g}))),L=[Math.min(...R),Math.max(...R)],B=[Math.min(...M),Math.max(...M)],I=Math.max(L[0],B[0]),U=Math.min(L[1],B[1]);if(I<U-i*m){const e=this.vector.add({first:F,second:this.vector.mul({vector:g,scalar:I/m})}),t=this.vector.add({first:F,second:this.vector.mul({vector:g,scalar:U/m})}),r=this.vector.sub({first:e,second:t});return this.vector.lengthSq({vector:r})>i*i?[e,t]:void 0}}meshMeshIntersectionSegments(e){const t=e.mesh1,r=e.mesh2,i=[];for(let s=0;s<t.length;++s)for(let n=0;n<r.length;++n){const o=t[s],a=r[n],c=this.triangleTriangleIntersection({triangle1:o,triangle2:a,tolerance:e.tolerance});c&&i.push(c)}return i}meshMeshIntersectionPolylines(e){const t=this.meshMeshIntersectionSegments(e);return this.polyline.sortSegmentsIntoPolylines({segments:t,tolerance:e.tolerance})}meshMeshIntersectionPoints(e){return this.meshMeshIntersectionPolylines(e).map((e=>e.isClosed?[...e.points,e.points[0]]:e.points))}computeIntersectionPoint(e,t,r){return this.vector.add({first:e,second:this.vector.mul({vector:this.vector.sub({first:t,second:e}),scalar:r})})}}class Xe{constructor(e,t,r,i,s,n,o,a){this.math=e,this.vector=t,this.point=r,this.transformsService=i,this.converterService=s,this.entitiesService=n,this.edgesService=o,this.wiresService=a}simpleLinearLengthDimension(e){const t=[],r=this.wiresService.createLineWireWithExtensions({start:e.start,end:e.end,extensionStart:e.crossingSize,extensionEnd:e.crossingSize});t.push(r);const i=this.transformsService.translate({shape:r,translation:e.direction}),s=this.point.translatePoints({points:[e.start,e.end],translation:e.direction}),n=s[0],o=s[1],a=this.wiresService.createLineWireWithExtensions({start:e.start,end:n,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),c=this.wiresService.createLineWireWithExtensions({start:e.end,end:o,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),h=this.wiresService.midPointOnWire({shape:i}),l=this.point.distance({startPoint:e.start,endPoint:e.end}),d=new G.TextWiresDto;d.text=l.toFixed(e.decimalPlaces)+" "+e.labelSuffix,d.xOffset=0,d.yOffset=0,d.height=e.labelSize,d.centerOnOrigin=!0;const u=this.wiresService.textWiresWithData(d),p=this.point.normalFromThreePoints({point1:e.start,point2:e.end,point3:h,reverseNormal:!0}),f=this.vector.sub({first:e.end,second:e.start}),v=this.transformsService.rotate({shape:u.compound,angle:-90,axis:[0,1,0]});t.push(...u.shapes.map((e=>e.shape)));const g=this.transformsService.alignNormAndAxis({shape:v,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:p,toAx:f});t.push(v);const m=this.vector.normalized({vector:e.direction}),S=this.vector.mul({vector:m,scalar:e.labelOffset}),y=this.vector.add({first:h,second:S}),b=this.transformsService.translate({shape:g,translation:y});t.push(g);const w=this.converterService.makeCompound({shapes:[i,a,c,b]});return t.forEach((e=>{e.delete()})),w}simpleAngularDimension(e){const t=[],r=this.vector.normalized({vector:e.direction1}),i=this.vector.mul({vector:r,scalar:e.radius}),s=this.point.translatePoints({points:[i],translation:e.center})[0],n=this.wiresService.createLineWireWithExtensions({start:e.center,end:s,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),o=this.vector.normalized({vector:e.direction2}),a=this.vector.mul({vector:o,scalar:e.radius}),c=this.point.translatePoints({points:[a],translation:e.center})[0],h=this.wiresService.createLineWireWithExtensions({start:e.center,end:c,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),l=this.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!0}),d=this.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!1}),u=this.entitiesService.createCircle(e.radius,e.center,d,G.typeSpecificityEnum.edge);t.push(u);const p=this.edgesService.arcFromCircleAndTwoPoints({circle:u,start:s,end:c,sense:!1});t.push(p);const f=this.wiresService.createWireFromEdge({shape:p}),v=this.wiresService.midPointOnWire({shape:f});let g=this.vector.angleBetween({first:e.direction1,second:e.direction2});e.radians&&(g=this.math.degToRad({number:g}));const m=new G.TextWiresDto;m.text=g.toFixed(e.decimalPlaces)+" "+e.labelSuffix,m.xOffset=0,m.yOffset=0,m.height=e.labelSize,m.centerOnOrigin=!0;const S=this.wiresService.textWiresWithData(m),y=this.vector.sub({first:v,second:e.center}),b=this.vector.normalized({vector:y}),w=this.transformsService.alignNormAndAxis({shape:S.compound,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:l,toAx:b});t.push(...S.shapes.map((e=>e.shape)));const E=this.vector.mul({vector:b,scalar:e.labelOffset}),x=this.vector.add({first:v,second:E}),T=this.transformsService.translate({shape:w,translation:x});t.push(w);const P=this.converterService.makeCompound({shapes:[n,h,f,T]});return t.forEach((e=>{e.delete()})),P}pinWithLabel(e){const t=this.wiresService.createLineWireWithExtensions({start:e.startPoint,end:e.endPoint,extensionStart:-e.offsetFromStart,extensionEnd:0}),r=new G.TextWiresDto;r.text=e.label,r.xOffset=0,r.yOffset=0,r.height=e.labelSize,r.centerOnOrigin=!0;const i=this.wiresService.textWiresWithData(r),s=i.data.width,n=this.vector.normalized({vector:e.direction}),o=this.vector.mul({vector:n,scalar:s/2+e.labelOffset}),a=this.point.translatePoints({points:[e.endPoint],translation:e.direction})[0],c=this.wiresService.createLineWireWithExtensions({start:e.endPoint,end:a,extensionStart:0,extensionEnd:0}),h=this.point.normalFromThreePoints({point1:e.startPoint,point2:e.endPoint,point3:a,reverseNormal:!1}),l=this.transformsService.rotate({shape:i.compound,angle:-90,axis:[0,1,0]}),d=i.shapes.map((e=>e.shape)),u=this.transformsService.alignNormAndAxis({shape:l,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:h,toAx:n});d.push(l);const p=this.vector.add({first:a,second:o}),f=this.transformsService.translate({shape:u,translation:p});d.push(u);const v=this.converterService.makeCompound({shapes:[t,f,c]});return d.forEach((e=>{e.delete()})),v}}class $e{constructor(e,t,r,i,s,n,o){this.occ=e,this.shapeGettersService=t,this.transformsService=r,this.edgesService=i,this.facesService=s,this.wiresService=n,this.mesh=o}shapeFacesToPolygonPoints(e){const t=this.shapeToMesh(e),r=[];return t.faceList.forEach((t=>{const i=t.vertex_coord,s=t.tri_indexes;for(let t=0;t<s.length;t+=3){const n=s[t],o=s[t+1],a=s[t+2];let c=[[i[3*n],i[3*n+1],i[3*n+2]],[i[3*o],i[3*o+1],i[3*o+2]],[i[3*a],i[3*a+1],i[3*a+2]]];e.reversedPoints&&(c=c.reverse()),r.push(c)}})),r}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){const t=[],r=[],i=[];let s=e.shape;if(s.IsNull())return{faceList:t,edgeList:r,pointsList:[]};if(this.occ.BRepTools.Clean(s,!0),e.adjustYtoZ){const t=this.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90}),r=this.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]});t.delete(),s.delete(),s=r}const n=[],o=this.shapeGettersService.getFaces({shape:s});let a;o&&o.length&&(a=new this.occ.BRepMesh_IncrementalMesh_2(s,e.precision,!1,.5,!1),o.forEach(((e,r)=>{const i=new this.occ.TopLoc_Location_1,s=this.occ.BRep_Tool.Triangulation(e,i,0);if(s.IsNull())return void console.error("Encountered Null Face!");const o={vertex_coord:[],normal_coord:[],uvs:[],tri_indexes:[],vertex_coord_vec:[],number_of_triangles:0,center_point:void 0,center_normal:void 0,face_index:r};o.center_point=this.facesService.pointOnUV({shape:e,paramU:.5,paramV:.5}),o.center_normal=this.facesService.normalOnUV({shape:e,paramU:.5,paramV:.5});const a=new this.occ.Poly_Connect_2(s),c=s.get();o.vertex_coord=new Array(3*c.NbNodes()),o.vertex_coord_vec=[];for(let e=0;e<c.NbNodes();e++){const t=c.Node(e+1).Transformed(i.Transformation()),r=c.UVNode(e+1);o.uvs[2*e+0]=r.X(),o.uvs[2*e+1]=r.Y(),o.vertex_coord[3*e+0]=t.X(),o.vertex_coord[3*e+1]=t.Y(),o.vertex_coord[3*e+2]=t.Z(),o.vertex_coord_vec.push([t.X(),t.Y(),t.Z()])}const h=new this.occ.TColgp_Array1OfDir_2(1,c.NbNodes());this.occ.StdPrs_ToolTriangulatedShape.Normal(e,a,h),o.normal_coord=new Array(3*h.Length());for(let e=0;e<h.Length();e++){const t=h.Value(e+1);o.normal_coord[3*e+0]=t.X(),o.normal_coord[3*e+1]=t.Y(),o.normal_coord[3*e+2]=t.Z()}const l=e.Orientation_1(),d=s.get().Triangles();o.tri_indexes=new Array(3*d.Length());let u=0;for(let e=1;e<=s.get().NbTriangles();e++){const t=d.Value(e);let r=t.Value(1),i=t.Value(2);const s=t.Value(3);if(l!==this.occ.TopAbs_Orientation.TopAbs_FORWARD){const e=r;r=i,i=e}o.tri_indexes[3*u+0]=r-1,o.tri_indexes[3*u+1]=i-1,o.tri_indexes[3*u+2]=s-1,u++}o.number_of_triangles=u,t.push(o),n.push(s),i.delete(),h.delete(),d.delete(),a.delete()})));for(let e=0;e<n.length;e++)n[e].Nullify(),n[e].delete();this.shapeGettersService.getEdges({shape:s}).forEach(((t,i)=>{const s={vertex_coord:[],middle_point:void 0,edge_index:-1};s.middle_point=this.edgesService.pointOnEdgeAtParam({shape:t,param:.5});const n=new this.occ.TopLoc_Location_1,o=new this.occ.BRepAdaptor_Curve_2(t),a=new this.occ.GCPnts_TangentialDeflection_2(o,e.precision,.1,2,1e-9,1e-7);s.vertex_coord=[];const c=a.NbPoints(),h=[];for(let e=0;e<c;e++){const t=a.Value(e+1);s.vertex_coord.push([t.X(),t.Y(),t.Z()]),h.push(t)}s.edge_index=i,r.push(s),h.forEach((e=>e.delete())),n.delete(),o.delete(),a.delete(),this.occ.BRepTools.Clean(t,!0)}));const c=this.shapeGettersService.getVertices({shape:s});return c.length>0&&c.forEach((e=>{const t=this.occ.BRep_Tool.Pnt(e);i.push([t.X(),t.Y(),t.Z()]),t.delete()})),a&&a.Delete(),this.occ.BRepTools.Clean(s,!0),{faceList:t,edgeList:r,pointsList:i}}meshMeshIntersectionWires(e){const t=e.shape1,r=e.shape2,i=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:r,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1}),n=this.mesh.meshMeshIntersectionPolylines({mesh1:i,mesh2:s}),o=[];return n.forEach((e=>{e.points&&e.points.length>0&&(e.isClosed?o.push(this.wiresService.createPolygonWire({points:e.points})):o.push(this.wiresService.createPolylineWire({points:e.points})))})),o}meshMeshIntersectionPoints(e){const t=e.shape1,r=e.shape2,i=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:r,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1});return this.mesh.meshMeshIntersectionPoints({mesh1:i,mesh2:s})}meshMeshIntersectionOfShapesWires(e){const t=[];return e.shapes.forEach(((r,i)=>{const s=e.shape,n=e.shapes[i];let o=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[i];t&&(o=t)}const a=this.meshMeshIntersectionWires({shape1:s,shape2:n,precision1:e.precision,precision2:o});t.push(...a)})),t}meshMeshIntersectionOfShapesPoints(e){const t=[];return e.shapes.forEach(((r,i)=>{const s=e.shape,n=e.shapes[i];let o=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[i];t&&(o=t)}const a=this.meshMeshIntersectionPoints({shape1:s,shape2:n,precision1:e.precision,precision2:o});t.push(...a)})),t}}class Ze{constructor(e,t,r){this.vecHelper=e,this.shapesHelperService=t,this.occ=r,this.geometryHelper=new ze,this.math=new Ue,this.vector=new He(this.math,this.geometryHelper),this.transforms=new Ve(this.vector,this.math),this.lists=new Be,this.point=new We(this.geometryHelper,this.transforms,this.vector,this.lists),this.line=new je(this.vector,this.point,this.geometryHelper),this.polyline=new qe(this.vector,this.point,this.line,this.geometryHelper),this.textService=new Ge(this.point),this.mesh=new Ye(this.vector,this.polyline),this.occRefReturns=new me(r),this.iteratorService=new Se(r),this.enumService=new ye(r),this.converterService=new be(r),this.entitiesService=new we(r),this.shapeGettersService=new Pe(r,this.enumService,this.iteratorService),this.geomService=new ke(r,this.vecHelper,this.entitiesService),this.transformsService=new xe(r,this.converterService,this.entitiesService,this.vecHelper),this.verticesService=new Fe(r,this.entitiesService,this.converterService,this.shapeGettersService,this.wiresService,this.booleansService),this.edgesService=new Ce(r,this.occRefReturns,this.shapeGettersService,this.entitiesService,this.iteratorService,this.converterService,this.enumService,this.geomService,this.transformsService,this.vecHelper),this.wiresService=new De(r,this.occRefReturns,this.vector,this.point,this.shapesHelperService,this.shapeGettersService,this.transformsService,this.enumService,this.entitiesService,this.converterService,this.geomService,this.edgesService,this.textService,this.filletsService,this.operationsService),this.dimensionsService=new Xe(this.math,this.vector,this.point,this.transformsService,this.converterService,this.entitiesService,this.edgesService,this.wiresService),this.meshingService=new $e(r,this.shapeGettersService,this.transformsService,this.edgesService,this.facesService,this.wiresService,this.mesh),this.booleansService=new Te(r,this.shapeGettersService),this.verticesService.wiresService=this.wiresService,this.verticesService.booleansService=this.booleansService,this.facesService=new _e(r,this.occRefReturns,this.entitiesService,this.enumService,this.shapeGettersService,this.converterService,this.booleansService,this.wiresService,this.transformsService,this.vecHelper,this.point,this.filletsService),this.meshingService.facesService=this.facesService,this.shellsService=new Re(r,this.shapeGettersService,this.converterService,this.facesService),this.solidsService=new Le(r,this.shapeGettersService,this.facesService,this.enumService,this.entitiesService,this.converterService,this.transformsService,this.vecHelper),this.operationsService=new Ee(r,this.enumService,this.entitiesService,this.converterService,this.booleansService,this.shapeGettersService,this.edgesService,this.transformsService,this.vecHelper,this.wiresService,this.facesService,this.solidsService,this.shellsService),this.wiresService.operationsService=this.operationsService,this.filletsService=new Me(r,this.vecHelper,this.iteratorService,this.converterService,this.entitiesService,this.transformsService,this.shapeGettersService,this.edgesService,this.operationsService,this.facesService),this.wiresService.filletsService=this.filletsService,this.facesService.filletsService=this.filletsService}surfaceFromFace(e){const t=e.shape;return this.occ.BRep_Tool.Surface_2(t).get()}}class Qe{constructor(e,t){this.occ=e,this.och=t}union(e){return this.och.booleansService.union(e)}difference(e){return this.och.booleansService.difference(e)}intersection(e){const t=this.och.booleansService.intersection(e);return this.och.converterService.makeCompound({shapes:t})}meshMeshIntersectionWires(e){return this.och.meshingService.meshMeshIntersectionWires(e)}meshMeshIntersectionPoints(e){return this.och.meshingService.meshMeshIntersectionPoints(e)}meshMeshIntersectionOfShapesWires(e){return this.och.meshingService.meshMeshIntersectionOfShapesWires(e)}meshMeshIntersectionOfShapesPoints(e){return this.och.meshingService.meshMeshIntersectionOfShapesPoints(e)}}class Je{constructor(e,t){this.occ=e,this.och=t}saveShapeSTEP(e){const t=e.shape;let r;if(e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});r=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete()}const i=new this.occ.STEPControl_Writer_1;let s;s=r||t;const n=new this.occ.Message_ProgressRange_1;let o,a;try{o=i.Transfer(s,this.occ.STEPControl_StepModelType.STEPControl_AsIs,!0,n)}catch(e){throw new Error("Failed when calling writer.Transfer.")}if(o!==this.occ.IFSelect_ReturnStatus.IFSelect_RetDone)throw new Error("Failed when transfering to step writer.");if(i.Write("x")!==this.occ.IFSelect_ReturnStatus.IFSelect_RetDone)throw new Error("Failed when writing step file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),a=e}return r&&r.delete(),n.delete(),a}saveShapeStl(e){const t=e.shape;let r;if(this.occ.BRepTools.Clean(t,!0),e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});r=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete()}const i=new this.occ.StlAPI_Writer;let s;s=r||t;const n=new this.occ.Message_ProgressRange_1;let o;const a=new this.occ.BRepMesh_IncrementalMesh_2(s,e.precision,!1,.5,!1);if(!i.Write(s,"x",n))throw new Error("Failed when writing stl file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),o=e}return r&&r.delete(),n.delete(),a&&a.Delete(),o}loadSTEPorIGES(e){const t=e.fileName,r=e.filetext,i=(()=>{switch(t.toLowerCase().split(".").pop()){case"step":case"stp":return"step";case"iges":case"igs":return"iges";default:return}})();let s;if(this.occ.FS.createDataFile("/",`file.${i}`,r,!0,!0,!0),"step"===i)s=new this.occ.STEPControl_Reader_1;else{if("iges"!==i)return void console.error("opencascade can't parse this extension! (yet)");s=new this.occ.IGESControl_Reader_1}if(s.ReadFile(`file.${i}`)===this.occ.IFSelect_ReturnStatus.IFSelect_RetDone){const t=new this.occ.Message_ProgressRange_1;s.TransferRoots(t),t.delete();let r,n=s.OneShape();if(e.adjustZtoY){const e=this.och.transformsService.mirrorAlongNormal({shape:n,origin:[0,0,0],normal:[0,0,1]});r=this.och.transformsService.rotate({shape:e,axis:[1,0,0],angle:90}),e.delete()}return this.occ.FS.unlink(`/file.${i}`),r&&(n.delete(),n=r),n}console.error("Something in OCCT went wrong trying to read "+t)}}class Ke{constructor(e,t){this.occ=e,this.och=t}closestPointsBetweenTwoShapes(e){return this.och.operationsService.closestPointsBetweenTwoShapes(e.shape1,e.shape2)}closestPointsOnShapeFromPoints(e){return this.och.operationsService.closestPointsOnShapeFromPoints(e)}closestPointsOnShapesFromPoints(e){return this.och.operationsService.closestPointsOnShapesFromPoints(e)}distancesToShapeFromPoints(e){return this.och.operationsService.distancesToShapeFromPoints(e)}boundingBoxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e)}boundingBoxMinOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).min}boundingBoxMaxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).max}boundingBoxCenterOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).center}boundingBoxSizeOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).size}boundingBoxShapeOfShape(e){return this.och.operationsService.boundingBoxShapeOfShape(e)}boundingSphereOfShape(e){return this.och.operationsService.boundingSphereOfShape(e)}boundingSphereCenterOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).center}boundingSphereRadiusOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).radius}boundingSphereShapeOfShape(e){return this.och.operationsService.boundingSphereShapeOfShape(e)}loft(e){return this.och.operationsService.loft(e)}loftAdvanced(e){return this.och.operationsService.loftAdvanced(e)}offset(e){return this.och.operationsService.offset(e)}offsetAdv(e){return this.och.operationsService.offsetAdv(e)}offset3DWire(e){return this.och.operationsService.offset3DWire(e)}extrudeShapes(e){return this.och.operationsService.extrudeShapes(e)}extrude(e){return this.och.operationsService.extrude(e)}splitShapeWithShapes(e){return this.och.operationsService.splitShapeWithShapes(e)}revolve(e){return this.och.operationsService.revolve(e)}rotatedExtrude(e){return this.och.operationsService.rotatedExtrude(e)}pipe(e){return this.och.operationsService.pipe(e)}pipePolylineWireNGon(e){return this.och.operationsService.pipePolylineWireNGon(e)}pipeWireCylindrical(e){return this.och.operationsService.pipeWireCylindrical(e)}pipeWiresCylindrical(e){return this.och.operationsService.pipeWiresCylindrical(e)}makeThickSolidSimple(e){return this.och.operationsService.makeThickSolidSimple(e)}makeThickSolidByJoin(e){return this.och.operationsService.makeThickSolidByJoin(e)}slice(e){return this.och.operationsService.slice(e)}sliceInStepPattern(e){return this.och.operationsService.sliceInStepPattern(e)}}class et{constructor(e,t){this.occ=e,this.och=t}transform(e){const t=this.scale({shape:e.shape,factor:e.scaleFactor}),r=this.rotate({shape:t,axis:e.rotationAxis,angle:e.rotationAngle}),i=this.translate({shape:r,translation:e.translation});return t.delete(),r.delete(),i}rotate(e){return this.och.transformsService.rotate(e)}rotateAroundCenter(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),r=e.angle,i=this.rotate({shape:t,axis:e.axis,angle:r}),s=this.translate({shape:i,translation:e.center});return i.delete(),t.delete(),s}align(e){return this.och.transformsService.align(e)}alignNormAndAxis(e){return this.och.transformsService.alignNormAndAxis(e)}alignAndTranslate(e){return this.och.transformsService.alignAndTranslate(e)}translate(e){return this.och.transformsService.translate(e)}scale(e){const t=new this.occ.gp_Trsf_1,r=this.och.entitiesService.gpPnt([0,0,0]);t.SetScale(r,e.factor);const i=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=i.Shape(),n=this.och.converterService.getActualTypeOfShape(s);return r.delete(),t.delete(),i.delete(),s.delete(),n}scale3d(e){return this.och.transformsService.scale3d(e)}mirror(e){return this.och.transformsService.mirror(e)}mirrorAlongNormal(e){return this.och.transformsService.mirrorAlongNormal(e)}transformShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations,e.rotationAxes,e.rotationAngles,e.scaleFactors]),e.shapes.map(((t,r)=>this.transform({shape:t,translation:e.translations[r],rotationAxis:e.rotationAxes[r],rotationAngle:e.rotationAngles[r],scaleFactor:e.scaleFactors[r]})))}rotateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,r)=>this.rotate({shape:t,axis:e.axes[r],angle:e.angles[r]})))}rotateAroundCenterShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,r)=>this.rotateAroundCenter({shape:t,axis:e.axes[r],angle:e.angles[r],center:e.centers[r]})))}alignShapes(e){return this.checkIfListsEqualLength([e.shapes,e.fromOrigins,e.fromDirections,e.toOrigins,e.toDirections]),e.shapes.map(((t,r)=>this.align({shape:t,fromOrigin:e.fromOrigins[r],fromDirection:e.fromDirections[r],toOrigin:e.toOrigins[r],toDirection:e.toDirections[r]})))}alignAndTranslateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.centers,e.directions]),e.shapes.map(((t,r)=>this.alignAndTranslate({shape:t,center:e.centers[r],direction:e.directions[r]})))}translateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations]),e.shapes.map(((t,r)=>this.translate({shape:t,translation:e.translations[r]})))}scaleShapes(e){return this.checkIfListsEqualLength([e.shapes,e.factors]),e.shapes.map(((t,r)=>this.scale({shape:t,factor:e.factors[r]})))}scale3dShapes(e){return this.checkIfListsEqualLength([e.shapes,e.scales,e.centers]),e.shapes.map(((t,r)=>this.scale3d({shape:t,scale:e.scales[r],center:e.centers[r]})))}mirrorShapes(e){return this.checkIfListsEqualLength([e.shapes,e.directions,e.origins]),e.shapes.map(((t,r)=>this.mirror({shape:t,origin:e.origins[r],direction:e.directions[r]})))}mirrorAlongNormalShapes(e){return this.checkIfListsEqualLength([e.shapes,e.normals,e.origins]),e.shapes.map(((t,r)=>this.mirrorAlongNormal({shape:t,normal:e.normals[r],origin:e.origins[r]})))}checkIfListsEqualLength(e){const t=e[0].length;if(e.some((e=>e.length!==t)))throw new Error("Some of the list lengths are not the same. For this operation to work all lists need to be of equal length")}}class tt{constructor(e,t){this.occ=e,this.och=t}filletEdges(e){return this.och.filletsService.filletEdges(e)}filletEdgesList(e){return this.och.filletsService.filletEdgesList(e)}filletEdgesListOneRadius(e){return this.och.filletsService.filletEdgesListOneRadius(e)}filletEdgeVariableRadius(e){return this.och.filletsService.filletEdgeVariableRadius(e)}filletEdgesVariableRadius(e){return this.och.filletsService.filletEdgesVariableRadius(e)}filletEdgesSameVariableRadius(e){return this.och.filletsService.filletEdgesSameVariableRadius(e)}chamferEdges(e){return this.och.filletsService.chamferEdges(e)}chamferEdgesList(e){return this.och.filletsService.chamferEdgesList(e)}chamferEdgeDistAngle(e){return this.och.filletsService.chamferEdgeDistAngle(e)}chamferEdgesDistAngle(e){return this.och.filletsService.chamferEdgesDistAngle(e)}chamferEdgesDistsAngles(e){return this.och.filletsService.chamferEdgesDistsAngles(e)}chamferEdgeTwoDistances(e){return this.och.filletsService.chamferEdgeTwoDistances(e)}chamferEdgesTwoDistances(e){return this.och.filletsService.chamferEdgesTwoDistances(e)}chamferEdgesTwoDistancesLists(e){return this.och.filletsService.chamferEdgesTwoDistancesLists(e)}filletTwoEdgesInPlaneIntoAWire(e){const t=this.och.entitiesService.gpPln(e.planeOrigin,e.planeDirection),r=new this.occ.ChFi2d_FilletAlgo_3(e.edge1,e.edge2,t);r.Perform(e.radius);const i=this.och.entitiesService.gpPnt(e.planeOrigin),s=new this.occ.TopoDS_Edge,n=new this.occ.TopoDS_Edge;let o=-1;void 0!==e.solution&&(o=e.solution);const a=r.Result(i,s,n,o),c=this.och.converterService.combineEdgesAndWiresIntoAWire({shapes:[s,a,n]});return r.delete(),i.delete(),t.delete(),s.delete(),n.delete(),a.delete(),c}fillet3DWires(e){return e.shapes.map((t=>this.och.filletsService.fillet3DWire({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:e.direction})))}fillet3DWire(e){return this.och.filletsService.fillet3DWire(e)}fillet2d(e){return this.och.filletsService.fillet2d(e)}fillet2dShapes(e){return e.shapes.map((t=>this.och.filletsService.fillet2d({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes})))}}class rt{constructor(e,t){this.occ=e,this.och=t}simpleLinearLengthDimension(e){return this.och.dimensionsService.simpleLinearLengthDimension(e)}simpleAngularDimension(e){return this.och.dimensionsService.simpleAngularDimension(e)}pinWithLabel(e){return this.och.dimensionsService.pinWithLabel(e)}}class it{constructor(e,t){this.occ=e,this.och=t}fixEdgeOrientationsAlongWire(e){return this.och.edgesService.fixEdgeOrientationsAlongWire(e)}basicShapeRepair(e){const t=new this.occ.ShapeFix_Shape_1;t.Init(e.shape),t.SetPrecision(e.precision),t.SetMaxTolerance(e.maxTolerance),t.SetMinTolerance(e.minTolerance);const r=new this.occ.Message_ProgressRange_1;t.Perform(r),r.delete();const i=t.Shape();return t.delete(),i}fixSmallEdgeOnWire(e){const t=new this.occ.ShapeFix_Wire_1;return t.Load_1(e.shape),t.FixSmall_1(e.lockvtx,e.precsmall),t.Perform(),t.Wire()}}class st{constructor(e,t){this.occ=e,this.och=t,this.shapes=new ge(e,t),this.geom=new ae(e,t),this.transforms=new et(e,t),this.operations=new Ke(e,t),this.booleans=new Qe(e,t),this.fillets=new tt(e,t),this.shapeFix=new it(e,t),this.dimensions=new rt(e,t),this.io=new Je(e,t)}shapeFacesToPolygonPoints(e){return this.och.meshingService.shapeFacesToPolygonPoints(e)}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){return this.och.meshingService.shapeToMesh(e)}}class nt{static parse(e,t,r){const i=[e];let s=0;for(;i.length>0;){const e=i.pop();if("object"==typeof e&&null!==e)if(Array.isArray(e))for(let t=0;t<e.length;t++)i.push(e[t]);else{if(Object.keys(e).includes("shapes")){const i=e.shapes;if("object"==typeof i&&null!==i)for(const n in i){const o=i[n];if(o){if("string"!=typeof i[n]){let a;a=e.id?`${r}-${e.id}-${n}-${s}`:`${r}-${n}-${s}`,t.push({id:a,shape:o}),i[n]=a}s++}}}for(const t in e)i.push(e[t])}}return e}static alignAndTranslateShapesWithChildren(e,t,r,i,s,n=[1,1,1]){const o=nt.deepCopy(e);return o.rotation=r,o.direction=i,o.center=s,o.scale=n,o.shapes&&Object.keys(o.shapes).forEach((e=>{const a=o.shapes[e];if(a){const c=t.rotate({shape:a,angle:r,axis:[0,1,0]}),h=t.alignAndTranslate({shape:c,direction:i,center:s});1!==n[0]||1!==n[1]||1!==n[2]?(o.shapes[e]=t.scale3d({shape:h,scale:n,center:s}),h.delete()):o.shapes[e]=h,c.delete()}})),Object.keys(o).forEach((e=>{const a=o[e];a&&Array.isArray(a)?o[e]=a.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.alignAndTranslateShapesWithChildren(e,t,r,i,s,n):e)):a&&"object"==typeof a&&null!==a&&a.shapes&&(o[e]=this.alignAndTranslateShapesWithChildren(a,t,r,i,s,n))})),o}static deleteAllShapes(e){Object.keys(e.shapes).forEach((t=>{e.shapes[t].delete()})),Object.keys(e).forEach((t=>{const r=e[t];r&&Array.isArray(r)?r.forEach((e=>{e&&"object"==typeof e&&null!==e&&e.shapes&&this.deleteAllShapes(e)})):r&&"object"==typeof r&&null!==r&&r.shapes&&this.deleteAllShapes(r)}))}static deepCopy(e){const t=Object.assign(Object.assign({},e),{shapes:Object.assign({},e.shapes)});return Object.keys(e).forEach((r=>{const i=e[r];i&&"object"==typeof i&&null!==i?i.shapes&&(t[r]=this.deepCopy(i)):i&&Array.isArray(i)&&(t[r]=i.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.deepCopy(e):e)))})),t}}var ot,at=(ot=(ot="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,i;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,r){t=e,i=r}));var s,n,o,a,c,h,l=Object.assign({},e),d=[],u="./this.program",p=(e,t)=>{throw t},f="object"==typeof window,v="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";g?(m=v?r(699).dirname(m)+"/":"//",h=()=>{c||(a=r(439),c=r(699))},s=function(e,t){return h(),e=c.normalize(e),a.readFileSync(e,t?void 0:"utf8")},o=e=>{var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},n=(e,t,r)=>{h(),e=c.normalize(e),a.readFile(e,(function(e,i){e?r(e):t(i.buffer)}))},process.argv.length>1&&(u=process.argv[1].replace(/\\/g,"/")),d=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Sr))throw e})),process.on("unhandledRejection",(function(e){throw e})),p=(e,t)=>{if(te())throw process.exitCode=e,t;var r;(r=t)instanceof Sr||y("exiting due to exception: "+r),process.exit(e)},e.inspect=function(){return"[Emscripten Module object]"}):(f||v)&&(v?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),ot&&(m=ot),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),n=(e,t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):r()},i.onerror=r,i.send(null)});var S=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);Object.assign(e,l),l=null,e.arguments&&(d=e.arguments),e.thisProgram&&(u=e.thisProgram),e.quit&&(p=e.quit);var b;function w(e){w.shown||(w.shown={}),w.shown[e]||(w.shown[e]=1,y(e))}e.wasmBinary&&(b=e.wasmBinary);var E,x=e.noExitRuntime||!0;"object"!=typeof WebAssembly&&ae("no native wasm support detected");var T,P=!1;function C(e,t){e||ae(t)}var k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var i=(t>>>=0)+r,s=t;e[s]&&!(s>=i);)++s;if(s-t>16&&e.buffer&&k)return k.decode(e.subarray(t,s));for(var n="";t<s;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var c=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|c:(7&o)<<18|a<<12|c<<6|63&e[t++])<65536)n+=String.fromCharCode(o);else{var h=o-65536;n+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else n+=String.fromCharCode((31&o)<<6|a)}else n+=String.fromCharCode(o)}return n}function A(e,t){return(e>>>=0)?O(L,e,t):""}function D(e,t,r,i){if(!(i>0))return 0;for(var s=r>>>=0,n=r+i-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=n)break;t[r++>>>0]=a}else if(a<=2047){if(r+1>=n)break;t[r++>>>0]=192|a>>6,t[r++>>>0]=128|63&a}else if(a<=65535){if(r+2>=n)break;t[r++>>>0]=224|a>>12,t[r++>>>0]=128|a>>6&63,t[r++>>>0]=128|63&a}else{if(r+3>=n)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63,t[r++>>>0]=128|a>>6&63,t[r++>>>0]=128|63&a}}return t[r>>>0]=0,r-s}function _(e,t,r){return D(e,L,t,r)}function F(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++r)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}var R,M,L,B,I,U,W,N,G,H="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function V(e,t){for(var r=e,i=r>>1,s=i+t/2;!(i>=s)&&I[i>>>0];)++i;if((r=i<<1)-e>32&&H)return H.decode(L.subarray(e>>>0,r>>>0));for(var n="",o=0;!(o>=t/2);++o){var a=B[e+2*o>>>1];if(0==a)break;n+=String.fromCharCode(a)}return n}function z(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var i=t,s=(r-=2)<2*e.length?r/2:e.length,n=0;n<s;++n){var o=e.charCodeAt(n);B[t>>>1]=o,t+=2}return B[t>>>1]=0,t-i}function j(e){return 2*e.length}function q(e,t){for(var r=0,i="";!(r>=t/4);){var s=U[e+4*r>>>2];if(0==s)break;if(++r,s>=65536){var n=s-65536;i+=String.fromCharCode(55296|n>>10,56320|1023&n)}else i+=String.fromCharCode(s)}return i}function Y(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var i=t>>>=0,s=i+r-4,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),U[t>>>2]=o,(t+=4)+4>s)break}return U[t>>>2]=0,t-i}function X(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=55296&&i<=57343&&++r,t+=4}return t}function $(e){var t=F(e)+1,r=dr(t);return r&&D(e,M,r,t),r}function Z(t){R=t,e.HEAP8=M=new Int8Array(t),e.HEAP16=B=new Int16Array(t),e.HEAP32=U=new Int32Array(t),e.HEAPU8=L=new Uint8Array(t),e.HEAPU16=I=new Uint16Array(t),e.HEAPU32=W=new Uint32Array(t),e.HEAPF32=N=new Float32Array(t),e.HEAPF64=G=new Float64Array(t)}e.INITIAL_MEMORY;var Q,J=[],K=[],ee=[];function te(){return x}var re=0,ie=null,se=null;function ne(t){re++,e.monitorRunDependencies&&e.monitorRunDependencies(re)}function oe(t){if(re--,e.monitorRunDependencies&&e.monitorRunDependencies(re),0==re&&(null!==ie&&(clearInterval(ie),ie=null),se)){var r=se;se=null,r()}}function ae(t){e.onAbort&&e.onAbort(t),y(t="Aborted("+t+")"),P=!0,T=1,t+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(t);throw i(r),r}var ce,he,le,de;function ue(e){return e.startsWith("data:application/octet-stream;base64,")}function pe(e){return e.startsWith("file://")}function fe(e){try{if(e==ce&&b)return new Uint8Array(b);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}function ve(t){for(;t.length>0;){var r=t.shift();if("function"!=typeof r){var i=r.func;"number"==typeof i?void 0===r.arg?me(i)():me(i)(r.arg):i(void 0===r.arg?null:r.arg)}else r(e)}}ue(ce="bitbybit-dev-occt.wasm")||(he=ce,ce=e.locateFile?e.locateFile(he,m):m+he);var ge=[];function me(e){var t=ge[e];return t||(e>=ge.length&&(ge.length=e+1),ge[e]=t=Q.get(e)),t}function Se(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){W[this.ptr+4>>>2]=e},this.get_type=function(){return W[this.ptr+4>>>2]},this.set_destructor=function(e){W[this.ptr+8>>>2]=e},this.get_destructor=function(){return W[this.ptr+8>>>2]},this.set_refcount=function(e){U[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,M[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=M[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,M[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=M[this.ptr+13>>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=U[this.ptr>>>2];U[this.ptr>>>2]=e+1},this.release_ref=function(){var e=U[this.ptr>>>2];return U[this.ptr>>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){W[this.ptr+16>>>2]=e},this.get_adjusted_ptr=function(){return W[this.ptr+16>>>2]},this.get_exception_ptr=function(){if(mr(this.get_type()))return W[this.excPtr>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var ye={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,i=e.length-1;i>=0;i--){var s=e[i];"."===s?e.splice(i,1):".."===s?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=ye.isAbs(e),r="/"===e.substr(-1);return(e=ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=ye.splitPath(e),r=t[0],i=t[1];return r||i?(i&&(i=i.substr(0,i.length-1)),r+i):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=ye.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return ye.normalize(e.join("/"))},join2:(e,t)=>ye.normalize(e+"/"+t)},be={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var i=r>=0?arguments[r]:Te.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t=ye.isAbs(i)}return(t?"/":"")+(e=ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=be.resolve(e).substr(1),t=be.resolve(t).substr(1);for(var i=r(e.split("/")),s=r(t.split("/")),n=Math.min(i.length,s.length),o=n,a=0;a<n;a++)if(i[a]!==s[a]){o=a;break}var c=[];for(a=o;a<i.length;a++)c.push("..");return(c=c.concat(s.slice(o))).join("/")}},we={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){we.ttys[e]={input:[],output:[],ops:t},Te.registerDevice(e,we.stream_ops)},stream_ops:{open:function(e){var t=we.ttys[e.node.rdev];if(!t)throw new Te.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,i,s){if(!e.tty||!e.tty.ops.get_char)throw new Te.ErrnoError(60);for(var n=0,o=0;o<i;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new Te.ErrnoError(29)}if(void 0===a&&0===n)throw new Te.ErrnoError(6);if(null==a)break;n++,t[r+o]=a}return n&&(e.node.timestamp=Date.now()),n},write:function(e,t,r,i,s){if(!e.tty||!e.tty.ops.put_char)throw new Te.ErrnoError(60);try{for(var n=0;n<i;n++)e.tty.ops.put_char(e.tty,t[r+n])}catch(e){throw new Te.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),n}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(g){var r=Buffer.alloc(256),i=0;try{i=a.readSync(process.stdin.fd,r,0,256,-1)}catch(e){if(!e.toString().includes("EOF"))throw e;i=0}t=i>0?r.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=cr(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(S(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(S(O(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(y(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(y(O(e.output,0)),e.output=[])}}};function Ee(e){e=function(e,t){return 65536*Math.ceil(e/65536)}(e);var t=gr(65536,e);return t?(function(e,t){L.fill(0,e,e+t)}(t,e),t):0}var xe={ops_table:null,mount:function(e){return xe.createNode(null,"/",16895,0)},createNode:function(e,t,r,i){if(Te.isBlkdev(r)||Te.isFIFO(r))throw new Te.ErrnoError(63);xe.ops_table||(xe.ops_table={dir:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,lookup:xe.node_ops.lookup,mknod:xe.node_ops.mknod,rename:xe.node_ops.rename,unlink:xe.node_ops.unlink,rmdir:xe.node_ops.rmdir,readdir:xe.node_ops.readdir,symlink:xe.node_ops.symlink},stream:{llseek:xe.stream_ops.llseek}},file:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:{llseek:xe.stream_ops.llseek,read:xe.stream_ops.read,write:xe.stream_ops.write,allocate:xe.stream_ops.allocate,mmap:xe.stream_ops.mmap,msync:xe.stream_ops.msync}},link:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,readlink:xe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:Te.chrdev_stream_ops}});var s=Te.createNode(e,t,r,i);return Te.isDir(s.mode)?(s.node_ops=xe.ops_table.dir.node,s.stream_ops=xe.ops_table.dir.stream,s.contents={}):Te.isFile(s.mode)?(s.node_ops=xe.ops_table.file.node,s.stream_ops=xe.ops_table.file.stream,s.usedBytes=0,s.contents=null):Te.isLink(s.mode)?(s.node_ops=xe.ops_table.link.node,s.stream_ops=xe.ops_table.link.stream):Te.isChrdev(s.mode)&&(s.node_ops=xe.ops_table.chrdev.node,s.stream_ops=xe.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Te.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Te.isDir(e.mode)?t.size=4096:Te.isFile(e.mode)?t.size=e.usedBytes:Te.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&xe.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Te.genericErrors[44]},mknod:function(e,t,r,i){return xe.createNode(e,t,r,i)},rename:function(e,t,r){if(Te.isDir(e.mode)){var i;try{i=Te.lookupNode(t,r)}catch(e){}if(i)for(var s in i.contents)throw new Te.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=Te.lookupNode(e,t);for(var i in r.contents)throw new Te.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var i=xe.createNode(e,t,41471,0);return i.link=r,i},readlink:function(e){if(!Te.isLink(e.mode))throw new Te.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,i,s){var n=e.node.contents;if(s>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-s,i);if(o>8&&n.subarray)t.set(n.subarray(s,s+o),r);else for(var a=0;a<o;a++)t[r+a]=n[s+a];return o},write:function(e,t,r,i,s,n){if(t.buffer===M.buffer&&(n=!1),!i)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(n)return o.contents=t.subarray(r,r+i),o.usedBytes=i,i;if(0===o.usedBytes&&0===s)return o.contents=t.slice(r,r+i),o.usedBytes=i,i;if(s+i<=o.usedBytes)return o.contents.set(t.subarray(r,r+i),s),i}if(xe.expandFileStorage(o,s+i),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(r,r+i),s);else for(var a=0;a<i;a++)o.contents[s+a]=t[r+a];return o.usedBytes=Math.max(o.usedBytes,s+i),i},llseek:function(e,t,r){var i=t;if(1===r?i+=e.position:2===r&&Te.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new Te.ErrnoError(28);return i},allocate:function(e,t,r){xe.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,i,s){if(!Te.isFile(e.node.mode))throw new Te.ErrnoError(43);var n,o,a=e.node.contents;if(2&s||a.buffer!==R){if((r>0||r+t<a.length)&&(a=a.subarray?a.subarray(r,r+t):Array.prototype.slice.call(a,r,r+t)),o=!0,!(n=Ee(t)))throw new Te.ErrnoError(48);n>>>=0,M.set(a,n>>>0)}else o=!1,n=a.byteOffset;return{ptr:n,allocated:o}},msync:function(e,t,r,i,s){if(!Te.isFile(e.node.mode))throw new Te.ErrnoError(43);return 2&s||xe.stream_ops.write(e,t,0,i,r,!1),0}}},Te={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=be.resolve(Te.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Te.ErrnoError(32);for(var r=ye.normalizeArray(e.split("/").filter((e=>!!e)),!1),i=Te.root,s="/",n=0;n<r.length;n++){var o=n===r.length-1;if(o&&t.parent)break;if(i=Te.lookupNode(i,r[n]),s=ye.join2(s,r[n]),Te.isMountpoint(i)&&(!o||o&&t.follow_mount)&&(i=i.mounted.root),!o||t.follow)for(var a=0;Te.isLink(i.mode);){var c=Te.readlink(s);if(s=be.resolve(ye.dirname(s),c),i=Te.lookupPath(s,{recurse_count:t.recurse_count+1}).node,a++>40)throw new Te.ErrnoError(32)}}return{path:s,node:i}},getPath:e=>{for(var t;;){if(Te.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%Te.nameTable.length},hashAddNode:e=>{var t=Te.hashName(e.parent.id,e.name);e.name_next=Te.nameTable[t],Te.nameTable[t]=e},hashRemoveNode:e=>{var t=Te.hashName(e.parent.id,e.name);if(Te.nameTable[t]===e)Te.nameTable[t]=e.name_next;else for(var r=Te.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=Te.mayLookup(e);if(r)throw new Te.ErrnoError(r,e);for(var i=Te.hashName(e.id,t),s=Te.nameTable[i];s;s=s.name_next){var n=s.name;if(s.parent.id===e.id&&n===t)return s}return Te.lookup(e,t)},createNode:(e,t,r,i)=>{var s=new Te.FSNode(e,t,r,i);return Te.hashAddNode(s),s},destroyNode:e=>{Te.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=Te.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Te.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>Te.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate:(e,t)=>{try{return Te.lookupNode(e,t),20}catch(e){}return Te.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var i;try{i=Te.lookupNode(e,t)}catch(e){return e.errno}var s=Te.nodePermissions(e,"wx");if(s)return s;if(r){if(!Te.isDir(i.mode))return 54;if(Te.isRoot(i)||Te.getPath(i)===Te.cwd())return 10}else if(Te.isDir(i.mode))return 31;return 0},mayOpen:(e,t)=>e?Te.isLink(e.mode)?32:Te.isDir(e.mode)&&("r"!==Te.flagsToPermissionString(t)||512&t)?31:Te.nodePermissions(e,Te.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=Te.MAX_OPEN_FDS)=>{for(var r=e;r<=t;r++)if(!Te.streams[r])return r;throw new Te.ErrnoError(33)},getStream:e=>Te.streams[e],createStream:(e,t,r)=>{Te.FSStream||(Te.FSStream=function(){this.shared={}},Te.FSStream.prototype={},Object.defineProperties(Te.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new Te.FSStream,e);var i=Te.nextfd(t,r);return e.fd=i,Te.streams[i]=e,e},closeStream:e=>{Te.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=Te.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new Te.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{Te.devices[e]={stream_ops:t}},getDevice:e=>Te.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var i=r.pop();t.push(i),r.push.apply(r,i.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),Te.syncFSRequests++,Te.syncFSRequests>1&&y("warning: "+Te.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=Te.getMounts(Te.root.mount),i=0;function s(e){return Te.syncFSRequests--,t(e)}function n(e){if(e)return n.errored?void 0:(n.errored=!0,s(e));++i>=r.length&&s(null)}r.forEach((t=>{if(!t.type.syncfs)return n(null);t.type.syncfs(t,e,n)}))},mount:(e,t,r)=>{var i,s="/"===r,n=!r;if(s&&Te.root)throw new Te.ErrnoError(10);if(!s&&!n){var o=Te.lookupPath(r,{follow_mount:!1});if(r=o.path,i=o.node,Te.isMountpoint(i))throw new Te.ErrnoError(10);if(!Te.isDir(i.mode))throw new Te.ErrnoError(54)}var a={type:e,opts:t,mountpoint:r,mounts:[]},c=e.mount(a);return c.mount=a,a.root=c,s?Te.root=c:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),c},unmount:e=>{var t=Te.lookupPath(e,{follow_mount:!1});if(!Te.isMountpoint(t.node))throw new Te.ErrnoError(28);var r=t.node,i=r.mounted,s=Te.getMounts(i);Object.keys(Te.nameTable).forEach((e=>{for(var t=Te.nameTable[e];t;){var r=t.name_next;s.includes(t.mount)&&Te.destroyNode(t),t=r}})),r.mounted=null;var n=r.mount.mounts.indexOf(i);r.mount.mounts.splice(n,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var i=Te.lookupPath(e,{parent:!0}).node,s=ye.basename(e);if(!s||"."===s||".."===s)throw new Te.ErrnoError(28);var n=Te.mayCreate(i,s);if(n)throw new Te.ErrnoError(n);if(!i.node_ops.mknod)throw new Te.ErrnoError(63);return i.node_ops.mknod(i,s,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Te.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Te.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var r=e.split("/"),i="",s=0;s<r.length;++s)if(r[s]){i+="/"+r[s];try{Te.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,Te.mknod(e,t,r)),symlink:(e,t)=>{if(!be.resolve(e))throw new Te.ErrnoError(44);var r=Te.lookupPath(t,{parent:!0}).node;if(!r)throw new Te.ErrnoError(44);var i=ye.basename(t),s=Te.mayCreate(r,i);if(s)throw new Te.ErrnoError(s);if(!r.node_ops.symlink)throw new Te.ErrnoError(63);return r.node_ops.symlink(r,i,e)},rename:(e,t)=>{var r,i,s=ye.dirname(e),n=ye.dirname(t),o=ye.basename(e),a=ye.basename(t);if(r=Te.lookupPath(e,{parent:!0}).node,i=Te.lookupPath(t,{parent:!0}).node,!r||!i)throw new Te.ErrnoError(44);if(r.mount!==i.mount)throw new Te.ErrnoError(75);var c,h=Te.lookupNode(r,o),l=be.relative(e,n);if("."!==l.charAt(0))throw new Te.ErrnoError(28);if("."!==(l=be.relative(t,s)).charAt(0))throw new Te.ErrnoError(55);try{c=Te.lookupNode(i,a)}catch(e){}if(h!==c){var d=Te.isDir(h.mode),u=Te.mayDelete(r,o,d);if(u)throw new Te.ErrnoError(u);if(u=c?Te.mayDelete(i,a,d):Te.mayCreate(i,a))throw new Te.ErrnoError(u);if(!r.node_ops.rename)throw new Te.ErrnoError(63);if(Te.isMountpoint(h)||c&&Te.isMountpoint(c))throw new Te.ErrnoError(10);if(i!==r&&(u=Te.nodePermissions(r,"w")))throw new Te.ErrnoError(u);Te.hashRemoveNode(h);try{r.node_ops.rename(h,i,a)}catch(e){throw e}finally{Te.hashAddNode(h)}}},rmdir:e=>{var t=Te.lookupPath(e,{parent:!0}).node,r=ye.basename(e),i=Te.lookupNode(t,r),s=Te.mayDelete(t,r,!0);if(s)throw new Te.ErrnoError(s);if(!t.node_ops.rmdir)throw new Te.ErrnoError(63);if(Te.isMountpoint(i))throw new Te.ErrnoError(10);t.node_ops.rmdir(t,r),Te.destroyNode(i)},readdir:e=>{var t=Te.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Te.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=Te.lookupPath(e,{parent:!0}).node;if(!t)throw new Te.ErrnoError(44);var r=ye.basename(e),i=Te.lookupNode(t,r),s=Te.mayDelete(t,r,!1);if(s)throw new Te.ErrnoError(s);if(!t.node_ops.unlink)throw new Te.ErrnoError(63);if(Te.isMountpoint(i))throw new Te.ErrnoError(10);t.node_ops.unlink(t,r),Te.destroyNode(i)},readlink:e=>{var t=Te.lookupPath(e).node;if(!t)throw new Te.ErrnoError(44);if(!t.node_ops.readlink)throw new Te.ErrnoError(28);return be.resolve(Te.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var r=Te.lookupPath(e,{follow:!t}).node;if(!r)throw new Te.ErrnoError(44);if(!r.node_ops.getattr)throw new Te.ErrnoError(63);return r.node_ops.getattr(r)},lstat:e=>Te.stat(e,!0),chmod:(e,t,r)=>{var i;if(!(i="string"==typeof e?Te.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&t|-4096&i.mode,timestamp:Date.now()})},lchmod:(e,t)=>{Te.chmod(e,t,!0)},fchmod:(e,t)=>{var r=Te.getStream(e);if(!r)throw new Te.ErrnoError(8);Te.chmod(r.node,t)},chown:(e,t,r,i)=>{var s;if(!(s="string"==typeof e?Te.lookupPath(e,{follow:!i}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:(e,t,r)=>{Te.chown(e,t,r,!0)},fchown:(e,t,r)=>{var i=Te.getStream(e);if(!i)throw new Te.ErrnoError(8);Te.chown(i.node,t,r)},truncate:(e,t)=>{if(t<0)throw new Te.ErrnoError(28);var r;if(!(r="string"==typeof e?Te.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);if(Te.isDir(r.mode))throw new Te.ErrnoError(31);if(!Te.isFile(r.mode))throw new Te.ErrnoError(28);var i=Te.nodePermissions(r,"w");if(i)throw new Te.ErrnoError(i);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var r=Te.getStream(e);if(!r)throw new Te.ErrnoError(8);if(!(2097155&r.flags))throw new Te.ErrnoError(28);Te.truncate(r.node,t)},utime:(e,t,r)=>{var i=Te.lookupPath(e,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(t,r)})},open:(t,r,i)=>{if(""===t)throw new Te.ErrnoError(44);var s;if(i=void 0===i?438:i,i=64&(r="string"==typeof r?Te.modeStringToFlags(r):r)?4095&i|32768:0,"object"==typeof t)s=t;else{t=ye.normalize(t);try{s=Te.lookupPath(t,{follow:!(131072&r)}).node}catch(e){}}var n=!1;if(64&r)if(s){if(128&r)throw new Te.ErrnoError(20)}else s=Te.mknod(t,i,0),n=!0;if(!s)throw new Te.ErrnoError(44);if(Te.isChrdev(s.mode)&&(r&=-513),65536&r&&!Te.isDir(s.mode))throw new Te.ErrnoError(54);if(!n){var o=Te.mayOpen(s,r);if(o)throw new Te.ErrnoError(o)}512&r&&!n&&Te.truncate(s,0),r&=-131713;var a=Te.createStream({node:s,path:Te.getPath(s),flags:r,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!e.logReadFiles||1&r||(Te.readFiles||(Te.readFiles={}),t in Te.readFiles||(Te.readFiles[t]=1)),a},close:e=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Te.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,r)=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Te.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new Te.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,i,s)=>{if(r>>>=0,i<0||s<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(1==(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.read)throw new Te.ErrnoError(28);var n=void 0!==s;if(n){if(!e.seekable)throw new Te.ErrnoError(70)}else s=e.position;var o=e.stream_ops.read(e,t,r,i,s);return n||(e.position+=o),o},write:(e,t,r,i,s,n)=>{if(r>>>=0,i<0||s<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.write)throw new Te.ErrnoError(28);e.seekable&&1024&e.flags&&Te.llseek(e,0,2);var o=void 0!==s;if(o){if(!e.seekable)throw new Te.ErrnoError(70)}else s=e.position;var a=e.stream_ops.write(e,t,r,i,s,n);return o||(e.position+=a),a},allocate:(e,t,r)=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);if(t<0||r<=0)throw new Te.ErrnoError(28);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(!Te.isFile(e.node.mode)&&!Te.isDir(e.node.mode))throw new Te.ErrnoError(43);if(!e.stream_ops.allocate)throw new Te.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,i,s)=>{if(2&i&&!(2&s)&&2!=(2097155&e.flags))throw new Te.ErrnoError(2);if(1==(2097155&e.flags))throw new Te.ErrnoError(2);if(!e.stream_ops.mmap)throw new Te.ErrnoError(43);return e.stream_ops.mmap(e,t,r,i,s)},msync:(e,t,r,i,s)=>(r>>>=0,e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,s):0),munmap:e=>0,ioctl:(e,t,r)=>{if(!e.stream_ops.ioctl)throw new Te.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,i=Te.open(e,t.flags),s=Te.stat(e).size,n=new Uint8Array(s);return Te.read(i,n,0,s,0),"utf8"===t.encoding?r=O(n,0):"binary"===t.encoding&&(r=n),Te.close(i),r},writeFile:(e,t,r={})=>{r.flags=r.flags||577;var i=Te.open(e,r.flags,r.mode);if("string"==typeof t){var s=new Uint8Array(F(t)+1),n=D(t,s,0,s.length);Te.write(i,s,0,n,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Te.write(i,t,0,t.byteLength,void 0,r.canOwn)}Te.close(i)},cwd:()=>Te.currentPath,chdir:e=>{var t=Te.lookupPath(e,{follow:!0});if(null===t.node)throw new Te.ErrnoError(44);if(!Te.isDir(t.node.mode))throw new Te.ErrnoError(54);var r=Te.nodePermissions(t.node,"x");if(r)throw new Te.ErrnoError(r);Te.currentPath=t.path},createDefaultDirectories:()=>{Te.mkdir("/tmp"),Te.mkdir("/home"),Te.mkdir("/home/web_user")},createDefaultDevices:()=>{Te.mkdir("/dev"),Te.registerDevice(Te.makedev(1,3),{read:()=>0,write:(e,t,r,i,s)=>i}),Te.mkdev("/dev/null",Te.makedev(1,3)),we.register(Te.makedev(5,0),we.default_tty_ops),we.register(Te.makedev(6,0),we.default_tty1_ops),Te.mkdev("/dev/tty",Te.makedev(5,0)),Te.mkdev("/dev/tty1",Te.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(g)try{var t=r(725);return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){ae("randomDevice")}}();Te.createDevice("/dev","random",e),Te.createDevice("/dev","urandom",e),Te.mkdir("/dev/shm"),Te.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{Te.mkdir("/proc");var e=Te.mkdir("/proc/self");Te.mkdir("/proc/self/fd"),Te.mount({mount:()=>{var t=Te.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var r=+t,i=Te.getStream(r);if(!i)throw new Te.ErrnoError(8);var s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return s.parent=s,s}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?Te.createDevice("/dev","stdin",e.stdin):Te.symlink("/dev/tty","/dev/stdin"),e.stdout?Te.createDevice("/dev","stdout",null,e.stdout):Te.symlink("/dev/tty","/dev/stdout"),e.stderr?Te.createDevice("/dev","stderr",null,e.stderr):Te.symlink("/dev/tty1","/dev/stderr"),Te.open("/dev/stdin",0),Te.open("/dev/stdout",1),Te.open("/dev/stderr",1)},ensureErrnoError:()=>{Te.ErrnoError||(Te.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Te.ErrnoError.prototype=new Error,Te.ErrnoError.prototype.constructor=Te.ErrnoError,[44].forEach((e=>{Te.genericErrors[e]=new Te.ErrnoError(e),Te.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{Te.ensureErrnoError(),Te.nameTable=new Array(4096),Te.mount(xe,{},"/"),Te.createDefaultDirectories(),Te.createDefaultDevices(),Te.createSpecialDirectories(),Te.filesystems={MEMFS:xe}},init:(t,r,i)=>{Te.init.initialized=!0,Te.ensureErrnoError(),e.stdin=t||e.stdin,e.stdout=r||e.stdout,e.stderr=i||e.stderr,Te.createStandardStreams()},quit:()=>{Te.init.initialized=!1;for(var e=0;e<Te.streams.length;e++){var t=Te.streams[e];t&&Te.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{var r=Te.analyzePath(e,t);return r.exists?r.object:null},analyzePath:(e,t)=>{try{e=(i=Te.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=Te.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=ye.basename(e),i=Te.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(e){r.error=e.errno}return r},createPath:(e,t,r,i)=>{e="string"==typeof e?e:Te.getPath(e);for(var s=t.split("/").reverse();s.length;){var n=s.pop();if(n){var o=ye.join2(e,n);try{Te.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,r,i,s)=>{var n=ye.join2("string"==typeof e?e:Te.getPath(e),t),o=Te.getMode(i,s);return Te.create(n,o)},createDataFile:(e,t,r,i,s,n)=>{var o=t;e&&(e="string"==typeof e?e:Te.getPath(e),o=t?ye.join2(e,t):e);var a=Te.getMode(i,s),c=Te.create(o,a);if(r){if("string"==typeof r){for(var h=new Array(r.length),l=0,d=r.length;l<d;++l)h[l]=r.charCodeAt(l);r=h}Te.chmod(c,146|a);var u=Te.open(c,577);Te.write(u,r,0,r.length,0,n),Te.close(u),Te.chmod(c,a)}return c},createDevice:(e,t,r,i)=>{var s=ye.join2("string"==typeof e?e:Te.getPath(e),t),n=Te.getMode(!!r,!!i);Te.createDevice.major||(Te.createDevice.major=64);var o=Te.makedev(Te.createDevice.major++,0);return Te.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(e,t,i,s,n)=>{for(var o=0,a=0;a<s;a++){var c;try{c=r()}catch(e){throw new Te.ErrnoError(29)}if(void 0===c&&0===o)throw new Te.ErrnoError(6);if(null==c)break;o++,t[i+a]=c}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,r,s,n)=>{for(var o=0;o<s;o++)try{i(t[r+o])}catch(e){throw new Te.ErrnoError(29)}return s&&(e.node.timestamp=Date.now()),o}}),Te.mkdev(s,n,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=cr(s(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Te.ErrnoError(29)}},createLazyFile:(e,t,r,i,s)=>{function n(){this.lengthKnown=!1,this.chunks=[]}if(n.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},n.prototype.setDataGetter=function(e){this.getter=e},n.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,i=Number(e.getResponseHeader("Content-length")),s=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,n=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;s||(o=i);var a=this;a.setDataGetter((e=>{var t=e*o,s=(e+1)*o-1;if(s=Math.min(s,i-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>i-1)throw new Error("only "+i+" bytes available! programmer error!");var s=new XMLHttpRequest;if(s.open("GET",r,!1),i!==o&&s.setRequestHeader("Range","bytes="+e+"-"+t),s.responseType="arraybuffer",s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.send(null),!(s.status>=200&&s.status<300||304===s.status))throw new Error("Couldn't load "+r+". Status: "+s.status);return void 0!==s.response?new Uint8Array(s.response||[]):cr(s.responseText||"",!0)})(t,s)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!n&&i||(o=i=1,i=this.getter(0).length,o=i,S("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!v)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new n;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:r};var c=Te.createFile(e,t,a,i,s);a.contents?c.contents=a.contents:a.url&&(c.contents=null,c.url=a.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var h={};function l(e,t,r,i,s){var n=e.node.contents;if(s>=n.length)return 0;var o=Math.min(n.length-s,i);if(n.slice)for(var a=0;a<o;a++)t[r+a]=n[s+a];else for(a=0;a<o;a++)t[r+a]=n.get(s+a);return o}return Object.keys(c.stream_ops).forEach((e=>{var t=c.stream_ops[e];h[e]=function(){return Te.forceLoadFile(c),t.apply(null,arguments)}})),h.read=(e,t,r,i,s)=>(Te.forceLoadFile(c),l(e,t,r,i,s)),h.mmap=(e,t,r,i,s)=>{Te.forceLoadFile(c);var n=Ee(t);if(!n)throw new Te.ErrnoError(48);return l(e,M,n,t,r),{ptr:n,allocated:!0}},c.stream_ops=h,c},createPreloadedFile:(e,t,r,i,s,o,a,c,h,l)=>{var d=t?be.resolve(ye.join2(e,t)):e;function u(r){function n(r){l&&l(),c||Te.createDataFile(e,t,r,i,s,h),o&&o(),oe()}Nt.handledByPreloadPlugin(r,d,n,(()=>{a&&a(),oe()}))||n(r)}ne(),"string"==typeof r?function(e,t,r,i){var s="al "+e;n(e,(function(t){C(t,'Loading data file "'+e+'" failed (no arrayBuffer).'),u(new Uint8Array(t)),s&&oe()}),(function(t){if(!r)throw'Loading data file "'+e+'" failed.';r()})),s&&ne()}(r,0,a):u(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var i=Te.indexedDB();try{var s=i.open(Te.DB_NAME(),Te.DB_VERSION)}catch(e){return r(e)}s.onupgradeneeded=()=>{S("creating db"),s.result.createObjectStore(Te.DB_STORE_NAME)},s.onsuccess=()=>{var i=s.result.transaction([Te.DB_STORE_NAME],"readwrite"),n=i.objectStore(Te.DB_STORE_NAME),o=0,a=0,c=e.length;function h(){0==a?t():r()}e.forEach((e=>{var t=n.put(Te.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+a==c&&h()},t.onerror=()=>{a++,o+a==c&&h()}})),i.onerror=r},s.onerror=r},loadFilesFromDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var i=Te.indexedDB();try{var s=i.open(Te.DB_NAME(),Te.DB_VERSION)}catch(e){return r(e)}s.onupgradeneeded=r,s.onsuccess=()=>{var i=s.result;try{var n=i.transaction([Te.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var o=n.objectStore(Te.DB_STORE_NAME),a=0,c=0,h=e.length;function l(){0==c?t():r()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{Te.analyzePath(e).exists&&Te.unlink(e),Te.createDataFile(ye.dirname(e),ye.basename(e),t.result,!0,!0,!0),++a+c==h&&l()},t.onerror=()=>{c++,a+c==h&&l()}})),n.onerror=r},s.onerror=r}},Pe={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(ye.isAbs(t))return t;var i;if(-100===e)i=Te.cwd();else{var s=Te.getStream(e);if(!s)throw new Te.ErrnoError(8);i=s.path}if(0==t.length){if(!r)throw new Te.ErrnoError(44);return i}return ye.join2(i,t)},doStat:function(e,t,r){try{var i=e(t)}catch(e){if(e&&e.node&&ye.normalize(t)!==ye.normalize(Te.getPath(e.node)))return-54;throw e}return U[r>>>2]=i.dev,U[r+4>>>2]=0,U[r+8>>>2]=i.ino,U[r+12>>>2]=i.mode,U[r+16>>>2]=i.nlink,U[r+20>>>2]=i.uid,U[r+24>>>2]=i.gid,U[r+28>>>2]=i.rdev,U[r+32>>>2]=0,de=[i.size>>>0,(le=i.size,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[r+40>>>2]=de[0],U[r+44>>>2]=de[1],U[r+48>>>2]=4096,U[r+52>>>2]=i.blocks,U[r+56>>>2]=i.atime.getTime()/1e3|0,U[r+60>>>2]=0,U[r+64>>>2]=i.mtime.getTime()/1e3|0,U[r+68>>>2]=0,U[r+72>>>2]=i.ctime.getTime()/1e3|0,U[r+76>>>2]=0,de=[i.ino>>>0,(le=i.ino,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[r+80>>>2]=de[0],U[r+84>>>2]=de[1],0},doMsync:function(e,t,r,i,s){var n=L.slice(e,e+r);Te.msync(t,n,s,r,i)},varargs:void 0,get:function(){return Pe.varargs+=4,U[Pe.varargs-4>>>2]},getStr:function(e){return A(e)},getStreamFromFD:function(e){var t=Te.getStream(e);if(!t)throw new Te.ErrnoError(8);return t}},Ce="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function ke(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var Oe=void 0;function Ae(e){for(var t="",r=e;L[r>>>0];)t+=Oe[L[r++>>>0]];return t}var De={},_e={},Fe={},Re=48,Me=57;function Le(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Re&&t<=Me?"_"+e:e}function Be(e,t){return e=Le(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ie(e,t){var r=Be(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ue=void 0;function We(e){throw new Ue(e)}var Ne=void 0;function Ge(e){throw new Ne(e)}function He(e,t,r){function i(t){var i=r(t);i.length!==e.length&&Ge("Mismatched type converter count");for(var s=0;s<e.length;++s)Ve(e[s],i[s])}e.forEach((function(e){Fe[e]=t}));var s=new Array(t.length),n=[],o=0;t.forEach(((e,t)=>{_e.hasOwnProperty(e)?s[t]=_e[e]:(n.push(e),De.hasOwnProperty(e)||(De[e]=[]),De[e].push((()=>{s[t]=_e[e],++o===n.length&&i(s)})))})),0===n.length&&i(s)}function Ve(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||We('type "'+i+'" must have a positive integer typeid pointer'),_e.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;We("Cannot register type '"+i+"' twice")}if(_e[e]=t,delete Fe[e],De.hasOwnProperty(e)){var s=De[e];delete De[e],s.forEach((e=>e()))}}function ze(e){We(e.$$.ptrType.registeredClass.name+" instance already deleted")}var je=!1;function qe(e){}function Ye(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Xe(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var i=Xe(e,t,r.baseClass);return null===i?null:r.downcast(i)}var $e={};var Ze=[];function Qe(){for(;Ze.length;){var e=Ze.pop();e.$$.deleteScheduled=!1,e.delete()}}var Je=void 0;var Ke={};function et(e,t){return t.ptrType&&t.ptr||Ge("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Ge("Both smartPtrType and smartPtr must be specified"),t.count={value:1},tt(Object.create(e,{$$:{value:t}}))}function tt(e){return"undefined"==typeof FinalizationRegistry?(tt=e=>e,e):(je=new FinalizationRegistry((e=>{Ye(e.$$)})),tt=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};je.register(e,r,e)}return e},qe=e=>je.unregister(e),tt(e))}function rt(){}function it(e,t,r){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||We("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function st(t,r,i){e.hasOwnProperty(t)?((void 0===i||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[i])&&We("Cannot register public name '"+t+"' twice"),it(e,t,t),e.hasOwnProperty(i)&&We("Cannot register multiple overloads of a function with the same number of arguments ("+i+")!"),e[t].overloadTable[i]=r):(e[t]=r,void 0!==i&&(e[t].numArguments=i))}function nt(e,t,r,i,s,n,o,a){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=i,this.baseClass=s,this.getActualType=n,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function at(e,t,r){for(;t!==r;)t.upcast||We("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function ct(e,t){if(null===t)return this.isReference&&We("null is not a valid "+this.name),0;t.$$||We('Cannot pass "'+Ot(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return at(t.$$.ptr,r,this.registeredClass)}function ht(e,t){var r;if(null===t)return this.isReference&&We("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||We('Cannot pass "'+Ot(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&We("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;if(r=at(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&We("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:We("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var s=t.clone();r=this.rawShare(r,Pt.toHandle((function(){s.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:We("Unsupporting sharing policy")}return r}function lt(e,t){if(null===t)return this.isReference&&We("null is not a valid "+this.name),0;t.$$||We('Cannot pass "'+Ot(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&We("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return at(t.$$.ptr,r,this.registeredClass)}function dt(e){return this.fromWireType(W[e>>>2])}function ut(e,t,r,i,s,n,o,a,c,h,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=i,this.isSmartPointer=s,this.pointeeType=n,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=c,this.rawShare=h,this.rawDestructor=l,s||void 0!==t.baseClass?this.toWireType=ht:i?(this.toWireType=ct,this.destructorFunction=null):(this.toWireType=lt,this.destructorFunction=null)}function pt(t,r){var i,s,n,o=(t=Ae(t)).includes("j")?(i=t,s=r,n=[],function(){return n.length=0,Object.assign(n,arguments),function(t,r,i){return t.includes("j")?function(t,r,i){var s=e["dynCall_"+t];return i&&i.length?s.apply(null,[r].concat(i)):s.call(null,r)}(t,r,i):me(r).apply(null,i)}(i,s,n)}):me(r);return"function"!=typeof o&&We("unknown function pointer with signature "+t+": "+r),o}var ft=void 0;function vt(e){var t=fr(e),r=Ae(t);return ur(t),r}function gt(e,t){var r=[],i={};throw t.forEach((function e(t){i[t]||_e[t]||(Fe[t]?Fe[t].forEach(e):(r.push(t),i[t]=!0))})),new ft(e+": "+r.map(vt).join([", "]))}function mt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=Be(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var i=new r,s=e.apply(i,t);return s instanceof Object?s:i}function St(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function yt(e,t,r,i,s){var n=t.length;n<2&&We("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,a=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){a=!0;break}var h="void"!==t[0].name,l="",d="";for(c=0;c<n-2;++c)l+=(0!==c?", ":"")+"arg"+c,d+=(0!==c?", ":"")+"arg"+c+"Wired";var u="return function "+Le(e)+"("+l+") {\nif (arguments.length !== "+(n-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(n-2)+" args!');\n}\n";a&&(u+="var destructors = [];\n");var p=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[We,i,s,St,t[0],t[1]];for(o&&(u+="var thisWired = classParam.toWireType("+p+", this);\n"),c=0;c<n-2;++c)u+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),v.push(t[c+2]);if(o&&(d="thisWired"+(d.length>0?", ":"")+d),u+=(h?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",a)u+="runDestructors(destructors);\n";else for(c=o?1:2;c<t.length;++c){var g=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(u+=g+"_dtor("+g+"); // "+t[c].name+"\n",f.push(g+"_dtor"),v.push(t[c].destructorFunction))}return h&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),u+="}\n",f.push(u),mt(Function,f).apply(null,v)}function bt(e,t){for(var r=[],i=0;i<e;i++)r.push(U[(t>>2)+i>>>0]);return r}function wt(e,t,r){return e instanceof Object||We(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||We(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||We("cannot call emscripten binding method "+r+" on deleted object"),at(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var Et=[],xt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tt(e){e>4&&0==--xt[e].refcount&&(xt[e]=void 0,Et.push(e))}var Pt={toValue:e=>(e||We("Cannot use deleted val. handle = "+e),xt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Et.length?Et.pop():xt.length;return xt[t]={refcount:1,value:e},t}}};function Ct(e,t,r){switch(t){case 0:return function(e){var t=r?M:L;return this.fromWireType(t[e>>>0])};case 1:return function(e){var t=r?B:I;return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=r?U:W;return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function kt(e,t){var r=_e[e];return void 0===r&&We(t+" has unknown type "+vt(e)),r}function Ot(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function At(e,t){switch(t){case 2:return function(e){return this.fromWireType(N[e>>>2])};case 3:return function(e){return this.fromWireType(G[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Dt(e,t,r){switch(t){case 0:return r?function(e){return M[e>>>0]}:function(e){return L[e>>>0]};case 1:return r?function(e){return B[e>>>1]}:function(e){return I[e>>>1]};case 2:return r?function(e){return U[e>>>2]}:function(e){return W[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var _t={};function Ft(e){var t=_t[e];return void 0===t?Ae(e):t}var Rt=[];function Mt(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Lt,Bt=[];function It(t,r){if(Nt.mainLoop.timingMode=t,Nt.mainLoop.timingValue=r,!Nt.mainLoop.func)return 1;if(Nt.mainLoop.running||(Nt.mainLoop.running=!0),0==t)Nt.mainLoop.scheduler=function(){var e=0|Math.max(0,Nt.mainLoop.tickStartTime+r-Lt());setTimeout(Nt.mainLoop.runner,e)},Nt.mainLoop.method="timeout";else if(1==t)Nt.mainLoop.scheduler=function(){Nt.requestAnimationFrame(Nt.mainLoop.runner)},Nt.mainLoop.method="rAF";else if(2==t){if("undefined"==typeof setImmediate){var i=[],s="setimmediate";addEventListener("message",(function(e){e.data!==s&&e.data.target!==s||(e.stopPropagation(),i.shift()())}),!0),setImmediate=function(t){i.push(t),v?(void 0===e.setImmediates&&(e.setImmediates=[]),e.setImmediates.push(t),postMessage({target:s})):postMessage(s,"*")}}Nt.mainLoop.scheduler=function(){setImmediate(Nt.mainLoop.runner)},Nt.mainLoop.method="immediate"}return 0}function Ut(e,t){if(!P)if(t)e();else try{e()}catch(e){!function(e){if(e instanceof Sr||"unwind"==e)return T;p(1,e)}(e)}}function Wt(e,t){return setTimeout((function(){Ut(e)}),t)}Lt=g?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Nt={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Nt.mainLoop.scheduler=null,Nt.mainLoop.currentlyRunningMainloop++},resume:function(){Nt.mainLoop.currentlyRunningMainloop++;var e=Nt.mainLoop.timingMode,t=Nt.mainLoop.timingValue,r=Nt.mainLoop.func;Nt.mainLoop.func=null,function(e,t,r,i,s){C(!Nt.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Nt.mainLoop.func=e,Nt.mainLoop.arg=i;var n=Nt.mainLoop.currentlyRunningMainloop;function o(){return!(n<Nt.mainLoop.currentlyRunningMainloop)}Nt.mainLoop.running=!1,Nt.mainLoop.runner=function(){if(!P)if(Nt.mainLoop.queue.length>0){var t=Date.now(),r=Nt.mainLoop.queue.shift();if(r.func(r.arg),Nt.mainLoop.remainingBlockers){var i=Nt.mainLoop.remainingBlockers,s=i%1==0?i-1:Math.floor(i);r.counted?Nt.mainLoop.remainingBlockers=s:(s+=.5,Nt.mainLoop.remainingBlockers=(8*i+s)/9)}if(S('main loop blocker "'+r.name+'" took '+(Date.now()-t)+" ms"),Nt.mainLoop.updateStatus(),!o())return;setTimeout(Nt.mainLoop.runner,0)}else o()&&(Nt.mainLoop.currentFrameNumber=Nt.mainLoop.currentFrameNumber+1|0,1==Nt.mainLoop.timingMode&&Nt.mainLoop.timingValue>1&&Nt.mainLoop.currentFrameNumber%Nt.mainLoop.timingValue!=0?Nt.mainLoop.scheduler():(0==Nt.mainLoop.timingMode&&(Nt.mainLoop.tickStartTime=Lt()),Nt.mainLoop.runIter(e),o()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Nt.mainLoop.scheduler())))}}(r,0,0,Nt.mainLoop.arg),It(e,t),Nt.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var t=e.statusMessage||"Please wait...",r=Nt.mainLoop.remainingBlockers,i=Nt.mainLoop.expectedBlockers;r?r<i?e.setStatus(t+" ("+(i-r)+"/"+i+")"):e.setStatus(t):e.setStatus("")}},runIter:function(t){if(!P){if(e.preMainLoop&&!1===e.preMainLoop())return;Ut(t),e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),!Nt.initted){Nt.initted=!0;try{new Blob,Nt.hasBlobConstructor=!0}catch(e){Nt.hasBlobConstructor=!1,S("warning: no blob constructor, cannot create blobs with mimetypes")}Nt.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Nt.hasBlobConstructor?null:S("warning: no BlobBuilder"),Nt.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,e.noImageDecoding||void 0!==Nt.URLObject||(S("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var t={canHandle:function(t){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},handle:function(e,t,r,i){var s=null;if(Nt.hasBlobConstructor)try{(s=new Blob([e],{type:Nt.getMimetype(t)})).size!==e.length&&(s=new Blob([new Uint8Array(e).buffer],{type:Nt.getMimetype(t)}))}catch(e){w("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!s){var n=new Nt.BlobBuilder;n.append(new Uint8Array(e).buffer),s=n.getBlob()}var o=Nt.URLObject.createObjectURL(s),a=new Image;a.onload=()=>{C(a.complete,"Image "+t+" could not be decoded");var i=document.createElement("canvas");i.width=a.width,i.height=a.height,i.getContext("2d").drawImage(a,0,0),ir[t]=i,Nt.URLObject.revokeObjectURL(o),r&&r(e)},a.onerror=e=>{S("Image "+o+" could not be decoded"),i&&i()},a.src=o}};e.preloadPlugins.push(t);var r={canHandle:function(t){return!e.noAudioDecoding&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,r,i){var s=!1;function n(i){s||(s=!0,sr[t]=i,r&&r(e))}function o(){s||(s=!0,sr[t]=new Audio,i&&i())}if(!Nt.hasBlobConstructor)return o();try{var a=new Blob([e],{type:Nt.getMimetype(t)})}catch(e){return o()}var c=Nt.URLObject.createObjectURL(a),h=new Audio;h.addEventListener("canplaythrough",(function(){n(h)}),!1),h.onerror=function(r){s||(S("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),h.src="data:audio/x-"+t.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=0,s=0,n=0;n<e.length;n++)for(i=i<<8|e[n],s+=8;s>=6;){var o=i>>s-6&63;s-=6,r+=t[o]}return 2==s?(r+=t[(3&i)<<4],r+="=="):4==s&&(r+=t[(15&i)<<2],r+="="),r}(e),n(h))},h.src=c,Wt((function(){n(h)}),1e4)}};e.preloadPlugins.push(r);var i=e.canvas;i&&(i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock||i.msRequestPointerLock||function(){},i.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},i.exitPointerLock=i.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",s,!1),document.addEventListener("mozpointerlockchange",s,!1),document.addEventListener("webkitpointerlockchange",s,!1),document.addEventListener("mspointerlockchange",s,!1),e.elementPointerLock&&i.addEventListener("click",(function(t){!Nt.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),t.preventDefault())}),!1))}function s(){Nt.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}},handledByPreloadPlugin:function(t,r,i,s){Nt.init();var n=!1;return e.preloadPlugins.forEach((function(e){n||e.canHandle(r)&&(e.handle(t,r,i,s),n=!0)})),n},createContext:function(t,r,i,s){if(r&&e.ctx&&t==e.canvas)return e.ctx;var n,o;if(r){var a={antialias:!1,alpha:!1,majorVersion:1};if(s)for(var c in s)a[c]=s[c];void 0!==Yt&&(o=Yt.createContext(t,a))&&(n=Yt.getContext(o).GLctx)}else n=t.getContext("2d");return n?(i&&(r||C(void 0===rr,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=n,r&&Yt.makeContextCurrent(o),e.useWebGL=r,Nt.moduleContextCreatedCallbacks.forEach((function(e){e()})),Nt.init()),n):null},destroyContext:function(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(t,r){Nt.lockPointer=t,Nt.resizeCanvas=r,void 0===Nt.lockPointer&&(Nt.lockPointer=!0),void 0===Nt.resizeCanvas&&(Nt.resizeCanvas=!1);var i=e.canvas;function s(){Nt.isFullscreen=!1;var t=i.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t?(i.exitFullscreen=Nt.exitFullscreen,Nt.lockPointer&&i.requestPointerLock(),Nt.isFullscreen=!0,Nt.resizeCanvas?Nt.setFullscreenCanvasSize():Nt.updateCanvasDimensions(i)):(t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),Nt.resizeCanvas?Nt.setWindowedCanvasSize():Nt.updateCanvasDimensions(i)),e.onFullScreen&&e.onFullScreen(Nt.isFullscreen),e.onFullscreen&&e.onFullscreen(Nt.isFullscreen)}Nt.fullscreenHandlersInstalled||(Nt.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",s,!1),document.addEventListener("mozfullscreenchange",s,!1),document.addEventListener("webkitfullscreenchange",s,!1),document.addEventListener("MSFullscreenChange",s,!1));var n=document.createElement("div");i.parentNode.insertBefore(n,i),n.appendChild(i),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen||(n.webkitRequestFullscreen?function(){n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(n.webkitRequestFullScreen?function(){n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),n.requestFullscreen()},exitFullscreen:function(){return!!Nt.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===Nt.nextRAF)Nt.nextRAF=t+1e3/60;else for(;t+2>=Nt.nextRAF;)Nt.nextRAF+=1e3/60;var r=Math.max(Nt.nextRAF-t,0);setTimeout(e,r)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Nt.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeSetTimeout:function(e){return Wt(e)},safeRequestAnimationFrame:function(e){return Nt.requestAnimationFrame((function(){Ut(e)}))},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(t){if(Nt.pointerLock)"mousemove"!=t.type&&"mozMovementX"in t?Nt.mouseMovementX=Nt.mouseMovementY=0:(Nt.mouseMovementX=Nt.getMovementX(t),Nt.mouseMovementY=Nt.getMovementY(t)),"undefined"!=typeof SDL?(Nt.mouseX=SDL.mouseX+Nt.mouseMovementX,Nt.mouseY=SDL.mouseY+Nt.mouseMovementY):(Nt.mouseX+=Nt.mouseMovementX,Nt.mouseY+=Nt.mouseMovementY);else{var r=e.canvas.getBoundingClientRect(),i=e.canvas.width,s=e.canvas.height,n=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===t.type||"touchend"===t.type||"touchmove"===t.type){var a=t.touch;if(void 0===a)return;var c=a.pageX-(n+r.left),h=a.pageY-(o+r.top),l={x:c*=i/r.width,y:h*=s/r.height};if("touchstart"===t.type)Nt.lastTouches[a.identifier]=l,Nt.touches[a.identifier]=l;else if("touchend"===t.type||"touchmove"===t.type){var d=Nt.touches[a.identifier];d||(d=l),Nt.lastTouches[a.identifier]=d,Nt.touches[a.identifier]=l}return}var u=t.pageX-(n+r.left),p=t.pageY-(o+r.top);u*=i/r.width,p*=s/r.height,Nt.mouseMovementX=u-Nt.mouseX,Nt.mouseMovementY=p-Nt.mouseY,Nt.mouseX=u,Nt.mouseY=p}},resizeListeners:[],updateResizeListeners:function(){var t=e.canvas;Nt.resizeListeners.forEach((function(e){e(t.width,t.height)}))},setCanvasSize:function(t,r,i){var s=e.canvas;Nt.updateCanvasDimensions(s,t,r),i||Nt.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var t=W[SDL.screen>>>2];t|=8388608,U[SDL.screen>>>2]=t}Nt.updateCanvasDimensions(e.canvas),Nt.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var t=W[SDL.screen>>>2];t&=-8388609,U[SDL.screen>>>2]=t}Nt.updateCanvasDimensions(e.canvas),Nt.updateResizeListeners()},updateCanvasDimensions:function(t,r,i){r&&i?(t.widthNative=r,t.heightNative=i):(r=t.widthNative,i=t.heightNative);var s=r,n=i;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(s/n<e.forcedAspectRatio?s=Math.round(n*e.forcedAspectRatio):n=Math.round(s/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t.parentNode&&"undefined"!=typeof screen){var o=Math.min(screen.width/s,screen.height/n);s=Math.round(s*o),n=Math.round(n*o)}Nt.resizeCanvas?(t.width!=s&&(t.width=s),t.height!=n&&(t.height=n),void 0!==t.style&&(t.style.removeProperty("width"),t.style.removeProperty("height"))):(t.width!=r&&(t.width=r),t.height!=i&&(t.height=i),void 0!==t.style&&(s!=r||n!=i?(t.style.setProperty("width",s+"px","important"),t.style.setProperty("height",n+"px","important")):(t.style.removeProperty("width"),t.style.removeProperty("height"))))}};function Gt(e){try{return E.grow(e-R.byteLength+65535>>>16),Z(E.buffer),1}catch(e){}}var Ht={};function Vt(){if(!Vt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in Ht)void 0===Ht[t]?delete e[t]:e[t]=Ht[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Vt.strings=r}return Vt.strings}function zt(e){for(var t=e.split("."),r=0;r<4;r++){var i=Number(t[r]);if(isNaN(i))return null;t[r]=i}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function jt(e){return parseInt(e)}var qt={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,r=zt(e);if(null!==r)return e;if(null!==(r=function(e){var t,r,i,s,n=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=jt(t[t.length-4])+256*jt(t[t.length-3]),t[t.length-3]=jt(t[t.length-2])+256*jt(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),i=0,s=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(s=0;s<8-t.length+1;s++)n[r+s]=0;i=s-1}else n[r+i]=vr(parseInt(t[r],16));else n[r+i]=t[r];return[n[1]<<16|n[0],n[3]<<16|n[2],n[5]<<16|n[4],n[7]<<16|n[6]]}(e)))return e;if(qt.address_map.addrs[e])t=qt.address_map.addrs[e];else{var i=qt.address_map.id++;C(i<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&i)+"."+(65280&i),qt.address_map.names[t]=e,qt.address_map.addrs[e]=t}return t},lookup_addr:function(e){return qt.address_map.names[e]?qt.address_map.names[e]:null}},Yt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Yt.lastError||(Yt.lastError=e)},getNewId:function(e){for(var t=Yt.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,i){for(var s="",n=0;n<t;++n){var o=i?U[i+4*n>>>2]:-1;s+=A(U[r+4*n>>>2],o<0?void 0:o)}return s},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){function i(t,r){var i=e.getContextSafariWebGL2Fixed(t,r);return"webgl"==t==i instanceof WebGLRenderingContext?i:null}e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=i}var r=e.getContext("webgl",t);return r?Yt.registerContext(r,t):0},registerContext:function(e,t){var r=Yt.getNewId(Yt.contexts),i={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=i),Yt.contexts[r]=i,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Yt.initExtensions(i),r},makeContextCurrent:function(t){return Yt.currentContext=Yt.contexts[t],e.ctx=rr=Yt.currentContext&&Yt.currentContext.GLctx,!(t&&!rr)},getContext:function(e){return Yt.contexts[e]},deleteContext:function(e){Yt.currentContext===Yt.contexts[e]&&(Yt.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(Yt.contexts[e].GLctx.canvas),Yt.contexts[e]&&Yt.contexts[e].GLctx.canvas&&(Yt.contexts[e].GLctx.canvas.GLctxObject=void 0),Yt.contexts[e]=null},initExtensions:function(e){if(e||(e=Yt.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,r=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,i,s){t.drawArraysInstancedANGLE(e,r,i,s)},e.drawElementsInstanced=function(e,r,i,s,n){t.drawElementsInstancedANGLE(e,r,i,s,n)})}(r),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(r),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(r),r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query"),(t=r).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(r.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||r.getExtension(e)}))}}};function Xt(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function $t(e){var t=rr.currentProgram;if(t){var r=t.uniformLocsById[e];return"number"==typeof r&&(t.uniformLocsById[e]=r=rr.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?"["+r+"]":""))),r}Yt.recordError(1282)}var Zt=[],Qt=[];function Jt(e){return e%4==0&&(e%100!=0||e%400==0)}var Kt=[31,29,31,30,31,30,31,31,30,31,30,31],er=[31,28,31,30,31,30,31,31,30,31,30,31];var tr=function(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Te.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=i};Object.defineProperties(tr.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return Te.isDir(this.mode)}},isDevice:{get:function(){return Te.isChrdev(this.mode)}}}),Te.FSNode=tr,Te.staticInit(),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Oe=e}(),Ue=e.BindingError=Ie(Error,"BindingError"),Ne=e.InternalError=Ie(Error,"InternalError"),rt.prototype.isAliasOf=function(e){if(!(this instanceof rt))return!1;if(!(e instanceof rt))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,i=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return t===i&&r===s},rt.prototype.clone=function(){if(this.$$.ptr||ze(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=tt(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},rt.prototype.delete=function(){this.$$.ptr||ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),qe(this),Ye(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},rt.prototype.isDeleted=function(){return!this.$$.ptr},rt.prototype.deleteLater=function(){return this.$$.ptr||ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),Ze.push(this),1===Ze.length&&Je&&Je(Qe),this.$$.deleteScheduled=!0,this},e.getInheritedInstanceCount=function(){return Object.keys(Ke).length},e.getLiveInheritedInstances=function(){var e=[];for(var t in Ke)Ke.hasOwnProperty(t)&&e.push(Ke[t]);return e},e.flushPendingDeletes=Qe,e.setDelayFunction=function(e){Je=e,Ze.length&&Je&&Je(Qe)},ut.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},ut.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},ut.prototype.argPackAdvance=8,ut.prototype.readValueFromPointer=dt,ut.prototype.deleteObject=function(e){null!==e&&e.delete()},ut.prototype.fromWireType=function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=function(e,t){return t=function(e,t){for(void 0===t&&We("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Ke[t]}(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var i=r.clone();return this.destructor(e),i}function s(){return this.isSmartPointer?et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):et(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var n,o=this.registeredClass.getActualType(t),a=$e[o];if(!a)return s.call(this);n=this.isConst?a.constPointerType:a.pointerType;var c=Xe(t,this.registeredClass,n.registeredClass);return null===c?s.call(this):this.isSmartPointer?et(n.registeredClass.instancePrototype,{ptrType:n,ptr:c,smartPtrType:this,smartPtr:e}):et(n.registeredClass.instancePrototype,{ptrType:n,ptr:c})},ft=e.UnboundTypeError=Ie(Error,"UnboundTypeError"),e.count_emval_handles=function(){for(var e=0,t=5;t<xt.length;++t)void 0!==xt[t]&&++e;return e},e.get_first_emval=function(){for(var e=5;e<xt.length;++e)if(void 0!==xt[e])return xt[e];return null},e.requestFullscreen=function(e,t){Nt.requestFullscreen(e,t)},e.requestAnimationFrame=function(e){Nt.requestAnimationFrame(e)},e.setCanvasSize=function(e,t,r){Nt.setCanvasSize(e,t,r)},e.pauseMainLoop=function(){Nt.mainLoop.pause()},e.resumeMainLoop=function(){Nt.mainLoop.resume()},e.getUserMedia=function(){Nt.getUserMedia()},e.createContext=function(e,t,r,i){return Nt.createContext(e,t,r,i)};for(var rr,ir={},sr={},nr=new Float32Array(288),or=0;or<288;++or)Zt[or]=nr.subarray(0,or+1);var ar=new Int32Array(288);for(or=0;or<288;++or)Qt[or]=ar.subarray(0,or+1);function cr(e,t,r){var i=r>0?r:F(e)+1,s=new Array(i),n=D(e,s,0,s.length);return t&&(s.length=n),s}var hr,lr={na:function(){return e.HEAP8.length},g:function(e,t,r,i){ae("Assertion failed: "+A(e)+", at: "+[t?A(t):"unknown filename",r,i?A(i):"unknown function"])},b:function(e){return dr(e+24)+24},c:function(e,t,r){throw new Se(e).init(t,r),e},Z:function(e,t){try{return e=Pe.getStr(e),Te.chmod(e,t),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},_:function(e,t,r,i){try{if(t=Pe.getStr(t),t=Pe.calculateAt(e,t),-8&r)return-28;var s=Te.lookupPath(t,{follow:!0}).node;if(!s)return-44;var n="";return 4&r&&(n+="r"),2&r&&(n+="w"),1&r&&(n+="x"),n&&Te.nodePermissions(s,n)?-2:0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},r:function(e,t,r){Pe.varargs=r;try{var i=Pe.getStreamFromFD(e);switch(t){case 0:return(s=Pe.get())<0?-28:Te.createStream(i,s).fd;case 1:case 2:case 6:case 7:return 0;case 3:return i.flags;case 4:var s=Pe.get();return i.flags|=s,0;case 5:return s=Pe.get(),B[s+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return 28,U[pr()>>>2]=28,-1}}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},Q:function(e,t){try{var r=Pe.getStreamFromFD(e);return Pe.doStat(Te.stat,r.path,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},I:function(e,t,r){try{var i=Pe.getStreamFromFD(e);i.getdents||(i.getdents=Te.readdir(i.path));for(var s=280,n=0,o=Te.llseek(i,0,1),a=Math.floor(o/s);a<i.getdents.length&&n+s<=r;){var c,h,l=i.getdents[a];if("."===l)c=i.node.id,h=4;else if(".."===l)c=Te.lookupPath(i.path,{parent:!0}).node.id,h=4;else{var d=Te.lookupNode(i.node,l);c=d.id,h=Te.isChrdev(d.mode)?2:Te.isDir(d.mode)?4:Te.isLink(d.mode)?10:8}de=[c>>>0,(le=c,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[t+n>>>2]=de[0],U[t+n+4>>>2]=de[1],de=[(a+1)*s>>>0,(le=(a+1)*s,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[t+n+8>>>2]=de[0],U[t+n+12>>>2]=de[1],B[t+n+16>>>1]=280,M[t+n+18>>>0]=h,_(l,t+n+19,256),n+=s,a+=1}return Te.llseek(i,a*s,0),n}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},$:function(e,t,r){Pe.varargs=r;try{var i=Pe.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var s=Pe.get();return U[s>>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:return s=Pe.get(),Te.ioctl(i,t,s);default:ae("bad ioctl syscall "+t)}}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},N:function(e,t){try{return e=Pe.getStr(e),Pe.doStat(Te.lstat,e,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},K:function(e,t,r){try{return t=Pe.getStr(t),t=Pe.calculateAt(e,t),"/"===(t=ye.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Te.mkdir(t,r,0),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},O:function(e,t,r,i){try{t=Pe.getStr(t);var s=256&i,n=4096&i;return i&=-4353,t=Pe.calculateAt(e,t,n),Pe.doStat(s?Te.lstat:Te.stat,t,r)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},v:function(e,t,r,i){Pe.varargs=i;try{t=Pe.getStr(t),t=Pe.calculateAt(e,t);var s=i?Pe.get():0;return Te.open(t,r,s).fd}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},H:function(e){try{return e=Pe.getStr(e),Te.rmdir(e),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},P:function(e,t){try{return e=Pe.getStr(e),Pe.doStat(Te.stat,e,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},F:function(e,t,r){try{return t=Pe.getStr(t),t=Pe.calculateAt(e,t),0===r?Te.unlink(t):512===r?Te.rmdir(t):ae("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},W:function(e){},Y:function(e,t){ae(Ce)},X:function(e,t){ae(Ce)},B:function(e,t,r,i,s){},ba:function(e,t,r,i,s){var n=ke(r);Ve(e,{name:t=Ae(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:s},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===r)i=M;else if(2===r)i=B;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);i=U}return this.fromWireType(i[e>>>n])},destructorFunction:null})},d:function(t,r,i,s,n,o,a,c,h,l,d,u,p){d=Ae(d),o=pt(n,o),c&&(c=pt(a,c)),l&&(l=pt(h,l)),p=pt(u,p);var f=Le(d);st(f,(function(){gt("Cannot construct "+d+" due to unbound types",[s])})),He([t,r,i],s?[s]:[],(function(r){var i,n;r=r[0],n=s?(i=r.registeredClass).instancePrototype:rt.prototype;var a=Be(f,(function(){if(Object.getPrototypeOf(this)!==h)throw new Ue("Use 'new' to construct "+d);if(void 0===u.constructor_body)throw new Ue(d+" has no accessible constructor");var e=u.constructor_body[arguments.length];if(void 0===e)throw new Ue("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),h=Object.create(n,{constructor:{value:a}});a.prototype=h;var u=new nt(d,a,h,p,i,o,c,l),v=new ut(d,u,!0,!1,!1),g=new ut(d+"*",u,!1,!1,!1),m=new ut(d+" const*",u,!1,!0,!1);return $e[t]={pointerType:g,constPointerType:m},function(t,r,i){e.hasOwnProperty(t)||Ge("Replacing nonexistant public symbol"),e[t].overloadTable,e[t]=r,e[t].argCount=i}(f,a),[v,g,m]}))},f:function(e,t,r,i,s,n,o){var a=bt(r,i);t=Ae(t),n=pt(s,n),He([],[e],(function(e){var i=(e=e[0]).name+"."+t;function s(){gt("Cannot call "+i+" due to unbound types",a)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.registeredClass.constructor;return void 0===c[t]?(s.argCount=r-1,c[t]=s):(it(c,t,i),c[t].overloadTable[r-1]=s),He([],a,(function(e){var s=[e[0],null].concat(e.slice(1)),a=yt(i,s,null,n,o);return void 0===c[t].overloadTable?(a.argCount=r-1,c[t]=a):c[t].overloadTable[r-1]=a,[]})),[]}))},e:function(e,t,r,i,s,n){C(t>0);var o=bt(t,r);s=pt(i,s),He([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Ue("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{gt("Cannot construct "+e.name+" due to unbound types",o)},He([],o,(function(i){return i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=yt(r,i,null,s,n),[]})),[]}))},a:function(e,t,r,i,s,n,o,a){var c=bt(r,i);t=Ae(t),n=pt(s,n),He([],[e],(function(e){var i=(e=e[0]).name+"."+t;function s(){gt("Cannot call "+i+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var h=e.registeredClass.instancePrototype,l=h[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===r-2?(s.argCount=r-2,s.className=e.name,h[t]=s):(it(h,t,i),h[t].overloadTable[r-2]=s),He([],c,(function(s){var a=yt(i,s,e,n,o);return void 0===h[t].overloadTable?(a.argCount=r-2,h[t]=a):h[t].overloadTable[r-2]=a,[]})),[]}))},k:function(e,t,r,i,s,n,o,a,c,h){t=Ae(t),s=pt(i,s),He([],[e],(function(e){var i=(e=e[0]).name+"."+t,l={get:function(){gt("Cannot access "+i+" due to unbound types",[r,o])},enumerable:!0,configurable:!0};return l.set=c?()=>{gt("Cannot access "+i+" due to unbound types",[r,o])}:e=>{We(i+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,l),He([],c?[r,o]:[r],(function(r){var o=r[0],l={get:function(){var t=wt(this,e,i+" getter");return o.fromWireType(s(n,t))},enumerable:!0};if(c){c=pt(a,c);var d=r[1];l.set=function(t){var r=wt(this,e,i+" setter"),s=[];c(h,r,d.toWireType(s,t)),St(s)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},aa:function(e,t){Ve(e,{name:t=Ae(t),fromWireType:function(e){var t=Pt.toValue(e);return Tt(e),t},toWireType:function(e,t){return Pt.toHandle(t)},argPackAdvance:8,readValueFromPointer:dt,destructorFunction:null})},i:function(e,t,r,i){var s=ke(r);function n(){}t=Ae(t),n.values={},Ve(e,{name:t,constructor:n,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Ct(t,s,i),destructorFunction:null}),st(t,n)},h:function(e,t,r){var i=kt(e,"enum");t=Ae(t);var s=i.constructor,n=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:Be(i.name+"_"+t,(function(){}))}});s.values[r]=n,s[t]=n},y:function(e,t,r){var i=ke(r);Ve(e,{name:t=Ae(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:At(t,i),destructorFunction:null})},l:function(e,t,r,i,s){t=Ae(t),-1===s&&(s=4294967295);var n=ke(r),o=e=>e;if(0===i){var a=32-8*r;o=e=>e<<a>>>a}var c=t.includes("unsigned");Ve(e,{name:t,fromWireType:o,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Dt(t,n,0!==i),destructorFunction:null})},j:function(e,t,r){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function s(e){var t=W,r=t[(e>>=2)>>>0],s=t[e+1>>>0];return new i(R,s,r)}Ve(e,{name:r=Ae(r),fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})},x:function(e,t){var r="std::string"===(t=Ae(t));Ve(e,{name:t,fromWireType:function(e){var t,i=W[e>>>2];if(r)for(var s=e+4,n=0;n<=i;++n){var o=e+4+n;if(n==i||0==L[o>>>0]){var a=A(s,o-s);void 0===t?t=a:(t+=String.fromCharCode(0),t+=a),s=o+1}}else{var c=new Array(i);for(n=0;n<i;++n)c[n]=String.fromCharCode(L[e+4+n>>>0]);t=c.join("")}return ur(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||We("Cannot pass non-string to std::string");var s=(r&&i?()=>F(t):()=>t.length)(),n=dr(4+s+1);if(W[(n>>>=0)>>>2]=s,r&&i)_(t,n+4,s+1);else if(i)for(var o=0;o<s;++o){var a=t.charCodeAt(o);a>255&&(ur(n),We("String has UTF-16 code units that do not fit in 8 bits")),L[n+4+o>>>0]=a}else for(o=0;o<s;++o)L[n+4+o>>>0]=t[o];return null!==e&&e.push(ur,n),n},argPackAdvance:8,readValueFromPointer:dt,destructorFunction:function(e){ur(e)}})},s:function(e,t,r){var i,s,n,o,a;r=Ae(r),2===t?(i=V,s=z,o=j,n=()=>I,a=1):4===t&&(i=q,s=Y,o=X,n=()=>W,a=2),Ve(e,{name:r,fromWireType:function(e){for(var r,s=W[e>>>2],o=n(),c=e+4,h=0;h<=s;++h){var l=e+4+h*t;if(h==s||0==o[l>>>a]){var d=i(c,l-c);void 0===r?r=d:(r+=String.fromCharCode(0),r+=d),c=l+t}}return ur(e),r},toWireType:function(e,i){"string"!=typeof i&&We("Cannot pass non-string to C++ string type "+r);var n=o(i),c=dr(4+n+t);return W[(c>>>=0)>>>2]=n>>a,s(i,c+4,n+t),null!==e&&e.push(ur,c),c},argPackAdvance:8,readValueFromPointer:dt,destructorFunction:function(e){ur(e)}})},ca:function(e,t){Ve(e,{isVoid:!0,name:t=Ae(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},T:function(){return Date.now()},S:function(){return!0},n:function(e,t,r){e=Pt.toValue(e),t=kt(t,"emval::as");var i=[],s=Pt.toHandle(i);return U[r>>>2]=s,t.toWireType(i,e)},sa:function(e,t,r,i,s){return(e=Rt[e])(t=Pt.toValue(t),r=Ft(r),function(e){var t=[];return U[e>>>2]=Pt.toHandle(t),t}(i),s)},wa:Tt,ta:function(e){return 0===e?Pt.toHandle(Mt()):(e=Ft(e),Pt.toHandle(Mt()[e]))},ra:function(e,t){var r=function(e,t){for(var r=new Array(e),i=0;i<e;++i)r[i]=kt(W[t+4*i>>>2],"parameter "+i);return r}(e,t),i=r[0],s=i.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$",n=Bt[s];if(void 0!==n)return n;for(var o=["retType"],a=[i],c="",h=0;h<e-1;++h)c+=(0!==h?", ":"")+"arg"+h,o.push("argType"+h),a.push(r[1+h]);var l,d,u="return function "+Le("methodCaller_"+s)+"(handle, name, destructors, args) {\n",p=0;for(h=0;h<e-1;++h)u+="    var arg"+h+" = argType"+h+".readValueFromPointer(args"+(p?"+"+p:"")+");\n",p+=r[h+1].argPackAdvance;for(u+="    var rv = handle[name]("+c+");\n",h=0;h<e-1;++h)r[h+1].deleteObject&&(u+="    argType"+h+".deleteObject(arg"+h+");\n");return i.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u),l=mt(Function,o).apply(null,a),d=Rt.length,Rt.push(l),n=d,Bt[s]=n,n},t:function(e,t){return e=Pt.toValue(e),t=Pt.toValue(t),Pt.toHandle(e[t])},z:function(e){e>4&&(xt[e].refcount+=1)},qa:function(e){return Pt.toHandle(Ft(e))},ua:function(e){St(Pt.toValue(e)),Tt(e)},o:function(e,t,r){e=Pt.toValue(e),t=Pt.toValue(t),r=Pt.toValue(r),e[t]=r},m:function(e,t){var r=(e=kt(e,"_emval_take_value")).readValueFromPointer(t);return Pt.toHandle(r)},va:function(e){return e=Pt.toValue(e),Pt.toHandle(typeof e)},U:function(e,t){var r=new Date(1e3*U[e>>>2]);U[t>>>2]=r.getSeconds(),U[t+4>>>2]=r.getMinutes(),U[t+8>>>2]=r.getHours(),U[t+12>>>2]=r.getDate(),U[t+16>>>2]=r.getMonth(),U[t+20>>>2]=r.getFullYear()-1900,U[t+24>>>2]=r.getDay();var i=new Date(r.getFullYear(),0,1),s=(r.getTime()-i.getTime())/864e5|0;U[t+28>>>2]=s,U[t+36>>>2]=-60*r.getTimezoneOffset();var n=new Date(r.getFullYear(),6,1).getTimezoneOffset(),o=i.getTimezoneOffset(),a=0|(n!=o&&r.getTimezoneOffset()==Math.min(o,n));U[t+32>>>2]=a},J:function(e,t,r,i,s,n){try{e>>>=0;var o=Te.getStream(s);o&&(2&r&&Pe.doMsync(e,o,t,i,n),Te.munmap(o))}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},V:function e(t,r,i){e.called||(e.called=!0,function(e,t,r){var i=(new Date).getFullYear(),s=new Date(i,0,1),n=new Date(i,6,1),o=s.getTimezoneOffset(),a=n.getTimezoneOffset(),c=Math.max(o,a);function h(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}U[e>>>2]=60*c,U[t>>>2]=Number(o!=a);var l=h(s),d=h(n),u=$(l),p=$(d);a<o?(W[r>>>2]=u,W[r+4>>>2]=p):(W[r>>>2]=p,W[r+4>>>2]=u)}(t,r,i))},u:function(){ae("")},G:function(){return 4294901760},da:function(e,t,r){(0|e)===e&&(e=A(e)),e=be.resolve(e);var i=ir[e];if(i){var s=i.getContext("2d").getImageData(0,0,i.width,i.height),n=dr(i.width*i.height*4);return L.set(s.data,n>>>0),U[t>>>2]=i.width,U[r>>>2]=i.height,n}return 0},R:function(e,t,r){L.copyWithin(e>>>0,t>>>0,t+r>>>0)},E:function(e){var t,r=L.length,i=4294901760;if((e>>>=0)>i)return!1;for(var s=1;s<=4;s*=2){var n=r*(1+.2/s);if(n=Math.min(n,e+100663296),Gt(Math.min(i,(t=Math.max(e,n))+(65536-t%65536)%65536)))return!0}return!1},L:function(e,t){var r=0;return Vt().forEach((function(i,s){var n=t+r;W[e+4*s>>>2]=n,function(e,t,r){for(var i=0;i<e.length;++i)M[t++>>>0]=e.charCodeAt(i);M[t>>>0]=0}(i,n),r+=i.length+1})),0},M:function(e,t){var r=Vt();W[e>>>2]=r.length;var i=0;return r.forEach((function(e){i+=e.length+1})),W[t>>>2]=i,0},oa:function(t){!function(t,r){var i;T=t,T=i=t,te()||(e.onExit&&e.onExit(i),P=!0),p(i,new Sr(i))}(t)},p:function(e){try{var t=Pe.getStreamFromFD(e);return Te.close(t),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},w:function(e,t,r,i){try{var s=function(e,t,r,i){for(var s=0,n=0;n<r;n++){var o=W[t>>>2],a=W[t+4>>>2];t+=8;var c=Te.read(e,M,o,a,undefined);if(c<0)return-1;if(s+=c,c<a)break}return s}(Pe.getStreamFromFD(e),t,r);return U[i>>>2]=s,0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},A:function(e,t,r,i,s){try{var n=(c=r)+2097152>>>0<4194305-!!(a=t)?(a>>>0)+4294967296*c:NaN;if(isNaN(n))return 61;var o=Pe.getStreamFromFD(e);return Te.llseek(o,n,i),de=[o.position>>>0,(le=o.position,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[s>>>2]=de[0],U[s+4>>>2]=de[1],o.getdents&&0===n&&0===i&&(o.getdents=null),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}var a,c},q:function(e,t,r,i){try{var s=function(e,t,r,i){for(var s=0,n=0;n<r;n++){var o=W[t>>>2],a=W[t+4>>>2];t+=8;var c=Te.write(e,M,o,a,undefined);if(c<0)return-1;s+=c}return s}(Pe.getStreamFromFD(e),t,r);return W[i>>>2]=s,0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},pa:function(e){return function(e){var t=dr(20),r=dr(e.length+1);_(e,r,e.length+1),W[t>>>2]=r;var i=dr(4);W[i>>>2]=0,W[t+4>>>2]=i,U[t+8>>>2]=2,U[t+12>>>2]=4;var s=dr(12);return W[s>>>2]=s+8,W[s+4>>>2]=0,U[s+8>>>2]=zt(qt.lookup_name(e)),W[t+16>>>2]=s,t}(A(e))},ma:function(e,t){if(t=A(t),e=Yt.programs[e]){!function(e){var t,r,i=e.uniformLocsById,s=e.uniformSizeAndIdsByName;if(!i)for(e.uniformLocsById=i={},e.uniformArrayNamesById={},t=0;t<rr.getProgramParameter(e,35718);++t){var n=rr.getActiveUniform(e,t),o=n.name,a=n.size,c=Xt(o),h=c>0?o.slice(0,c):o,l=e.uniformIdCounter;for(e.uniformIdCounter+=a,s[h]=[a,l],r=0;r<a;++r)i[l]=r,e.uniformArrayNamesById[l++]=h}}(e);var r=e.uniformLocsById,i=0,s=t,n=Xt(t);n>0&&(i=jt(t.slice(n+1))>>>0,s=t.slice(0,n));var o=e.uniformSizeAndIdsByName[s];if(o&&i<o[0]&&(r[i+=o[1]]=r[i]||rr.getUniformLocation(e,t)))return i}else Yt.recordError(1281);return-1},ka:function(e,t){rr.uniform1f($t(e),t)},la:function(e,t){rr.uniform1i($t(e),t)},ga:function(e,t,r){if(t<=144)for(var i=Zt[2*t-1],s=0;s<2*t;s+=2)i[s]=N[r+4*s>>>2],i[s+1]=N[r+(4*s+4)>>>2];else i=N.subarray(r>>>2,r+8*t>>>2);rr.uniform2fv($t(e),i)},ja:function(e,t,r){if(t<=144)for(var i=Qt[2*t-1],s=0;s<2*t;s+=2)i[s]=U[r+4*s>>>2],i[s+1]=U[r+(4*s+4)>>>2];else i=U.subarray(r>>>2,r+8*t>>>2);rr.uniform2iv($t(e),i)},fa:function(e,t,r){if(t<=96)for(var i=Zt[3*t-1],s=0;s<3*t;s+=3)i[s]=N[r+4*s>>>2],i[s+1]=N[r+(4*s+4)>>>2],i[s+2]=N[r+(4*s+8)>>>2];else i=N.subarray(r>>>2,r+12*t>>>2);rr.uniform3fv($t(e),i)},ia:function(e,t,r){if(t<=96)for(var i=Qt[3*t-1],s=0;s<3*t;s+=3)i[s]=U[r+4*s>>>2],i[s+1]=U[r+(4*s+4)>>>2],i[s+2]=U[r+(4*s+8)>>>2];else i=U.subarray(r>>>2,r+12*t>>>2);rr.uniform3iv($t(e),i)},ea:function(e,t,r){if(t<=72){var i=Zt[4*t-1],s=N;r>>=2;for(var n=0;n<4*t;n+=4){var o=r+n;i[n]=s[o>>>0],i[n+1]=s[o+1>>>0],i[n+2]=s[o+2>>>0],i[n+3]=s[o+3>>>0]}}else i=N.subarray(r>>>2,r+16*t>>>2);rr.uniform4fv($t(e),i)},ha:function(e,t,r){if(t<=72)for(var i=Qt[4*t-1],s=0;s<4*t;s+=4)i[s]=U[r+4*s>>>2],i[s+1]=U[r+(4*s+4)>>>2],i[s+2]=U[r+(4*s+8)>>>2],i[s+3]=U[r+(4*s+12)>>>2];else i=U.subarray(r>>>2,r+16*t>>>2);rr.uniform4iv($t(e),i)},C:function(e){},D:function(e,t,r,i){return function(e,t,r,i){var s=U[i+40>>>2],n={tm_sec:U[i>>>2],tm_min:U[i+4>>>2],tm_hour:U[i+8>>>2],tm_mday:U[i+12>>>2],tm_mon:U[i+16>>>2],tm_year:U[i+20>>>2],tm_wday:U[i+24>>>2],tm_yday:U[i+28>>>2],tm_isdst:U[i+32>>>2],tm_gmtoff:U[i+36>>>2],tm_zone:s?A(s):""},o=A(r),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in a)o=o.replace(new RegExp(c,"g"),a[c]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,r){for(var i="number"==typeof e?e.toString():e||"";i.length<t;)i=r[0]+i;return i}function u(e,t){return d(e,t,"0")}function p(e,t){function r(e){return e<0?-1:e>0?1:0}var i;return 0===(i=r(e.getFullYear()-t.getFullYear()))&&0===(i=r(e.getMonth()-t.getMonth()))&&(i=r(e.getDate()-t.getDate())),i}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function v(e){var t=function(e,t){for(var r=new Date(e.getTime());t>0;){var i=Jt(r.getFullYear()),s=r.getMonth(),n=(i?Kt:er)[s];if(!(t>n-r.getDate()))return r.setDate(r.getDate()+t),r;t-=n-r.getDate()+1,r.setDate(1),s<11?r.setMonth(s+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),s=f(r),n=f(i);return p(s,t)<=0?p(n,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return h[e.tm_wday].substring(0,3)},"%A":function(e){return h[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return u((e.tm_year+1900)/100|0,2)},"%d":function(e){return u(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return v(e).toString().substring(2)},"%G":function(e){return v(e)},"%H":function(e){return u(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),u(t,2)},"%j":function(e){return u(e.tm_mday+function(e,t){for(var r=0,i=0;i<=t;r+=e[i++]);return r}(Jt(e.tm_year+1900)?Kt:er,e.tm_mon-1),3)},"%m":function(e){return u(e.tm_mon+1,2)},"%M":function(e){return u(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return u(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return u(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4==r||3==r&&Jt(e.tm_year)||(t=1)}}else{t=52;var i=(e.tm_wday+7-e.tm_yday-1)%7;(4==i||5==i&&Jt(e.tm_year%400-1))&&t++}return u(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return u(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in o=o.replace(/%%/g,"\0\0"),g)o.includes(c)&&(o=o.replace(new RegExp(c,"g"),g[c](n)));var m=cr(o=o.replace(/\0\0/g,"%"),!1);return m.length>t?0:(function(e,t){M.set(e,t>>>0)}(m,e),m.length-1)}(e,t,r,i)}},dr=(function(){var t={a:lr};function r(t,r){var i,s=t.exports;e.asm=s,Z((E=e.asm.xa).buffer),Q=e.asm.Ea,i=e.asm.ya,K.unshift(i),oe()}function s(e){r(e.instance)}function o(e){return function(){if(!b&&(f||v)){if("function"==typeof fetch&&!pe(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return fe(ce)}));if(n)return new Promise((function(e,t){n(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return fe(ce)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(ne(),e.instantiateWasm)try{return e.instantiateWasm(t,r)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(b||"function"!=typeof WebAssembly.instantiateStreaming||ue(ce)||pe(ce)||g||"function"!=typeof fetch?o(s):fetch(ce,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(s,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),o(s)}))}))).catch(i)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.ya).apply(null,arguments)},e._malloc=function(){return(dr=e._malloc=e.asm.za).apply(null,arguments)}),ur=e._free=function(){return(ur=e._free=e.asm.Aa).apply(null,arguments)},pr=e.___errno_location=function(){return(pr=e.___errno_location=e.asm.Ba).apply(null,arguments)},fr=e.___getTypeName=function(){return(fr=e.___getTypeName=e.asm.Ca).apply(null,arguments)},vr=(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.Da).apply(null,arguments)},e._htons=function(){return(vr=e._htons=e.asm.Fa).apply(null,arguments)}),gr=e._emscripten_builtin_memalign=function(){return(gr=e._emscripten_builtin_memalign=e.asm.Ga).apply(null,arguments)},mr=e.___cxa_is_pointer_type=function(){return(mr=e.___cxa_is_pointer_type=e.asm.Ha).apply(null,arguments)};function Sr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function yr(r){function i(){hr||(hr=!0,e.calledRun=!0,P||(e.noFSInit||Te.init.initialized||Te.init(),Te.ignorePermissions=!1,we.init(),ve(K),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),ee.unshift(t);var t;ve(ee)}()))}r=r||d,re>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),J.unshift(t);var t;ve(J)}(),re>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),i()}),1)):i()))}if(e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.Ia).apply(null,arguments)},e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.Ja).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.Ka).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.La).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.Ma).apply(null,arguments)},e.dynCall_viiiiji=function(){return(e.dynCall_viiiiji=e.asm.Na).apply(null,arguments)},e.dynCall_viiijj=function(){return(e.dynCall_viiijj=e.asm.Oa).apply(null,arguments)},e.FS=Te,se=function e(){hr||yr(),hr||(se=e)},e.run=yr,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return yr(),e.ready});const ct=at;class ht{constructor(e){this.occ=e,this.hashesFromPreviousRun={},this.usedHashes={},this.argCache={}}cleanAllCache(){Object.keys(this.usedHashes).forEach((e=>{if(this.argCache[e])try{const t=this.argCache[e];this.occ.BRepTools.Clean(t,!0),this.occ.BRepTools.CleanGeometry(t),t.delete()}catch(e){}})),this.argCache={},this.usedHashes={},this.hashesFromPreviousRun={}}cleanCacheForHash(e){if(this.argCache[e])try{const t=this.argCache[e];this.occ.BRepTools.Clean(t,!0),this.occ.BRepTools.CleanGeometry(t),t.delete()}catch(e){}delete this.argCache[e],delete this.usedHashes[e],delete this.hashesFromPreviousRun[e]}cleanUpCache(){}isOCCTObject(e){return null!=e&&!Array.isArray(e)&&void 0!==e.$$||Array.isArray(e)&&e.length>0&&void 0!==e[0].$$}cacheOp(e,t){let r=null;const i=this.computeHash(e);this.usedHashes[i]=i,this.hashesFromPreviousRun[i]=i;const s=this.checkCache(i);if(s)this.isOCCTObject(s)?(r=s,r.hash=s.hash):s.value&&(r=s.value);else if(r=t(),Array.isArray(r)&&this.isOCCTObject(r))r.forEach(((t,r)=>{const i=this.computeHash(Object.assign(Object.assign({},e),{index:r}));t.hash=i,this.addToCache(i,t)}));else if(this.isOCCTObject(r))r.hash=i,this.addToCache(i,r);else if(r&&r.compound&&r.data&&r.shapes&&r.shapes.length>0){const t=r,s=this.computeHash(Object.assign(Object.assign({},e),{index:"compound"}));t.compound.hash=s,this.addToCache(s,t.compound),t.shapes.forEach(((t,r)=>{const i=this.computeHash(Object.assign(Object.assign({},e),{index:r}));t.shape.hash=i,this.addToCache(i,t.shape)})),this.addToCache(i,{value:t})}else this.addToCache(i,{value:r});return r}checkCache(e){return this.argCache[e]||null}addToCache(e,t){const r=t;return r.hash=e,this.argCache[e]=r,e}computeHash(e,t){let r=JSON.stringify(e);r=r.replace(/(\"ptr\"\:(-?[0-9]*?)\,)/g,""),r=r.replace(/(\"ptr\"\:(-?[0-9]*))/g,""),r.includes("ptr")&&console.error("YOU DONE MESSED UP YOUR REGEX.");const i=Math.random.toString()+r;return t?i:this.stringToHash(i)}stringToHash(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}remove(e,t){return e.filter((e=>e.hash!==t.hash||e.ptr!==t.ptr))}dupShape(e){return e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE?this.occ.TopoDS.Wire_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SHELL?this.occ.TopoDS.Shell_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?this.occ.TopoDS.Edge_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SOLID?this.occ.TopoDS.Solid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_FACE?this.occ.TopoDS.Face_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND?this.occ.TopoDS.Compound_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID?this.occ.TopoDS.CompSolid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX?this.occ.TopoDS.Vertex_1(e):void 0}}let lt,dt,ut;class pt{static distributeBetweenBounds(e,t,r,i=!1){const s=[];let n=r;for(i&&s.push(n);n>t;)n-=e,s.push(n);return s}static computeSideA(e,t){const r=e*Math.PI/180,i=t/Math.cos(r),s=Math.pow(i,2)-Math.pow(t,2);return Math.sqrt(s)}static computeSideAFromHypotenuseAndAngle(e,t){const r=e*Math.PI/180;return t*Math.sin(r)}static computeHypotenuse(e,t){return t/Math.cos(e*Math.PI/180)}}var ft,vt,gt,mt,St,yt;!function(e){e.low="low",e.middle="middle",e.high="high"}(ft||(ft={}));class bt{constructor(){this.lod=ft.low}}class wt{}class Et{constructor(e,t,r,i,s,n,o,a,c){this.swirl=.6,this.nrOfDivisions=10,this.addRadiusNarrow=.4,this.addRadiusWide=.2,this.addMiddleHeight=1.6,this.addTopHeight=1.5,this.thickness=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.swirl=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==r&&(this.addRadiusNarrow=r),void 0!==i&&(this.addRadiusWide=i),void 0!==s&&(this.addMiddleHeight=s),void 0!==n&&(this.addTopHeight=n),void 0!==o&&(this.thickness=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c)}}class xt{constructor(){this.type="parametric-model",this.name="serenitySwirl"}}class Tt{}class Pt{constructor(e,t,r,i,s,n,o,a,c,h,l,d){this.profilePoints=[[2,0,0],[4,5,0],[1.5,10,0],[3,14,0]],this.nrOfSides=6,this.nrOfVerticalArches=4,this.archCenterThickness=.8,this.edgesThickness=.2,this.thickness=1,this.baseHeight=.4,this.patchHoles=!0,this.lod=ft.high,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.nrOfSides=e),void 0!==t&&(this.nrOfVerticalArches=t),void 0!==r&&(this.archCenterThickness=r),void 0!==i&&(this.edgesThickness=i),void 0!==s&&(this.thickness=s),void 0!==n&&(this.baseHeight=n),void 0!==o&&(this.patchHoles=o),void 0!==a&&(this.lod=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.origin=h),void 0!==l&&(this.direction=l),void 0!==d&&(this.scale=d)}}class Ct{constructor(){this.type="parametric-model",this.name="arabicArchway"}}class kt{}class Ot{}class At{}class Dt{constructor(e,t,r,i,s,n,o,a){this.textHeading="LOVE YOU",this.textName="NORA",this.fullModel=!0,this.thickness=6,this.decorationThickness=1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textHeading=e),void 0!==t&&(this.textName=t),void 0!==r&&(this.fullModel=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.decorationThickness=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.origin=o),void 0!==a&&(this.direction=a)}}class _t{constructor(){this.type="parametric-model",this.name="eternalLove"}}class Ft{}class Rt{constructor(e,t,r,i,s,n,o,a,c,h,l,d){this.height=6,this.radiusBottom=4,this.radiusTopOffset=2,this.thickness=.6,this.fillet=.2,this.nrOfHandles=1,this.handleDist=2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.fillet=s),void 0!==n&&(this.nrOfHandles=n),void 0!==o&&(this.handleDist=o),void 0!==a&&(this.precision=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.scale=h),void 0!==l&&(this.origin=l),void 0!==d&&(this.direction=d)}}class Mt{constructor(){this.type="parametric-model",this.name="calmCup"}}class Lt{}class Bt{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b){this.height=8,this.radiusBottom=4,this.radiusTopOffset=2,this.radiusMidOffset=2,this.rotationTopAngle=20,this.rotationMidAngle=20,this.nrSkinCellsVertical=5,this.nrSkinCellsHorizontal=10,this.nrSkinCellDivisionsTop=1,this.nrSkinCellDivisionsBottom=3,this.skinCellOuterHeight=.4,this.skinCellInnerHeight=.3,this.skinCellBottomHeight=.4,this.skinCellTopHeight=.4,this.thickness=.6,this.bottomThickness=1,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==r&&(this.radiusTopOffset=r),void 0!==i&&(this.radiusMidOffset=i),void 0!==s&&(this.rotationTopAngle=s),void 0!==n&&(this.rotationMidAngle=n),void 0!==o&&(this.nrSkinCellsVertical=o),void 0!==a&&(this.nrSkinCellsHorizontal=a),void 0!==c&&(this.nrSkinCellDivisionsTop=c),void 0!==h&&(this.nrSkinCellDivisionsBottom=h),void 0!==l&&(this.skinCellOuterHeight=l),void 0!==d&&(this.skinCellInnerHeight=d),void 0!==u&&(this.skinCellBottomHeight=u),void 0!==p&&(this.skinCellTopHeight=p),void 0!==f&&(this.thickness=f),void 0!==v&&(this.bottomThickness=v),void 0!==g&&(this.precision=g),void 0!==m&&(this.rotation=m),void 0!==S&&(this.scale=S),void 0!==y&&(this.origin=y),void 0!==b&&(this.direction=b)}}class It{constructor(){this.type="parametric-model",this.name="dragonCup"}}class Ut{}class Wt{}class Nt{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m){this.heightBottom=5,this.heightTop=16,this.widthBack=25,this.widthFront=10,this.length=16,this.backOffset=6,this.thickness=.4,this.applyOrnaments=!1,this.filletRadius=2,this.phoneHeight=16.8,this.phoneWidth=7.8,this.phoneThickness=.7,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.heightBottom=e),void 0!==t&&(this.heightTop=t),void 0!==r&&(this.widthBack=r),void 0!==i&&(this.widthFront=i),void 0!==s&&(this.length=s),void 0!==n&&(this.backOffset=n),void 0!==o&&(this.thickness=o),void 0!==a&&(this.applyOrnaments=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.phoneHeight=h),void 0!==l&&(this.phoneWidth=l),void 0!==d&&(this.phoneThickness=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Gt{constructor(){this.type="parametric-model",this.name="phoneNest"}}class Ht extends wt{}class Vt{}class zt extends wt{}class jt{}class qt{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Yt{}class Xt{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.textTop="Pepper",this.textFront="For Your Spicy Needs",this.nrSides=4,this.nrOffsets=1,this.height=6,this.radiusBase=4,this.radiusOffset=2,this.coverHeight=1,this.baseHeight=1,this.thickness=.6,this.ornamentalThickness=.1,this.nrOrnamnetsPerSide=10,this.invertOrnaments=!1,this.fillet=.2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textTop=e),void 0!==t&&(this.textFront=t),void 0!==r&&(this.nrSides=r),void 0!==i&&(this.nrOffsets=i),void 0!==s&&(this.height=s),void 0!==n&&(this.coverHeight=n),void 0!==o&&(this.baseHeight=o),void 0!==a&&(this.radiusBase=a),void 0!==c&&(this.radiusOffset=c),void 0!==h&&(this.thickness=h),void 0!==l&&(this.ornamentalThickness=l),void 0!==d&&(this.nrOrnamnetsPerSide=d),void 0!==u&&(this.invertOrnaments=u),void 0!==p&&(this.fillet=p),void 0!==f&&(this.precision=f),void 0!==v&&(this.rotation=v),void 0!==g&&(this.scale=g),void 0!==m&&(this.origin=m),void 0!==S&&(this.direction=S)}}class $t{constructor(){this.type="parametric-model",this.name="spicyBox"}}class Zt{}class Qt{}class Jt{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b,w,E,x,T){this.title="Your Name",this.subtitle="And Message",this.includeLogo=!0,this.thickness=.4,this.kerf=.01,this.phoneWidth=8,this.phoneHeight=16,this.phoneThickness=1,this.backLength=10,this.angle=20,this.offsetAroundPhone=.5,this.penShelf=1,this.phoneLockHeight=.5,this.filletRadius=.3,this.includePattern=!1,this.densityPattern=.4,this.holesForWire=!0,this.wireInputThickness=1.5,this.includeModel=!0,this.includeDrawings=!0,this.spacingDrawings=.5,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.title=e),void 0!==t&&(this.subtitle=t),void 0!==r&&(this.includeLogo=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.kerf=s),void 0!==n&&(this.phoneWidth=n),void 0!==o&&(this.phoneHeight=o),void 0!==a&&(this.phoneThickness=a),void 0!==c&&(this.backLength=c),void 0!==h&&(this.angle=h),void 0!==l&&(this.offsetAroundPhone=l),void 0!==d&&(this.penShelf=d),void 0!==u&&(this.phoneLockHeight=u),void 0!==p&&(this.filletRadius=p),void 0!==f&&(this.includePattern=f),void 0!==v&&(this.densityPattern=v),void 0!==g&&(this.holesForWire=g),void 0!==m&&(this.wireInputThickness=m),void 0!==S&&(this.includeModel=S),void 0!==y&&(this.includeDrawings=y),void 0!==b&&(this.spacingDrawings=b),void 0!==w&&(this.rotation=w),void 0!==E&&(this.origin=E),void 0!==x&&(this.direction=x),void 0!==T&&(this.scale=T)}}class Kt{}class er{constructor(){this.cutWiresColor="#000000",this.engravingWiresColor="#0000ff",this.fileName="bitbybit-droplets-phone-holder",this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7}}class tr{constructor(){this.fileName="bitbybit-droplets-phone-holder",this.adjustYZ=!0}}class rr{constructor(){this.type="parametric-model",this.name="dropletsPhoneHolder"}}class ir{}class sr{}class nr{}class or{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b,w,E,x,T,P,C,k,O,A){this.widthFirstWing=4,this.lengthFirstWing=10,this.terraceWidth=3,this.widthSecondWing=5,this.lengthSecondWing=10,this.heightWalls=3,this.roofAngleFirstWing=15,this.roofAngleSecondWing=25,this.roofOffset=.5,this.roofInsideOverhang=.5,this.roofMaxDistAttachmentBeams=.8,this.roofAttachmentBeamWidth=.2,this.roofAttachmentBeamHeight=.05,this.roofOutsideOverhang=.5,this.columnSize=.3,this.ceilingBeamHeight=.25,this.ceilingBeamWidth=.1,this.nrCeilingBeamsBetweenColumns=3,this.distBetweenColumns=2,this.floorHeight=.1,this.groundLevel=.6,this.facadePanelThickness=.05,this.windowWidthOffset=.1,this.windowHeightOffset=.2,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05,this.lod=ft.high,this.skinOpacity=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.widthFirstWing=e),void 0!==t&&(this.lengthFirstWing=t),void 0!==r&&(this.terraceWidth=r),void 0!==i&&(this.widthSecondWing=i),void 0!==s&&(this.lengthSecondWing=s),void 0!==n&&(this.heightWalls=n),void 0!==o&&(this.roofAngleFirstWing=o),void 0!==a&&(this.roofAngleSecondWing=a),void 0!==c&&(this.roofOffset=c),void 0!==h&&(this.roofInsideOverhang=h),void 0!==l&&(this.roofMaxDistAttachmentBeams=l),void 0!==d&&(this.roofAttachmentBeamWidth=d),void 0!==u&&(this.roofAttachmentBeamHeight=u),void 0!==p&&(this.roofOutsideOverhang=p),void 0!==f&&(this.columnSize=f),void 0!==v&&(this.ceilingBeamHeight=v),void 0!==g&&(this.ceilingBeamWidth=g),void 0!==m&&(this.nrCeilingBeamsBetweenColumns=m),void 0!==S&&(this.distBetweenColumns=S),void 0!==y&&(this.floorHeight=y),void 0!==b&&(this.groundLevel=b),void 0!==w&&(this.facadePanelThickness=w),void 0!==E&&(this.windowWidthOffset=E),void 0!==x&&(this.windowHeightOffset=x),void 0!==T&&(this.windowFrameThickness=T),void 0!==P&&(this.windowGlassFrameThickness=P),void 0!==C&&(this.lod=C),void 0!==k&&(this.skinOpacity=k),void 0!==O&&(this.rotation=O),void 0!==A&&(this.origin=A)}}class ar{constructor(){this.type="parametric-model",this.name="zenHideout"}}class cr{}class hr{}class lr{constructor(){this.wallThickness=.4,this.facadePanelThickness=.05,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThckness=.05,this.height=3,this.lengthFirst=1,this.lengthSecond=2,this.rotation=0}}class dr{constructor(){this.thickness=.3,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThickness=.05,this.height=3,this.width=1,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0]}}class ur extends dr{}class pr extends lr{}class fr{constructor(){this.name="sandwitch-panel",this.createWindow=!0,this.createInnerPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelWidth=.4,this.exteriorPanelHeight=3,this.exteriorPanelThickness=.05,this.exteriorPanelBottomOffset=0,this.interiorPanelWidth=.4,this.interiorPanelHeight=3,this.interiorPanelThickness=.05,this.interiorPanelBottomOffset=0,this.windowWidthOffset=0,this.windowHeightOffset=0,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05}}class vr{constructor(){this.name="sandwitch-panel-flex",this.createInteriorPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelThickness=.05,this.interiorPanelThickness=.05,this.interiorPanelPolygonPoints=[],this.exteriorPanelPolygonPoints=[]}}class gr extends fr{}class mr extends vr{}class Sr{}class yr{}class br{}class wr{}class Er{}class xr{}class Tr{constructor(){this.invert=!1,this.widthFirstLanding=1,this.widthSecondLanding=1,this.lengthFirstWing=2,this.lengthSecondWing=1,this.maxWishedStepHeight=.25,this.stepHeightWidthProportion=1.35,this.totalHeight=1,this.rotation=0,this.origin=[0,0,0]}}class Pr extends Tr{}class Cr{}class kr{constructor(){this.name="roof-cover",this.roofAngle=15,this.roofLength=3,this.roofWidth=3,this.roofOutsideOverhang=.5,this.roofInsideOverhang=1,this.roofOverhangFacade=.1,this.roofThickness=.05,this.roofCoverHeight=.3,this.rotation=0,this.lod=ft.high,this.center=[0,0,0],this.direction=[0,1,0]}}class Or extends kr{}class Ar{}class Dr{}class _r{constructor(){this.widthFirstWing=1,this.widthSecondWing=2,this.lengthStairFirstWing=2,this.lengthStairSecondWing=1,this.lengthWallFirstWing=2,this.lengthWallSecondWing=1,this.facadePanelThickness=.05,this.wallThickness=3,this.wallHeightExterior=3,this.wallHeightInterior=3,this.windowFrameOffsetTop=.3,this.windowFrameThickness=.1,this.glassFrameThickness=.05,this.doorWidth=1,this.windowWidthOffset=.3,this.stairTotalHeight=1,this.createStair=!1,this.flipDirection=!1,this.rotation=0,this.origin=[0,0,0]}}class Fr{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.5,this.holeDiameter=1.5,this.holeDistToBottom=2.5,this.stickLength=1.2,this.stickDiameter=.5,this.baseAttachmentHeight=2,this.roofOverhang=1,this.rotation=0,this.chimneyHeight=1,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.holeDiameter=s),void 0!==n&&(this.holeDistToBottom=n),void 0!==o&&(this.stickLength=o),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.rotation=l),void 0!==d&&(this.chimneyHeight=d),void 0!==u&&(this.origin=u)}}class Rr{constructor(){this.type="parametric-model",this.name="wingtipVilla"}}class Mr{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.3,this.holeDiameter=1.2,this.holeDistToBottom=2.5,this.stickLength=.9,this.stickDiameter=.3,this.baseAttachmentHeight=2,this.roofOverhang=.5,this.roofAngle=20,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==r&&(this.interiorHeight=r),void 0!==i&&(this.thickness=i),void 0!==s&&(this.holeDiameter=s),void 0!==n&&(this.holeDistToBottom=n),void 0!==o&&(this.stickLength=o),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.roofAngle=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.origin=u)}}class Lr{constructor(){this.type="parametric-model",this.name="chirpyChalet"}}class Br{}class Ir{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f){this.sittingHeight=.45,this.backRestOffset=.1,this.backRestHeight=.7,this.width=.45,this.length=.45,this.thickness=.05,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.sittingHeight=e),void 0!==t&&(this.backRestOffset=t),void 0!==r&&(this.backRestHeight=r),void 0!==i&&(this.width=i),void 0!==s&&(this.length=s),void 0!==n&&(this.thickness=n),void 0!==o&&(this.nrOrnamentPlanks=o),void 0!==a&&(this.ornamentDepth=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.precision=h),void 0!==l&&(this.drawEdges=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.scale=u),void 0!==p&&(this.origin=p),void 0!==f&&(this.direction=f)}}class Ur{constructor(){this.type="parametric-model",this.name="snakeChair"}}class Wr extends wt{}class Nr{}class Gr extends wt{}class Hr{}class Vr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class zr{}class jr{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v){this.height=.74,this.width=1,this.length=2,this.topThickness=.02,this.topOffset=.03,this.bottomThickness=.05,this.minFillet=.2,this.radiusLegTop=.03,this.radiusLegBottom=.01,this.nrLegPairs=2,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.topThickness=i),void 0!==s&&(this.topOffset=s),void 0!==n&&(this.bottomThickness=n),void 0!==o&&(this.minFillet=o),void 0!==a&&(this.radiusLegTop=a),void 0!==c&&(this.radiusLegBottom=c),void 0!==h&&(this.nrLegPairs=h),void 0!==l&&(this.precision=l),void 0!==d&&(this.drawEdges=d),void 0!==u&&(this.rotation=u),void 0!==p&&(this.scale=p),void 0!==f&&(this.origin=f),void 0!==v&&(this.direction=v)}}class qr{constructor(){this.type="parametric-model",this.name="elegantTable"}}class Yr extends wt{}class Xr{}class $r extends wt{}class Zr extends wt{}class Qr{constructor(){this.index=0}}class Jr{}class Kr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class ei{}class ti{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g,m){this.height=.4,this.width=1,this.length=1.2,this.chamfer=.01,this.topThickness=.05,this.topGlassOffset=.2,this.glassThickness=.005,this.glassHolderLength=.02,this.shelfTopOffset=.15,this.shelfThickness=.03,this.legWidth=.1,this.legDepth=.05,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.chamfer=i),void 0!==s&&(this.topThickness=s),void 0!==n&&(this.topGlassOffset=n),void 0!==o&&(this.glassThickness=o),void 0!==a&&(this.glassHolderLength=a),void 0!==c&&(this.shelfTopOffset=c),void 0!==h&&(this.shelfThickness=h),void 0!==l&&(this.legWidth=l),void 0!==d&&(this.legDepth=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class ri{constructor(){this.type="parametric-model",this.name="goodCoffeeTable"}}class ii extends wt{}class si{}class ni extends wt{}class oi extends wt{}class ai extends wt{}class ci{constructor(){this.index=0}}class hi{}class li{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class di{}class ui{constructor(e,t,r,i,s,n,o,a,c,h,l,d,u,p,f,v,g){this.height=.74,this.width=1,this.length=2,this.supportLength=.5,this.shelfHeight=.2,this.thickness=.05,this.glassThickness=.005,this.glassOffset=0,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==r&&(this.length=r),void 0!==i&&(this.supportLength=i),void 0!==s&&(this.shelfHeight=s),void 0!==n&&(this.thickness=n),void 0!==o&&(this.glassThickness=o),void 0!==a&&(this.glassOffset=a),void 0!==c&&(this.nrOrnamentPlanks=c),void 0!==h&&(this.ornamentDepth=h),void 0!==l&&(this.filletRadius=l),void 0!==d&&(this.precision=d),void 0!==u&&(this.drawEdges=u),void 0!==p&&(this.rotation=p),void 0!==f&&(this.scale=f),void 0!==v&&(this.origin=v),void 0!==g&&(this.direction=g)}}class pi{constructor(){this.type="parametric-model",this.name="snakeTable"}}class fi extends wt{}class vi{}class gi extends wt{}class mi{}class Si{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}!function(e){e.Aboreto="Aboreto",e.Bungee="Bungee",e.IndieFlower="IndieFlower",e.Lugrasimo="Lugrasimo",e.Orbitron="Orbitron",e.Roboto="Roboto",e.RobotoSlab="RobotoSlab",e.Silkscreen="Silkscreen",e.Tektur="Tektur",e.Workbench="Workbench"}(vt||(vt={})),function(e){e.Regular="Regular",e.Black="Black",e.Bold="Bold",e.ExtraBold="ExtraBold",e.Medium="Medium",e.SemiBold="SemiBold",e.BlackItalic="BlackItalic",e.BoldItalic="BoldItalic",e.Italic="Italic",e.Light="Light",e.LightItalic="LightItalic",e.MediumItalic="MediumItalic",e.Thin="Thin",e.ThinItalic="ThinItalic",e.ExtraLight="ExtraLight"}(gt||(gt={})),function(e){e.separatedExtrusion="separatedExtrusion",e.integratedExtrusion="integratedExtrusion",e.cutout="cutout"}(mt||(mt={})),function(e){e.compound="compound",e.cutout="originalCutout",e.cutoutInsideCharacter="cutoutInsideCharacter"}(St||(St={})),function(e){e.leftTop="leftTop",e.leftMiddle="leftMiddle",e.leftBottom="leftBottom",e.centerTop="centerTop",e.centerMiddle="centerMiddle",e.centerBottom="centerBottom",e.rightTop="rightTop",e.rightMiddle="rightMiddle",e.rightBottom="rightBottom"}(yt||(yt={}));const yi=[{key:"Aboreto",variants:["Regular"]},{key:"Bungee",variants:["Regular"]},{key:"IndieFlower",variants:["Regular"]},{key:"Lugrasimo",variants:["Regular"]},{key:"Orbitron",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Roboto",variants:["Black","BlackItalic","Bold","BoldItalic","Italic","Light","LightItalic","Medium","MediumItalic","Regular","Thin","ThinItalic"]},{key:"RobotoSlab",variants:["Black","Bold","ExtraBold","ExtraLight","Light","Medium","Regular","SemiBold","Thin"]},{key:"Silkscreen",variants:["Bold","Regular"]},{key:"Tektur",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Workbench",variants:["Regular"]}];class bi{constructor(e,t,r,i,s,n,o,a,c){this.text="bitbybit.dev",this.fontType=vt.Roboto,this.fontVariant=gt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=yt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontType=t),void 0!==r&&(this.fontVariant=r),void 0!==i&&(this.fontSize=i),void 0!==s&&(this.height=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.origin=o),void 0!==a&&(this.direction=a),void 0!==c&&(this.originAlignment=c)}}class wi{constructor(e,t,r,i,s,n,o,a,c,h,l,d){this.facePlanar=!1,this.faceTextVar=mt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=vt.Roboto,this.fontVariant=gt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=yt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.faceTextVar=r),void 0!==i&&(this.text=i),void 0!==s&&(this.fontType=s),void 0!==n&&(this.fontVariant=n),void 0!==o&&(this.fontSize=o),void 0!==a&&(this.height=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.originParamU=h),void 0!==l&&(this.originParamV=l),void 0!==d&&(this.originAlignment=d)}}class Ei{constructor(){this.type="parametric-model",this.name="text3d"}}class xi{constructor(){this.index=0}}class Ti{}class Pi{}class Ci{constructor(e,t,r,i,s,n,o,a,c,h){this.faceTextVar=mt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=vt.Roboto,this.fontVariant=gt.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=yt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==r&&(this.fontType=r),void 0!==i&&(this.fontVariant=i),void 0!==s&&(this.fontSize=s),void 0!==n&&(this.height=n),void 0!==o&&(this.rotation=o),void 0!==a&&(this.originParamU=a),void 0!==c&&(this.originParamV=c),void 0!==h&&(this.originAlignment=h)}}class ki{constructor(e,t,r){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==r&&(this.definitions=r)}}class Oi{constructor(e,t,r,i){this.uNumber=10,this.vNumber=10,this.height=.2,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==i&&(this.height=i)}}class Ai{constructor(e,t,r,i,s,n,o){this.uNumber=10,this.vNumber=5,this.defaultHeight=.2,this.affectMinHeight=0,this.affectMaxHeight=1,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==t&&(this.affectorPoints=t),void 0!==r&&(this.uNumber=r),void 0!==i&&(this.vNumber=i),void 0!==s&&(this.affectMinHeight=s),void 0!==n&&(this.affectMaxHeight=n),void 0!==o&&(this.precision=o)}}class Di{constructor(){this.type="parametric-model",this.name="patternsFacePatternPyramidSimple"}}class _i{constructor(){this.index=0}}class Fi{}class Ri{}class Mi{}class Li{}class Bi{constructor(){this.faceIndex=0}}class Ii{constructor(){this.faceIndex=0,this.uIndex=0,this.vIndex=0}}class Ui{constructor(){this.faceIndex=0,this.uIndex=0}}class Wi{constructor(){this.faceIndex=0,this.vIndex=0}}class Ni{}class Gi{}var Hi,Vi,zi;!function(e){e.wire="wire",e.face="face",e.solid="solid"}(Hi||(Hi={}));class ji{constructor(e,t,r,i){this.occtService=e,this.dependencies=r,this.occtAdv=t,this.base=i}wingtipVilla(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","chimneyHeight","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.chimneyHeight<=0?t=`chimney height can't be ${e.chimneyHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const r=e.baseAttachmentHeight,i=e.roofOverhang,s=e.chimneyHeight,n=(e.interiorWidth+2*e.thickness)/2,o=pt.computeSideA(45,n),a=function(e,t){const r=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(r)}(o,n),c=e.thickness,h=[],l=t.shapes.wire.createPolygonWire({points:[[-n,-r-c,0],[n,-r-c,0],[n,e.interiorHeight,0],[0,e.interiorHeight+o,0],[-n,e.interiorHeight,0]].reverse()});h.push(l);const d=e.interiorLength+e.thickness,u=t.shapes.wire.createPolygonWire({points:[[-n,-c,d],[n,-c,d],[n,e.interiorHeight,d],[0,e.interiorHeight+o,d],[-n,e.interiorHeight,d]].reverse()});h.push(u);const p=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,d]});h.push(p);const f=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,d+c]});h.push(f);const v=t.shapes.face.createFaceFromWire({shape:f,planar:!0});h.push(v);const g=t.operations.extrude({shape:v,direction:[0,0,e.stickLength]}),m=t.shapes.solid.createBoxFromCorner({corner:[-n+c,-c,c],width:e.interiorWidth,length:e.interiorLength,height:c}),S=t.shapes.solid.createBoxFromCorner({corner:[-n,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),y=t.shapes.solid.createBoxFromCorner({corner:[n-c,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),b=t.shapes.solid.createBoxFromCorner({corner:[0,0,0],width:a+i,length:e.interiorLength+2*c+i,height:c}),w=t.shapes.solid.createBoxFromCorner({corner:[0,-c,0],width:a+i+c,length:e.interiorLength+2*c+i,height:c}),E=t.transforms.rotate({shape:b,angle:-45,axis:[0,0,1]});h.push(E);const x=t.transforms.translate({shape:E,translation:[0,e.interiorHeight+o,0]}),T=t.shapes.edge.getCornerPointsOfEdgesForShape({shape:x}),P=t.transforms.rotate({shape:w,angle:225,axis:[0,0,1]});h.push(P);const C=t.transforms.translate({shape:P,translation:T[3]}),k=t.shapes.face.createFaceFromWire({shape:l,planar:!0});h.push(k);const O=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),A=t.shapes.face.createFaceFromWire({shape:u,planar:!0});h.push(A);const D=t.operations.splitShapeWithShapes({shape:A,shapes:[p],nonDestructive:!0,localFuzzyTolerance:1e-4});h.push(...D),console.log(D);const _=t.shapes.face.getFace({shape:D[1],index:0});h.push(_);const F=t.operations.makeThickSolidSimple({shape:_,offset:-e.thickness}),R=function(e,t,r){const i=e.shapes.face.getFaces({shape:t})[3],s=e.shapes.face.getFaceCenterOfMass({shape:i}),n=e.transforms.scale3d({shape:i,scale:[.3,.3,.3],center:s}),o=e.shapes.edge.getCornerPointsOfEdgesForShape({shape:n}),a=o[0],c=o[1],h=o[2],l=o[3],d=Math.max(a[1],c[1],h[1],l[1]),u=[a[0],d+r,a[2]],p=[c[0],d+r,c[2]],f=[h[0],d+r,h[2]],v=[l[0],d+r,l[2]],g=e.shapes.wire.createPolygonWire({points:[a,c,h,l]}),m=e.shapes.wire.createPolygonWire({points:[u,p,f,v]}),S=e.operations.loft({shapes:[g,m],makeSolid:!0});return i.delete(),n.delete(),g.delete(),m.delete(),S}(t,x,s),M=[m,O,F,S,y,x,C,g,t.shapes.compound.makeCompound({shapes:[x,C]}),t.shapes.compound.makeCompound({shapes:[O,F,S,y]}),R],L=M.map(((r,i)=>{const s=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),B=t.shapes.compound.makeCompound({shapes:L});return M.forEach((e=>e.delete())),h.forEach((e=>e.delete())),{compound:B,shapes:L.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"wingtipVilla",roof:{compound:"8",shapes:["5","6"]},walls:{compound:"9",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"7"},chimney:{shape:"10"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}chirpyChalet(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","roofAngle","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const r=e.baseAttachmentHeight,i=e.roofOverhang,s=e.roofAngle,n=e.interiorWidth/2,o=e.interiorLength+2*e.thickness,a=pt.computeSideA(s,o),c=pt.computeSideA(s,o-e.thickness),h=function(e,t){const r=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(r)}(a,o),l=e.thickness,d=[],u=t.shapes.wire.createPolygonWire({points:[[-n,-r-l,0],[n,-r-l,0],[n,e.interiorHeight+c,0],[-n,e.interiorHeight+c,0]].reverse()});d.push(u);const p=e.interiorLength+e.thickness,f=t.shapes.wire.createPolygonWire({points:[[-n,-l,p],[n,-l,p],[n,e.interiorHeight,p],[-n,e.interiorHeight,p]].reverse()});d.push(f);const v=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,p]});d.push(v);const g=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,p+l]});d.push(g);const m=t.shapes.face.createFaceFromWire({shape:g,planar:!0});d.push(m);const S=t.operations.extrude({shape:m,direction:[0,0,e.stickLength]}),y=t.shapes.solid.createBoxFromCorner({corner:[-n,-l,l],width:e.interiorWidth,length:e.interiorLength,height:l}),b=t.shapes.wire.createPolygonWire({points:[[-n,-l,0],[-n,-l,p+l],[-n,e.interiorHeight,p+l],[-n,e.interiorHeight+a,0]].reverse()}),w=t.shapes.face.createFaceFromWire({shape:b,planar:!0}),E=t.operations.extrude({shape:w,direction:[-l,0,0]}),x=t.transforms.translate({shape:E,translation:[e.interiorWidth+l,0,0]}),T=t.shapes.solid.createBoxFromCorner({corner:[-n-l-i,0,0],width:e.interiorWidth+2*l+2*i,length:h+i,height:l}),P=t.transforms.rotate({shape:T,angle:s,axis:[1,0,0]});d.push(P);const C=t.transforms.translate({shape:P,translation:[0,e.interiorHeight+a,0]}),k=t.shapes.face.createFaceFromWire({shape:u,planar:!0});d.push(k);const O=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),A=t.shapes.face.createFaceFromWire({shape:f,planar:!0});d.push(A);const D=t.operations.splitShapeWithShapes({shape:A,shapes:[v],nonDestructive:!0,localFuzzyTolerance:1e-4});d.push(...D);const _=t.shapes.face.getFace({shape:D[1],index:0});d.push(_);const F=t.operations.makeThickSolidSimple({shape:_,offset:-e.thickness}),R=[y,O,F,E,x,C,S,t.shapes.compound.makeCompound({shapes:[C]}),t.shapes.compound.makeCompound({shapes:[O,F,E,x]})],M=R.map(((r,i)=>{const s=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),L=t.shapes.compound.makeCompound({shapes:M});return R.forEach((e=>e.delete())),d.forEach((e=>e.delete())),{compound:L,shapes:M.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"chirpyChalet",roof:{compound:"7",shapes:["5","6"]},walls:{compound:"8",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"6"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}serenitySwirl(t){return function(t,r,i){if(function(e){let t;if(["swirl","nrOfDivisions","addRadiusNarrow","addRadiusWide","addMiddleHeight","addTopHeight","thickness","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.swirl<0?t="swirl value should be between 0 and 1":e.nrOfDivisions<=0?t=`nrOfDivisions can't be ${e.nrOfDivisions}, which is lower or equal to 0`:e.addRadiusNarrow<0?t=`addRadiusNarrow can't be ${e.addRadiusNarrow}, which is lower then 0`:e.addRadiusWide<0?t=`addRadiusWide can't be ${e.addRadiusWide}, which is lower then 0`:e.addMiddleHeight<=0?t=`addMiddleHeight can't be ${e.addMiddleHeight}, which is lower or equal to 0`:e.addTopHeight<=0?t=`addTopHeight can't be ${e.addTopHeight}, which is lower or equal to 0`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!i.serenitySwirl)throw new Error("Could not compute, to use Serenity Swirl algorithm you must be subscribed.");try{const s=`\n            ${i.serenitySwirl}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}arabicArchway(t){return function(t,r,i){if(function(e){let t;if(["nrOfSides","thickness","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),e.nrOfSides<0?t="swirl value should be between 0 and 1":e.nrOfSides<3?t=`nrOfSides can't be ${e.nrOfSides}, which is lower to 3`:e.nrOfSides>30?t=`nrOfSides can't be ${e.nrOfSides}, which is higher then 30`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!i.arabicArchway)throw new Error("Could not compute, to use Arabic Archway algorithm you must be subscribed.");try{const s=`\n            ${i.arabicArchway}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}eternalLove(t){return function(t,r,i,s){if(!s.eternalLove)throw new Error("Could not compute, to use Eternal Love algorithm you must be subscribed to our silver plan.");try{const n=`\n            ${s.eternalLove}\n        `;return new Function(n).apply({inputs:t,occt:r,occtAdv:i,Inputs:e,Text3D:L})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}calmCup(t){return function(t,r,i,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","fillet","nrOfHandles","handleDist","precision","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<6*e.thickness?t="Height must be at least 6 times greater than thickness.":e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.fillet<0||e.fillet>e.thickness/2?t="Fillet must be greater than 0 and less than half of the thickness.":e.handleDist<=2*e.thickness?t="Handle distance from cup must be greater than 2 times the thickness.":e.nrOfHandles<0||e.nrOfHandles>2?t="Nr of handles must be between 0 and 2.":e.radiusTopOffset>.75*e.radiusBottom&&(t="Top offset radius must be less than 0.75 times the bottom radius."),t)throw new Error(t)}(t),!s.calmCup)throw new Error("Could not compute, to use Calm Cup algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.calmCup}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}spicyBox(t){return function(t,r,i,s){if(!s.spicyBox)throw new Error("Could not compute, to use Spicy Box algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.spicyBox}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dragonCup(t){return function(t,r,i,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","nrSkinCellsHorizontal","nrSkinCellsVertical","precision","rotation"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.nrSkinCellsHorizontal<=2?t="Nr of horizontal skin cells must be larger than 2.":e.nrSkinCellsVertical<1&&(t="Nr of horizontal skin cells must be larger than 0."),t)throw new Error(t)}(t),!s.dragonCup)throw new Error("Could not compute, to use Dragon Cup algorithm you must be subscribed to our silver plan.");try{const n=`\n            ${s.dragonCup}\n        `;return new Function(n).apply({inputs:t,occt:r,occtAdv:i,Inputs:e,Advanced:re})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}zenHideout(t){return function(t,r,i){if(function(e){let t;if([].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number`)})),t)throw new Error(t)}(t),!i.zenHideout)throw new Error("Could not compute, to use Zen Hideout algorithm you must be subscribed.");try{const s=`\n            ${i.zenHideout}\n        `;return new Function(s).apply({inputs:t,occt:r,Inputs:e,Things:M,MathHelper:pt,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}elegantTable(t){return function(t,r,i,s){if(!s.elegantTable)throw new Error("Could not compute, to use Elegant Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.elegantTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}goodCoffeeTable(t){return function(t,r,i,s){if(function(e){let t;if(["height","width","length","topThickness","topGlassOffset","glassThickness","glassHolderLength","chamfer","legWidth","legDepth","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<=e.topThickness?t="Height must be greated then top thickness.":e.width<=0?t="Width must be greater than 0.":e.width<=2*(e.topGlassOffset+e.glassHolderLength)?t="Width must be greater than two top glass offsets and glass holder lengths.":e.length<=0?t="Length must be greater than 0.":e.length<=2*(e.topGlassOffset+e.glassHolderLength)?t="Length must be greater than two top glass offsets and glass holder lengths.":e.topThickness<=2*e.glassThickness?t="Table top thickness must be greater 2 x glass thickness.":e.glassThickness<=0?t="Glass thickness must be greater than 0":e.glassHolderLength<e.glassThickness?t="Glass holder length must be at least as long as glass thickness.":e.shelfTopOffset>e.height-e.topThickness-e.shelfThickness?t=`Shelf top offset is larger than ${e.height-e.topThickness-e.shelfThickness}, which make it go underground.`:e.chamfer>=e.topThickness/2?t="Chamfer distance must be lower or equal than half of the top thickness.":e.chamfer>=e.shelfThickness/2?t="Chamfer distance must be lower or equal than half of the shelf thickness.":e.chamfer>=e.topGlassOffset/2?t="Chamfer distance must be lower or equal than half of the top glass offset.":e.chamfer>=e.legWidth/2?t="Chamfer distance must be lower or equal than half of the leg width.":e.chamfer>=e.legDepth/2?t="Chamfer distance must be lower or equal than half of the leg depth.":e.width<=2*e.legWidth?t="Width of the table must be greater or equal to the width of the two legs.":e.length<=2*e.legDepth?t="Length of the table must be greater or equal to the length of the two legs.":e.legDepth>=e.topGlassOffset+e.glassHolderLength?t="The depth of the leg must be lower or equal to the sum of glass offset and glass holder length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.goodCoffeeTable)throw new Error("Could not compute, to use Good Coffee Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.goodCoffeeTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeChair(t){return function(t,r,i,s){if(function(e){let t;if(["sittingHeight","backRestOffset","backRestHeight","width","length","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.sittingHeight<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.backRestOffset<0?t="Back rest offset can't be negative.":e.backRestHeight<=0?t="Back rest height must be greater than 0":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.sittingHeight/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.filletRadius>=e.backRestHeight/2?t="Fillet radius must be lower than half of the back height.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeChair)throw new Error("Could not compute, to use Snake Chair algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.snakeChair}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeTable(t){return function(t,r,i,s){if(function(e){let t;if(["height","width","length","shelfHeight","supportLength","glassThickness","glassOffset","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.height<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.height/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeTable)throw new Error("Could not compute, to use Snake Table algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.snakeTable}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}phoneNest(t){return function(t,r,i,s){if(!s.phoneNest)throw new Error("Could not compute, to use Phone Nest algorithm you must be subscribed to our silver plan.");try{const i=`\n            ${s.phoneNest}\n        `;return new Function(i).apply({inputs:t,occt:r,Inputs:e,Things:M,ShapeParser:nt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dropletsPhoneHolder(t){return function(t,r,i,s,n){if(!n.dropletsPhoneHolder)throw new Error("Could not compute, to use Droplets Phone Holder algorithm you must be subscribed.");try{const o=`\n            ${n.dropletsPhoneHolder}\n        `;return new Function(o).apply({inputs:t,occt:r,occtAdv:i,base:s,Inputs:e,Things:M,ShapeParser:nt,Text3D:L})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.base,this.dependencies)}}function qi(e,t,r,i){const s=r.find((t=>t.name===`${e.fontType}-${e.fontVariant}`));if(!s)throw new Error(`Font ${e.fontType}-${e.fontVariant}.ttf does not exist. Current font probably does not have corresponding variant.`);const n=s.font.getPath(e.text,0,0,e.fontSize),o=[];let a=s.font.getPaths(e.text,0,0,e.fontSize,{});const c=s.font.getAdvanceWidth(e.text,e.fontSize),h=n.getBoundingBox();switch(e.originAlignment){case yt.leftBottom:break;case yt.leftMiddle:a=s.font.getPaths(e.text,0,(h.y2-h.y1)/2,e.fontSize,{});break;case yt.leftTop:a=s.font.getPaths(e.text,0,h.y2-h.y1,e.fontSize,{});break;case yt.centerBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,0,e.fontSize,{});break;case yt.centerMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,(h.y2-h.y1)/2,e.fontSize,{});break;case yt.centerTop:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,h.y2-h.y1,e.fontSize,{});break;case yt.rightBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1),0,e.fontSize,{});break;case yt.rightMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1),(h.y2-h.y1)/2,e.fontSize,{});break;case yt.rightTop:a=s.font.getPaths(e.text,-(h.x2-h.x1),h.y2-h.y1,e.fontSize,{})}a.forEach((e=>{const r=e.commands,s=[];let n,a,c;for(let e=0;e<r.length;e++){const o=r[e];if("M"===o.type)n=[-o.x,0,o.y],a=n,c=new i.BRepBuilderAPI_MakeWire_1;else if("Z"===o.type)try{let e=null;e=s.length>0?new i.BRepBuilderAPI_MakeFace_22(s[s.length-1],c.Wire()):new i.BRepBuilderAPI_MakeFace_15(c.Wire(),!0),s.push(e.Face()),e.delete(),c.delete()}catch(e){console.error("We could not create faces from this font probably due to self intersections! You should try removing weird characters and pick a more reliable font like 'Roboto'.")}else if("L"===o.type){const e=[-o.x,0,o.y];if(a[0]===e[0]&&a[2]===e[2])continue;const r=t.shapes.edge.line({start:a,end:e});c.Add_1(r),r.delete(),a=e}else if("Q"===o.type){const e=[-o.x1,0,o.y1],r=[-o.x,0,o.y],i=[a,e,r],s=t.shapes.wire.createBezier({points:i,closed:!1});c.Add_2(s),s.delete(),a=r}else if("C"===o.type){const e=[-o.x,0,o.y],r=[a,[-o.x1,0,o.y1],[-o.x2,0,o.y2],e],i=t.shapes.wire.createBezier({points:r,closed:!1});c.Add_2(i),i.delete(),a=e}}if(void 0!==s[s.length-1]){const e=s[s.length-1],r=new G.BasicShapeRepairDto;r.shape=e,r.minTolerance=1e-8,r.maxTolerance=1e-4,r.precision=.001;const i=t.shapeFix.basicShapeRepair(r);e.delete(),o.push(i)}}));const l=new Ei;if(l.advanceWidth=c,l.boundingBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},e.height>0){const r=o.map((r=>t.operations.extrude({shape:r,direction:[0,e.height,0]})));o.forEach((e=>e.delete()));const i=r.map((r=>{const i=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=t.transforms.alignAndTranslate({shape:i,center:e.origin,direction:e.direction});return i.delete(),s}));i.reverse();const s=t.shapes.solid.getSolidsCentersOfMass({shapes:i});l.characterCenterCoordinates=s;const n=t.shapes.compound.makeCompound({shapes:i});return l.characterParts=i.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),Yi(l,n)}{const r=o.map((r=>{const i=t.transforms.rotate({shape:r,angle:e.rotation,axis:[0,1,0]}),s=t.transforms.alignAndTranslate({shape:i,center:e.origin,direction:e.direction});return i.delete(),s}));r.reverse(),o.forEach((e=>e.delete()));const i=t.shapes.face.getFacesCentersOfMass({shapes:r});l.characterCenterCoordinates=i;const s=t.shapes.compound.makeCompound({shapes:r});return l.characterParts=r.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),Yi(l,s)}}function Yi(e,t){if(e){const r=[],i=nt.parse(e,r,"text-3d");return{compound:t,shapes:[{id:"1",shape:t},...r],data:Object.assign({compound:"1"},i)}}}String.prototype.codePointAt||(zi=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=r)){var s,n=t.charCodeAt(i);return n>=55296&&n<=56319&&r>i+1&&(s=t.charCodeAt(i+1))>=56320&&s<=57343?1024*(n-55296)+s-56320+65536:n}},(Vi=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}())?Vi(String.prototype,"codePointAt",{value:zi,configurable:!0,writable:!0}):String.prototype.codePointAt=zi);function Xi(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function $i(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Xi,this.dtree=new Xi}var Zi=new Xi,Qi=new Xi,Ji=new Uint8Array(30),Ki=new Uint16Array(30),es=new Uint8Array(30),ts=new Uint16Array(30),rs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),is=new Xi,ss=new Uint8Array(320);function ns(e,t,r,i){var s,n;for(s=0;s<r;++s)e[s]=0;for(s=0;s<30-r;++s)e[s+r]=s/r|0;for(n=i,s=0;s<30;++s)t[s]=n,n+=1<<e[s]}var os=new Uint16Array(16);function as(e,t,r,i){var s,n;for(s=0;s<16;++s)e.table[s]=0;for(s=0;s<i;++s)e.table[t[r+s]]++;for(e.table[0]=0,n=0,s=0;s<16;++s)os[s]=n,n+=e.table[s];for(s=0;s<i;++s)t[r+s]&&(e.trans[os[t[r+s]]++]=s)}function cs(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function hs(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+r}function ls(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,i=0,s=0,n=e.tag;do{i=2*i+(1&n),n>>>=1,++s,r+=t.table[s],i-=t.table[s]}while(i>=0);return e.tag=n,e.bitcount-=s,t.trans[r+i]}function ds(e,t,r){var i,s,n,o,a,c;for(i=hs(e,5,257),s=hs(e,5,1),n=hs(e,4,4),o=0;o<19;++o)ss[o]=0;for(o=0;o<n;++o){var h=hs(e,3,0);ss[rs[o]]=h}for(as(is,ss,0,19),a=0;a<i+s;){var l=ls(e,is);switch(l){case 16:var d=ss[a-1];for(c=hs(e,2,3);c;--c)ss[a++]=d;break;case 17:for(c=hs(e,3,3);c;--c)ss[a++]=0;break;case 18:for(c=hs(e,7,11);c;--c)ss[a++]=0;break;default:ss[a++]=l}}as(t,ss,0,i),as(r,ss,i,s)}function us(e,t,r){for(;;){var i,s,n,o,a=ls(e,t);if(256===a)return 0;if(a<256)e.dest[e.destLen++]=a;else for(i=hs(e,Ji[a-=257],Ki[a]),s=ls(e,r),o=n=e.destLen-hs(e,es[s],ts[s]);o<n+i;++o)e.dest[e.destLen++]=e.dest[o]}}function ps(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(Zi,Qi),ns(Ji,Ki,4,3),ns(es,ts,2,1),Ji[28]=0,Ki[28]=258;var fs=function(e,t){var r,i,s=new $i(e,t);do{switch(r=cs(s),hs(s,2,0)){case 0:i=ps(s);break;case 1:i=us(s,Zi,Qi);break;case 2:ds(s,s.ltree,s.dtree),i=us(s,s.ltree,s.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!r);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest};function vs(e,t,r,i,s){return Math.pow(1-s,3)*e+3*Math.pow(1-s,2)*s*t+3*(1-s)*Math.pow(s,2)*r+Math.pow(s,3)*i}function gs(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ms(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Ss(e){throw new Error(e)}function ys(e,t){e||Ss(t)}gs.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},gs.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},gs.prototype.addX=function(e){this.addPoint(e,null)},gs.prototype.addY=function(e){this.addPoint(null,e)},gs.prototype.addBezier=function(e,t,r,i,s,n,o,a){var c=[e,t],h=[r,i],l=[s,n],d=[o,a];this.addPoint(e,t),this.addPoint(o,a);for(var u=0;u<=1;u++){var p=6*c[u]-12*h[u]+6*l[u],f=-3*c[u]+9*h[u]-9*l[u]+3*d[u],v=3*h[u]-3*c[u];if(0!==f){var g=Math.pow(p,2)-4*v*f;if(!(g<0)){var m=(-p+Math.sqrt(g))/(2*f);0<m&&m<1&&(0===u&&this.addX(vs(c[u],h[u],l[u],d[u],m)),1===u&&this.addY(vs(c[u],h[u],l[u],d[u],m)));var S=(-p-Math.sqrt(g))/(2*f);0<S&&S<1&&(0===u&&this.addX(vs(c[u],h[u],l[u],d[u],S)),1===u&&this.addY(vs(c[u],h[u],l[u],d[u],S)))}}else{if(0===p)continue;var y=-v/p;0<y&&y<1&&(0===u&&this.addX(vs(c[u],h[u],l[u],d[u],y)),1===u&&this.addY(vs(c[u],h[u],l[u],d[u],y)))}}},gs.prototype.addQuad=function(e,t,r,i,s,n){var o=e+2/3*(r-e),a=t+2/3*(i-t),c=o+1/3*(s-e),h=a+1/3*(n-t);this.addBezier(e,t,o,a,c,h,s,n)},ms.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},ms.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},ms.prototype.curveTo=ms.prototype.bezierCurveTo=function(e,t,r,i,s,n){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:i,x:s,y:n})},ms.prototype.quadTo=ms.prototype.quadraticCurveTo=function(e,t,r,i){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:i})},ms.prototype.close=ms.prototype.closePath=function(){this.commands.push({type:"Z"})},ms.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof gs){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},ms.prototype.getBoundingBox=function(){for(var e=new gs,t=0,r=0,i=0,s=0,n=0;n<this.commands.length;n++){var o=this.commands[n];switch(o.type){case"M":e.addPoint(o.x,o.y),t=i=o.x,r=s=o.y;break;case"L":e.addPoint(o.x,o.y),i=o.x,s=o.y;break;case"Q":e.addQuad(i,s,o.x1,o.y1,o.x,o.y),i=o.x,s=o.y;break;case"C":e.addBezier(i,s,o.x1,o.y1,o.x2,o.y2,o.x,o.y),i=o.x,s=o.y;break;case"Z":i=t,s=r;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},ms.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},ms.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e=arguments,r="",i=0;i<arguments.length;i+=1){var s=e[i];s>=0&&i>0&&(r+=" "),r+=t(s)}return r}e=void 0!==e?e:2;for(var i="",s=0;s<this.commands.length;s+=1){var n=this.commands[s];"M"===n.type?i+="M"+r(n.x,n.y):"L"===n.type?i+="L"+r(n.x,n.y):"C"===n.type?i+="C"+r(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?i+="Q"+r(n.x1,n.y1,n.x,n.y):"Z"===n.type&&(i+="Z")}return i},ms.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},ms.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var bs={fail:Ss,argument:ys,assert:ys},ws=2147483648,Es={},xs={},Ts={};function Ps(e){return function(){return e}}xs.BYTE=function(e){return bs.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},Ts.BYTE=Ps(1),xs.CHAR=function(e){return[e.charCodeAt(0)]},Ts.CHAR=Ps(1),xs.CHARARRAY=function(e){void 0===e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},Ts.CHARARRAY=function(e){return void 0===e?0:e.length},xs.USHORT=function(e){return[e>>8&255,255&e]},Ts.USHORT=Ps(2),xs.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},Ts.SHORT=Ps(2),xs.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},Ts.UINT24=Ps(3),xs.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},Ts.ULONG=Ps(4),xs.LONG=function(e){return e>=ws&&(e=-(2*ws-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},Ts.LONG=Ps(4),xs.FIXED=xs.ULONG,Ts.FIXED=Ts.ULONG,xs.FWORD=xs.SHORT,Ts.FWORD=Ts.SHORT,xs.UFWORD=xs.USHORT,Ts.UFWORD=Ts.USHORT,xs.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},Ts.LONGDATETIME=Ps(8),xs.TAG=function(e){return bs.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},Ts.TAG=Ps(4),xs.Card8=xs.BYTE,Ts.Card8=Ts.BYTE,xs.Card16=xs.USHORT,Ts.Card16=Ts.USHORT,xs.OffSize=xs.BYTE,Ts.OffSize=Ts.BYTE,xs.SID=xs.USHORT,Ts.SID=Ts.USHORT,xs.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?xs.NUMBER16(e):xs.NUMBER32(e)},Ts.NUMBER=function(e){return xs.NUMBER(e).length},xs.NUMBER16=function(e){return[28,e>>8&255,255&e]},Ts.NUMBER16=Ps(3),xs.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},Ts.NUMBER32=Ps(5),xs.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var i=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*i)/i).toString()}for(var s="",n=0,o=t.length;n<o;n+=1){var a=t[n];s+="e"===a?"-"===t[++n]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var c=[30],h=0,l=(s+=1&s.length?"f":"ff").length;h<l;h+=2)c.push(parseInt(s.substr(h,2),16));return c},Ts.REAL=function(e){return xs.REAL(e).length},xs.NAME=xs.CHARARRAY,Ts.NAME=Ts.CHARARRAY,xs.STRING=xs.CHARARRAY,Ts.STRING=Ts.CHARARRAY,Es.UTF8=function(e,t,r){for(var i=[],s=r,n=0;n<s;n++,t+=1)i[n]=e.getUint8(t);return String.fromCharCode.apply(null,i)},Es.UTF16=function(e,t,r){for(var i=[],s=r/2,n=0;n<s;n++,t+=2)i[n]=e.getUint16(t);return String.fromCharCode.apply(null,i)},xs.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var i=e.charCodeAt(r);t[t.length]=i>>8&255,t[t.length]=255&i}return t},Ts.UTF16=function(e){return 2*e.length};var Cs={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};Es.MACSTRING=function(e,t,r,i){var s=Cs[i];if(void 0!==s){for(var n="",o=0;o<r;o++){var a=e.getUint8(t+o);n+=a<=127?String.fromCharCode(a):s[127&a]}return n}};var ks,Os="function"==typeof WeakMap&&new WeakMap;function As(e){return e>=-128&&e<=127}function Ds(e,t,r){for(var i=0,s=e.length;t<s&&i<64&&0===e[t];)++t,++i;return r.push(128|i-1),t}function _s(e,t,r){for(var i=0,s=e.length,n=t;n<s&&i<64;){var o=e[n];if(!As(o))break;if(0===o&&n+1<s&&0===e[n+1])break;++n,++i}r.push(i-1);for(var a=t;a<n;++a)r.push(e[a]+256&255);return n}function Fs(e,t,r){for(var i=0,s=e.length,n=t;n<s&&i<64;){var o=e[n];if(0===o)break;if(As(o)&&n+1<s&&As(e[n+1]))break;++n,++i}r.push(64|i-1);for(var a=t;a<n;++a){var c=e[a];r.push(c+65536>>8&255,c+256&255)}return n}xs.MACSTRING=function(e,t){var r=function(e){if(!ks)for(var t in ks={},Cs)ks[t]=new String(t);var r=ks[e];if(void 0!==r){if(Os){var i=Os.get(r);if(void 0!==i)return i}var s=Cs[e];if(void 0!==s){for(var n={},o=0;o<s.length;o++)n[s.charCodeAt(o)]=o+128;return Os&&Os.set(r,n),n}}}(t);if(void 0!==r){for(var i=[],s=0;s<e.length;s++){var n=e.charCodeAt(s);if(n>=128&&void 0===(n=r[n]))return;i[s]=n}return i}},Ts.MACSTRING=function(e,t){var r=xs.MACSTRING(e,t);return void 0!==r?r.length:0},xs.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var i=e[t];t=0===i?Ds(e,t,r):i>=-128&&i<=127?_s(e,t,r):Fs(e,t,r)}return r},xs.INDEX=function(e){for(var t=1,r=[t],i=[],s=0;s<e.length;s+=1){var n=xs.OBJECT(e[s]);Array.prototype.push.apply(i,n),t+=n.length,r.push(t)}if(0===i.length)return[0,0];for(var o=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,c=[void 0,xs.BYTE,xs.USHORT,xs.UINT24,xs.ULONG][a],h=0;h<r.length;h+=1){var l=c(r[h]);Array.prototype.push.apply(o,l)}return Array.prototype.concat(xs.Card16(e.length),xs.OffSize(a),o,i)},Ts.INDEX=function(e){return xs.INDEX(e).length},xs.DICT=function(e){for(var t=[],r=Object.keys(e),i=r.length,s=0;s<i;s+=1){var n=parseInt(r[s],0),o=e[n];t=(t=t.concat(xs.OPERAND(o.value,o.type))).concat(xs.OPERATOR(n))}return t},Ts.DICT=function(e){return xs.DICT(e).length},xs.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},xs.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)bs.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(xs.OPERAND(e[i],t[i]));else if("SID"===t)r=r.concat(xs.NUMBER(e));else if("offset"===t)r=r.concat(xs.NUMBER32(e));else if("number"===t)r=r.concat(xs.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(xs.REAL(e))}return r},xs.OP=xs.BYTE,Ts.OP=Ts.BYTE;var Rs="function"==typeof WeakMap&&new WeakMap;function Ms(e,t,r){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var i=0;i<t.length;i+=1){var s=t[i];this[s.name]=s.value}if(this.tableName=e,this.fields=t,r)for(var n=Object.keys(r),o=0;o<n.length;o+=1){var a=n[o],c=r[a];void 0!==this[a]&&(this[a]=c)}}function Ls(e,t,r){void 0===r&&(r=t.length);var i=new Array(t.length+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var s=0;s<t.length;s++)i[s+1]={name:e+s,type:"USHORT",value:t[s]};return i}function Bs(e,t,r){var i=t.length,s=new Array(i+1);s[0]={name:e+"Count",type:"USHORT",value:i};for(var n=0;n<i;n++)s[n+1]={name:e+n,type:"TABLE",value:r(t[n],n)};return s}function Is(e,t,r){var i=t.length,s=[];s[0]={name:e+"Count",type:"USHORT",value:i};for(var n=0;n<i;n++)s=s.concat(r(t[n],n));return s}function Us(e){1===e.format?Ms.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Ls("glyph",e.glyphs))):2===e.format?Ms.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Is("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):bs.assert(!1,"Coverage format must be 1 or 2.")}function Ws(e){Ms.call(this,"scriptListTable",Is("scriptRecord",e,(function(e,t){var r=e.script,i=r.defaultLangSys;return bs.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Ms("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Ms("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Ls("featureIndex",i.featureIndexes)))}].concat(Is("langSys",r.langSysRecords,(function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Ms("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Ls("featureIndex",r.featureIndexes)))}]}))))}]})))}function Ns(e){Ms.call(this,"featureListTable",Is("featureRecord",e,(function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Ms("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(Ls("lookupListIndex",r.lookupListIndexes)))}]})))}function Gs(e,t){Ms.call(this,"lookupListTable",Bs("lookup",e,(function(e){var r=t[e.lookupType];return bs.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Ms("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(Bs("subtable",e.subtables,r)))})))}xs.CHARSTRING=function(e){if(Rs){var t=Rs.get(e);if(void 0!==t)return t}for(var r=[],i=e.length,s=0;s<i;s+=1){var n=e[s];r=r.concat(xs[n.type](n.value))}return Rs&&Rs.set(e,r),r},Ts.CHARSTRING=function(e){return xs.CHARSTRING(e).length},xs.OBJECT=function(e){var t=xs[e.type];return bs.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},Ts.OBJECT=function(e){var t=Ts[e.type];return bs.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},xs.TABLE=function(e){for(var t=[],r=e.fields.length,i=[],s=[],n=0;n<r;n+=1){var o=e.fields[n],a=xs[o.type];bs.argument(void 0!==a,"No encoding function for field type "+o.type+" ("+o.name+")");var c=e[o.name];void 0===c&&(c=o.value);var h=a(c);"TABLE"===o.type?(s.push(t.length),t=t.concat([0,0]),i.push(h)):t=t.concat(h)}for(var l=0;l<i.length;l+=1){var d=s[l],u=t.length;bs.argument(u<65536,"Table "+e.tableName+" too big."),t[d]=u>>8,t[d+1]=255&u,t=t.concat(i[l])}return t},Ts.TABLE=function(e){for(var t=0,r=e.fields.length,i=0;i<r;i+=1){var s=e.fields[i],n=Ts[s.type];bs.argument(void 0!==n,"No sizeOf function for field type "+s.type+" ("+s.name+")");var o=e[s.name];void 0===o&&(o=s.value),t+=n(o),"TABLE"===s.type&&(t+=2)}return t},xs.RECORD=xs.TABLE,Ts.RECORD=Ts.TABLE,xs.LITERAL=function(e){return e},Ts.LITERAL=function(e){return e.length},Ms.prototype.encode=function(){return xs.TABLE(this)},Ms.prototype.sizeOf=function(){return Ts.TABLE(this)},Us.prototype=Object.create(Ms.prototype),Us.prototype.constructor=Us,Ws.prototype=Object.create(Ms.prototype),Ws.prototype.constructor=Ws,Ns.prototype=Object.create(Ms.prototype),Ns.prototype.constructor=Ns,Gs.prototype=Object.create(Ms.prototype),Gs.prototype.constructor=Gs;var Hs={Table:Ms,Record:Ms,Coverage:Us,ScriptList:Ws,FeatureList:Ns,LookupList:Gs,ushortList:Ls,tableList:Bs,recordList:Is};function Vs(e,t){return e.getUint8(t)}function zs(e,t){return e.getUint16(t,!1)}function js(e,t){return e.getUint32(t,!1)}function qs(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var Ys={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Xs(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Xs.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Xs.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},Xs.prototype.parseCard8=Xs.prototype.parseByte,Xs.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Xs.prototype.parseCard16=Xs.prototype.parseUShort,Xs.prototype.parseSID=Xs.prototype.parseUShort,Xs.prototype.parseOffset16=Xs.prototype.parseUShort,Xs.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},Xs.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},Xs.prototype.parseULong=function(){var e=js(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Xs.prototype.parseOffset32=Xs.prototype.parseULong,Xs.prototype.parseFixed=function(){var e=qs(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},Xs.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,i="";this.relativeOffset+=e;for(var s=0;s<e;s++)i+=String.fromCharCode(t.getUint8(r+s));return i},Xs.prototype.parseTag=function(){return this.parseString(4)},Xs.prototype.parseLongDateTime=function(){var e=js(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},Xs.prototype.parseVersion=function(e){var t=zs(this.data,this.offset+this.relativeOffset),r=zs(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},Xs.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=Ys[e]*t},Xs.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint32(i),i+=4;return this.relativeOffset+=4*e,t},Xs.prototype.parseOffset16List=Xs.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint16(i),i+=2;return this.relativeOffset+=2*e,t},Xs.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getInt16(i),i+=2;return this.relativeOffset+=2*e,t},Xs.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=r.getUint8(i++);return this.relativeOffset+=e,t},Xs.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Xs.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=0;i<e;i++)r[i]=t.call(this);return r},Xs.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),i=Object.keys(t),s=0;s<e;s++){for(var n={},o=0;o<i.length;o++){var a=i[o],c=t[a];n[a]=c.call(this)}r[s]=n}return r},Xs.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),i=Object.keys(t),s=0;s<e;s++){for(var n={},o=0;o<i.length;o++){var a=i[o],c=t[a];n[a]=c.call(this)}r[s]=n}return r},Xs.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var s=t[i],n=e[s];r[s]=n.call(this)}return r},Xs.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},Xs.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),i=0;i<t;i++)r[i]=this.parseValueRecord(e);return r},Xs.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new Xs(this.data,this.offset+t).parseStruct(e)},Xs.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new Xs(this.data,this.offset+t).parseStruct(e)},Xs.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,i=this.relativeOffset,s=new Array(r),n=0;n<r;n++){var o=t[n];if(0!==o)if(this.relativeOffset=o,e){for(var a=this.parseOffset16List(),c=new Array(a.length),h=0;h<a.length;h++)this.relativeOffset=o+a[h],c[h]=e.call(this);s[n]=c}else s[n]=this.parseUShortList();else s[n]=void 0}return this.relativeOffset=i,s},Xs.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var i=new Array(r),s=0;s<r;s++)i[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},Xs.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:Xs.uShort,end:Xs.uShort,classId:Xs.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},Xs.list=function(e,t){return function(){return this.parseList(e,t)}},Xs.list32=function(e,t){return function(){return this.parseList32(e,t)}},Xs.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},Xs.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},Xs.pointer=function(e){return function(){return this.parsePointer(e)}},Xs.pointer32=function(e){return function(){return this.parsePointer32(e)}},Xs.tag=Xs.prototype.parseTag,Xs.byte=Xs.prototype.parseByte,Xs.uShort=Xs.offset16=Xs.prototype.parseUShort,Xs.uShortList=Xs.prototype.parseUShortList,Xs.uLong=Xs.offset32=Xs.prototype.parseULong,Xs.uLongList=Xs.prototype.parseULongList,Xs.struct=Xs.prototype.parseStruct,Xs.coverage=Xs.prototype.parseCoverage,Xs.classDef=Xs.prototype.parseClassDef;var $s={reserved:Xs.uShort,reqFeatureIndex:Xs.uShort,featureIndexes:Xs.uShortList};Xs.prototype.parseScriptList=function(){return this.parsePointer(Xs.recordList({tag:Xs.tag,script:Xs.pointer({defaultLangSys:Xs.pointer($s),langSysRecords:Xs.recordList({tag:Xs.tag,langSys:Xs.pointer($s)})})}))||[]},Xs.prototype.parseFeatureList=function(){return this.parsePointer(Xs.recordList({tag:Xs.tag,feature:Xs.pointer({featureParams:Xs.offset16,lookupListIndexes:Xs.uShortList})}))||[]},Xs.prototype.parseLookupList=function(e){return this.parsePointer(Xs.list(Xs.pointer((function(){var t=this.parseUShort();bs.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),i=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(Xs.pointer(e[t])),markFilteringSet:i?this.parseUShort():void 0}}))))||[]},Xs.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return bs.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Xs.offset32,featureTableSubstitutionOffset:Xs.offset32})}))||[]};var Zs={getByte:Vs,getCard8:Vs,getUShort:zs,getCard16:zs,getShort:function(e,t){return e.getInt16(t,!1)},getULong:js,getFixed:qs,getTag:function(e,t){for(var r="",i=t;i<t+4;i+=1)r+=String.fromCharCode(e.getInt8(i));return r},getOffset:function(e,t,r){for(var i=0,s=0;s<r;s+=1)i<<=8,i+=e.getUint8(t+s);return i},getBytes:function(e,t,r){for(var i=[],s=t;s<r;s+=1)i.push(e.getUint8(s));return i},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:Xs};function Qs(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}var Js={parse:function(e,t){var r={};r.version=Zs.getUShort(e,t),bs.argument(0===r.version,"cmap table version should be 0."),r.numTables=Zs.getUShort(e,t+2);for(var i=-1,s=r.numTables-1;s>=0;s-=1){var n=Zs.getUShort(e,t+4+8*s),o=Zs.getUShort(e,t+4+8*s+2);if(3===n&&(0===o||1===o||10===o)||0===n&&(0===o||1===o||2===o||3===o||4===o)){i=Zs.getULong(e,t+4+8*s+4);break}}if(-1===i)throw new Error("No valid cmap sub-tables found.");var a=new Zs.Parser(e,t+i);if(r.format=a.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var i=0;i<r;i+=1)for(var s=t.parseULong(),n=t.parseULong(),o=t.parseULong(),a=s;a<=n;a+=1)e.glyphIndexMap[a]=o,o++}(r,a);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,i,s){var n;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=n=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new Zs.Parser(r,i+s+14),a=new Zs.Parser(r,i+s+16+2*n),c=new Zs.Parser(r,i+s+16+4*n),h=new Zs.Parser(r,i+s+16+6*n),l=i+s+16+8*n,d=0;d<n-1;d+=1)for(var u=void 0,p=o.parseUShort(),f=a.parseUShort(),v=c.parseShort(),g=h.parseUShort(),m=f;m<=p;m+=1)0!==g?(l=h.offset+h.relativeOffset-2,l+=g,l+=2*(m-f),0!==(u=Zs.getUShort(r,l))&&(u=u+v&65535)):u=m+v&65535,e.glyphIndexMap[m]=u}(r,a,e,t,i)}return r},make:function(e){var t,r=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new Hs.Table("cmap",i);for(s.segments=[],t=0;t<e.length;t+=1){for(var n=e.get(t),o=0;o<n.unicodes.length;o+=1)Qs(s,n.unicodes[o],t);s.segments=s.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(s);var a=s.segments.length,c=0,h=[],l=[],d=[],u=[],p=[],f=[];for(t=0;t<a;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(h=h.concat({name:"end_"+t,type:"USHORT",value:v.end}),l=l.concat({name:"start_"+t,type:"USHORT",value:v.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),u=u.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):c+=1,r||void 0===v.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(a-c),s.searchRange=2*Math.pow(2,Math.floor(Math.log(a-c)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(h),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(l),s.fields=s.fields.concat(d),s.fields=s.fields.concat(u),s.fields=s.fields.concat(p),s.cmap4Length=14+2*h.length+2+2*l.length+2*d.length+2*u.length+2*p.length,!r){var g=16+4*f.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),s.fields=s.fields.concat(f)}return s}},Ks=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],en=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],tn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],rn=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function sn(e){this.font=e}function nn(e){this.cmap=e}function on(e,t){this.encoding=e,this.charset=t}function an(e){switch(e.version){case 1:this.names=rn.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<rn.length?this.names[t]=rn[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-rn.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=rn[r+e.glyphNameIndex[r]];break;default:this.names=[]}}sn.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var i=0;i<r.length;i+=1)for(var s=r.get(i),n=0;n<s.unicodes.length;n+=1)if(s.unicodes[n]===t)return i;return null},nn.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},on.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},an.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},an.prototype.glyphIndexToName=function(e){return this.names[e]};var cn=function(e,t,r,i,s){e.beginPath(),e.moveTo(t,r),e.lineTo(i,s),e.stroke()};function hn(e){this.bindConstructorValues(e)}function ln(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function dn(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];i.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=i}this.length=t&&t.length||0}hn.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||new ms,{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},hn.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},hn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},hn.prototype.getPath=function(e,t,r,i,s){var n,o;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72,i||(i={});var a=i.xScale,c=i.yScale;if(i.hinting&&s&&s.hinting&&(o=this.path&&s.hinting.exec(this,r)),o)n=s.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),a=c=1;else{n=this.path.commands;var h=1/(this.path.unitsPerEm||1e3)*r;void 0===a&&(a=h),void 0===c&&(c=h)}for(var l=new ms,d=0;d<n.length;d+=1){var u=n[d];"M"===u.type?l.moveTo(e+u.x*a,t+-u.y*c):"L"===u.type?l.lineTo(e+u.x*a,t+-u.y*c):"Q"===u.type?l.quadraticCurveTo(e+u.x1*a,t+-u.y1*c,e+u.x*a,t+-u.y*c):"C"===u.type?l.curveTo(e+u.x1*a,t+-u.y1*c,e+u.x2*a,t+-u.y2*c,e+u.x*a,t+-u.y*c):"Z"===u.type&&l.closePath()}return l},hn.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var i=this.points[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return bs.argument(0===t.length,"There are still points left in the current contour."),e},hn.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],i=0;i<e.length;i+=1){var s=e[i];"Z"!==s.type&&(t.push(s.x),r.push(s.y)),"Q"!==s.type&&"C"!==s.type||(t.push(s.x1),r.push(s.y1)),"C"===s.type&&(t.push(s.x2),r.push(s.y2))}var n={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(n.xMin)||(n.xMin=0),isFinite(n.xMax)||(n.xMax=this.advanceWidth),isFinite(n.yMin)||(n.yMin=0),isFinite(n.yMax)||(n.yMax=0),n.rightSideBearing=this.advanceWidth-n.leftSideBearing-(n.xMax-n.xMin),n},hn.prototype.draw=function(e,t,r,i,s){this.getPath(t,r,i,s).draw(e)},hn.prototype.drawPoints=function(e,t,r,i){function s(t,r,i,s){e.beginPath();for(var n=0;n<t.length;n+=1)e.moveTo(r+t[n].x*s,i+t[n].y*s),e.arc(r+t[n].x*s,i+t[n].y*s,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24;for(var n=1/this.path.unitsPerEm*i,o=[],a=[],c=this.path,h=0;h<c.commands.length;h+=1){var l=c.commands[h];void 0!==l.x&&o.push({x:l.x,y:-l.y}),void 0!==l.x1&&a.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&a.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",s(o,t,r,n),e.fillStyle="red",s(a,t,r,n)},hn.prototype.drawMetrics=function(e,t,r,i){var s;t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:24,s=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",cn(e,t,-1e4,t,1e4),cn(e,-1e4,r,1e4,r);var n=this.xMin||0,o=this.yMin||0,a=this.xMax||0,c=this.yMax||0,h=this.advanceWidth||0;e.strokeStyle="blue",cn(e,t+n*s,-1e4,t+n*s,1e4),cn(e,t+a*s,-1e4,t+a*s,1e4),cn(e,-1e4,r+-o*s,1e4,r+-o*s),cn(e,-1e4,r+-c*s,1e4,r+-c*s),e.strokeStyle="green",cn(e,t+h*s,-1e4,t+h*s,1e4)},dn.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var i=0;i<r.unicodes.length;i++)t.addUnicode(r.unicodes[i]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},dn.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var un={GlyphSet:dn,glyphLoader:function(e,t){return new hn({index:t,font:e})},ttfGlyphLoader:function(e,t,r,i,s,n){return function(){var o=new hn({index:t,font:e});return o.path=function(){r(o,i,s);var t=n(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},ln(o,"xMin","_xMin"),ln(o,"xMax","_xMax"),ln(o,"yMin","_yMin"),ln(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,r,i){return function(){var s=new hn({index:t,font:e});return s.path=function(){var t=r(e,s,i);return t.unitsPerEm=e.unitsPerEm,t},s}}};function pn(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!pn(e[r],t[r]))return!1;return!0}return!1}function fn(e){return e.length<1240?107:e.length<33900?1131:32768}function vn(e,t,r){var i,s,n=[],o=[],a=Zs.getCard16(e,t);if(0!==a){var c=Zs.getByte(e,t+2);i=t+(a+1)*c+2;for(var h=t+3,l=0;l<a+1;l+=1)n.push(Zs.getOffset(e,h,c)),h+=c;s=i+n[a]}else s=t+2;for(var d=0;d<n.length-1;d+=1){var u=Zs.getBytes(e,i+n[d],i+n[d+1]);r&&(u=r(u)),o.push(u)}return{objects:o,startOffset:t,endOffset:s}}function gn(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),s=i>>4,n=15&i;if(15===s)break;if(t+=r[s],15===n)break;t+=r[n]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function mn(e,t,r){t=void 0!==t?t:0;var i=new Zs.Parser(e,t),s=[],n=[];for(r=void 0!==r?r:e.length;i.relativeOffset<r;){var o=i.parseByte();o<=21?(12===o&&(o=1200+i.parseByte()),s.push([o,n]),n=[]):n.push(gn(i,o))}return function(e){for(var t={},r=0;r<e.length;r+=1){var i,s=e[r][0],n=e[r][1];if(i=1===n.length?n[0]:n,t.hasOwnProperty(s)&&!isNaN(t[s]))throw new Error("Object "+t+" already has key "+s);t[s]=i}return t}(s)}function Sn(e,t){return t<=390?Ks[t]:e[t-391]}function yn(e,t,r){for(var i,s={},n=0;n<t.length;n+=1){var o=t[n];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var c=0;c<o.type.length;c++)void 0===(i=void 0!==e[o.op]?e[o.op][c]:void 0)&&(i=void 0!==o.value&&void 0!==o.value[c]?o.value[c]:null),"SID"===o.type[c]&&(i=Sn(r,i)),a[c]=i;s[o.name]=a}else void 0===(i=e[o.op])&&(i=void 0!==o.value?o.value:null),"SID"===o.type&&(i=Sn(r,i)),s[o.name]=i}return s}var bn=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],wn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function En(e,t){return yn(mn(e,0,e.byteLength),bn,t)}function xn(e,t,r,i){return yn(mn(e,t,r),wn,i)}function Tn(e,t,r,i){for(var s=[],n=0;n<r.length;n+=1){var o=En(new DataView(new Uint8Array(r[n]).buffer),i);o._subrs=[],o._subrsBias=0,o._defaultWidthX=0,o._nominalWidthX=0;var a=o.private[0],c=o.private[1];if(0!==a&&0!==c){var h=xn(e,c+t,a,i);if(o._defaultWidthX=h.defaultWidthX,o._nominalWidthX=h.nominalWidthX,0!==h.subrs){var l=vn(e,c+h.subrs+t);o._subrs=l.objects,o._subrsBias=fn(o._subrs)}o._privateDict=h}s.push(o)}return s}function Pn(e,t,r){var i,s,n,o,a,c,h,l,d=new ms,u=[],p=0,f=!1,v=!1,g=0,m=0;if(e.isCIDFont){var S=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[S];a=y._subrs,c=y._subrsBias,h=y._defaultWidthX,l=y._nominalWidthX}else a=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,h=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var b=h;function w(e,t){v&&d.closePath(),d.moveTo(e,t),v=!0}function E(){u.length%2!=0&&!f&&(b=u.shift()+l),p+=u.length>>1,u.length=0,f=!0}return function r(h){for(var S,y,x,T,P,C,k,O,A,D,_,F,R=0;R<h.length;){var M=h[R];switch(R+=1,M){case 1:case 3:case 18:case 23:E();break;case 4:u.length>1&&!f&&(b=u.shift()+l,f=!0),m+=u.pop(),w(g,m);break;case 5:for(;u.length>0;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 6:for(;u.length>0&&(g+=u.shift(),d.lineTo(g,m),0!==u.length);)m+=u.shift(),d.lineTo(g,m);break;case 7:for(;u.length>0&&(m+=u.shift(),d.lineTo(g,m),0!==u.length);)g+=u.shift(),d.lineTo(g,m);break;case 8:for(;u.length>0;)i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(i,s,n,o,g,m);break;case 10:P=u.pop()+c,(C=a[P])&&r(C);break;case 11:return;case 12:switch(M=h[R],R+=1,M){case 35:i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),k=n+u.shift(),O=o+u.shift(),A=k+u.shift(),D=O+u.shift(),_=A+u.shift(),F=D+u.shift(),g=_+u.shift(),m=F+u.shift(),u.shift(),d.curveTo(i,s,n,o,k,O),d.curveTo(A,D,_,F,g,m);break;case 34:i=g+u.shift(),s=m,n=i+u.shift(),o=s+u.shift(),k=n+u.shift(),O=o,A=k+u.shift(),D=o,_=A+u.shift(),F=m,g=_+u.shift(),d.curveTo(i,s,n,o,k,O),d.curveTo(A,D,_,F,g,m);break;case 36:i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),k=n+u.shift(),O=o,A=k+u.shift(),D=o,_=A+u.shift(),F=D+u.shift(),g=_+u.shift(),d.curveTo(i,s,n,o,k,O),d.curveTo(A,D,_,F,g,m);break;case 37:i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),k=n+u.shift(),O=o+u.shift(),A=k+u.shift(),D=O+u.shift(),_=A+u.shift(),F=D+u.shift(),Math.abs(_-g)>Math.abs(F-m)?g=_+u.shift():m=F+u.shift(),d.curveTo(i,s,n,o,k,O),d.curveTo(A,D,_,F,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+M),u.length=0}break;case 14:u.length>0&&!f&&(b=u.shift()+l,f=!0),v&&(d.closePath(),v=!1);break;case 19:case 20:E(),R+=p+7>>3;break;case 21:u.length>2&&!f&&(b=u.shift()+l,f=!0),m+=u.pop(),w(g+=u.pop(),m);break;case 22:u.length>1&&!f&&(b=u.shift()+l,f=!0),w(g+=u.pop(),m);break;case 24:for(;u.length>2;)i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(i,s,n,o,g,m);g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 25:for(;u.length>6;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);i=g+u.shift(),s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(i,s,n,o,g,m);break;case 26:for(u.length%2&&(g+=u.shift());u.length>0;)i=g,s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n,m=o+u.shift(),d.curveTo(i,s,n,o,g,m);break;case 27:for(u.length%2&&(m+=u.shift());u.length>0;)i=g+u.shift(),s=m,n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o,d.curveTo(i,s,n,o,g,m);break;case 28:S=h[R],y=h[R+1],u.push((S<<24|y<<16)>>16),R+=2;break;case 29:P=u.pop()+e.gsubrsBias,(C=e.gsubrs[P])&&r(C);break;case 30:for(;u.length>0&&(i=g,s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+(1===u.length?u.shift():0),d.curveTo(i,s,n,o,g,m),0!==u.length);)i=g+u.shift(),s=m,n=i+u.shift(),o=s+u.shift(),m=o+u.shift(),g=n+(1===u.length?u.shift():0),d.curveTo(i,s,n,o,g,m);break;case 31:for(;u.length>0&&(i=g+u.shift(),s=m,n=i+u.shift(),o=s+u.shift(),m=o+u.shift(),g=n+(1===u.length?u.shift():0),d.curveTo(i,s,n,o,g,m),0!==u.length);)i=g,s=m+u.shift(),n=i+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+(1===u.length?u.shift():0),d.curveTo(i,s,n,o,g,m);break;default:M<32?console.log("Glyph "+t.index+": unknown operator "+M):M<247?u.push(M-139):M<251?(S=h[R],R+=1,u.push(256*(M-247)+S+108)):M<255?(S=h[R],R+=1,u.push(256*-(M-251)-S-108)):(S=h[R],y=h[R+1],x=h[R+2],T=h[R+3],R+=4,u.push((S<<24|y<<16|x<<8|T)/65536))}}}(r),t.advanceWidth=b,d}function Cn(e,t){var r,i=Ks.indexOf(e);return i>=0&&(r=i),(i=t.indexOf(e))>=0?r=i+Ks.length:(r=Ks.length+t.length,t.push(e)),r}function kn(e,t,r){for(var i={},s=0;s<e.length;s+=1){var n=e[s],o=t[n.name];void 0===o||pn(o,n.value)||("SID"===n.type&&(o=Cn(o,r)),i[n.op]={name:n.name,type:n.type,value:o})}return i}function On(e,t){var r=new Hs.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=kn(bn,e,t),r}function An(e){var t=new Hs.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Dn(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,s=0,n=0;n<r.commands.length;n+=1){var o=void 0,a=void 0,c=r.commands[n];if("Q"===c.type){var h=1/3,l=2/3;c={type:"C",x:c.x,y:c.y,x1:Math.round(h*i+l*c.x1),y1:Math.round(h*s+l*c.y1),x2:Math.round(h*c.x+l*c.x1),y2:Math.round(h*c.y+l*c.y1)}}if("M"===c.type)o=Math.round(c.x-i),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(c.x),s=Math.round(c.y);else if("L"===c.type)o=Math.round(c.x-i),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(c.x),s=Math.round(c.y);else if("C"===c.type){var d=Math.round(c.x1-i),u=Math.round(c.y1-s),p=Math.round(c.x2-c.x1),f=Math.round(c.y2-c.y1);o=Math.round(c.x-c.x2),a=Math.round(c.y-c.y2),t.push({name:"dx1",type:"NUMBER",value:d}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:p}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(c.x),s=Math.round(c.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var _n={parse:function(e,t,r,i){r.tables.cff={};var s=function(e,t){var r={};return r.formatMajor=Zs.getCard8(e,t),r.formatMinor=Zs.getCard8(e,t+1),r.size=Zs.getCard8(e,t+2),r.offsetSize=Zs.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}(e,t),n=vn(e,s.endOffset,Zs.bytesToString),o=vn(e,n.endOffset),a=vn(e,o.endOffset,Zs.bytesToString),c=vn(e,a.endOffset);r.gsubrs=c.objects,r.gsubrsBias=fn(r.gsubrs);var h=Tn(e,t,o.objects,a.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var l=h[0];if(r.tables.cff.topDict=l,l._privateDict&&(r.defaultWidthX=l._privateDict.defaultWidthX,r.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var d=l.fdArray,u=l.fdSelect;if(0===d||0===u)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=vn(e,d+=t),f=Tn(e,t,p.objects,a.objects);l._fdArray=f,u+=t,l._fdSelect=function(e,t,r,i){var s,n=[],o=new Zs.Parser(e,t),a=o.parseCard8();if(0===a)for(var c=0;c<r;c++){if((s=o.parseCard8())>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");n.push(s)}else{if(3!==a)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);var h,l=o.parseCard16(),d=o.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var u=0;u<l;u++){if(s=o.parseCard8(),h=o.parseCard16(),s>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+i+")");if(h>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;d<h;d++)n.push(s);d=h}if(h!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return n}(e,u,r.numGlyphs,f.length)}var v,g=t+l.private[1],m=xn(e,g,l.private[0],a.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var S=g+m.subrs,y=vn(e,S);r.subrs=y.objects,r.subrsBias=fn(r.subrs)}else r.subrs=[],r.subrsBias=0;i.lowMemory?(v=function(e,t){var r,i,s=[],n=Zs.getCard16(e,t);if(0!==n){var o=Zs.getByte(e,t+2);r=t+(n+1)*o+2;for(var a=t+3,c=0;c<n+1;c+=1)s.push(Zs.getOffset(e,a,o)),a+=o;i=r+s[n]}else i=t+2;return{offsets:s,startOffset:t,endOffset:i}}(e,t+l.charStrings),r.nGlyphs=v.offsets.length):(v=vn(e,t+l.charStrings),r.nGlyphs=v.objects.length);var b=function(e,t,r,i){var s,n,o=new Zs.Parser(e,t);r-=1;var a=[".notdef"],c=o.parseCard8();if(0===c)for(var h=0;h<r;h+=1)s=o.parseSID(),a.push(Sn(i,s));else if(1===c)for(;a.length<=r;){s=o.parseSID(),n=o.parseCard8();for(var l=0;l<=n;l+=1)a.push(Sn(i,s)),s+=1}else{if(2!==c)throw new Error("Unknown charset format "+c);for(;a.length<=r;){s=o.parseSID(),n=o.parseCard16();for(var d=0;d<=n;d+=1)a.push(Sn(i,s)),s+=1}}return a}(e,t+l.charset,r.nGlyphs,a.objects);if(0===l.encoding?r.cffEncoding=new on(en,b):1===l.encoding?r.cffEncoding=new on(tn,b):r.cffEncoding=function(e,t,r){var i,s={},n=new Zs.Parser(e,t),o=n.parseCard8();if(0===o)for(var a=n.parseCard8(),c=0;c<a;c+=1)s[i=n.parseCard8()]=c;else{if(1!==o)throw new Error("Unknown encoding format "+o);var h=n.parseCard8();i=1;for(var l=0;l<h;l+=1)for(var d=n.parseCard8(),u=n.parseCard8(),p=d;p<=d+u;p+=1)s[p]=i,i+=1}return new on(s,r)}(e,t+l.encoding,b),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new un.GlyphSet(r),i.lowMemory)r._push=function(i){var s=function(e,t,r,i,s){var n=Zs.getCard16(r,i),o=0;0!==n&&(o=i+(n+1)*Zs.getByte(r,i+2)+2);var a=Zs.getBytes(r,o+t[e],o+t[e+1]);return a}(i,v.offsets,e,t+l.charStrings);r.glyphs.push(i,un.cffGlyphLoader(r,i,Pn,s))};else for(var w=0;w<r.nGlyphs;w+=1){var E=v.objects[w];r.glyphs.push(w,un.cffGlyphLoader(r,w,Pn,E))}},make:function(e,t){for(var r,i=new Hs.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),s=1/t.unitsPerEm,n={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],a=1;a<e.length;a+=1)r=e.get(a),o.push(r.name);var c=[];i.header=new Hs.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),i.nameIndex=function(e){var t=new Hs.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var h=On(n,c);i.topDictIndex=An(h),i.globalSubrIndex=new Hs.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),i.charsets=function(e,t){for(var r=new Hs.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var s=Cn(e[i],t);r.fields.push({name:"glyph_"+i,type:"SID",value:s})}return r}(o,c),i.charStringsIndex=function(e){for(var t=new Hs.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var i=e.get(r),s=Dn(i);t.charStrings.push({name:i.name,type:"CHARSTRING",value:s})}return t}(e),i.privateDict=function(e,t){var r=new Hs.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=kn(wn,{},t),r}(0,c),i.stringIndex=function(e){var t=new Hs.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(c);var l=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();return n.charset=l,n.encoding=0,n.charStrings=n.charset+i.charsets.sizeOf(),n.private[1]=n.charStrings+i.charStringsIndex.sizeOf(),h=On(n,c),i.topDictIndex=An(h),i}},Fn={parse:function(e,t){var r={},i=new Zs.Parser(e,t);return r.version=i.parseVersion(),r.fontRevision=Math.round(1e3*i.parseFixed())/1e3,r.checkSumAdjustment=i.parseULong(),r.magicNumber=i.parseULong(),bs.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=i.parseUShort(),r.unitsPerEm=i.parseUShort(),r.created=i.parseLongDateTime(),r.modified=i.parseLongDateTime(),r.xMin=i.parseShort(),r.yMin=i.parseShort(),r.xMax=i.parseShort(),r.yMax=i.parseShort(),r.macStyle=i.parseUShort(),r.lowestRecPPEM=i.parseUShort(),r.fontDirectionHint=i.parseShort(),r.indexToLocFormat=i.parseShort(),r.glyphDataFormat=i.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new Hs.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Rn={parse:function(e,t){var r={},i=new Zs.Parser(e,t);return r.version=i.parseVersion(),r.ascender=i.parseShort(),r.descender=i.parseShort(),r.lineGap=i.parseShort(),r.advanceWidthMax=i.parseUShort(),r.minLeftSideBearing=i.parseShort(),r.minRightSideBearing=i.parseShort(),r.xMaxExtent=i.parseShort(),r.caretSlopeRise=i.parseShort(),r.caretSlopeRun=i.parseShort(),r.caretOffset=i.parseShort(),i.relativeOffset+=8,r.metricDataFormat=i.parseShort(),r.numberOfHMetrics=i.parseUShort(),r},make:function(e){return new Hs.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Mn={parse:function(e,t,r,i,s,n,o){o.lowMemory?function(e,t,r,i,s){var n,o;e._hmtxTableData={};for(var a=new Zs.Parser(t,r),c=0;c<s;c+=1)c<i&&(n=a.parseUShort(),o=a.parseShort()),e._hmtxTableData[c]={advanceWidth:n,leftSideBearing:o}}(e,t,r,i,s):function(e,t,r,i,s){for(var n,o,a=new Zs.Parser(e,t),c=0;c<i;c+=1){c<r&&(n=a.parseUShort(),o=a.parseShort());var h=s.get(c);h.advanceWidth=n,h.leftSideBearing=o}}(t,r,i,s,n)},make:function(e){for(var t=new Hs.Table("hmtx",[]),r=0;r<e.length;r+=1){var i=e.get(r),s=i.advanceWidth||0,n=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:s}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:n})}return t}},Ln={make:function(e){for(var t=new Hs.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",i=12+4*e.length,s=0;s<e.length;++s){var n=r.indexOf(e[s]);n<0&&(n=r.length,r+=e[s]),t.fields.push({name:"offset "+s,type:"USHORT",value:i+n}),t.fields.push({name:"length "+s,type:"USHORT",value:e[s].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new Zs.Parser(e,t),i=r.parseULong();bs.argument(1===i,"Unsupported ltag table version."),r.skip("uLong",1);for(var s=r.parseULong(),n=[],o=0;o<s;o++){for(var a="",c=t+r.parseUShort(),h=r.parseUShort(),l=c;l<c+h;++l)a+=String.fromCharCode(e.getInt8(l));n.push(a)}return n}},Bn={parse:function(e,t){var r={},i=new Zs.Parser(e,t);return r.version=i.parseVersion(),r.numGlyphs=i.parseUShort(),1===r.version&&(r.maxPoints=i.parseUShort(),r.maxContours=i.parseUShort(),r.maxCompositePoints=i.parseUShort(),r.maxCompositeContours=i.parseUShort(),r.maxZones=i.parseUShort(),r.maxTwilightPoints=i.parseUShort(),r.maxStorage=i.parseUShort(),r.maxFunctionDefs=i.parseUShort(),r.maxInstructionDefs=i.parseUShort(),r.maxStackElements=i.parseUShort(),r.maxSizeOfInstructions=i.parseUShort(),r.maxComponentElements=i.parseUShort(),r.maxComponentDepth=i.parseUShort()),r},make:function(e){return new Hs.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},In=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Un={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Wn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Nn={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Gn(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return Un[t];case 3:return Nn[t]}}var Hn="utf-16",Vn={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},zn={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function jn(e,t,r){switch(e){case 0:return Hn;case 1:return zn[r]||Vn[t];case 3:if(1===t||10===t)return Hn}}function qn(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function Yn(e,t,r,i,s,n){return new Hs.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:n}])}function Xn(e,t){var r=function(e,t){var r=e.length,i=t.length-r+1;e:for(var s=0;s<i;s++)for(;s<i;s++){for(var n=0;n<r;n++)if(t[s+n]!==e[n])continue e;return s}return-1}(e,t);if(r<0){r=t.length;for(var i=0,s=e.length;i<s;++i)t.push(e[i])}return r}var $n={parse:function(e,t,r){for(var i={},s=new Zs.Parser(e,t),n=s.parseUShort(),o=s.parseUShort(),a=s.offset+s.parseUShort(),c=0;c<o;c++){var h=s.parseUShort(),l=s.parseUShort(),d=s.parseUShort(),u=s.parseUShort(),p=In[u]||u,f=s.parseUShort(),v=s.parseUShort(),g=Gn(h,d,r),m=jn(h,l,d);if(void 0!==m&&void 0!==g){var S;if(S=m===Hn?Es.UTF16(e,a+v,f):Es.MACSTRING(e,a+v,f,m)){var y=i[p];void 0===y&&(y=i[p]={}),y[g]=S}}}return 1===n&&s.parseUShort(),i},make:function(e,t){var r,i=[],s={},n=qn(In);for(var o in e){var a=n[o];if(void 0===a&&(a=o),r=parseInt(a),isNaN(r))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');s[r]=e[o],i.push(r)}for(var c=qn(Un),h=qn(Nn),l=[],d=[],u=0;u<i.length;u++){var p=s[r=i[u]];for(var f in p){var v=p[f],g=1,m=c[f],S=Wn[m],y=jn(g,S,m),b=xs.MACSTRING(v,y);void 0===b&&(g=0,(m=t.indexOf(f))<0&&(m=t.length,t.push(f)),S=4,b=xs.UTF16(v));var w=Xn(b,d);l.push(Yn(g,S,m,r,b.length,w));var E=h[f];if(void 0!==E){var x=xs.UTF16(v),T=Xn(x,d);l.push(Yn(3,1,E,r,x.length,T))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var P=new Hs.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),C=0;C<l.length;C++)P.fields.push({name:"record_"+C,type:"RECORD",value:l[C]});return P.fields.push({name:"strings",type:"LITERAL",value:d}),P}},Zn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Qn={parse:function(e,t){var r={},i=new Zs.Parser(e,t);r.version=i.parseUShort(),r.xAvgCharWidth=i.parseShort(),r.usWeightClass=i.parseUShort(),r.usWidthClass=i.parseUShort(),r.fsType=i.parseUShort(),r.ySubscriptXSize=i.parseShort(),r.ySubscriptYSize=i.parseShort(),r.ySubscriptXOffset=i.parseShort(),r.ySubscriptYOffset=i.parseShort(),r.ySuperscriptXSize=i.parseShort(),r.ySuperscriptYSize=i.parseShort(),r.ySuperscriptXOffset=i.parseShort(),r.ySuperscriptYOffset=i.parseShort(),r.yStrikeoutSize=i.parseShort(),r.yStrikeoutPosition=i.parseShort(),r.sFamilyClass=i.parseShort(),r.panose=[];for(var s=0;s<10;s++)r.panose[s]=i.parseByte();return r.ulUnicodeRange1=i.parseULong(),r.ulUnicodeRange2=i.parseULong(),r.ulUnicodeRange3=i.parseULong(),r.ulUnicodeRange4=i.parseULong(),r.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),r.fsSelection=i.parseUShort(),r.usFirstCharIndex=i.parseUShort(),r.usLastCharIndex=i.parseUShort(),r.sTypoAscender=i.parseShort(),r.sTypoDescender=i.parseShort(),r.sTypoLineGap=i.parseShort(),r.usWinAscent=i.parseUShort(),r.usWinDescent=i.parseUShort(),r.version>=1&&(r.ulCodePageRange1=i.parseULong(),r.ulCodePageRange2=i.parseULong()),r.version>=2&&(r.sxHeight=i.parseShort(),r.sCapHeight=i.parseShort(),r.usDefaultChar=i.parseUShort(),r.usBreakChar=i.parseUShort(),r.usMaxContent=i.parseUShort()),r},make:function(e){return new Hs.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Zn,getUnicodeRange:function(e){for(var t=0;t<Zn.length;t+=1){var r=Zn[t];if(e>=r.begin&&e<r.end)return t}return-1}},Jn={parse:function(e,t){var r={},i=new Zs.Parser(e,t);switch(r.version=i.parseVersion(),r.italicAngle=i.parseFixed(),r.underlinePosition=i.parseShort(),r.underlineThickness=i.parseShort(),r.isFixedPitch=i.parseULong(),r.minMemType42=i.parseULong(),r.maxMemType42=i.parseULong(),r.minMemType1=i.parseULong(),r.maxMemType1=i.parseULong(),r.version){case 1:r.names=rn.slice();break;case 2:r.numberOfGlyphs=i.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var s=0;s<r.numberOfGlyphs;s++)r.glyphNameIndex[s]=i.parseUShort();r.names=[];for(var n=0;n<r.numberOfGlyphs;n++)if(r.glyphNameIndex[n]>=rn.length){var o=i.parseChar();r.names.push(i.parseString(o))}break;case 2.5:r.numberOfGlyphs=i.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.offset[a]=i.parseChar()}return r},make:function(){return new Hs.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Kn=new Array(9);Kn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Xs.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(Xs.coverage),substitute:this.parseOffset16List()}:void bs.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},Kn[2]=function(){var e=this.parseUShort();return bs.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xs.coverage),sequences:this.parseListOfLists()}},Kn[3]=function(){var e=this.parseUShort();return bs.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xs.coverage),alternateSets:this.parseListOfLists()}},Kn[4]=function(){var e=this.parseUShort();return bs.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xs.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var eo={sequenceIndex:Xs.uShort,lookupListIndex:Xs.uShort};Kn[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(Xs.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,eo)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(Xs.coverage),classDef:this.parsePointer(Xs.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,eo)}}))};if(3===t){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,Xs.pointer(Xs.coverage)),lookupRecords:this.parseRecordList(i,eo)}}bs.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Kn[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(Xs.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(eo)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(Xs.coverage),backtrackClassDef:this.parsePointer(Xs.classDef),inputClassDef:this.parsePointer(Xs.classDef),lookaheadClassDef:this.parsePointer(Xs.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(eo)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(Xs.pointer(Xs.coverage)),inputCoverage:this.parseList(Xs.pointer(Xs.coverage)),lookaheadCoverage:this.parseList(Xs.pointer(Xs.coverage)),lookupRecords:this.parseRecordList(eo)}:void bs.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Kn[7]=function(){var e=this.parseUShort();bs.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new Xs(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:Kn[t].call(r)}},Kn[8]=function(){var e=this.parseUShort();return bs.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xs.coverage),backtrackCoverage:this.parseList(Xs.pointer(Xs.coverage)),lookaheadCoverage:this.parseList(Xs.pointer(Xs.coverage)),substitutes:this.parseUShortList()}};var to=new Array(9);to[1]=function(e){return 1===e.substFormat?new Hs.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Hs.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)}].concat(Hs.ushortList("substitute",e.substitute)))},to[2]=function(e){return bs.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new Hs.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)}].concat(Hs.tableList("seqSet",e.sequences,(function(e){return new Hs.Table("sequenceSetTable",Hs.ushortList("sequence",e))}))))},to[3]=function(e){return bs.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Hs.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)}].concat(Hs.tableList("altSet",e.alternateSets,(function(e){return new Hs.Table("alternateSetTable",Hs.ushortList("alternate",e))}))))},to[4]=function(e){return bs.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Hs.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)}].concat(Hs.tableList("ligSet",e.ligatureSets,(function(e){return new Hs.Table("ligatureSetTable",Hs.tableList("ligature",e,(function(e){return new Hs.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Hs.ushortList("component",e.components,e.components.length+1)))})))}))))},to[6]=function(e){if(1===e.substFormat){var t=new Hs.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new Hs.Coverage(e.coverage)}].concat(Hs.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new Hs.Table("chainRuleSetTable",Hs.tableList("chainRule",e,(function(e){var t=Hs.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(Hs.ushortList("inputGlyph",e.input,e.input.length+1)).concat(Hs.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(Hs.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,r){t=t.concat({name:"sequenceIndex"+r,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:e.lookupListIndex})})),new Hs.Table("chainRuleTable",t)})))}))));return t}if(2===e.substFormat)bs.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,t){r.push({name:"backtrackCoverage"+t,type:"TABLE",value:new Hs.Coverage(e)})})),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,t){r.push({name:"inputCoverage"+t,type:"TABLE",value:new Hs.Coverage(e)})})),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,t){r.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new Hs.Coverage(e)})})),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,t){r=r.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})})),new Hs.Table("chainContextTable",r)}bs.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var ro={parse:function(e,t){var r=new Xs(e,t=t||0),i=r.parseVersion(1);return bs.argument(1===i||1.1===i,"Unsupported GSUB table version."),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Kn)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Kn),variations:r.parseFeatureVariationsList()}},make:function(e){return new Hs.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Hs.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Hs.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Hs.LookupList(e.lookups,to)}])}},io={parse:function(e,t){var r=new Zs.Parser(e,t),i=r.parseULong();bs.argument(1===i,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var s=r.parseULong(),n={},o=0;o<s;o++){var a=r.parseTag(),c=r.parseULong(),h=r.parseULong(),l=Es.UTF8(e,t+c,h);n[a]=l}return n},make:function(e){var t=Object.keys(e).length,r="",i=16+12*t,s=new Hs.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var n in e){var o=r.length;r+=e[n],s.fields.push({name:"tag "+n,type:"TAG",value:n}),s.fields.push({name:"offset "+n,type:"ULONG",value:i+o}),s.fields.push({name:"length "+n,type:"ULONG",value:e[n].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),s}};function so(e){return Math.log(e)/Math.log(2)|0}function no(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%Math.pow(2,32)}function oo(e,t,r,i){return new Hs.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==i?i:0}])}function ao(e){var t=new Hs.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,so(t.numTables));t.searchRange=16*r,t.entrySelector=so(r),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],s=[],n=t.sizeOf()+oo().sizeOf()*t.numTables;n%4!=0;)n+=1,s.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var a=e[o];bs.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid.");var c=a.sizeOf(),h=oo(a.tableName,no(a.encode()),n,c);for(i.push({name:h.tag+" Table Record",type:"RECORD",value:h}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),n+=c,bs.argument(!isNaN(n),"Something went wrong calculating the offset.");n%4!=0;)n+=1,s.push({name:"padding",type:"BYTE",value:0})}return i.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(i),t.fields=t.fields.concat(s),t}function co(e,t,r){for(var i=0;i<t.length;i+=1){var s=e.charToGlyphIndex(t[i]);if(s>0)return e.glyphs.get(s).getMetrics()}return r}function ho(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}var lo=function(e){for(var t,r=[],i=[],s=[],n=[],o=[],a=[],c=[],h=0,l=0,d=0,u=0,p=0,f=0;f<e.glyphs.length;f+=1){var v=e.glyphs.get(f),g=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+f+"): advanceWidth is not a number.");(t>g||void 0===t)&&g>0&&(t=g),h<g&&(h=g);var m=Qn.getUnicodeRange(g);if(m<32)l|=1<<m;else if(m<64)d|=1<<m-32;else if(m<96)u|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<m-96}if(".notdef"!==v.name){var S=v.getMetrics();r.push(S.xMin),i.push(S.yMin),s.push(S.xMax),n.push(S.yMax),a.push(S.leftSideBearing),c.push(S.rightSideBearing),o.push(v.advanceWidth)}}var y={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,s),yMax:Math.max.apply(null,n),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:ho(o),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,c)};y.ascender=e.ascender,y.descender=e.descender;var b=Fn.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),w=Rn.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),E=Bn.make(e.glyphs.length),x=Qn.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:h,ulUnicodeRange1:l,ulUnicodeRange2:d,ulUnicodeRange3:u,ulUnicodeRange4:p,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:co(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:co(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),T=Mn.make(e.glyphs),P=Js.make(e.glyphs),C=e.getEnglishName("fontFamily"),k=e.getEnglishName("fontSubfamily"),O=C+" "+k,A=e.getEnglishName("postScriptName");A||(A=C.replace(/\s/g,"")+"-"+k);var D={};for(var _ in e.names)D[_]=e.names[_];D.uniqueID||(D.uniqueID={en:e.getEnglishName("manufacturer")+":"+O}),D.postScriptName||(D.postScriptName={en:A}),D.preferredFamily||(D.preferredFamily=e.names.fontFamily),D.preferredSubfamily||(D.preferredSubfamily=e.names.fontSubfamily);var F=[],R=$n.make(D,F),M=F.length>0?Ln.make(F):void 0,L=Jn.make(),B=_n.make(e.glyphs,{version:e.getEnglishName("version"),fullName:O,familyName:C,weightName:k,postScriptName:A,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),I=e.metas&&Object.keys(e.metas).length>0?io.make(e.metas):void 0,U=[b,w,E,x,R,P,L,B,T];M&&U.push(M),e.tables.gsub&&U.push(ro.make(e.tables.gsub)),I&&U.push(I);for(var W=ao(U),N=no(W.encode()),G=W.fields,H=!1,V=0;V<G.length;V+=1)if("head table"===G[V].name){G[V].value.checkSumAdjustment=2981146554-N,H=!0;break}if(!H)throw new Error("Could not find head table with checkSum to adjust.");return W};function uo(e,t){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>>1,n=e[s].tag;if(n===t)return s;n<t?r=s+1:i=s-1}return-r-1}function po(e,t){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>>1,n=e[s];if(n===t)return s;n<t?r=s+1:i=s-1}return-r-1}function fo(e,t){for(var r,i=0,s=e.length-1;i<=s;){var n=i+s>>>1,o=(r=e[n]).start;if(o===t)return r;o<t?i=n+1:s=n-1}if(i>0)return t>(r=e[i-1]).end?0:r}function vo(e,t){this.font=e,this.tableName=t}function go(e){vo.call(this,e,"gpos")}function mo(e){vo.call(this,e,"gsub")}function So(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function yo(e,t,r){for(var i=e.subtables,s=0;s<i.length;s++){var n=i[s];if(n.substFormat===t)return n}if(r)return i.push(r),r}function bo(e,t){if(!e)throw t}function wo(e,t,r,i,s){var n;return(t&i)>0?(n=e.parseByte(),t&s||(n=-n),n=r+n):n=(t&s)>0?r:r+e.parseShort(),n}function Eo(e,t,r){var i,s,n=new Zs.Parser(t,r);if(e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)o.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var c=0;c<e.instructionLength;c+=1)e.instructions.push(n.parseByte());var h=o[o.length-1]+1;i=[];for(var l=0;l<h;l+=1)if(s=n.parseByte(),i.push(s),(8&s)>0)for(var d=n.parseByte(),u=0;u<d;u+=1)i.push(s),l+=1;if(bs.argument(i.length===h,"Bad flags."),o.length>0){var p,f=[];if(h>0){for(var v=0;v<h;v+=1)s=i[v],(p={}).onCurve=!!(1&s),p.lastPointOfContour=o.indexOf(v)>=0,f.push(p);for(var g=0,m=0;m<h;m+=1)s=i[m],(p=f[m]).x=wo(n,s,g,2,16),g=p.x;for(var S=0,y=0;y<h;y+=1)s=i[y],(p=f[y]).y=wo(n,s,S,4,32),S=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){i=n.parseUShort();var w={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(w.dx=n.parseShort(),w.dy=n.parseShort()):w.matchedPoints=[n.parseUShort(),n.parseUShort()]:(2&i)>0?(w.dx=n.parseChar(),w.dy=n.parseChar()):w.matchedPoints=[n.parseByte(),n.parseByte()],(8&i)>0?w.xScale=w.yScale=n.parseF2Dot14():(64&i)>0?(w.xScale=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()):(128&i)>0&&(w.xScale=n.parseF2Dot14(),w.scale01=n.parseF2Dot14(),w.scale10=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()),e.components.push(w),b=!!(32&i)}if(256&i){e.instructionLength=n.parseUShort(),e.instructions=[];for(var E=0;E<e.instructionLength;E+=1)e.instructions.push(n.parseByte())}}}function xo(e,t){for(var r=[],i=0;i<e.length;i+=1){var s=e[i],n={x:t.xScale*s.x+t.scale01*s.y+t.dx,y:t.scale10*s.x+t.yScale*s.y+t.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};r.push(n)}return r}function To(e){var t=new ms;if(!e)return t;for(var r=function(e){for(var t=[],r=[],i=0;i<e.length;i+=1){var s=e[i];r.push(s),s.lastPointOfContour&&(t.push(r),r=[])}return bs.argument(0===r.length,"There are still points left in the current contour."),t}(e),i=0;i<r.length;++i){var s=r[i],n=null,o=s[s.length-1],a=s[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(a.onCurve)t.moveTo(a.x,a.y);else{var c={x:.5*(o.x+a.x),y:.5*(o.y+a.y)};t.moveTo(c.x,c.y)}for(var h=0;h<s.length;++h)if(n=o,o=a,a=s[(h+1)%s.length],o.onCurve)t.lineTo(o.x,o.y);else{var l=a;n.onCurve||(o.x,n.x,o.y,n.y),a.onCurve||(l={x:.5*(o.x+a.x),y:.5*(o.y+a.y)}),t.quadraticCurveTo(o.x,o.y,l.x,l.y)}t.closePath()}return t}function Po(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var i=t.components[r],s=e.get(i.glyphIndex);if(s.getPath(),s.points){var n=void 0;if(void 0===i.matchedPoints)n=xo(s.points,i);else{if(i.matchedPoints[0]>t.points.length-1||i.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[i.matchedPoints[0]],a=s.points[i.matchedPoints[1]],c={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};a=xo([a],c)[0],c.dx=o.x-a.x,c.dy=o.y-a.y,n=xo(s.points,c)}t.points=t.points.concat(n)}}return To(t.points)}vo.prototype={searchTag:uo,binSearch:po,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var i=e.scripts[r].tag;if("DFLT"===i)return i;"latn"===i&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var i=r.scripts,s=uo(r.scripts,e);if(s>=0)return i[s].script;if(t){var n={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-s,0,n),n.script}}},getLangSysTable:function(e,t,r){var i=this.getScriptTable(e,r);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var s=uo(i.langSysRecords,t);if(s>=0)return i.langSysRecords[s].langSys;if(r){var n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-s,0,n),n.langSys}}},getFeatureTable:function(e,t,r,i){var s=this.getLangSysTable(e,t,i);if(s){for(var n,o=s.featureIndexes,a=this.font.tables[this.tableName].features,c=0;c<o.length;c++)if((n=a[o[c]]).tag===r)return n.feature;if(i){var h=a.length;return bs.assert(0===h||r>=a[h-1].tag,"Features must be added in alphabetical order."),n={tag:r,feature:{params:0,lookupListIndexes:[]}},a.push(n),o.push(h),n.feature}}},getLookupTables:function(e,t,r,i,s){var n=this.getFeatureTable(e,t,r,s),o=[];if(n){for(var a,c=n.lookupListIndexes,h=this.font.tables[this.tableName].lookups,l=0;l<c.length;l++)(a=h[c[l]]).lookupType===i&&o.push(a);if(0===o.length&&s){a={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=h.length;return h.push(a),c.push(d),[a]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=fo(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=po(e.glyphs,t);return r>=0?r:-1;case 2:var i=fo(e.ranges,t);return i?i.index+t-i.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,i=0;i<r.length;i++)for(var s=r[i],n=s.start,o=s.end,a=n;a<=o;a++)t.push(a);return t}},go.prototype=vo.prototype,go.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},go.prototype.getKerningValue=function(e,t,r){for(var i=0;i<e.length;i++)for(var s=e[i].subtables,n=0;n<s.length;n++){var o=s[n],a=this.getCoverageIndex(o.coverage,t);if(!(a<0))switch(o.posFormat){case 1:for(var c=o.pairSets[a],h=0;h<c.length;h++){var l=c[h];if(l.secondGlyph===r)return l.value1&&l.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(o.classDef1,t),u=this.getGlyphClass(o.classDef2,r),p=o.classRecords[d][u];return p.value1&&p.value1.xAdvance||0}}return 0},go.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},mo.prototype=vo.prototype,mo.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},mo.prototype.getSingle=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,1),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++){var c=o[a],h=this.expandCoverage(c.coverage),l=void 0;if(1===c.substFormat){var d=c.deltaGlyphId;for(l=0;l<h.length;l++){var u=h[l];i.push({sub:u,by:u+d})}}else{var p=c.substitute;for(l=0;l<h.length;l++)i.push({sub:h[l],by:p[l]})}}return i},mo.prototype.getMultiple=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,2),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++){var c=o[a],h=this.expandCoverage(c.coverage),l=void 0;for(l=0;l<h.length;l++){var d=h[l],u=c.sequences[l];i.push({sub:d,by:u})}}return i},mo.prototype.getAlternates=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,3),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++)for(var c=o[a],h=this.expandCoverage(c.coverage),l=c.alternateSets,d=0;d<h.length;d++)i.push({sub:h[d],by:l[d]});return i},mo.prototype.getLigatures=function(e,t,r){for(var i=[],s=this.getLookupTables(t,r,e,4),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++)for(var c=o[a],h=this.expandCoverage(c.coverage),l=c.ligatureSets,d=0;d<h.length;d++)for(var u=h[d],p=l[d],f=0;f<p.length;f++){var v=p[f];i.push({sub:[u].concat(v.components),by:v.ligGlyph})}return i},mo.prototype.addSingle=function(e,t,r,i){var s=yo(this.getLookupTables(r,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});bs.assert(1===s.coverage.format,"Single: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.substitute.splice(o,0,0)),s.substitute[o]=t.by},mo.prototype.addMultiple=function(e,t,r,i){bs.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var s=yo(this.getLookupTables(r,i,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});bs.assert(1===s.coverage.format,"Multiple: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.sequences.splice(o,0,0)),s.sequences[o]=t.by},mo.prototype.addAlternate=function(e,t,r,i){var s=yo(this.getLookupTables(r,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});bs.assert(1===s.coverage.format,"Alternate: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.alternateSets.splice(o,0,0)),s.alternateSets[o]=t.by},mo.prototype.addLigature=function(e,t,r,i){var s=this.getLookupTables(r,i,e,4,!0)[0],n=s.subtables[0];n||(n={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=n),bs.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format);var o=t.sub[0],a=t.sub.slice(1),c={ligGlyph:t.by,components:a},h=this.binSearch(n.coverage.glyphs,o);if(h>=0){for(var l=n.ligatureSets[h],d=0;d<l.length;d++)if(So(l[d].components,a))return;l.push(c)}else h=-1-h,n.coverage.glyphs.splice(h,0,o),n.ligatureSets.splice(h,0,[c])},mo.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r);case"ccmp":return this.getMultiple(e,t,r).concat(this.getLigatures(e,t,r));case"stch":return this.getMultiple(e,t,r)}},mo.prototype.add=function(e,t,r,i){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,i);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,i):this.addAlternate(e,t,r,i);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,i);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,r,i):this.addLigature(e,t,r,i)}};var Co,ko,Oo,Ao,Do={getPath:To,parse:function(e,t,r,i,s){return s.lowMemory?function(e,t,r,i){var s=new un.GlyphSet(i);return i._push=function(n){var o=r[n];o!==r[n+1]?s.push(n,un.ttfGlyphLoader(i,n,Eo,e,t+o,Po)):s.push(n,un.glyphLoader(i,n))},s}(e,t,r,i):function(e,t,r,i){for(var s=new un.GlyphSet(i),n=0;n<r.length-1;n+=1){var o=r[n];o!==r[n+1]?s.push(n,un.ttfGlyphLoader(i,n,Eo,e,t+o,Po)):s.push(n,un.glyphLoader(i,n))}return s}(e,t,r,i)}};function _o(e){this.font=e,this.getCommands=function(e){return Do.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Fo(e){return e}function Ro(e){return Math.sign(e)*Math.round(Math.abs(e))}function Mo(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Lo(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Bo(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Io(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Uo=function(e){var t=this.srPeriod,r=this.srPhase,i=1;return e<0&&(e=-e,i=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*i:e*i},Wo={x:1,y:0,axis:"x",distance:function(e,t,r,i){return(r?e.xo:e.x)-(i?t.xo:t.x)},interpolate:function(e,t,r,i){var s,n,o,a,c,h,l;if(!i||i===this)return s=e.xo-t.xo,n=e.xo-r.xo,c=t.x-t.xo,h=r.x-r.xo,0===(l=(o=Math.abs(s))+(a=Math.abs(n)))?void(e.x=e.xo+(c+h)/2):void(e.x=e.xo+(c*a+h*o)/l);s=i.distance(e,t,!0,!0),n=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(o=Math.abs(s))+(a=Math.abs(n)))?Wo.setRelative(e,e,(c*a+h*o)/l,i,!0):Wo.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,i,s){if(i&&i!==this){var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+r*i.x,c=o+r*i.y;e.x=a+(e.y-c)/i.normalSlope}else e.x=(s?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},No={x:0,y:1,axis:"y",distance:function(e,t,r,i){return(r?e.yo:e.y)-(i?t.yo:t.y)},interpolate:function(e,t,r,i){var s,n,o,a,c,h,l;if(!i||i===this)return s=e.yo-t.yo,n=e.yo-r.yo,c=t.y-t.yo,h=r.y-r.yo,0===(l=(o=Math.abs(s))+(a=Math.abs(n)))?void(e.y=e.yo+(c+h)/2):void(e.y=e.yo+(c*a+h*o)/l);s=i.distance(e,t,!0,!0),n=i.distance(e,r,!0,!0),c=i.distance(t,t,!1,!0),h=i.distance(r,r,!1,!0),0!==(l=(o=Math.abs(s))+(a=Math.abs(n)))?No.setRelative(e,e,(c*a+h*o)/l,i,!0):No.setRelative(e,e,(c+h)/2,i,!0)},normalSlope:0,setRelative:function(e,t,r,i,s){if(i&&i!==this){var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+r*i.x,c=o+r*i.y;e.y=c+i.normalSlope*(e.x-a)}else e.y=(s?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Go(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Ho(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1==(e/=r)&&0===t?Wo:0===e&&1===t?No:new Go(e,t)}function Vo(e,t,r,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Wo),Object.freeze(No),Go.prototype.distance=function(e,t,r,i){return this.x*Wo.distance(e,t,r,i)+this.y*No.distance(e,t,r,i)},Go.prototype.interpolate=function(e,t,r,i){var s,n,o,a,c,h,l;o=i.distance(e,t,!0,!0),a=i.distance(e,r,!0,!0),s=i.distance(t,t,!1,!0),n=i.distance(r,r,!1,!0),0!==(l=(c=Math.abs(o))+(h=Math.abs(a)))?this.setRelative(e,e,(s*h+n*c)/l,i,!0):this.setRelative(e,e,(s+n)/2,i,!0)},Go.prototype.setRelative=function(e,t,r,i,s){i=i||this;var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+r*i.x,c=o+r*i.y,h=i.normalSlope,l=this.slope,d=e.x,u=e.y;e.x=(l*d-h*a+c-u)/(l-h),e.y=l*(e.x-d)+u},Go.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Vo.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Vo.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var zo=Object.freeze(new Vo(0,0)),jo={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function qo(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Wo,this.round=Ro}}function Yo(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new Vo(0,0)}function Xo(e,t){var r,i=e.prog,s=e.ip,n=1;do{if(88===(r=i[++s]))n++;else if(89===r)n--;else if(64===r)s+=i[s+1]+1;else if(65===r)s+=2*i[s+1]+1;else if(r>=176&&r<=183)s+=r-176+1;else if(r>=184&&r<=191)s+=2*(r-184+1);else if(t&&1===n&&27===r)break}while(n>0);e.ip=s}function $o(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function Zo(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Qo(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function Jo(e,t){var r,i,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",n,o),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.pv=t.dpv=Ho(r,i)}function Ko(e,t){var r,i,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",n,o),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.fv=Ho(r,i)}function ea(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function ta(e,t){var r=t.stack.pop(),i=t.z0[r],s=t.fv,n=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var o=n.distance(i,zo);e&&(o=t.round(o)),s.setRelative(i,zo,o,n),s.touch(i),t.rp0=t.rp1=r}function ra(e,t){var r,i,s,n=t.z2,o=n.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<o;a++)r=n[a],e.touched(r)||(i=r.prevTouched(e))!==r&&(i===(s=r.nextTouched(e))&&e.setRelative(r,r,e.distance(i,i,!1,!0),e,!0),e.interpolate(r,i,s,e))}function ia(e,t){for(var r=t.stack,i=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[i],n=t.fv,o=t.pv,a=t.loop,c=t.z2;a--;){var h=r.pop(),l=c[h],d=o.distance(s,s,!1,!0);n.setRelative(l,l,d,o),n.touch(l),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",h)}t.loop=1}function sa(e,t){var r=t.stack,i=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[i],n=t.fv,o=t.pv,a=r.pop(),c=t.z2[t.contours[a]],h=c;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",a);var l=o.distance(s,s,!1,!0);do{h!==s&&n.setRelative(h,h,l,o),h=h.nextPointOnContour}while(h!==c)}function na(e,t){var r,i,s=t.stack,n=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[n],a=t.fv,c=t.pv,h=s.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",h),h){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=c.distance(o,o,!1,!0),d=r.length-2,u=0;u<d;u++)i=r[u],a.setRelative(i,i,l,c)}function oa(e,t){var r=t.stack,i=r.pop()/64,s=r.pop(),n=t.z1[s],o=t.z0[t.rp0],a=t.fv,c=t.pv;a.setRelative(n,o,i,c),a.touch(n),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",i,s),t.rp1=t.rp0,t.rp2=s,e&&(t.rp0=s)}function aa(e,t){var r=t.stack,i=r.pop(),s=r.pop(),n=t.z0[s],o=t.fv,a=t.pv,c=t.cvt[i];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",i,"(",c,")",s);var h=a.distance(n,zo);e&&(Math.abs(h-c)<t.cvCutIn&&(h=c),h=t.round(h)),o.setRelative(n,zo,h,a),0===t.zp0&&(n.xo=n.x,n.yo=n.y),o.touch(n),t.rp0=t.rp1=s}function ca(e,t){var r=t.stack,i=r.pop(),s=t.z2[i];exports.DEBUG&&console.log(t.step,"GC["+e+"]",i),r.push(64*t.dpv.distance(s,zo,e,!1))}function ha(e,t){var r=t.stack,i=r.pop(),s=r.pop(),n=t.z1[i],o=t.z0[s],a=t.dpv.distance(o,n,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",i,s,"->",a),t.stack.push(Math.round(64*a))}function la(e,t){var r=t.stack,i=r.pop(),s=t.fv,n=t.pv,o=t.ppem,a=t.deltaBase+16*(e-1),c=t.deltaShift,h=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",i,r);for(var l=0;l<i;l++){var d=r.pop(),u=r.pop();if(a+((240&u)>>4)===o){var p=(15&u)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",d,"by",p*c);var f=h[d];s.setRelative(f,f,p*c,n)}}}function da(e,t){var r=t.stack,i=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(i/64))}function ua(e,t){var r=t.stack,i=r.pop(),s=t.ppem,n=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",i,r);for(var a=0;a<i;a++){var c=r.pop(),h=r.pop();if(n+((240&h)>>4)===s){var l=(15&h)-8;l>=0&&l++;var d=l*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",c,"by",d),t.cvt[c]+=d}}}function pa(e,t){var r,i,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,o),e?(r=a.y-c.y,i=c.x-a.x):(r=c.x-a.x,i=c.y-a.y),t.dpv=Ho(r,i)}function fa(e,t){var r=t.stack,i=t.prog,s=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var n=0;n<e;n++)r.push(i[++s]);t.ip=s}function va(e,t){var r=t.ip,i=t.prog,s=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var n=0;n<e;n++){var o=i[++r]<<8|i[++r];32768&o&&(o=-(1+(65535^o))),s.push(o)}t.ip=r}function ga(e,t,r,i,s,n){var o,a,c,h,l=n.stack,d=e&&l.pop(),u=l.pop(),p=n.rp0,f=n.z0[p],v=n.z1[u],g=n.minDis,m=n.fv,S=n.dpv;c=(a=o=S.distance(v,f,!0,!0))>=0?1:-1,a=Math.abs(a),e&&(h=n.cvt[d],i&&Math.abs(a-h)<n.cvCutIn&&(a=h)),r&&a<g&&(a=g),i&&(a=n.round(a)),m.setRelative(v,f,c*a,S),m.touch(v),exports.DEBUG&&console.log(n.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(i?"R":"_")+(0===s?"Gr":1===s?"Bl":2===s?"Wh":"")+"]",e?d+"("+n.cvt[d]+","+h+")":"",u,"(d =",o,"->",c*a,")"),n.rp1=n.rp0,n.rp2=u,t&&(n.rp0=u)}function ma(e){this.char=e,this.state={},this.activeState=null}function Sa(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function ya(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function ba(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function wa(e){this.eventId=e,this.subscribers=[]}function Ea(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach((function(e){Object.defineProperty(t.events,e,{value:new wa(e)})})),e&&r.forEach((function(r){var i=e[r];"function"==typeof i&&t.events[r].subscribe(i)})),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function xa(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Ea.call(this,e)}function Ta(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Pa(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function Ca(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function ka(e){return/[A-z]/.test(e)}function Oa(e){this.font=e,this.features={}}function Aa(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function Da(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,i=0;i<r.length;i++){var s=r[i];if(e>=s.start&&e<=s.end){var n=e-s.start;return s.index+n}}break;default:return-1}return-1}function _a(e,t){return-1===Da(e,t.coverage)?null:e+t.deltaGlyphId}function Fa(e,t){var r=Da(e,t.coverage);return-1===r?null:t.substitute[r]}function Ra(e,t){for(var r=[],i=0;i<e.length;i++){var s=e[i],n=t.current,o=Da(n=Array.isArray(n)?n[0]:n,s);-1!==o&&r.push(o)}return r.length!==e.length?-1:r}function Ma(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var i=Ra(t.inputCoverage,e);if(-1===i)return[];var s=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var n=e.lookahead.slice(s);n.length&&Ca(n[0].char);)n.shift();var o=new ba(n,0),a=Ra(t.lookaheadCoverage,o),c=[].concat(e.backtrack);for(c.reverse();c.length&&Ca(c[0].char);)c.shift();if(c.length<t.backtrackCoverage.length)return[];var h=new ba(c,0),l=Ra(t.backtrackCoverage,h),d=[];if(i.length===t.inputCoverage.length&&a.length===t.lookaheadCoverage.length&&l.length===t.backtrackCoverage.length)for(var u=0;u<t.lookupRecords.length;u++)for(var p=t.lookupRecords[u].lookupListIndex,f=this.getLookupByIndex(p),v=0;v<f.subtables.length;v++){var g=f.subtables[v],m=this.getLookupMethod(f,g);if("12"===this.getSubstitutionType(f,g))for(var S=0;S<i.length;S++){var y=m(e.get(S));y&&d.push(y)}}return d}function La(e,t){var r,i=Da(e.current,t.coverage);if(-1===i)return null;for(var s=t.ligatureSets[i],n=0;n<s.length;n++){r=s[n];for(var o=0;o<r.components.length&&e.lookahead[o]===r.components[o];o++)if(o===r.components.length-1)return r}return null}function Ba(e,t){var r=Da(e,t.coverage);return-1===r?null:t.sequences[r]}_o.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,i=this._prepState;if(!i||i.ppem!==t){var s=this._fpgmState;if(!s){qo.prototype=jo,(s=this._fpgmState=new qo("fpgm",r.tables.fpgm)).funcs=[],s.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),s.step=-1);try{ko(s)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}qo.prototype=s,(i=this._prepState=new qo("prep",r.tables.prep)).ppem=t;var n=r.tables.cvt;if(n)for(var o=i.cvt=new Array(n.length),a=t/r.unitsPerEm,c=0;c<n.length;c++)o[c]=n[c]*a;else i.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{ko(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return Oo(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Oo=function(e,t){var r,i,s,n=t.ppem/t.font.unitsPerEm,o=n,a=e.components;if(qo.prototype=t,a){var c=t.font;i=[],r=[];for(var h=0;h<a.length;h++){var l=a[h],d=c.glyphs.get(l.glyphIndex);s=new qo("glyf",d.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+h+"---"),s.step=-1),Ao(d,s,n,o);for(var u=Math.round(l.dx*n),p=Math.round(l.dy*o),f=s.gZone,v=s.contours,g=0;g<f.length;g++){var m=f[g];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+u,m.yo=m.y=m.y+p}var S=i.length;i.push.apply(i,f);for(var y=0;y<v.length;y++)r.push(v[y]+S)}e.instructions&&!s.inhibitGridFit&&((s=new qo("glyf",e.instructions)).gZone=s.z0=s.z1=s.z2=i,s.contours=r,i.push(new Vo(0,0),new Vo(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),s.step=-1),ko(s),i.length-=2)}else s=new qo("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),s.step=-1),Ao(e,s,n,o),i=s.gZone;return i},Ao=function(e,t,r,i){for(var s,n,o,a=e.points||[],c=a.length,h=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[],d=0;d<c;d++)s=a[d],h[d]=new Vo(s.x*r,s.y*i,s.lastPointOfContour,s.onCurve);for(var u=0;u<c;u++)s=h[u],n||(n=s,l.push(u)),s.lastPointOfContour?(s.nextPointOnContour=n,n.prevPointOnContour=s,n=void 0):(o=h[u+1],s.nextPointOnContour=o,o.prevPointOnContour=s);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var p=0;p<c;p++)console.log(p,h[p].x,h[p].y)}if(h.push(new Vo(0,0),new Vo(Math.round(e.advanceWidth*r),0)),ko(t),h.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var f=0;f<c;f++)console.log(f,h[f].x,h[f].y)}}},ko=function(e){var t=e.prog;if(t){var r,i=t.length;for(e.ip=0;e.ip<i;e.ip++){if(exports.DEBUG&&e.step++,!(r=Co[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}},Co=[$o.bind(void 0,No),$o.bind(void 0,Wo),Zo.bind(void 0,No),Zo.bind(void 0,Wo),Qo.bind(void 0,No),Qo.bind(void 0,Wo),Jo.bind(void 0,0),Jo.bind(void 0,1),Ko.bind(void 0,0),Ko.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.pv=e.dpv=Ho(i,r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,i),e.fv=Ho(i,r)},function(e){var t=e.stack,r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){var t=e.stack,r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop(),s=t.pop(),n=t.pop(),o=t.pop(),a=e.z0,c=e.z1,h=a[r],l=a[i],d=c[s],u=c[n],p=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",r,i,s,n,o);var f=h.x,v=h.y,g=l.x,m=l.y,S=d.x,y=d.y,b=u.x,w=u.y,E=(f-g)*(y-w)-(v-m)*(S-b),x=f*m-v*g,T=S*w-y*b;p.x=(x*(S-b)-T*(f-g))/E,p.y=(x*(y-w)-T*(v-m))/E},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||Yo(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||Yo(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||Yo(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||Yo(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=Ro},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Lo},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),Xo(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},ea,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(i)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,i);var s=e.ip,n=e.prog;e.prog=e.funcs[r];for(var o=0;o<i;o++)ko(e),exports.DEBUG&&console.log(++e.step,o+1<i?"next loopcall":"done loopcall",o);e.ip=s,e.prog=n},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,i=e.prog;e.prog=e.funcs[t],ko(e),e.ip=r,e.prog=i,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,i=e.ip,s=t.pop(),n=i;for(exports.DEBUG&&console.log(e.step,"FDEF[]",s);45!==r[++i];);e.ip=i,e.funcs[s]=r.slice(n+1,i)},void 0,ta.bind(void 0,0),ta.bind(void 0,1),ra.bind(void 0,No),ra.bind(void 0,Wo),ia.bind(void 0,0),ia.bind(void 0,1),sa.bind(void 0,0),sa.bind(void 0,1),na.bind(void 0,0),na.bind(void 0,1),function(e){for(var t=e.stack,r=e.loop,i=e.fv,s=t.pop()/64,n=e.z2;r--;){var o=t.pop(),a=n[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",o,s),i.setRelative(a,a,s),i.touch(a)}e.loop=1},function(e){for(var t=e.stack,r=e.rp1,i=e.rp2,s=e.loop,n=e.z0[r],o=e.z1[i],a=e.fv,c=e.dpv,h=e.z2;s--;){var l=t.pop(),d=h[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"IP[]",l,r,"<->",i),a.interpolate(d,n,o,c),a.touch(d)}e.loop=1},oa.bind(void 0,0),oa.bind(void 0,1),function(e){for(var t=e.stack,r=e.rp0,i=e.z0[r],s=e.loop,n=e.fv,o=e.pv,a=e.z1;s--;){var c=t.pop(),h=a[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"ALIGNRP[]",c),n.setRelative(h,i,0,o),n.touch(h)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Mo},aa.bind(void 0,0),aa.bind(void 0,1),function(e){var t=e.prog,r=e.ip,i=e.stack,s=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",s);for(var n=0;n<s;n++)i.push(t[++r]);e.ip=r},function(e){var t=e.ip,r=e.prog,i=e.stack,s=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",s);for(var n=0;n<s;n++){var o=r[++t]<<8|r[++t];32768&o&&(o=-(1+(65535^o))),i.push(o)}e.ip=t},function(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var i=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"WS",i,s),r[s]=i},function(e){var t=e.stack,r=e.store,i=t.pop();exports.DEBUG&&console.log(e.step,"RS",i);var s=r&&r[i]||0;t.push(s)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,i),e.cvt[i]=r/64},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])},ca.bind(void 0,0),ca.bind(void 0,1),void 0,ha.bind(void 0,0),ha.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,i),t.push(i<r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,i),t.push(i<=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,i),t.push(i>r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,i),t.push(i>=r?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,i),t.push(r===i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,i),t.push(r!==i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(Xo(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,i),t.push(r&&i?1:0)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,i),t.push(r||i?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)},la.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,i),t.push(i+r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,i),t.push(i-r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,i),t.push(64*i/r)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,i),t.push(i*r/64)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64))},da.bind(void 0,0),da.bind(void 0,1),da.bind(void 0,2),da.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,i),e.cvt[i]=r*e.ppem/e.font.unitsPerEm},la.bind(void 0,2),la.bind(void 0,3),ua.bind(void 0,1),ua.bind(void 0,2),ua.bind(void 0,3),function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Uo,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Uo,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Fo},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Bo},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Io},ea,ea,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},pa.bind(void 0,0),pa.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),i=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(i=35),32&r&&(i|=4096),t.push(i)},void 0,function(e){var t=e.stack,r=t.pop(),i=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(i),t.push(r),t.push(s)},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,i),t.push(Math.max(i,r))},function(e){var t=e.stack,r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,i),t.push(Math.min(i,r))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,fa.bind(void 0,1),fa.bind(void 0,2),fa.bind(void 0,3),fa.bind(void 0,4),fa.bind(void 0,5),fa.bind(void 0,6),fa.bind(void 0,7),fa.bind(void 0,8),va.bind(void 0,1),va.bind(void 0,2),va.bind(void 0,3),va.bind(void 0,4),va.bind(void 0,5),va.bind(void 0,6),va.bind(void 0,7),va.bind(void 0,8),ga.bind(void 0,0,0,0,0,0),ga.bind(void 0,0,0,0,0,1),ga.bind(void 0,0,0,0,0,2),ga.bind(void 0,0,0,0,0,3),ga.bind(void 0,0,0,0,1,0),ga.bind(void 0,0,0,0,1,1),ga.bind(void 0,0,0,0,1,2),ga.bind(void 0,0,0,0,1,3),ga.bind(void 0,0,0,1,0,0),ga.bind(void 0,0,0,1,0,1),ga.bind(void 0,0,0,1,0,2),ga.bind(void 0,0,0,1,0,3),ga.bind(void 0,0,0,1,1,0),ga.bind(void 0,0,0,1,1,1),ga.bind(void 0,0,0,1,1,2),ga.bind(void 0,0,0,1,1,3),ga.bind(void 0,0,1,0,0,0),ga.bind(void 0,0,1,0,0,1),ga.bind(void 0,0,1,0,0,2),ga.bind(void 0,0,1,0,0,3),ga.bind(void 0,0,1,0,1,0),ga.bind(void 0,0,1,0,1,1),ga.bind(void 0,0,1,0,1,2),ga.bind(void 0,0,1,0,1,3),ga.bind(void 0,0,1,1,0,0),ga.bind(void 0,0,1,1,0,1),ga.bind(void 0,0,1,1,0,2),ga.bind(void 0,0,1,1,0,3),ga.bind(void 0,0,1,1,1,0),ga.bind(void 0,0,1,1,1,1),ga.bind(void 0,0,1,1,1,2),ga.bind(void 0,0,1,1,1,3),ga.bind(void 0,1,0,0,0,0),ga.bind(void 0,1,0,0,0,1),ga.bind(void 0,1,0,0,0,2),ga.bind(void 0,1,0,0,0,3),ga.bind(void 0,1,0,0,1,0),ga.bind(void 0,1,0,0,1,1),ga.bind(void 0,1,0,0,1,2),ga.bind(void 0,1,0,0,1,3),ga.bind(void 0,1,0,1,0,0),ga.bind(void 0,1,0,1,0,1),ga.bind(void 0,1,0,1,0,2),ga.bind(void 0,1,0,1,0,3),ga.bind(void 0,1,0,1,1,0),ga.bind(void 0,1,0,1,1,1),ga.bind(void 0,1,0,1,1,2),ga.bind(void 0,1,0,1,1,3),ga.bind(void 0,1,1,0,0,0),ga.bind(void 0,1,1,0,0,1),ga.bind(void 0,1,1,0,0,2),ga.bind(void 0,1,1,0,0,3),ga.bind(void 0,1,1,0,1,0),ga.bind(void 0,1,1,0,1,1),ga.bind(void 0,1,1,0,1,2),ga.bind(void 0,1,1,0,1,3),ga.bind(void 0,1,1,1,0,0),ga.bind(void 0,1,1,1,0,1),ga.bind(void 0,1,1,1,0,2),ga.bind(void 0,1,1,1,0,3),ga.bind(void 0,1,1,1,1,0),ga.bind(void 0,1,1,1,1,1),ga.bind(void 0,1,1,1,1,2),ga.bind(void 0,1,1,1,1,3)],ma.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},ma.prototype.getState=function(e){return this.state[e]||null},xa.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},xa.prototype.composeRUD=function(e){var t=this,r=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),i=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter((function(e){return!i(e)}))])},xa.prototype.replaceRange=function(e,t,r,i){t=null!==t?t:this.tokens.length;var s=r.every((function(e){return e instanceof ma}));if(!isNaN(e)&&this.inboundIndex(e)&&s){var n=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return i||this.dispatch("replaceToken",[e,t,r]),[n,r]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},xa.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof ma){var i=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[i[0],t]}return{FAIL:"replaceToken: invalid token or index."}},xa.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var i=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[i,e,t]),i},xa.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}return{FAIL:"removeToken: invalid token index."}},xa.prototype.insertToken=function(e,t,r){return e.every((function(e){return e instanceof ma}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},xa.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe((function(i,s){var n=[i,s],o=[i,s];if(null===t||!0===t.apply(this,n)){var a=r.apply(this,o);i.setState(e,a)}})),this.registeredModifiers.push(e)},wa.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},wa.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},ba.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},ba.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},xa.prototype.rangeToText=function(e){if(e instanceof Sa)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},xa.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},xa.prototype.getContext=function(e){return this.registeredContexts[e]||null},xa.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},xa.prototype.dispatch=function(e,t){var r=this,i=this.events[e];i instanceof wa&&i.subscribers.forEach((function(e){e.apply(r,t||[])}))},xa.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof r)return{FAIL:"missing context end check."};var i=new ya(e,t,r);return this.registeredContexts[e]=i,this.contextCheckers.push(i),i},xa.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},xa.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},xa.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)e.hasOwnProperty(t)&&(e[t].ranges=[])},xa.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var r=new ba(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},xa.prototype.setEndOffset=function(e,t){var r=new Sa(this.getContext(t).openRange.startIndex,e,t),i=this.getContext(t).ranges;return r.rangeId=t+"."+i.length,i.push(r),this.getContext(t).openRange=null,r},xa.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach((function(i){var s=i.contextName,n=t.getContext(s).openRange;if(!n&&i.checkStart(e)&&(n=new Sa(r,null,s),t.getContext(s).openRange=n,t.dispatch("contextStart",[s,r])),n&&i.checkEnd(e)){var o=r-n.startIndex+1,a=t.setEndOffset(o,s);t.dispatch("contextEnd",[s,a])}}))},xa.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var i=t[r],s=new ba(t,r);this.dispatch("next",[s]),this.runContextCheck(s);var n=new ma(i);this.tokens.push(n),this.dispatch("newToken",[n,s])}return this.dispatch("end",[this.tokens]),this.tokens},Oa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if("DFLT"===r.tag)return r.script.defaultLangSys.featureIndexes}return[]},Oa.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===e&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var n=0;n<s.length;n++){var o=s[n];if(o.tag===e)return o.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Oa.prototype.mapTagsToFeatures=function(e,t){for(var r={},i=0;i<e.length;i++){var s=e[i].tag,n=e[i].feature;r[s]=n}this.features[t].tags=r},Oa.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var i=this.font.tables.gsub;return t=r.map((function(e){return i.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Oa.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Oa.prototype.getLookupMethod=function(e,t){var r=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return _a.apply(r,[e,t])};case"12":return function(e){return Fa.apply(r,[e,t])};case"63":return function(e){return Ma.apply(r,[e,t])};case"41":return function(e){return La.apply(r,[e,t])};case"21":return function(e){return Ba.apply(r,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Oa.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,i=this.getFeature({tag:e.tag,script:e.script});if(!i)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var s=this.getFeatureLookups(i),n=[].concat(t.context),o=0;o<s.length;o++)for(var a=s[o],c=this.getLookupSubtables(a),h=0;h<c.length;h++){var l=c[h],d=this.getSubstitutionType(a,l),u=this.getLookupMethod(a,l),p=void 0;switch(d){case"11":(p=u(t.current))&&n.splice(r,1,new Aa({id:11,tag:e.tag,substitution:p}));break;case"12":(p=u(t.current))&&n.splice(r,1,new Aa({id:12,tag:e.tag,substitution:p}));break;case"63":p=u(t),Array.isArray(p)&&p.length&&n.splice(r,1,new Aa({id:63,tag:e.tag,substitution:p}));break;case"41":(p=u(t))&&n.splice(r,1,new Aa({id:41,tag:e.tag,substitution:p}));break;case"21":(p=u(t.current))&&n.splice(r,1,new Aa({id:21,tag:e.tag,substitution:p}))}t=new ba(n,r),Array.isArray(p)&&!p.length||(p=null)}return n.length?n:null},Oa.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&r},Oa.prototype.getLookupSubtables=function(e){return e.subtables||null},Oa.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Oa.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Oa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var Ia={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&Ta(t)||!Ta(r)&&Ta(t)},endCheck:function(e){var t=e.get(1);return null===t||!Ta(t)}},Ua={startCheck:function(e){var t=e.current,r=e.get(-1);return(Ta(t)||Ca(t))&&!Ta(r)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!Ta(t)&&!Ca(t):var r=/\s/.test(t);if(!r)return!0;if(r)if(!e.lookahead.some((function(e){return Ta(e)||Ca(e)})))return!0;break;default:return!1}}},Wa={11:function(e,t,r){t[r].setState(e.tag,e.substitution)},12:function(e,t,r){t[r].setState(e.tag,e.substitution)},63:function(e,t,r){e.substitution.forEach((function(i,s){t[r+s].setState(e.tag,i)}))},41:function(e,t,r){var i=t[r];i.setState(e.tag,e.substitution.ligGlyph);for(var s=e.substitution.components.length,n=0;n<s;n++)(i=t[r+n+1]).setState("deleted",!0)}};function Na(e,t,r){e instanceof Aa&&Wa[e.id]&&Wa[e.id](e,t,r)}function Ga(e){var t=this,r="arab",i=this.featuresTags[r],s=this.tokenizer.getRangeTokens(e);if(1!==s.length){var n=new ba(s.map((function(e){return e.getState("glyphIndex")})),0),o=new ba(s.map((function(e){return e.char})),0);s.forEach((function(e,a){if(!Ca(e.char)){n.setCurrentIndex(a),o.setCurrentIndex(a);var c,h=0;switch(function(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var i=t[r],s=Pa(i),n=Ca(i);if(!s&&!n)return!0;if(s)return!1}return!1}(o)&&(h|=1),function(e){if(Pa(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!Ca(e.lookahead[t]))return!0;return!1}(o)&&(h|=2),h){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi"}if(-1!==i.indexOf(c)){var l=t.query.lookupFeature({tag:c,script:r,contextParams:n});if(l instanceof Error)return console.info(l.message);l.forEach((function(e,t){e instanceof Aa&&(Na(e,s,t),n.context[t]=e.substitution)}))}}}))}}function Ha(e,t){return new ba(e.map((function(e){return e.activeState.value})),t||0)}function Va(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=Ha(r);i.context.forEach((function(e,s){i.setCurrentIndex(s);var n=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:i});n.length&&(n.forEach((function(e){return Na(e,r,s)})),i=Ha(r))}))}var za={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&ka(t)||!ka(r)&&ka(t)},endCheck:function(e){var t=e.get(1);return null===t||!ka(t)}};function ja(e,t){return new ba(e.map((function(e){return e.activeState.value})),t||0)}function qa(e){var t=this,r=this.tokenizer.getRangeTokens(e),i=ja(r);i.context.forEach((function(e,s){i.setCurrentIndex(s);var n=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:i});n.length&&(n.forEach((function(e){return Na(e,r,s)})),i=ja(r))}))}function Ya(e){this.baseDir=e||"ltr",this.tokenizer=new xa,this.featuresTags={}}function Xa(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function $a(){return Xa.call(this,"latinWord"),Xa.call(this,"arabicWord"),Xa.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Za(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var r=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())}))}function Qa(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Ja(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(Qa.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Ga.call(e,t)})))}function Ka(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("rlig")&&(Qa.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Va.call(e,t)})))}function ec(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("liga")&&(Qa.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){qa.call(e,t)})))}function tc(e){(e=e||{}).tables=e.tables||{},e.empty||(bo(e.familyName,"When creating a new Font object, familyName is required."),bo(e.styleName,"When creating a new Font object, styleName is required."),bo(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),bo(e.ascender,"When creating a new Font object, ascender is required."),bo(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new un.GlyphSet(this,e.glyphs||[]),this.encoding=new sn(this),this.position=new go(this),this.substitution=new mo(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new _o(this):void 0}})}function rc(e,t){var r=JSON.stringify(e),i=256;for(var s in t){var n=parseInt(s);if(n&&!(n<256)){if(JSON.stringify(t[s])===r)return n;i<=n&&(i=n+1)}}return t[i]=e,i}function ic(e,t,r){var i=rc(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function sc(e,t,r){var i={},s=new Zs.Parser(e,t);return i.tag=s.parseTag(),i.minValue=s.parseFixed(),i.defaultValue=s.parseFixed(),i.maxValue=s.parseFixed(),s.skip("uShort",1),i.name=r[s.parseUShort()]||{},i}function nc(e,t,r,i){for(var s=[{name:"nameID_"+e,type:"USHORT",value:rc(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],n=0;n<r.length;++n){var o=r[n].tag;s.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return s}function oc(e,t,r,i){var s={},n=new Zs.Parser(e,t);s.name=i[n.parseUShort()]||{},n.skip("uShort",1),s.coordinates={};for(var o=0;o<r.length;++o)s.coordinates[r[o].tag]=n.parseFixed();return s}Ya.prototype.setText=function(e){this.text=e},Ya.prototype.contextChecks={latinWordCheck:za,arabicWordCheck:Ia,arabicSentenceCheck:Ua},Ya.prototype.registerFeatures=function(e,t){var r=this,i=t.filter((function(t){return r.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(i):this.featuresTags[e]=i},Ya.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Oa(e));for(var r=0;r<t.length;r++){var i=t[r];this.query.supports({script:i.script})&&this.registerFeatures(i.script,i.tags)}},Ya.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)},Ya.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},Ya.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Ja.call(this),Ka.call(this)),this.checkContextReady("latinWord")&&ec.call(this),this.checkContextReady("arabicSentence")&&Za.call(this)},Ya.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),$a.call(this),this.applyFeaturesToContexts())},Ya.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},Ya.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var i=this.tokenizer.tokens[r];if(!i.state.deleted){var s=i.activeState.value;t.push(Array.isArray(s)?s[0]:s)}}return t},tc.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},tc.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},tc.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},tc.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},tc.prototype.stringToGlyphs=function(e,t){var r=this,i=new Ya;i.registerModifier("glyphIndex",null,(function(e){return r.charToGlyphIndex(e.char)}));var s=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;i.applyFeatures(this,s);for(var n=i.getTextGlyphs(e),o=n.length,a=new Array(o),c=this.glyphs.get(0),h=0;h<o;h+=1)a[h]=this.glyphs.get(n[h])||c;return a},tc.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},tc.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},tc.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},tc.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},tc.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},tc.prototype.forEachGlyph=function(e,t,r,i,s,n){t=void 0!==t?t:0,r=void 0!==r?r:0,i=void 0!==i?i:72,s=Object.assign({},this.defaultRenderOptions,s);var o,a=1/this.unitsPerEm*i,c=this.stringToGlyphs(e,s);if(s.kerning){var h=s.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(h,s.language)}for(var l=0;l<c.length;l+=1){var d=c[l];n.call(this,d,t,r,i,s),d.advanceWidth&&(t+=d.advanceWidth*a),s.kerning&&l<c.length-1&&(t+=(o?this.position.getKerningValue(o,d.index,c[l+1].index):this.getKerningValue(d,c[l+1]))*a),s.letterSpacing?t+=s.letterSpacing*i:s.tracking&&(t+=s.tracking/1e3*i)}return t},tc.prototype.getPath=function(e,t,r,i,s){var n=new ms;return this.forEachGlyph(e,t,r,i,s,(function(e,t,r,i){var o=e.getPath(t,r,i,s,this);n.extend(o)})),n},tc.prototype.getPaths=function(e,t,r,i,s){var n=[];return this.forEachGlyph(e,t,r,i,s,(function(e,t,r,i){var o=e.getPath(t,r,i,s,this);n.push(o)})),n},tc.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,(function(){}))},tc.prototype.draw=function(e,t,r,i,s,n){this.getPath(t,r,i,s,n).draw(e)},tc.prototype.drawPoints=function(e,t,r,i,s,n){this.forEachGlyph(t,r,i,s,n,(function(t,r,i,s){t.drawPoints(e,r,i,s)}))},tc.prototype.drawMetrics=function(e,t,r,i,s,n){this.forEachGlyph(t,r,i,s,n,(function(t,r,i,s){t.drawMetrics(e,r,i,s)}))},tc.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},tc.prototype.validate=function(){var e=this;function t(t){var r=e.getEnglishName(t);r&&r.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},tc.prototype.toTables=function(){return lo(this)},tc.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},tc.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t},tc.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),i=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+i+".otf";var s=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var n=new DataView(s),o=new Blob([n],{type:"font/opentype"}),a=document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=e;var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),a.dispatchEvent(c)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=r(256),l=function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),i=0;i<t.length;++i)t[i]=r[i];return t}(s);h.writeFileSync(e,l)}},tc.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},tc.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},tc.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ac={make:function(e,t){var r=new Hs.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var i=0;i<e.axes.length;i++)r.fields=r.fields.concat(ic(i,e.axes[i],t));for(var s=0;s<e.instances.length;s++)r.fields=r.fields.concat(nc(s,e.instances[s],e.axes,t));return r},parse:function(e,t,r){var i=new Zs.Parser(e,t),s=i.parseULong();bs.argument(65536===s,"Unsupported fvar table version.");var n=i.parseOffset16();i.skip("uShort",1);for(var o=i.parseUShort(),a=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),l=[],d=0;d<o;d++)l.push(sc(e,t+n+d*a,r));for(var u=[],p=t+n+o*a,f=0;f<c;f++)u.push(oc(e,p+f*h,l,r));return{axes:l,instances:u}}},cc=function(){return{coverage:this.parsePointer(Xs.coverage),attachPoints:this.parseList(Xs.pointer(Xs.uShortList))}},hc=function(){var e=this.parseUShort();return bs.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},lc=function(){return this.parseList(Xs.pointer(hc))},dc=function(){return{coverage:this.parsePointer(Xs.coverage),ligGlyphs:this.parseList(Xs.pointer(lc))}},uc=function(){return this.parseUShort(),this.parseList(Xs.pointer(Xs.coverage))},pc={parse:function(e,t){var r=new Xs(e,t=t||0),i=r.parseVersion(1);bs.argument(1===i||1.2===i||1.3===i,"Unsupported GDEF table version.");var s={version:i,classDef:r.parsePointer(Xs.classDef),attachList:r.parsePointer(cc),ligCaretList:r.parsePointer(dc),markAttachClassDef:r.parsePointer(Xs.classDef)};return i>=1.2&&(s.markGlyphSets=r.parsePointer(uc)),s}},fc=new Array(10);fc[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(Xs.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(Xs.coverage),values:this.parseValueRecordList()}:void bs.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},fc[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();bs.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(Xs.coverage),i=this.parseUShort(),s=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(Xs.pointer(Xs.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))))};if(2===t){var n=this.parsePointer(Xs.classDef),o=this.parsePointer(Xs.classDef),a=this.parseUShort(),c=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,classDef1:n,classDef2:o,class1Count:a,class2Count:c,classRecords:this.parseList(a,Xs.list(c,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))}}},fc[3]=function(){return{error:"GPOS Lookup 3 not supported"}},fc[4]=function(){return{error:"GPOS Lookup 4 not supported"}},fc[5]=function(){return{error:"GPOS Lookup 5 not supported"}},fc[6]=function(){return{error:"GPOS Lookup 6 not supported"}},fc[7]=function(){return{error:"GPOS Lookup 7 not supported"}},fc[8]=function(){return{error:"GPOS Lookup 8 not supported"}},fc[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var vc=new Array(10),gc={parse:function(e,t){var r=new Xs(e,t=t||0),i=r.parseVersion(1);return bs.argument(1===i||1.1===i,"Unsupported GPOS table version "+i),1===i?{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(fc)}:{version:i,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(fc),variations:r.parseFeatureVariationsList()}},make:function(e){return new Hs.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Hs.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Hs.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Hs.LookupList(e.lookups,vc)}])}},mc={parse:function(e,t){var r=new Zs.Parser(e,t),i=r.parseUShort();if(0===i)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();bs.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var s=0;s<i;s+=1){var n=e.parseUShort(),o=e.parseUShort(),a=e.parseShort();t[n+","+o]=a}return t}(r);if(1===i)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0===r){var i=e.parseUShort();e.skip("uShort",3);for(var s=0;s<i;s+=1){var n=e.parseUShort(),o=e.parseUShort(),a=e.parseShort();t[n+","+o]=a}}return t}(r);throw new Error("Unsupported kern table version ("+i+").")}},Sc={parse:function(e,t,r,i){for(var s=new Zs.Parser(e,t),n=i?s.parseUShort:s.parseULong,o=[],a=0;a<r+1;a+=1){var c=n.call(s);i&&(c*=2),o.push(c)}return o}};function yc(e,t){r(256).readFile(e,(function(e,r){if(e)return t(e.message);t(null,function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;++i)r[i]=e[i];return t}(r))}))}function bc(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function wc(e,t){for(var r=[],i=12,s=0;s<t;s+=1){var n=Zs.getTag(e,i),o=Zs.getULong(e,i+4),a=Zs.getULong(e,i+8),c=Zs.getULong(e,i+12);r.push({tag:n,checksum:o,offset:a,length:c,compression:!1}),i+=16}return r}function Ec(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if(fs(r,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function xc(e,t){var r,i;t=null==t?{}:t;var s,n,o,a,c,h,l,d,u,p,f,v,g,m=new tc({empty:!0}),S=new DataView(e,0),y=[],b=Zs.getTag(S,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)m.outlinesFormat="truetype",y=wc(S,s=Zs.getUShort(S,4));else if("OTTO"===b)m.outlinesFormat="cff",y=wc(S,s=Zs.getUShort(S,4));else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var w=Zs.getTag(S,4);if(w===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+b);m.outlinesFormat="cff"}y=function(e,t){for(var r=[],i=44,s=0;s<t;s+=1){var n,o=Zs.getTag(e,i),a=Zs.getULong(e,i+4),c=Zs.getULong(e,i+8),h=Zs.getULong(e,i+12);n=c<h&&"WOFF",r.push({tag:o,offset:a,compression:n,compressedLength:c,length:h}),i+=20}return r}(S,s=Zs.getUShort(S,12))}for(var E=0;E<s;E+=1){var x=y[E],T=void 0;switch(x.tag){case"cmap":T=Ec(S,x),m.tables.cmap=Js.parse(T.data,T.offset),m.encoding=new nn(m.tables.cmap);break;case"cvt ":T=Ec(S,x),g=new Zs.Parser(T.data,T.offset),m.tables.cvt=g.parseShortList(x.length/2);break;case"fvar":o=x;break;case"fpgm":T=Ec(S,x),g=new Zs.Parser(T.data,T.offset),m.tables.fpgm=g.parseByteList(x.length);break;case"head":T=Ec(S,x),m.tables.head=Fn.parse(T.data,T.offset),m.unitsPerEm=m.tables.head.unitsPerEm,r=m.tables.head.indexToLocFormat;break;case"hhea":T=Ec(S,x),m.tables.hhea=Rn.parse(T.data,T.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":d=x;break;case"ltag":T=Ec(S,x),i=Ln.parse(T.data,T.offset);break;case"maxp":T=Ec(S,x),m.tables.maxp=Bn.parse(T.data,T.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":f=x;break;case"OS/2":T=Ec(S,x),m.tables.os2=Qn.parse(T.data,T.offset);break;case"post":T=Ec(S,x),m.tables.post=Jn.parse(T.data,T.offset),m.glyphNames=new an(m.tables.post);break;case"prep":T=Ec(S,x),g=new Zs.Parser(T.data,T.offset),m.tables.prep=g.parseByteList(x.length);break;case"glyf":a=x;break;case"loca":p=x;break;case"CFF ":n=x;break;case"kern":u=x;break;case"GDEF":c=x;break;case"GPOS":h=x;break;case"GSUB":l=x;break;case"meta":v=x}}var P=Ec(S,f);if(m.tables.name=$n.parse(P.data,P.offset,i),m.names=m.tables.name,a&&p){var C=0===r,k=Ec(S,p),O=Sc.parse(k.data,k.offset,m.numGlyphs,C),A=Ec(S,a);m.glyphs=Do.parse(A.data,A.offset,O,m,t)}else{if(!n)throw new Error("Font doesn't contain TrueType or CFF outlines.");var D=Ec(S,n);_n.parse(D.data,D.offset,m,t)}var _=Ec(S,d);if(Mn.parse(m,_.data,_.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),function(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),i=0;i<r.length;i+=1){var s=r[i],n=t[s];void 0===e._IndexToUnicodeMap[n]?e._IndexToUnicodeMap[n]={unicodes:[parseInt(s)]}:e._IndexToUnicodeMap[n].unicodes.push(parseInt(s))}}(e):function(e){for(var t,r=e.tables.cmap.glyphIndexMap,i=Object.keys(r),s=0;s<i.length;s+=1){var n=i[s],o=r[n];(t=e.glyphs.get(o)).addUnicode(parseInt(n))}for(var a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?e.isCIDFont?t.name="gid"+a:t.name=e.cffEncoding.charset[a]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(a))}(e)}(m,t),u){var F=Ec(S,u);m.kerningPairs=mc.parse(F.data,F.offset)}else m.kerningPairs={};if(c){var R=Ec(S,c);m.tables.gdef=pc.parse(R.data,R.offset)}if(h){var M=Ec(S,h);m.tables.gpos=gc.parse(M.data,M.offset),m.position.init()}if(l){var L=Ec(S,l);m.tables.gsub=ro.parse(L.data,L.offset)}if(o){var B=Ec(S,o);m.tables.fvar=ac.parse(B.data,B.offset,m.names)}if(v){var I=Ec(S,v);m.tables.meta=io.parse(I.data,I.offset),m.metas=m.tables.meta}return m}class Tc{constructor(e,t,r,i){this.fonts=[],this.occtService=e,this.dependencies=t,this.occ=r,this.vectorHelper=i}loadFonts(e){return t=this,r=void 0,s=function*(){return new Promise(((t,r)=>{try{void 0!==e&&Array.isArray(e)&&0===e.length&&t({});const r=e?yi.filter((t=>e.includes(t.key))):yi,i=r.reduce(((e,t)=>e+t.variants.length),0);let s=0;r.forEach((e=>{e.variants.forEach((r=>{const n=e.key,o=`${n}-${r}`;!function(e,t,r){r=null==r?{}:r;var i="undefined"!=typeof window||r.isUrl?bc:yc;new Promise((function(s,n){i(e,(function(e,i){if(e){if(t)return t(e);n(e)}var o;try{o=xc(i,r)}catch(e){if(t)return t(e,null);n(e)}if(t)return t(null,o);s(o)}))}))}(`https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.3/fonts/${n}/${o}.ttf`,((e,a)=>{e||(this.fonts.push({name:o,type:n,variant:r,font:a}),s++,s===i&&t({}))}),{isUrl:!0})}))}))}catch(e){r(e)}}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(o,a)}c((s=s.apply(t,r||[])).next())}));var t,r,i,s}text3d(e){return qi(e,this.occtService,this.fonts,this.occ)}text3dFace(t){return function(t,r,i,s,n,o){if(!o.text3dFace)throw new Error("Could not compute, to use Text 3D Face algorithm you must be subscribed to our silver or gold plan.");try{const a=`\n            ${o.text3dFace}\n        `,c=new Function(a),h={name:"text3dFace"};return c.apply({inputs:t,occt:r,fonts:i,occ:s,vectorHelper:n,Inputs:e,Advanced:re,ShapeParser:nt,text3d:qi,method:h})}catch(e){throw new Error(e)}}(t,this.occtService,this.fonts,this.occ,this.vectorHelper,this.dependencies)}texts3dFace(t){return function(t,r,i,s,n,o){if(!o.text3dFace)throw new Error("Could not compute, to use Texts 3D Face algorithm you must be subscribed to our silver or gold plan.");try{const a=`\n            ${o.text3dFace}\n        `,c=new Function(a),h={name:"texts3dFace"};return c.apply({inputs:t,occt:r,fonts:i,occ:s,vectorHelper:n,Inputs:e,Advanced:re,ShapeParser:nt,text3d:qi,method:h})}catch(e){throw new Error(e)}}(t,this.occtService,this.fonts,this.occ,this.vectorHelper,this.dependencies)}pyramidSimple(t){return function(t,r,i,s,n){if(function(e){let t;if(["uNumber","vNumber","height","precision"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!n.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple algorithm you must be subscribed to our silver or gold plan.");try{const o=`\n            ${n.patternsFacePatternPyramidSimple}\n        `,a=new Function(o),c={name:"pyramidSimple"};return a.apply({inputs:t,occt:r,occ:i,vectorHelper:s,Inputs:e,Advanced:re,ShapeParser:nt,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}pyramidSimpleAffectors(t){return function(t,r,i,s,n){if(function(e){let t;if(["uNumber","vNumber","defaultHeight","affectMinHeight","affectMaxHeight","precision"].forEach((r=>{isNaN(e[r])&&(t=`"${r}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!n.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple Affectors algorithm you must be subscribed to our silver or gold plan.");try{const o=`\n            ${n.patternsFacePatternPyramidSimple}\n        `,a=new Function(o),c={name:"pyramidSimpleAffectors"};return a.apply({inputs:t,occt:r,occ:i,vectorHelper:s,Inputs:e,Advanced:re,ShapeParser:nt,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}}class Pc{constructor(e){this.dependencies={serenitySwirl:void 0};const t=new se,r=new ie,i=new Cc;this.occtService=new st(e,new Ze(t,r,e)),this.advanced=new Tc(this.occtService,this.dependencies,e,t),this.things=new ji(this.occtService,this.advanced,this.dependencies,i)}}class Cc{constructor(){this.geometryHelper=new ze,this.math=new Ue,this.vector=new He(this.math,this.geometryHelper),this.logic=new Ie,this.lists=new Be}}var kc=function(){return kc=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},kc.apply(this,arguments)},Oc=function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},Ac=function(e,t){var r,i,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(o=0)),o;)try{if(r=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};addEventListener("message",(function(e){var t,r,i,s,n,o,a,c,h,l,d,u=e.data;"initialise"===u.type?(t={},r=t.mainJS,i=void 0===r?ct:r,s=t.mainWasm,n=void 0===s?"https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.3/wasm/bitbybit-dev-occt.90cf0714.wasm":s,o=t.worker,a=void 0===o?void 0:o,c=t.libs,h=void 0===c?[]:c,l=t.module,d=void 0===l?{}:l,new Promise((function(e,t){new i(kc({locateFile:function(e){return e.endsWith(".wasm")?n:e.endsWith(".worker.js")&&a?a:e}},d)).then((function(t){return Oc(void 0,void 0,void 0,(function(){var r,i,s;return Ac(this,(function(n){switch(n.label){case 0:r=0,i=h,n.label=1;case 1:return r<i.length?(s=i[r],[4,t.loadDynamicLibrary(s,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!1})]):[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return e(t),[2]}}))}))}))}))).then((function(e){return Oc(void 0,void 0,void 0,(function(){var t,r;return Ac(this,(function(i){switch(i.label){case 0:t=new Pc(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.advanced.loadFonts(u.loadFonts)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),console.error(r),[3,4];case 4:return((e,t,r)=>{dt=new ht(e);const i=new se,s=new ie;lt=new st(e,new Ze(i,s,e)),t&&(lt.plugins=t,ut&&Object.keys(ut).forEach((e=>{lt.plugins.dependencies[e]=ut[e]}))),postMessage("occ-initialised")})(e,t),postMessage("occ-initialised"),[2]}}))}))})):((e,t)=>{let r;t("busy");try{if("shapeToMesh"!==e.action.functionName&&"shapesToMeshes"!==e.action.functionName&&"deleteShape"!==e.action.functionName&&"deleteShapes"!==e.action.functionName&&"startedTheRun"!==e.action.functionName&&"cleanAllCache"!==e.action.functionName&&"addOc"!==e.action.functionName&&"saveShapeSTEP"!==e.action.functionName){Object.keys(e.action.inputs).forEach((t=>{const r=e.action.inputs[t];r&&r.type&&"occ-shape"===r.type&&r.hash&&(e.action.inputs[t]=dt.checkCache(e.action.inputs[t].hash)),r&&Array.isArray(r)&&r.length>0&&(r[0].type&&"occ-shape"===r[0].type&&r[0].hash?e.action.inputs[t]=e.action.inputs[t].map((e=>dt.checkCache(e.hash))):Array.isArray(r[0])&&r[0][0].type&&"occ-shape"===r[0][0].type&&r[0][0].hash&&(e.action.inputs[t]=e.action.inputs[t].map((e=>e.map((e=>dt.checkCache(e.hash)))))))}));const t=e.action.functionName.split(".");let i;if(i=3===t.length?dt.cacheOp(e.action,(()=>lt[t[0]][t[1]][t[2]](e.action.inputs))):2===t.length?dt.cacheOp(e.action,(()=>lt[t[0]][t[1]](e.action.inputs))):dt.cacheOp(e.action,(()=>lt[e.action.functionName](e.action.inputs))),dt.isOCCTObject(i))r=Array.isArray(i)?i.map((e=>({hash:e.hash,type:"occ-shape"}))):{hash:i.hash,type:"occ-shape"};else if(i.compound&&i.data&&i.shapes&&i.shapes.length>0){const e=i;e.shapes=e.shapes.map((e=>({id:e.id,shape:{hash:e.shape.hash,type:"occ-shape"}}))),e.compound={hash:e.compound.hash,type:"occ-shape"},r=e}else r=i}if("saveShapeSTEP"===e.action.functionName&&(e.action.inputs.shape=dt.checkCache(e.action.inputs.shape.hash),r=lt.io.saveShapeSTEP(e.action.inputs)),"addOc"===e.action.functionName&&(lt&&lt.plugins?Object.keys(e.action.inputs).forEach((t=>{lt.plugins.dependencies[t]=e.action.inputs[t]})):ut=e.action.inputs),"shapeToMesh"===e.action.functionName&&(e.action.inputs.shape=dt.checkCache(e.action.inputs.shape.hash),r=lt.shapeToMesh(e.action.inputs)),"shapesToMeshes"===e.action.functionName){if(!(e.action.inputs.shapes&&e.action.inputs.shapes.length>0))throw new Error("No shapes detected");e.action.inputs.shapes=e.action.inputs.shapes.map((e=>dt.checkCache(e.hash))),r=lt.shapesToMeshes(e.action.inputs)}"deleteShape"===e.action.functionName&&(dt.cleanCacheForHash(e.action.inputs.shape.hash),r={}),"deleteShapes"===e.action.functionName&&(e.action.inputs.shapes.forEach((e=>dt.cleanCacheForHash(e.hash))),r={}),"startedTheRun"===e.action.functionName&&(dt&&Object.keys(dt.usedHashes).length>1e4&&dt.cleanAllCache(),r={}),"cleanAllCache"===e.action.functionName&&(dt.cleanAllCache(),r={}),t({uid:e.uid,result:r})}catch(r){let i,s;e&&e.action&&e.action.inputs&&(i=`Input values were: {${Object.keys(e.action.inputs).map((t=>`${t}: ${JSON.stringify(e.action.inputs[t])}`)).join(",")}}. `),e&&e.action&&e.action.functionName&&(s=`- ${e.action.functionName}`),t({uid:e.uid,result:void 0,error:`OCCT computation failed. ${r} While executing function ${s}. ${i}`})}})(u,postMessage)}))})()})();