/*! For license information please see bitbybit-occt-webworker.js.LICENSE.txt */
(()=>{var e={725:()=>{},439:()=>{},699:()=>{},256:()=>{}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};i.r(e),i.d(e,{Base:()=>G,OCCT:()=>H});var t={};i.r(t),i.d(t,{LodDto:()=>Ct,lodEnum:()=>bt});var r={};i.r(r),i.d(r,{Part:()=>kt});var s={};i.r(s),i.d(s,{SerenitySwirlData:()=>Ot,SerenitySwirlDto:()=>Dt});var n={};i.r(n),i.d(n,{ArabicArchwayData:()=>_t,ArabicArchwayDrawingPart:()=>Rt,ArabicArchwayDrawingPartShapes:()=>Mt,ArabicArchwayDto:()=>Ft,ArabicArchwayDtoBase:()=>At});var o={};i.r(o),i.d(o,{ArabicArchway:()=>n,SerenitySwirl:()=>s});var a={};i.r(a),i.d(a,{EternalLoveData:()=>It,EternalLoveDto:()=>Bt,EternalLoveDtoBase:()=>Lt});var c={};i.r(c),i.d(c,{EternalLove:()=>a});var h={};i.r(h),i.d(h,{CalmCupData:()=>Nt,CalmCupDto:()=>Wt,CalmCupDtoBase:()=>Ut});var l={};i.r(l),i.d(l,{DragonCupData:()=>Vt,DragonCupDto:()=>Gt,DragonCupDtoBase:()=>Ht,DragonCupModelDto:()=>zt});var d={};i.r(d),i.d(d,{CalmCup:()=>h,DragonCup:()=>l});var u={};i.r(u),i.d(u,{PhoneNestData:()=>Yt,PhoneNestDrawDto:()=>Jt,PhoneNestDrawingPart:()=>Xt,PhoneNestDrawingPartShapes:()=>$t,PhoneNestDto:()=>qt,PhoneNestDtoBase:()=>jt,PhoneNestMainPart:()=>Zt,PhoneNestModelDto:()=>Qt});var p={};i.r(p),i.d(p,{PhoneNest:()=>u});var f={};i.r(f),i.d(f,{SpicyBoxData:()=>ti,SpicyBoxDto:()=>ei,SpicyBoxDtoBase:()=>Kt,SpicyBoxModelDto:()=>ii});var v={};i.r(v),i.d(v,{SpicyBox:()=>f});var g={};i.r(g),i.d(g,{Boxes:()=>v,Cups:()=>d,Desktop:()=>p,Medals:()=>c,Vases:()=>o});var m={};i.r(m),i.d(m,{DropletsPhoneHolderData:()=>ci,DropletsPhoneHolderDrawingPart:()=>hi,DropletsPhoneHolderDrawingPartShapes:()=>li,DropletsPhoneHolderDto:()=>si,DropletsPhoneHolderDtoBase:()=>ri,DropletsPhoneHolderModelDto:()=>ni,DropletsPhoneHolderModelDxfDto:()=>oi,DropletsPhoneHolderModelStepDto:()=>ai});var S={};i.r(S),i.d(S,{DropletsPhoneHolder:()=>m});var y={};i.r(y),i.d(y,{Gadgets:()=>S});var b={};i.r(b),i.d(b,{ZenHideoutData:()=>pi,ZenHideoutDrawingPart:()=>fi,ZenHideoutDrawingPartShapes:()=>vi,ZenHideoutDto:()=>ui,ZenHideoutDtoBase:()=>di});var w={};i.r(w),i.d(w,{ZenHideout:()=>b});var E={};i.r(E),i.d(E,{BeamPart:()=>Ci,CeilingPart:()=>Li,ColumnPart:()=>Pi,CornerEntranceDto:()=>Ii,CornerEntrancePart:()=>_i,CornerPart:()=>Ti,CornerStairDto:()=>Ai,CornerStairPart:()=>Fi,FloorPart:()=>Bi,Houses:()=>w,RoofBeamsPart:()=>Di,RoofCoverOneSidedDto:()=>Ri,RoofCoverPart:()=>Mi,RoofPanelPart:()=>Oi,RoofPart:()=>ki,SandwitchPanelDto:()=>bi,SandwitchPanelFlexDto:()=>wi,SandwitchPart:()=>Ei,SandwitchPartFlex:()=>xi,WindowCornerDto:()=>gi,WindowCornerPart:()=>yi,WindowRectangularDto:()=>mi,WindowRectangularPart:()=>Si});var x={};i.r(x),i.d(x,{WingtipVillaData:()=>Wi,WingtipVillaDto:()=>Ui});var T={};i.r(T),i.d(T,{ChirpyChaletData:()=>Hi,ChirpyChaletDto:()=>Ni});var P={};i.r(P),i.d(P,{ChirpyChalet:()=>T,WingtipVilla:()=>x});var C={};i.r(C),i.d(C,{BirdHouses:()=>P});var k={};i.r(k),i.d(k,{SnakeChairData:()=>zi,SnakeChairDrawDto:()=>$i,SnakeChairDrawingPart:()=>ji,SnakeChairDrawingPartShapes:()=>qi,SnakeChairDto:()=>Vi,SnakeChairDtoBase:()=>Gi,SnakeChairMainPart:()=>Yi,SnakeChairModelDto:()=>Xi});var D={};i.r(D),i.d(D,{SnakeChair:()=>k});var O={};i.r(O),i.d(O,{ElegantTableData:()=>Ji,ElegantTableDrawDto:()=>nr,ElegantTableDrawingPart:()=>Ki,ElegantTableDrawingPartShapes:()=>er,ElegantTableDto:()=>Qi,ElegantTableDtoBase:()=>Zi,ElegantTableLegByIndexDto:()=>rr,ElegantTableLegPart:()=>tr,ElegantTableModelDto:()=>sr,ElegantTableTopPart:()=>ir});var A={};i.r(A),i.d(A,{GoodCoffeeTableData:()=>cr,GoodCoffeeTableDrawDto:()=>gr,GoodCoffeeTableDrawingPart:()=>hr,GoodCoffeeTableDrawingPartShapes:()=>lr,GoodCoffeeTableDto:()=>ar,GoodCoffeeTableDtoBase:()=>or,GoodCoffeeTableLegByIndexDto:()=>fr,GoodCoffeeTableLegPart:()=>dr,GoodCoffeeTableModelDto:()=>vr,GoodCoffeeTableShelfPart:()=>ur,GoodCoffeeTableTopPart:()=>pr});var F={};i.r(F),i.d(F,{SnakeTableData:()=>yr,SnakeTableDrawDto:()=>Tr,SnakeTableDrawingPart:()=>br,SnakeTableDrawingPartShapes:()=>wr,SnakeTableDto:()=>Sr,SnakeTableDtoBase:()=>mr,SnakeTableMainPart:()=>Er,SnakeTableModelDto:()=>xr});var _={};i.r(_),i.d(_,{ElegantTable:()=>O,GoodCoffeeTable:()=>A,SnakeTable:()=>F});var R={};i.r(R),i.d(R,{Chairs:()=>D,Tables:()=>_});var M={};i.r(M),i.d(M,{Architecture:()=>E,Enums:()=>t,Furniture:()=>R,KidsCorner:()=>C,LaserCutting:()=>y,Shared:()=>r,ThreeDPrinting:()=>g});var L={};i.r(L),i.d(L,{FontDefinition:()=>Mr,Text3DData:()=>_r,Text3DDto:()=>Cr,Text3DFaceDefinitionDto:()=>Br,Text3DFaceDefinitionUrlDto:()=>Ir,Text3DFaceDefinitionUrlParsedDto:()=>Ur,Text3DFaceDto:()=>Or,Text3DFaceUrlDto:()=>Ar,Text3DFaceUrlParsedDto:()=>Fr,Text3DLetterByIndexDto:()=>Rr,Text3DModelDto:()=>Lr,Text3DUrlDto:()=>kr,Text3DUrlParsedDto:()=>Dr,Texts3DFaceDto:()=>Wr,Texts3DFaceUrlDto:()=>Nr,Texts3DFaceUrlParsedDto:()=>Hr,faceTextVarEnum:()=>xt,faceTypeEnum:()=>Tt,fontVariantsEnum:()=>Et,fontsEnum:()=>wt,fontsModel:()=>Pr,recAlignmentEnum:()=>Pt});var B={};i.r(B),i.d(B,{PyramidSimpeByIndexDto:()=>jr,PyramidSimpleAffectorsDto:()=>Vr,PyramidSimpleCellPart:()=>es,PyramidSimpleData:()=>zr,PyramidSimpleDto:()=>Gr,PyramidSimpleFacePart:()=>ts,PyramidSimpleModelCellDto:()=>$r,PyramidSimpleModelCellsDto:()=>Yr,PyramidSimpleModelCellsIndexDto:()=>Xr,PyramidSimpleModelDto:()=>qr,PyramidSimpleModelFaceCellIndexDto:()=>Qr,PyramidSimpleModelFaceCellsUIndexDto:()=>Jr,PyramidSimpleModelFaceCellsVIndexDto:()=>Kr,PyramidSimpleModelFaceIndexDto:()=>Zr});var I={};i.r(I),i.d(I,{PyramidSimple:()=>B});var U={};i.r(U),i.d(U,{FacePatterns:()=>I});var W={};i.r(W),i.d(W,{outputShapeEnum:()=>is});var N,H,G,V,z,j,q,Y,X,$,Z,Q,J,K,ee,te,ie,re={};i.r(re),i.d(re,{Enums:()=>W,Patterns:()=>U,Text3D:()=>L}),(ie=N||(N={})).loading="loading",ie.loaded="loaded",ie.initialised="initialised",ie.computing="computing",function(e){let t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S;!function(e){e.arc="arc",e.intersection="intersection",e.tangent="tangent"}(t=e.joinTypeEnum||(e.joinTypeEnum={})),function(e){e.skin="skin",e.pipe="pipe",e.rectoVerso="rectoVerso"}(i=e.bRepOffsetModeEnum||(e.bRepOffsetModeEnum={})),function(e){e.approxChordLength="approxChordLength",e.approxCentripetal="approxCentripetal",e.approxIsoParametric="approxIsoParametric"}(r=e.approxParametrizationTypeEnum||(e.approxParametrizationTypeEnum={})),function(e){e.outside="outside",e.inside="inside",e.middle="middle"}(s=e.directionEnum||(e.directionEnum={})),function(e){e.iges="iges",e.step="step"}(n=e.fileTypeEnum||(e.fileTypeEnum={})),function(e){e.forward="forward",e.reversed="reversed",e.internal="internal",e.external="external"}(o=e.topAbsOrientationEnum||(e.topAbsOrientationEnum={})),function(e){e.in="in",e.out="out",e.on="on",e.unknown="unknown"}(a=e.topAbsStateEnum||(e.topAbsStateEnum={})),function(e){e.unknown="unknown",e.vertex="vertex",e.edge="edge",e.wire="wire",e.face="face",e.shell="shell",e.solid="solid",e.compSolid="compSolid",e.compound="compound",e.shape="shape"}(c=e.shapeTypeEnum||(e.shapeTypeEnum={})),function(e){e.unqualified="unqualified",e.enclosing="enclosing",e.enclosed="enclosed",e.outside="outside",e.noqualifier="noqualifier"}(h=e.gccEntPositionEnum||(e.gccEntPositionEnum={})),function(e){e.keepSide1="keepSide1",e.keepSide2="keepSide2",e.all="all"}(l=e.positionResultEnum||(e.positionResultEnum={})),function(e){e.none="none",e.keepSide1="keepSide1",e.keepSide2="keepSide2"}(d=e.circleInclusionEnum||(e.circleInclusionEnum={})),function(e){e.none="none",e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(u=e.twoCircleInclusionEnum||(e.twoCircleInclusionEnum={})),function(e){e.outside="outside",e.inside="inside",e.outsideInside="outsideInside",e.insideOutside="insideOutside"}(p=e.fourSidesStrictEnum||(e.fourSidesStrictEnum={})),function(e){e.outside="outside",e.inside="inside"}(f=e.twoSidesStrictEnum||(e.twoSidesStrictEnum={})),function(e){e.allWithAll="allWithAll",e.inOrder="inOrder",e.inOrderClosed="inOrderClosed"}(v=e.combinationCirclesForFaceEnum||(e.combinationCirclesForFaceEnum={})),function(e){e[e.curve=0]="curve",e[e.edge=1]="edge",e[e.wire=2]="wire",e[e.face=3]="face"}(g=e.typeSpecificityEnum||(e.typeSpecificityEnum={})),function(e){e.all="all",e.closest="closest",e.furthest="furthest",e.closestAndFurthest="closestAndFurthest"}(m=e.pointProjectionTypeEnum||(e.pointProjectionTypeEnum={})),function(e){e.isCorrectedFrenet="isCorrectedFrenet",e.isFixed="isFixed",e.isFrenet="isFrenet",e.isConstantNormal="isConstantNormal",e.isDarboux="isDarboux",e.isGuideAC="isGuideAC",e.isGuidePlan="isGuidePlan",e.isGuideACWithContact="isGuideACWithContact",e.isGuidePlanWithContact="isGuidePlanWithContact",e.isDiscreteTrihedron="isDiscreteTrihedron"}(S=e.geomFillTrihedronEnum||(e.geomFillTrihedronEnum={})),e.DecomposedMeshDto=class{constructor(e,t){void 0!==e&&(this.faceList=e),void 0!==t&&(this.edgeList=t)}},e.DecomposedFaceDto=class{},e.DecomposedEdgeDto=class{},e.ShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.PointDto=class{constructor(e){this.point=[0,0,0],void 0!==e&&(this.point=e)}},e.XYZDto=class{constructor(e,t,i){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==i&&(this.z=i)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.ConstraintTanLinesFromPtToCircleDto=class{constructor(e,t,i,r,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.positionResult=r),void 0!==s&&(this.circleRemainder=s)}},e.ConstraintTanLinesFromTwoPtsToCircleDto=class{constructor(e,t,i,r,s,n){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainder=d.none,void 0!==e&&(this.circle=e),void 0!==t&&(this.point1=t),void 0!==i&&(this.point1=i),void 0!==r&&(this.tolerance=r),void 0!==s&&(this.positionResult=s),void 0!==n&&(this.circleRemainder=n)}},e.ConstraintTanLinesOnTwoCirclesDto=class{constructor(e,t,i,r,s){this.tolerance=1e-7,this.positionResult=l.all,this.circleRemainders=u.none,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.positionResult=r),void 0!==s&&(this.circleRemainders=s)}},e.ConstraintTanCirclesOnTwoCirclesDto=class{constructor(e,t,i,r){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.radius=r)}},e.ConstraintTanCirclesOnCircleAndPntDto=class{constructor(e,t,i,r){this.tolerance=1e-7,this.radius=.3,void 0!==e&&(this.circle=e),void 0!==t&&(this.point=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.radius=r)}},e.CurveAndSurfaceDto=class{constructor(e,t){void 0!==e&&(this.curve=e),void 0!==t&&(this.surface=t)}},e.FilletTwoEdgesInPlaneDto=class{constructor(e,t,i,r,s,n){this.planeOrigin=[0,0,0],this.planeDirection=[0,1,0],this.radius=.3,this.solution=-1,void 0!==e&&(this.edge1=e),void 0!==t&&(this.edge2=t),void 0!==i&&(this.planeOrigin=i),void 0!==r&&(this.planeDirection=r),void 0!==s&&(this.radius=s),void 0!==n&&(this.solution=n)}},e.ClosestPointsOnShapeFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.BoundingBoxDto=class{constructor(e){void 0!==e&&(this.bbox=e)}},e.BoundingBoxPropsDto=class{constructor(e,t,i,r){this.min=[0,0,0],this.max=[0,0,0],this.center=[0,0,0],this.size=[0,0,0],void 0!==e&&(this.min=e),void 0!==t&&(this.max=t),void 0!==i&&(this.center=i),void 0!==r&&(this.size=r)}},e.BoundingSpherePropsDto=class{constructor(e,t){this.center=[0,0,0],this.radius=0,void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.SplitWireOnPointsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t)}},e.ClosestPointsOnShapesFromPointsDto=class{constructor(e,t){void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t)}},e.ClosestPointsBetweenTwoShapesDto=class{constructor(e,t){void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t)}},e.FaceFromSurfaceAndWireDto=class{constructor(e,t,i){this.inside=!0,void 0!==e&&(this.surface=e),void 0!==t&&(this.wire=t),void 0!==i&&(this.inside=i)}},e.WireOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t)}},e.DrawShapeDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shape=e),void 0!==t&&(this.faceOpacity=t),void 0!==i&&(this.edgeOpacity=i),void 0!==r&&(this.edgeColour=r),void 0!==s&&(this.faceMaterial=s),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==o&&(this.edgeWidth=o),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==S&&(this.faceIndexColour=S)}},e.DrawShapesDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.faceOpacity=1,this.edgeOpacity=1,this.edgeColour="#ffffff",this.faceColour="#ff0000",this.edgeWidth=2,this.drawEdges=!0,this.drawFaces=!0,this.drawVertices=!1,this.vertexColour="#ffaaff",this.vertexSize=.03,this.precision=.01,this.drawEdgeIndexes=!1,this.edgeIndexHeight=.06,this.edgeIndexColour="#ff00ff",this.drawFaceIndexes=!1,this.faceIndexHeight=.06,this.faceIndexColour="#0000ff",void 0!==e&&(this.shapes=e),void 0!==t&&(this.faceOpacity=t),void 0!==i&&(this.edgeOpacity=i),void 0!==r&&(this.edgeColour=r),void 0!==s&&(this.faceMaterial=s),void 0!==n&&(this.faceColour=n),void 0!==l&&(this.vertexColour=l),void 0!==d&&(this.vertexSize=d),void 0!==o&&(this.edgeWidth=o),void 0!==a&&(this.drawEdges=a),void 0!==c&&(this.drawFaces=c),void 0!==h&&(this.drawVertices=h),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdgeIndexes=p),void 0!==f&&(this.edgeIndexHeight=f),void 0!==v&&(this.edgeIndexColour=v),void 0!==g&&(this.drawFaceIndexes=g),void 0!==m&&(this.faceIndexHeight=m),void 0!==S&&(this.faceIndexColour=S)}},e.FaceSubdivisionDto=class{constructor(e,t,i,r,s,n,o,a,c){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepU=!1,this.removeStartEdgeU=!1,this.removeEndEdgeU=!1,this.shiftHalfStepV=!1,this.removeStartEdgeV=!1,this.removeEndEdgeV=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==i&&(this.nrDivisionsV=i),void 0!==r&&(this.shiftHalfStepU=r),void 0!==s&&(this.removeStartEdgeU=s),void 0!==n&&(this.removeEndEdgeU=n),void 0!==o&&(this.shiftHalfStepV=o),void 0!==a&&(this.removeStartEdgeV=a),void 0!==c&&(this.removeEndEdgeV=c)}},e.FaceSubdivisionToWiresDto=class{constructor(e,t,i,r,s,n){this.nrDivisions=10,this.isU=!0,this.shiftHalfStep=!1,this.removeStart=!1,this.removeEnd=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisions=t),void 0!==i&&(this.isU=i),void 0!==r&&(this.shiftHalfStep=r),void 0!==s&&(this.removeStart=s),void 0!==n&&(this.removeEnd=n)}},e.FaceSubdivideToRectangleWiresDto=class{constructor(e,t,i,r,s,n,o,a,c){this.nrRectanglesU=10,this.nrRectanglesV=10,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==i&&(this.nrRectanglesU=i),void 0!==r&&(this.scalePatternU=r),void 0!==s&&(this.scalePatternV=s),void 0!==n&&(this.filletPattern=n),void 0!==o&&(this.inclusionPattern=o),void 0!==a&&(this.offsetFromBorderU=a),void 0!==c&&(this.offsetFromBorderV=c)}},e.FaceSubdivideToHexagonWiresDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,this.extendUUp=!1,this.extendUBottom=!1,this.extendVUp=!1,this.extendVBottom=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==i&&(this.nrHexagonsU=i),void 0!==r&&(this.flatU=r),void 0!==s&&(this.scalePatternU=s),void 0!==n&&(this.scalePatternV=n),void 0!==o&&(this.filletPattern=o),void 0!==a&&(this.inclusionPattern=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h),void 0!==l&&(this.extendUUp=l),void 0!==d&&(this.extendUBottom=d),void 0!==u&&(this.extendVUp=u),void 0!==p&&(this.extendVBottom=p)}},e.FaceSubdivideToHexagonHolesDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l){this.nrHexagonsU=10,this.nrHexagonsV=10,this.flatU=!1,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrHexagonsU=t),void 0!==i&&(this.nrHexagonsU=i),void 0!==r&&(this.flatU=r),void 0!==s&&(this.holesToFaces=s),void 0!==n&&(this.scalePatternU=n),void 0!==o&&(this.scalePatternV=o),void 0!==a&&(this.filletPattern=a),void 0!==c&&(this.inclusionPattern=c),void 0!==h&&(this.offsetFromBorderU=h),void 0!==l&&(this.offsetFromBorderV=l)}},e.FaceSubdivideToRectangleHolesDto=class{constructor(e,t,i,r,s,n,o,a,c,h){this.nrRectanglesU=10,this.nrRectanglesV=10,this.holesToFaces=!1,this.offsetFromBorderU=0,this.offsetFromBorderV=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrRectanglesU=t),void 0!==i&&(this.nrRectanglesU=i),void 0!==r&&(this.scalePatternU=r),void 0!==s&&(this.scalePatternV=s),void 0!==n&&(this.filletPattern=n),void 0!==o&&(this.inclusionPattern=o),void 0!==a&&(this.holesToFaces=a),void 0!==c&&(this.offsetFromBorderU=c),void 0!==h&&(this.offsetFromBorderV=h)}},e.FaceSubdivisionControlledDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f){this.nrDivisionsU=10,this.nrDivisionsV=10,this.shiftHalfStepNthU=0,this.shiftHalfStepUOffsetN=0,this.removeStartEdgeNthU=0,this.removeStartEdgeUOffsetN=0,this.removeEndEdgeNthU=0,this.removeEndEdgeUOffsetN=0,this.shiftHalfStepNthV=0,this.shiftHalfStepVOffsetN=0,this.removeStartEdgeNthV=0,this.removeStartEdgeVOffsetN=0,this.removeEndEdgeNthV=0,this.removeEndEdgeVOffsetN=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrDivisionsU=t),void 0!==i&&(this.nrDivisionsV=i),void 0!==r&&(this.shiftHalfStepNthU=r),void 0!==s&&(this.shiftHalfStepUOffsetN=s),void 0!==n&&(this.removeStartEdgeNthU=n),void 0!==o&&(this.removeStartEdgeUOffsetN=o),void 0!==a&&(this.removeEndEdgeNthU=a),void 0!==c&&(this.removeEndEdgeUOffsetN=c),void 0!==h&&(this.shiftHalfStepNthV=h),void 0!==l&&(this.shiftHalfStepVOffsetN=l),void 0!==d&&(this.removeStartEdgeNthV=d),void 0!==u&&(this.removeStartEdgeVOffsetN=u),void 0!==p&&(this.removeEndEdgeNthV=p),void 0!==f&&(this.removeEndEdgeVOffsetN=f)}},e.FaceLinearSubdivisionDto=class{constructor(e,t,i,r,s,n,o){this.isU=!0,this.param=.5,this.nrPoints=10,this.shiftHalfStep=!1,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==i&&(this.param=i),void 0!==r&&(this.nrPoints=r),void 0!==s&&(this.shiftHalfStep=s),void 0!==n&&(this.removeStartPoint=n),void 0!==o&&(this.removeEndPoint=o)}},e.WireAlongParamDto=class{constructor(e,t,i){this.isU=!0,this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==i&&(this.param=i)}},e.WiresAlongParamsDto=class{constructor(e,t,i){this.isU=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.isU=t),void 0!==i&&(this.params=i)}},e.DataOnUVDto=class{constructor(e,t,i){this.paramU=.5,this.paramV=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.paramU=t),void 0!==i&&(this.paramV=i)}},e.DataOnUVsDto=class{constructor(e,t){this.paramsUV=[[.5,.5]],void 0!==e&&(this.shape=e),void 0!==t&&(this.paramsUV=t)}},e.PolygonDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolygonsDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polygons=e),void 0!==t&&(this.returnCompound=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.PolylineBaseDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesBaseDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.LineBaseDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.LinesBaseDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.SegmentBaseDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsBaseDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.TriangleBaseDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.MeshBaseDto=class{constructor(e){void 0!==e&&(this.mesh=e)}},e.PolylinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.returnCompound=t)}},e.SquareDto=class{constructor(e,t,i){this.size=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==i&&(this.direction=i)}},e.RectangleDto=class{constructor(e,t,i,r){this.width=1,this.length=2,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==i&&(this.center=i),void 0!==r&&(this.direction=r)}};class y{constructor(e,t,i,r,n,o,a,c){this.widthFirst=1,this.lengthFirst=2,this.widthSecond=.5,this.lengthSecond=2,this.align=s.outside,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.widthFirst=e),void 0!==t&&(this.lengthFirst=t),void 0!==i&&(this.widthSecond=i),void 0!==r&&(this.lengthSecond=r),void 0!==n&&(this.align=n),void 0!==o&&(this.rotation=o),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}e.LPolygonDto=y;class b{constructor(e,t,i,r,s,n,o,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=G.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.webThickness=i),void 0!==r&&(this.flangeThickness=r),void 0!==s&&(this.alignment=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.center=o),void 0!==a&&(this.direction=a)}}e.IBeamProfileDto=b;class w{constructor(e,t,i,r,s,n,o,a){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.alignment=G.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.webThickness=i),void 0!==r&&(this.flangeThickness=r),void 0!==s&&(this.alignment=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.center=o),void 0!==a&&(this.direction=a)}}e.HBeamProfileDto=w;class E{constructor(e,t,i,r,s,n,o,a){this.width=2,this.height=2,this.webThickness=.2,this.flangeThickness=.3,this.alignment=G.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.webThickness=i),void 0!==r&&(this.flangeThickness=r),void 0!==s&&(this.alignment=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.center=o),void 0!==a&&(this.direction=a)}}e.TBeamProfileDto=E;class x{constructor(e,t,i,r,s,n,o,a,c){this.width=2,this.height=3,this.webThickness=.2,this.flangeThickness=.3,this.flangeWidth=.5,this.alignment=G.basicAlignmentEnum.midMid,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.webThickness=i),void 0!==r&&(this.flangeThickness=r),void 0!==s&&(this.flangeWidth=s),void 0!==n&&(this.alignment=n),void 0!==o&&(this.rotation=o),void 0!==a&&(this.center=a),void 0!==c&&(this.direction=c)}}e.UBeamProfileDto=x,e.ExtrudedSolidDto=class{constructor(e,t,i,r){this.extrusionLengthFront=1,this.extrusionLengthBack=0,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.extrusionLengthFront=e),void 0!==t&&(this.extrusionLengthBack=t),void 0!==i&&(this.center=i),void 0!==r&&(this.direction=r)}},e.IBeamProfileSolidDto=class extends b{constructor(e,t,i,r,s,n,o,a,c,h){super(e,t,i,r,s,n,o,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.HBeamProfileSolidDto=class extends w{constructor(e,t,i,r,s,n,o,a,c,h){super(e,t,i,r,s,n,o,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.TBeamProfileSolidDto=class extends E{constructor(e,t,i,r,s,n,o,a,c,h){super(e,t,i,r,s,n,o,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}},e.UBeamProfileSolidDto=class extends x{constructor(e,t,i,r,s,n,o,a,c,h,l){super(e,t,i,r,s,n,o,a,c),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==h&&(this.extrusionLengthFront=h),void 0!==l&&(this.extrusionLengthBack=l)}},e.BoxDto=class{constructor(e,t,i,r,s){this.width=1,this.length=2,this.height=3,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==i&&(this.height=i),void 0!==r&&(this.center=r),void 0!==s&&(this.originOnCenter=s)}},e.CubeDto=class{constructor(e,t,i){this.size=1,this.center=[0,0,0],this.originOnCenter=!0,void 0!==e&&(this.size=e),void 0!==t&&(this.center=t),void 0!==i&&(this.originOnCenter=i)}},e.BoxFromCornerDto=class{constructor(e,t,i,r){this.width=1,this.length=2,this.height=3,this.corner=[0,0,0],void 0!==e&&(this.width=e),void 0!==t&&(this.length=t),void 0!==i&&(this.height=i),void 0!==r&&(this.corner=r)}},e.SphereDto=class{constructor(e,t){this.radius=1,this.center=[0,0,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t)}},e.ConeDto=class{constructor(e,t,i,r,s,n){this.radius1=2,this.radius2=1,this.height=2,this.angle=360,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius1=e),void 0!==t&&(this.radius2=t),void 0!==i&&(this.height=i),void 0!==r&&(this.angle=r),void 0!==s&&(this.center=s),void 0!==n&&(this.direction=n)}},e.LineDto=class{constructor(e,t){this.start=[0,0,0],this.end=[0,1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineWithExtensionsDto=class{constructor(e,t,i,r){this.start=[0,0,0],this.end=[0,1,0],this.extensionStart=.1,this.extensionEnd=.1,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==i&&(this.extensionStart=i),void 0!==r&&(this.extensionEnd=r)}},e.LinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.returnCompound=t)}},e.ArcEdgeTwoPointsTangentDto=class{constructor(e,t,i){this.start=[0,0,0],this.tangentVec=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.tangentVec=t),void 0!==i&&(this.end=i)}},e.ArcEdgeCircleTwoPointsDto=class{constructor(e,t,i,r){this.start=[0,0,0],this.end=[0,0,1],this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.start=t),void 0!==i&&(this.end=i),void 0!==r&&(this.sense=r)}},e.ArcEdgeCircleTwoAnglesDto=class{constructor(e,t,i,r){this.alphaAngle1=0,this.alphaAngle2=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle1=t),void 0!==i&&(this.alphaAngle2=i),void 0!==r&&(this.sense=r)}},e.ArcEdgeCirclePointAngleDto=class{constructor(e,t,i,r){this.alphaAngle=90,this.sense=!0,void 0!==e&&(this.circle=e),void 0!==t&&(this.alphaAngle=t),void 0!==r&&(this.sense=r)}},e.ArcEdgeThreePointsDto=class{constructor(e,t,i){this.start=[0,0,0],this.middle=[0,1,0],this.end=[0,0,1],void 0!==e&&(this.start=e),void 0!==t&&(this.middle=t),void 0!==i&&(this.end=i)}},e.CylinderDto=class{constructor(e,t,i,r,s,n){this.radius=1,this.height=2,this.center=[0,0,0],this.direction=[0,1,0],this.angle=360,this.originOnCenter=!1,void 0!==e&&(this.radius=e),void 0!==t&&(this.height=t),void 0!==i&&(this.center=i),void 0!==r&&(this.direction=r),void 0!==s&&(this.angle=s),void 0!==n&&(this.originOnCenter=n)}},e.CylindersOnLinesDto=class{constructor(e,t){void 0!==e&&(this.radius=e),void 0!==t&&(this.lines=t)}},e.FilletDto=class{constructor(e,t,i,r){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.radiusList=i),void 0!==r&&(this.indexes=r)}},e.FilletShapesDto=class{constructor(e,t,i,r){this.radius=.1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.radiusList=i),void 0!==r&&(this.indexes=r)}},e.FilletEdgesListDto=class{constructor(e,t,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.radiusList=i)}},e.FilletEdgesListOneRadiusDto=class{constructor(e,t,i){this.radius=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.radius=i)}},e.FilletEdgeVariableRadiusDto=class{constructor(e,t,i,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==i&&(this.radiusList=i),void 0!==r&&(this.paramsU=r)}},e.FilletEdgesVariableRadiusDto=class{constructor(e,t,i,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.radiusLists=i),void 0!==r&&(this.paramsULists=r)}},e.FilletEdgesSameVariableRadiusDto=class{constructor(e,t,i,r){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.radiusList=i),void 0!==r&&(this.paramsU=r)}},e.Fillet3DWiresDto=class{constructor(e,t,i,r,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.radiusList=r),void 0!==s&&(this.indexes=s)}},e.Fillet3DWireDto=class{constructor(e,t,i,r,s){this.radius=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.radiusList=r),void 0!==s&&(this.indexes=s)}},e.ChamferDto=class{constructor(e,t,i,r){this.distance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.distance=t),void 0!==i&&(this.distanceList=i),void 0!==r&&(this.indexes=r)}},e.ChamferEdgesListDto=class{constructor(e,t,i){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.distanceList=i)}},e.ChamferEdgeDistAngleDto=class{constructor(e,t,i,r,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==i&&(this.face=i),void 0!==r&&(this.distance=r),void 0!==s&&(this.angle=s)}},e.ChamferEdgeTwoDistancesDto=class{constructor(e,t,i,r,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edge=t),void 0!==i&&(this.face=i),void 0!==r&&(this.distance1=r),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesTwoDistancesListsDto=class{constructor(e,t,i,r,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.faces=i),void 0!==r&&(this.distances1=r),void 0!==s&&(this.distances2=s)}},e.ChamferEdgesTwoDistancesDto=class{constructor(e,t,i,r,s){this.distance1=.1,this.distance2=.2,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.faces=i),void 0!==r&&(this.distance1=r),void 0!==s&&(this.distance2=s)}},e.ChamferEdgesDistsAnglesDto=class{constructor(e,t,i,r,s){void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.faces=i),void 0!==r&&(this.distances=r),void 0!==s&&(this.angles=s)}},e.ChamferEdgesDistAngleDto=class{constructor(e,t,i,r,s){this.distance=.1,this.angle=45,void 0!==e&&(this.shape=e),void 0!==t&&(this.edges=t),void 0!==i&&(this.faces=i),void 0!==r&&(this.distance=r),void 0!==s&&(this.angle=s)}},e.BSplineDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BSplinesDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bSplines=e),void 0!==t&&(this.returnCompound=t)}},e.WireFromTwoCirclesTanDto=class{constructor(e,t,i,r,s){this.keepLines=f.outside,this.circleRemainders=p.outside,this.tolerance=1e-7,void 0!==e&&(this.circle1=e),void 0!==t&&(this.circle2=t),void 0!==i&&(this.keepLines=i),void 0!==r&&(this.circleRemainders=r),void 0!==s&&(this.tolerance=s)}},e.FaceFromMultipleCircleTanWiresDto=class{constructor(e,t,i,r){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.circles=e),void 0!==t&&(this.combination=t),void 0!==i&&(this.unify=i),void 0!==r&&(this.tolerance=r)}},e.FaceFromMultipleCircleTanWireCollectionsDto=class{constructor(e,t,i,r){this.combination=v.allWithAll,this.unify=!0,this.tolerance=1e-7,void 0!==e&&(this.listsOfCircles=e),void 0!==t&&(this.combination=t),void 0!==i&&(this.unify=i),void 0!==r&&(this.tolerance=r)}},e.ZigZagBetweenTwoWiresDto=class{constructor(e,t,i,r,s,n){this.nrZigZags=20,this.divideByEqualDistance=!1,this.zigZagsPerEdge=!0,void 0!==e&&(this.wire1=e),void 0!==t&&(this.wire2=t),void 0!==i&&(this.nrZigZags=i),void 0!==r&&(this.inverse=r),void 0!==s&&(this.divideByEqualDistance=s),void 0!==n&&(this.zigZagsPerEdge=n)}},e.InterpolationDto=class{constructor(e,t,i){this.periodic=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.periodic=t),void 0!==i&&(this.tolerance=i)}},e.InterpolateWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.interpolations=e),void 0!==t&&(this.returnCompound=t)}},e.BezierDto=class{constructor(e,t){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t)}},e.BezierWeightsDto=class{constructor(e,t,i){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.weights=t),void 0!==i&&(this.closed=i)}},e.BezierWiresDto=class{constructor(e,t){this.returnCompound=!1,void 0!==e&&(this.bezierWires=e),void 0!==t&&(this.returnCompound=t)}},e.DivideDto=class{constructor(e,t,i,r){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==i&&(this.removeStartPoint=i),void 0!==r&&(this.removeEndPoint=r)}},e.ProjectWireDto=class{constructor(e,t,i){this.direction=[0,1,0],void 0!==e&&(this.wire=e),void 0!==t&&(this.shape=t),void 0!==i&&(this.direction=i)}},e.ProjectPointsOnShapeDto=class{constructor(e,t,i,r){this.direction=[0,10,0],void 0!==e&&(this.points=e),void 0!==t&&(this.shape=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.projectionType=r)}},e.WiresToPointsDto=class{constructor(e,t,i,r,s,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==i&&(this.curvatureDeflection=i),void 0!==r&&(this.minimumOfPoints=r),void 0!==s&&(this.uTolerance=s),void 0!==n&&(this.minimumLength=n)}},e.EdgesToPointsDto=class{constructor(e,t,i,r,s,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==i&&(this.curvatureDeflection=i),void 0!==r&&(this.minimumOfPoints=r),void 0!==s&&(this.uTolerance=s),void 0!==n&&(this.minimumLength=n)}},e.ProjectWiresDto=class{constructor(e,t,i){this.direction=[0,1,0],void 0!==e&&(this.wires=e),void 0!==t&&(this.shape=t),void 0!==i&&(this.direction=i)}},e.DivideShapesDto=class{constructor(e,t,i,r){this.nrOfDivisions=10,this.removeStartPoint=!1,this.removeEndPoint=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==i&&(this.removeStartPoint=i),void 0!==r&&(this.removeEndPoint=r)}},e.DataOnGeometryAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t)}},e.DataOnGeometryesAtParamDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.param=t)}},e.PointInFaceDto=class{constructor(e,t,i,r){this.tEdgeParam=.5,this.distance2DParam=.5,void 0!==e&&(this.face=e),void 0!==t&&(this.edge=t),void 0!==i&&(this.tEdgeParam=i),void 0!==r&&(this.distance2DParam=r)}},e.PointsOnWireAtEqualLengthDto=class{constructor(e,t,i,r,s){this.length=.5,this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t),void 0!==i&&(this.tryNext=i),void 0!==r&&(this.includeFirst=r),void 0!==s&&(this.includeLast=s)}},e.PointsOnWireAtPatternOfLengthsDto=class{constructor(e,t,i,r,s){this.tryNext=!1,this.includeFirst=!1,this.includeLast=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t),void 0!==i&&(this.tryNext=i),void 0!==r&&(this.includeLast=r),void 0!==s&&(this.includeLast=s)}},e.DataOnGeometryAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shape=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryesAtLengthDto=class{constructor(e,t){this.length=.5,void 0!==e&&(this.shapes=e),void 0!==t&&(this.length=t)}},e.DataOnGeometryAtLengthsDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.lengths=t)}},e.CircleDto=class{constructor(e,t,i){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==i&&(this.direction=i)}},e.HexagonsInGridDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.nrHexagonsInHeight=i),void 0!==r&&(this.nrHexagonsInWidth=r),void 0!==s&&(this.flatTop=s),void 0!==n&&(this.extendTop=n),void 0!==o&&(this.extendBottom=o),void 0!==a&&(this.extendLeft=a),void 0!==c&&(this.extendRight=c),void 0!==h&&(this.scalePatternWidth=h),void 0!==l&&(this.scalePatternHeight=l),void 0!==d&&(this.filletPattern=d),void 0!==u&&(this.inclusionPattern=u)}},e.LoftDto=class{constructor(e,t){this.makeSolid=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t)}},e.LoftAdvancedDto=class{constructor(e,t,i,s,n,o,a,c,h,l,d,u){this.makeSolid=!1,this.closed=!1,this.periodic=!1,this.straight=!1,this.nrPeriodicSections=10,this.useSmoothing=!1,this.maxUDegree=3,this.tolerance=1e-7,this.parType=r.approxCentripetal,void 0!==e&&(this.shapes=e),void 0!==t&&(this.makeSolid=t),void 0!==i&&(this.closed=i),void 0!==s&&(this.periodic=s),void 0!==n&&(this.straight=n),void 0!==o&&(this.nrPeriodicSections=o),void 0!==a&&(this.useSmoothing=a),void 0!==c&&(this.maxUDegree=c),void 0!==h&&(this.tolerance=h),void 0!==l&&(this.parType=l),void 0!==d&&(this.startVertex=d),void 0!==u&&(this.endVertex=u)}},e.OffsetDto=class{constructor(e,t,i,r){this.distance=.2,this.tolerance=.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.face=t),void 0!==i&&(this.distance=i),void 0!==r&&(this.tolerance=r)}},e.OffsetAdvancedDto=class{constructor(e,i,r,s,n,o){this.distance=.2,this.tolerance=.1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==i&&(this.face=i),void 0!==r&&(this.distance=r),void 0!==s&&(this.tolerance=s),void 0!==n&&(this.joinType=n),void 0!==o&&(this.removeIntEdges=o)}},e.RevolveDto=class{constructor(e,t,i,r){this.angle=360,this.direction=[0,1,0],this.copy=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.copy=r)}},e.ShapeShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.WiresOnFaceDto=class{constructor(e,t){void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t)}},e.PipeWiresCylindricalDto=class{constructor(e,t,i,r,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.makeSolid=i),void 0!==r&&(this.trihedronEnum=r),void 0!==s&&(this.forceApproxC1=s)}},e.PipeWireCylindricalDto=class{constructor(e,t,i,r,s){this.radius=.1,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.makeSolid=i),void 0!==r&&(this.trihedronEnum=r),void 0!==s&&(this.forceApproxC1=s)}},e.PipePolygonWireNGonDto=class{constructor(e,t,i,r,s,n){this.radius=.1,this.nrCorners=6,this.makeSolid=!0,this.trihedronEnum=S.isConstantNormal,this.forceApproxC1=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.nrCorners=i),void 0!==r&&(this.makeSolid=r),void 0!==s&&(this.trihedronEnum=s),void 0!==n&&(this.forceApproxC1=n)}},e.ExtrudeDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t)}},e.ExtrudeShapesDto=class{constructor(e,t){this.direction=[0,1,0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.direction=t)}},e.SplitDto=class{constructor(e,t){this.localFuzzyTolerance=1e-4,this.nonDestructive=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t)}},e.UnionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.DifferenceDto=class{constructor(e,t,i){this.keepEdges=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==i&&(this.keepEdges=i)}},e.IntersectionDto=class{constructor(e,t){this.keepEdges=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.keepEdges=t)}},e.ShapeDto=class{constructor(e){void 0!==e&&(this.shape=e)}},e.MeshMeshIntersectionTwoShapesDto=class{constructor(e,t,i,r){this.precision1=.01,this.precision2=.01,void 0!==e&&(this.shape1=e),void 0!==t&&(this.shape2=t),void 0!==i&&(this.precision1=i),void 0!==r&&(this.precision2=r)}},e.MeshMeshesIntersectionOfShapesDto=class{constructor(e,t,i,r){this.precision=.01,void 0!==e&&(this.shape=e),void 0!==t&&(this.shapes=t),void 0!==i&&(this.precision=i),void 0!==r&&(this.precisionShapes=r)}},e.CompareShapesDto=class{constructor(e,t){void 0!==e&&(this.shape=e),void 0!==t&&(this.otherShape=t)}},e.FixSmallEdgesInWireDto=class{constructor(e,t,i){this.lockvtx=!1,this.precsmall=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.lockvtx=t),void 0!==i&&(this.precsmall=i)}},e.BasicShapeRepairDto=class{constructor(e,t,i,r){this.precision=.001,this.maxTolerance=.01,this.minTolerance=1e-4,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==i&&(this.maxTolerance=i),void 0!==r&&(this.minTolerance=r)}},e.FixClosedDto=class{constructor(e,t){this.precision=-.1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t)}},e.ShapesWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.ShapeWithToleranceDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.tolerance=t)}},e.ShapeIndexDto=class{constructor(e,t){this.index=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.EdgeIndexDto=class{constructor(e,t){this.index=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.index=t)}},e.RotationExtrudeDto=class{constructor(e,t,i,r){this.height=1,this.angle=360,this.makeSolid=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.height=t),void 0!==i&&(this.angle=i),void 0!==r&&(this.makeSolid=r)}},e.ThickSolidByJoinDto=class{constructor(e,i,r,s,n,o,a,c){this.offset=1,this.tolerance=.001,this.intersection=!1,this.selfIntersection=!1,this.joinType=t.arc,this.removeIntEdges=!1,void 0!==e&&(this.shape=e),void 0!==i&&(this.shapes=i),void 0!==r&&(this.offset=r),void 0!==s&&(this.tolerance=s),void 0!==n&&(this.intersection=n),void 0!==o&&(this.selfIntersection=o),void 0!==a&&(this.joinType=a),void 0!==c&&(this.removeIntEdges=c)}},e.TransformDto=class{constructor(e,t,i,r,s){this.translation=[0,0,0],this.rotationAxis=[0,1,0],this.rotationAngle=0,this.scaleFactor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t),void 0!==i&&(this.rotationAxis=i),void 0!==r&&(this.rotationAngle=r),void 0!==s&&(this.scaleFactor=s)}},e.TransformShapesDto=class{constructor(e,t,i,r,s){this.translations=[[0,0,0]],this.rotationAxes=[[0,1,0]],this.rotationAngles=[0],this.scaleFactors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t),void 0!==i&&(this.rotationAxes=i),void 0!==r&&(this.rotationAngles=r),void 0!==s&&(this.scaleFactors=s)}},e.TranslateDto=class{constructor(e,t){this.translation=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.translation=t)}},e.TranslateShapesDto=class{constructor(e,t){this.translations=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.translations=t)}},e.AlignNormAndAxisDto=class{constructor(e,t,i,r,s,n,o){this.fromOrigin=[0,0,0],this.fromNorm=[1,0,0],this.fromAx=[0,0,1],this.toOrigin=[0,1,0],this.toNorm=[0,1,0],this.toAx=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==i&&(this.fromNorm=i),void 0!==r&&(this.fromAx=r),void 0!==s&&(this.toOrigin=s),void 0!==n&&(this.toNorm=n),void 0!==o&&(this.toAx=o)}},e.AlignDto=class{constructor(e,t,i,r,s){this.fromOrigin=[0,0,0],this.fromDirection=[0,0,1],this.toOrigin=[0,1,0],this.toDirection=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.fromOrigin=t),void 0!==i&&(this.fromDirection=i),void 0!==r&&(this.toOrigin=r),void 0!==s&&(this.toDirection=s)}},e.AlignShapesDto=class{constructor(e,t,i,r,s){this.fromOrigins=[[0,0,0]],this.fromDirections=[[0,0,1]],this.toOrigins=[[0,1,0]],this.toDirections=[[0,1,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.fromOrigins=t),void 0!==i&&(this.fromDirections=i),void 0!==r&&(this.toOrigins=r),void 0!==s&&(this.toDirections=s)}},e.MirrorDto=class{constructor(e,t,i){this.origin=[0,0,0],this.direction=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==i&&(this.direction=i)}},e.MirrorShapesDto=class{constructor(e,t,i){this.origins=[[0,0,0]],this.directions=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==i&&(this.directions=i)}},e.MirrorAlongNormalDto=class{constructor(e,t,i){this.origin=[0,0,0],this.normal=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.origin=t),void 0!==i&&(this.normal=i)}},e.MirrorAlongNormalShapesDto=class{constructor(e,t,i){this.origins=[[0,0,0]],this.normals=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.origins=t),void 0!==i&&(this.normals=i)}},e.AlignAndTranslateDto=class{constructor(e,t,i){this.direction=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.center=i)}},e.UnifySameDomainDto=class{constructor(e,t,i,r){this.unifyEdges=!0,this.unifyFaces=!0,this.concatBSplines=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.unifyEdges=t),void 0!==i&&(this.unifyFaces=i),void 0!==r&&(this.concatBSplines=r)}},e.FilterFacesPointsDto=class{constructor(e,t,i,r,s,n,o,a,c,h){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,this.flatPointsArray=!0,void 0!==e&&(this.shapes=e),void 0!==t&&(this.points=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.useBndBox=r),void 0!==s&&(this.gapTolerance=s),void 0!==n&&(this.keepIn=n),void 0!==o&&(this.keepOn=o),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c),void 0!==h&&(this.flatPointsArray=h)}},e.FilterFacePointsDto=class{constructor(e,t,i,r,s,n,o,a,c){this.tolerance=1e-4,this.useBndBox=!1,this.gapTolerance=.1,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.useBndBox=r),void 0!==s&&(this.gapTolerance=s),void 0!==n&&(this.keepIn=n),void 0!==o&&(this.keepOn=o),void 0!==a&&(this.keepOut=a),void 0!==c&&(this.keepUnknown=c)}},e.FilterSolidPointsDto=class{constructor(e,t,i,r,s,n,o){this.tolerance=1e-4,this.keepIn=!0,this.keepOn=!0,this.keepOut=!1,this.keepUnknown=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.points=t),void 0!==i&&(this.tolerance=i),void 0!==r&&(this.keepIn=r),void 0!==s&&(this.keepOn=s),void 0!==n&&(this.keepOut=n),void 0!==o&&(this.keepUnknown=o)}},e.AlignAndTranslateShapesDto=class{constructor(e,t,i){this.directions=[[0,1,0]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.directions=t),void 0!==i&&(this.centers=i)}},e.RotateDto=class{constructor(e,t,i){this.axis=[0,0,1],this.angle=0,void 0!==e&&(this.shape=e),void 0!==t&&(this.axis=t),void 0!==i&&(this.angle=i)}},e.RotateAroundCenterDto=class{constructor(e,t,i,r){this.angle=0,this.center=[0,0,0],this.axis=[0,0,1],void 0!==e&&(this.shape=e),void 0!==t&&(this.angle=t),void 0!==i&&(this.center=i),void 0!==r&&(this.axis=r)}},e.RotateShapesDto=class{constructor(e,t,i){this.angles=[0],void 0!==e&&(this.shapes=e),void 0!==t&&(this.axes=t),void 0!==i&&(this.angles=i)}},e.RotateAroundCenterShapesDto=class{constructor(e,t,i,r){this.angles=[0],this.centers=[[0,0,0]],this.axes=[[0,0,1]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.angles=t),void 0!==i&&(this.centers=i),void 0!==r&&(this.axes=r)}},e.ScaleDto=class{constructor(e,t){this.factor=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.factor=t)}},e.ScaleShapesDto=class{constructor(e,t){this.factors=[1],void 0!==e&&(this.shapes=e),void 0!==t&&(this.factors=t)}},e.Scale3DDto=class{constructor(e,t,i){this.scale=[1,1,1],this.center=[0,0,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.scale=t),void 0!==i&&(this.center=i)}},e.Scale3DShapesDto=class{constructor(e,t,i){this.scales=[[1,1,1]],this.centers=[[0,0,0]],void 0!==e&&(this.shapes=e),void 0!==t&&(this.scales=t),void 0!==i&&(this.centers=i)}},e.ShapeToMeshDto=class{constructor(e,t,i){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==i&&(this.adjustYtoZ=i)}},e.ShapeFacesToPolygonPointsDto=class{constructor(e,t,i,r){this.precision=.01,this.adjustYtoZ=!1,this.reversedPoints=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.precision=t),void 0!==i&&(this.adjustYtoZ=i),void 0!==r&&(this.reversedPoints=r)}},e.ShapesToMeshesDto=class{constructor(e,t,i){this.precision=.01,this.adjustYtoZ=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.precision=t),void 0!==i&&(this.adjustYtoZ=i)}},e.SaveStepDto=class{constructor(e,t,i,r){this.fileName="shape.step",this.adjustYtoZ=!1,this.fromRightHanded=!1,this.tryDownload=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==i&&(this.adjustYtoZ=i),void 0!==r&&(this.tryDownload=r)}},e.SaveStlDto=class{constructor(e,t,i,r,s,n){this.fileName="shape.stl",this.precision=.01,this.adjustYtoZ=!1,this.tryDownload=!0,this.binary=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==i&&(this.precision=i),void 0!==r&&(this.adjustYtoZ=r),void 0!==s&&(this.tryDownload=s),void 0!==n&&(this.binary=n)}},e.ShapeToDxfPathsDto=class{constructor(e,t,i,r,s,n){this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.angularDeflection=t),void 0!==i&&(this.curvatureDeflection=i),void 0!==r&&(this.minimumOfPoints=r),void 0!==s&&(this.uTolerance=s),void 0!==n&&(this.minimumLength=n)}},e.DxfPathsWithLayerDto=class{constructor(e,t,i){this.layer="Default",this.color="#000000",void 0!==e&&(this.paths=e),void 0!==t&&(this.layer=t),void 0!==i&&(this.color=i)}},e.DxfPathsPartsListDto=class{constructor(e,t){this.fileName="bitbybit-dev.dxf",this.tryDownload=!0,void 0!==e&&(this.pathsParts=e),void 0!==t&&(this.tryDownload=t)}},e.SaveDxfDto=class{constructor(e,t,i,r,s,n,o,a){this.fileName="shape.dxf",this.tryDownload=!0,this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7,void 0!==e&&(this.shape=e),void 0!==t&&(this.fileName=t),void 0!==i&&(this.tryDownload=i),void 0!==r&&(this.angularDeflection=r),void 0!==s&&(this.curvatureDeflection=s),void 0!==n&&(this.minimumOfPoints=n),void 0!==o&&(this.uTolerance=o),void 0!==a&&(this.minimumLength=a)}},e.ImportStepIgesFromTextDto=class{constructor(e,t,i){this.fileType=n.step,this.adjustZtoY=!0,void 0!==e&&(this.text=e),void 0!==t&&(this.fileType=t),void 0!==i&&(this.adjustZtoY=i)}},e.ImportStepIgesDto=class{constructor(e,t){this.adjustZtoY=!0,void 0!==e&&(this.assetFile=e),void 0!==t&&(this.adjustZtoY=t)}},e.LoadStepOrIgesDto=class{constructor(e,t,i){this.fileName="shape.igs",this.adjustZtoY=!0,void 0!==e&&(this.filetext=e),void 0!==t&&(this.fileName=t),void 0!==i&&(this.adjustZtoY=i)}},e.CompoundShapesDto=class{constructor(e){void 0!==e&&(this.shapes=e)}},e.ThisckSolidSimpleDto=class{constructor(e,t){this.offset=1,void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t)}},e.Offset3DWireDto=class{constructor(e,t,i){this.offset=1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.offset=t),void 0!==i&&(this.direction=i)}},e.FaceFromWireDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.planar=t)}},e.FaceFromWireOnFaceDto=class{constructor(e,t,i){this.inside=!0,void 0!==e&&(this.wire=e),void 0!==t&&(this.face=t),void 0!==i&&(this.inside=i)}},e.FacesFromWiresOnFaceDto=class{constructor(e,t,i){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==i&&(this.inside=i)}},e.FaceFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FacesFromWiresDto=class{constructor(e,t){this.planar=!1,void 0!==e&&(this.shapes=e),void 0!==t&&(this.planar=t)}},e.FaceFromWiresOnFaceDto=class{constructor(e,t,i){this.inside=!0,void 0!==e&&(this.wires=e),void 0!==t&&(this.face=t),void 0!==i&&(this.inside=i)}},e.SewDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.shapes=e),void 0!==t&&(this.tolerance=t)}},e.FaceIsoCurveAtParamDto=class{constructor(e,t,i){this.dir="u",void 0!==e&&(this.shape=e),void 0!==t&&(this.param=t),void 0!==i&&(this.dir=i)}},e.DivideFaceToUVPointsDto=class{constructor(e,t,i,r){this.nrOfPointsU=10,this.nrOfPointsV=10,this.flat=!1,void 0!==e&&(this.shape=e),void 0!==t&&(this.nrOfPointsU=t),void 0!==i&&(this.nrOfPointsV=i),void 0!==r&&(this.flat=r)}},e.Geom2dEllipseDto=class{constructor(e,t,i,r,s){this.center=[0,0],this.direction=[1,0],this.radiusMinor=1,this.radiusMajor=2,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.radiusMinor=i),void 0!==r&&(this.radiusMajor=r),void 0!==s&&(this.sense=s)}},e.Geom2dCircleDto=class{constructor(e,t,i,r){this.center=[0,0],this.direction=[1,0],this.radius=1,this.sense=!1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.radius=i),void 0!==r&&(this.sense=r)}};class T{constructor(e,t,i,r,s,n,o,a,c,h){this.height=6,this.innerDist=1.5,this.outerDist=3,this.nrSkirts=5,this.trunkHeight=1,this.trunkWidth=1,this.half=!1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.innerDist=t),void 0!==i&&(this.outerDist=i),void 0!==r&&(this.nrSkirts=r),void 0!==s&&(this.trunkHeight=s),void 0!==n&&(this.trunkWidth=n),void 0!==o&&(this.half=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c),void 0!==h&&(this.direction=h)}}e.ChristmasTreeDto=T;class P{constructor(e,t,i,r,s,n,o){this.center=[0,0,0],this.direction=[0,1,0],this.numRays=7,this.half=!1,void 0!==e&&(this.outerRadius=e),void 0!==t&&(this.innerRadius=t),void 0!==i&&(this.numRays=i),void 0!==r&&(this.center=r),void 0!==s&&(this.direction=s),void 0!==n&&(this.offsetOuterEdges=n),void 0!==o&&(this.half=o)}}e.StarDto=P;class C{constructor(e,t,i,r,s,n){this.center=[0,0,0],this.direction=[0,1,0],this.aroundCenter=!0,this.width=2,this.height=1,this.angle=15,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.aroundCenter=i),void 0!==r&&(this.width=r),void 0!==s&&(this.height=s),void 0!==n&&(this.angle=n)}}e.ParallelogramDto=C;class k{constructor(e,t,i,r){this.center=[0,0,0],this.direction=[0,1,0],this.rotation=0,this.sizeApprox=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.rotation=i),void 0!==r&&(this.sizeApprox=r)}}e.Heart2DDto=k;class D{constructor(e,t,i,r){this.center=[0,0,0],this.direction=[0,1,0],this.nrCorners=6,this.radius=1,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.nrCorners=i),void 0!==r&&(this.radius=r)}}e.NGonWireDto=D,e.EllipseDto=class{constructor(e,t,i,r){this.center=[0,0,0],this.direction=[0,1,0],this.radiusMinor=1,this.radiusMajor=2,void 0!==e&&(this.center=e),void 0!==t&&(this.direction=t),void 0!==i&&(this.radiusMinor=i),void 0!==r&&(this.radiusMajor=r)}},e.TextWiresDto=class{constructor(e,t,i,r,s,n,o,a,c,h,l,d){this.text="Hello World",this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=2,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==i&&(this.yOffset=i),void 0!==r&&(this.height=r),void 0!==s&&(this.lineSpacing=s),void 0!==n&&(this.letterSpacing=n),void 0!==o&&(this.align=o),void 0!==a&&(this.extrudeOffset=a),void 0!==d&&(this.centerOnOrigin=d)}},e.GeomCylindricalSurfaceDto=class{constructor(e,t,i){this.radius=1,this.center=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.radius=e),void 0!==t&&(this.center=t),void 0!==i&&(this.direction=i)}},e.Geom2dTrimmedCurveDto=class{constructor(e,t,i,r,s){this.u1=0,this.u2=1,this.sense=!0,this.adjustPeriodic=!0,void 0!==e&&(this.shape=e),void 0!==t&&(this.u1=t),void 0!==i&&(this.u2=i),void 0!==r&&(this.sense=r),void 0!==s&&(this.adjustPeriodic=s)}},e.Geom2dSegmentDto=class{constructor(e,t){this.start=[0,0],this.end=[1,0],void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.SliceDto=class{constructor(e,t,i){this.step=.1,this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.step=t),void 0!==i&&(this.direction=i)}},e.SliceInStepPatternDto=class{constructor(e,t,i){this.steps=[.1,.2],this.direction=[0,1,0],void 0!==e&&(this.shape=e),void 0!==t&&(this.steps=t),void 0!==i&&(this.direction=i)}},e.SimpleLinearLengthDimensionDto=class{constructor(e,t,i,r,s,n,o,a,c){this.offsetFromPoints=0,this.crossingSize=.2,this.decimalPlaces=2,this.labelSuffix="(cm)",this.labelSize=.1,this.labelOffset=.3,this.labelRotation=0,void 0!==e&&(this.start=e),void 0!==t&&(this.end=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.offsetFromPoints=r),void 0!==s&&(this.crossingSize=s),void 0!==n&&(this.labelSuffix=n),void 0!==o&&(this.labelSize=o),void 0!==a&&(this.labelOffset=a),void 0!==c&&(this.labelRotation=c)}},e.SimpleAngularDimensionDto=class{constructor(e,t,i,r,s,n,o,a,c,h){this.direction1=[1,0,0],this.direction2=[0,0,1],this.center=[0,0,0],this.radius=4,this.offsetFromCenter=.5,this.extraSize=0,this.decimalPlaces=2,this.labelSuffix="(deg)",this.labelSize=.1,this.labelOffset=.3,this.radians=!1,void 0!==e&&(this.direction1=e),void 0!==t&&(this.direction2=t),void 0!==i&&(this.center=i),void 0!==r&&(this.radius=r),void 0!==s&&(this.offsetFromCenter=s),void 0!==n&&(this.extraSize=n),void 0!==o&&(this.radians=o),void 0!==a&&(this.labelSuffix=a),void 0!==c&&(this.labelSize=c),void 0!==h&&(this.labelOffset=h)}},e.PinWithLabelDto=class{constructor(e,t,i,r,s,n,o){this.startPoint=[0,0,0],this.endPoint=[0,5,2],this.direction=[0,0,1],this.offsetFromStart=0,this.label="Pin",this.labelOffset=.3,this.labelSize=.1,void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.offsetFromStart=r),void 0!==s&&(this.label=s),void 0!==n&&(this.labelOffset=n),void 0!==o&&(this.labelSize=o)}},e.StarSolidDto=class extends P{constructor(e,t,i,r,s,n,o,a,c){super(e,t,i,r,s,n,o),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==a&&(this.extrusionLengthFront=a),void 0!==c&&(this.extrusionLengthBack=c)}},e.NGonSolidDto=class extends D{constructor(e,t,i,r,s,n){super(e,t,i,r),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==s&&(this.extrusionLengthFront=s),void 0!==n&&(this.extrusionLengthBack=n)}},e.ParallelogramSolidDto=class extends C{constructor(e,t,i,r,s,n,o,a){super(e,t,i,r,s,n),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==o&&(this.extrusionLengthFront=o),void 0!==a&&(this.extrusionLengthBack=a)}},e.HeartSolidDto=class extends k{constructor(e,t,i,r,s,n){super(e,t,i,r),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==s&&(this.extrusionLengthFront=s),void 0!==n&&(this.extrusionLengthBack=n)}},e.ChristmasTreeSolidDto=class extends T{constructor(e,t,i,r,s,n,o,a,c,h,l,d){super(e,t,i,r,s,n,o,a,c,h),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==l&&(this.extrusionLengthFront=l),void 0!==d&&(this.extrusionLengthBack=d)}},e.LPolygonSolidDto=class extends y{constructor(e,t,i,r,s,n,o,a,c,h){super(e,t,i,r,s,n,o,a),this.extrusionLengthFront=1,this.extrusionLengthBack=0,void 0!==c&&(this.extrusionLengthFront=c),void 0!==h&&(this.extrusionLengthBack=h)}}}(H||(H={})),function(e){let t,i,r,s;!function(e){e.left="left",e.center="center",e.right="right"}(t=e.horizontalAlignEnum||(e.horizontalAlignEnum={})),function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(i=e.verticalAlignmentEnum||(e.verticalAlignmentEnum={})),function(e){e.top="top",e.bottom="bottom"}(r=e.topBottomEnum||(e.topBottomEnum={})),function(e){e.topLeft="topLeft",e.topMid="topMid",e.topRight="topRight",e.midLeft="midLeft",e.midMid="midMid",e.midRight="midRight",e.bottomLeft="bottomLeft",e.bottomMid="bottomMid",e.bottomRight="bottomRight"}(s=e.basicAlignmentEnum||(e.basicAlignmentEnum={}))}(G||(G={}));class se{starLines(e,t,i,r,s){let n=[];const o=2*Math.PI/i;for(let r=0;r<i;r++){const i=r*o,a=s||0,c=[t*Math.cos(i),a,t*Math.sin(i)],h=[e*Math.cos(i+o/2),0,e*Math.sin(i+o/2)],l=[t*Math.cos(i+o),a,t*Math.sin(i+o)];n.push({start:c,end:h}),n.push({start:h,end:l})}return r&&(n=n.slice(0,n.length/2)),n}parallelogram(e,t,i,r){const s=i*Math.PI/180;let n,o,a,c,h,l,d,u;r?(n=-e/2,o=-t/2,a=e/2,c=-t/2,h=e/2,l=t/2,d=-e/2,u=t/2):(n=0,o=0,a=e,c=0,h=e,l=t,d=0,u=t);const p=t*Math.tan(s)/2;n+=p,a+=p,h-=p,d-=p;const f=[n,0,o],v=[a,0,c],g=[h,0,l],m=[d,0,u];return[{start:f,end:v},{start:v,end:g},{start:g,end:m},{start:m,end:f}]}ngon(e,t,i){const r=2*Math.PI/e,s=[];for(let n=0;n<e;n++){const e=[i[0]+t*Math.cos(n*r),0,i[1]+t*Math.sin(n*r)],o=[i[0]+t*Math.cos((n+1)*r),0,i[1]+t*Math.sin((n+1)*r)];s.push({start:e,end:o})}return s}polygonL(e,t,i,r){return[[0,0,0],[t,0,0],[t,0,-e],[-i,0,-e],[-i,0,r],[0,0,r]]}polygonLInverted(e,t,i,r){return e>=r&&(e=r-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),i>=t&&(i=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[0,0,0],[t,0,0],[t,0,e],[i,0,e],[i,0,r],[0,0,r]]}polygonLMiddle(e,t,i,r){return e>=r&&(e=r-1e-6,console.warn("width first is bigger than length second, to make it work, width second is set to length first - 1e-6")),i>=t&&(i=t-1e-6,console.warn("width second is bigger than length first, to make it work, width second is set to length first - 1e-6")),[[i/2,0,e/2],[i/2,0,r],[-i/2,0,r],[-i/2,0,-e/2],[t,0,-e/2],[t,0,e/2]]}beamIProfile(e,t,i,r,s){const n=e/2,o=t/2,a=i/2,c=[[-n,0,o],[n,0,o],[n,0,o-r],[a,0,o-r],[a,0,-o+r],[n,0,-o+r],[n,0,-o],[-n,0,-o],[-n,0,-o+r],[-a,0,-o+r],[-a,0,o-r],[-n,0,o-r]];return this.applyBeamAlignment(c,e,t,s)}beamHProfile(e,t,i,r,s){const n=e/2,o=t/2,a=i/2,c=[[-n,0,o],[-n+r,0,o],[-n+r,0,a],[n-r,0,a],[n-r,0,o],[n,0,o],[n,0,-o],[n-r,0,-o],[n-r,0,-a],[-n+r,0,-a],[-n+r,0,-o],[-n,0,-o]];return this.applyBeamAlignment(c,e,t,s)}beamTProfile(e,t,i,r,s){const n=e/2,o=t/2,a=i/2,c=[[-n,0,o],[n,0,o],[n,0,o-r],[a,0,o-r],[a,0,-o],[-a,0,-o],[-a,0,o-r],[-n,0,o-r]];return this.applyBeamAlignment(c,e,t,s)}beamUProfile(e,t,i,r,s,n){const o=e/2,a=t/2,c=[[-o,0,a],[-o+r,0,a],[-o+r,0,-a+s],[o-i,0,-a+s],[o-i,0,a],[o,0,a],[o,0,-a],[-o,0,-a]];return this.applyBeamAlignment(c,e,t,n)}applyBeamAlignment(e,t,i,r){let s=0,n=0;switch(r){case G.basicAlignmentEnum.topLeft:s=t/2,n=-i/2;break;case G.basicAlignmentEnum.topMid:s=0,n=-i/2;break;case G.basicAlignmentEnum.topRight:s=-t/2,n=-i/2;break;case G.basicAlignmentEnum.midLeft:s=t/2,n=0;break;case G.basicAlignmentEnum.midMid:s=0,n=0;break;case G.basicAlignmentEnum.midRight:s=-t/2,n=0;break;case G.basicAlignmentEnum.bottomLeft:s=t/2,n=i/2;break;case G.basicAlignmentEnum.bottomMid:s=0,n=i/2;break;case G.basicAlignmentEnum.bottomRight:s=-t/2,n=i/2}return e.map((e=>[e[0]+s,e[1],e[2]+n]))}}class ne{constructor(){this.tolerance=1e-5}degToRad(e){return e*(Math.PI/180)}remap(e,t,i,r,s){return(e-t)/(i-t)*(s-r)+r}removeAllDuplicateVectors(e,t=1e-7){const i=[];return e.forEach((e=>{i.some((i=>this.vectorsTheSame(e,i,t)))||i.push(e)})),i}removeConsecutiveDuplicates(e,t=!0){const i=[];if(e.length>1){for(let t=1;t<e.length;t++){const r=e[t],s=e[t-1];this.vectorsTheSame(r,s,this.tolerance)||i.push(s),t===e.length-1&&i.push(r)}if(t){const e=i[0],t=i[i.length-1];this.vectorsTheSame(e,t,this.tolerance)&&i.pop()}}else 1===e.length&&i.push(...e);return i}vectorsTheSame(e,t,i){let r=!1;if(e.length!==t.length)return r;r=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],i)){r=!1;break}return r}approxEq(e,t,i){return Math.abs(e-t)<i}averageVector(e){return e.reduce(((e,t)=>e.map(((e,i)=>e+t[i]))),[0,0,0]).map((t=>t/e.length))}magnitude(e){return Math.sqrt(e.reduce(((e,t)=>e+t*t),0))}normalize(e){const t=this.magnitude(e);return e.map((e=>e/t))}translatePoint(e,t,i){return[e[0]+t[0]*i,e[1]+t[1]*i,e[2]+t[2]*i]}angleBetweenVectors(e,t){const i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],r=this.magnitude(e),s=this.magnitude(t);return Math.acos(i/(r*s))}distanceBetweenPoints(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}}class oe{constructor(e,t){this.occ=e,this.och=t}geom2dEllipse(e){const t=this.och.entitiesService.gpAx2d(e.center,e.direction),i=new this.occ.Geom2d_Ellipse_2(t,e.radiusMajor,e.radiusMinor,e.sense);return t.delete(),i}geom2dCircle(e){const t=this.och.entitiesService.gpAx2d(e.center,e.direction),i=new this.occ.Geom2d_Circle_2(t,e.radius,e.sense);return t.delete(),i}geom2dTrimmedCurve(e){const t=new this.occ.Handle_Geom2d_Curve_2(e.shape);return new this.occ.Geom2d_TrimmedCurve(t,e.u1,e.u2,e.sense,e.adjustPeriodic)}geom2dSegment(e){const t=this.och.entitiesService.gpPnt2d(e.start),i=this.och.entitiesService.gpPnt2d(e.end),r=new this.occ.GCE2d_MakeSegment_1(t,i),s=r.Value().get();return t.delete(),i.delete(),r.delete(),s}get2dPointFrom2dCurveOnParam(e){const t=e.shape.Value(e.param),i=[t.X(),t.Y()];return t.delete(),i}geomCircleCurve(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,H.typeSpecificityEnum.curve)}geomEllipseCurve(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,H.typeSpecificityEnum.curve)}}class ae{constructor(e,t){this.occ=e,this.och=t}cylindricalSurface(e){const t=this.och.entitiesService.gpAx3_4(e.center,e.direction),i=new this.occ.Geom_CylindricalSurface_1(t,e.radius);return t.delete(),i}surfaceFromFace(e){return this.och.surfaceFromFace(e)}}class ce{constructor(e,t){this.curves=new oe(e,t),this.surfaces=new ae(e,t)}}class he{constructor(e,t){this.occ=e,this.och=t}fromBaseLine(e){return this.line(e.line)}fromBaseLines(e){return e.lines.map((e=>this.line(e)))}fromBaseSegment(e){return this.line({start:e.segment[0],end:e.segment[1]})}fromBaseSegments(e){return e.segments.map((e=>this.line({start:e[0],end:e[1]})))}fromPoints(e){const t=[];for(let i=0;i<e.points.length-1;i++){const r=e.points[i],s=e.points[i+1];t.push(this.line({start:r,end:s}))}return t}fromBasePolyline(e){const t=e.polyline.points;return e.polyline.isClosed&&t.push(t[0]),this.fromPoints({points:t})}fromBaseTriangle(e){const t=e.triangle;return this.fromBasePolyline({polyline:{points:t,isClosed:!0}})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make edges for triangle",e)}})),t.flat()}makeEdgeFromGeom2dCurveAndSurface(e){return this.och.edgesService.makeEdgeFromGeom2dCurveAndSurface(e)}line(e){return this.och.edgesService.lineEdge(e)}arcThroughThreePoints(e){return this.och.edgesService.arcThroughThreePoints(e)}arcThroughTwoPointsAndTangent(e){return this.och.edgesService.arcThroughTwoPointsAndTangent(e)}arcFromCircleAndTwoPoints(e){return this.och.edgesService.arcFromCircleAndTwoPoints(e)}arcFromCircleAndTwoAngles(e){return this.och.edgesService.arcFromCircleAndTwoAngles(e)}arcFromCirclePointAndAngle(e){return this.och.edgesService.arcFromCirclePointAndAngle(e)}createCircleEdge(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,H.typeSpecificityEnum.edge)}createEllipseEdge(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,H.typeSpecificityEnum.edge)}removeInternalEdges(e){const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e.shape,!0,!0,!1);t.Build();const i=t.Shape();return t.delete(),i}getEdge(e){return this.och.shapeGettersService.getEdge(e)}edgesToPoints(e){return this.och.edgesService.edgesToPoints(e)}reversedEdge(e){const t=e.shape.Reversed(),i=this.och.converterService.getActualTypeOfShape(t);return t.delete(),i}pointOnEdgeAtParam(e){return this.och.edgesService.pointOnEdgeAtParam(e)}pointsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtParam({shape:t,param:e.param})))}tangentOnEdgeAtParam(e){return this.och.edgesService.tangentOnEdgeAtParam(e)}tangentsOnEdgesAtParam(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtParam({shape:t,param:e.param})))}startPointOnEdge(e){return this.och.edgesService.startPointOnEdge(e)}startPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.startPointOnEdge({shape:e})))}endPointOnEdge(e){return this.och.edgesService.endPointOnEdge(e)}endPointsOnEdges(e){return e.shapes.map((e=>this.och.edgesService.endPointOnEdge({shape:e})))}pointOnEdgeAtLength(e){return this.och.edgesService.pointOnEdgeAtLength(e)}pointsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.pointOnEdgeAtLength({shape:t,length:e.length})))}tangentOnEdgeAtLength(e){return this.och.edgesService.tangentOnEdgeAtLength(e)}tangentsOnEdgesAtLength(e){return e.shapes.map((t=>this.och.edgesService.tangentOnEdgeAtLength({shape:t,length:e.length})))}divideEdgeByParamsToPoints(e){return this.och.edgesService.divideEdgeByParamsToPoints(e)}divideEdgesByParamsToPoints(e){return e.shapes.map((t=>this.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}divideEdgeByEqualDistanceToPoints(e){return this.och.edgesService.divideEdgeByEqualDistanceToPoints(e)}divideEdgesByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrOfDivisions,removeEndPoint:e.removeEndPoint,removeStartPoint:e.removeStartPoint})))}isEdgeLinear(e){return this.och.edgesService.isEdgeLinear(e)}isEdgeCircular(e){return this.och.edgesService.isEdgeCircular(e)}getEdges(e){return this.och.shapeGettersService.getEdges(e)}getEdgesAlongWire(e){return this.och.edgesService.getEdgesAlongWire(e)}getCircularEdgesAlongWire(e){return this.och.edgesService.getCircularEdgesAlongWire(e)}getLinearEdgesAlongWire(e){return this.och.edgesService.getLinearEdgesAlongWire(e)}getEdgeLength(e){return this.och.edgesService.getEdgeLength(e)}getEdgeLengthsOfShape(e){return this.och.edgesService.getEdgeLengthsOfShape(e)}getEdgesLengths(e){return this.och.edgesService.getEdgesLengths(e)}getEdgeCenterOfMass(e){return this.och.geomService.getLinearCenterOfMass(e)}getEdgesCentersOfMass(e){return this.och.edgesService.getEdgesCentersOfMass(e)}getCornerPointsOfEdgesForShape(e){return this.och.edgesService.getCornerPointsOfEdgesForShape(e)}getCircularEdgeCenterPoint(e){return this.och.edgesService.getCircularEdgeCenterPoint(e)}getCircularEdgeRadius(e){return this.och.edgesService.getCircularEdgeRadius(e)}getCircularEdgePlaneDirection(e){return this.och.edgesService.getCircularEdgePlaneDirection(e)}constraintTanLinesFromTwoPtsToCircle(e){return this.och.edgesService.constraintTanLinesFromTwoPtsToCircle(e)}constraintTanLinesFromPtToCircle(e){return this.och.edgesService.constraintTanLinesFromPtToCircle(e)}constraintTanLinesOnTwoCircles(e){return this.och.edgesService.constraintTanLinesOnTwoCircles(e)}constraintTanCirclesOnTwoCircles(e){return this.och.edgesService.constraintTanCirclesOnTwoCircles(e)}constraintTanCirclesOnCircleAndPnt(e){return this.och.edgesService.constraintTanCirclesOnCircleAndPnt(e)}}class le{constructor(e,t){this.occ=e,this.och=t}fromBaseTriangle(e){const t=this.och.wiresService.createPolygonWire({points:e.triangle});return this.createFaceFromWire({shape:t,planar:!0})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make face for triangle",e)}})),t.flat()}createFaceFromWire(e){return this.och.facesService.createFaceFromWire(e)}createFaceFromWireOnFace(e){return this.och.facesService.createFaceFromWireOnFace(e)}createFacesFromWiresOnFace(e){return this.och.facesService.createFacesFromWiresOnFace(e)}createFaceFromWires(e){return this.och.facesService.createFaceFromWires(e)}createFacesFromWires(e){return this.och.facesService.createFacesFromWires(e)}createFaceFromWiresOnFace(e){return this.och.facesService.createFaceFromWiresOnFace(e)}faceFromSurface(e){return this.och.facesService.faceFromSurface(e)}faceFromSurfaceAndWire(e){return this.och.facesService.faceFromSurfaceAndWire(e)}getUMinBound(e){return this.och.facesService.getUMinBound(e)}getUMaxBound(e){return this.och.facesService.getUMaxBound(e)}getVMinBound(e){return this.och.facesService.getVMinBound(e)}getVMaxBound(e){return this.och.facesService.getVMaxBound(e)}subdivideToPointsControlled(e){return this.och.facesService.subdivideToPointsControlled(e)}subdivideToPoints(e){return this.och.facesService.subdivideToPoints(e)}subdivideToWires(e){return this.och.facesService.subdivideToWires(e)}subdivideToRectangleWires(e){return this.och.facesService.subdivideToRectangleWires(e)}subdivideToRectangleHoles(e){return this.och.facesService.subdivideToRectangleHoles(e)}subdivideToHexagonWires(e){return this.och.facesService.subdivideToHexagonWires(e)}subdivideToHexagonHoles(e){return this.och.facesService.subdivideToHexagonHoles(e)}subdivideToNormals(e){return this.och.facesService.subdivideToNormals(e)}subdivideToPointsOnParam(e){return this.och.facesService.subdivideToPointsOnParam(e)}wireAlongParam(e){return this.och.facesService.wireAlongParam(e)}wiresAlongParams(e){return this.och.facesService.wiresAlongParams(e)}subdivideToUVOnParam(e){return this.och.facesService.subdivideToUVOnParam(e)}subdivideToUV(e){return this.och.facesService.subdivideToUV(e)}uvOnFace(e){return this.och.facesService.uvOnFace(e)}pointsOnUVs(e){return this.och.facesService.pointsOnUVs(e)}normalsOnUVs(e){return this.och.facesService.normalsOnUVs(e)}pointOnUV(e){return this.och.facesService.pointOnUV(e)}normalOnUV(e){return this.och.facesService.faceNormalOnUV(e)}createPolygonFace(e){return this.och.facesService.createPolygonFace(e)}createCircleFace(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,H.typeSpecificityEnum.face)}hexagonsInGrid(e){const t=this.och.wiresService.hexagonsInGrid(e);return this.och.facesService.createFacesFromWires({shapes:t,planar:!0})}createEllipseFace(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,H.typeSpecificityEnum.face)}createSquareFace(e){return this.och.facesService.createSquareFace(e)}createRectangleFace(e){return this.och.facesService.createRectangleFace(e)}createLPolygonFace(e){const t=this.och.wiresService.createLPolygonWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createIBeamProfileFace(e){const t=this.och.wiresService.createIBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createHBeamProfileFace(e){const t=this.och.wiresService.createHBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createTBeamProfileFace(e){const t=this.och.wiresService.createTBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createUBeamProfileFace(e){const t=this.och.wiresService.createUBeamProfileWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createStarFace(e){const t=this.och.wiresService.createStarWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createChristmasTreeFace(e){const t=this.och.wiresService.createChristmasTreeWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createParallelogramFace(e){const t=this.och.wiresService.createParallelogramWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createHeartFace(e){const t=this.och.wiresService.createHeartWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createNGonFace(e){const t=this.och.wiresService.createNGonWire(e);return this.createFaceFromWire({shape:t,planar:!0})}createFaceFromMultipleCircleTanWireCollections(e){return this.och.facesService.createFaceFromMultipleCircleTanWireCollections(e)}createFaceFromMultipleCircleTanWires(e){return this.och.facesService.createFaceFromMultipleCircleTanWires(e)}getFace(e){return this.och.shapeGettersService.getFace(e)}getFaces(e){return this.och.shapeGettersService.getFaces(e)}reversedFace(e){const t=e.shape.Reversed(),i=this.och.converterService.getActualTypeOfShape(t);return t.delete(),i}getFaceArea(e){return this.och.facesService.getFaceArea(e)}getFacesAreas(e){return this.och.facesService.getFacesAreas(e)}getFaceCenterOfMass(e){return this.och.facesService.getFaceCenterOfMass(e)}getFacesCentersOfMass(e){return this.och.facesService.getFacesCentersOfMass(e)}filterFacePoints(e){return this.och.facesService.filterFacePoints(e)}filterFacesPoints(e){let t=e.shapes.map((t=>this.och.facesService.filterFacePoints(Object.assign(Object.assign({},e),{shape:t}))));return e.flatPointsArray&&(t=t.flat()),t}}class de{constructor(e,t){this.occ=e,this.och=t}makeCompound(e){return this.och.converterService.makeCompound(e)}getShapesOfCompound(e){return this.och.shapeGettersService.getShapesOfCompound(e)}}class ue{constructor(e,t){this.occ=e,this.och=t}vertexFromXYZ(e){return this.och.verticesService.vertexFromXYZ(e)}vertexFromPoint(e){return this.och.verticesService.vertexFromPoint(e)}verticesFromPoints(e){return this.och.verticesService.verticesFromPoints(e)}verticesCompoundFromPoints(e){return this.och.verticesService.verticesCompoundFromPoints(e)}getVertices(e){return this.och.verticesService.getVertices(e)}getVerticesAsPoints(e){return this.och.verticesService.getVerticesAsPoints(e)}verticesToPoints(e){return this.och.verticesService.verticesToPoints(e)}vertexToPoint(e){return this.och.verticesService.vertexToPoint(e)}projectPoints(e){return this.och.verticesService.projectPoints(e)}}class pe{constructor(e,t){this.occ=e,this.och=t}purgeInternalEdges(e){const t=new this.occ.TopOpeBRepTool_PurgeInternalEdges(e.shape,!0);if(t.Perform(),t.IsDone())return t.Shape();throw new Error("Could not purge internal edges for the shape")}unifySameDomain(e){const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e.shape,e.unifyEdges,e.unifyFaces,e.concatBSplines);return t.Build(),t.Shape()}isClosed(e){return e.shape.Closed_1()}isConvex(e){return e.shape.Convex_1()}isChecked(e){return e.shape.Checked_1()}isFree(e){return e.shape.Free_1()}isInfinite(e){return e.shape.Infinite_1()}isModified(e){return e.shape.Modified_1()}isLocked(e){return e.shape.Locked_1()}isNull(e){return e.shape.IsNull()}isEqual(e){return e.shape.IsEqual(e.otherShape)}isNotEqual(e){return e.shape.IsNotEqual(e.otherShape)}isPartner(e){return e.shape.IsPartner(e.otherShape)}isSame(e){return e.shape.IsSame(e.otherShape)}getOrientation(e){const t=e.shape.Orientation_1();let i;return t===this.occ.TopAbs_Orientation.TopAbs_FORWARD?i=H.topAbsOrientationEnum.forward:t===this.occ.TopAbs_Orientation.TopAbs_REVERSED?i=H.topAbsOrientationEnum.reversed:t===this.occ.TopAbs_Orientation.TopAbs_INTERNAL?i=H.topAbsOrientationEnum.internal:t===this.occ.TopAbs_Orientation.TopAbs_EXTERNAL&&(i=H.topAbsOrientationEnum.external),i}getShapeType(e){return this.och.enumService.getShapeTypeEnum(e.shape)}}class fe{constructor(e,t){this.occ=e,this.och=t}sewFaces(e){return this.och.shellsService.sewFaces(e)}isClosed(e){return this.occ.BRep_Tool.IsClosed_1(e.shape)}getShellSurfaceArea(e){return this.och.shellsService.getShellSurfaceArea(e)}}class ve{constructor(e,t){this.occ=e,this.och=t}fromClosedShell(e){return this.och.solidsService.fromClosedShell(e)}createBox(e){return this.och.solidsService.createBox(e)}createCube(e){return this.och.solidsService.createCube(e)}createBoxFromCorner(e){return this.och.solidsService.createBoxFromCorner(e)}createCylinder(e){return this.och.solidsService.createCylinder(e)}createCylindersOnLines(e){return this.och.solidsService.createCylindersOnLines(e)}createSphere(e){return this.och.solidsService.createSphere(e)}createCone(e){return this.och.solidsService.createCone(e)}createIBeamProfileSolid(e){const t=this.och.wiresService.createIBeamProfileWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createHBeamProfileSolid(e){const t=this.och.wiresService.createHBeamProfileWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createTBeamProfileSolid(e){const t=this.och.wiresService.createTBeamProfileWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createUBeamProfileSolid(e){const t=this.och.wiresService.createUBeamProfileWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createStarSolid(e){const t=this.och.wiresService.createStarWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createNGonSolid(e){const t=this.och.wiresService.createNGonWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createParallelogramSolid(e){const t=this.och.wiresService.createParallelogramWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createHeartSolid(e){const t=this.och.wiresService.createHeartWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createChristmasTreeSolid(e){const t=this.och.wiresService.createChristmasTreeWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}createLPolygonSolid(e){const t=this.och.wiresService.createLPolygonWire(e),i=this.och.facesService.createFaceFromWire({shape:t,planar:!0});return this.extrudeFaceToSolid(i,e.direction,e.extrusionLengthFront,e.extrusionLengthBack)}extrudeFaceToSolid(e,t,i,r){const s=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)),n=[t[0]/s,t[1]/s,t[2]/s],o=new this.occ.gp_Vec_4(n[0]*i,n[1]*i,n[2]*i),a=new this.occ.BRepPrimAPI_MakePrism_1(e,o,!1,!0);let c=a.Shape();if(a.delete(),o.delete(),r>0){const t=new this.occ.gp_Vec_4(-n[0]*r,-n[1]*r,-n[2]*r),i=new this.occ.BRepPrimAPI_MakePrism_1(e,t,!1,!0),s=i.Shape();i.delete(),t.delete();const o=this.och.booleansService.union({shapes:[c,s],keepEdges:!1});c.delete(),s.delete(),c=o}return e.delete(),this.och.converterService.getActualTypeOfShape(c)}getSolidSurfaceArea(e){return this.och.solidsService.getSolidSurfaceArea(e)}getSolidVolume(e){return this.och.solidsService.getSolidVolume(e)}getSolidsVolumes(e){return this.och.solidsService.getSolidsVolumes(e)}getSolidCenterOfMass(e){return this.och.solidsService.getSolidCenterOfMass(e)}getSolidsCentersOfMass(e){return this.och.solidsService.getSolidsCentersOfMass(e)}getSolids(e){return this.och.solidsService.getSolids(e)}filterSolidPoints(e){return this.och.solidsService.filterSolidPoints(e)}}class ge{constructor(e,t){this.occ=e,this.och=t}fromBaseLine(e){return this.createLineWire(e.line)}fromBaseLines(e){return e.lines.map((e=>this.createLineWire(e)))}fromBaseSegment(e){return this.createLineWire({start:e.segment[0],end:e.segment[1]})}fromBaseSegments(e){return e.segments.map((e=>this.createLineWire({start:e[0],end:e[1]})))}fromPoints(e){let t;if(e.points.length>1){const i=e.points[0],r=e.points[1];t=this.och.base.point.twoPointsAlmostEqual({point1:i,point2:r})?this.createPolygonWire({points:e.points}):this.createPolylineWire({points:e.points})}return t}fromBasePolyline(e){let t;return e.polyline.points,t=e.polyline.isClosed?this.createPolygonWire({points:e.polyline.points}):this.createPolylineWire({points:e.polyline.points}),t}fromBaseTriangle(e){const t=e.triangle;return this.fromBasePolyline({polyline:{points:t,isClosed:!0}})}fromBaseMesh(e){const t=[];return e.mesh.forEach((e=>{try{t.push(this.fromBaseTriangle({triangle:e}))}catch(t){console.warn("Failed to make wire for triangle",e)}})),t.flat()}createPolygonWire(e){return this.och.wiresService.createPolygonWire(e)}createPolygons(e){const t=e.polygons.map((e=>this.createPolygonWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createPolylineWire(e){return this.och.wiresService.createPolylineWire(e)}createPolylines(e){const t=e.polylines.map((e=>this.createPolylineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createLineWire(e){return this.och.wiresService.createLineWire(e)}createLineWireWithExtensions(e){return this.och.wiresService.createLineWireWithExtensions(e)}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezier(e){return this.och.wiresService.createBezier(e)}createBezierWires(e){const t=e.bezierWires.map((e=>this.createBezier(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createBezierWeights(e){return this.och.wiresService.createBezierWeights(e)}interpolatePoints(e){return this.och.wiresService.interpolatePoints(e)}interpolateWires(e){const t=e.interpolations.map((e=>this.interpolatePoints(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}splitOnPoints(e){return this.och.wiresService.splitOnPoints(e)}combineEdgesAndWiresIntoAWire(e){return this.och.converterService.combineEdgesAndWiresIntoAWire(e)}createWireFromEdge(e){return this.och.wiresService.createWireFromEdge(e)}addEdgesAndWiresToWire(e){return this.och.wiresService.addEdgesAndWiresToWire(e)}createBSpline(e){return this.och.wiresService.createBSpline(e)}createBSplines(e){const t=e.bSplines.map((e=>this.createBSpline(e))).filter((e=>void 0!==e));return this.och.converterService.makeCompoundIfNeeded(t,e.returnCompound)}hexagonsInGrid(e){return this.och.wiresService.hexagonsInGrid(e)}createZigZagBetweenTwoWires(e){return this.och.wiresService.createZigZagBetweenTwoWires(e)}divideWireByParamsToPoints(e){return this.och.wiresService.divideWireByParamsToPoints(e)}divideWiresByParamsToPoints(e){return e.shapes.map((t=>this.divideWireByParamsToPoints(Object.assign(Object.assign({},e),{shape:t}))))}divideWireByEqualDistanceToPoints(e){return this.och.wiresService.divideWireByEqualDistanceToPoints(e)}divideWiresByEqualDistanceToPoints(e){return e.shapes.map((t=>this.divideWireByEqualDistanceToPoints(Object.assign(Object.assign({},e),{shape:t}))))}pointOnWireAtParam(e){return this.och.wiresService.pointOnWireAtParam(e)}pointOnWireAtLength(e){return this.och.wiresService.pointOnWireAtLength(e)}pointsOnWireAtLengths(e){return this.och.wiresService.pointsOnWireAtLengths(e)}pointsOnWireAtEqualLength(e){return this.och.wiresService.pointsOnWireAtEqualLength(e)}pointsOnWireAtPatternOfLengths(e){return this.och.wiresService.pointsOnWireAtPatternOfLengths(e)}tangentOnWireAtParam(e){return this.och.wiresService.tangentOnWireAtParam(e)}tangentOnWireAtLength(e){return this.och.wiresService.tangentOnWireAtLength(e)}derivativesOnWireAtLength(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=new this.occ.GCPnts_AbscissaPoint_2(i,e.length,i.FirstParameter()),s=r.Parameter(),n=this.och.entitiesService.gpPnt([0,0,0]),o=this.och.entitiesService.gpVec([0,0,0]),a=this.och.entitiesService.gpVec([0,0,0]),c=this.och.entitiesService.gpVec([0,0,0]);i.D3(s,n,o,a,c);const h=[[o.X(),o.Y(),o.Z()],[a.X(),a.Y(),a.Z()],[c.X(),c.Y(),c.Z()]];return o.delete(),a.delete(),c.delete(),i.delete(),r.delete(),n.delete(),h}derivativesOnWireAtParam(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.och.entitiesService.gpPnt([0,0,0]),s=this.och.entitiesService.gpVec([0,0,0]),n=this.och.entitiesService.gpVec([0,0,0]),o=this.och.entitiesService.gpVec([0,0,0]),a=this.och.vecHelper.remap(e.param,0,1,i.FirstParameter(),i.LastParameter());i.D3(a,r,s,n,o);const c=[[s.X(),s.Y(),s.Z()],[n.X(),n.Y(),n.Z()],[o.X(),o.Y(),o.Z()]];return s.delete(),n.delete(),o.delete(),i.delete(),r.delete(),c}startPointOnWire(e){return this.och.wiresService.startPointOnWire(e)}midPointOnWire(e){return this.och.wiresService.midPointOnWire(e)}endPointOnWire(e){return this.och.wiresService.endPointOnWire(e)}createCircleWire(e){return this.och.entitiesService.createCircle(e.radius,e.center,e.direction,H.typeSpecificityEnum.wire)}createEllipseWire(e){return this.och.entitiesService.createEllipse(e.radiusMinor,e.radiusMajor,e.center,e.direction,H.typeSpecificityEnum.wire)}textWires(e){return this.och.wiresService.textWires(e)}textWiresWithData(e){return this.och.wiresService.textWiresWithData(e)}createSquareWire(e){return this.och.wiresService.createSquareWire(e)}createStarWire(e){return this.och.wiresService.createStarWire(e)}createChristmasTreeWire(e){return this.och.wiresService.createChristmasTreeWire(e)}createParallelogramWire(e){return this.och.wiresService.createParallelogramWire(e)}createHeartWire(e){return this.och.wiresService.createHeartWire(e)}createNGonWire(e){return this.och.wiresService.createNGonWire(e)}createRectangleWire(e){return this.och.wiresService.createRectangleWire(e)}createLPolygonWire(e){return this.och.wiresService.createLPolygonWire(e)}createIBeamProfileWire(e){return this.och.wiresService.createIBeamProfileWire(e)}createHBeamProfileWire(e){return this.och.wiresService.createHBeamProfileWire(e)}createTBeamProfileWire(e){return this.och.wiresService.createTBeamProfileWire(e)}createUBeamProfileWire(e){return this.och.wiresService.createUBeamProfileWire(e)}getWire(e){return this.och.shapeGettersService.getWire(e)}getWires(e){return this.och.shapeGettersService.getWires(e)}getWireLength(e){return this.och.wiresService.getWireLength(e)}getWiresLengths(e){return this.och.wiresService.getWiresLengths(e)}isWireClosed(e){return this.och.wiresService.isWireClosed(e)}getWireCenterOfMass(e){return this.och.wiresService.getWireCenterOfMass(e)}getWiresCentersOfMass(e){return e.shapes.map((e=>this.och.wiresService.getWireCenterOfMass({shape:e})))}reversedWire(e){return this.och.wiresService.reversedWire(e)}reversedWireFromReversedEdges(e){return this.och.wiresService.reversedWireFromReversedEdges(e)}placeWireOnFace(e){const t=e.wire,i=e.face,r=this.och.surfaceFromFace({shape:i});return this.och.wiresService.placeWire(t,r)}placeWiresOnFace(e){const t=e.wires,i=e.face,r=this.och.surfaceFromFace({shape:i});return t.map((e=>this.och.wiresService.placeWire(e,r)))}closeOpenWire(e){const t=e.shape,i=this.och.wiresService.startPointOnWire({shape:t}),r=this.och.wiresService.endPointOnWire({shape:t});if(this.och.vecHelper.vectorsTheSame(i,r,1e-7))return t;const s=this.createLineWire({start:r,end:i}),n=this.addEdgesAndWiresToWire({shape:t,shapes:[s]});return s.delete(),n}project(e){const t=e.wire,i=this.och.entitiesService.gpDir(e.direction),r=new this.occ.BRepProj_Projection_1(t,e.shape,i),s=r.Shape();return i.delete(),r.delete(),s}wiresToPoints(e){return this.och.wiresService.wiresToPoints(e)}projectWires(e){const t=[];return e.wires.forEach((i=>{const r=this.och.entitiesService.gpDir(e.direction),s=new this.occ.BRepProj_Projection_1(i,e.shape,r),n=s.Shape();t.push(n),r.delete(),s.delete()})),t}createWireFromTwoCirclesTan(e){return this.och.wiresService.createWireFromTwoCirclesTan(e)}}class me{constructor(e,t){this.vertex=new ue(e,t),this.edge=new he(e,t),this.wire=new ge(e,t),this.face=new le(e,t),this.shell=new fe(e,t),this.solid=new ve(e,t),this.compound=new de(e,t),this.shape=new pe(e,t)}}class Se{constructor(e){this.occ=e}BRep_Tool_Range_1(e,t,i){return this.occ.BRep_Tool.Range_1(e,t,i)}BRep_Tool_Curve_2(e,t,i){return this.occ.BRep_Tool.Curve_2(e,t,i)}BRepTools_UVBounds_1(e,t,i,r,s){return this.occ.BRepTools.UVBounds_1(e,t,i,r,s)}}class ye{constructor(e){this.occ=e}forEachWire(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_WIRE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_WIRE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,this.occ.TopoDS.Wire_2(r.Current()));r.delete()}forEachEdge(e,t){const i={};let r=0;const s=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(s.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);s.More();s.Next()){const e=this.occ.TopoDS.Edge_1(s.Current()),n=e.HashCode(1e8);Object.prototype.hasOwnProperty.call(i,n)||(i[n]=r,r++,t(r,e))}return s.delete(),i}forEachEdgeAlongWire(e,t){const i={};let r=0;const s=new this.occ.BRepTools_WireExplorer_1;for(s.Init_1(e);s.More();s.Next()){const e=this.occ.TopoDS.Edge_1(s.Current()),n=e.HashCode(1e8);Object.prototype.hasOwnProperty.call(i,n)||(i[n]=r,r++,t(r,e))}return s.delete(),i}forEachFace(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_FACE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_FACE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,this.occ.TopoDS.Face_1(r.Current()));r.delete()}forEachShell(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_SHELL,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_SHELL,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,this.occ.TopoDS.Shell_1(r.Current()));r.delete()}forEachVertex(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,this.occ.TopoDS.Vertex_1(r.Current()));r.delete()}forEachSolid(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_SOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_SOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,this.occ.TopoDS.Solid_2(r.Current()));r.delete()}forEachCompound(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,r.Current());r.delete()}forEachCompSolid(e,t){let i=0;const r=new this.occ.TopExp_Explorer_2(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);for(r.Init(e,this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);r.More();r.Next())t(i++,r.Current());r.delete()}forEachShapeInCompound(e,t){let i=0;const r=new this.occ.TopoDS_Iterator_1;for(r.Initialize(e,!0,!0);r.More();r.Next())t(i++,r.Value());r.delete()}}class be{constructor(e){this.occ=e}getShapeTypeEnum(e){let t=H.shapeTypeEnum.unknown;const i=e.ShapeType();return t=i===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?H.shapeTypeEnum.edge:i===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE?H.shapeTypeEnum.wire:i===this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX?H.shapeTypeEnum.vertex:i===this.occ.TopAbs_ShapeEnum.TopAbs_SOLID?H.shapeTypeEnum.solid:i===this.occ.TopAbs_ShapeEnum.TopAbs_SHELL?H.shapeTypeEnum.shell:i===this.occ.TopAbs_ShapeEnum.TopAbs_FACE?H.shapeTypeEnum.face:i===this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID?H.shapeTypeEnum.compSolid:i===this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND?H.shapeTypeEnum.compound:H.shapeTypeEnum.shape,t}getGccEntPositionFromEnum(e){let t=this.occ.GccEnt_Position.GccEnt_noqualifier;return t=e===H.gccEntPositionEnum.unqualified?this.occ.GccEnt_Position.GccEnt_unqualified:e===H.gccEntPositionEnum.enclosed?this.occ.GccEnt_Position.GccEnt_enclosed:e===H.gccEntPositionEnum.enclosing?this.occ.GccEnt_Position.GccEnt_enclosing:e===H.gccEntPositionEnum.outside?this.occ.GccEnt_Position.GccEnt_outside:(H.gccEntPositionEnum.noqualifier,this.occ.GccEnt_Position.GccEnt_noqualifier),t}getTopAbsStateEnum(e){let t=H.topAbsStateEnum.unknown;return t=e===this.occ.TopAbs_State.TopAbs_IN?H.topAbsStateEnum.in:e===this.occ.TopAbs_State.TopAbs_OUT?H.topAbsStateEnum.out:e===this.occ.TopAbs_State.TopAbs_ON?H.topAbsStateEnum.on:H.topAbsStateEnum.unknown,t}convertFourSidesStrictEnumToTwoCircleInclusionEnum(e){return e===H.fourSidesStrictEnum.inside?H.twoCircleInclusionEnum.inside:e===H.fourSidesStrictEnum.outside?H.twoCircleInclusionEnum.outside:e===H.fourSidesStrictEnum.insideOutside?H.twoCircleInclusionEnum.insideOutside:e===H.fourSidesStrictEnum.outsideInside?H.twoCircleInclusionEnum.outsideInside:H.twoCircleInclusionEnum.none}getGeomFillTrihedronEnumOCCTValue(e){return e===H.geomFillTrihedronEnum.isConstantNormal?this.occ.GeomFill_Trihedron.GeomFill_IsConstantNormal:e===H.geomFillTrihedronEnum.isCorrectedFrenet?this.occ.GeomFill_Trihedron.GeomFill_IsCorrectedFrenet:e===H.geomFillTrihedronEnum.isDarboux?this.occ.GeomFill_Trihedron.GeomFill_IsDarboux:e===H.geomFillTrihedronEnum.isDiscreteTrihedron?this.occ.GeomFill_Trihedron.GeomFill_IsDiscreteTrihedron:e===H.geomFillTrihedronEnum.isFixed?this.occ.GeomFill_Trihedron.GeomFill_IsFixed:e===H.geomFillTrihedronEnum.isFrenet?this.occ.GeomFill_Trihedron.GeomFill_IsFrenet:e===H.geomFillTrihedronEnum.isGuideAC?this.occ.GeomFill_Trihedron.GeomFill_IsGuideAC:e===H.geomFillTrihedronEnum.isGuideACWithContact?this.occ.GeomFill_Trihedron.GeomFill_IsGuideACWithContact:e===H.geomFillTrihedronEnum.isGuidePlan?this.occ.GeomFill_Trihedron.GeomFill_IsGuidePlan:e===H.geomFillTrihedronEnum.isGuidePlanWithContact?this.occ.GeomFill_Trihedron.GeomFill_IsGuidePlanWithContact:this.occ.GeomFill_Trihedron.GeomFill_IsConstantNormal}}class we{constructor(e){this.occ=e}getActualTypeOfShape(e){let t=e;return t=e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?this.occ.TopoDS.Edge_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE?this.occ.TopoDS.Wire_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX?this.occ.TopoDS.Vertex_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SOLID?this.occ.TopoDS.Solid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_SHELL?this.occ.TopoDS.Shell_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_FACE?this.occ.TopoDS.Face_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID?this.occ.TopoDS.CompSolid_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_COMPOUND?this.occ.TopoDS.Compound_1(e):e,t}combineEdgesAndWiresIntoAWire(e){if(void 0===e.shapes)throw Error("Shapes are not defined");const t=new this.occ.BRepBuilderAPI_MakeWire_1;if(e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?t.Add_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE&&t.Add_2(e)})),t.IsDone()){this.occ.BRepLib.BuildCurves3d_1(t.Wire(),1e-7,this.occ.GeomAbs_Shape.GeomAbs_C1,14,0);const e=t.Wire();return t.delete(),e}{let e;const i=t.Error();throw t.delete(),i===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire?e="Wire is disconnected and can not be constructed":i===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire?e="Wire is empty and can not be constructed":i===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire?e="Wire is non manifold and can not be constructed":i===this.occ.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone&&(e="Wire is done"),new Error(e)}}vertexToPoint(e){const t=this.occ.BRep_Tool.Pnt(e.shape),i=[t.X(),t.Y(),t.Z()];return t.delete(),i}getGeomCurveFromEdge(e,t,i){const r=e.Location_1();return this.occ.BRep_Tool.Curve_1(e,r,t,i).get()}makeCompound(e){const t=new this.occ.TopoDS_Compound,i=new this.occ.BRep_Builder;return i.MakeCompound(t),e.shapes.forEach((e=>{const r=new this.occ.BRepBuilderAPI_Copy_2(e,!0,!1),s=r.Shape();i.Add(t,s),r.delete(),s.delete()})),i.delete(),t}makeCompoundIfNeeded(e,t){if(t){const t=this.makeCompound({shapes:e});return e.forEach((e=>e.delete())),t}return e}}class Ee{constructor(e){this.occ=e}createCircle(e,t,i,r){const s=this.gcMakeCircle(t,i,e);if(r===H.typeSpecificityEnum.curve)return s;{const e=this.bRepBuilderAPIMakeEdge(s);if(r===H.typeSpecificityEnum.edge)return e;{const t=this.bRepBuilderAPIMakeWire(e);if(r===H.typeSpecificityEnum.wire)return e.delete(),t;if(r===H.typeSpecificityEnum.face)return this.bRepBuilderAPIMakeFaceFromWire(t,!0)}}return s}createEllipse(e,t,i,r,s){const n=this.gcMakeEllipse(i,r,e,t);if(s===H.typeSpecificityEnum.curve)return n;{const e=this.bRepBuilderAPIMakeEdge(n);if(s===H.typeSpecificityEnum.edge)return e;{const t=this.bRepBuilderAPIMakeWire(e);if(s===H.typeSpecificityEnum.wire)return e.delete(),t;if(s===H.typeSpecificityEnum.face)return this.bRepBuilderAPIMakeFaceFromWire(t,!0)}}return n}makeVertex(e){const t=this.gpPnt(e),i=new this.occ.BRepBuilderAPI_MakeVertex(t),r=i.Vertex();return t.delete(),i.delete(),r}gpPnt2d(e){return new this.occ.gp_Pnt2d_3(e[0],e[1])}gpPnt(e){return new this.occ.gp_Pnt_3(e[0],e[1],e[2])}gpVec(e){return new this.occ.gp_Vec_4(e[0],e[1],e[2])}gpXYZ(e){return new this.occ.gp_XYZ_2(e[0],e[1],e[2])}gpVec2d(e){return new this.occ.gp_Vec2d_4(e[0],e[1])}gpDir(e){return new this.occ.gp_Dir_4(e[0],e[1],e[2])}gpDir2d(e){return new this.occ.gp_Dir2d_4(e[0],e[1])}gcMakeCircle(e,t,i){const r=new this.occ.GC_MakeCircle_2(this.gpAx2(e,t),i),s=r.Value().get();return r.delete(),s}gcMakeEllipse(e,t,i,r){const s=this.gpAx2(e,t),n=new this.occ.GC_MakeEllipse_2(s,r,i);if(n.IsDone()){const e=n.Value().get();return n.delete(),s.delete(),e}throw new Error("Ellipse could not be created.")}bRepBuilderAPIMakeEdge(e){const t=this.castToHandleGeomCurve(e),i=new this.occ.BRepBuilderAPI_MakeEdge_24(t),r=i.Edge();return i.delete(),t.delete(),r}bRepBuilderAPIMakeWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e),i=t.Wire();return t.delete(),i}bRepBuilderAPIMakeShell(e){const t=this.occ.BRep_Tool.Surface_2(e),i=new this.occ.BRepBuilderAPI_MakeShell_2(t,!1),r=i.Shell();return i.delete(),t.delete(),r}bRepBuilderAPIMakeFaceFromWires(e,t,i,r){let s;const n=[];return e.forEach((e=>{if(n.length>0){const t=new this.occ.BRepBuilderAPI_MakeFace_22(n[n.length-1],e);n.push(t.Face()),t.delete()}else{let s;if(i){const t=this.occ.BRep_Tool.Surface_2(i);s=new this.occ.BRepBuilderAPI_MakeFace_21(t,e,r)}else s=new this.occ.BRepBuilderAPI_MakeFace_15(e,t);n.push(s.Face()),s.delete()}})),n.length>0&&(s=n.pop(),n.forEach((e=>e.delete()))),s}bRepBuilderAPIMakeFaceFromWire(e,t){const i=new this.occ.BRepBuilderAPI_MakeFace_15(e,t),r=i.Face();return i.delete(),r}bRepBuilderAPIMakeFacesFromWiresOnFace(e,t,i){const r=this.occ.BRep_Tool.Surface_2(e),s=t.map((e=>this.bRepBuilderAPIMakeFaceFromWireOnSurface(r,e,i)));return r.delete(),s}bRepBuilderAPIMakeFaceFromWireOnFace(e,t,i){const r=this.occ.BRep_Tool.Surface_2(e),s=this.bRepBuilderAPIMakeFaceFromWireOnSurface(r,t,i);return r.delete(),s}bRepBuilderAPIMakeFaceFromWireOnSurface(e,t,i){const r=new this.occ.BRepBuilderAPI_MakeFace_21(e,t,i),s=r.Face();return r.delete(),s}bRepBuilderAPIMakeFaceFromSurface(e,t){const i=new this.occ.Handle_Geom_Surface_2(e),r=new this.occ.BRepBuilderAPI_MakeFace_8(i,t),s=r.Face();return r.delete(),i.delete(),s}bRepBuilderAPIMakeFaceFromSurfaceAndWire(e,t,i){const r=new this.occ.Handle_Geom_Surface_2(e),s=new this.occ.BRepBuilderAPI_MakeFace_21(r,t,i),n=s.Face();return s.delete(),r.delete(),n}bRepPrimAPIMakeSphere(e,t,i){const r=this.gpAx2(e,t),s=new this.occ.BRepPrimAPI_MakeSphere_9(r,i),n=s.Shape();return s.delete(),r.delete(),n}gpAx3_3(e,t,i){return new this.occ.gp_Ax3_3(this.gpPnt(e),this.gpDir(t),this.gpDir(i))}gpAx3_4(e,t){return new this.occ.gp_Ax3_4(this.gpPnt(e),this.gpDir(t))}gpAx2(e,t){return new this.occ.gp_Ax2_3(this.gpPnt(e),this.gpDir(t))}gpAx2FromTwoVectors(e,t,i){return new this.occ.gp_Ax2_2(this.gpPnt(e),this.gpDir(t),this.gpDir(i))}gpAx1(e,t){return new this.occ.gp_Ax1_2(this.gpPnt(e),this.gpDir(t))}gpAx2d(e,t){const i=this.gpPnt2d(e),r=this.gpDir2d(t);return new this.occ.gp_Ax2d_2(i,r)}gpAx22d(e,t,i){const r=this.gpPnt2d(e),s=this.gpDir2d(t),n=this.gpDir2d(i),o=new this.occ.gp_Ax22d_2(r,s,n);return s.delete(),n.delete(),r.delete(),o}gpPln(e,t){const i=this.gpPnt(e),r=this.gpDir(t),s=new this.occ.gp_Pln_3(i,r);return i.delete(),r.delete(),s}bRepPrimAPIMakeCylinder(e,t,i,r,s){const n=this.gpAx2(e,t),o=new this.occ.BRepPrimAPI_MakeCylinder_4(n,i,r,s),a=o.Shape();return o.delete(),n.delete(),a}bRepPrimAPIMakeCylinderBetweenPoints(e,t,i){const r=this.gpPnt(e),s=this.gpPnt(t),n=new this.occ.gp_Vec_5(r,s),o=n.Magnitude(),a=this.gpAx2(e,[n.X(),n.Y(),n.Z()]),c=new this.occ.BRepPrimAPI_MakeCylinder_3(a,i,o),h=c.Shape();return c.delete(),a.delete(),r.delete(),s.delete(),n.delete(),h}bRepPrimAPIMakeBox(e,t,i,r){const s=this.gpPnt([-e/2+r[0],-i/2+r[1],-t/2+r[2]]),n=new this.occ.BRepPrimAPI_MakeBox_3(s,e,i,t),o=n.Shape();return n.delete(),s.delete(),o}castToHandleGeomCurve(e){return new this.occ.Handle_Geom_Curve_2(e)}}class xe{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u){this.occ=e,this.enumService=t,this.entitiesService=i,this.converterService=r,this.booleansService=s,this.shapeGettersService=n,this.edgesService=o,this.transformsService=a,this.vecHelper=c,this.wiresService=h,this.facesService=l,this.solidsService=d,this.shellsService=u}loftAdvanced(e){if(e.periodic&&!e.closed)throw new Error("Cant construct periodic non closed loft.");const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,e.straight,e.tolerance),i=[],r=[];if(e.startVertex){const i=this.entitiesService.makeVertex(e.startVertex);t.AddVertex(i),r.push(i)}if(e.closed&&!e.periodic)e.shapes.push(e.shapes[0]);else if(e.closed&&e.periodic){const r=[];e.shapes.forEach((t=>{this.enumService.getShapeTypeEnum(t)===H.shapeTypeEnum.edge&&(t=this.entitiesService.bRepBuilderAPIMakeWire(t));const i=this.wiresService.divideWireByParamsToPoints({shape:t,nrOfDivisions:e.nrPeriodicSections,removeStartPoint:!1,removeEndPoint:!1});r.push(i)}));for(let s=0;s<=e.nrPeriodicSections;s++){const n=r.map((e=>e[s])),o=this.wiresService.interpolatePoints({points:n,tolerance:e.tolerance,periodic:!0});t.AddWire(o),i.push(o)}}e.periodic||e.shapes.forEach((e=>{t.AddWire(e)}));const s=[];if(e.endVertex){const i=this.entitiesService.makeVertex(e.endVertex);t.AddVertex(i),s.push(i)}let n;e.useSmoothing&&t.SetSmoothing(e.useSmoothing),e.maxUDegree&&t.SetMaxDegree(e.maxUDegree),e.parType===H.approxParametrizationTypeEnum.approxChordLength?n=this.occ.Approx_ParametrizationType.Approx_ChordLength:e.parType===H.approxParametrizationTypeEnum.approxCentripetal?n=this.occ.Approx_ParametrizationType.Approx_Centripetal:e.parType===H.approxParametrizationTypeEnum.approxIsoParametric&&(n=this.occ.Approx_ParametrizationType.Approx_IsoParametric),n&&t.SetParType(n),t.CheckCompatibility(!1);const o=t.Shape(),a=this.converterService.getActualTypeOfShape(o);return o.delete(),t.delete(),i.forEach((e=>e.delete())),r.forEach((e=>e.delete())),s.forEach((e=>e.delete())),a}closestPointsBetweenTwoShapes(e,t){const i=new this.occ.Message_ProgressRange_1,r=new this.occ.BRepExtrema_DistShapeShape_2(e,t,this.occ.Extrema_ExtFlag.Extrema_ExtFlag_MIN,this.occ.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad,i),s=new this.occ.Message_ProgressRange_1;if(r.Perform(s),r.IsDone()&&r.NbSolution()>0){const e=r.PointOnShape1(1),t=r.PointOnShape2(1);return[[e.X(),e.Y(),e.Z()],[t.X(),t.Y(),t.Z()]]}throw new Error("Closest points could not be found.")}closestPointsOnShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>e[1]))}closestPointsOnShapesFromPoints(e){const t=e.points.map((e=>this.entitiesService.makeVertex(e))),i=[];return e.shapes.forEach((e=>{const r=t.map((t=>this.closestPointsBetweenTwoShapes(t,e)));i.push(...r.map((e=>e[1])))})),i}distancesToShapeFromPoints(e){return e.points.map((e=>this.entitiesService.makeVertex(e))).map((t=>this.closestPointsBetweenTwoShapes(t,e.shape))).map((e=>this.vecHelper.distanceBetweenPoints(e[0],e[1])))}boundingBoxOfShape(e){const t=new this.occ.Bnd_Box_1;this.occ.BRepBndLib.Add(e.shape,t,!1);const i=t.CornerMin(),r=t.CornerMax(),s=[i.X(),i.Y(),i.Z()],n=[r.X(),r.Y(),r.Z()],o=[(i.X()+r.X())/2,(i.Y()+r.Y())/2,(i.Z()+r.Z())/2],a=[r.X()-i.X(),r.Y()-i.Y(),r.Z()-i.Z()];return t.delete(),{min:s,max:n,center:o,size:a}}boundingBoxShapeOfShape(e){const t=this.boundingBoxOfShape(e);return this.solidsService.createBoxFromCorner({corner:t.min,width:t.size[0],height:t.size[1],length:t.size[2]})}boundingSphereOfShape(e){const t=this.boundingBoxOfShape(e),i=t.center;return{center:i,radius:this.vecHelper.distanceBetweenPoints(t.min,i)}}boundingSphereShapeOfShape(e){const t=this.boundingSphereOfShape(e);return this.solidsService.createSphere({center:t.center,radius:t.radius})}loft(e){const t=new this.occ.BRepOffsetAPI_ThruSections(e.makeSolid,!1,1e-6);e.shapes.forEach((e=>{this.enumService.getShapeTypeEnum(e)===H.shapeTypeEnum.edge&&(e=this.entitiesService.bRepBuilderAPIMakeWire(e)),t.AddWire(e)})),t.CheckCompatibility(!1);const i=t.Shape(),r=this.converterService.getActualTypeOfShape(i);return i.delete(),t.delete(),r}offset(e){return this.offsetAdv({shape:e.shape,face:e.face,distance:e.distance,tolerance:e.tolerance,joinType:H.joinTypeEnum.arc,removeIntEdges:!1})}offsetAdv(e){if(e.tolerance||(e.tolerance=.1),0===e.distance)return e.shape;let t;const i=this.getJoinType(e.joinType),r=this.occ.BRepOffset_Mode.BRepOffset_Skin,s=[];if(this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.wire||this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.edge){let n;this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.edge?(n=this.entitiesService.bRepBuilderAPIMakeWire(e.shape),s.push(n)):n=e.shape;try{t=new this.occ.BRepOffsetAPI_MakeOffset_1,e.face?t.Init_1(e.face,i,!1):t.Init_2(i,!1),t.AddWire(n);const r=new this.occ.Message_ProgressRange_1;t.Build(r),t.Perform(e.distance,0)}catch(s){t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(n,e.distance,e.tolerance,r,!1,!1,i,e.removeIntEdges,new this.occ.Message_ProgressRange_1)}}else{const s=e.shape;t=new this.occ.BRepOffsetAPI_MakeOffsetShape,t.PerformByJoin(s,e.distance,e.tolerance,r,!1,!1,i,e.removeIntEdges,new this.occ.Message_ProgressRange_1)}const n=t.Shape(),o=this.converterService.getActualTypeOfShape(n);return n.delete(),t&&t.delete(),s.forEach((e=>e.delete())),o}offset3DWire(e){const t=this.extrude({shape:e.shape,direction:e.direction}),i=this.makeThickSolidSimple({shape:t,offset:e.offset}),r=this.shapeGettersService.getEdges({shape:e.shape}).length,s=(4*r+2)/2-1,n=s-r+1,o=[];let a;this.shapeGettersService.getFaces({shape:i}).forEach(((e,t)=>{if(t>=n&&t<=s){const t=this.shapeGettersService.getEdges({shape:e})[2];o.push(t)}}));try{a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:o}),a=a.Reversed(),a=this.converterService.getActualTypeOfShape(a)}catch(e){return a=o,a}return a}extrudeShapes(e){return e.shapes.map((t=>{const i=this.extrude({shape:t,direction:e.direction}),r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}))}extrude(e){const t=new this.occ.gp_Vec_4(e.direction[0],e.direction[1],e.direction[2]),i=new this.occ.BRepPrimAPI_MakePrism_1(e.shape,t,!1,!0),r=i.Shape();return i.delete(),t.delete(),r}splitShapeWithShapes(e){const t=new this.occ.BOPAlgo_Builder_1;let i;if(t.SetNonDestructive(e.nonDestructive),t.SetFuzzyValue(e.localFuzzyTolerance),t.AddArgument(e.shape),e.shapes.forEach((e=>{t.AddArgument(e)})),t.Perform(new this.occ.Message_ProgressRange_1),e.nonDestructive){const e=t.Shape();i=this.shapeGettersService.getShapesOfCompound({shape:e})}else{const r=t.Modified(e.shape),s=this.occ.BitByBitDev.BitListOfShapesToCompound(r);i=this.shapeGettersService.getShapesOfCompound({shape:s})}return i}revolve(e){let t;if(e.angle||(e.angle=360),e.direction||(e.direction=[0,0,1]),e.angle>=360){const i=new this.occ.gp_Pnt_3(0,0,0),r=new this.occ.gp_Dir_4(e.direction[0],e.direction[1],e.direction[2]),s=new this.occ.gp_Ax1_2(i,r),n=new this.occ.BRepPrimAPI_MakeRevol_2(e.shape,s,e.copy);t=n.Shape(),n.delete(),i.delete(),r.delete(),s.delete()}else{const i=new this.occ.gp_Pnt_3(0,0,0),r=new this.occ.gp_Dir_4(e.direction[0],e.direction[1],e.direction[2]),s=new this.occ.gp_Ax1_2(i,r),n=new this.occ.BRepPrimAPI_MakeRevol_1(e.shape,s,.0174533*e.angle,e.copy);t=n.Shape(),n.delete(),i.delete(),r.delete(),s.delete()}const i=this.converterService.getActualTypeOfShape(t);return t.delete(),i}rotatedExtrude(e){const t=this.boundingBoxOfShape({shape:e.shape}).min[1],i=t+e.height,r=this.transformsService.translate({translation:[0,e.height,0],shape:e.shape}),s=this.transformsService.rotate({axis:[0,1,0],angle:e.angle,shape:r}),n=this.wiresService.createBSpline({points:[[0,t,0],[0,i,0]],closed:!1}),o=[];for(let i=0;i<=30;i++){const r=i/30;o.push([20*Math.sin(r*e.angle*.0174533),t+e.height*r,20*Math.cos(r*e.angle*.0174533)])}const a=this.wiresService.createBSpline({points:o,closed:!1}),c=new this.occ.BRepOffsetAPI_MakePipeShell(n);c.SetMode_5(a,!0,this.occ.BRepFill_TypeOfContact.BRepFill_NoContact),c.Add_1(e.shape,!1,!1),c.Add_1(s,!1,!1),c.Build(new this.occ.Message_ProgressRange_1),(e.makeSolid||void 0===e.makeSolid)&&c.MakeSolid();const h=c.Shape(),l=this.converterService.getActualTypeOfShape(h);return h.delete(),c.delete(),a.delete(),n.delete(),s.delete(),r.delete(),l}pipe(e){const t=new this.occ.BRepOffsetAPI_MakePipeShell(e.shape);e.shapes.forEach((e=>{t.Add_1(e,!1,!1)})),t.Build(new this.occ.Message_ProgressRange_1),t.MakeSolid();const i=t.Shape(),r=this.converterService.getActualTypeOfShape(i);return i.delete(),t.delete(),r}pipePolylineWireNGon(e){const t=e.shape,i=this.shapeGettersService.getEdge({shape:t,index:1}),r=this.edgesService.pointOnEdgeAtParam({shape:i,param:0}),s=this.edgesService.tangentOnEdgeAtParam({shape:i,param:0}),n=this.wiresService.createNGonWire({radius:e.radius,center:r,direction:s,nrCorners:e.nrCorners}),o=this.wiresService.reversedWire({shape:n});let a=o;e.makeSolid&&(a=this.facesService.createFaceFromWire({shape:o,planar:!0}));const c=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),h=new this.occ.BRepOffsetAPI_MakePipe_2(t,a,c,!!e.forceApproxC1);h.Build(new this.occ.Message_ProgressRange_1);const l=h.Shape(),d=this.converterService.getActualTypeOfShape(l);return l.delete(),h.delete(),n.delete(),o.delete(),d}pipeWireCylindrical(e){const t=e.shape,i=this.shapeGettersService.getEdges({shape:t})[0],r=this.edgesService.startPointOnEdge({shape:i}),s=this.edgesService.tangentOnEdgeAtParam({shape:i,param:0}),n=this.entitiesService.createCircle(e.radius,r,s,e.makeSolid?H.typeSpecificityEnum.face:H.typeSpecificityEnum.wire),o=this.enumService.getGeomFillTrihedronEnumOCCTValue(e.trihedronEnum),a=new this.occ.BRepOffsetAPI_MakePipe_2(t,n,o,!!e.forceApproxC1);a.Build(new this.occ.Message_ProgressRange_1);const c=a.Shape(),h=this.converterService.getActualTypeOfShape(c);return c.delete(),a.delete(),n.delete(),h}pipeWiresCylindrical(e){return e.shapes.map((t=>this.pipeWireCylindrical({shape:t,radius:e.radius,makeSolid:e.makeSolid,trihedronEnum:e.trihedronEnum,forceApproxC1:e.forceApproxC1})))}makeThickSolidSimple(e){const t=new this.occ.BRepOffsetAPI_MakeThickSolid;t.MakeThickSolidBySimple(e.shape,e.offset),t.Build(new this.occ.Message_ProgressRange_1);const i=t.Shape(),r=this.converterService.getActualTypeOfShape(i);let s=r;if(e.offset>0){const e=this.shapeGettersService.getFaces({shape:r}).map((e=>e.Reversed()));s=this.shellsService.sewFaces({shapes:e,tolerance:1e-7}),r.delete()}return t.delete(),i.delete(),s}makeThickSolidByJoin(e){const t=new this.occ.TopTools_ListOfShape_1;e.shapes.forEach((e=>{t.Append_1(e)}));const i=new this.occ.BRepOffsetAPI_MakeThickSolid,r=this.getJoinType(e.joinType);i.MakeThickSolidByJoin(e.shape,t,e.offset,e.tolerance,this.occ.BRepOffset_Mode.BRepOffset_Skin,e.intersection,e.selfIntersection,r,e.removeIntEdges,new this.occ.Message_ProgressRange_1);const s=i.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),i.delete(),t.delete(),n}getJoinType(e){let t;switch(e){case H.joinTypeEnum.arc:t=this.occ.GeomAbs_JoinType.GeomAbs_Arc;break;case H.joinTypeEnum.intersection:t=this.occ.GeomAbs_JoinType.GeomAbs_Intersection;break;case H.joinTypeEnum.tangent:t=this.occ.GeomAbs_JoinType.GeomAbs_Tangent}return t}getBRepOffsetMode(e){let t;switch(e){case H.bRepOffsetModeEnum.skin:t=this.occ.BRepOffset_Mode.BRepOffset_Skin;break;case H.bRepOffsetModeEnum.pipe:t=this.occ.BRepOffset_Mode.BRepOffset_Pipe;break;case H.bRepOffsetModeEnum.rectoVerso:t=this.occ.BRepOffset_Mode.BRepOffset_RectoVerso}return t}slice(e){if(e.step<=0)throw new Error("Step needs to be positive.");const{bbox:t,transformedShape:i}=this.createBBoxAndTransformShape(e.shape,e.direction),r=[];if(!t.IsThin(1e-4)){const{minY:s,maxY:n,maxDist:o}=this.computeBounds(t),a=[];for(let t=s;t<n;t+=e.step){const e=this.facesService.createSquareFace({size:o,center:[0,t,0],direction:[0,1,0]});a.push(e)}this.applySlices(i,a,e.direction,r)}return this.converterService.makeCompound({shapes:r})}sliceInStepPattern(e){if(!e.steps||0===e.steps.length)throw new Error("Steps must be provided with at elast one positive value");const{bbox:t,transformedShape:i}=this.createBBoxAndTransformShape(e.shape,e.direction),r=[];if(!t.IsThin(1e-4)){const{minY:s,maxY:n,maxDist:o}=this.computeBounds(t),a=[];let c=0;for(let t=s;t<n;t+=e.steps[c]){const i=this.facesService.createSquareFace({size:o,center:[0,t,0],direction:[0,1,0]});a.push(i),void 0===e.steps[c+1]?c=0:c++}this.applySlices(i,a,e.direction,r)}return this.converterService.makeCompound({shapes:r})}createBBoxAndTransformShape(e,t){const i=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:t,toOrigin:[0,0,0],toDirection:[0,1,0]}),r=new this.occ.Bnd_Box_1;return this.occ.BRepBndLib.Add(i,r,!1),{bbox:r,transformedShape:i}}computeBounds(e){const t=e.CornerMin(),i=e.CornerMax(),r=t.Y(),s=i.Y(),n=t.X(),o=i.X(),a=t.Z(),c=o-n,h=i.Z()-a;let l=c>=h?c:h;return l*=1.2,{minY:r,maxY:s,maxDist:l}}applySlices(e,t,i,r){const s=[];if(this.enumService.getShapeTypeEnum(e)===H.shapeTypeEnum.solid)s.push(e);else{const t=this.shapeGettersService.getSolids({shape:e});s.push(...t)}if(0===s.length)throw new Error("No solids found to slice.");s.forEach((e=>{const s=new H.IntersectionDto;s.keepEdges=!0,s.shapes=[e];const n=this.converterService.makeCompound({shapes:t});s.shapes.push(n),this.booleansService.intersection(s).forEach((e=>{if(e&&!e.IsNull()){const t=this.transformsService.align({shape:e,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:i});r.push(t)}}))}))}}class Te{constructor(e,t,i,r){this.occ=e,this.converterService=t,this.entitiesService=i,this.vecHelper=r}alignAndTranslate(e){const t=this.align({shape:e.shape,fromOrigin:[0,0,0],fromDirection:[0,1,0],toOrigin:[0,0,0],toDirection:e.direction}),i=this.translate({shape:t,translation:e.center});return t.delete(),i}scale3d(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),i=new this.occ.gp_GTrsf_1,r=e.scale,s=new this.occ.gp_Mat_2(r[0],0,0,0,r[1],0,0,0,r[2]);let n;i.SetVectorialPart(s);try{const r=new this.occ.BRepBuilderAPI_GTransform_2(t,i,!1),s=new this.occ.Message_ProgressRange_1;r.Build(s);const o=r.Shape();n=this.translate({shape:o,translation:e.center}),r.delete(),o.delete(),s.delete()}catch(e){throw new Error("Could not scale the shape")}return t.delete(),i.delete(),s.delete(),n}translate(e){const t=new this.occ.gp_Trsf_1,i=new this.occ.gp_Vec_4(e.translation[0],e.translation[1],e.translation[2]);t.SetTranslation_1(i);const r=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=r.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),t.delete(),r.delete(),i.delete(),n}mirror(e){const t=new this.occ.gp_Trsf_1,i=this.entitiesService.gpAx1(e.origin,e.direction);t.SetMirror_2(i);const r=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=r.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),r.delete(),t.delete(),i.delete(),n}mirrorAlongNormal(e){const t=new this.occ.gp_Trsf_1,i=this.entitiesService.gpAx2(e.origin,e.normal);t.SetMirror_3(i);const r=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=r.Shape(),n=this.converterService.getActualTypeOfShape(s);return i.delete(),s.delete(),r.delete(),t.delete(),n}rotate(e){let t;if(0!==e.angle){const t=new this.occ.gp_Trsf_1,i=new this.occ.gp_Vec_4(e.axis[0],e.axis[1],e.axis[2]),r=new this.occ.gp_Dir_4(e.axis[0],e.axis[1],e.axis[2]),s=new this.occ.gp_Pnt_3(0,0,0),n=new this.occ.gp_Ax1_2(s,r);t.SetRotation_1(n,this.vecHelper.degToRad(e.angle));const o=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),a=o.Shape(),c=this.converterService.getActualTypeOfShape(a);return a.delete(),i.delete(),r.delete(),s.delete(),n.delete(),o.delete(),t.delete(),c}t=e.shape;const i=this.converterService.getActualTypeOfShape(t);return 0!==e.angle&&t.delete(),i}align(e){const t=new this.occ.gp_Trsf_1,i=this.entitiesService.gpAx3_4(e.fromOrigin,e.fromDirection),r=this.entitiesService.gpAx3_4(e.toOrigin,e.toDirection);t.SetDisplacement(i,r);const s=new this.occ.TopLoc_Location_2(t),n=e.shape.Moved(s,!1);t.delete(),i.delete(),r.delete();const o=this.converterService.getActualTypeOfShape(n);return n.delete(),o}alignNormAndAxis(e){const t=new this.occ.gp_Trsf_1,i=this.entitiesService.gpAx3_3(e.fromOrigin,e.fromNorm,e.fromAx),r=this.entitiesService.gpAx3_3(e.toOrigin,e.toNorm,e.toAx);t.SetDisplacement(i,r);const s=new this.occ.TopLoc_Location_2(t),n=e.shape.Moved(s,!1);t.delete(),i.delete(),r.delete();const o=this.converterService.getActualTypeOfShape(n);return n.delete(),o}}class Pe{constructor(e,t){this.occ=e,this.shapeGettersService=t}intersection(e){if(e.shapes.length<2)throw new Error("Intersection requires 2 or more shapes to be given");const t=e.shapes[0];let i=[];for(let r=1;r<e.shapes.length;r++){let s;const n=new this.occ.Message_ProgressRange_1,o=new this.occ.BRepAlgoAPI_Common_3(t,e.shapes[r],n),a=new this.occ.Message_ProgressRange_1;o.HasGenerated()&&(o.Build(a),s=o.Shape(),i.push(s)),n.delete(),o.delete(),a.delete()}return!e.keepEdges&&i.length>0&&(i=i.map((e=>{const t=new this.occ.ShapeUpgrade_UnifySameDomain_2(e,!0,!0,!1);t.Build();const i=t.Shape();return t.delete(),i}))),i}difference(e){let t=e.shape;const i=e.shapes;for(let e=0;e<i.length;e++){i[e]&&!i[e].IsNull()||console.error("Tool in Difference is null!");const r=new this.occ.Message_ProgressRange_1,s=new this.occ.BRepAlgoAPI_Cut_3(t,i[e],r),n=new this.occ.Message_ProgressRange_1;s.Build(n),t=s.Shape(),r.delete(),n.delete(),s.delete()}if(!e.keepEdges){const e=new this.occ.ShapeUpgrade_UnifySameDomain_2(t,!0,!0,!1);e.Build();const i=e.Shape();t.delete(),t=i,e.delete()}return 1===this.shapeGettersService.getNumSolidsInCompound(t)&&(t=this.shapeGettersService.getSolidFromCompound(t,0)),t}union(e){let t=e.shapes[0];for(let i=0;i<e.shapes.length;i++){const r=new this.occ.Message_ProgressRange_1,s=new this.occ.BRepAlgoAPI_Fuse_3(t,e.shapes[i],r),n=new this.occ.Message_ProgressRange_1;s.Build(n),t=s.Shape(),r.delete(),n.delete(),s.delete()}if(!e.keepEdges){const e=new this.occ.ShapeUpgrade_UnifySameDomain_2(t,!0,!0,!1);e.Build(),t=e.Shape(),e.delete()}return t}}class Ce{constructor(e,t,i){this.occ=e,this.enumService=t,this.iteratorService=i}getNumSolidsInCompound(e){if(!e||this.enumService.getShapeTypeEnum(e)!==H.shapeTypeEnum.compound||e.IsNull())throw new Error("Shape is not a compound or is null.");let t=0;return this.iteratorService.forEachSolid(e,(()=>{t++})),t}getSolidFromCompound(e,t){if(!e||e.ShapeType()>this.occ.TopAbs_ShapeEnum.TopAbs_COMPSOLID||e.IsNull())return console.error("Not a compound shape!"),e;t||(t=0);let i=e,r=0;return this.iteratorService.forEachSolid(e,((e,s)=>{e===t&&(i=this.occ.TopoDS.Solid_1(s)),r++})),0===r&&console.error("NO SOLIDS FOUND IN SHAPE!"),i.hash=e.hash+1,i}getEdges(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachEdge(e.shape,((e,i)=>{t.push(i)})),t}getEdge(e){if(!e.shape||e.shape.ShapeType&&e.shape.ShapeType()>this.occ.TopAbs_ShapeEnum.TopAbs_WIRE||e.shape.IsNull())throw new Error("Edge can not be found for shape that is not provided or is of incorrect type");e.index||(e.index=0);let t={},i=!1;if(this.iteratorService.forEachEdge(e.shape,((r,s)=>{r===e.index&&(t=s,i=!0)})),i)return t;throw new Error(`Edge can not be found for shape on index ${e.index}`)}getWires(e){const t=[];return this.iteratorService.forEachWire(e.shape,((e,i)=>{t.push(i)})),t}getWire(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===H.shapeTypeEnum.wire||t===H.shapeTypeEnum.edge||t===H.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");let i;if(e.index||(e.index=0),this.iteratorService.forEachWire(e.shape,((t,r)=>{t===e.index&&(i=this.occ.TopoDS.Wire_1(r))})),!i)throw Error("Wire not found");return i}getFaces(e){const t=[];return this.iteratorService.forEachFace(e.shape,((e,i)=>{t.push(i)})),t}getSolids(e){const t=[];return this.iteratorService.forEachSolid(e.shape,((e,i)=>{t.push(i)})),t}getFace(e){if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is null");const t=this.enumService.getShapeTypeEnum(e.shape);if(t===H.shapeTypeEnum.wire||t===H.shapeTypeEnum.edge||t===H.shapeTypeEnum.vertex)throw new Error("Shape is of incorrect type");e.index||(e.index=0);let i={},r=0;if(this.iteratorService.forEachFace(e.shape,((t,s)=>{t===e.index&&(i=this.occ.TopoDS.Face_1(s)),r++})),r<e.index||e.index<0)throw new Error("Face index is out of range");return i}getVertices(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.vertex)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[];return this.iteratorService.forEachVertex(e.shape,((e,i)=>{t.push(i)})),t}getShapesOfCompound(e){const t=[];return this.iteratorService.forEachShapeInCompound(e.shape,((e,i)=>{t.push(i)})),t}}class ke{constructor(e,t,i,r,s,n,o,a,c,h){this.occ=e,this.occRefReturns=t,this.shapeGettersService=i,this.entitiesService=r,this.iteratorService=s,this.converterService=n,this.enumService=o,this.geomService=a,this.transformsService=c,this.vecHelper=h}getCornerPointsOfEdgesForShape(e){const t=this.shapeGettersService.getEdges(e);let i=[];return t.forEach((e=>{const t={current:0},r={current:0},s=this.occRefReturns.BRep_Tool_Curve_2(e,t,r);try{const e=s.get();if(e){const s=e.Value(t.current),n=e.Value(r.current),o=[s.X(),s.Y(),s.Z()],a=[n.X(),n.Y(),n.Z()];s.delete(),n.delete(),i.push(o),i.push(a)}}catch(e){console.log(e)}})),i.length>0&&(i=this.vecHelper.removeAllDuplicateVectors(i)),i}getCircularEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeCircular({shape:e})))}getLinearEdgesAlongWire(e){return this.getEdgesAlongWire(e).filter((e=>this.isEdgeLinear({shape:e})))}getEdgesAlongWire(e){if(e.shape&&this.enumService.getShapeTypeEnum(e.shape)===H.shapeTypeEnum.edge)return[e.shape];if(!e.shape||e.shape.IsNull())throw new Error("Shape is not provided or is of incorrect type");const t=[],i=this.fixEdgeOrientationsAlongWire(e);return this.iteratorService.forEachEdgeAlongWire(i,((e,i)=>{t.push(i)})),t}fixEdgeOrientationsAlongWire(e){const t=[];return this.iteratorService.forEachEdgeAlongWire(e.shape,((e,i)=>{t.push(i)})),this.converterService.combineEdgesAndWiresIntoAWire({shapes:t})}arcThroughThreePoints(e){const t=this.entitiesService.gpPnt(e.start),i=this.entitiesService.gpPnt(e.middle),r=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_4(t,i,r),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),i.delete(),r.delete(),s.delete(),n.delete(),o.delete(),a}arcThroughTwoPointsAndTangent(e){const t=this.entitiesService.gpPnt(e.start),i=this.entitiesService.gpVec(e.tangentVec),r=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_5(t,i,r),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),i.delete(),r.delete(),s.delete(),n.delete(),o.delete(),a}arcFromCircleAndTwoAngles(e){const t=this.getGpCircleFromEdge({shape:e.circle}),i=this.vecHelper.degToRad(e.alphaAngle1),r=this.vecHelper.degToRad(e.alphaAngle2),s=new this.occ.GC_MakeArcOfCircle_1(t,i,r,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),s.delete(),n.delete(),o.delete(),a}arcFromCirclePointAndAngle(e){const t=this.getGpCircleFromEdge({shape:e.circle}),i=this.vecHelper.degToRad(e.alphaAngle),r=this.entitiesService.gpPnt(e.point),s=new this.occ.GC_MakeArcOfCircle_2(t,r,i,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),s.delete(),r.delete(),n.delete(),o.delete(),a}lineEdge(e){const t=this.entitiesService.gpPnt(e.start),i=this.entitiesService.gpPnt(e.end),r=new this.occ.GC_MakeSegment_1(t,i).Value(),s=r.get(),n=new this.occ.Handle_Geom_Curve_2(s),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return o.delete(),n.delete(),t.delete(),i.delete(),r.delete(),s.delete(),a}getEdgeLength(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e.shape),i=t.Wire(),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.curveLength({shape:r});return r.delete(),i.delete(),t.delete(),s}getEdgeLengthsOfShape(e){return this.shapeGettersService.getEdges({shape:e.shape}).map((e=>this.getEdgeLength({shape:e})))}getEdgesLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getEdgeLength({shape:e})))}getEdgesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.geomService.getLinearCenterOfMass({shape:e})))}edgesToPoints(e){const t=this.enumService.getShapeTypeEnum(e.shape);let i=[];return i=t===H.shapeTypeEnum.edge?[e.shape]:t===H.shapeTypeEnum.wire?this.getEdgesAlongWire({shape:e.shape}):this.shapeGettersService.getEdges({shape:e.shape}),i.map((t=>this.edgeToPoints(Object.assign(Object.assign({},e),{shape:t}))))}startPointOnEdge(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.pointOnCurveAtParam({shape:r,param:0});return r.delete(),s}endPointOnEdge(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.pointOnCurveAtParam({shape:r,param:1});return r.delete(),s}edgeToPoints(e){const t=[],i=new this.occ.TopLoc_Location_1,r=new this.occ.BRepAdaptor_Curve_2(e.shape),s=new this.occ.GCPnts_TangentialDeflection_2(r,e.angularDeflection,e.curvatureDeflection,e.minimumOfPoints,e.uTolerance,e.minimumLength),n=s.NbPoints(),o=[];for(let e=0;e<n;e++){const i=s.Value(e+1);t.push([i.X(),i.Y(),i.Z()]),o.push(i)}if(o.forEach((e=>e.delete())),i.delete(),r.delete(),s.delete(),t.length>1){const i=this.startPointOnEdge({shape:e.shape}),r=t[0],s=t[t.length-1],n=this.vecHelper.distanceBetweenPoints(r,i);this.vecHelper.distanceBetweenPoints(s,i)<n&&t.reverse()}return t}makeEdgeFromGeom2dCurveAndSurfaceBounded(e,t,i){const r=new this.occ.Handle_Geom2d_Curve_2(e.curve),s=new this.occ.Handle_Geom_Surface_2(e.surface),n=new this.occ.BRepBuilderAPI_MakeEdge_31(r,s,t,i),o=n.Shape(),a=this.converterService.getActualTypeOfShape(o);return o.delete(),n.delete(),a}makeEdgeFromGeom2dCurveAndSurface(e){const t=new this.occ.Handle_Geom2d_Curve_2(e.curve),i=new this.occ.Handle_Geom_Surface_2(e.surface),r=new this.occ.BRepBuilderAPI_MakeEdge_30(t,i),s=r.Shape(),n=this.converterService.getActualTypeOfShape(s);return s.delete(),r.delete(),n}constraintTanLinesFromTwoPtsToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),i=this.getCircularEdgeCenterPoint({shape:e.circle}),r=new H.AlignDto;r.fromDirection=t,r.toDirection=[0,0,1],r.fromOrigin=i,r.toOrigin=[0,0,0],r.shape=e.circle;const s=this.transformsService.align(r),n=this.entitiesService.makeVertex(e.point1);r.shape=n;const o=this.transformsService.align(r);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.entitiesService.makeVertex(e.point2);r.shape=h;const l=this.transformsService.align(r);h.delete();const d=this.converterService.vertexToPoint({shape:l});l.delete();const u=this.entitiesService.gpPnt2d([d[0],d[1]]),p=this.getGpCircle2dFromEdge({shape:s});s.delete();const f=new this.occ.GccEnt_QualifiedCirc(p,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified));p.delete();const v=new this.occ.GccAna_Lin2d2Tan_2(f,c,e.tolerance),g=new this.occ.GccAna_Lin2d2Tan_2(f,u,e.tolerance);f.delete();const m=[];for(let e=1;e<=v.NbSolutions();e++){const s=v.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:a});r.fromDirection=[0,0,1],r.toDirection=t,r.fromOrigin=[0,0,0],r.toOrigin=i,r.shape=o;const c=this.transformsService.align(r);m.push(c),s.delete(),n.delete(),o.delete()}v.delete();const S=[];for(let e=1;e<=g.NbSolutions();e++){const s=g.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:d});r.fromDirection=[0,0,1],r.toDirection=t,r.fromOrigin=[0,0,0],r.toOrigin=i,r.shape=o;const a=this.transformsService.align(r);S.push(a),s.delete(),n.delete(),o.delete()}g.delete();let y=[];if(y=e.positionResult===H.positionResultEnum.all?[...m,...S]:e.positionResult===H.positionResultEnum.keepSide1?[m[1],S[0]]:e.positionResult===H.positionResultEnum.keepSide2?[m[0],S[1]]:[...m,...S],2===y.length&&e.circleRemainder!==H.circleInclusionEnum.none){let t,i;e.positionResult===H.positionResultEnum.keepSide2?e.circleRemainder===H.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:y[1]}),i=this.startPointOnEdge({shape:y[0]})):e.circleRemainder===H.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:y[0]}),i=this.startPointOnEdge({shape:y[1]})):e.positionResult===H.positionResultEnum.keepSide1&&(e.circleRemainder===H.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:y[0]}),i=this.startPointOnEdge({shape:y[1]})):e.circleRemainder===H.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:y[1]}),i=this.startPointOnEdge({shape:y[0]})));const r=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:i,sense:!0});y.splice(1,0,r)}return y}constraintTanLinesFromPtToCircle(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),i=this.getCircularEdgeCenterPoint({shape:e.circle}),r=new H.AlignDto;r.fromDirection=t,r.toDirection=[0,0,1],r.fromOrigin=i,r.toOrigin=[0,0,0],r.shape=e.circle;const s=this.transformsService.align(r),n=this.entitiesService.makeVertex(e.point);r.shape=n;const o=this.transformsService.align(r);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified));h.delete();const d=new this.occ.GccAna_Lin2d2Tan_2(l,c,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const s=d.ThisSolution(e),n=s.Location(),o=this.lineEdge({start:[n.X(),n.Y(),0],end:a});r.fromDirection=[0,0,1],r.toDirection=t,r.fromOrigin=[0,0,0],r.toOrigin=i,r.shape=o;const c=this.transformsService.align(r);u.push(c),s.delete(),n.delete(),o.delete()}d.delete();let p=[];if(p=e.positionResult===H.positionResultEnum.all?[...u]:e.positionResult===H.positionResultEnum.keepSide1?[u[0]]:e.positionResult===H.positionResultEnum.keepSide2?[u[1]]:[...u],2===p.length&&e.circleRemainder!==H.circleInclusionEnum.none){let t,i;e.circleRemainder===H.circleInclusionEnum.keepSide1?(t=this.startPointOnEdge({shape:p[1]}),i=this.startPointOnEdge({shape:p[0]})):e.circleRemainder===H.circleInclusionEnum.keepSide2&&(t=this.startPointOnEdge({shape:p[0]}),i=this.startPointOnEdge({shape:p[1]}));const r=this.arcFromCircleAndTwoPoints({circle:e.circle,start:t,end:i,sense:!0});p.splice(1,0,r)}return p}constraintTanLinesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),i=this.getCircularEdgeCenterPoint({shape:e.circle1}),r=new H.AlignDto;r.fromDirection=t,r.toDirection=[0,0,1],r.fromOrigin=i,r.toOrigin=[0,0,0],r.shape=e.circle1;const s=this.transformsService.align(r);r.shape=e.circle2;const n=this.transformsService.align(r),o=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:n});s.delete(),n.delete();const c=new this.occ.GccEnt_QualifiedCirc(o,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified));o.delete(),a.delete();const l=new this.occ.GccAna_Lin2d2Tan_3(c,h,e.tolerance),d=new this.occ.GccAna_Lin2d2Tan_3(h,c,e.tolerance);c.delete(),h.delete();const u=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);u.push(t)}l.delete();const p=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);p.push(t)}let f;d.delete(),4===p.length?f=[p[2],p[1],p[0],p[3]]:2===p.length&&(f=[p[1],p[0]]);const v=[];for(let e=0;e<u.length;e++){const s=u[e],n=f[e],o=s.Location(),a=[o.X(),o.Y(),0],c=n.Location(),h=[c.X(),c.Y(),0],l=this.lineEdge({start:a,end:h});r.fromDirection=[0,0,1],r.toDirection=t,r.fromOrigin=[0,0,0],r.toOrigin=i,r.shape=l;const d=this.transformsService.align(r);v.push(d),l.delete(),s.delete(),n.delete(),o.delete(),c.delete()}let g=[];if(g=e.positionResult===H.positionResultEnum.all?[...v]:e.positionResult===H.positionResultEnum.keepSide1&&4===v.length?[v[1],v[3]]:e.positionResult===H.positionResultEnum.keepSide2&&4===v.length?[v[0],v[2]]:e.positionResult===H.positionResultEnum.keepSide1&&2===v.length?[]:e.positionResult===H.positionResultEnum.keepSide2&&2===v.length?[v[0],v[1]]:[...v],2===g.length&&e.circleRemainders!==H.twoCircleInclusionEnum.none){let t,i,r,s;e.circleRemainders===H.twoCircleInclusionEnum.outside?(e.positionResult===H.positionResultEnum.keepSide2||e.positionResult===H.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),i=this.startPointOnEdge({shape:g[0]})):e.positionResult===H.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),i=this.startPointOnEdge({shape:g[1]})),r=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===H.twoCircleInclusionEnum.inside?(e.positionResult===H.positionResultEnum.keepSide2||e.positionResult===H.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),i=this.startPointOnEdge({shape:g[1]})):e.positionResult===H.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),i=this.startPointOnEdge({shape:g[0]})),r=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]})):e.circleRemainders===H.twoCircleInclusionEnum.insideOutside?(e.positionResult===H.positionResultEnum.keepSide2||e.positionResult===H.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[0]}),i=this.startPointOnEdge({shape:g[1]})):e.positionResult===H.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[1]}),i=this.startPointOnEdge({shape:g[0]})),r=this.endPointOnEdge({shape:g[0]}),s=this.endPointOnEdge({shape:g[1]})):e.circleRemainders===H.twoCircleInclusionEnum.outsideInside&&(e.positionResult===H.positionResultEnum.keepSide2||e.positionResult===H.positionResultEnum.all?(t=this.startPointOnEdge({shape:g[1]}),i=this.startPointOnEdge({shape:g[0]})):e.positionResult===H.positionResultEnum.keepSide1&&(t=this.startPointOnEdge({shape:g[0]}),i=this.startPointOnEdge({shape:g[1]})),r=this.endPointOnEdge({shape:g[1]}),s=this.endPointOnEdge({shape:g[0]}));const n=this.arcFromCircleAndTwoPoints({circle:e.circle1,start:t,end:i,sense:!0}),o=this.arcFromCircleAndTwoPoints({circle:e.circle2,start:r,end:s,sense:!0});g.unshift(n),g.push(o)}return g}constraintTanCirclesOnCircleAndPnt(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle}),i=this.getCircularEdgeCenterPoint({shape:e.circle}),{alignOpt:r,circle1Aligned:s}=this.alignCircle(t,i,e.circle),n=this.entitiesService.makeVertex(e.point);r.shape=n;const o=this.transformsService.align(r);n.delete();const a=this.converterService.vertexToPoint({shape:o});o.delete();const c=this.entitiesService.gpPnt2d([a[0],a[1]]),h=this.getGpCircle2dFromEdge({shape:s});s.delete();const l=new this.occ.GccEnt_QualifiedCirc(h,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified));h.delete();const d=new this.occ.GccAna_Circ2d2TanRad_3(l,c,e.radius,e.tolerance);l.delete();const u=[];for(let e=1;e<=d.NbSolutions();e++){const t=d.ThisSolution(e);u.push(t)}d.delete();const p=[];for(let e=0;e<u.length;e++){const s=u[e],n=this.reconstructCircleAndAlignBack(u,s,r,t,i);p.push(n)}return p}alignCircle(e,t,i){const r=new H.AlignDto;return r.fromDirection=e,r.toDirection=[0,0,1],r.fromOrigin=t,r.toOrigin=[0,0,0],r.shape=i,{alignOpt:r,circle1Aligned:this.transformsService.align(r)}}constraintTanCirclesOnTwoCircles(e){const t=this.getCircularEdgePlaneDirection({shape:e.circle1}),i=this.getCircularEdgeCenterPoint({shape:e.circle1}),{alignOpt:r,circle1Aligned:s}=this.alignCircle(t,i,e.circle1);r.shape=e.circle2;const n=this.transformsService.align(r),o=this.getGpCircle2dFromEdge({shape:s}),a=this.getGpCircle2dFromEdge({shape:n});s.delete(),n.delete();const c=new this.occ.GccEnt_QualifiedCirc(o,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified)),h=new this.occ.GccEnt_QualifiedCirc(a,this.enumService.getGccEntPositionFromEnum(H.gccEntPositionEnum.unqualified));o.delete(),a.delete();const l=new this.occ.GccAna_Circ2d2TanRad_1(c,h,e.radius,e.tolerance);c.delete(),h.delete();const d=[];for(let e=1;e<=l.NbSolutions();e++){const t=l.ThisSolution(e);d.push(t)}l.delete();const u=[];for(let e=0;e<d.length;e++){const s=d[e],n=this.reconstructCircleAndAlignBack(d,s,r,t,i);u.push(n)}return u}divideEdgeByParamsToPoints(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:r}),r.FirstParameter(),r.LastParameter());return r.delete(),i.delete(),s}divideEdgeByEqualDistanceToPoints(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.divideCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i.delete(),s}pointOnEdgeAtParam(e){const t=e.shape,{uMin:i,uMax:r}=this.getEdgeBounds(t),s=this.converterService.getGeomCurveFromEdge(t,i,r),n=this.entitiesService.gpPnt([0,0,0]),o=this.vecHelper.remap(e.param,0,1,i,r);if(s){s.D0(o,n);const e=[n.X(),n.Y(),n.Z()];return n.delete(),e}}reconstructCircleAndAlignBack(e,t,i,r,s){const n=t.Location(),o=[n.X(),n.Y(),0],a=this.entitiesService.createCircle(t.Radius(),o,[0,0,1],H.typeSpecificityEnum.edge);i.fromDirection=[0,0,1],i.toDirection=r,i.fromOrigin=[0,0,0],i.toOrigin=s,i.shape=a;const c=this.transformsService.align(i);return a.delete(),t.delete(),n.delete(),c}arcFromCircleAndTwoPoints(e){const t=this.getGpCircleFromEdge({shape:e.circle}),i=this.entitiesService.gpPnt(e.start),r=this.entitiesService.gpPnt(e.end),s=new this.occ.GC_MakeArcOfCircle_3(t,i,r,e.sense),n=new this.occ.Handle_Geom_Curve_2(s.Value().get()),o=new this.occ.BRepBuilderAPI_MakeEdge_24(n),a=o.Edge();return t.delete(),i.delete(),r.delete(),s.delete(),n.delete(),o.delete(),a}getCircularEdgePlaneDirection(e){const t=this.getGpCircleFromEdge(e),i=t.Position(),r=i.Direction(),s=[r.X(),r.Y(),r.Z()];return r.delete(),i.delete(),t.delete(),s}getCircularEdgeCenterPoint(e){const t=this.getGpCircleFromEdge(e),i=t.Location(),r=[i.X(),i.Y(),i.Z()];return i.delete(),t.delete(),r}getCircularEdgeRadius(e){const t=this.getGpCircleFromEdge(e),i=t.Radius();return t.delete(),i}getGpCircleFromEdge(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{const e=t.Circle();return t.delete(),e}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}getGpCircle2dFromEdge(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{const e=t.Circle(),i=e.Position(),r=e.Location(),s=this.entitiesService.gpAx2d([r.X(),r.Y()],[1,0]),n=e.Radius(),o=new this.occ.gp_Circ2d_2(s,n,!0);return t.delete(),e.delete(),i.delete(),r.delete(),s.delete(),o}catch(e){throw t.delete(),new Error("Edge is not a circular edge.")}}tangentOnEdgeAtParam(e){const t=e.shape,{uMin:i,uMax:r}=this.getEdgeBounds(t),s=this.converterService.getGeomCurveFromEdge(t,i,r),n=this.vecHelper.remap(e.param,0,1,i,r),o=s.DN(n,1),a=[o.X(),o.Y(),o.Z()];return o.delete(),a}pointOnEdgeAtLength(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.pointOnCurveAtLength(Object.assign(Object.assign({},e),{shape:r}));return r.delete(),i.delete(),s}tangentOnEdgeAtLength(e){const t=e.shape,i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[t]}),r=new this.occ.BRepAdaptor_CompCurve_2(i,!1),s=this.geomService.tangentOnCurveAtLength(Object.assign(Object.assign({},e),{shape:r}));return i.delete(),r.delete(),s}getEdgeBounds(e){const t={current:0},i={current:0};return this.occRefReturns.BRep_Tool_Range_1(e,t,i),{uMin:t.current,uMax:i.current}}isEdgeCircular(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{return t.Circle(),t.delete(),!0}catch(e){return!1}}isEdgeLinear(e){const t=new this.occ.BRepAdaptor_Curve_2(e.shape);try{return t.Line(),t.delete(),!0}catch(e){return!1}}}class De{constructor(e,t,i){this.occ=e,this.vecHelper=t,this.entitiesService=i}curveLength(e){return this.occ.GCPnts_AbscissaPoint.Length_1(e.shape)}pointOnCurveAtParam(e){const t=e.shape,i=this.entitiesService.gpPnt([0,0,0]),r=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter());t.D0(r,i);const s=[i.X(),i.Y(),i.Z()];return i.delete(),s}pointOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint_2(e.shape,e.length,e.shape.FirstParameter()),i=t.Parameter(),r=this.entitiesService.gpPnt([0,0,0]);e.shape.D0(i,r);const s=[r.X(),r.Y(),r.Z()];return t.delete(),r.delete(),s}pointsOnCurveAtLengths(e){return e.lengths.map((t=>this.pointOnCurveAtLength({shape:e.shape,length:t})))}tangentOnCurveAtLength(e){const t=new this.occ.GCPnts_AbscissaPoint_2(e.shape,e.length,e.shape.FirstParameter()),i=t.Parameter(),r=e.shape.DN(i,1),s=[r.X(),r.Y(),r.Z()];return r.delete(),t.delete(),s}tangentOnCurveAtParam(e){const t=e.shape,i=this.vecHelper.remap(e.param,0,1,t.FirstParameter(),t.LastParameter()),r=t.DN(i,1),s=[r.X(),r.Y(),r.Z()];return r.delete(),s}divideCurveByEqualLengthDistance(e){const t=e.shape,i=this.occ.GCPnts_AbscissaPoint.Length_5(t,t.FirstParameter(),t.LastParameter()),r=i/e.nrOfDivisions,s=[];for(let e=0;e<=i+1e-9;e+=r)s.push(e);return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const i=new this.occ.GCPnts_AbscissaPoint_2(t,e,t.FirstParameter()),r=i.Parameter();return i.delete(),r})).map((e=>{const i=this.entitiesService.gpPnt([0,0,0]);t.D0(e,i);const r=[i.X(),i.Y(),i.Z()];return i.delete(),r}))}divideCurveToNrSegments(e,t,i){const r=e.shape,s=[];for(let r=0;r<=e.nrOfDivisions;r++){const n=r/e.nrOfDivisions,o=this.vecHelper.remap(n,0,1,t,i);s.push(o)}return e.removeStartPoint&&s.shift(),e.removeEndPoint&&s.pop(),s.map((e=>{const t=this.entitiesService.gpPnt([0,0,0]);r.D0(e,t);const i=[t.X(),t.Y(),t.Z()];return t.delete(),i}))}startPointOnCurve(e){const t=e.shape,i=this.entitiesService.gpPnt([0,0,0]);t.D0(t.FirstParameter(),i);const r=[i.X(),i.Y(),i.Z()];return i.delete(),r}endPointOnCurve(e){const t=e.shape,i=this.entitiesService.gpPnt([0,0,0]);t.D0(t.LastParameter(),i);const r=[i.X(),i.Y(),i.Z()];return i.delete(),r}getLinearCenterOfMass(e){const t=e.shape,i=new this.occ.GProp_GProps_1;this.occ.BRepGProp.LinearProperties(t,i,!1,!1);const r=i.CentreOfMass(),s=[r.X(),r.Y(),r.Z()];return i.delete(),s}}class Oe{constructor(){this.type="text",this.name="text"}}class Ae{}class Fe{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p){this.occ=e,this.occRefReturns=t,this.base=i,this.shapesHelperService=r,this.shapeGettersService=s,this.transformsService=n,this.enumService=o,this.entitiesService=a,this.converterService=c,this.geomService=h,this.edgesService=l,this.vecHelper=d,this.filletsService=u,this.operationsService=p}getWireLength(e){const t=new this.occ.BRepAdaptor_CompCurve_2(e.shape,!1),i=this.geomService.curveLength({shape:t});return t.delete(),i}getWiresLengths(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getWireLength({shape:e})))}createRectangleWire(e){const t=e.width/2,i=e.length/2,r=[[t,0,i],[-t,0,i],[-t,0,-i],[t,0,-i]].reverse(),s=this.createPolygonWire({points:r}),n=this.transformsService.alignAndTranslate({shape:s,direction:e.direction,center:e.center});return s.delete(),n}createSquareWire(e){return this.createRectangleWire({width:e.size,length:e.size,center:e.center,direction:e.direction})}reversedWire(e){const t=e.shape.Reversed(),i=this.converterService.getActualTypeOfShape(t);return t.delete(),i}reversedWireFromReversedEdges(e){const t=e.shape,i=this.edgesService.getEdgesAlongWire({shape:t}).map((e=>this.converterService.getActualTypeOfShape(e.Reversed()))),r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i.reverse()}),s=this.converterService.getActualTypeOfShape(r);return r.delete(),i.forEach((e=>e.delete())),s}createChristmasTreeWire(e){const t=this.createLineWire({start:[e.innerDist,0,0],end:[0,e.height,0]}),i=this.createLineWire({start:[e.outerDist,0,0],end:[0,e.height,0]}),r=this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),s=this.divideWireByEqualDistanceToPoints({shape:i,nrOfDivisions:e.nrSkirts,removeEndPoint:!1,removeStartPoint:!1}),n=[];if(e.trunkWidth>0&&e.trunkHeight>0?(n.push([0,-e.trunkHeight,0]),n.push([e.trunkWidth/2,-e.trunkHeight,0]),n.push([e.trunkWidth/2,0,0])):n.push([0,0,0]),r.forEach(((t,i)=>{const r=s[i];0===i?n.push(r):0!==i&&i<s.length-1?(n.push([t[0],r[1]+e.height/e.nrSkirts*.1,t[2]]),n.push(r)):n.push(t)})),!e.half){const e=n.map((e=>[-e[0],e[1],e[2]]));e.pop(),n.push(...e.reverse())}let o;if(e.trunkHeight>0&&e.trunkWidth>0){const t=n.map((t=>[t[0],t[1]+e.trunkHeight,t[2]]));o=this.createPolylineWire({points:t})}else o=this.createPolylineWire({points:n});const a=this.transformsService.rotate({shape:o,angle:e.rotation,axis:[0,1,0]});return this.transformsService.alignAndTranslate({shape:a,direction:e.direction,center:e.origin})}createStarWire(e){const t=this.shapesHelperService.starLines(e.innerRadius,e.outerRadius,e.numRays,e.half,e.offsetOuterEdges),i=[];t.forEach((e=>{i.push(this.edgesService.lineEdge(e))}));const r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return r.delete(),s}createParallelogramWire(e){const t=this.shapesHelperService.parallelogram(e.width,e.height,e.angle,e.aroundCenter),i=[];t.forEach((e=>{i.push(this.edgesService.lineEdge(e))}));const r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return r.delete(),s}createHeartWire(e){const t=e.sizeApprox/2,i=[[0,0,.7*t],[t/6,0,.9*t],[t/2,0,t],[.75*t,0,.9*t],[t,0,t/4],[t/2,0,-t/2],[0,0,-t]],r=i.map((e=>[-e[0],e[1],e[2]])),s=1e-5,n=this.interpolatePoints({points:i,periodic:!1,tolerance:s}),o=this.interpolatePoints({points:r.reverse(),periodic:!1,tolerance:s}),a=this.converterService.combineEdgesAndWiresIntoAWire({shapes:[n,o]}),c=this.transformsService.rotate({shape:a,angle:e.rotation,axis:[0,1,0]}),h=this.transformsService.alignAndTranslate({shape:c,direction:e.direction,center:e.center});return a.delete(),c.delete(),n.delete(),o.delete(),h}createNGonWire(e){const t=this.shapesHelperService.ngon(e.nrCorners,e.radius,[0,0]),i=[];t.forEach((e=>{i.push(this.edgesService.lineEdge(e))}));const r=this.converterService.combineEdgesAndWiresIntoAWire({shapes:i}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return r.delete(),s}createLPolygonWire(e){let t;switch(e.align){case H.directionEnum.outside:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case H.directionEnum.inside:t=this.shapesHelperService.polygonLInverted(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;case H.directionEnum.middle:t=this.shapesHelperService.polygonLMiddle(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond);break;default:t=this.shapesHelperService.polygonL(e.widthFirst,e.lengthFirst,e.widthSecond,e.lengthSecond)}const i=this.createPolygonWire({points:t}),r=this.transformsService.rotate({shape:i,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return i.delete(),r.delete(),s}createIBeamProfileWire(e){const t=this.shapesHelperService.beamIProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),i=this.createPolygonWire({points:t}),r=this.transformsService.rotate({shape:i,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return i.delete(),r.delete(),s}createHBeamProfileWire(e){const t=this.shapesHelperService.beamHProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),i=this.createPolygonWire({points:t}),r=this.transformsService.rotate({shape:i,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return i.delete(),r.delete(),s}createTBeamProfileWire(e){const t=this.shapesHelperService.beamTProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.alignment),i=this.createPolygonWire({points:t}),r=this.transformsService.rotate({shape:i,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return i.delete(),r.delete(),s}createUBeamProfileWire(e){const t=this.shapesHelperService.beamUProfile(e.width,e.height,e.webThickness,e.flangeThickness,e.flangeWidth,e.alignment),i=this.createPolygonWire({points:t}),r=this.transformsService.rotate({shape:i,angle:e.rotation,axis:[0,1,0]}),s=this.transformsService.alignAndTranslate({shape:r,direction:e.direction,center:e.center});return i.delete(),r.delete(),s}createPolygonWire(e){const t=[];for(let i=0;i<e.points.length;i++)t.push(this.entitiesService.gpPnt(e.points[i]));const i=new this.occ.BRepBuilderAPI_MakeWire_1;for(let r=0;r<e.points.length-1;r++){const e=t[r],s=t[r+1],n=this.makeWireBetweenTwoPoints(e,s);i.Add_2(n)}const r=t[e.points.length-1],s=t[0],n=this.makeWireBetweenTwoPoints(r,s);i.Add_2(n);const o=i.Wire();return i.delete(),o}createPolylineWire(e){const t=[];for(let i=0;i<e.points.length;i++)t.push(this.entitiesService.gpPnt(e.points[i]));const i=new this.occ.BRepBuilderAPI_MakeWire_1;for(let r=0;r<e.points.length-1;r++){const e=t[r],s=t[r+1],n=this.makeWireBetweenTwoPoints(e,s);i.Add_2(n)}const r=i.Wire();return i.delete(),r}createLineWire(e){const t=[];t.push(this.entitiesService.gpPnt(e.start)),t.push(this.entitiesService.gpPnt(e.end));const i=new this.occ.BRepBuilderAPI_MakeWire_1;for(let e=0;e<t.length-1;e++){const r=t[e],s=t[e+1],n=this.makeWireBetweenTwoPoints(r,s);i.Add_2(n)}const r=i.Wire();return i.delete(),r}createLineWireWithExtensions(e){const t=this.base.vector.normalized({vector:this.base.vector.sub({first:e.end,second:e.start})}),i=this.base.vector.mul({vector:t,scalar:-e.extensionStart}),r=this.base.vector.mul({vector:t,scalar:e.extensionEnd}),s=this.base.vector.add({first:e.start,second:i}),n=this.base.vector.add({first:e.end,second:r});return this.createLineWire({start:s,end:n})}makeWireBetweenTwoPoints(e,t){const i=new this.occ.GC_MakeSegment_1(e,t),r=i.Value(),s=r.get(),n=new this.occ.BRepBuilderAPI_MakeEdge_24(new this.occ.Handle_Geom_Curve_2(s)),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return n.delete(),i.delete(),r.delete(),s.delete(),o.delete(),a.delete(),c}divideWireByParamsToPoints(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.divideCurveToNrSegments(Object.assign(Object.assign({},e),{shape:i}),i.FirstParameter(),i.LastParameter());return i.delete(),r}divideWireByEqualDistanceToPoints(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.divideCurveByEqualLengthDistance(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}pointOnWireAtParam(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.pointOnCurveAtParam(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}tangentOnWireAtParam(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.tangentOnCurveAtParam(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}pointOnWireAtLength(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.pointOnCurveAtLength(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}pointsOnWireAtLengths(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.pointsOnCurveAtLengths(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}pointsOnWireAtEqualLength(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.getWireLength({shape:t})/e.length,s=[];let n=0;for(let t=0;t<r;t++)s.push(e.length*t),n+=e.length;e.includeFirst||s.shift(),e.tryNext&&s.push(n+e.length);const o=this.geomService.pointsOnCurveAtLengths({lengths:s,shape:i});return e.includeLast&&o.push(this.endPointOnWire({shape:t})),i.delete(),o}pointsOnWireAtPatternOfLengths(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.getWireLength({shape:t}),s=[];let n=0,o=0,a=!1;for(;!a;)for(let t=0;t<e.lengths.length;t++){const i=e.lengths[t];if(!(n+i<=r)){a=!0;break}s.push(n+i),n+=i,o=t}e.includeFirst&&s.unshift(0),e.tryNext&&(o+1<e.lengths.length?s.push(n+e.lengths[o+1]):s.push(n+e.lengths[0]));const c=this.geomService.pointsOnCurveAtLengths({lengths:s,shape:i});return e.includeLast&&c.push(this.endPointOnWire({shape:t})),i.delete(),c}tangentOnWireAtLength(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1),r=this.geomService.tangentOnCurveAtLength(Object.assign(Object.assign({},e),{shape:i}));return i.delete(),r}interpolatePoints(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length),i=[];for(let r=1;r<=e.points.length;r++){const s=this.entitiesService.gpPnt(e.points[r-1]);i.push(s),t.SetValue(r,s)}const r=this.occ.BitByBitDev.BitInterpolate(t,e.periodic,e.tolerance);if(r.IsNull())return i.forEach((e=>e.delete())),void t.delete();{const e=r.get(),s=new this.occ.Handle_Geom_Curve_2(e),n=new this.occ.BRepBuilderAPI_MakeEdge_24(s),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return r.Nullify(),r.delete(),s.Nullify(),s.delete(),n.delete(),o.delete(),a.delete(),i.forEach((e=>e.delete())),t.delete(),c}}isWireClosed(e){const t=this.startPointOnWire({shape:e.shape}),i=this.endPointOnWire({shape:e.shape});return this.base.vector.vectorsTheSame({vec1:i,vec2:t,tolerance:1e-7})}splitOnPoints(e){const t=e.shape,i=e.points,r=this.shapeGettersService.getEdges({shape:t});if(0===r.length)return[];const s=[],n=r[0];let o={current:0},a={current:0};this.occRefReturns.BRep_Tool_Curve_2(n,o,a),s.push({edgeIndex:0,parameter:o.current}),i.forEach((e=>{let t=1/0,i=-1,n=0;r.forEach(((r,s)=>{const o={current:0},a={current:0},c=this.occRefReturns.BRep_Tool_Curve_2(r,o,a),h=o.current,l=a.current,d=this.entitiesService.gpPnt(e),u=new this.occ.GeomAPI_ProjectPointOnCurve_2(d,c);if(u.NbPoints()>0){const e=u.LowerDistanceParameter(),r=Math.max(h,Math.min(l,e)),o=u.Distance(1);o<t&&(t=o,i=s,n=r)}})),i>=0&&s.push({edgeIndex:i,parameter:n})}));const c=r[r.length-1];o={current:0},a={current:0},this.occRefReturns.BRep_Tool_Curve_2(c,o,a),s.push({edgeIndex:r.length-1,parameter:a.current});const h=s.filter(((e,t,i)=>t===i.findIndex((t=>t.edgeIndex===e.edgeIndex&&t.parameter===e.parameter))));h.sort(((e,t)=>e.edgeIndex!==t.edgeIndex?e.edgeIndex-t.edgeIndex:e.parameter-t.parameter));const l=[];for(let e=0;e<h.length-1;e++){const t=h[e],i=h[e+1],s=new this.occ.BRepBuilderAPI_MakeWire_1;if(t.edgeIndex===i.edgeIndex){const e=r[t.edgeIndex],n={current:0},o={current:0},a=this.occRefReturns.BRep_Tool_Curve_2(e,n,o);if(t.parameter===i.parameter)continue;const c=new this.occ.Geom_TrimmedCurve(a,t.parameter,i.parameter,!0,!0),h=new this.occ.Handle_Geom_Curve_2(c),l=new this.occ.BRepBuilderAPI_MakeEdge_24(h).Edge();s.Add_1(l)}else{const e=r[t.edgeIndex],n={current:0},o={current:0},a=this.occRefReturns.BRep_Tool_Curve_2(e,n,o),c=o.current;if(t.parameter<c){const e=new this.occ.Geom_TrimmedCurve(a,t.parameter,c,!0,!0),i=new this.occ.Handle_Geom_Curve_2(e),r=new this.occ.BRepBuilderAPI_MakeEdge_24(i).Edge();s.Add_1(r)}for(let e=t.edgeIndex+1;e<i.edgeIndex;e++)s.Add_1(r[e]);const h=r[i.edgeIndex],l={current:0},d={current:0},u=this.occRefReturns.BRep_Tool_Curve_2(h,l,d),p=l.current;if(i.parameter>p){const e=new this.occ.Geom_TrimmedCurve(u,p,i.parameter,!0,!0),t=new this.occ.Handle_Geom_Curve_2(e),r=new this.occ.BRepBuilderAPI_MakeEdge_24(t).Edge();s.Add_1(r)}}if(s.IsDone()){const e=s.Wire();l.push(e)}}return l}createLines(e){const t=e.lines.map((e=>this.createLineWire(e))).filter((e=>void 0!==e));return this.converterService.makeCompoundIfNeeded(t,e.returnCompound)}createWireFromTwoCirclesTan(e){const t=this.shapeGettersService.getEdges({shape:e.circle1}),i=this.shapeGettersService.getEdges({shape:e.circle2});if(1===t.length&&1===i.length){const r=t[0],s=i[0],n=this.edgesService.constraintTanLinesOnTwoCircles({circle1:r,circle2:s,positionResult:e.keepLines===H.twoSidesStrictEnum.outside?H.positionResultEnum.keepSide2:H.positionResultEnum.keepSide1,circleRemainders:this.enumService.convertFourSidesStrictEnumToTwoCircleInclusionEnum(e.circleRemainders),tolerance:e.tolerance}),o=this.converterService.combineEdgesAndWiresIntoAWire({shapes:n});return n.forEach((e=>e.delete())),r.delete(),s.delete(),o}throw new Error("Could not find the edges of the provided circle wires.")}createZigZagBetweenTwoWires(e){const t=e.wire1,i=e.wire2;let r=[],s=[];if(e.zigZagsPerEdge){const n=this.edgesService.getEdgesAlongWire({shape:t}),o=this.edgesService.getEdgesAlongWire({shape:i});e.divideByEqualDistance?(r=n.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=o.map((t=>this.edgesService.divideEdgeByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})))):(r=n.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))),s=o.map((t=>this.edgesService.divideEdgeByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1}))))}else e.divideByEqualDistance?(r=[this.divideWireByEqualDistanceToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByEqualDistanceToPoints({shape:i,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]):(r=[this.divideWireByParamsToPoints({shape:t,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})],s=[this.divideWireByParamsToPoints({shape:i,nrOfDivisions:2*e.nrZigZags,removeEndPoint:!1,removeStartPoint:!1})]);const n=r.map(((t,i)=>{const r=s[i],n=[];for(let i=0;i<t.length;i++)i%2==0?e.inverse?n.push(r[i]):n.push(t[i]):e.inverse?n.push(t[i]):n.push(r[i]);return this.createPolylineWire({points:n})}));return this.converterService.combineEdgesAndWiresIntoAWire({shapes:n})}getWireCenterOfMass(e){return this.geomService.getLinearCenterOfMass(e)}hexagonsInGrid(e){const t=this.base.point.hexGridScaledToFit(Object.assign(Object.assign({},e),{centerGrid:!0,pointsOnGround:!0})),i=t.hexagons.map((e=>this.createPolygonWire({points:e})));let r=0,s=0,n=0,o=0;const a=[];for(let c=0;c<e.nrHexagonsInHeight;c++)for(let h=0;h<e.nrHexagonsInWidth;h++){let l=1;e.scalePatternWidth&&e.scalePatternWidth.length>0&&(l=e.scalePatternWidth[r],r++,r>=e.scalePatternWidth.length&&(r=0));let d=1;e.scalePatternHeight&&e.scalePatternHeight.length>0&&(d=e.scalePatternHeight[s],s++,s>=e.scalePatternHeight.length&&(s=0));let u=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(u=e.inclusionPattern[n],n++,n>=e.inclusionPattern.length&&(n=0));let p=0;if(e.filletPattern&&e.filletPattern.length>0&&(p=e.filletPattern[o],o++,o>=e.filletPattern.length&&(o=0)),u){p=t.maxFilletRadius*p;const r=i[c*e.nrHexagonsInWidth+h],s=t.centers[c*e.nrHexagonsInWidth+h];if(p>0){const e=this.filletsService.fillet2d({shape:r,radius:p}),t=[l,1,d];let i=e;1===l&&1===d||(i=this.transformsService.scale3d({shape:e,center:s,scale:t})),a.push(i)}else{const e=[l,1,d];let t=r;1===l&&1===d||(t=this.transformsService.scale3d({shape:r,center:s,scale:e})),a.push(t)}}}return a}createWireFromEdge(e){const t=new this.occ.BRepBuilderAPI_MakeWire_2(e.shape),i=t.Wire();return t.delete(),i}createBSpline(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0)),i=[];for(let r=1;r<=e.points.length;r++){const s=this.entitiesService.gpPnt(e.points[r-1]);i.push(s),t.SetValue(r,s)}e.closed&&t.SetValue(e.points.length+1,t.Value(1));const r=new this.occ.GeomAPI_PointsToBSpline_2(t,3,8,this.occ.GeomAbs_Shape.GeomAbs_C2,.001),s=r.Curve(),n=s.get(),o=new this.occ.Handle_Geom_Curve_2(n),a=new this.occ.BRepBuilderAPI_MakeEdge_24(o),c=a.Edge(),h=new this.occ.BRepBuilderAPI_MakeWire_2(c),l=h.Wire();return i.forEach((e=>e.delete())),t.delete(),r.delete(),s.Nullify(),s.delete(),o.Nullify(),o.delete(),a.delete(),c.delete(),h.delete(),l}createBezier(e){const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0));for(let i=1;i<=e.points.length;i++)t.SetValue(i,this.entitiesService.gpPnt(e.points[i-1]));e.closed&&t.SetValue(e.points.length+1,t.Value(1));const i=new this.occ.Geom_BezierCurve_1(t),r=new this.occ.Handle_Geom_Curve_2(i),s=new this.occ.BRepBuilderAPI_MakeEdge_24(r),n=s.Edge(),o=new this.occ.BRepBuilderAPI_MakeWire_2(n),a=o.Wire();return o.delete(),s.delete(),n.delete(),r.delete(),t.delete(),a}createBezierWeights(e){if(!e.closed&&e.points.length!==e.weights.length)throw new Error("Number of points and weights must be the same when bezier is not clsoed.");if(e.closed&&e.points.length!==e.weights.length-1)throw new Error("Number of points must be one less than number of weights when bezier is clsoed.");const t=new this.occ.TColgp_Array1OfPnt_2(1,e.points.length+(e.closed?1:0));for(let i=1;i<=e.points.length;i++)t.SetValue(i,this.entitiesService.gpPnt(e.points[i-1]));e.closed&&t.SetValue(e.points.length+1,t.Value(1));const i=new this.occ.TColStd_Array1OfReal_2(1,e.weights.length);for(let t=1;t<=e.weights.length;t++)i.SetValue(t,e.weights[t-1]);const r=new this.occ.Geom_BezierCurve_2(t,i),s=new this.occ.Handle_Geom_Curve_2(r),n=new this.occ.BRepBuilderAPI_MakeEdge_24(s),o=n.Edge(),a=new this.occ.BRepBuilderAPI_MakeWire_2(o),c=a.Wire();return a.delete(),n.delete(),o.delete(),s.delete(),t.delete(),i.delete(),c}addEdgesAndWiresToWire(e){const t=new this.occ.BRepBuilderAPI_MakeWire_1;let i;if(t.Add_2(e.shape),e.shapes.forEach((e=>{e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_EDGE?t.Add_1(e):e.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_WIRE&&t.Add_2(e)})),!t.IsDone())throw new Error("Wire could not be constructed. Check if edges and wires do not have disconnected elements.");return i=t.Wire(),t.delete(),i}startPointOnWire(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.startPointOnCurve({shape:i})}midPointOnWire(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.pointOnCurveAtParam({shape:i,param:.5})}endPointOnWire(e){const t=e.shape,i=new this.occ.BRepAdaptor_CompCurve_2(t,!1);return this.geomService.endPointOnCurve({shape:i})}textWires(e){const t=this.base.textService.vectorText(e),i=[];return t.forEach((e=>{e.chars.forEach((e=>{e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&i.push(t)}))}))})),i}textWiresWithData(e){const t=this.base.textService.vectorText(e),i=[],r=[];t.forEach((e=>{e.chars.forEach(((e,t)=>{const s=[];e.paths.forEach((e=>{const t=this.createPolylineWire({points:e});t&&(i.push(t),s.push(t))}));const n=this.converterService.makeCompound({shapes:s});r.push({id:`char-${t}`,shape:n})}))}));const s=this.converterService.makeCompound({shapes:i}),n=new Oe,o=this.operationsService.boundingBoxOfShape({shape:s}),a=o.max[0]-o.min[0],c=o.max[1]-o.min[1];n.width=a,n.height=c,n.compound="text-compound";const h=new Ae;return h.data=n,h.compound=s,h.shapes=[{id:"text-compound",shape:s},...r],h}placeWire(e,t){const i=this.shapeGettersService.getEdges({shape:e}),r=[];i.forEach((e=>{const i={current:0},s={current:0};this.occRefReturns.BRep_Tool_Range_1(e,i,s);const n=this.occRefReturns.BRep_Tool_Curve_2(e,i,s);if(!n.IsNull()){const e=this.entitiesService.gpPln([0,0,0],[0,1,0]),o=this.occ.GeomAPI.To2d(n,e),a=o.get(),c=this.edgesService.makeEdgeFromGeom2dCurveAndSurfaceBounded({curve:a,surface:t},i.current,s.current);c&&r.push(c),e.delete(),o.delete()}n.delete()})),i.forEach((e=>e.delete()));const s=this.converterService.combineEdgesAndWiresIntoAWire({shapes:r});return r.forEach((e=>e.delete())),s}wiresToPoints(e){const t=this.shapeGettersService.getWires({shape:e.shape}),i=[];return t.forEach((t=>{const r=this.edgesService.edgesToPoints(Object.assign(Object.assign({},e),{shape:t})).flat(),s=this.vecHelper.removeConsecutiveDuplicates(r,!1);i.push(s)})),i}}class _e{constructor(e,t,i,r,s,n,o,a,c,h,l,d){this.occ=e,this.occRefReturns=t,this.entitiesService=i,this.enumService=r,this.shapeGettersService=s,this.converterService=n,this.booleansService=o,this.wiresService=a,this.transformsService=c,this.vectorService=h,this.base=l,this.filletsService=d}createFaceFromWireOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWireOnFace(e.face,e.wire,e.inside)}createFacesFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFacesFromWiresOnFace(e.face,e.wires,e.inside)}createFaceFromWire(e){let t;if(this.enumService.getShapeTypeEnum(e.shape)!==H.shapeTypeEnum.wire)throw new Error("Provided input shape is not a wire");if(e.planar){const i=this.occ.TopoDS.Wire_1(e.shape);t=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(i,e.planar),i.delete()}else{const i=3,r=15,s=2,n=!1,o=1e-5,a=1e-4,c=.01,h=.1,l=8,d=9,u=new this.occ.BRepFill_Filling(i,r,s,n,o,a,c,h,l,d),p=this.shapeGettersService.getEdges(e);if(p.forEach((e=>{u.Add_1(e,this.occ.GeomAbs_Shape.GeomAbs_C0,!0)})),u.Build(),!u.IsDone())throw new Error("Could not create non planar face");t=u.Face(),u.delete(),p.forEach((e=>e.delete()))}return t}getFaceArea(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.SurfaceProperties_1(e.shape,t,!1,!1);const i=t.Mass();return t.delete(),i}getFacesAreas(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceArea({shape:e})))}getFaceCenterOfMass(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.SurfaceProperties_1(e.shape,t,!1,!1);const i=t.CentreOfMass(),r=[i.X(),i.Y(),i.Z()];return t.delete(),i.delete(),r}getFacesCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getFaceCenterOfMass({shape:e})))}filterFacePoints(e){const t=[];if(e.points.length>0){const i=new this.occ.BRepClass_FaceClassifier_1;return e.points.forEach((r=>{const s=this.entitiesService.gpPnt(r);i.Perform_2(e.shape,s,e.tolerance,e.useBndBox,e.gapTolerance);const n=i.State(),o=this.enumService.getTopAbsStateEnum(n);e.keepOn&&o===H.topAbsStateEnum.on&&t.push(r),e.keepIn&&o===H.topAbsStateEnum.in&&t.push(r),e.keepOut&&o===H.topAbsStateEnum.out&&t.push(r),e.keepUnknown&&o===H.topAbsStateEnum.unknown&&t.push(r),s.delete()})),i.delete(),t}return[]}createSquareFace(e){const t=this.wiresService.createSquareWire(e),i=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),i}createRectangleFace(e){const t=this.wiresService.createRectangleWire(e),i=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!0);return t.delete(),i}createFaceFromMultipleCircleTanWires(e){const t=e.circles,i=[];if(e.combination===H.combinationCirclesForFaceEnum.allWithAll)for(let r=0;r<t.length;r++)for(let s=r+1;s<t.length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r],circle2:t[s],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);i.push(o)}else if(e.combination===H.combinationCirclesForFaceEnum.inOrder)for(let r=0;r<t.length-1;r++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r],circle2:t[r+1],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);i.push(n)}else if(e.combination===H.combinationCirclesForFaceEnum.inOrderClosed)for(let r=0;r<t.length;r++){const s=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r],circle2:t[(r+1)%t.length],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),n=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(s,!0);i.push(n)}let r;return r=e.unify?this.booleansService.union({shapes:i,keepEdges:!1}):this.converterService.makeCompound({shapes:i}),r}createFaceFromMultipleCircleTanWireCollections(e){const t=e.listsOfCircles,i=[];if(e.combination===H.combinationCirclesForFaceEnum.allWithAll)for(let r=0;r<t.length;r++){const s=t[r],n=t[r+1];if(!n)break;for(let t=0;t<s.length;t++)for(let r=0;r<n.length;r++){const o=s[t],a=n[r],c=this.wiresService.createWireFromTwoCirclesTan({circle1:o,circle2:a,keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),h=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(c,!0);i.push(h)}}else if(e.combination===H.combinationCirclesForFaceEnum.inOrder){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrder strategy.");for(let r=0;r<t.length-1;r++)for(let s=0;s<t[r].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r][s],circle2:t[r+1][s],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);i.push(o)}}else if(e.combination===H.combinationCirclesForFaceEnum.inOrderClosed){for(let e=0;e<t.length;e++)if(t[e].length!==t[0].length)throw new Error("All lists of circles must have the same length in order to use inOrderClosed strategy.");for(let r=0;r<t.length-1;r++)for(let s=0;s<t[r].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r][s],circle2:t[r+1][s],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);i.push(o)}for(let r=0;r<t.length;r++)for(let s=0;s<t[r].length;s++){const n=this.wiresService.createWireFromTwoCirclesTan({circle1:t[r][s],circle2:t[r][(s+1)%t[r].length],keepLines:H.twoSidesStrictEnum.outside,circleRemainders:H.fourSidesStrictEnum.outside,tolerance:e.tolerance}),o=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(n,!0);i.push(o)}}let r;return r=e.unify?this.booleansService.union({shapes:i,keepEdges:!1}):this.converterService.makeCompound({shapes:i}),r}faceNormalOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),{uMin:r,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=r+(s-r)*e.paramU,c=n+(o-n)*e.paramV,h=this.entitiesService.gpDir([0,1,0]);this.occ.GeomLib.NormEstim(i,this.entitiesService.gpPnt2d([a,c]),1e-7,h),t.Orientation_1()===this.occ.TopAbs_Orientation.TopAbs_REVERSED&&h.Reverse();const l=[h.X(),h.Y(),h.Z()];return h.delete(),i.delete(),l}getUVBounds(e){const t={current:0},i={current:0},r={current:0},s={current:0};return this.occRefReturns.BRepTools_UVBounds_1(e,t,i,r,s),{uMin:t.current,uMax:i.current,vMin:r.current,vMax:s.current}}createFaceFromWires(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.shapes,e.planar)}createFaceFromWiresOnFace(e){return this.entitiesService.bRepBuilderAPIMakeFaceFromWires(e.wires,!1,e.face,e.inside)}createFacesFromWires(e){return e.shapes.map((t=>this.createFaceFromWire({shape:t,planar:e.planar})))}faceFromSurface(e){const t=this.entitiesService.bRepBuilderAPIMakeFaceFromSurface(e.shape,e.tolerance);if(t.IsNull())throw t.delete(),new Error("Could not construct a face from the surface. Check if surface is not infinite.");return t}faceFromSurfaceAndWire(e){const t=this.entitiesService.bRepBuilderAPIMakeFaceFromSurfaceAndWire(e.surface,e.wire,e.inside);if(t.IsNull())throw t.delete(),new Error("Could not construct a face from the surface. Check if surface is not infinite.");return t}getUMinBound(e){const t=e.shape,{uMin:i}=this.getUVBounds(t);return i}getUMaxBound(e){const t=e.shape,{uMax:i}=this.getUVBounds(t);return i}getVMinBound(e){const t=e.shape,{vMin:i}=this.getUVBounds(t);return i}getVMaxBound(e){const t=e.shape,{vMax:i}=this.getUVBounds(t);return i}subdivideToPointsControlled(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.nrDivisionsU;t++){const i=(n-s)/(e.nrDivisionsU-1),h=i/2,l=i*t;for(let i=0;i<e.nrDivisionsV;i++){const n=(a-o)/(e.nrDivisionsV-1),d=n/2;let u=o+n*i;u+=e.shiftHalfStepNthV&&(t+e.shiftHalfStepVOffsetN)%e.shiftHalfStepNthV==0?d:0;let p=s+l;p+=e.shiftHalfStepNthU&&(i+e.shiftHalfStepUOffsetN)%e.shiftHalfStepNthU==0?h:0;const f=this.entitiesService.gpPnt([0,0,0]);r.D0(p,u,f);const v=[f.X(),f.Y(),f.Z()];let g=!0;(0===t&&e.removeStartEdgeNthU&&(i+e.removeStartEdgeUOffsetN)%e.removeStartEdgeNthU==0||t===e.nrDivisionsU-1&&e.removeEndEdgeNthU&&(i+e.removeEndEdgeUOffsetN)%e.removeEndEdgeNthU==0||0===i&&e.removeStartEdgeNthV&&(t+e.removeStartEdgeVOffsetN)%e.removeStartEdgeNthV==0||i===e.nrDivisionsV-1&&e.removeEndEdgeNthV&&(t+e.removeEndEdgeVOffsetN)%e.removeEndEdgeNthV==0)&&(g=!1),g&&c.push(v),f.delete()}}return i.delete(),c}subdivideToPoints(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartEdgeU?1:0,l=e.removeEndEdgeU?1:0,d=e.removeStartEdgeV?1:0,u=e.removeEndEdgeV?1:0;for(let t=0+h;t<e.nrDivisionsU-l;t++){const i=(n-s)/(e.nrDivisionsU-1),h=i/2,l=i*t,p=s+(e.shiftHalfStepU?h:0)+l;for(let t=0+d;t<e.nrDivisionsV-u;t++){const i=(a-o)/(e.nrDivisionsV-1),s=i/2,n=i*t,h=o+(e.shiftHalfStepV?s:0)+n,l=this.entitiesService.gpPnt([0,0,0]);r.D0(p,h,l);const d=[l.X(),l.Y(),l.Z()];c.push(d),l.delete()}}return i.delete(),c}subdivideToWires(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=1/e.nrDivisions;for(let t=0;t<=e.nrDivisions;t++){const e=h*t;c.push(e)}if(e.removeStart&&c.shift(),e.removeEnd&&c.pop(),e.shiftHalfStep){const e=h/2;c.forEach(((t,i)=>{c[i]=c[i]+e}))}const l=[];for(let t=0;t<c.length;t++){const i=c[t],h=this.placeWireOnParamSurface(e.isU,i,s,n,o,a,r);l.push(h)}return i.delete(),l}subdivideToRectangleWires(e){var t;if(void 0===e.shape)throw Error("Face not defined");const i=[],r=e.shape,s=this.occ.BRep_Tool.Surface_2(r).get(),{uMin:n,uMax:o,vMin:a,vMax:c}=this.getUVBounds(r),h=[],l=(1-2*e.offsetFromBorderU)/e.nrRectanglesU,d=l/2;for(let t=0;t<e.nrRectanglesU;t++){const i=l*t+d+e.offsetFromBorderU;h.push(i)}const u=[],p=(1-2*e.offsetFromBorderV)/e.nrRectanglesV,f=p/2;for(let t=0;t<e.nrRectanglesV;t++){const i=p*t+f+e.offsetFromBorderV;u.push(i)}const v=this.wiresService.createLineWire({start:[0,0,0],end:[1,0,0]}),g=this.wiresService.createLineWire({start:[0,0,0],end:[0,0,1]}),m=this.wiresService.placeWire(v,s),S=this.wiresService.placeWire(g,s),y=this.wiresService.getWireLength({shape:m}),b=this.wiresService.getWireLength({shape:S}),w=o-n,E=c-a,x=[];let T=0,P=0,C=0,k=0;const D=[];for(let r=0;r<h.length;r++)for(let o=0;o<u.length;o++){let c=1;e.scalePatternU&&e.scalePatternU.length>0&&(c=e.scalePatternU[T],T++,T>=e.scalePatternU.length&&(T=0));let d=1;e.scalePatternV&&e.scalePatternV.length>0&&(d=e.scalePatternV[P],P++,P>=e.scalePatternV.length&&(P=0));let f=!0;e.inclusionPattern&&e.inclusionPattern.length>0&&(f=e.inclusionPattern[C],C++,C>=e.inclusionPattern.length&&(C=0));let v=0;if(e.filletPattern&&e.filletPattern.length>0&&(v=e.filletPattern[k],k++,k>=e.filletPattern.length&&(k=0)),f){const e=p*d,f=l*c,g=Math.min(e*E*y,f*w*b);(g===e*E*y||g===f*w*b)&&(v*=g/2);const m=null===(t=D.find((t=>t.id===`${e}-${f}-${v}`)))||void 0===t?void 0:t.shape,S=[u[o]*E+a,0,h[r]*w+n];if(m){const e=this.transformsService.translate({shape:m,translation:S}),t=this.wiresService.placeWire(e,s);x.push(t)}else{const t=this.wiresService.createRectangleWire({width:e,length:f,center:[0,0,0],direction:[0,1,0]});if(v>0){const r=[E*y,1,w*b],n=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:r}),o=this.filletsService.fillet2d({shape:n,radius:v}),a=[1/y,1,1/b];let c=o;this.vectorService.vectorsTheSame(a,[1,1,1],1e-7)||(c=this.transformsService.scale3d({shape:o,center:[0,0,0],scale:a}));const h=this.transformsService.translate({shape:c,translation:S});i.push(t);const l=this.wiresService.placeWire(h,s);x.push(l),D.push({id:`${e}-${f}-${v}`,shape:c})}else{const r=this.transformsService.scale3d({shape:t,center:[0,0,0],scale:[E,1,w]}),n=this.transformsService.translate({shape:r,translation:S});i.push(t);const o=this.wiresService.placeWire(n,s);x.push(o),D.push({id:`${e}-${f}-${v}`,shape:r})}}}}return i.forEach((e=>e.delete())),x}subdivideToRectangleHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToRectangleWires(e),i=this.shapeGettersService.getWires({shape:e.shape}),r=this.wiresService.getWiresLengths({shapes:i}),s=i[r.indexOf(Math.max(...r))],n=t.map((e=>this.wiresService.reversedWire({shape:e}))),o=[s,...n],a=this.createFaceFromWiresOnFace({wires:o,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),n.forEach((e=>e.delete())),[a,...d]}subdivideToHexagonWires(e){var t,i,r,s;if(void 0===e.shape)throw new Error("Face not defined");const n=[],o=e.shape,a=this.occ.BRep_Tool.Surface_2(o).get(),{uMin:c,uMax:h,vMin:l,vMax:d}=this.getUVBounds(o),u=h-c,p=d-l;if(u<=0||p<=0)return console.warn("Face has zero or negative parametric range. Skipping."),[];const f=u*(1-2*e.offsetFromBorderU),v=p*(1-2*e.offsetFromBorderV),g=c+u*e.offsetFromBorderU,m=l+p*e.offsetFromBorderV;if(f<=0||v<=0)return console.warn("Grid dimensions are zero or negative after applying offset. Skipping."),[];const S=this.base.point.hexGridScaledToFit({width:v,height:f,nrHexagonsInHeight:e.nrHexagonsU,nrHexagonsInWidth:e.nrHexagonsV,centerGrid:!1,pointsOnGround:!0,flatTop:e.flatU,extendTop:e.extendUUp,extendBottom:e.extendUBottom,extendLeft:e.extendVBottom,extendRight:e.extendVUp}),y=S.hexagons.map((e=>this.wiresService.createPolygonWire({points:e})));n.push(...y);const b=[m,0,g],w=y.map((e=>this.transformsService.translate({shape:e,translation:b})));n.push(...w);const E=this.base.point.translatePoints({points:S.centers,translation:b}),x=[];let T=0,P=0,C=0,k=0;const D=e.nrHexagonsU*e.nrHexagonsV;if(w.length!==D||E.length!==D)return console.error(`Generated ${w.length} hexagons, but expected ${D}. Check hexGridScaledToFit logic.`),[];for(let o=0;o<e.nrHexagonsU;o++)for(let c=0;c<e.nrHexagonsV;c++){const h=o*e.nrHexagonsV+c;let l=1;(null===(t=e.scalePatternU)||void 0===t?void 0:t.length)>0&&(l=e.scalePatternU[T%e.scalePatternU.length],T++);let d=1;(null===(i=e.scalePatternV)||void 0===i?void 0:i.length)>0&&(d=e.scalePatternV[P%e.scalePatternV.length],P++);let u=!0;(null===(r=e.inclusionPattern)||void 0===r?void 0:r.length)>0&&(u=e.inclusionPattern[C%e.inclusionPattern.length],C++);let p=0;if((null===(s=e.filletPattern)||void 0===s?void 0:s.length)>0&&(p=e.filletPattern[k%e.filletPattern.length],k++),u){const e=w[h],t=E[h];let i=e;const r=S.maxFilletRadius*p;if(r>1e-6){const t=this.filletsService.fillet2d({shape:e,radius:r});n.push(t),i=t}let s=i;const o=[d,1,l];if(Math.abs(l-1)>1e-6||Math.abs(d-1)>1e-6){const e=this.transformsService.scale3d({shape:i,center:t,scale:o});n.push(e),s=e}const c=this.wiresService.placeWire(s,a);x.push(c)}}return n.forEach((e=>{e.delete()})),x}subdivideToHexagonHoles(e){void 0===e.scalePatternU&&(e.scalePatternU=[.5]),void 0===e.scalePatternV&&(e.scalePatternV=[.5]);const t=this.subdivideToHexagonWires(e),i=this.shapeGettersService.getWires({shape:e.shape}),r=this.wiresService.getWiresLengths({shapes:i}),s=i[r.indexOf(Math.max(...r))],n=t.map((e=>this.wiresService.reversedWire({shape:e}))),o=[s,...n],a=this.createFaceFromWiresOnFace({wires:o,face:e.shape,inside:!0}),c=this.faceNormalOnUV({shape:e.shape,paramU:0,paramV:0}),h=this.faceNormalOnUV({shape:a,paramU:0,paramV:0});let l=!1;this.vectorService.angleBetweenVectors(c,h)>1e-7&&(l=!0,a.Reverse());let d=[];return e.holesToFaces&&(d=t.map((t=>this.createFaceFromWireOnFace({wire:t,face:e.shape,inside:!0}))),l&&d.forEach((e=>e.Reverse()))),t.forEach((e=>e.delete())),s.delete(),n.forEach((e=>e.delete())),[a,...d]}subdivideToNormals(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),{uMin:r,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=[],c=e.removeStartEdgeU?1:0,h=e.removeEndEdgeU?1:0,l=e.removeStartEdgeV?1:0,d=e.removeEndEdgeV?1:0;for(let u=0+c;u<e.nrDivisionsU-h;u++){const c=(s-r)/(e.nrDivisionsU-1),h=c/2,p=c*u,f=r+(e.shiftHalfStepU?h:0)+p;for(let r=0+l;r<e.nrDivisionsV-d;r++){const s=(o-n)/(e.nrDivisionsV-1),c=s/2,h=s*r,l=n+(e.shiftHalfStepV?c:0)+h,d=this.entitiesService.gpDir([0,1,0]),u=this.entitiesService.gpPnt2d([f,l]);this.occ.GeomLib.NormEstim(i,u,1e-7,d),t.Orientation_1()===this.occ.TopAbs_Orientation.TopAbs_REVERSED&&d.Reverse();const p=[d.X(),d.Y(),d.Z()];a.push(p),d.delete(),u.delete()}}return i.delete(),a}wireAlongParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=this.placeWireOnParamSurface(e.isU,e.param,s,n,o,a,r);return i.delete(),c}placeWireOnParamSurface(e,t,i,r,s,n,o){let a,c=t;e?(c=i+(r-i)*t,a=this.wiresService.createLineWire({start:[s,0,c],end:[n,0,c]})):(c=s+(n-s)*t,a=this.wiresService.createLineWire({start:[c,0,i],end:[c,0,r]}));const h=this.wiresService.placeWire(a,o);return a.delete(),h}wiresAlongParams(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[];for(let t=0;t<e.params.length;t++){const i=e.params[t],h=this.placeWireOnParamSurface(e.isU,i,s,n,o,a,r);c.push(h)}return i.delete(),c}subdivideToPointsOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get(),{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=[],h=e.removeStartPoint?1:0,l=e.removeEndPoint?1:0;let d=e.param;d=e.isU?s+(n-s)*d:o+(a-o)*d;for(let t=0+h;t<e.nrPoints-l;t++){let i;if(e.isU){const r=(a-o)/(e.nrPoints-1),s=r/2,n=r*t;i=o+(e.shiftHalfStep?s:0)+n}else{const r=(n-s)/(e.nrPoints-1),o=r/2,a=r*t;i=s+(e.shiftHalfStep?o:0)+a}const h=this.entitiesService.gpPnt([0,0,0]);e.isU?r.D0(d,i,h):r.D0(i,d,h);const l=[h.X(),h.Y(),h.Z()];c.push(l),h.delete()}return i.delete(),c}subdivideToUVOnParam(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:i,uMax:r,vMin:s,vMax:n}=this.getUVBounds(t),o=[],a=e.removeStartPoint?1:0,c=e.removeEndPoint?1:0;let h=e.param;h=e.isU?i+(r-i)*h:s+(n-s)*h;for(let t=0+a;t<e.nrPoints-c;t++){let a,c;if(e.isU){const i=(n-s)/(e.nrPoints-1),r=i/2,o=i*t;a=s+(e.shiftHalfStep?r:0)+o}else{const s=(r-i)/(e.nrPoints-1),n=s/2,o=s*t;a=i+(e.shiftHalfStep?n:0)+o}c=e.isU?[h,a]:[a,h],o.push(c)}return o}subdivideToUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:i,uMax:r,vMin:s,vMax:n}=this.getUVBounds(t),o=[],a=e.removeStartEdgeU?1:0,c=e.removeEndEdgeU?1:0,h=e.removeStartEdgeV?1:0,l=e.removeEndEdgeV?1:0;for(let t=0+a;t<e.nrDivisionsU-c;t++){const a=(r-i)/(e.nrDivisionsU-1),c=a/2,d=a*t,u=i+(e.shiftHalfStepU?c:0)+d;for(let t=0+h;t<e.nrDivisionsV-l;t++){const i=(n-s)/(e.nrDivisionsV-1),r=i/2,a=i*t,c=s+(e.shiftHalfStepV?r:0)+a;o.push([u,c])}}return o}uvOnFace(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,{uMin:i,uMax:r,vMin:s,vMax:n}=this.getUVBounds(t);return[i+(r-i)*e.paramU,s+(n-s)*e.paramV]}pointsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t).get(),{uMin:r,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t);return e.paramsUV.map((e=>{const t=r+(s-r)*e[0],a=n+(o-n)*e[1],c=this.entitiesService.gpPnt([0,0,0]);i.D0(t,a,c);const h=[c.X(),c.Y(),c.Z()];return c.delete(),h}))}normalsOnUVs(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),{uMin:r,uMax:s,vMin:n,vMax:o}=this.getUVBounds(t),a=e.paramsUV.map((e=>{const t=r+(s-r)*e[0],a=n+(o-n)*e[1],c=this.entitiesService.gpDir([0,1,0]);this.occ.GeomLib.NormEstim(i,this.entitiesService.gpPnt2d([t,a]),1e-7,c);const h=[c.X(),c.Y(),c.Z()];return c.delete(),h}));return i.delete(),a}pointOnUV(e){if(void 0===e.shape)throw Error("Face not defined");const t=e.shape,i=this.occ.BRep_Tool.Surface_2(t),r=i.get();if(r){const{uMin:s,uMax:n,vMin:o,vMax:a}=this.getUVBounds(t),c=s+(n-s)*e.paramU,h=o+(a-o)*e.paramV,l=this.entitiesService.gpPnt([0,0,0]);r.D0(c,h,l);const d=[l.X(),l.Y(),l.Z()];return l.delete(),i.delete(),d}}normalOnUV(e){return this.faceNormalOnUV(e)}createPolygonFace(e){const t=this.wiresService.createPolygonWire(e),i=this.entitiesService.bRepBuilderAPIMakeFaceFromWire(t,!1);return t.delete(),i}}class Re{constructor(e,t,i,r,s,n){this.occ=e,this.entitiesService=t,this.converterService=i,this.shapeGettersService=r,this.wiresService=s,this.booleansService=n}vertexFromXYZ(e){return this.entitiesService.makeVertex([e.x,e.y,e.z])}vertexFromPoint(e){return this.entitiesService.makeVertex(e.point)}verticesFromPoints(e){return e.points.map((e=>this.vertexFromPoint({point:e})))}verticesCompoundFromPoints(e){const t=this.verticesFromPoints(e);return this.converterService.makeCompound({shapes:t})}getVertices(e){return this.shapeGettersService.getVertices(e)}getVerticesAsPoints(e){const t=this.shapeGettersService.getVertices(e);return this.verticesToPoints({shapes:t})}verticesToPoints(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool.Pnt(e),i=[t.X(),t.Y(),t.Z()];return t.delete(),i}))}pointsToVertices(e){return e.shapes.map((e=>{const t=this.occ.BRep_Tool.Pnt(e),i=[t.X(),t.Y(),t.Z()];return t.delete(),i}))}vertexToPoint(e){return this.converterService.vertexToPoint(e)}projectPoints(e){const t=e.points.map((t=>[t[0]+e.direction[0],t[1]+e.direction[1],t[2]+e.direction[2]])).map(((t,i)=>({start:e.points[i],end:t})));return this.wiresService.createLines({lines:t,returnCompound:!1}).map(((t,i)=>{const r=this.booleansService.intersection({shapes:[t,e.shape],keepEdges:!1}).map((e=>this.shapeGettersService.getVertices({shape:e})));if(r){const t=this.verticesToPoints({shapes:r.flat().filter((e=>void 0!==e))});return e.projectionType===H.pointProjectionTypeEnum.closest?[this.getClosestPointFromPoints(t,e.points[i])]:e.projectionType===H.pointProjectionTypeEnum.furthest?[this.getFurthestPointFromPoints(t,e.points[i])]:e.projectionType===H.pointProjectionTypeEnum.closestAndFurthest?[this.getClosestPointFromPoints(t,e.points[i]),this.getFurthestPointFromPoints(t,e.points[i])]:e.projectionType===H.pointProjectionTypeEnum.all?t:void 0}})).flat().filter((e=>void 0!==e))}getClosestPointFromPoints(e,t){let i=Number.MAX_VALUE,r=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s<i&&(i=s,r=e)})),r}getFurthestPointFromPoints(e,t){let i=0,r=[0,0,0];return e.forEach((e=>{const s=this.distanceBetweenTwoPoints(t,e);s>i&&(i=s,r=e)})),r}distanceBetweenTwoPoints(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}}class Me{constructor(e,t,i,r){this.occ=e,this.shapeGettersService=t,this.converterService=i,this.facesService=r}getShellSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}sewFaces(e){const t=new this.occ.BRepBuilderAPI_Sewing(e.tolerance,!0,!0,!0,!1);e.shapes.forEach((e=>{t.Add(e)}));const i=new this.occ.Message_ProgressRange_1;t.Perform(i);const r=t.SewedShape(),s=this.converterService.getActualTypeOfShape(r);return t.delete(),i.delete(),r.delete(),s}}class Le{constructor(e,t,i,r,s,n,o,a,c,h){this.occ=e,this.vecHelper=t,this.iteratorService=i,this.converterService=r,this.entitiesService=s,this.transformsService=n,this.shapeGettersService=o,this.edgesService=a,this.operationsService=c,this.facesService=h}filletEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.radius)throw Error("Radius not defined");const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational),i=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE),r=[];for(;i.More();){const s=this.occ.TopoDS.Edge_1(i.Current());r.push(s),t.Add_2(e.radius,s),i.Next()}const s=t.Shape();return t.delete(),i.delete(),r.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);let i,r=0,s=0;const n=e.indexes;if(this.iteratorService.forEachEdge(e.shape,((i,o)=>{if(n.includes(i)){let i=e.radius;if(e.radiusList&&(i=e.radiusList[s],s++),void 0===i)throw Error("Radius not defined, or radiusList not correct length");t.Add_2(i,o),r++}})),0===r)throw new Error("Fillet Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!");i=t.Shape(),t.delete();const o=this.converterService.getActualTypeOfShape(i);return i.delete(),o}}filletEdgesListOneRadius(e){if(e.edges&&e.edges.length>0){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach((i=>{t.Add_2(e.radius,i)}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}filletEdgesList(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.edges.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach(((i,r)=>{t.Add_2(e.radiusList[r],i)}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}filletEdgeVariableRadius(e){if(e.paramsU&&e.paramsU.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);this.assignVariableFilletToEdge(e,t);const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}filletEdgesSameVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusList&&e.radiusList.length>0&&e.paramsU.length===e.radiusList.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach((i=>{this.assignVariableFilletToEdge({edge:i,paramsU:e.paramsU,radiusList:e.radiusList,shape:e.shape},t)}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}filletEdgesVariableRadius(e){if(e.edges&&e.edges.length>0&&e.radiusLists&&e.radiusLists.length>0&&e.paramsULists.length===e.radiusLists.length&&e.paramsULists.length===e.edges.length&&e.radiusLists.length===e.edges.length){const t=new this.occ.BRepFilletAPI_MakeFillet(e.shape,this.occ.ChFi3d_FilletShape.ChFi3d_Rational);e.edges.forEach(((i,r)=>{this.assignVariableFilletToEdge({edge:i,paramsU:e.paramsULists[r],radiusList:e.radiusLists[r],shape:e.shape},t)}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}assignVariableFilletToEdge(e,t){const i=new this.occ.TColgp_Array1OfPnt2d_2(1,e.paramsU.length);e.paramsU.forEach(((t,r)=>{i.SetValue(r+1,this.entitiesService.gpPnt2d([t,e.radiusList[r]]))})),t.Add_5(i,e.edge)}chamferEdges(e){if(!e.indexes||e.indexes.length&&0===e.indexes.length){if(void 0===e.distance)throw Error("Distance is undefined");const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),i=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_EDGE,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE),r=[];for(;i.More();){const s=this.occ.TopoDS.Edge_1(i.Current());r.push(s),t.Add_2(e.distance,s),i.Next()}const s=t.Shape();return t.delete(),i.delete(),r.forEach((e=>e.delete())),s}if(e.indexes&&e.indexes.length>0){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);let i,r=0,s=0;const n=e.indexes;this.iteratorService.forEachEdge(e.shape,((i,o)=>{if(n.includes(i)){let i=e.distance;if(e.distanceList&&(i=e.distanceList[s],s++),void 0===i)throw Error("Distance not defined and/or distance list incorrect length");t.Add_2(i,o),r++}})),0===r?(console.error("Chamfer Edges Not Found!  Make sure you are looking at the object _before_ the Fillet is applied!"),i=e.shape):i=t.Shape(),t.delete();const o=this.converterService.getActualTypeOfShape(i);return i.delete(),o}}chamferEdgesList(e){if(e.edges&&e.edges.length>0&&e.distanceList&&e.distanceList.length>0&&e.edges.length===e.distanceList.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((i,r)=>{const s=e.distanceList[r];if(void 0===s)throw Error("Distance is not defined");t.Add_2(s,i)}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}chamferEdgeTwoDistances(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);t.Add_3(e.distance1,e.distance2,e.edge,e.face);const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}chamferEdgesTwoDistances(e){if(e.edges&&e.edges.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((i,r)=>{t.Add_3(e.distance1,e.distance2,i,e.faces[r])}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}chamferEdgesTwoDistancesLists(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances1&&e.distances1.length>0&&e.distances2&&e.distances2.length>0&&e.edges.length===e.faces.length&&e.edges.length===e.distances1.length&&e.edges.length===e.distances2.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((i,r)=>{t.Add_3(e.distances1[r],e.distances2[r],i,e.faces[r])}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}chamferEdgeDistAngle(e){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),i=this.vecHelper.degToRad(e.angle);t.AddDA(e.distance,i,e.edge,e.face);const r=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(r);return r.delete(),s}chamferEdgesDistsAngles(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.distances&&e.distances.length>0&&e.angles&&e.angles.length>0&&e.edges.length===e.distances.length&&e.edges.length===e.faces.length&&e.edges.length===e.angles.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape);e.edges.forEach(((i,r)=>{const s=this.vecHelper.degToRad(e.angles[r]);t.AddDA(e.distances[r],s,i,e.faces[r])}));const i=t.Shape();t.delete();const r=this.converterService.getActualTypeOfShape(i);return i.delete(),r}}chamferEdgesDistAngle(e){if(e.edges&&e.edges.length>0&&e.faces&&e.faces.length>0&&e.edges.length===e.faces.length){const t=new this.occ.BRepFilletAPI_MakeChamfer(e.shape),i=this.vecHelper.degToRad(e.angle);e.edges.forEach(((r,s)=>{t.AddDA(e.distance,i,r,e.faces[s])}));const r=t.Shape();t.delete();const s=this.converterService.getActualTypeOfShape(r);return r.delete(),s}}fillet2d(e){if(e.indexes&&e.radiusList&&e.radiusList.length!==e.indexes.length)throw new Error("When using radius list, length of the list must match index list of corners that you want to fillet.");let t,i=!1;if(e.shape.ShapeType()===this.occ.TopAbs_ShapeEnum.TopAbs_FACE)t=this.converterService.getActualTypeOfShape(e.shape),i=!0;else{if(e.shape.ShapeType()!==this.occ.TopAbs_ShapeEnum.TopAbs_WIRE)throw new Error("You can only fillet a 2d wire or a 2d face.");{const i=new this.occ.BRepBuilderAPI_MakeFace_15(e.shape,!0),r=new this.occ.Message_ProgressRange_1;i.Build(r);const s=i.Shape();t=this.converterService.getActualTypeOfShape(s),s.delete(),r.delete(),i.delete()}}const r=new this.occ.BRepFilletAPI_MakeFillet2d_2(t),s=new this.occ.TopExp_Explorer_2(e.shape,this.occ.TopAbs_ShapeEnum.TopAbs_VERTEX,this.occ.TopAbs_ShapeEnum.TopAbs_SHAPE);let n=1;const o=[];for(;s.More();s.Next()){const e=this.occ.TopoDS.Vertex_1(s.Current());n%2==0&&o.push(e),n++}i||e.shape.Closed_1()||o.pop();let a=0;o.forEach(((t,i)=>{e.indexes?e.indexes.includes(i+1)&&(this.applyRadiusToVertex(e,r,t,a),a++):this.applyRadiusToVertex(e,r,t,i)}));const c=new this.occ.Message_ProgressRange_1;let h;if(r.Build(c),i)h=r.Shape();else if(r.IsDone()){const e=r.Shape(),t=this.shapeGettersService.getWires({shape:e});1===t.length&&(h=t[0])}else{const i=this.facesService.faceNormalOnUV({shape:t,paramU:.5,paramV:.5});h=this.fillet3DWire({shape:e.shape,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:i})}return s.delete(),r.delete(),c.delete(),o.forEach((e=>e.delete())),h}fillet3DWire(e){let t=!1;if(e.radiusList&&e.radiusList.length>0&&e.indexes&&e.indexes.length>0){if(e.radiusList.length!==e.indexes.length)throw new Error("Radius list and indexes are not the same length");t=!0}let i=this.edgesService.fixEdgeOrientationsAlongWire({shape:e.shape});if(t&&e.shape.Closed_1()){const t=this.edgesService.getEdgesAlongWire({shape:e.shape}),r=t.shift(),s=[...t,r];i=this.converterService.combineEdgesAndWiresIntoAWire({shapes:s})}else i=this.converterService.getActualTypeOfShape(e.shape.Reversed());const r=this.operationsService.extrude({shape:i,direction:e.direction});let s=e.indexes;if(t){const t=e.indexes.filter((e=>e>2)),i=Math.max(...t),r=[5];let n=5;for(let e=0;e<i;e++)n+=3,r.push(n);s=e.indexes.map((t=>e.shape.Closed_1()?t<=2?t:r[t-3]:1===t?2:r[t-2]))}const n=this.filletEdges({shape:r,radius:e.radius,indexes:s,radiusList:e.radiusList}),o=[],a=this.shapeGettersService.getFaces({shape:n});a.forEach(((e,t)=>{const i=this.shapeGettersService.getEdges({shape:e})[3];o.push(i)}));const c=this.converterService.combineEdgesAndWiresIntoAWire({shapes:o}),h=this.transformsService.translate({shape:c,translation:e.direction.map((e=>-e))});return r.delete(),n.delete(),a.forEach((e=>e.delete())),o.forEach((e=>e.delete())),h}applyRadiusToVertex(e,t,i,r){if(e.radiusList){const s=e.radiusList;t.AddFillet(i,s[r])}else e.radius&&t.AddFillet(i,e.radius)}}class Be{constructor(e,t,i,r,s,n,o,a){this.occ=e,this.shapeGettersService=t,this.facesService=i,this.enumService=r,this.entitiesService=s,this.converterService=n,this.transformsService=o,this.vectorHelperService=a}fromClosedShell(e){const t=this.converterService.getActualTypeOfShape(e.shape),i=new this.occ.BRepBuilderAPI_MakeSolid_3(t),r=i.Solid();return i.delete(),t.delete(),r}createBox(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.height/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,t)}createCube(e){let t=[...e.center];return void 0===e.originOnCenter&&(e.originOnCenter=!0),e.originOnCenter||(t=[t[0],t[1]+e.size/2,t[2]]),this.entitiesService.bRepPrimAPIMakeBox(e.size,e.size,e.size,t)}createBoxFromCorner(e){const t=this.entitiesService.bRepPrimAPIMakeBox(e.width,e.length,e.height,e.corner),i=this.transformsService.translate({shape:t,translation:[e.width/2,e.height/2,e.length/2]});return t.delete(),i}createCylinder(e){const t=e.direction?e.direction:[0,1,0];let i,r;r=void 0===e.angle?2*Math.PI:this.vectorHelperService.degToRad(e.angle);const s=this.entitiesService.bRepPrimAPIMakeCylinder(e.center,t,e.radius,e.height,r);if(e.originOnCenter){const r=-e.height/2,n=this.vectorHelperService.normalize(t);i=this.transformsService.translate({shape:s,translation:[n[0]*r,n[1]*r,n[2]*r]}),s.delete()}else i=s;return i}createCylindersOnLines(e){return e.lines.map((t=>this.entitiesService.bRepPrimAPIMakeCylinderBetweenPoints(t.start,t.end,e.radius)))}createSphere(e){return this.entitiesService.bRepPrimAPIMakeSphere(e.center,[0,0,1],e.radius)}createCone(e){const t=this.entitiesService.gpAx2(e.center,e.direction),i=new this.occ.BRepPrimAPI_MakeCone_4(t,e.radius1,e.radius2,e.height,e.angle),r=i.Shape();return i.delete(),t.delete(),r}filterSolidPoints(e){const t=[];if(e.points.length>0){const i=new this.occ.BRepClass3d_SolidClassifier_1;return i.Load(e.shape),e.points.forEach((r=>{const s=this.entitiesService.gpPnt(r);i.Perform(s,e.tolerance);const n=i.State(),o=this.enumService.getTopAbsStateEnum(n);e.keepOn&&o===H.topAbsStateEnum.on&&t.push(r),e.keepIn&&o===H.topAbsStateEnum.in&&t.push(r),e.keepOut&&o===H.topAbsStateEnum.out&&t.push(r),e.keepUnknown&&o===H.topAbsStateEnum.unknown&&t.push(r),s.delete()})),i.delete(),t}return[]}getSolidVolume(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.VolumeProperties_1(e.shape,t,!0,!1,!1);const i=t.Mass();return t.delete(),i}getSolidSurfaceArea(e){const t=this.shapeGettersService.getFaces(e);return this.facesService.getFacesAreas({shapes:t}).reduce(((e,t)=>e+t),0)}getSolidsVolumes(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidVolume({shape:e})))}getSolidCenterOfMass(e){const t=new this.occ.GProp_GProps_1;this.occ.BRepGProp.VolumeProperties_1(e.shape,t,!0,!1,!1);const i=t.CentreOfMass(),r=[i.X(),i.Y(),i.Z()];return t.delete(),i.delete(),r}getSolidsCentersOfMass(e){if(void 0===e.shapes)throw Error("Shapes are not defined");return e.shapes.map((e=>this.getSolidCenterOfMass({shape:e})))}getSolids(e){return this.shapeGettersService.getSolids(e)}}class Ie{constructor(e,t,i,r,s,n){this.base=e,this.transformsService=t,this.converterService=i,this.entitiesService=r,this.edgesService=s,this.wiresService=n}simpleLinearLengthDimension(e){const t=[],i=this.wiresService.createLineWireWithExtensions({start:e.start,end:e.end,extensionStart:e.crossingSize,extensionEnd:e.crossingSize});t.push(i);const r=this.transformsService.translate({shape:i,translation:e.direction}),s=this.base.point.translatePoints({points:[e.start,e.end],translation:e.direction}),n=s[0],o=s[1],a=this.wiresService.createLineWireWithExtensions({start:e.start,end:n,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),c=this.wiresService.createLineWireWithExtensions({start:e.end,end:o,extensionStart:-e.offsetFromPoints,extensionEnd:e.crossingSize}),h=this.wiresService.midPointOnWire({shape:r}),l=this.base.point.distance({startPoint:e.start,endPoint:e.end}),d=new H.TextWiresDto;d.text=l.toFixed(e.decimalPlaces)+" "+e.labelSuffix,d.xOffset=0,d.yOffset=0,d.height=e.labelSize,d.centerOnOrigin=!0;const u=this.wiresService.textWiresWithData(d),p=this.base.point.normalFromThreePoints({point1:e.start,point2:e.end,point3:h,reverseNormal:!0}),f=this.base.vector.sub({first:e.end,second:e.start}),v=this.transformsService.rotate({shape:u.compound,angle:-90+(e.labelRotation||0),axis:[0,1,0]});t.push(...u.shapes.map((e=>e.shape)));const g=this.transformsService.alignNormAndAxis({shape:v,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:p,toAx:f});t.push(v);const m=this.base.vector.normalized({vector:e.direction}),S=this.base.vector.mul({vector:m,scalar:e.labelOffset}),y=this.base.vector.add({first:h,second:S}),b=this.transformsService.translate({shape:g,translation:y});t.push(g);const w=this.converterService.makeCompound({shapes:[r,a,c,b]});return t.forEach((e=>{e.delete()})),w}simpleAngularDimension(e){const t=[],i=this.base.vector.normalized({vector:e.direction1}),r=this.base.vector.mul({vector:i,scalar:e.radius}),s=this.base.point.translatePoints({points:[r],translation:e.center})[0],n=this.wiresService.createLineWireWithExtensions({start:e.center,end:s,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),o=this.base.vector.normalized({vector:e.direction2}),a=this.base.vector.mul({vector:o,scalar:e.radius}),c=this.base.point.translatePoints({points:[a],translation:e.center})[0],h=this.wiresService.createLineWireWithExtensions({start:e.center,end:c,extensionStart:-e.offsetFromCenter,extensionEnd:e.extraSize}),l=this.base.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!0}),d=this.base.point.normalFromThreePoints({point1:e.center,point2:s,point3:c,reverseNormal:!1}),u=this.entitiesService.createCircle(e.radius,e.center,d,H.typeSpecificityEnum.edge);t.push(u);const p=this.edgesService.arcFromCircleAndTwoPoints({circle:u,start:s,end:c,sense:!1});t.push(p);const f=this.wiresService.createWireFromEdge({shape:p}),v=this.wiresService.midPointOnWire({shape:f});let g=this.base.vector.angleBetween({first:e.direction1,second:e.direction2});e.radians&&(g=this.base.math.degToRad({number:g}));const m=new H.TextWiresDto;m.text=g.toFixed(e.decimalPlaces)+" "+e.labelSuffix,m.xOffset=0,m.yOffset=0,m.height=e.labelSize,m.centerOnOrigin=!0;const S=this.wiresService.textWiresWithData(m),y=this.base.vector.sub({first:v,second:e.center}),b=this.base.vector.normalized({vector:y}),w=this.transformsService.alignNormAndAxis({shape:S.compound,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:l,toAx:b});t.push(...S.shapes.map((e=>e.shape)));const E=this.base.vector.mul({vector:b,scalar:e.labelOffset}),x=this.base.vector.add({first:v,second:E}),T=this.transformsService.translate({shape:w,translation:x});t.push(w);const P=this.converterService.makeCompound({shapes:[n,h,f,T]});return t.forEach((e=>{e.delete()})),P}pinWithLabel(e){const t=this.wiresService.createLineWireWithExtensions({start:e.startPoint,end:e.endPoint,extensionStart:-e.offsetFromStart,extensionEnd:0}),i=new H.TextWiresDto;i.text=e.label,i.xOffset=0,i.yOffset=0,i.height=e.labelSize,i.centerOnOrigin=!0;const r=this.wiresService.textWiresWithData(i),s=r.data.width,n=this.base.vector.normalized({vector:e.direction}),o=this.base.vector.mul({vector:n,scalar:s/2+e.labelOffset}),a=this.base.point.translatePoints({points:[e.endPoint],translation:e.direction})[0],c=this.wiresService.createLineWireWithExtensions({start:e.endPoint,end:a,extensionStart:0,extensionEnd:0}),h=this.base.point.normalFromThreePoints({point1:e.startPoint,point2:e.endPoint,point3:a,reverseNormal:!1}),l=this.transformsService.rotate({shape:r.compound,angle:-90,axis:[0,1,0]}),d=r.shapes.map((e=>e.shape)),u=this.transformsService.alignNormAndAxis({shape:l,fromOrigin:[0,0,0],fromNorm:[0,1,0],fromAx:[0,0,1],toOrigin:[0,0,0],toNorm:h,toAx:n});d.push(l);const p=this.base.vector.add({first:a,second:o}),f=this.transformsService.translate({shape:u,translation:p});d.push(u);const v=this.converterService.makeCompound({shapes:[t,f,c]});return d.forEach((e=>{e.delete()})),v}}class Ue{constructor(e,t,i,r,s,n,o){this.occ=e,this.shapeGettersService=t,this.transformsService=i,this.edgesService=r,this.facesService=s,this.wiresService=n,this.base=o}shapeFacesToPolygonPoints(e){const t=this.shapeToMesh(e),i=[];return t.faceList.forEach((t=>{const r=t.vertex_coord,s=t.tri_indexes;for(let t=0;t<s.length;t+=3){const n=s[t],o=s[t+1],a=s[t+2];let c=[[r[3*n],r[3*n+1],r[3*n+2]],[r[3*o],r[3*o+1],r[3*o+2]],[r[3*a],r[3*a+1],r[3*a+2]]];e.reversedPoints&&(c=c.reverse()),i.push(c)}})),i}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){const t=[],i=[],r=[];let s=e.shape;if(s.IsNull())return{faceList:t,edgeList:i,pointsList:[]};if(this.occ.BRepTools.Clean(s,!0),e.adjustYtoZ){const t=this.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90}),i=this.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]});t.delete(),s.delete(),s=i}const n=[],o=this.shapeGettersService.getFaces({shape:s});let a;o&&o.length&&(a=new this.occ.BRepMesh_IncrementalMesh_2(s,e.precision,!1,.5,!1),o.forEach(((e,i)=>{const r=new this.occ.TopLoc_Location_1,s=this.occ.BRep_Tool.Triangulation(e,r,0);if(s.IsNull())return void console.error("Encountered Null Face!");const o={vertex_coord:[],normal_coord:[],uvs:[],tri_indexes:[],vertex_coord_vec:[],number_of_triangles:0,center_point:void 0,center_normal:void 0,face_index:i};o.center_point=this.facesService.pointOnUV({shape:e,paramU:.5,paramV:.5}),o.center_normal=this.facesService.normalOnUV({shape:e,paramU:.5,paramV:.5});const a=new this.occ.Poly_Connect_2(s),c=s.get();o.vertex_coord=new Array(3*c.NbNodes()),o.vertex_coord_vec=[];for(let e=0;e<c.NbNodes();e++){const t=c.Node(e+1).Transformed(r.Transformation()),i=c.UVNode(e+1);o.uvs[2*e+0]=i.X(),o.uvs[2*e+1]=i.Y(),o.vertex_coord[3*e+0]=t.X(),o.vertex_coord[3*e+1]=t.Y(),o.vertex_coord[3*e+2]=t.Z(),o.vertex_coord_vec.push([t.X(),t.Y(),t.Z()])}const h=new this.occ.TColgp_Array1OfDir_2(1,c.NbNodes());this.occ.StdPrs_ToolTriangulatedShape.Normal(e,a,h),o.normal_coord=new Array(3*h.Length());for(let e=0;e<h.Length();e++){const t=h.Value(e+1);o.normal_coord[3*e+0]=t.X(),o.normal_coord[3*e+1]=t.Y(),o.normal_coord[3*e+2]=t.Z()}const l=e.Orientation_1(),d=s.get().Triangles();o.tri_indexes=new Array(3*d.Length());let u=0;for(let e=1;e<=s.get().NbTriangles();e++){const t=d.Value(e);let i=t.Value(1),r=t.Value(2);const s=t.Value(3);if(l!==this.occ.TopAbs_Orientation.TopAbs_FORWARD){const e=i;i=r,r=e}o.tri_indexes[3*u+0]=i-1,o.tri_indexes[3*u+1]=r-1,o.tri_indexes[3*u+2]=s-1,u++}o.number_of_triangles=u,t.push(o),n.push(s),r.delete(),h.delete(),d.delete(),a.delete()})));for(let e=0;e<n.length;e++)n[e].Nullify(),n[e].delete();this.shapeGettersService.getEdges({shape:s}).forEach(((t,r)=>{const s={vertex_coord:[],middle_point:void 0,edge_index:-1};s.middle_point=this.edgesService.pointOnEdgeAtParam({shape:t,param:.5});const n=new this.occ.TopLoc_Location_1,o=new this.occ.BRepAdaptor_Curve_2(t),a=new this.occ.GCPnts_TangentialDeflection_2(o,e.precision,.1,2,1e-9,1e-7);s.vertex_coord=[];const c=a.NbPoints(),h=[];for(let e=0;e<c;e++){const t=a.Value(e+1);s.vertex_coord.push([t.X(),t.Y(),t.Z()]),h.push(t)}s.edge_index=r,i.push(s),h.forEach((e=>e.delete())),n.delete(),o.delete(),a.delete(),this.occ.BRepTools.Clean(t,!0)}));const c=this.shapeGettersService.getVertices({shape:s});return c.length>0&&c.forEach((e=>{const t=this.occ.BRep_Tool.Pnt(e);r.push([t.X(),t.Y(),t.Z()]),t.delete()})),a&&a.Delete(),this.occ.BRepTools.Clean(s,!0),{faceList:t,edgeList:i,pointsList:r}}meshMeshIntersectionWires(e){const t=e.shape1,i=e.shape2,r=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:i,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1}),n=this.base.mesh.meshMeshIntersectionPolylines({mesh1:r,mesh2:s}),o=[];return n.forEach((e=>{e.points&&e.points.length>0&&(e.isClosed?o.push(this.wiresService.createPolygonWire({points:e.points})):o.push(this.wiresService.createPolylineWire({points:e.points})))})),o}meshMeshIntersectionPoints(e){const t=e.shape1,i=e.shape2,r=this.shapeFacesToPolygonPoints({shape:t,precision:e.precision1,adjustYtoZ:!1,reversedPoints:!1}),s=this.shapeFacesToPolygonPoints({shape:i,precision:e.precision2,adjustYtoZ:!1,reversedPoints:!1});return this.base.mesh.meshMeshIntersectionPoints({mesh1:r,mesh2:s})}meshMeshIntersectionOfShapesWires(e){const t=[];return e.shapes.forEach(((i,r)=>{const s=e.shape,n=e.shapes[r];let o=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[r];t&&(o=t)}const a=this.meshMeshIntersectionWires({shape1:s,shape2:n,precision1:e.precision,precision2:o});t.push(...a)})),t}meshMeshIntersectionOfShapesPoints(e){const t=[];return e.shapes.forEach(((i,r)=>{const s=e.shape,n=e.shapes[r];let o=e.precision;if(e.precisionShapes&&e.precisionShapes.length>0){const t=e.precisionShapes[r];t&&(o=t)}const a=this.meshMeshIntersectionPoints({shape1:s,shape2:n,precision1:e.precision,precision2:o});t.push(...a)})),t}}!function(e){e.HexDto=class{constructor(e){this.color="#0000ff",void 0!==e&&(this.color=e)}},e.InvertHexDto=class{constructor(e){this.color="#0000ff",this.blackAndWhite=!1,void 0!==e&&(this.color=e)}},e.HexDtoMapped=class{constructor(e,t,i){this.color="#0000ff",this.from=0,this.to=255,void 0!==e&&(this.color=e),void 0!==t&&(this.from=t),void 0!==i&&(this.to=i)}},e.RGBObjectMaxDto=class{constructor(e,t){this.min=0,this.max=255,void 0!==e&&(this.rgb=e),void 0!==t&&(this.max=t)}},e.RGBMinMaxDto=class{constructor(e,t,i,r,s){this.r=255,this.g=255,this.b=255,this.min=0,this.max=255,void 0!==e&&(this.r=e),void 0!==t&&(this.g=t),void 0!==i&&(this.b=i),void 0!==r&&(this.min=r),void 0!==s&&(this.max=s)}},e.RGBObjectDto=class{constructor(e){void 0!==e&&(this.rgb=e)}}}(V||(V={})),function(e){let t;!function(e){e.first="first",e.last="last"}(t=e.firstLastEnum||(e.firstLastEnum={})),e.ListItemDto=class{constructor(e,t,i){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==i&&(this.clone=i)}},e.SubListDto=class{constructor(e,t,i,r){this.indexStart=0,this.indexEnd=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexStart=t),void 0!==i&&(this.indexEnd=i),void 0!==r&&(this.clone=r)}},e.ListCloneDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RepeatInPatternDto=class{constructor(e){this.clone=!0,this.lengthLimit=100,void 0!==e&&(this.list=e)}},e.SortDto=class{constructor(e,t,i){this.clone=!0,this.orderAsc=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==i&&(this.orderAsc=i)}},e.SortJsonDto=class{constructor(e,t,i){this.clone=!0,this.orderAsc=!0,this.property="propName",void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t),void 0!==i&&(this.orderAsc=i)}},e.ListDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.GroupListDto=class{constructor(e,t,i){this.nrElements=2,this.keepRemainder=!1,void 0!==e&&(this.list=e),void 0!==t&&(this.nrElements=t),void 0!==i&&(this.keepRemainder=i)}},e.MultiplyItemDto=class{constructor(e,t){void 0!==e&&(this.item=e),void 0!==t&&(this.times=t)}},e.AddItemAtIndexDto=class{constructor(e,t,i,r){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==i&&(this.index=i),void 0!==r&&(this.clone=r)}},e.AddItemAtIndexesDto=class{constructor(e,t,i,r){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==i&&(this.indexes=i),void 0!==r&&(this.clone=r)}},e.AddItemsAtIndexesDto=class{constructor(e,t,i,r){this.indexes=[0],this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.items=t),void 0!==i&&(this.indexes=i),void 0!==r&&(this.clone=r)}},e.RemoveItemAtIndexDto=class{constructor(e,t,i){this.index=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.index=t),void 0!==i&&(this.clone=i)}},e.RemoveItemsAtIndexesDto=class{constructor(e,t,i){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.indexes=t),void 0!==i&&(this.clone=i)}},e.RemoveNthItemDto=class{constructor(e,t,i,r){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==i&&(this.offset=i),void 0!==r&&(this.clone=r)}},e.RandomThresholdDto=class{constructor(e,t,i){this.threshold=1,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.threshold=t),void 0!==i&&(this.clone=i)}},e.RemoveDuplicatesDto=class{constructor(e,t){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.clone=t)}},e.RemoveDuplicatesToleranceDto=class{constructor(e,t,i){this.tolerance=1e-7,this.clone=!0,void 0!==e&&(this.list=e),void 0!==i&&(this.tolerance=i),void 0!==t&&(this.clone=t)}},e.GetByPatternDto=class{constructor(e,t){this.pattern=[!0,!0,!1],void 0!==e&&(this.list=e),void 0!==t&&(this.pattern=t)}},e.GetNthItemDto=class{constructor(e,t,i,r){this.nth=2,this.offset=0,this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.nth=t),void 0!==i&&(this.offset=i),void 0!==r&&(this.clone=r)}},e.GetLongestListLength=class{constructor(e){void 0!==e&&(this.lists=e)}},e.MergeElementsOfLists=class{constructor(e,t){this.level=0,void 0!==e&&(this.lists=e),void 0!==t&&(this.level=t)}},e.AddItemDto=class{constructor(e,t,i){this.clone=!0,void 0!==e&&(this.list=e),void 0!==t&&(this.item=t),void 0!==i&&(this.clone=i)}},e.AddItemFirstLastDto=class{constructor(e,i,r,s){this.position=t.last,this.clone=!0,void 0!==e&&(this.list=e),void 0!==i&&(this.item=i),void 0!==r&&(this.position=r),void 0!==s&&(this.clone=s)}}}(z||(z={})),function(e){let t;!function(e){e.less="<",e.lessOrEqual="<=",e.greater=">",e.greaterOrEqual=">=",e.tripleEqual="===",e.tripleNotEqual="!==",e.equal="==",e.notEqual="!="}(t=e.BooleanOperatorsEnum||(e.BooleanOperatorsEnum={})),e.ComparisonDto=class{constructor(e,t,i){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==i&&(this.operator=i)}},e.BooleanDto=class{constructor(e){this.boolean=!1,void 0!==e&&(this.boolean=e)}},e.BooleanListDto=class{constructor(e){void 0!==e&&(this.booleans=e)}},e.ValueGateDto=class{constructor(e,t){this.boolean=!1,void 0!==e&&(this.value=e),void 0!==t&&(this.boolean=t)}},e.TwoValueGateDto=class{constructor(e,t){void 0!==e&&(this.value1=e),void 0!==t&&(this.value2=t)}},e.RandomBooleansDto=class{constructor(e){this.length=10,this.trueThreshold=.5,void 0!==e&&(this.length=e)}},e.TwoThresholdRandomGradientDto=class{},e.ThresholdBooleanListDto=class{},e.ThresholdGapsBooleanListDto=class{}}(j||(j={})),function(e){let t,i,r;!function(e){e.add="add",e.subtract="subtract",e.multiply="multiply",e.divide="divide",e.power="power",e.modulus="modulus"}(t=e.mathTwoNrOperatorEnum||(e.mathTwoNrOperatorEnum={})),function(e){e.absolute="absolute",e.negate="negate",e.ln="ln",e.log10="log10",e.tenPow="tenPow",e.round="round",e.floor="floor",e.ceil="ceil",e.sqrt="sqrt",e.sin="sin",e.cos="cos",e.tan="tan",e.asin="asin",e.acos="acos",e.atan="atan",e.log="log",e.exp="exp",e.radToDeg="radToDeg",e.degToRad="degToRad"}(i=e.mathOneNrOperatorEnum||(e.mathOneNrOperatorEnum={})),function(e){e.easeInSine="easeInSine",e.easeOutSine="easeOutSine",e.easeInOutSine="easeInOutSine",e.easeInQuad="easeInQuad",e.easeOutQuad="easeOutQuad",e.easeInOutQuad="easeInOutQuad",e.easeInCubic="easeInCubic",e.easeOutCubic="easeOutCubic",e.easeInOutCubic="easeInOutCubic",e.easeInQuart="easeInQuart",e.easeOutQuart="easeOutQuart",e.easeInOutQuart="easeInOutQuart",e.easeInQuint="easeInQuint",e.easeOutQuint="easeOutQuint",e.easeInOutQuint="easeInOutQuint",e.easeInExpo="easeInExpo",e.easeOutExpo="easeOutExpo",e.easeInOutExpo="easeInOutExpo",e.easeInCirc="easeInCirc",e.easeOutCirc="easeOutCirc",e.easeInOutCirc="easeInOutCirc",e.easeInElastic="easeInElastic",e.easeOutElastic="easeOutElastic",e.easeInOutElastic="easeInOutElastic",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack",e.easeInBounce="easeInBounce",e.easeOutBounce="easeOutBounce",e.easeInOutBounce="easeInOutBounce"}(r=e.easeEnum||(e.easeEnum={})),e.ModulusDto=class{constructor(e,t){this.number=1,this.modulus=2,void 0!==e&&(this.number=e),void 0!==t&&(this.modulus=t)}},e.NumberDto=class{constructor(e){this.number=1,void 0!==e&&(this.number=e)}},e.EaseDto=class{constructor(e){this.x=.5,this.min=0,this.max=1,void 0!==e&&(this.x=e)}},e.RoundToDecimalsDto=class{constructor(e,t){this.number=1.123456,this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}},e.ActionOnTwoNumbersDto=class{constructor(e,t,i){this.first=1,this.second=1,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t),void 0!==i&&(this.operation=i)}},e.TwoNumbersDto=class{constructor(e,t){this.first=1,this.second=2,void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.ActionOnOneNumberDto=class{constructor(e,t){this.number=1,void 0!==e&&(this.number=e),void 0!==t&&(this.operation=t)}},e.RemapNumberDto=class{constructor(e,t,i,r,s){this.number=.5,this.fromLow=0,this.fromHigh=1,this.toLow=1,this.toHigh=2,void 0!==e&&(this.number=e),void 0!==t&&(this.fromLow=t),void 0!==i&&(this.fromHigh=i),void 0!==r&&(this.toLow=r),void 0!==s&&(this.toHigh=s)}},e.RandomNumberDto=class{constructor(e,t){this.low=0,this.high=1,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t)}},e.RandomNumbersDto=class{constructor(e,t,i){this.low=0,this.high=1,this.count=10,void 0!==e&&(this.low=e),void 0!==t&&(this.high=t),void 0!==i&&(this.count=i)}},e.ToFixedDto=class{constructor(e,t){this.decimalPlaces=2,void 0!==e&&(this.number=e),void 0!==t&&(this.decimalPlaces=t)}}}(q||(q={})),function(e){e.PointDto=class{constructor(e){void 0!==e&&(this.point=e)}},e.PointXYZDto=class{constructor(e,t,i){this.x=0,this.y=0,this.z=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==i&&(this.z=i)}},e.PointXYDto=class{constructor(e,t){this.x=0,this.y=0,void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.PointsDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.TwoPointsDto=class{constructor(e,t){void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t)}},e.DrawPointDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.size=3,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.point=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.size=i),void 0!==r&&(this.colours=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.pointMesh=n)}},e.DrawPointsDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.size=.1,this.colours="#444444",this.updatable=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.size=i),void 0!==r&&(this.colours=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.pointsMesh=n)}},e.TransformPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.transformation=t)}},e.TransformPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.TranslatePointsWithVectorsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translations=t)}},e.TranslatePointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.translation=t)}},e.TranslateXYZPointsDto=class{constructor(e,t,i,r){this.x=0,this.y=1,this.z=0,void 0!==e&&(this.points=e),void 0!==t&&(this.x=t),void 0!==i&&(this.y=i),void 0!==r&&(this.z=r)}},e.ScalePointsCenterXYZDto=class{constructor(e,t,i){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==i&&(this.scaleXyz=i)}},e.StretchPointsDirFromCenterDto=class{constructor(e,t,i,r){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.points=e),void 0!==t&&(this.center=t),void 0!==i&&(this.direction=i),void 0!==r&&(this.scale=r)}},e.RotatePointsCenterAxisDto=class{constructor(e,t,i,r){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.points=e),void 0!==t&&(this.angle=t),void 0!==i&&(this.axis=i),void 0!==r&&(this.center=r)}},e.TransformsForPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.transformation=t)}},e.ThreePointsNormalDto=class{constructor(e,t,i,r){this.reverseNormal=!1,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==i&&(this.point3=i),void 0!==r&&(this.reverseNormal=r)}},e.ThreePointsToleranceDto=class{constructor(e,t,i,r){this.tolerance=1e-7,void 0!==e&&(this.start=e),void 0!==t&&(this.center=t),void 0!==i&&(this.end=i),void 0!==r&&(this.tolerance=r)}},e.PointsMaxFilletsHalfLineDto=class{constructor(e,t,i){this.checkLastWithFirst=!1,this.tolerance=1e-7,void 0!==e&&(this.points=e),void 0!==t&&(this.checkLastWithFirst=t),void 0!==i&&(this.tolerance=i)}},e.RemoveConsecutiveDuplicatesDto=class{constructor(e,t,i){this.tolerance=1e-7,this.checkFirstAndLast=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.tolerance=t),void 0!==i&&(this.checkFirstAndLast=i)}},e.ClosestPointFromPointsDto=class{constructor(e,t){void 0!==e&&(this.points=e),void 0!==t&&(this.point=t)}},e.TwoPointsToleranceDto=class{constructor(e,t,i){this.tolerance=1e-7,void 0!==e&&(this.point1=e),void 0!==t&&(this.point2=t),void 0!==i&&(this.tolerance=i)}},e.StartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoint=t)}},e.StartEndPointsListDto=class{constructor(e,t){void 0!==e&&(this.startPoint=e),void 0!==t&&(this.endPoints=t)}},e.MultiplyPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.amountOfPoints=t)}},e.SpiralDto=class{constructor(e,t,i,r,s){this.phi=.9,this.numberPoints=200,this.widening=3,this.radius=6,this.factor=1,void 0!==e&&(this.radius=e),void 0!==t&&(this.numberPoints=t),void 0!==i&&(this.widening=i),void 0!==r&&(this.factor=r),void 0!==s&&(this.phi=s)}},e.HexGridScaledToFitDto=class{constructor(e,t,i,r,s,n){this.width=10,this.height=10,this.nrHexagonsInWidth=10,this.nrHexagonsInHeight=10,this.flatTop=!1,this.extendTop=!1,this.extendBottom=!1,this.extendLeft=!1,this.extendRight=!1,this.centerGrid=!1,this.pointsOnGround=!1,void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.nrHexagonsInHeight=i),void 0!==r&&(this.nrHexagonsInWidth=r),void 0!==s&&(this.centerGrid=s),void 0!==n&&(this.pointsOnGround=n)}},e.HexGridCentersDto=class{constructor(e,t,i,r,s){this.nrHexagonsY=21,this.nrHexagonsX=21,this.orientOnCenter=!1,this.pointsOnGround=!1,void 0!==e&&(this.nrHexagonsX=e),void 0!==t&&(this.nrHexagonsY=t),void 0!==i&&(this.radiusHexagon=i),void 0!==r&&(this.orientOnCenter=r),void 0!==s&&(this.pointsOnGround=s)}}}(Y||(Y={})),function(e){e.TextDto=class{constructor(e){this.text="Hello World",void 0!==e&&(this.text=e)}},e.TextSplitDto=class{constructor(e,t){this.text="a,b,c",this.separator=",",void 0!==e&&(this.text=e),void 0!==t&&(this.separator=t)}},e.TextReplaceDto=class{constructor(e,t,i){this.text="a-c",this.search="-",this.replaceWith="b",void 0!==e&&(this.text=e),void 0!==t&&(this.search=t),void 0!==i&&(this.replaceWith=i)}},e.TextJoinDto=class{constructor(e,t){this.separator=",",void 0!==e&&(this.list=e),void 0!==t&&(this.separator=t)}},e.ToStringDto=class{constructor(e){void 0!==e&&(this.item=e)}},e.ToStringEachDto=class{constructor(e){void 0!==e&&(this.list=e)}},e.TextFormatDto=class{constructor(e,t){this.text="Hello {0}",this.values=["World"],void 0!==e&&(this.text=e),void 0!==t&&(this.values=t)}},e.VectorCharDto=class{constructor(e,t,i,r,s){this.char="A",this.xOffset=0,this.yOffset=0,this.height=1,this.extrudeOffset=0,void 0!==e&&(this.char=e),void 0!==t&&(this.xOffset=t),void 0!==i&&(this.yOffset=i),void 0!==r&&(this.height=r),void 0!==s&&(this.extrudeOffset=s)}},e.VectorTextDto=class{constructor(e,t,i,r,s,n,o,a,c){this.xOffset=0,this.yOffset=0,this.height=1,this.lineSpacing=1.4,this.letterSpacing=0,this.extrudeOffset=0,this.centerOnOrigin=!1,void 0!==e&&(this.text=e),void 0!==t&&(this.xOffset=t),void 0!==i&&(this.yOffset=i),void 0!==r&&(this.height=r),void 0!==s&&(this.lineSpacing=s),void 0!==n&&(this.letterSpacing=n),void 0!==o&&(this.align=o),void 0!==a&&(this.extrudeOffset=a),void 0!==c&&(this.centerOnOrigin=c)}}}(X||(X={})),function(e){e.RotationCenterAxisDto=class{constructor(e,t,i){this.angle=90,this.axis=[0,1,0],this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.axis=t),void 0!==i&&(this.center=i)}},e.RotationCenterDto=class{constructor(e,t){this.angle=90,this.center=[0,0,0],void 0!==e&&(this.angle=e),void 0!==t&&(this.center=t)}},e.RotationCenterYawPitchRollDto=class{constructor(e,t,i,r){this.yaw=0,this.pitch=0,this.roll=0,this.center=[0,0,0],void 0!==e&&(this.yaw=e),void 0!==t&&(this.pitch=t),void 0!==i&&(this.roll=i),void 0!==r&&(this.center=r)}},e.ScaleXYZDto=class{constructor(e){this.scaleXyz=[1,1,1],void 0!==e&&(this.scaleXyz=e)}},e.StretchDirCenterDto=class{constructor(e,t,i){this.center=[0,0,0],this.direction=[0,0,1],this.scale=2,void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t),void 0!==i&&(this.direction=i)}},e.ScaleCenterXYZDto=class{constructor(e,t){this.center=[0,0,0],this.scaleXyz=[1,1,1],void 0!==e&&(this.center=e),void 0!==t&&(this.scaleXyz=t)}},e.UniformScaleDto=class{constructor(e){this.scale=1,void 0!==e&&(this.scale=e)}},e.UniformScaleFromCenterDto=class{constructor(e,t){this.scale=1,this.center=[0,0,0],void 0!==e&&(this.scale=e),void 0!==t&&(this.center=t)}},e.TranslationXYZDto=class{constructor(e){this.translation=[0,0,0],void 0!==e&&(this.translation=e)}},e.TranslationsXYZDto=class{constructor(e){void 0!==e&&(this.translations=e)}}}($||($={})),function(e){e.DateDto=class{constructor(e){void 0!==e&&(this.date=e)}},e.DateStringDto=class{constructor(e){void 0!==e&&(this.dateString=e)}},e.DateSecondsDto=class{constructor(e,t){this.seconds=30,void 0!==e&&(this.date=e),void 0!==t&&(this.seconds=t)}},e.DateDayDto=class{constructor(e,t){this.day=1,void 0!==e&&(this.date=e),void 0!==t&&(this.day=t)}},e.DateYearDto=class{constructor(e,t){this.year=1,void 0!==e&&(this.date=e),void 0!==t&&(this.year=t)}},e.DateMonthDto=class{constructor(e,t){this.month=1,void 0!==e&&(this.date=e),void 0!==t&&(this.month=t)}},e.DateHoursDto=class{constructor(e,t){this.hours=1,void 0!==e&&(this.date=e),void 0!==t&&(this.hours=t)}},e.DateMinutesDto=class{constructor(e,t){this.minutes=1,void 0!==e&&(this.date=e),void 0!==t&&(this.minutes=t)}},e.DateMillisecondsDto=class{constructor(e,t){this.milliseconds=1,void 0!==e&&(this.date=e),void 0!==t&&(this.milliseconds=t)}},e.DateTimeDto=class{constructor(e,t){this.time=1,void 0!==e&&(this.date=e),void 0!==t&&(this.time=t)}},e.CreateFromUnixTimeStampDto=class{constructor(e){this.unixTimeStamp=1,void 0!==e&&(this.unixTimeStamp=e)}},e.CreateDateDto=class{constructor(e,t,i,r,s,n,o){this.year=1,this.month=1,this.day=1,this.hours=1,this.minutes=1,this.seconds=1,this.milliseconds=1,void 0!==e&&(this.year=e),void 0!==t&&(this.month=t),void 0!==i&&(this.day=i),void 0!==r&&(this.hours=r),void 0!==s&&(this.minutes=s),void 0!==n&&(this.seconds=n),void 0!==o&&(this.milliseconds=o)}}}(Z||(Z={})),function(e){e.LinePointsDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.LineStartEndPointsDto=class{constructor(e,t){void 0!==e&&(this.startPoints=e),void 0!==t&&(this.endPoints=t)}},e.DrawLineDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.line=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.colours=i),void 0!==r&&(this.size=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.lineMesh=n)}},e.DrawLinesDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.lines=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.colours=i),void 0!==r&&(this.size=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.linesMesh=n)}},e.PointsLinesDto=class{constructor(e){void 0!==e&&(this.points=e)}},e.LineDto=class{constructor(e){void 0!==e&&(this.line=e)}},e.SegmentDto=class{constructor(e){void 0!==e&&(this.segment=e)}},e.SegmentsDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.LinesDto=class{constructor(e){void 0!==e&&(this.lines=e)}},e.LineLineIntersectionDto=class{constructor(e,t,i){this.checkSegmentsOnly=!0,void 0!==e&&(this.line1=e),void 0!==t&&(this.line2=t),void 0!==i&&(this.tolerance=i)}},e.PointOnLineDto=class{constructor(e,t){this.param=.5,void 0!==e&&(this.line=e),void 0!==t&&(this.param=t)}},e.TransformLineDto=class{constructor(e,t){void 0!==e&&(this.line=e),void 0!==t&&(this.transformation=t)}},e.TransformsLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}},e.TransformLinesDto=class{constructor(e,t){void 0!==e&&(this.lines=e),void 0!==t&&(this.transformation=t)}}}(Q||(Q={})),function(e){e.PolylineCreateDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylinePropertiesDto=class{constructor(e,t){this.isClosed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.isClosed=t)}},e.PolylineDto=class{constructor(e){void 0!==e&&(this.polyline=e)}},e.PolylinesDto=class{constructor(e){void 0!==e&&(this.polylines=e)}},e.TransformPolylineDto=class{constructor(e,t){void 0!==e&&(this.polyline=e),void 0!==t&&(this.transformation=t)}},e.DrawPolylineDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polyline=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.colours=i),void 0!==r&&(this.size=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.polylineMesh=n)}},e.DrawPolylinesDto=class{constructor(e,t,i,r,s,n){this.opacity=1,this.colours="#444444",this.size=3,this.updatable=!1,void 0!==e&&(this.polylines=e),void 0!==t&&(this.opacity=t),void 0!==i&&(this.colours=i),void 0!==r&&(this.size=r),void 0!==s&&(this.updatable=s),void 0!==n&&(this.polylinesMesh=n)}},e.SegmentsToleranceDto=class{constructor(e){this.tolerance=1e-5,void 0!==e&&(this.segments=e)}},e.PolylineToleranceDto=class{constructor(e,t){this.tolerance=1e-5,void 0!==e&&(this.polyline=e),void 0!==t&&(this.tolerance=t)}},e.TwoPolylinesToleranceDto=class{constructor(e,t,i){this.tolerance=1e-5,void 0!==e&&(this.polyline1=e),void 0!==t&&(this.polyline2=t),void 0!==i&&(this.tolerance=i)}}}(J||(J={})),function(e){e.SignedDistanceFromPlaneToPointDto=class{constructor(e,t){void 0!==e&&(this.point=e),void 0!==t&&(this.plane=t)}},e.TriangleDto=class{constructor(e){void 0!==e&&(this.triangle=e)}},e.TriangleToleranceDto=class{constructor(e){this.tolerance=1e-7,void 0!==e&&(this.triangle=e)}},e.TriangleTriangleToleranceDto=class{constructor(e,t,i){this.tolerance=1e-7,void 0!==e&&(this.triangle1=e),void 0!==t&&(this.triangle2=t),void 0!==i&&(this.tolerance=i)}},e.MeshMeshToleranceDto=class{constructor(e,t,i){this.tolerance=1e-7,void 0!==e&&(this.mesh1=e),void 0!==t&&(this.mesh2=t),void 0!==i&&(this.tolerance=i)}}}(K||(K={})),function(e){e.DxfLineSegmentDto=class{constructor(e,t){void 0!==e&&(this.start=e),void 0!==t&&(this.end=t)}},e.DxfArcSegmentDto=class{constructor(e,t,i,r){void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t),void 0!==i&&(this.startAngle=i),void 0!==r&&(this.endAngle=r)}},e.DxfCircleSegmentDto=class{constructor(e,t){void 0!==e&&(this.center=e),void 0!==t&&(this.radius=t)}},e.DxfPolylineSegmentDto=class{constructor(e,t,i){this.closed=!1,void 0!==e&&(this.points=e),void 0!==t&&(this.closed=t),void 0!==i&&(this.bulges=i)}},e.DxfSplineSegmentDto=class{constructor(e,t,i){this.degree=3,this.closed=!1,void 0!==e&&(this.controlPoints=e),void 0!==t&&(this.degree=t),void 0!==i&&(this.closed=i)}},e.DxfPathDto=class{constructor(e){void 0!==e&&(this.segments=e)}},e.DxfPathsPartDto=class{constructor(e,t,i){this.layer="Default",this.color="#000000",void 0!==e&&(this.layer=e),void 0!==t&&(this.color=t),void 0!==i&&(this.paths=i)}},e.DxfModelDto=class{constructor(e){void 0!==e&&(this.dxfPathsParts=e)}}}(ee||(ee={})),function(e){e.TwoVectorsDto=class{constructor(e,t){void 0!==e&&(this.first=e),void 0!==t&&(this.second=t)}},e.VectorBoolDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RemoveAllDuplicateVectorsDto=class{constructor(e,t){this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.tolerance=t)}},e.RemoveConsecutiveDuplicateVectorsDto=class{constructor(e,t,i){this.checkFirstAndLast=!1,this.tolerance=1e-7,void 0!==e&&(this.vectors=e),void 0!==t&&(this.checkFirstAndLast=t),void 0!==i&&(this.tolerance=i)}},e.VectorsTheSameDto=class{constructor(e,t,i){this.tolerance=1e-7,void 0!==e&&(this.vec1=e),void 0!==t&&(this.vec2=t),void 0!==i&&(this.tolerance=i)}},e.VectorDto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.Vector3Dto=class{constructor(e){void 0!==e&&(this.vector=e)}},e.RangeMaxDto=class{constructor(e){void 0!==e&&(this.max=e)}},e.VectorXYZDto=class{constructor(e,t,i){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),void 0!==i&&(this.z=i)}},e.VectorXYDto=class{constructor(e,t){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}},e.SpanDto=class{constructor(e,t,i){this.step=.1,this.min=0,this.max=1,void 0!==e&&(this.step=e),void 0!==t&&(this.min=t),void 0!==i&&(this.max=i)}},e.SpanEaseItemsDto=class{constructor(e,t,i,r){this.nrItems=100,this.min=0,this.max=1,this.ease=q.easeEnum.easeInSine,this.intervals=!1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==i&&(this.max=i),void 0!==r&&(this.ease=r)}},e.SpanLinearItemsDto=class{constructor(e,t,i){this.nrItems=100,this.min=0,this.max=1,void 0!==e&&(this.nrItems=e),void 0!==t&&(this.min=t),void 0!==i&&(this.max=i)}},e.RayPointDto=class{constructor(e,t,i){void 0!==e&&(this.point=e),void 0!==t&&(this.distance=t),void 0!==i&&(this.vector=i)}},e.VectorsDto=class{constructor(e){void 0!==e&&(this.vectors=e)}},e.FractionTwoVectorsDto=class{constructor(e,t,i){this.fraction=.5,void 0!==e&&(this.fraction=e),void 0!==t&&(this.first=t),void 0!==i&&(this.second=i)}},e.VectorScalarDto=class{constructor(e,t){void 0!==e&&(this.scalar=e),void 0!==t&&(this.vector=t)}},e.TwoVectorsReferenceDto=class{constructor(e,t,i){void 0!==e&&(this.reference=e),void 0!==t&&(this.first=t),void 0!==i&&(this.second=i)}}}(te||(te={}));class We{getItem(e){if(e.index<0||e.index>=e.list.length)throw new Error("Index out of bounds");let t;return t=e.clone?structuredClone(e.list[e.index]):e.list[e.index],t}randomGetThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[];for(let r=0;r<e.list.length;r++)Math.random()<e.threshold&&i.push(t[r]);return i}getSubList(e){let t;return t=e.clone?structuredClone(e.list.slice(e.indexStart,e.indexEnd)):e.list.slice(e.indexStart,e.indexEnd),t}getNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[];for(let r=0;r<t.length;r++)(r+e.offset)%e.nth==0&&i.push(t[r]);return i}getByPattern(e){const{list:t,pattern:i}=e;if(!i||0===i.length)throw new Error("Pattern is empty or does not exist");const r=i.length,s=t.length,n=[];if(r>=s)t.forEach(((e,t)=>{!0===i[t]&&n.push(e)}));else{const e=[],o=Math.ceil(s/r);for(let t=0;t<o;t++)e.push(...i);t.forEach(((t,i)=>{!0===e[i]&&n.push(t)}))}return n}mergeElementsOfLists(e){const t=e.lists,i=e.level,r=[],s=[];t.forEach((e=>{const t=e.flat(i);r.push(t)}));const n=this.getLongestListLength({lists:r});for(let e=0;e<n;e++){const t=[];for(let i=0;i<r.length;i++){const s=r[i][e];void 0!==s&&t.push(s)}t.length>0&&s.push(t)}let o=[];if(i>0)for(let e=0;e<i;e++)e===i-1&&0!==e?o[e-1].push(s):e===i-1?o.push(s):o.push([]);else o=s;return o}getLongestListLength(e){let t=0;return e.lists?(e.lists.forEach((e=>{e.length>t&&(t=e.length)})),t):void 0}reverse(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.reverse()}flipLists(e){if(e.list.length>0){const t=e.list[0].length;let i=!0;if(e.list.forEach((e=>{e.length!==t&&(i=!1)})),i){const i=[];for(let r=0;r<t;r++){const t=[];e.list.forEach((e=>{t.push(e[r])})),i.push(t)}return i}throw new Error("Lists are not of the same length")}throw new Error("List is empty")}groupNth(e){return(e=>{const{nrElements:t,list:i,keepRemainder:r}=e,s=t,n=[];let o=[];return i.forEach(((e,t)=>{o.push(e),(t+1)%s==0&&(n.push(o),o=[]),o.length>0&&r&&t===i.length-1&&n.push(o)})),n})(e)}getListDepth(e){let t=0,i=!0,r=e.list;for(;i;){let e=!1;for(let t=0;t<r.length;t++)Array.isArray(r[t])&&(e=!0);r=r.flat(),e?t++:(t++,i=!1)}return t}listLength(e){return e.list.length}addItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,0,e.item),t}addItemAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));let i=[...e.indexes];return i=i.filter((e=>e>=0&&e<=t.length)),i.sort(((e,t)=>e-t)),i.forEach(((i,r)=>{i>=0&&i+r<=t.length&&t.splice(i+r,0,e.item)})),t}addItemsAtIndexes(e){if(e.items.length!==e.indexes.length)throw new Error("Items and indexes must have the same length");for(let t=0;t<e.indexes.length;t++)if(t>0&&e.indexes[t-1]>e.indexes[t])throw new Error("Indexes must be in ascending order");let t=e.list;return e.clone&&(t=structuredClone(e.list)),[...e.indexes].forEach(((i,r)=>{i>=0&&i+r<=t.length&&t.splice(i+r,0,e.items[r])})),t}removeItemAtIndex(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.index>=0&&e.index<=t.length&&t.splice(e.index,1),t}removeItemsAtIndexes(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[...e.indexes];return i.sort(((e,t)=>t-e)),i.forEach((e=>{e>=0&&e<t.length&&t.splice(e,1)})),t}removeAllItems(e){return e.list.length=0,e.list}removeNthItem(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[];for(let r=0;r<t.length;r++)(r+e.offset)%e.nth!=0&&i.push(t[r]);return i}randomRemoveThreshold(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[];for(let r=0;r<e.list.length;r++)Math.random()>e.threshold&&i.push(t[r]);return i}removeDuplicateNumbers(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((e,t,i)=>i.indexOf(e)===t))}removeDuplicateNumbersTolerance(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.filter(((t,i,r)=>r.findIndex((i=>Math.abs(i-t)<e.tolerance))===i))}addItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.push(e.item),t}prependItem(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),t.unshift(e.item),t}addItemFirstLast(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.position===z.firstLastEnum.first?t.unshift(e.item):t.push(e.item),t}createEmptyList(){return[]}repeat(e){const t=[];for(let i=0;i<e.times;i++)t.push(e.item);return t}repeatInPattern(e){let t=e.list;e.clone&&(t=structuredClone(e.list));const i=[];let r=0,s=0;for(;r<e.lengthLimit;)i.push(t[s]),s++,s===t.length&&(s=0),r++;return i}sortNumber(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((e,t)=>e-t)):t.sort(((e,t)=>t-e))}sortTexts(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort():t.sort().reverse()}sortByPropValue(e){let t=e.list;return e.clone&&(t=structuredClone(e.list)),e.orderAsc?t.sort(((t,i)=>t[e.property]-i[e.property])):t.sort(((t,i)=>i[e.property]-t[e.property]))}}class Ne{boolean(e){return e.boolean}randomBooleans(e){const t=[];for(let i=0;i<e.length;i++)t.push(Math.random()<e.trueThreshold);return t}twoThresholdRandomGradient(e){const t=[];return e.numbers.forEach((i=>{if(i<e.thresholdTotalTrue)t.push(!0);else if(i>e.thresholdTotalFalse)t.push(!1);else{const r=i-e.thresholdTotalTrue,s=(e.thresholdTotalFalse-e.thresholdTotalTrue)/e.nrLevels,n=Math.ceil(r/s)/e.nrLevels;Math.random()>n?t.push(!0):t.push(!1)}})),t}thresholdBooleanList(e){const t=[];return e.numbers.forEach((i=>{i<e.threshold?t.push(!0):t.push(!1)})),e.inverse?t.map((e=>!e)):t}thresholdGapsBooleanList(e){const t=[];return e.numbers.forEach((i=>{let r=!1;e.gapThresholds.forEach((e=>{const s=e[0],n=e[1];i>=s&&i<=n&&(t.push(!0),r=!0)})),r||t.push(!1)})),e.inverse?t.map((e=>!e)):t}not(e){return!e.boolean}notList(e){return e.booleans.map((e=>!e))}compare(e){switch(e.operator){case"==":return e.first==e.second;case"!=":return e.first!=e.second;case"===":return e.first===e.second;case"!==":return e.first!==e.second;case"<":return e.first<e.second;case"<=":return e.first<=e.second;case">":return e.first>e.second;case">=":return e.first>=e.second;default:return!1}}valueGate(e){return e.boolean?e.value:void 0}firstDefinedValueGate(e){let t;return t=void 0!==e.value1?e.value1:void 0!==e.value2?e.value2:void 0,t}}class He{number(e){return e.number}twoNrOperation(e){let t;switch(e.operation){case q.mathTwoNrOperatorEnum.add:t=e.first+e.second;break;case q.mathTwoNrOperatorEnum.subtract:t=e.first-e.second;break;case q.mathTwoNrOperatorEnum.multiply:t=e.first*e.second;break;case q.mathTwoNrOperatorEnum.divide:t=e.first/e.second;break;case q.mathTwoNrOperatorEnum.power:t=Math.pow(e.first,e.second);break;case q.mathTwoNrOperatorEnum.modulus:t=e.first%e.second}return t}modulus(e){return this.twoNrOperation({first:e.number,second:e.modulus,operation:q.mathTwoNrOperatorEnum.modulus})}roundToDecimals(e){return Math.round(e.number*Math.pow(10,e.decimalPlaces))/Math.pow(10,e.decimalPlaces)}oneNrOperation(e){let t;switch(e.operation){case q.mathOneNrOperatorEnum.absolute:t=Math.abs(e.number);break;case q.mathOneNrOperatorEnum.negate:t=-e.number;break;case q.mathOneNrOperatorEnum.ln:t=Math.log(e.number);break;case q.mathOneNrOperatorEnum.log10:t=Math.log10(e.number);break;case q.mathOneNrOperatorEnum.tenPow:t=Math.pow(10,e.number);break;case q.mathOneNrOperatorEnum.round:t=Math.round(e.number);break;case q.mathOneNrOperatorEnum.floor:t=Math.floor(e.number);break;case q.mathOneNrOperatorEnum.ceil:t=Math.ceil(e.number);break;case q.mathOneNrOperatorEnum.sqrt:t=Math.sqrt(e.number);break;case q.mathOneNrOperatorEnum.sin:t=Math.sin(e.number);break;case q.mathOneNrOperatorEnum.cos:t=Math.cos(e.number);break;case q.mathOneNrOperatorEnum.tan:t=Math.tan(e.number);break;case q.mathOneNrOperatorEnum.asin:t=Math.asin(e.number);break;case q.mathOneNrOperatorEnum.acos:t=Math.acos(e.number);break;case q.mathOneNrOperatorEnum.atan:t=Math.atan(e.number);break;case q.mathOneNrOperatorEnum.log:t=Math.log(e.number);break;case q.mathOneNrOperatorEnum.exp:t=Math.exp(e.number);break;case q.mathOneNrOperatorEnum.degToRad:t=e.number*Math.PI/180;break;case q.mathOneNrOperatorEnum.radToDeg:t=180*e.number/Math.PI}return t}remap(e){return(e.number-e.fromLow)*(e.toHigh-e.toLow)/(e.fromHigh-e.fromLow)+e.toLow}random(){return Math.random()}randomNumber(e){return Math.random()*(e.high-e.low)+e.low}randomNumbers(e){const t=[];for(let i=0;i<e.count;i++)t.push(this.randomNumber(e));return t}pi(){return Math.PI}toFixed(e){return e.number.toFixed(e.decimalPlaces)}add(e){return e.first+e.second}subtract(e){return e.first-e.second}multiply(e){return e.first*e.second}divide(e){return e.first/e.second}power(e){return Math.pow(e.first,e.second)}sqrt(e){return Math.sqrt(e.number)}abs(e){return Math.abs(e.number)}round(e){return Math.round(e.number)}floor(e){return Math.floor(e.number)}ceil(e){return Math.ceil(e.number)}negate(e){return-e.number}ln(e){return Math.log(e.number)}log10(e){return Math.log10(e.number)}tenPow(e){return Math.pow(10,e.number)}sin(e){return Math.sin(e.number)}cos(e){return Math.cos(e.number)}tan(e){return Math.tan(e.number)}asin(e){return Math.asin(e.number)}acos(e){return Math.acos(e.number)}atan(e){return Math.atan(e.number)}exp(e){return Math.exp(e.number)}degToRad(e){return e.number*Math.PI/180}radToDeg(e){return 180*e.number/Math.PI}ease(e){const t=e.x,i=e.min,r=e.max,s=this[e.ease](t);return this.remap({number:s,fromLow:0,fromHigh:1,toLow:i,toHigh:r})}easeInSine(e){return 1-Math.cos(e*Math.PI/2)}easeOutSine(e){return Math.sin(e*Math.PI/2)}easeInOutSine(e){return-(Math.cos(Math.PI*e)-1)/2}easeInQuad(e){return e*e}easeOutQuad(e){return 1-(1-e)*(1-e)}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}easeInCubic(e){return e*e*e}easeOutCubic(e){return 1-Math.pow(1-e,3)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}easeInQuart(e){return e*e*e*e}easeOutQuart(e){return 1-Math.pow(1-e,4)}easeInOutQuart(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}easeInQuint(e){return e*e*e*e*e}easeOutQuint(e){return 1-Math.pow(1-e,5)}easeInOutQuint(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}easeInExpo(e){return 0===e?0:Math.pow(2,10*e-10)}easeOutExpo(e){return 1===e?1:1-Math.pow(2,-10*e)}easeInOutExpo(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}easeInCirc(e){return 1-Math.sqrt(1-e*e)}easeOutCirc(e){return Math.sqrt(1-Math.pow(e-1,2))}easeInOutCirc(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}easeInBack(e){return 2.70158*e*e*e-1.70158*e*e}easeOutBack(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)}easeInOutBack(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}easeInElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)}easeOutElastic(e){const t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1}easeInOutElastic(e){const t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}easeInBounce(e){return 1-this.easeOutBounce(1-e)}easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375}easeInOutBounce(e){return e<.5?(1-this.easeOutBounce(1-2*e))/2:(1+this.easeOutBounce(2*e-1))/2}}class Ge{constructor(e,t,i,r){this.geometryHelper=e,this.transforms=t,this.vector=i,this.lists=r}transformPoint(e){const t=e.transformation;let i=[e.point];return i=this.geometryHelper.transformControlPoints(t,i),i[0]}transformPoints(e){return this.geometryHelper.transformControlPoints(e.transformation,e.points)}transformsForPoints(e){if(e.points.length!==e.transformation.length)throw new Error("You must provide equal nr of points and transformations");return e.points.map(((t,i)=>this.geometryHelper.transformControlPoints(e.transformation[i],[t])[0]))}translatePoints(e){const t=this.transforms.translationXYZ({translation:e.translation});return this.geometryHelper.transformControlPoints(t,e.points)}translatePointsWithVectors(e){if(e.points.length!==e.translations.length)throw new Error("You must provide equal nr of points and translations");const t=this.transforms.translationsXYZ({translations:e.translations});return e.points.map(((e,i)=>this.geometryHelper.transformControlPoints(t[i],[e])[0]))}translateXYZPoints(e){const t=this.transforms.translationXYZ({translation:[e.x,e.y,e.z]});return this.geometryHelper.transformControlPoints(t,e.points)}scalePointsCenterXYZ(e){const t=this.transforms.scaleCenterXYZ({center:e.center,scaleXyz:e.scaleXyz});return this.geometryHelper.transformControlPoints(t,e.points)}stretchPointsDirFromCenter(e){const t=this.transforms.stretchDirFromCenter({center:e.center,scale:e.scale,direction:e.direction});return this.geometryHelper.transformControlPoints(t,e.points)}rotatePointsCenterAxis(e){const t=this.transforms.rotationCenterAxis({center:e.center,axis:e.axis,angle:e.angle});return this.geometryHelper.transformControlPoints(t,e.points)}boundingBoxOfPoints(e){const t=[],i=[],r=[];e.points.forEach((e=>{t.push(e[0]),i.push(e[1]),r.push(e[2])}));const s=[Math.min(...t),Math.min(...i),Math.min(...r)],n=[Math.max(...t),Math.max(...i),Math.max(...r)];return{min:s,max:n,center:[(s[0]+n[0])/2,(s[1]+n[1])/2,(s[2]+n[2])/2],width:n[0]-s[0],height:n[1]-s[1],length:n[2]-s[2]}}closestPointFromPointsDistance(e){return this.closestPointFromPointData(e).distance}closestPointFromPointsIndex(e){return this.closestPointFromPointData(e).index}closestPointFromPoints(e){return this.closestPointFromPointData(e).point}distance(e){const t=e.endPoint[0]-e.startPoint[0],i=e.endPoint[1]-e.startPoint[1],r=e.endPoint[2]-e.startPoint[2];return Math.sqrt(t*t+i*i+r*r)}distancesToPoints(e){return e.endPoints.map((t=>this.distance({startPoint:e.startPoint,endPoint:t})))}multiplyPoint(e){const t=[];for(let i=0;i<e.amountOfPoints;i++)t.push([e.point[0],e.point[1],e.point[2]]);return t}getX(e){return e.point[0]}getY(e){return e.point[1]}getZ(e){return e.point[2]}averagePoint(e){const t=[],i=[],r=[];return e.points.forEach((e=>{t.push(e[0]),i.push(e[1]),r.push(e[2])})),[t.reduce(((e,t)=>e+t),0)/e.points.length,i.reduce(((e,t)=>e+t),0)/e.points.length,r.reduce(((e,t)=>e+t),0)/e.points.length]}pointXYZ(e){return[e.x,e.y,e.z]}pointXY(e){return[e.x,e.y]}spiral(e){const t=e.phi,i=Math.log(t)/(Math.PI/e.widening),r=[],s=e.radius/e.numberPoints;for(let t=0;t<e.radius;t+=s){const s=Math.log(t/e.factor)/i,n=t*Math.cos(s),o=t*Math.sin(s);r.push([n||0,o||0,0])}return r}hexGrid(e){const t=Math.sqrt(Math.pow(e.radiusHexagon,2)-Math.pow(e.radiusHexagon/2,2)),i=[];for(let r=0;r<e.nrHexagonsX;r++){const s=r*t*2;for(let r=0;r<e.nrHexagonsY;r++){const n=(e.radiusHexagon+e.radiusHexagon/2)*r,o=s+(r%2==0?0:t);i.push([o,n,0])}}if(e.orientOnCenter){const e=i[i.length-1][0]/2,t=i[i.length-1][1]/2;i.forEach(((r,s)=>{i[s]=[r[0]-e,r[1]-t,0]}))}return e.pointsOnGround&&i.forEach(((e,t)=>{i[t]=[e[0],0,e[1]]})),i}hexGridScaledToFit(e){var t,i,r,s;let n=e.width,o=e.height,a=e.nrHexagonsInHeight,c=e.nrHexagonsInWidth,h=null!==(t=e.extendTop)&&void 0!==t&&t,l=null!==(i=e.extendBottom)&&void 0!==i&&i,d=null!==(r=e.extendLeft)&&void 0!==r&&r,u=null!==(s=e.extendRight)&&void 0!==s&&s;const{flatTop:p=!1,centerGrid:f=!1,pointsOnGround:v=!1}=e;if(p){const t=n;n=e.height,o=t;const i=c;c=a,a=i;const r=h,s=l;h=d,l=u,d=s,u=r}if(n<=0||o<=0||c<1||a<1)return console.warn("Hex grid dimensions and counts must be positive."),{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const g=this.hexGrid({radiusHexagon:1,nrHexagonsX:c,nrHexagonsY:a,orientOnCenter:!1,pointsOnGround:!1});if(0===g.length)return{centers:[],hexagons:[],shortestDistEdge:void 0,longestDistEdge:void 0,maxFilletRadius:void 0};const m=g.map((e=>this.getRegularHexagonVertices(e,1)));let S=1/0,y=-1/0,b=1/0,w=-1/0;for(const e of m)for(const t of e)t[0]<S&&(S=t[0]),t[0]>y&&(y=t[0]),t[1]<b&&(b=t[1]),t[1]>w&&(w=t[1]);const E=y-S,x=w-b,T=E>1e-9?n/E:1,P=x>1e-9?o/x:1;let C=g.map((e=>[(e[0]-S)*T,(e[1]-b)*P,0])),k=m.map((e=>e.map((e=>[(e[0]-S)*T,(e[1]-b)*P,0])))),D=1/0,O=-1/0,A=0;if(0!==k.length){const e=k[0];if(A=this.safestPointsMaxFilletHalfLine({points:e,checkLastWithFirst:!0,tolerance:1e-7}),e.forEach(((t,i)=>{const r=e[(i+1)%e.length],s=this.distance({startPoint:t,endPoint:r});s<D&&(D=s),s>O&&(O=s)})),h||l||d||u){const t=e[0],i=e[1],r=t[1]-i[1],s=i[0]-t[0];if(h&&!l){const e={center:[0,0,0],direction:[0,1,0],scale:o/(o-r)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(l&&!h){const e={center:[0,o,0],direction:[0,-1,0],scale:o/(o-r)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(h&&l){const e={center:[0,o/2,0],direction:[0,1,0],scale:o/(o-2*r)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&!u){const e={center:[n,0,0],direction:[1,0,0],scale:n/(n-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(u&&!d){const e={center:[0,0,0],direction:[1,0,0],scale:n/(n-s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}if(d&&u){const e={center:[n/2,0,0],direction:[1,0,0],scale:n/(n-2*s)};k=k.map((t=>(e.points=t,this.stretchPointsDirFromCenter(e)))),e.points=C,C=this.stretchPointsDirFromCenter(e)}}}if(p){C=this.rotatePointsCenterAxis({points:C,center:[n/2,o/2,0],axis:[0,0,1],angle:90}),k=k.map((e=>this.rotatePointsCenterAxis({points:e,center:[n/2,o/2,0],axis:[0,0,1],angle:90})));const e=this.vector.sub({first:[o/2,n/2,0],second:[n/2,o/2,0]});C=this.translatePoints({points:C,translation:e}),k=k.map((t=>this.translatePoints({points:t,translation:e})))}if(f){let e=n/2,t=o/2;p&&(e=o/2,t=n/2);for(let i=0;i<C.length;i++)C[i][0]-=e,C[i][1]-=t;for(let i=0;i<k.length;i++)for(let r=0;r<k[i].length;r++)k[i][r][0]-=e,k[i][r][1]-=t}if(v){for(let e=0;e<C.length;e++)C[e]=[C[e][0],0,C[e][1]];for(let e=0;e<k.length;e++)for(let t=0;t<k[e].length;t++)k[e][t]=[k[e][t][0],0,k[e][t][1]]}if(p){const t=this.lists.groupNth({list:k.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),i=this.lists.flipLists({list:t});i.forEach((e=>e.reverse())),k=i.flat();const r=this.lists.groupNth({list:C.reverse(),nrElements:e.nrHexagonsInWidth,keepRemainder:!0}),s=this.lists.flipLists({list:r});s.forEach((e=>e.reverse())),C=s.flat()}return{centers:C,hexagons:k,shortestDistEdge:D,longestDistEdge:O,maxFilletRadius:A}}maxFilletRadius(e){const{start:t,center:i,end:r,tolerance:s=1e-7}=e,n=this.vector.sub({first:t,second:r}),o=this.vector.sub({first:i,second:r}),a=this.vector.length({vector:n}),c=this.vector.length({vector:o});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:o});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s)return 0;if(d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a,c)*p}maxFilletRadiusHalfLine(e){const{start:t,center:i,end:r,tolerance:s=1e-7}=e,n=this.vector.sub({first:t,second:r}),o=this.vector.sub({first:i,second:r}),a=this.vector.length({vector:n}),c=this.vector.length({vector:o});if(a<s||c<s)return 0;const h=this.vector.normalized({vector:n}),l=this.vector.normalized({vector:o});if(!h||!l)return 0;const d=Math.max(-1,Math.min(1,this.vector.dot({first:h,second:l})));if(d>1-s||d<-1+s)return 0;const u=Math.acos(d),p=Math.tan(u/2);return p<s?0:Math.min(a/2,c/2)*p}maxFilletsHalfLine(e){const{points:t,checkLastWithFirst:i=!1,tolerance:r=1e-7}=e,s=t.length,n=[];if(s<3)return n;for(let e=1;e<s-1;e++){const i=t[e-1],s=t[e],o={start:i,center:t[e+1],end:s,tolerance:r};n.push(this.maxFilletRadiusHalfLine(o))}if(i&&s>=3){const e=t[s-1],i=t[0],o={start:e,center:t[1],end:i,tolerance:r};n.push(this.maxFilletRadiusHalfLine(o));const a=t[s-2],c=t[s-1],h={start:a,center:t[0],end:c,tolerance:r};n.push(this.maxFilletRadiusHalfLine(h))}return n}safestPointsMaxFilletHalfLine(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const i=Math.min(...t);return Math.max(0,i)}removeConsecutiveDuplicates(e){return this.geometryHelper.removeConsecutivePointDuplicates(e.points,e.checkFirstAndLast,e.tolerance)}normalFromThreePoints(e){const t=e.point1,i=e.point2,r=e.point3;if(!t||!i||!r||3!==t.length||3!==i.length||3!==r.length)throw new Error("All points must be arrays of 3 numbers [x, y, z]");const s=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2],a=r[0]-t[0],c=r[1]-t[1],h=r[2]-t[2];let l=n*h-o*c,d=o*a-s*h,u=s*c-n*a;if(0!==l||0!==d||0!==u)return e.reverseNormal&&(l=-l,d=-d,u=-u),this.vector.normalized({vector:[l,d,u]});console.warn("Points are collinear or coincident; cannot calculate a unique normal.")}closestPointFromPointData(e){let t,i,r=Number.MAX_SAFE_INTEGER;for(let s=0;s<e.points.length;s++){const n=e.points[s],o=this.distance({startPoint:e.point,endPoint:n});o<r&&(r=o,t=s,i=n)}return{index:t+1,distance:r,point:i}}twoPointsAlmostEqual(e){const t=e.point1,i=e.point2;return this.distance({startPoint:t,endPoint:i})<e.tolerance}sortPoints(e){return[...e.points].sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]))}getRegularHexagonVertices(e,t){const i=[],r=e[0],s=e[1],n=e[2],o=Math.PI/3;for(let e=0;e<6;e++){const a=o*e;i.push([r+t*Math.sin(a),s+t*Math.cos(a),n])}return i}}const Ve={xOffset:0,yOffset:0,input:"?",align:"left",font:{height:21,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12],176:[14,7,21,5,20,4,18,4,16,5,14,7,13,9,14,10,16,10,18,9,20,7,21],178:[14,5,17,5,18,6,19,7,20,9,21,10,21,11,20,12,19,12,18,11,17,10,16,6,14,12,14],179:[14,5,21,11,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],181:[19,4,14,4,-7,void 0,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],185:[14,7,19,8,20,10,21,10,14],188:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],189:[26,4,19,5,20,7,21,7,14,void 0,6,0,18,21,void 0,15,4,15,5,16,6,17,7,19,7,20,6,20,5,19,4,17,2,15,0,21,0],190:[26,4,21,10,21,8,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16,void 0,6,0,18,21,void 0,16,11,16,7,22,7,void 0,18,11,18,0,void 0,16,0,22,0],215:[18,3,15,15,3,void 0,15,15,3,3],247:[22,4,9,18,9,void 0,11,15,10,14,11,13,12,14,11,15,void 0,11,5,10,4,11,3,12,4,11,5],177:[26,13,18,13,6,void 0,4,12,22,12,void 0,4,3,22,3],8304:[14,8,21,7,20,6,19,5,17,5,15,6,14,8,14,9,14,11,15,12,17,12,19,11,20,9,21,8,21],8308:[14,10,21,6,17,12,17,void 0,10,21,10,14],8309:[14,11,21,6,21,5,17,6,17,7,18,9,18,10,17,11,16,11,15,10,14,8,14,6,15,5,16],8310:[14,11,19,10,20,9,21,7,21,6,20,5,18,5,15,6,14,8,14,9,14,10,15,11,16,11,17,10,18,9,18,8,17,7,16,6,15],8311:[14,11,21,7,14,void 0,5,21,11,21],8312:[14,8,21,7,20,6,19,6,18,7,17,8,17,9,18,10,19,10,20,9,21,8,21,7,20,void 0,8,17,7,16,6,15,6,14,7,13,8,13,9,14,10,15,10,16,9,17],8313:[14,10,17,9,16,8,16,7,17,6,18,6,19,7,20,8,20,9,19,10,18,10,15,9,14,7,14,6,15,5,16],8320:[14,8,7,7,6,6,5,5,3,5,1,6,0,8,0,9,0,11,1,12,3,12,5,11,6,9,7,8,7],8321:[14,7,5,8,6,10,7,10,0],8322:[14,5,4,5,5,6,6,7,7,9,7,10,6,11,5,11,4,10,3,9,2,6,0,12,0],8323:[14,5,7,11,7,8,4,10,4,11,3,12,2,12,1,11,0,9,0,7,1,6,2,5,3],8324:[14,10,7,6,3,12,3,void 0,10,7,10,0],8776:[24,3,11,4,13,6,14,8,14,10,13,14,10,16,9,18,9,20,10,21,12,void 0,3,5,4,7,6,8,8,8,10,7,14,4,16,3,18,3,20,4,21,6],8730:[20,4,12,6,8,8,0,void 0,8,0,10,21,void 0,10,21,20,21],8731:[24,2,21,5,21,4,19,5,18,6,17,6,16,5,15,3,15,2,16,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8732:[24,5,21,3,18,6,18,void 0,5,21,5,15,void 0,8,12,10,8,12,0,void 0,12,0,14,21,void 0,14,21,24,21],8960:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,6,3,16,18]},height:21,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};class ze{constructor(e){this.point=e}create(e){return e.text}split(e){return e.text.split(e.separator)}replaceAll(e){return e.text.split(e.search).join(e.replaceWith)}join(e){return e.list.join(e.separator)}toString(e){return e.item.toString()}toStringEach(e){return e.list.map((e=>e.toString()))}format(e){return e.text.replace(/{(\d+)}/g,((t,i)=>void 0!==e.values[i]?e.values[i]:t))}vectorChar(e){const{xOffset:t,yOffset:i,font:r,input:s,height:n,extrudeOffset:o}=this.vectorParamsChar(e);let a=s.charCodeAt(0);a&&r[a]||(a=63);const c=[].concat(r[a]),h=(n-o)/r.height,l=o/2,d=c.shift()*h,u=[];let p=[];for(let e=0,r=c.length;e<r;e+=2){const r=h*c[e]+t,s=h*c[e+1]+i+l;void 0===c[e]?(u.push(p),p=[],e--):p.push([r,0,s])}return p.length&&u.push(p),{width:d,height:n,paths:u}}vectorText(e){const{xOffset:t,yOffset:i,height:r,align:s,extrudeOffset:n,lineSpacing:o,letterSpacing:a}=Object.assign({},Ve,e),c=e.text;if("string"!=typeof c)throw new Error("text must be a string");const h=r*a;let l=0,d={width:0,height:0,chars:[]},u=[];const p=()=>{l=Math.max(l,d.width),d.chars.length&&u.push(d),d={width:0,height:0,chars:[]}};let f,v=t,g=i;const m=c.length;for(let e=0;e<m;e++){const i=c[e];if("\n"===i){p(),v=t,g-=r*o;continue}f=this.vectorChar({xOffset:v,yOffset:g,height:r,extrudeOffset:n,char:i});const s=f.width+h;v+=s,d.width+=s,d.height=Math.max(d.height,f.height)," "!==i&&(d.chars=d.chars.concat(f))}if(d.chars.length&&p(),u=u.map((e=>{const t=l-e.width;return s===G.horizontalAlignEnum.right?this.translateLine({x:t},e):s===G.horizontalAlignEnum.center?this.translateLine({x:t/2},e):e})),e.centerOnOrigin){const e=[];u.forEach((t=>{t.chars.forEach((t=>{t.paths.forEach((t=>{e.push(...t)}))}))}));const t=this.point.boundingBoxOfPoints({points:e});u.forEach((e=>{e.chars.forEach((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[-t.center[0],-t.center[1],-t.center[2]]}))),e)))}))}return u}vectorParamsChar(e){const t=Object.assign({},Ve,e);return t.input=e.char||t.char,t}translateLine(e,t){const{x:i,y:r}=Object.assign({x:0,y:0},e);return t.chars=t.chars.map((e=>(e.paths=e.paths.map((e=>this.point.translatePoints({points:e,translation:[i,0,r]}))),e))),t}}class je{constructor(e,t){this.math=e,this.geometryHelper=t}removeAllDuplicateVectors(e){return this.geometryHelper.removeAllDuplicateVectors(e.vectors,e.tolerance)}removeConsecutiveDuplicateVectors(e){return this.geometryHelper.removeConsecutiveVectorDuplicates(e.vectors,e.checkFirstAndLast,e.tolerance)}vectorsTheSame(e){return this.geometryHelper.vectorsTheSame(e.vec1,e.vec2,e.tolerance)}angleBetween(e){return this.math.radToDeg({number:Math.acos(this.dot({first:e.first,second:e.second})/(this.norm({vector:e.first})*this.norm({vector:e.second})))})}angleBetweenNormalized2d(e){const t=e.first[0]*e.second[1]-e.first[1]*e.second[0];return this.math.radToDeg({number:Math.atan2(t,this.dot({first:e.first,second:e.second}))})}positiveAngleBetween(e){const t=this.signedAngleBetween(e);return t<0?360+t:t}addAll(e){const t=[];for(let i=0;i<e.vectors[0].length;i++){let r=0;for(const t of e.vectors)r+=t[i];t.push(r)}return t}add(e){const t=[];for(let i=0;i<e.first.length;i++)t.push(e.first[i]+e.second[i]);return t}all(e){return e.vector.every((e=>e))}cross(e){const t=[];return t.push(e.first[1]*e.second[2]-e.first[2]*e.second[1]),t.push(e.first[2]*e.second[0]-e.first[0]*e.second[2]),t.push(e.first[0]*e.second[1]-e.first[1]*e.second[0]),t}distSquared(e){let t=0;for(let i=0;i<e.first.length;i++)t+=Math.pow(e.first[i]-e.second[i],2);return t}dist(e){return Math.sqrt(this.distSquared(e))}div(e){const t=[];for(let i=0;i<e.vector.length;i++)t.push(e.vector[i]/e.scalar);return t}domain(e){return e.vector[e.vector.length-1]-e.vector[0]}dot(e){let t=0;for(let i=0;i<e.first.length;i++)t+=e.first[i]*e.second[i];return t}finite(e){return e.vector.map((e=>isFinite(e)))}isZero(e){return 0===this.norm({vector:e.vector})}lerp(e){return this.add({first:this.mul({vector:e.first,scalar:e.fraction}),second:this.mul({vector:e.second,scalar:1-e.fraction})})}max(e){return Math.max(...e.vector)}min(e){return Math.min(...e.vector)}mul(e){const t=[];for(let i=0;i<e.vector.length;i++)t.push(e.vector[i]*e.scalar);return t}neg(e){const t=[];for(let i=0;i<e.vector.length;i++)t.push(-e.vector[i]);return t}normSquared(e){return this.dot({first:e.vector,second:e.vector})}norm(e){const t=this.normSquared(e);return 0!==t?Math.sqrt(t):t}normalized(e){if(!(this.length({vector:e.vector})<=1e-8))return this.div({scalar:this.norm(e),vector:e.vector})}onRay(e){return this.add({first:e.point,second:this.mul({vector:e.vector,scalar:e.distance})})}vectorXYZ(e){return[e.x,e.y,e.z]}vectorXY(e){return[e.x,e.y]}range(e){const t=[];for(let i=0;i<e.max;i++)t.push(i);return t}signedAngleBetween(e){const t=this.cross({first:e.first,second:e.second}),i=this.norm({vector:e.first})*this.norm({vector:e.second}),r=this.dot({first:e.first,second:e.second}),s=this.norm({vector:t})/i,n=r/i,o=Math.atan2(s,n),a=this.dot({first:e.reference,second:t})>0?o:2*Math.PI-o;return this.math.radToDeg({number:a})}span(e){const t=[];for(let i=e.min;i<=e.max;i+=e.step)t.push(i);return t}spanEaseItems(e){const t=[];for(let i=0;i<e.nrItems;i++){const r=1*i/(e.nrItems-1);t.push(this.math.ease({x:r,ease:e.ease,min:e.min,max:e.max}))}return e.intervals?t.map(((e,t,i)=>0===t?e:e-i[t-1])):t}spanLinearItems(e){const t=[],i=e.max-e.min;for(let r=0;r<e.nrItems;r++){const s=i*r/(e.nrItems-1);t.push(s+e.min)}return t}sub(e){const t=[];for(let i=0;i<e.first.length;i++)t.push(e.first[i]-e.second[i]);return t}sum(e){return e.vector.reduce(((e,t)=>e+t),0)}lengthSq(e){const t=e.vector;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}length(e){return Math.sqrt(this.lengthSq(e))}}class qe{constructor(e,t){this.vector=e,this.math=t}rotationCenterAxis(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationAxis(e.axis,this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterX(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationX(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterY(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationY(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationZ(this.math.degToRad({number:e.angle})),this.translation(e.center[0],e.center[1],e.center[2])]}rotationCenterYawPitchRoll(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.rotationYawPitchRoll(this.math.degToRad({number:e.yaw}),this.math.degToRad({number:e.pitch}),this.math.degToRad({number:e.roll})),this.translation(e.center[0],e.center[1],e.center[2])]}scaleCenterXYZ(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2]),this.translation(e.center[0],e.center[1],e.center[2])]}scaleXYZ(e){return[this.scaling(e.scaleXyz[0],e.scaleXyz[1],e.scaleXyz[2])]}stretchDirFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.stretchDirection(e.direction,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}uniformScale(e){return[this.scaling(e.scale,e.scale,e.scale)]}uniformScaleFromCenter(e){return[this.translation(-e.center[0],-e.center[1],-e.center[2]),this.scaling(e.scale,e.scale,e.scale),this.translation(e.center[0],e.center[1],e.center[2])]}translationXYZ(e){return[this.translation(e.translation[0],e.translation[1],e.translation[2])]}translationsXYZ(e){return e.translations.map((e=>[this.translation(e[0],e[1],e[2])]))}identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}translation(e,t,i){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,i,1]}scaling(e,t,i){return[e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1]}rotationAxis(e,t){const i=Math.sin(-t),r=Math.cos(-t),s=1-r,n=this.vector.normalized({vector:e}),o=n[0],a=n[1],c=n[2],h=this.identity();return h[0]=o*o*s+r,h[1]=o*a*s-c*i,h[2]=o*c*s+a*i,h[3]=0,h[4]=a*o*s+c*i,h[5]=a*a*s+r,h[6]=a*c*s-o*i,h[7]=0,h[8]=c*o*s-a*i,h[9]=c*a*s+o*i,h[10]=c*c*s+r,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}rotationX(e){const t=Math.sin(e),i=Math.cos(e);return[1,0,0,0,0,i,t,0,0,-t,i,0,0,0,0,1]}rotationY(e){const t=Math.sin(e),i=Math.cos(e);return[i,0,-t,0,0,1,0,0,t,0,i,0,0,0,0,1]}rotationZ(e){const t=Math.sin(e),i=Math.cos(e);return[i,t,0,0,-t,i,0,0,0,0,1,0,0,0,0,1]}rotationYawPitchRoll(e,t,i){const r=.5*i,s=.5*t,n=.5*e,o=Math.sin(r),a=Math.cos(r),c=Math.sin(s),h=Math.cos(s),l=Math.sin(n),d=Math.cos(n),u=d*c*a+l*h*o,p=l*h*a-d*c*o,f=d*h*o-l*c*a,v=d*h*a+l*c*o;return this.rotationMatrixFromQuat(u,p,f,v)}rotationMatrixFromQuat(e,t,i,r){const s=e*e,n=t*t,o=i*i,a=e*t,c=i*r,h=i*e,l=t*r,d=t*i,u=e*r,p=this.identity();return p[0]=1-2*(n+o),p[1]=2*(a+c),p[2]=2*(h-l),p[3]=0,p[4]=2*(a-c),p[5]=1-2*(o+s),p[6]=2*(d+u),p[7]=0,p[8]=2*(h+l),p[9]=2*(d-u),p[10]=1-2*(n+s),p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}stretchDirection(e,t){const i=this.vector.normalized({vector:e}),[r,s,n]=i;if(isNaN(r)||0===r&&0===s&&0===n)return console.warn("Stretch direction vector is zero or invalid. Returning identity matrix."),this.identity();const o=t-1;return[1+o*r*r,o*s*r,o*n*r,0,o*r*s,1+o*s*s,o*n*s,0,o*r*n,o*s*n,1+o*n*n,0,0,0,0,1]}}class Ye{constructor(){this.getArrayDepth=e=>Array.isArray(e)?1+Math.max(...e.map(this.getArrayDepth)):0}transformControlPoints(e,t){return this.getFlatTransformations(e).forEach((e=>{t=this.transformPointsByMatrixArray(t,e)})),t}getFlatTransformations(e){let t=[];return 3===this.getArrayDepth(e)?e.forEach((e=>{t.push(...e)})):t=e,t}transformPointsByMatrixArray(e,t){return this.transformPointsCoordinates(e,t)}transformPointsCoordinates(e,t){const i=[];for(const r of e){const e=this.transformCoordinates(r[0],r[1],r[2],t);i.push(e)}return i}removeAllDuplicateVectors(e,t=1e-7){const i=[];return e.forEach((e=>{i.some((i=>this.vectorsTheSame(e,i,t)))||i.push(e)})),i}removeConsecutiveVectorDuplicates(e,t=!0,i=1e-7){const r=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];this.vectorsTheSame(s,n,i)||r.push(n),t===e.length-1&&r.push(s)}if(t){const e=r[0],t=r[r.length-1];this.vectorsTheSame(e,t,i)&&r.pop()}}else 1===e.length&&r.push(...e);return r}vectorsTheSame(e,t,i){let r=!1;if(e.length!==t.length)return r;r=!0;for(let s=0;s<e.length;s++)if(!this.approxEq(e[s],t[s],i)){r=!1;break}return r}approxEq(e,t,i){return Math.abs(e-t)<i}removeConsecutivePointDuplicates(e,t=!0,i=1e-7){const r=[];if(e.length>1){for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];this.arePointsTheSame(s,n,i)||r.push(n),t===e.length-1&&r.push(s)}if(t){const e=r[0],t=r[r.length-1];this.arePointsTheSame(e,t,i)&&r.pop()}}else 1===e.length&&r.push(...e);return r}arePointsTheSame(e,t,i){let r=!1;return 2===e.length&&2===t.length?this.approxEq(e[0],t[0],i)&&this.approxEq(e[1],t[1],i)&&(r=!0):3===e.length&&3===t.length&&this.approxEq(e[0],t[0],i)&&this.approxEq(e[1],t[1],i)&&this.approxEq(e[2],t[2],i)&&(r=!0),r}transformCoordinates(e,t,i,r){const s=r,n=e*s[0]+t*s[4]+i*s[8]+s[12],o=e*s[1]+t*s[5]+i*s[9]+s[13],a=e*s[2]+t*s[6]+i*s[10]+s[14],c=1/(e*s[3]+t*s[7]+i*s[11]+s[15]);return[n*c,o*c,a*c]}}class Xe{constructor(e,t,i){this.vector=e,this.point=t,this.geometryHelper=i}getStartPoint(e){return e.line.start}getEndPoint(e){return e.line.end}length(e){return this.point.distance({startPoint:e.line.start,endPoint:e.line.end})}reverse(e){return{start:e.line.end,end:e.line.start}}transformLine(e){const t=e.transformation;let i=[e.line.start,e.line.end];return i=this.geometryHelper.transformControlPoints(t,i),{start:i[0],end:i[1]}}transformsForLines(e){return e.lines.map(((t,i)=>{const r=e.transformation[i];let s=[t.start,t.end];return s=this.geometryHelper.transformControlPoints(r,s),{start:s[0],end:s[1]}}))}create(e){return{start:e.start,end:e.end}}createSegment(e){return[e.start,e.end]}getPointOnLine(e){const t=e.line.start,i=e.line.end,r=e.param,s=[i[0]-t[0],i[1]-t[1],i[2]-t[2]];return[t[0]+r*s[0],t[1]+r*s[1],t[2]+r*s[2]]}linesBetweenPoints(e){const t=[];for(let i=1;i<e.points.length;i++){const r=e.points[i-1],s=e.points[i];t.push({start:r,end:s})}return t}linesBetweenStartAndEndPoints(e){return e.startPoints.map(((t,i)=>({start:t,end:e.endPoints[i]}))).filter((e=>0!==this.point.distance({startPoint:e.start,endPoint:e.end})))}lineToSegment(e){return[e.line.start,e.line.end]}linesToSegments(e){return e.lines.map((e=>[e.start,e.end]))}segmentToLine(e){return{start:e.segment[0],end:e.segment[1]}}segmentsToLines(e){return e.segments.map((e=>({start:e[0],end:e[1]})))}lineLineIntersection(e){const t=e.tolerance||1e-6,i=e.checkSegmentsOnly,r=e.line1,s=e.line2;if(!((null==r?void 0:r.start)&&r.end&&(null==s?void 0:s.start)&&s.end&&3===r.start.length&&3===r.end.length&&3===s.start.length&&3===s.end.length))return void console.error("Invalid line input to lineLineIntersection");const n=r.start,o=this.vector.sub({first:r.end,second:r.start}),a=s.start,c=this.vector.sub({first:s.end,second:s.start}),h=this.vector.sub({first:a,second:n}),l=this.vector.lengthSq({vector:o}),d=this.vector.lengthSq({vector:c});if(l<t*t||d<t*t)return;const u=this.vector.cross({first:o,second:c});if(this.vector.lengthSq({vector:u})<t*t){const e=this.vector.cross({first:h,second:o}),r=t*t*l;if(this.vector.lengthSq({vector:e})<r){if(i){const e=l<t*t?1:l,i=this.vector.dot({first:o,second:h})/e,r=this.vector.sub({first:s.end,second:n}),a=this.vector.dot({first:o,second:r})/e,c=[Math.min(i,a),Math.max(i,a)],d=[0,1];return Math.max(d[0],c[0]),void Math.min(d[1],c[1])}return n}return}const p=this.vector.dot({first:h,second:u}),f=t*t*t;if(Math.abs(p)>f)return;const v=l,g=d,m=this.vector.dot({first:o,second:c}),S=this.vector.dot({first:o,second:h}),y=this.vector.dot({first:c,second:h}),b=v*g-m*m;if(Math.abs(b)<t*t)return void console.error("Internal error: Denominator near zero after non-parallel check.");const w=(g*S-m*y)/b,E=(m*S-v*y)/b;if(i&&(w<-t||w>1+t||E<-t||E>1+t))return;const x=this.getPointOnLine({param:w,line:r});return[Math.abs(x[0])<t?0:x[0],Math.abs(x[1])<t?0:x[1],Math.abs(x[2])<t?0:x[2]]}}class $e{constructor(e,t,i,r){this.vector=e,this.point=t,this.line=i,this.geometryHelper=r}length(e){let t=0;for(let i=1;i<e.polyline.points.length;i++){const r=e.polyline.points[i-1],s=e.polyline.points[i];t+=this.point.distance({startPoint:r,endPoint:s})}return t}countPoints(e){return e.polyline.points.length}getPoints(e){return e.polyline.points}reverse(e){return{points:e.polyline.points.reverse()}}transformPolyline(e){const t=e.transformation;let i=e.polyline.points;return i=this.geometryHelper.transformControlPoints(t,i),{points:i}}create(e){var t;return{points:e.points,isClosed:null!==(t=e.isClosed)&&void 0!==t&&t}}polylineToLines(e){return this.polylineToSegments(e).map((e=>({start:e[0],end:e[1]})))}polylineToSegments(e){const t=e.polyline,i=[],r=t.points,s=r.length;if(s<2)return i;for(let e=0;e<s-1;e++)i.push([r[e],r[e+1]]);return t.isClosed&&s>=2&&(this.point.twoPointsAlmostEqual({point1:r[s-1],point2:r[0],tolerance:1e-9})||i.push([r[s-1],r[0]])),i}polylineSelfIntersection(e){const{polyline:t,tolerance:i}=e,r=this.polylineToLines({polyline:t}),s=r.length;if(s<3)return[];const n=[],o=null!=i?i:1e-6;for(let e=0;e<s;e++)for(let i=e+1;i<s;i++){let a=i===e+1;if(!a&&t.isClosed&&0===e&&i===s-1&&(a=!0),a)continue;const c=this.line.lineLineIntersection({line1:r[e],line2:r[i],checkSegmentsOnly:!0,tolerance:o});if(c){let e=!1;for(const t of n)if(this.point.twoPointsAlmostEqual({point1:c,point2:t,tolerance:o})){e=!0;break}e||n.push(c)}}return n}twoPolylineIntersection(e){const{polyline1:t,polyline2:i,tolerance:r}=e,s=this.polylineToLines({polyline:t}),n=this.polylineToLines({polyline:i}),o=[],a=null!=r?r:1e-6;for(const e of s)for(const t of n){const i=this.line.lineLineIntersection({line1:e,line2:t,checkSegmentsOnly:!0,tolerance:a});if(i){let e=!1;for(const t of o)if(this.point.twoPointsAlmostEqual({point1:i,point2:t,tolerance:a})){e=!0;break}e||o.push(i)}}return o}sortSegmentsIntoPolylines(e){var t;const i=null!==(t=e.tolerance)&&void 0!==t?t:1e-5,r=e.segments;if(!r||0===r.length)return[];const s=i*i,n=r.length,o=new Array(n).fill(!1),a=[],c=new Map,h=1/i,l=e=>`${Math.round(e[0]*h)},${Math.round(e[1]*h)},${Math.round(e[2]*h)}`;for(let e=0;e<n;e++){const t=r[e];if(this.point.twoPointsAlmostEqual({point1:t[0],point2:t[1],tolerance:i})){o[e]=!0;continue}const s=l(t[0]),n=l(t[1]),a={segmentIndex:e,endpointIndex:0,coords:t[0]},h={segmentIndex:e,endpointIndex:1,coords:t[1]};c.has(s)||c.set(s,[]),c.get(s).push(a),n!==s?(c.has(n)||c.set(n,[]),c.get(n).push(h)):c.get(s).push(h)}const d=e=>{const t=[],r=Math.round(e[0]*h),n=Math.round(e[1]*h),a=Math.round(e[2]*h);for(let e=-1;e<=1;e++)for(let i=-1;i<=1;i++)for(let s=-1;s<=1;s++)t.push(`${r+e},${n+i},${a+s}`);let l,d=s;for(const r of t){const t=c.get(r);if(t)for(const r of t)if(!o[r.segmentIndex]){const t=this.vector.sub({first:r.coords,second:e}),s=this.vector.lengthSq({vector:t});s<d&&this.point.twoPointsAlmostEqual({point1:r.coords,point2:e,tolerance:i})&&(l=r,d=s)}}if(l&&!o[l.segmentIndex])return l};for(let e=0;e<n;e++){if(o[e])continue;o[e]=!0;const t=r[e],s=[t[0],t[1]];let c=t[0],h=t[1],l=!1,u=0;for(;u++<n;){const e=d(h);if(!e)break;const t=r[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:c,tolerance:i})){l=!0,o[e.segmentIndex]=!0;break}o[e.segmentIndex]=!0,s.push(n),h=n}if(u=0,!l)for(;u++<n;){const e=d(c);if(!e)break;const t=r[e.segmentIndex],n=0===e.endpointIndex?t[1]:t[0];if(this.point.twoPointsAlmostEqual({point1:n,point2:h,tolerance:i})){l=!0,o[e.segmentIndex]=!0;break}o[e.segmentIndex]=!0,s.unshift(n),c=n}!l&&s.length>=2&&(l=this.point.twoPointsAlmostEqual({point1:c,point2:h,tolerance:i})),l&&s.length>2&&this.point.twoPointsAlmostEqual({point1:s[s.length-1],point2:s[0],tolerance:i})&&s.pop(),a.push({points:s,isClosed:l})}return a}maxFilletsHalfLine(e){return this.point.maxFilletsHalfLine({points:e.polyline.points,checkLastWithFirst:e.polyline.isClosed,tolerance:e.tolerance})}safestFilletRadius(e){const t=this.maxFilletsHalfLine(e);if(0===t.length)return 0;const i=Math.min(...t);return Math.max(0,i)}}class Ze{constructor(e,t){this.vector=e,this.polyline=t}signedDistanceToPlane(e){return this.vector.dot({first:e.plane.normal,second:e.point})-e.plane.d}calculateTrianglePlane(e){const t=Math.pow(e.tolerance||1e-7,2),i=this.vector.sub({first:e.triangle[1],second:e.triangle[0]}),r=this.vector.sub({first:e.triangle[2],second:e.triangle[0]}),s=this.vector.cross({first:i,second:r});if(this.vector.lengthSq({vector:s})<t)return;const n=this.vector.normalized({vector:s});return{normal:n,d:this.vector.dot({first:n,second:e.triangle[0]})}}triangleTriangleIntersection(e){const t=e.triangle1,i=e.triangle2,r=e.tolerance||1e-7,s=t[0],n=t[1],o=t[2],a=i[0],c=i[1],h=i[2],l=this.calculateTrianglePlane({triangle:t,tolerance:r}),d=this.calculateTrianglePlane({triangle:i,tolerance:r});if(!l||!d)return;const u=[this.signedDistanceToPlane({point:a,plane:l}),this.signedDistanceToPlane({point:c,plane:l}),this.signedDistanceToPlane({point:h,plane:l})];if(u[0]>r&&u[1]>r&&u[2]>r||u[0]<-r&&u[1]<-r&&u[2]<-r)return;const p=[this.signedDistanceToPlane({point:s,plane:d}),this.signedDistanceToPlane({point:n,plane:d}),this.signedDistanceToPlane({point:o,plane:d})];if(p[0]>r&&p[1]>r&&p[2]>r||p[0]<-r&&p[1]<-r&&p[2]<-r)return;const f=p.every((e=>Math.abs(e)<r)),v=u.every((e=>Math.abs(e)<r));if(f&&v)return;const g=this.vector.cross({first:l.normal,second:d.normal}),m=this.vector.dot({first:g,second:g});if(m<r*r)return;const S=[],y=[],b=[[s,n],[n,o],[o,s]],w=p;for(let e=0;e<3;++e){const t=b[e][0],i=b[e][1],s=w[e],n=w[(e+1)%3];if(Math.abs(s)<r&&S.push(t),s*n<0&&Math.abs(s-n)>r){const e=s/(s-n);S.push(this.computeIntersectionPoint(t,i,e))}}const E=[[a,c],[c,h],[h,a]],x=u;for(let e=0;e<3;++e){const t=E[e][0],i=E[e][1],s=x[e],n=x[(e+1)%3];if(Math.abs(s)<r&&y.push(t),s*n<0&&Math.abs(s-n)>r){const e=s/(s-n);y.push(this.computeIntersectionPoint(t,i,e))}}if(S.length<2||y.length<2)return;const T=l.normal,P=d.normal,C=l.d,k=d.d,D=this.vector.mul({vector:P,scalar:C}),O=this.vector.mul({vector:T,scalar:k}),A=this.vector.sub({first:D,second:O}),F=this.vector.cross({first:A,second:g}),_=this.vector.mul({vector:F,scalar:1/m}),R=S.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:_}),second:g}))),M=y.map((e=>this.vector.dot({first:this.vector.sub({first:e,second:_}),second:g}))),L=[Math.min(...R),Math.max(...R)],B=[Math.min(...M),Math.max(...M)],I=Math.max(L[0],B[0]),U=Math.min(L[1],B[1]);if(I<U-r*m){const e=this.vector.add({first:_,second:this.vector.mul({vector:g,scalar:I/m})}),t=this.vector.add({first:_,second:this.vector.mul({vector:g,scalar:U/m})}),i=this.vector.sub({first:e,second:t});return this.vector.lengthSq({vector:i})>r*r?[e,t]:void 0}}meshMeshIntersectionSegments(e){const t=e.mesh1,i=e.mesh2,r=[];for(let s=0;s<t.length;++s)for(let n=0;n<i.length;++n){const o=t[s],a=i[n],c=this.triangleTriangleIntersection({triangle1:o,triangle2:a,tolerance:e.tolerance});c&&r.push(c)}return r}meshMeshIntersectionPolylines(e){const t=this.meshMeshIntersectionSegments(e);return this.polyline.sortSegmentsIntoPolylines({segments:t,tolerance:e.tolerance})}meshMeshIntersectionPoints(e){return this.meshMeshIntersectionPolylines(e).map((e=>e.isClosed?[...e.points,e.points[0]]:e.points))}computeIntersectionPoint(e,t,i){return this.vector.add({first:e,second:this.vector.mul({vector:this.vector.sub({first:t,second:e}),scalar:i})})}}class Qe{constructor(){this.entityHandle=1}generateDxf(e){const t=[];return t.push(...this.generateHeader()),t.push(...this.generateTables(e)),t.push(...this.generateEntities(e)),t.push("0","EOF"),t.join("\n")}generateHeader(){return["0","SECTION","2","HEADER","9","$ACADVER","1","AC1015","9","$DWGCODEPAGE","3","ANSI_1252","9","$LASTSAVEDBY","1","bitbybit.dev","9","$HANDSEED","5","20000","0","ENDSEC"]}generateTables(e){const t=["0","SECTION","2","TABLES"];return t.push(...this.generateLayerTable(e)),t.push("0","ENDSEC"),t}generateLayerTable(e){const t=new Set;e.dxfPathsParts&&e.dxfPathsParts.forEach((e=>{e.layer&&t.add(e.layer)})),0===t.size&&t.add("0");const i=["0","TABLE","2","LAYER","5","2","100","AcDbSymbolTable","70",t.size.toString()];return t.forEach((e=>{i.push("0","LAYER","5",this.getNextHandle(),"100","AcDbSymbolTableRecord","100","AcDbLayerTableRecord","2",e,"70","0","62","7","6","CONTINUOUS")})),i.push("0","ENDTAB"),i}generateEntities(e){const t=["0","SECTION","2","ENTITIES"];return e.dxfPathsParts&&e.dxfPathsParts.forEach((e=>{e.paths&&e.paths.forEach((i=>{i.segments&&i.segments.forEach((i=>{t.push(...this.generateSegmentEntity(i,e))}))}))})),t.push("0","ENDSEC"),t}generateSegmentEntity(e,t){return this.isLineSegment(e)?this.generateLineEntity(e,t):this.isArcSegment(e)?this.generateArcEntity(e,t):this.isCircleSegment(e)?this.generateCircleEntity(e,t):this.isPolylineSegment(e)?this.generatePolylineEntity(e,t):this.isSplineSegment(e)?this.generateSplineEntity(e,t):[]}isLineSegment(e){return void 0!==e.start&&void 0!==e.end&&void 0===e.radius}isArcSegment(e){return void 0!==e.center&&void 0!==e.radius&&void 0!==e.startAngle&&void 0!==e.endAngle}isCircleSegment(e){return void 0!==e.center&&void 0!==e.radius&&void 0===e.startAngle}isPolylineSegment(e){return void 0!==e.points&&Array.isArray(e.points)}isSplineSegment(e){return void 0!==e.controlPoints&&Array.isArray(e.controlPoints)}generateLineEntity(e,t){const i=["0","LINE","5",this.getNextHandle(),"100","AcDbEntity"];return i.push("8",t.layer||"0"),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>i.push(e.code,e.value))),i.push("100","AcDbLine","10",e.start[0].toString(),"20",e.start[1].toString(),"30","0","11",e.end[0].toString(),"21",e.end[1].toString(),"31","0"),i}generateCircleEntity(e,t){const i=["0","CIRCLE","5",this.getNextHandle(),"100","AcDbEntity"];return i.push("8",t.layer||"0"),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>i.push(e.code,e.value))),i.push("100","AcDbCircle","10",e.center[0].toString(),"20",e.center[1].toString(),"30","0","40",e.radius.toString()),i}generateArcEntity(e,t){const i=["0","ARC","5",this.getNextHandle(),"100","AcDbEntity"];return i.push("8",t.layer||"0"),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>i.push(e.code,e.value))),i.push("100","AcDbCircle","10",e.center[0].toString(),"20",e.center[1].toString(),"30","0","40",e.radius.toString(),"100","AcDbArc","50",e.startAngle.toString(),"51",e.endAngle.toString()),i}generatePolylineEntity(e,t){const i=["0","LWPOLYLINE","5",this.getNextHandle(),"100","AcDbEntity"];i.push("8",t.layer||"0"),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>i.push(e.code,e.value)));const r=e.closed||e.points.length>2&&this.isClosedPolyline(e.points);return i.push("100","AcDbPolyline","90",e.points.length.toString(),"70",r?"1":"0"),e.points.forEach(((t,r)=>{if(i.push("10",t[0].toString(),"20",t[1].toString()),e.bulges&&e.bulges.length>r){const t=e.bulges[r];0!==t&&i.push("42",t.toString())}})),i}generateSplineEntity(e,t){const i=["0","SPLINE","5",this.getNextHandle(),"100","AcDbEntity"];i.push("8",t.layer||"0"),void 0!==t.color&&this.convertColorToDxf(t.color).forEach((e=>i.push(e.code,e.value)));const r=e.degree||3,s=e.controlPoints.length,n=s+r+1,o=e.closed?1:0;i.push("100","AcDbSpline","210","0","220","0","230","1","70",o.toString(),"71",r.toString(),"72",n.toString(),"73",s.toString(),"74","0");for(let e=0;e<n;e++)i.push("40",e.toString());return e.controlPoints.forEach((e=>{i.push("10",e[0].toString(),"20",e[1].toString(),"30","0")})),i}isClosedPolyline(e){if(e.length<3)return!1;const t=e[0],i=e[e.length-1];return Math.abs(t[0]-i[0])<1e-10&&Math.abs(t[1]-i[1])<1e-10}getNextHandle(){return(++this.entityHandle).toString(16).toUpperCase()}convertColorToDxf(e){if(/^\d+$/.test(e)){const t=parseInt(e,10);if(t>=1&&t<=255)return[{code:"62",value:e}]}if(e.startsWith("#")){const t=e.substring(1);if(6===t.length)return[{code:"62",value:"256"},{code:"420",value:(65536*parseInt(t.substring(0,2),16)+256*parseInt(t.substring(2,4),16)+parseInt(t.substring(4,6),16)).toString()}]}return[{code:"62",value:"7"}]}}class Je{constructor(){this.dxfGenerator=new Qe}lineSegment(e){return e}arcSegment(e){return e}circleSegment(e){return e}polylineSegment(e){return e}splineSegment(e){return e}path(e){return e}pathsPart(e){return e}dxfCreate(e){return this.dxfGenerator.generateDxf(e)}}class Ke{constructor(){this.dxf=new Je}}class et{constructor(){this.geometryHelper=new Ye,this.math=new He,this.vector=new je(this.math,this.geometryHelper),this.transforms=new qe(this.vector,this.math),this.lists=new We,this.point=new Ge(this.geometryHelper,this.transforms,this.vector,this.lists),this.line=new Xe(this.vector,this.point,this.geometryHelper),this.polyline=new $e(this.vector,this.point,this.line,this.geometryHelper),this.textService=new ze(this.point),this.mesh=new Ze(this.vector,this.polyline),this.io=new Ke}}class tt{constructor(e,t,i,r){this.base=e,this.shapeGettersService=t,this.edgesService=i,this.wiresService=r}shapeToDxfPaths(e){const t=this.shapeGettersService.getWires({shape:e.shape}),i=[];return t.forEach((t=>{const r=this.edgesService.getEdgesAlongWire({shape:t});if(0===r.length)return;const s=this.wiresService.isWireClosed({shape:t}),n=[];let o=0;for(;o<r.length;){const t=r[o];if(this.edgesService.isEdgeCircular({shape:t})){const e=this.edgesService.getEdgeBounds(t),i=e.uMax-e.uMin;if(Math.abs(i-2*Math.PI)<.01){const e=this.edgesService.getCircularEdgeCenterPoint({shape:t}),i=this.edgesService.getCircularEdgeRadius({shape:t});n.push({center:[e[0],e[2]],radius:i}),o++;continue}}const i=this.tryCreateUnifiedPolyline(r,o,e,s&&0===o);i?(n.push(i.polyline),o=i.nextIndex):o++}n.length>0&&i.push({segments:n})})),i}dxfPathsWithLayer(e){return{layer:e.layer,color:e.color,paths:e.paths}}dxfCreate(e){const t={dxfPathsParts:e.pathsParts};return this.base.io.dxf.dxfCreate(t)}tryCreateUnifiedPolyline(e,t,i,r){const s=[],n=[];let o=t;for(;o<e.length;){const t=e[o],r=this.edgesService.isEdgeLinear({shape:t}),a=this.edgesService.isEdgeCircular({shape:t});if(a){const e=this.edgesService.getEdgeBounds(t),i=e.uMax-e.uMin;if(Math.abs(i-2*Math.PI)<.01)break}const c=this.edgesService.startPointOnEdge({shape:t}),h=this.edgesService.endPointOnEdge({shape:t});if(r)s.push([c[0],c[2]]),n.push(0);else if(a){const e=this.edgesService.getCircularEdgeCenterPoint({shape:t});s.push([c[0],c[2]]);const i=Math.atan2(c[2]-e[2],c[0]-e[0]),r=Math.atan2(h[2]-e[2],h[0]-e[0]);let o=r-i;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;const a=h[0]-c[0],l=h[2]-c[2],d=e[0]-c[0],u=a*(e[2]-c[2])-l*d,p=Math.abs(o);let f;if(Math.abs(u)<1e-10){const s=(i+r)/2,n=this.edgesService.getCircularEdgeRadius({shape:t}),o=[e[0]+n*Math.cos(s),e[2]+n*Math.sin(s)],h=a*(o[1]-c[2])-l*(o[0]-c[0]);f=Math.sign(h)}else f=Math.sign(u);const v=f*Math.tan(p/4);n.push(v)}else{const e=this.edgesService.edgeToPoints({shape:t,angularDeflection:i.angularDeflection,curvatureDeflection:i.curvatureDeflection,minimumOfPoints:i.minimumOfPoints,uTolerance:i.uTolerance,minimumLength:i.minimumLength});for(let t=0;t<e.length-1;t++)s.push([e[t][0],e[t][2]]),n.push(0)}o++}if(o>t&&!r){const t=e[o-1],i=this.edgesService.endPointOnEdge({shape:t});s.push([i[0],i[2]]),n.push(0)}return o<=t||s.length<2?null:{polyline:{points:s,closed:r,bulges:n},nextIndex:o}}tryCreatePolylineWithBulges(e,t,i){const r=e[t],s=this.edgesService.isEdgeLinear({shape:r}),n=this.edgesService.isEdgeCircular({shape:r});if(!s&&!n)return null;if(n){const e=this.edgesService.getEdgeBounds(r),t=e.uMax-e.uMin;if(Math.abs(t-2*Math.PI)<.01)return null}const o=[],a=[];let c=t;for(;c<e.length;){const t=e[c],i=this.edgesService.isEdgeLinear({shape:t}),r=this.edgesService.isEdgeCircular({shape:t});if(!i&&!r)break;if(r){const e=this.edgesService.getEdgeBounds(t),i=e.uMax-e.uMin;if(Math.abs(i-2*Math.PI)<.01)break}const s=this.edgesService.startPointOnEdge({shape:t});if(o.push([s[0],s[2]]),i)a.push(0);else{const e=this.edgesService.endPointOnEdge({shape:t}),i=this.edgesService.getCircularEdgeCenterPoint({shape:t}),r=Math.atan2(s[2]-i[2],s[0]-i[0]);let n=Math.atan2(e[2]-i[2],e[0]-i[0])-r;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;const o=Math.tan(n/4);a.push(o)}c++}if(c>t){const t=e[c-1],i=this.edgesService.endPointOnEdge({shape:t});o.push([i[0],i[2]]),a.push(0)}return c-t<2?null:{polyline:{points:o,closed:i,bulges:a},nextIndex:c}}}class it{constructor(e,t,i){this.vecHelper=e,this.shapesHelperService=t,this.occ=i,this.base=new et,this.occRefReturns=new Se(i),this.iteratorService=new ye(i),this.enumService=new be(i),this.converterService=new we(i),this.entitiesService=new Ee(i),this.shapeGettersService=new Ce(i,this.enumService,this.iteratorService),this.geomService=new De(i,this.vecHelper,this.entitiesService),this.transformsService=new Te(i,this.converterService,this.entitiesService,this.vecHelper),this.verticesService=new Re(i,this.entitiesService,this.converterService,this.shapeGettersService,this.wiresService,this.booleansService),this.edgesService=new ke(i,this.occRefReturns,this.shapeGettersService,this.entitiesService,this.iteratorService,this.converterService,this.enumService,this.geomService,this.transformsService,this.vecHelper),this.wiresService=new Fe(i,this.occRefReturns,this.base,this.shapesHelperService,this.shapeGettersService,this.transformsService,this.enumService,this.entitiesService,this.converterService,this.geomService,this.edgesService,this.vecHelper,this.filletsService,this.operationsService),this.dimensionsService=new Ie(this.base,this.transformsService,this.converterService,this.entitiesService,this.edgesService,this.wiresService),this.meshingService=new Ue(i,this.shapeGettersService,this.transformsService,this.edgesService,this.facesService,this.wiresService,this.base),this.booleansService=new Pe(i,this.shapeGettersService),this.verticesService.wiresService=this.wiresService,this.verticesService.booleansService=this.booleansService,this.facesService=new _e(i,this.occRefReturns,this.entitiesService,this.enumService,this.shapeGettersService,this.converterService,this.booleansService,this.wiresService,this.transformsService,this.vecHelper,this.base,this.filletsService),this.meshingService.facesService=this.facesService,this.shellsService=new Me(i,this.shapeGettersService,this.converterService,this.facesService),this.solidsService=new Be(i,this.shapeGettersService,this.facesService,this.enumService,this.entitiesService,this.converterService,this.transformsService,this.vecHelper),this.operationsService=new xe(i,this.enumService,this.entitiesService,this.converterService,this.booleansService,this.shapeGettersService,this.edgesService,this.transformsService,this.vecHelper,this.wiresService,this.facesService,this.solidsService,this.shellsService),this.wiresService.operationsService=this.operationsService,this.filletsService=new Le(i,this.vecHelper,this.iteratorService,this.converterService,this.entitiesService,this.transformsService,this.shapeGettersService,this.edgesService,this.operationsService,this.facesService),this.wiresService.filletsService=this.filletsService,this.facesService.filletsService=this.filletsService,this.dxfService=new tt(this.base,this.shapeGettersService,this.edgesService,this.wiresService)}surfaceFromFace(e){const t=e.shape;return this.occ.BRep_Tool.Surface_2(t).get()}}class rt{constructor(e,t){this.occ=e,this.och=t}union(e){return this.och.booleansService.union(e)}difference(e){return this.och.booleansService.difference(e)}intersection(e){const t=this.och.booleansService.intersection(e);return this.och.converterService.makeCompound({shapes:t})}meshMeshIntersectionWires(e){return this.och.meshingService.meshMeshIntersectionWires(e)}meshMeshIntersectionPoints(e){return this.och.meshingService.meshMeshIntersectionPoints(e)}meshMeshIntersectionOfShapesWires(e){return this.och.meshingService.meshMeshIntersectionOfShapesWires(e)}meshMeshIntersectionOfShapesPoints(e){return this.och.meshingService.meshMeshIntersectionOfShapesPoints(e)}}class st{constructor(e,t){this.occ=e,this.och=t}saveShapeSTEP(e){const t=e.shape;let i;if(e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});e.fromRightHanded?i=t:(i=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete())}const r=new this.occ.STEPControl_Writer_1;let s;s=i||t;const n=new this.occ.Message_ProgressRange_1;let o,a;try{o=r.Transfer(s,this.occ.STEPControl_StepModelType.STEPControl_AsIs,!0,n)}catch(e){throw new Error("Failed when calling writer.Transfer.")}if(o!==this.occ.IFSelect_ReturnStatus.IFSelect_RetDone)throw new Error("Failed when transfering to step writer.");if(r.Write("x")!==this.occ.IFSelect_ReturnStatus.IFSelect_RetDone)throw new Error("Failed when writing step file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),a=e}return i&&i.delete(),n.delete(),a}saveShapeStl(e){const t=e.shape;let i;if(this.occ.BRepTools.Clean(t,!0),e.adjustYtoZ){const t=this.och.transformsService.rotate({shape:e.shape,axis:[1,0,0],angle:-90});i=this.och.transformsService.mirrorAlongNormal({shape:t,origin:[0,0,0],normal:[0,0,1]}),t.delete()}const r=new this.occ.StlAPI_Writer;let s;s=i||t;const n=new this.occ.Message_ProgressRange_1;let o;const a=new this.occ.BRepMesh_IncrementalMesh_2(s,e.precision,!1,.5,!1);if(!r.Write(s,"x",n))throw new Error("Failed when writing stl file.");{const e=this.occ.FS.readFile("/x",{encoding:"utf8"});this.occ.FS.unlink("/x"),o=e}return i&&i.delete(),n.delete(),a&&a.Delete(),o}loadSTEPorIGES(e){const t=e.fileName,i=e.filetext,r=(()=>{switch(t.toLowerCase().split(".").pop()){case"step":case"stp":return"step";case"iges":case"igs":return"iges";default:return}})();let s;if(this.occ.FS.createDataFile("/",`file.${r}`,i,!0,!0,!0),"step"===r)s=new this.occ.STEPControl_Reader_1;else{if("iges"!==r)return void console.error("opencascade can't parse this extension! (yet)");s=new this.occ.IGESControl_Reader_1}if(s.ReadFile(`file.${r}`)===this.occ.IFSelect_ReturnStatus.IFSelect_RetDone){const t=new this.occ.Message_ProgressRange_1;s.TransferRoots(t),t.delete();let i,n=s.OneShape();if(e.adjustZtoY){const e=this.och.transformsService.mirrorAlongNormal({shape:n,origin:[0,0,0],normal:[0,0,1]});i=this.och.transformsService.rotate({shape:e,axis:[1,0,0],angle:90}),e.delete()}return this.occ.FS.unlink(`/file.${r}`),i&&(n.delete(),n=i),n}console.error("Something in OCCT went wrong trying to read "+t)}parseStepAssembly(e){e.fileName;const t=e.filetext;this.occ.FS.createDataFile("/","step_file.step",t,!0,!0,!0);try{const e=this.occ.XCAFApp_Application.GetApplication(),t=new this.occ.TCollection_ExtendedString_2("MDTV-XCAF",!0),i=new this.occ.Handle_TDocStd_Document_1;e.get().NewDocument_2(t,i),i.get();const r=new this.occ.STEPCAFControl_Reader_1;if(r.SetColorMode(!0),r.SetNameMode(!0),r.SetLayerMode(!0),r.SetPropsMode(!0),r.ReadFile("step_file.step")===this.occ.IFSelect_ReturnStatus.IFSelect_RetDone){const e=new this.occ.Message_ProgressRange_1,s=r.Transfer_1(i,e);if(e.delete(),s)return r.delete(),t.delete(),i.delete(),this.occ.FS.unlink("/step_file.step"),{};throw new Error("Failed to transfer STEP data to XCAF document")}throw new Error("Failed to read STEP file")}catch(e){throw this.occ.FS.unlink("/step_file.step"),e}}shapeToDxfPaths(e){return this.och.dxfService.shapeToDxfPaths(e)}dxfPathsWithLayer(e){return this.och.dxfService.dxfPathsWithLayer(e)}dxfCreate(e){return this.och.dxfService.dxfCreate(e)}}class nt{constructor(e,t){this.occ=e,this.och=t}closestPointsBetweenTwoShapes(e){return this.och.operationsService.closestPointsBetweenTwoShapes(e.shape1,e.shape2)}closestPointsOnShapeFromPoints(e){return this.och.operationsService.closestPointsOnShapeFromPoints(e)}closestPointsOnShapesFromPoints(e){return this.och.operationsService.closestPointsOnShapesFromPoints(e)}distancesToShapeFromPoints(e){return this.och.operationsService.distancesToShapeFromPoints(e)}boundingBoxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e)}boundingBoxMinOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).min}boundingBoxMaxOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).max}boundingBoxCenterOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).center}boundingBoxSizeOfShape(e){return this.och.operationsService.boundingBoxOfShape(e).size}boundingBoxShapeOfShape(e){return this.och.operationsService.boundingBoxShapeOfShape(e)}boundingSphereOfShape(e){return this.och.operationsService.boundingSphereOfShape(e)}boundingSphereCenterOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).center}boundingSphereRadiusOfShape(e){return this.och.operationsService.boundingSphereOfShape(e).radius}boundingSphereShapeOfShape(e){return this.och.operationsService.boundingSphereShapeOfShape(e)}loft(e){return this.och.operationsService.loft(e)}loftAdvanced(e){return this.och.operationsService.loftAdvanced(e)}offset(e){return this.och.operationsService.offset(e)}offsetAdv(e){return this.och.operationsService.offsetAdv(e)}offset3DWire(e){return this.och.operationsService.offset3DWire(e)}extrudeShapes(e){return this.och.operationsService.extrudeShapes(e)}extrude(e){return this.och.operationsService.extrude(e)}splitShapeWithShapes(e){return this.och.operationsService.splitShapeWithShapes(e)}revolve(e){return this.och.operationsService.revolve(e)}rotatedExtrude(e){return this.och.operationsService.rotatedExtrude(e)}pipe(e){return this.och.operationsService.pipe(e)}pipePolylineWireNGon(e){return this.och.operationsService.pipePolylineWireNGon(e)}pipeWireCylindrical(e){return this.och.operationsService.pipeWireCylindrical(e)}pipeWiresCylindrical(e){return this.och.operationsService.pipeWiresCylindrical(e)}makeThickSolidSimple(e){return this.och.operationsService.makeThickSolidSimple(e)}makeThickSolidByJoin(e){return this.och.operationsService.makeThickSolidByJoin(e)}slice(e){return this.och.operationsService.slice(e)}sliceInStepPattern(e){return this.och.operationsService.sliceInStepPattern(e)}}class ot{constructor(e,t){this.occ=e,this.och=t}transform(e){const t=this.scale({shape:e.shape,factor:e.scaleFactor}),i=this.rotate({shape:t,axis:e.rotationAxis,angle:e.rotationAngle}),r=this.translate({shape:i,translation:e.translation});return t.delete(),i.delete(),r}rotate(e){return this.och.transformsService.rotate(e)}rotateAroundCenter(e){const t=this.translate({shape:e.shape,translation:e.center.map((e=>-e))}),i=e.angle,r=this.rotate({shape:t,axis:e.axis,angle:i}),s=this.translate({shape:r,translation:e.center});return r.delete(),t.delete(),s}align(e){return this.och.transformsService.align(e)}alignNormAndAxis(e){return this.och.transformsService.alignNormAndAxis(e)}alignAndTranslate(e){return this.och.transformsService.alignAndTranslate(e)}translate(e){return this.och.transformsService.translate(e)}scale(e){const t=new this.occ.gp_Trsf_1,i=this.och.entitiesService.gpPnt([0,0,0]);t.SetScale(i,e.factor);const r=new this.occ.BRepBuilderAPI_Transform_2(e.shape,t,!0),s=r.Shape(),n=this.och.converterService.getActualTypeOfShape(s);return i.delete(),t.delete(),r.delete(),s.delete(),n}scale3d(e){return this.och.transformsService.scale3d(e)}mirror(e){return this.och.transformsService.mirror(e)}mirrorAlongNormal(e){return this.och.transformsService.mirrorAlongNormal(e)}transformShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations,e.rotationAxes,e.rotationAngles,e.scaleFactors]),e.shapes.map(((t,i)=>this.transform({shape:t,translation:e.translations[i],rotationAxis:e.rotationAxes[i],rotationAngle:e.rotationAngles[i],scaleFactor:e.scaleFactors[i]})))}rotateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,i)=>this.rotate({shape:t,axis:e.axes[i],angle:e.angles[i]})))}rotateAroundCenterShapes(e){return this.checkIfListsEqualLength([e.shapes,e.axes,e.angles]),e.shapes.map(((t,i)=>this.rotateAroundCenter({shape:t,axis:e.axes[i],angle:e.angles[i],center:e.centers[i]})))}alignShapes(e){return this.checkIfListsEqualLength([e.shapes,e.fromOrigins,e.fromDirections,e.toOrigins,e.toDirections]),e.shapes.map(((t,i)=>this.align({shape:t,fromOrigin:e.fromOrigins[i],fromDirection:e.fromDirections[i],toOrigin:e.toOrigins[i],toDirection:e.toDirections[i]})))}alignAndTranslateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.centers,e.directions]),e.shapes.map(((t,i)=>this.alignAndTranslate({shape:t,center:e.centers[i],direction:e.directions[i]})))}translateShapes(e){return this.checkIfListsEqualLength([e.shapes,e.translations]),e.shapes.map(((t,i)=>this.translate({shape:t,translation:e.translations[i]})))}scaleShapes(e){return this.checkIfListsEqualLength([e.shapes,e.factors]),e.shapes.map(((t,i)=>this.scale({shape:t,factor:e.factors[i]})))}scale3dShapes(e){return this.checkIfListsEqualLength([e.shapes,e.scales,e.centers]),e.shapes.map(((t,i)=>this.scale3d({shape:t,scale:e.scales[i],center:e.centers[i]})))}mirrorShapes(e){return this.checkIfListsEqualLength([e.shapes,e.directions,e.origins]),e.shapes.map(((t,i)=>this.mirror({shape:t,origin:e.origins[i],direction:e.directions[i]})))}mirrorAlongNormalShapes(e){return this.checkIfListsEqualLength([e.shapes,e.normals,e.origins]),e.shapes.map(((t,i)=>this.mirrorAlongNormal({shape:t,normal:e.normals[i],origin:e.origins[i]})))}checkIfListsEqualLength(e){const t=e[0].length;if(e.some((e=>e.length!==t)))throw new Error("Some of the list lengths are not the same. For this operation to work all lists need to be of equal length")}}class at{constructor(e,t){this.occ=e,this.och=t}filletEdges(e){return this.och.filletsService.filletEdges(e)}filletEdgesList(e){return this.och.filletsService.filletEdgesList(e)}filletEdgesListOneRadius(e){return this.och.filletsService.filletEdgesListOneRadius(e)}filletEdgeVariableRadius(e){return this.och.filletsService.filletEdgeVariableRadius(e)}filletEdgesVariableRadius(e){return this.och.filletsService.filletEdgesVariableRadius(e)}filletEdgesSameVariableRadius(e){return this.och.filletsService.filletEdgesSameVariableRadius(e)}chamferEdges(e){return this.och.filletsService.chamferEdges(e)}chamferEdgesList(e){return this.och.filletsService.chamferEdgesList(e)}chamferEdgeDistAngle(e){return this.och.filletsService.chamferEdgeDistAngle(e)}chamferEdgesDistAngle(e){return this.och.filletsService.chamferEdgesDistAngle(e)}chamferEdgesDistsAngles(e){return this.och.filletsService.chamferEdgesDistsAngles(e)}chamferEdgeTwoDistances(e){return this.och.filletsService.chamferEdgeTwoDistances(e)}chamferEdgesTwoDistances(e){return this.och.filletsService.chamferEdgesTwoDistances(e)}chamferEdgesTwoDistancesLists(e){return this.och.filletsService.chamferEdgesTwoDistancesLists(e)}filletTwoEdgesInPlaneIntoAWire(e){const t=this.och.entitiesService.gpPln(e.planeOrigin,e.planeDirection),i=new this.occ.ChFi2d_FilletAlgo_3(e.edge1,e.edge2,t);i.Perform(e.radius);const r=this.och.entitiesService.gpPnt(e.planeOrigin),s=new this.occ.TopoDS_Edge,n=new this.occ.TopoDS_Edge;let o=-1;void 0!==e.solution&&(o=e.solution);const a=i.Result(r,s,n,o),c=this.och.converterService.combineEdgesAndWiresIntoAWire({shapes:[s,a,n]});return i.delete(),r.delete(),t.delete(),s.delete(),n.delete(),a.delete(),c}fillet3DWires(e){return e.shapes.map((t=>this.och.filletsService.fillet3DWire({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes,direction:e.direction})))}fillet3DWire(e){return this.och.filletsService.fillet3DWire(e)}fillet2d(e){return this.och.filletsService.fillet2d(e)}fillet2dShapes(e){return e.shapes.map((t=>this.och.filletsService.fillet2d({shape:t,radius:e.radius,radiusList:e.radiusList,indexes:e.indexes})))}}class ct{constructor(e,t){this.occ=e,this.och=t}simpleLinearLengthDimension(e){return this.och.dimensionsService.simpleLinearLengthDimension(e)}simpleAngularDimension(e){return this.och.dimensionsService.simpleAngularDimension(e)}pinWithLabel(e){return this.och.dimensionsService.pinWithLabel(e)}}class ht{constructor(e,t){this.occ=e,this.och=t}fixEdgeOrientationsAlongWire(e){return this.och.edgesService.fixEdgeOrientationsAlongWire(e)}basicShapeRepair(e){const t=new this.occ.ShapeFix_Shape_1;t.Init(e.shape),t.SetPrecision(e.precision),t.SetMaxTolerance(e.maxTolerance),t.SetMinTolerance(e.minTolerance);const i=new this.occ.Message_ProgressRange_1;t.Perform(i),i.delete();const r=t.Shape();return t.delete(),r}fixSmallEdgeOnWire(e){const t=new this.occ.ShapeFix_Wire_1;return t.Load_1(e.shape),t.FixSmall_1(e.lockvtx,e.precsmall),t.Perform(),t.Wire()}}class lt{constructor(e,t){this.occ=e,this.och=t,this.shapes=new me(e,t),this.geom=new ce(e,t),this.transforms=new ot(e,t),this.operations=new nt(e,t),this.booleans=new rt(e,t),this.fillets=new at(e,t),this.shapeFix=new ht(e,t),this.dimensions=new ct(e,t),this.io=new st(e,t)}shapeFacesToPolygonPoints(e){return this.och.meshingService.shapeFacesToPolygonPoints(e)}shapesToMeshes(e){return e.shapes.map((t=>this.shapeToMesh({shape:t,precision:e.precision,adjustYtoZ:e.adjustYtoZ})))}shapeToMesh(e){return this.och.meshingService.shapeToMesh(e)}}class dt{static parse(e,t,i){const r=[e];let s=0;for(;r.length>0;){const e=r.pop();if("object"==typeof e&&null!==e)if(Array.isArray(e))for(let t=0;t<e.length;t++)r.push(e[t]);else{if(Object.keys(e).includes("shapes")){const r=e.shapes;if("object"==typeof r&&null!==r)for(const n in r){const o=r[n];if(o){if("string"!=typeof r[n]){let a;a=e.id?`${i}-${e.id}-${n}-${s}`:`${i}-${n}-${s}`,t.push({id:a,shape:o}),r[n]=a}s++}}}for(const t in e)r.push(e[t])}}return e}static alignAndTranslateShapesWithChildren(e,t,i,r,s,n=[1,1,1]){const o=dt.deepCopy(e);return o.rotation=i,o.direction=r,o.center=s,o.scale=n,o.shapes&&Object.keys(o.shapes).forEach((e=>{const a=o.shapes[e];if(a){const c=t.rotate({shape:a,angle:i,axis:[0,1,0]}),h=t.alignAndTranslate({shape:c,direction:r,center:s});1!==n[0]||1!==n[1]||1!==n[2]?(o.shapes[e]=t.scale3d({shape:h,scale:n,center:s}),h.delete()):o.shapes[e]=h,c.delete()}})),Object.keys(o).forEach((e=>{const a=o[e];a&&Array.isArray(a)?o[e]=a.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.alignAndTranslateShapesWithChildren(e,t,i,r,s,n):e)):a&&"object"==typeof a&&null!==a&&a.shapes&&(o[e]=this.alignAndTranslateShapesWithChildren(a,t,i,r,s,n))})),o}static deleteAllShapes(e){Object.keys(e.shapes).forEach((t=>{e.shapes[t].delete()})),Object.keys(e).forEach((t=>{const i=e[t];i&&Array.isArray(i)?i.forEach((e=>{e&&"object"==typeof e&&null!==e&&e.shapes&&this.deleteAllShapes(e)})):i&&"object"==typeof i&&null!==i&&i.shapes&&this.deleteAllShapes(i)}))}static deepCopy(e){const t=Object.assign(Object.assign({},e),{shapes:Object.assign({},e.shapes)});return Object.keys(e).forEach((i=>{const r=e[i];r&&"object"==typeof r&&null!==r?r.shapes&&(t[i]=this.deepCopy(r)):r&&Array.isArray(r)&&(t[i]=r.map((e=>e&&"object"==typeof e&&null!==e&&e.shapes?this.deepCopy(e):e)))})),t}}var ut,pt=(ut=(ut="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,i){t=e,r=i}));var s,n,o,a,c,h,l=Object.assign({},e),d=[],u="./this.program",p=(e,t)=>{throw t},f="object"==typeof window,v="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";g?(m=v?i(699).dirname(m)+"/":"//",h=()=>{c||(a=i(439),c=i(699))},s=function(e,t){return h(),e=c.normalize(e),a.readFileSync(e,t?void 0:"utf8")},o=e=>{var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},n=(e,t,i)=>{h(),e=c.normalize(e),a.readFile(e,(function(e,r){e?i(e):t(r.buffer)}))},process.argv.length>1&&(u=process.argv[1].replace(/\\/g,"/")),d=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Si))throw e})),process.on("unhandledRejection",(function(e){throw e})),p=(e,t)=>{if(te())throw process.exitCode=e,t;var i;(i=t)instanceof Si||y("exiting due to exception: "+i),process.exit(e)},e.inspect=function(){return"[Emscripten Module object]"}):(f||v)&&(v?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),ut&&(m=ut),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),n=(e,t,i)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):i()},r.onerror=i,r.send(null)});var S=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);Object.assign(e,l),l=null,e.arguments&&(d=e.arguments),e.thisProgram&&(u=e.thisProgram),e.quit&&(p=e.quit);var b;function w(e){w.shown||(w.shown={}),w.shown[e]||(w.shown[e]=1,y(e))}e.wasmBinary&&(b=e.wasmBinary);var E,x=e.noExitRuntime||!0;"object"!=typeof WebAssembly&&ae("no native wasm support detected");var T,P=!1;function C(e,t){e||ae(t)}var k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,i){for(var r=(t>>>=0)+i,s=t;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&k)return k.decode(e.subarray(t,s));for(var n="";t<s;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var c=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|c:(7&o)<<18|a<<12|c<<6|63&e[t++])<65536)n+=String.fromCharCode(o);else{var h=o-65536;n+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else n+=String.fromCharCode((31&o)<<6|a)}else n+=String.fromCharCode(o)}return n}function O(e,t){return(e>>>=0)?D(L,e,t):""}function A(e,t,i,r){if(!(r>0))return 0;for(var s=i>>>=0,n=i+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(i>=n)break;t[i++>>>0]=a}else if(a<=2047){if(i+1>=n)break;t[i++>>>0]=192|a>>6,t[i++>>>0]=128|63&a}else if(a<=65535){if(i+2>=n)break;t[i++>>>0]=224|a>>12,t[i++>>>0]=128|a>>6&63,t[i++>>>0]=128|63&a}else{if(i+3>=n)break;t[i++>>>0]=240|a>>18,t[i++>>>0]=128|a>>12&63,t[i++>>>0]=128|a>>6&63,t[i++>>>0]=128|63&a}}return t[i>>>0]=0,i-s}function F(e,t,i){return A(e,L,t,i)}function _(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var R,M,L,B,I,U,W,N,H,G="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function V(e,t){for(var i=e,r=i>>1,s=r+t/2;!(r>=s)&&I[r>>>0];)++r;if((i=r<<1)-e>32&&G)return G.decode(L.subarray(e>>>0,i>>>0));for(var n="",o=0;!(o>=t/2);++o){var a=B[e+2*o>>>1];if(0==a)break;n+=String.fromCharCode(a)}return n}function z(e,t,i){if(void 0===i&&(i=2147483647),i<2)return 0;for(var r=t,s=(i-=2)<2*e.length?i/2:e.length,n=0;n<s;++n){var o=e.charCodeAt(n);B[t>>>1]=o,t+=2}return B[t>>>1]=0,t-r}function j(e){return 2*e.length}function q(e,t){for(var i=0,r="";!(i>=t/4);){var s=U[e+4*i>>>2];if(0==s)break;if(++i,s>=65536){var n=s-65536;r+=String.fromCharCode(55296|n>>10,56320|1023&n)}else r+=String.fromCharCode(s)}return r}function Y(e,t,i){if(void 0===i&&(i=2147483647),i<4)return 0;for(var r=t>>>=0,s=r+i-4,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),U[t>>>2]=o,(t+=4)+4>s)break}return U[t>>>2]=0,t-r}function X(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&++i,t+=4}return t}function $(e){var t=_(e)+1,i=di(t);return i&&A(e,M,i,t),i}function Z(t){R=t,e.HEAP8=M=new Int8Array(t),e.HEAP16=B=new Int16Array(t),e.HEAP32=U=new Int32Array(t),e.HEAPU8=L=new Uint8Array(t),e.HEAPU16=I=new Uint16Array(t),e.HEAPU32=W=new Uint32Array(t),e.HEAPF32=N=new Float32Array(t),e.HEAPF64=H=new Float64Array(t)}e.INITIAL_MEMORY;var Q,J=[],K=[],ee=[];function te(){return x}var ie=0,re=null,se=null;function ne(t){ie++,e.monitorRunDependencies&&e.monitorRunDependencies(ie)}function oe(t){if(ie--,e.monitorRunDependencies&&e.monitorRunDependencies(ie),0==ie&&(null!==re&&(clearInterval(re),re=null),se)){var i=se;se=null,i()}}function ae(t){e.onAbort&&e.onAbort(t),y(t="Aborted("+t+")"),P=!0,T=1,t+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(t);throw r(i),i}var ce,he,le,de;function ue(e){return e.startsWith("data:application/octet-stream;base64,")}function pe(e){return e.startsWith("file://")}function fe(e){try{if(e==ce&&b)return new Uint8Array(b);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}function ve(t){for(;t.length>0;){var i=t.shift();if("function"!=typeof i){var r=i.func;"number"==typeof r?void 0===i.arg?me(r)():me(r)(i.arg):r(void 0===i.arg?null:i.arg)}else i(e)}}ue(ce="bitbybit-dev-occt.wasm")||(he=ce,ce=e.locateFile?e.locateFile(he,m):m+he);var ge=[];function me(e){var t=ge[e];return t||(e>=ge.length&&(ge.length=e+1),ge[e]=t=Q.get(e)),t}function Se(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){W[this.ptr+4>>>2]=e},this.get_type=function(){return W[this.ptr+4>>>2]},this.set_destructor=function(e){W[this.ptr+8>>>2]=e},this.get_destructor=function(){return W[this.ptr+8>>>2]},this.set_refcount=function(e){U[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,M[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=M[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,M[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=M[this.ptr+13>>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=U[this.ptr>>>2];U[this.ptr>>>2]=e+1},this.release_ref=function(){var e=U[this.ptr>>>2];return U[this.ptr>>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){W[this.ptr+16>>>2]=e},this.get_adjusted_ptr=function(){return W[this.ptr+16>>>2]},this.get_exception_ptr=function(){if(mi(this.get_type()))return W[this.excPtr>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var ye={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var i=0,r=e.length-1;r>=0;r--){var s=e[r];"."===s?e.splice(r,1):".."===s?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i;i--)e.unshift("..");return e},normalize:e=>{var t=ye.isAbs(e),i="/"===e.substr(-1);return(e=ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=ye.splitPath(e),i=t[0],r=t[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=ye.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return ye.normalize(e.join("/"))},join2:(e,t)=>ye.normalize(e+"/"+t)},be={resolve:function(){for(var e="",t=!1,i=arguments.length-1;i>=-1&&!t;i--){var r=i>=0?arguments[i]:Te.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=ye.isAbs(r)}return(t?"/":"")+(e=ye.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=be.resolve(e).substr(1),t=be.resolve(t).substr(1);for(var r=i(e.split("/")),s=i(t.split("/")),n=Math.min(r.length,s.length),o=n,a=0;a<n;a++)if(r[a]!==s[a]){o=a;break}var c=[];for(a=o;a<r.length;a++)c.push("..");return(c=c.concat(s.slice(o))).join("/")}},we={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){we.ttys[e]={input:[],output:[],ops:t},Te.registerDevice(e,we.stream_ops)},stream_ops:{open:function(e){var t=we.ttys[e.node.rdev];if(!t)throw new Te.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,i,r,s){if(!e.tty||!e.tty.ops.get_char)throw new Te.ErrnoError(60);for(var n=0,o=0;o<r;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new Te.ErrnoError(29)}if(void 0===a&&0===n)throw new Te.ErrnoError(6);if(null==a)break;n++,t[i+o]=a}return n&&(e.node.timestamp=Date.now()),n},write:function(e,t,i,r,s){if(!e.tty||!e.tty.ops.put_char)throw new Te.ErrnoError(60);try{for(var n=0;n<r;n++)e.tty.ops.put_char(e.tty,t[i+n])}catch(e){throw new Te.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),n}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(g){var i=Buffer.alloc(256),r=0;try{r=a.readSync(process.stdin.fd,i,0,256,-1)}catch(e){if(!e.toString().includes("EOF"))throw e;r=0}t=r>0?i.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=ci(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(S(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(S(D(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(y(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(y(D(e.output,0)),e.output=[])}}};function Ee(e){e=function(e,t){return 65536*Math.ceil(e/65536)}(e);var t=gi(65536,e);return t?(function(e,t){L.fill(0,e,e+t)}(t,e),t):0}var xe={ops_table:null,mount:function(e){return xe.createNode(null,"/",16895,0)},createNode:function(e,t,i,r){if(Te.isBlkdev(i)||Te.isFIFO(i))throw new Te.ErrnoError(63);xe.ops_table||(xe.ops_table={dir:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,lookup:xe.node_ops.lookup,mknod:xe.node_ops.mknod,rename:xe.node_ops.rename,unlink:xe.node_ops.unlink,rmdir:xe.node_ops.rmdir,readdir:xe.node_ops.readdir,symlink:xe.node_ops.symlink},stream:{llseek:xe.stream_ops.llseek}},file:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:{llseek:xe.stream_ops.llseek,read:xe.stream_ops.read,write:xe.stream_ops.write,allocate:xe.stream_ops.allocate,mmap:xe.stream_ops.mmap,msync:xe.stream_ops.msync}},link:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr,readlink:xe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:xe.node_ops.getattr,setattr:xe.node_ops.setattr},stream:Te.chrdev_stream_ops}});var s=Te.createNode(e,t,i,r);return Te.isDir(s.mode)?(s.node_ops=xe.ops_table.dir.node,s.stream_ops=xe.ops_table.dir.stream,s.contents={}):Te.isFile(s.mode)?(s.node_ops=xe.ops_table.file.node,s.stream_ops=xe.ops_table.file.stream,s.usedBytes=0,s.contents=null):Te.isLink(s.mode)?(s.node_ops=xe.ops_table.link.node,s.stream_ops=xe.ops_table.link.stream):Te.isChrdev(s.mode)&&(s.node_ops=xe.ops_table.chrdev.node,s.stream_ops=xe.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var i=e.contents?e.contents.length:0;if(!(i>=t)){t=Math.max(t,i*(i<1048576?2:1.125)>>>0),0!=i&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var i=e.contents;e.contents=new Uint8Array(t),i&&e.contents.set(i.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Te.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Te.isDir(e.mode)?t.size=4096:Te.isFile(e.mode)?t.size=e.usedBytes:Te.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&xe.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Te.genericErrors[44]},mknod:function(e,t,i,r){return xe.createNode(e,t,i,r)},rename:function(e,t,i){if(Te.isDir(e.mode)){var r;try{r=Te.lookupNode(t,i)}catch(e){}if(r)for(var s in r.contents)throw new Te.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=i,t.contents[i]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var i=Te.lookupNode(e,t);for(var r in i.contents)throw new Te.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var i in e.contents)e.contents.hasOwnProperty(i)&&t.push(i);return t},symlink:function(e,t,i){var r=xe.createNode(e,t,41471,0);return r.link=i,r},readlink:function(e){if(!Te.isLink(e.mode))throw new Te.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,i,r,s){var n=e.node.contents;if(s>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-s,r);if(o>8&&n.subarray)t.set(n.subarray(s,s+o),i);else for(var a=0;a<o;a++)t[i+a]=n[s+a];return o},write:function(e,t,i,r,s,n){if(t.buffer===M.buffer&&(n=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(n)return o.contents=t.subarray(i,i+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===s)return o.contents=t.slice(i,i+r),o.usedBytes=r,r;if(s+r<=o.usedBytes)return o.contents.set(t.subarray(i,i+r),s),r}if(xe.expandFileStorage(o,s+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(i,i+r),s);else for(var a=0;a<r;a++)o.contents[s+a]=t[i+a];return o.usedBytes=Math.max(o.usedBytes,s+r),r},llseek:function(e,t,i){var r=t;if(1===i?r+=e.position:2===i&&Te.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Te.ErrnoError(28);return r},allocate:function(e,t,i){xe.expandFileStorage(e.node,t+i),e.node.usedBytes=Math.max(e.node.usedBytes,t+i)},mmap:function(e,t,i,r,s){if(!Te.isFile(e.node.mode))throw new Te.ErrnoError(43);var n,o,a=e.node.contents;if(2&s||a.buffer!==R){if((i>0||i+t<a.length)&&(a=a.subarray?a.subarray(i,i+t):Array.prototype.slice.call(a,i,i+t)),o=!0,!(n=Ee(t)))throw new Te.ErrnoError(48);n>>>=0,M.set(a,n>>>0)}else o=!1,n=a.byteOffset;return{ptr:n,allocated:o}},msync:function(e,t,i,r,s){if(!Te.isFile(e.node.mode))throw new Te.ErrnoError(43);return 2&s||xe.stream_ops.write(e,t,0,r,i,!1),0}}},Te={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=be.resolve(Te.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Te.ErrnoError(32);for(var i=ye.normalizeArray(e.split("/").filter((e=>!!e)),!1),r=Te.root,s="/",n=0;n<i.length;n++){var o=n===i.length-1;if(o&&t.parent)break;if(r=Te.lookupNode(r,i[n]),s=ye.join2(s,i[n]),Te.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var a=0;Te.isLink(r.mode);){var c=Te.readlink(s);if(s=be.resolve(ye.dirname(s),c),r=Te.lookupPath(s,{recurse_count:t.recurse_count+1}).node,a++>40)throw new Te.ErrnoError(32)}}return{path:s,node:r}},getPath:e=>{for(var t;;){if(Te.isRoot(e)){var i=e.mount.mountpoint;return t?"/"!==i[i.length-1]?i+"/"+t:i+t:i}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var i=0,r=0;r<t.length;r++)i=(i<<5)-i+t.charCodeAt(r)|0;return(e+i>>>0)%Te.nameTable.length},hashAddNode:e=>{var t=Te.hashName(e.parent.id,e.name);e.name_next=Te.nameTable[t],Te.nameTable[t]=e},hashRemoveNode:e=>{var t=Te.hashName(e.parent.id,e.name);if(Te.nameTable[t]===e)Te.nameTable[t]=e.name_next;else for(var i=Te.nameTable[t];i;){if(i.name_next===e){i.name_next=e.name_next;break}i=i.name_next}},lookupNode:(e,t)=>{var i=Te.mayLookup(e);if(i)throw new Te.ErrnoError(i,e);for(var r=Te.hashName(e.id,t),s=Te.nameTable[r];s;s=s.name_next){var n=s.name;if(s.parent.id===e.id&&n===t)return s}return Te.lookup(e,t)},createNode:(e,t,i,r)=>{var s=new Te.FSNode(e,t,i,r);return Te.hashAddNode(s),s},destroyNode:e=>{Te.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=Te.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Te.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>Te.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate:(e,t)=>{try{return Te.lookupNode(e,t),20}catch(e){}return Te.nodePermissions(e,"wx")},mayDelete:(e,t,i)=>{var r;try{r=Te.lookupNode(e,t)}catch(e){return e.errno}var s=Te.nodePermissions(e,"wx");if(s)return s;if(i){if(!Te.isDir(r.mode))return 54;if(Te.isRoot(r)||Te.getPath(r)===Te.cwd())return 10}else if(Te.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Te.isLink(e.mode)?32:Te.isDir(e.mode)&&("r"!==Te.flagsToPermissionString(t)||512&t)?31:Te.nodePermissions(e,Te.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=Te.MAX_OPEN_FDS)=>{for(var i=e;i<=t;i++)if(!Te.streams[i])return i;throw new Te.ErrnoError(33)},getStream:e=>Te.streams[e],createStream:(e,t,i)=>{Te.FSStream||(Te.FSStream=function(){this.shared={}},Te.FSStream.prototype={},Object.defineProperties(Te.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new Te.FSStream,e);var r=Te.nextfd(t,i);return e.fd=r,Te.streams[r]=e,e},closeStream:e=>{Te.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=Te.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new Te.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{Te.devices[e]={stream_ops:t}},getDevice:e=>Te.devices[e],getMounts:e=>{for(var t=[],i=[e];i.length;){var r=i.pop();t.push(r),i.push.apply(i,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),Te.syncFSRequests++,Te.syncFSRequests>1&&y("warning: "+Te.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var i=Te.getMounts(Te.root.mount),r=0;function s(e){return Te.syncFSRequests--,t(e)}function n(e){if(e)return n.errored?void 0:(n.errored=!0,s(e));++r>=i.length&&s(null)}i.forEach((t=>{if(!t.type.syncfs)return n(null);t.type.syncfs(t,e,n)}))},mount:(e,t,i)=>{var r,s="/"===i,n=!i;if(s&&Te.root)throw new Te.ErrnoError(10);if(!s&&!n){var o=Te.lookupPath(i,{follow_mount:!1});if(i=o.path,r=o.node,Te.isMountpoint(r))throw new Te.ErrnoError(10);if(!Te.isDir(r.mode))throw new Te.ErrnoError(54)}var a={type:e,opts:t,mountpoint:i,mounts:[]},c=e.mount(a);return c.mount=a,a.root=c,s?Te.root=c:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),c},unmount:e=>{var t=Te.lookupPath(e,{follow_mount:!1});if(!Te.isMountpoint(t.node))throw new Te.ErrnoError(28);var i=t.node,r=i.mounted,s=Te.getMounts(r);Object.keys(Te.nameTable).forEach((e=>{for(var t=Te.nameTable[e];t;){var i=t.name_next;s.includes(t.mount)&&Te.destroyNode(t),t=i}})),i.mounted=null;var n=i.mount.mounts.indexOf(r);i.mount.mounts.splice(n,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,i)=>{var r=Te.lookupPath(e,{parent:!0}).node,s=ye.basename(e);if(!s||"."===s||".."===s)throw new Te.ErrnoError(28);var n=Te.mayCreate(r,s);if(n)throw new Te.ErrnoError(n);if(!r.node_ops.mknod)throw new Te.ErrnoError(63);return r.node_ops.mknod(r,s,t,i)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Te.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Te.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var i=e.split("/"),r="",s=0;s<i.length;++s)if(i[s]){r+="/"+i[s];try{Te.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,i)=>(void 0===i&&(i=t,t=438),t|=8192,Te.mknod(e,t,i)),symlink:(e,t)=>{if(!be.resolve(e))throw new Te.ErrnoError(44);var i=Te.lookupPath(t,{parent:!0}).node;if(!i)throw new Te.ErrnoError(44);var r=ye.basename(t),s=Te.mayCreate(i,r);if(s)throw new Te.ErrnoError(s);if(!i.node_ops.symlink)throw new Te.ErrnoError(63);return i.node_ops.symlink(i,r,e)},rename:(e,t)=>{var i,r,s=ye.dirname(e),n=ye.dirname(t),o=ye.basename(e),a=ye.basename(t);if(i=Te.lookupPath(e,{parent:!0}).node,r=Te.lookupPath(t,{parent:!0}).node,!i||!r)throw new Te.ErrnoError(44);if(i.mount!==r.mount)throw new Te.ErrnoError(75);var c,h=Te.lookupNode(i,o),l=be.relative(e,n);if("."!==l.charAt(0))throw new Te.ErrnoError(28);if("."!==(l=be.relative(t,s)).charAt(0))throw new Te.ErrnoError(55);try{c=Te.lookupNode(r,a)}catch(e){}if(h!==c){var d=Te.isDir(h.mode),u=Te.mayDelete(i,o,d);if(u)throw new Te.ErrnoError(u);if(u=c?Te.mayDelete(r,a,d):Te.mayCreate(r,a))throw new Te.ErrnoError(u);if(!i.node_ops.rename)throw new Te.ErrnoError(63);if(Te.isMountpoint(h)||c&&Te.isMountpoint(c))throw new Te.ErrnoError(10);if(r!==i&&(u=Te.nodePermissions(i,"w")))throw new Te.ErrnoError(u);Te.hashRemoveNode(h);try{i.node_ops.rename(h,r,a)}catch(e){throw e}finally{Te.hashAddNode(h)}}},rmdir:e=>{var t=Te.lookupPath(e,{parent:!0}).node,i=ye.basename(e),r=Te.lookupNode(t,i),s=Te.mayDelete(t,i,!0);if(s)throw new Te.ErrnoError(s);if(!t.node_ops.rmdir)throw new Te.ErrnoError(63);if(Te.isMountpoint(r))throw new Te.ErrnoError(10);t.node_ops.rmdir(t,i),Te.destroyNode(r)},readdir:e=>{var t=Te.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Te.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=Te.lookupPath(e,{parent:!0}).node;if(!t)throw new Te.ErrnoError(44);var i=ye.basename(e),r=Te.lookupNode(t,i),s=Te.mayDelete(t,i,!1);if(s)throw new Te.ErrnoError(s);if(!t.node_ops.unlink)throw new Te.ErrnoError(63);if(Te.isMountpoint(r))throw new Te.ErrnoError(10);t.node_ops.unlink(t,i),Te.destroyNode(r)},readlink:e=>{var t=Te.lookupPath(e).node;if(!t)throw new Te.ErrnoError(44);if(!t.node_ops.readlink)throw new Te.ErrnoError(28);return be.resolve(Te.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var i=Te.lookupPath(e,{follow:!t}).node;if(!i)throw new Te.ErrnoError(44);if(!i.node_ops.getattr)throw new Te.ErrnoError(63);return i.node_ops.getattr(i)},lstat:e=>Te.stat(e,!0),chmod:(e,t,i)=>{var r;if(!(r="string"==typeof e?Te.lookupPath(e,{follow:!i}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{Te.chmod(e,t,!0)},fchmod:(e,t)=>{var i=Te.getStream(e);if(!i)throw new Te.ErrnoError(8);Te.chmod(i.node,t)},chown:(e,t,i,r)=>{var s;if(!(s="string"==typeof e?Te.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:(e,t,i)=>{Te.chown(e,t,i,!0)},fchown:(e,t,i)=>{var r=Te.getStream(e);if(!r)throw new Te.ErrnoError(8);Te.chown(r.node,t,i)},truncate:(e,t)=>{if(t<0)throw new Te.ErrnoError(28);var i;if(!(i="string"==typeof e?Te.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);if(Te.isDir(i.mode))throw new Te.ErrnoError(31);if(!Te.isFile(i.mode))throw new Te.ErrnoError(28);var r=Te.nodePermissions(i,"w");if(r)throw new Te.ErrnoError(r);i.node_ops.setattr(i,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var i=Te.getStream(e);if(!i)throw new Te.ErrnoError(8);if(!(2097155&i.flags))throw new Te.ErrnoError(28);Te.truncate(i.node,t)},utime:(e,t,i)=>{var r=Te.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,i)})},open:(t,i,r)=>{if(""===t)throw new Te.ErrnoError(44);var s;if(r=void 0===r?438:r,r=64&(i="string"==typeof i?Te.modeStringToFlags(i):i)?4095&r|32768:0,"object"==typeof t)s=t;else{t=ye.normalize(t);try{s=Te.lookupPath(t,{follow:!(131072&i)}).node}catch(e){}}var n=!1;if(64&i)if(s){if(128&i)throw new Te.ErrnoError(20)}else s=Te.mknod(t,r,0),n=!0;if(!s)throw new Te.ErrnoError(44);if(Te.isChrdev(s.mode)&&(i&=-513),65536&i&&!Te.isDir(s.mode))throw new Te.ErrnoError(54);if(!n){var o=Te.mayOpen(s,i);if(o)throw new Te.ErrnoError(o)}512&i&&!n&&Te.truncate(s,0),i&=-131713;var a=Te.createStream({node:s,path:Te.getPath(s),flags:i,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!e.logReadFiles||1&i||(Te.readFiles||(Te.readFiles={}),t in Te.readFiles||(Te.readFiles[t]=1)),a},close:e=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Te.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,i)=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Te.ErrnoError(70);if(0!=i&&1!=i&&2!=i)throw new Te.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,i),e.ungotten=[],e.position},read:(e,t,i,r,s)=>{if(i>>>=0,r<0||s<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(1==(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.read)throw new Te.ErrnoError(28);var n=void 0!==s;if(n){if(!e.seekable)throw new Te.ErrnoError(70)}else s=e.position;var o=e.stream_ops.read(e,t,i,r,s);return n||(e.position+=o),o},write:(e,t,i,r,s,n)=>{if(i>>>=0,r<0||s<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.write)throw new Te.ErrnoError(28);e.seekable&&1024&e.flags&&Te.llseek(e,0,2);var o=void 0!==s;if(o){if(!e.seekable)throw new Te.ErrnoError(70)}else s=e.position;var a=e.stream_ops.write(e,t,i,r,s,n);return o||(e.position+=a),a},allocate:(e,t,i)=>{if(Te.isClosed(e))throw new Te.ErrnoError(8);if(t<0||i<=0)throw new Te.ErrnoError(28);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(!Te.isFile(e.node.mode)&&!Te.isDir(e.node.mode))throw new Te.ErrnoError(43);if(!e.stream_ops.allocate)throw new Te.ErrnoError(138);e.stream_ops.allocate(e,t,i)},mmap:(e,t,i,r,s)=>{if(2&r&&!(2&s)&&2!=(2097155&e.flags))throw new Te.ErrnoError(2);if(1==(2097155&e.flags))throw new Te.ErrnoError(2);if(!e.stream_ops.mmap)throw new Te.ErrnoError(43);return e.stream_ops.mmap(e,t,i,r,s)},msync:(e,t,i,r,s)=>(i>>>=0,e&&e.stream_ops.msync?e.stream_ops.msync(e,t,i,r,s):0),munmap:e=>0,ioctl:(e,t,i)=>{if(!e.stream_ops.ioctl)throw new Te.ErrnoError(59);return e.stream_ops.ioctl(e,t,i)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var i,r=Te.open(e,t.flags),s=Te.stat(e).size,n=new Uint8Array(s);return Te.read(r,n,0,s,0),"utf8"===t.encoding?i=D(n,0):"binary"===t.encoding&&(i=n),Te.close(r),i},writeFile:(e,t,i={})=>{i.flags=i.flags||577;var r=Te.open(e,i.flags,i.mode);if("string"==typeof t){var s=new Uint8Array(_(t)+1),n=A(t,s,0,s.length);Te.write(r,s,0,n,void 0,i.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Te.write(r,t,0,t.byteLength,void 0,i.canOwn)}Te.close(r)},cwd:()=>Te.currentPath,chdir:e=>{var t=Te.lookupPath(e,{follow:!0});if(null===t.node)throw new Te.ErrnoError(44);if(!Te.isDir(t.node.mode))throw new Te.ErrnoError(54);var i=Te.nodePermissions(t.node,"x");if(i)throw new Te.ErrnoError(i);Te.currentPath=t.path},createDefaultDirectories:()=>{Te.mkdir("/tmp"),Te.mkdir("/home"),Te.mkdir("/home/web_user")},createDefaultDevices:()=>{Te.mkdir("/dev"),Te.registerDevice(Te.makedev(1,3),{read:()=>0,write:(e,t,i,r,s)=>r}),Te.mkdev("/dev/null",Te.makedev(1,3)),we.register(Te.makedev(5,0),we.default_tty_ops),we.register(Te.makedev(6,0),we.default_tty1_ops),Te.mkdev("/dev/tty",Te.makedev(5,0)),Te.mkdev("/dev/tty1",Te.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(g)try{var t=i(725);return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){ae("randomDevice")}}();Te.createDevice("/dev","random",e),Te.createDevice("/dev","urandom",e),Te.mkdir("/dev/shm"),Te.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{Te.mkdir("/proc");var e=Te.mkdir("/proc/self");Te.mkdir("/proc/self/fd"),Te.mount({mount:()=>{var t=Te.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var i=+t,r=Te.getStream(i);if(!r)throw new Te.ErrnoError(8);var s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return s.parent=s,s}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?Te.createDevice("/dev","stdin",e.stdin):Te.symlink("/dev/tty","/dev/stdin"),e.stdout?Te.createDevice("/dev","stdout",null,e.stdout):Te.symlink("/dev/tty","/dev/stdout"),e.stderr?Te.createDevice("/dev","stderr",null,e.stderr):Te.symlink("/dev/tty1","/dev/stderr"),Te.open("/dev/stdin",0),Te.open("/dev/stdout",1),Te.open("/dev/stderr",1)},ensureErrnoError:()=>{Te.ErrnoError||(Te.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Te.ErrnoError.prototype=new Error,Te.ErrnoError.prototype.constructor=Te.ErrnoError,[44].forEach((e=>{Te.genericErrors[e]=new Te.ErrnoError(e),Te.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{Te.ensureErrnoError(),Te.nameTable=new Array(4096),Te.mount(xe,{},"/"),Te.createDefaultDirectories(),Te.createDefaultDevices(),Te.createSpecialDirectories(),Te.filesystems={MEMFS:xe}},init:(t,i,r)=>{Te.init.initialized=!0,Te.ensureErrnoError(),e.stdin=t||e.stdin,e.stdout=i||e.stdout,e.stderr=r||e.stderr,Te.createStandardStreams()},quit:()=>{Te.init.initialized=!1;for(var e=0;e<Te.streams.length;e++){var t=Te.streams[e];t&&Te.close(t)}},getMode:(e,t)=>{var i=0;return e&&(i|=365),t&&(i|=146),i},findObject:(e,t)=>{var i=Te.analyzePath(e,t);return i.exists?i.object:null},analyzePath:(e,t)=>{try{e=(r=Te.lookupPath(e,{follow:!t})).path}catch(e){}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Te.lookupPath(e,{parent:!0});i.parentExists=!0,i.parentPath=r.path,i.parentObject=r.node,i.name=ye.basename(e),r=Te.lookupPath(e,{follow:!t}),i.exists=!0,i.path=r.path,i.object=r.node,i.name=r.node.name,i.isRoot="/"===r.path}catch(e){i.error=e.errno}return i},createPath:(e,t,i,r)=>{e="string"==typeof e?e:Te.getPath(e);for(var s=t.split("/").reverse();s.length;){var n=s.pop();if(n){var o=ye.join2(e,n);try{Te.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,i,r,s)=>{var n=ye.join2("string"==typeof e?e:Te.getPath(e),t),o=Te.getMode(r,s);return Te.create(n,o)},createDataFile:(e,t,i,r,s,n)=>{var o=t;e&&(e="string"==typeof e?e:Te.getPath(e),o=t?ye.join2(e,t):e);var a=Te.getMode(r,s),c=Te.create(o,a);if(i){if("string"==typeof i){for(var h=new Array(i.length),l=0,d=i.length;l<d;++l)h[l]=i.charCodeAt(l);i=h}Te.chmod(c,146|a);var u=Te.open(c,577);Te.write(u,i,0,i.length,0,n),Te.close(u),Te.chmod(c,a)}return c},createDevice:(e,t,i,r)=>{var s=ye.join2("string"==typeof e?e:Te.getPath(e),t),n=Te.getMode(!!i,!!r);Te.createDevice.major||(Te.createDevice.major=64);var o=Te.makedev(Te.createDevice.major++,0);return Te.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,s,n)=>{for(var o=0,a=0;a<s;a++){var c;try{c=i()}catch(e){throw new Te.ErrnoError(29)}if(void 0===c&&0===o)throw new Te.ErrnoError(6);if(null==c)break;o++,t[r+a]=c}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,i,s,n)=>{for(var o=0;o<s;o++)try{r(t[i+o])}catch(e){throw new Te.ErrnoError(29)}return s&&(e.node.timestamp=Date.now()),o}}),Te.mkdev(s,n,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=ci(s(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Te.ErrnoError(29)}},createLazyFile:(e,t,i,r,s)=>{function n(){this.lengthKnown=!1,this.chunks=[]}if(n.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,i=e/this.chunkSize|0;return this.getter(i)[t]}},n.prototype.setDataGetter=function(e){this.getter=e},n.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",i,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+i+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),s=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,n=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;s||(o=r);var a=this;a.setDataGetter((e=>{var t=e*o,s=(e+1)*o-1;if(s=Math.min(s,r-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var s=new XMLHttpRequest;if(s.open("GET",i,!1),r!==o&&s.setRequestHeader("Range","bytes="+e+"-"+t),s.responseType="arraybuffer",s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.send(null),!(s.status>=200&&s.status<300||304===s.status))throw new Error("Couldn't load "+i+". Status: "+s.status);return void 0!==s.response?new Uint8Array(s.response||[]):ci(s.responseText||"",!0)})(t,s)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!n&&r||(o=r=1,r=this.getter(0).length,o=r,S("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!v)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new n;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:i};var c=Te.createFile(e,t,a,r,s);a.contents?c.contents=a.contents:a.url&&(c.contents=null,c.url=a.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var h={};function l(e,t,i,r,s){var n=e.node.contents;if(s>=n.length)return 0;var o=Math.min(n.length-s,r);if(n.slice)for(var a=0;a<o;a++)t[i+a]=n[s+a];else for(a=0;a<o;a++)t[i+a]=n.get(s+a);return o}return Object.keys(c.stream_ops).forEach((e=>{var t=c.stream_ops[e];h[e]=function(){return Te.forceLoadFile(c),t.apply(null,arguments)}})),h.read=(e,t,i,r,s)=>(Te.forceLoadFile(c),l(e,t,i,r,s)),h.mmap=(e,t,i,r,s)=>{Te.forceLoadFile(c);var n=Ee(t);if(!n)throw new Te.ErrnoError(48);return l(e,M,n,t,i),{ptr:n,allocated:!0}},c.stream_ops=h,c},createPreloadedFile:(e,t,i,r,s,o,a,c,h,l)=>{var d=t?be.resolve(ye.join2(e,t)):e;function u(i){function n(i){l&&l(),c||Te.createDataFile(e,t,i,r,s,h),o&&o(),oe()}Nt.handledByPreloadPlugin(i,d,n,(()=>{a&&a(),oe()}))||n(i)}ne(),"string"==typeof i?function(e,t,i,r){var s="al "+e;n(e,(function(t){C(t,'Loading data file "'+e+'" failed (no arrayBuffer).'),u(new Uint8Array(t)),s&&oe()}),(function(t){if(!i)throw'Loading data file "'+e+'" failed.';i()})),s&&ne()}(i,0,a):u(i)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,i)=>{t=t||(()=>{}),i=i||(()=>{});var r=Te.indexedDB();try{var s=r.open(Te.DB_NAME(),Te.DB_VERSION)}catch(e){return i(e)}s.onupgradeneeded=()=>{S("creating db"),s.result.createObjectStore(Te.DB_STORE_NAME)},s.onsuccess=()=>{var r=s.result.transaction([Te.DB_STORE_NAME],"readwrite"),n=r.objectStore(Te.DB_STORE_NAME),o=0,a=0,c=e.length;function h(){0==a?t():i()}e.forEach((e=>{var t=n.put(Te.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+a==c&&h()},t.onerror=()=>{a++,o+a==c&&h()}})),r.onerror=i},s.onerror=i},loadFilesFromDB:(e,t,i)=>{t=t||(()=>{}),i=i||(()=>{});var r=Te.indexedDB();try{var s=r.open(Te.DB_NAME(),Te.DB_VERSION)}catch(e){return i(e)}s.onupgradeneeded=i,s.onsuccess=()=>{var r=s.result;try{var n=r.transaction([Te.DB_STORE_NAME],"readonly")}catch(e){return void i(e)}var o=n.objectStore(Te.DB_STORE_NAME),a=0,c=0,h=e.length;function l(){0==c?t():i()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{Te.analyzePath(e).exists&&Te.unlink(e),Te.createDataFile(ye.dirname(e),ye.basename(e),t.result,!0,!0,!0),++a+c==h&&l()},t.onerror=()=>{c++,a+c==h&&l()}})),n.onerror=i},s.onerror=i}},Pe={DEFAULT_POLLMASK:5,calculateAt:function(e,t,i){if(ye.isAbs(t))return t;var r;if(-100===e)r=Te.cwd();else{var s=Te.getStream(e);if(!s)throw new Te.ErrnoError(8);r=s.path}if(0==t.length){if(!i)throw new Te.ErrnoError(44);return r}return ye.join2(r,t)},doStat:function(e,t,i){try{var r=e(t)}catch(e){if(e&&e.node&&ye.normalize(t)!==ye.normalize(Te.getPath(e.node)))return-54;throw e}return U[i>>>2]=r.dev,U[i+4>>>2]=0,U[i+8>>>2]=r.ino,U[i+12>>>2]=r.mode,U[i+16>>>2]=r.nlink,U[i+20>>>2]=r.uid,U[i+24>>>2]=r.gid,U[i+28>>>2]=r.rdev,U[i+32>>>2]=0,de=[r.size>>>0,(le=r.size,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[i+40>>>2]=de[0],U[i+44>>>2]=de[1],U[i+48>>>2]=4096,U[i+52>>>2]=r.blocks,U[i+56>>>2]=r.atime.getTime()/1e3|0,U[i+60>>>2]=0,U[i+64>>>2]=r.mtime.getTime()/1e3|0,U[i+68>>>2]=0,U[i+72>>>2]=r.ctime.getTime()/1e3|0,U[i+76>>>2]=0,de=[r.ino>>>0,(le=r.ino,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[i+80>>>2]=de[0],U[i+84>>>2]=de[1],0},doMsync:function(e,t,i,r,s){var n=L.slice(e,e+i);Te.msync(t,n,s,i,r)},varargs:void 0,get:function(){return Pe.varargs+=4,U[Pe.varargs-4>>>2]},getStr:function(e){return O(e)},getStreamFromFD:function(e){var t=Te.getStream(e);if(!t)throw new Te.ErrnoError(8);return t}},Ce="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function ke(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var De=void 0;function Oe(e){for(var t="",i=e;L[i>>>0];)t+=De[L[i++>>>0]];return t}var Ae={},Fe={},_e={},Re=48,Me=57;function Le(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Re&&t<=Me?"_"+e:e}function Be(e,t){return e=Le(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ie(e,t){var i=Be(t,(function(e){this.name=t,this.message=e;var i=new Error(e).stack;void 0!==i&&(this.stack=this.toString()+"\n"+i.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},i}var Ue=void 0;function We(e){throw new Ue(e)}var Ne=void 0;function He(e){throw new Ne(e)}function Ge(e,t,i){function r(t){var r=i(t);r.length!==e.length&&He("Mismatched type converter count");for(var s=0;s<e.length;++s)Ve(e[s],r[s])}e.forEach((function(e){_e[e]=t}));var s=new Array(t.length),n=[],o=0;t.forEach(((e,t)=>{Fe.hasOwnProperty(e)?s[t]=Fe[e]:(n.push(e),Ae.hasOwnProperty(e)||(Ae[e]=[]),Ae[e].push((()=>{s[t]=Fe[e],++o===n.length&&r(s)})))})),0===n.length&&r(s)}function Ve(e,t,i={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||We('type "'+r+'" must have a positive integer typeid pointer'),Fe.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;We("Cannot register type '"+r+"' twice")}if(Fe[e]=t,delete _e[e],Ae.hasOwnProperty(e)){var s=Ae[e];delete Ae[e],s.forEach((e=>e()))}}function ze(e){We(e.$$.ptrType.registeredClass.name+" instance already deleted")}var je=!1;function qe(e){}function Ye(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Xe(e,t,i){if(t===i)return e;if(void 0===i.baseClass)return null;var r=Xe(e,t,i.baseClass);return null===r?null:i.downcast(r)}var $e={};var Ze=[];function Qe(){for(;Ze.length;){var e=Ze.pop();e.$$.deleteScheduled=!1,e.delete()}}var Je=void 0;var Ke={};function et(e,t){return t.ptrType&&t.ptr||He("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&He("Both smartPtrType and smartPtr must be specified"),t.count={value:1},tt(Object.create(e,{$$:{value:t}}))}function tt(e){return"undefined"==typeof FinalizationRegistry?(tt=e=>e,e):(je=new FinalizationRegistry((e=>{Ye(e.$$)})),tt=e=>{var t=e.$$;if(t.smartPtr){var i={$$:t};je.register(e,i,e)}return e},qe=e=>je.unregister(e),tt(e))}function it(){}function rt(e,t,i){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||We("Function '"+i+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function st(t,i,r){e.hasOwnProperty(t)?((void 0===r||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[r])&&We("Cannot register public name '"+t+"' twice"),rt(e,t,t),e.hasOwnProperty(r)&&We("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),e[t].overloadTable[r]=i):(e[t]=i,void 0!==r&&(e[t].numArguments=r))}function nt(e,t,i,r,s,n,o,a){this.name=e,this.constructor=t,this.instancePrototype=i,this.rawDestructor=r,this.baseClass=s,this.getActualType=n,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function ot(e,t,i){for(;t!==i;)t.upcast||We("Expected null or instance of "+i.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function at(e,t){if(null===t)return this.isReference&&We("null is not a valid "+this.name),0;t.$$||We('Cannot pass "'+Dt(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name);var i=t.$$.ptrType.registeredClass;return ot(t.$$.ptr,i,this.registeredClass)}function ct(e,t){var i;if(null===t)return this.isReference&&We("null is not a valid "+this.name),this.isSmartPointer?(i=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,i),i):0;t.$$||We('Cannot pass "'+Dt(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&We("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(i=ot(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&We("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?i=t.$$.smartPtr:We("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:i=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)i=t.$$.smartPtr;else{var s=t.clone();i=this.rawShare(i,Pt.toHandle((function(){s.delete()}))),null!==e&&e.push(this.rawDestructor,i)}break;default:We("Unsupporting sharing policy")}return i}function ht(e,t){if(null===t)return this.isReference&&We("null is not a valid "+this.name),0;t.$$||We('Cannot pass "'+Dt(t)+'" as a '+this.name),t.$$.ptr||We("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&We("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;return ot(t.$$.ptr,i,this.registeredClass)}function lt(e){return this.fromWireType(W[e>>>2])}function dt(e,t,i,r,s,n,o,a,c,h,l){this.name=e,this.registeredClass=t,this.isReference=i,this.isConst=r,this.isSmartPointer=s,this.pointeeType=n,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=c,this.rawShare=h,this.rawDestructor=l,s||void 0!==t.baseClass?this.toWireType=ct:r?(this.toWireType=at,this.destructorFunction=null):(this.toWireType=ht,this.destructorFunction=null)}function pt(t,i){var r,s,n,o=(t=Oe(t)).includes("j")?(r=t,s=i,n=[],function(){return n.length=0,Object.assign(n,arguments),function(t,i,r){return t.includes("j")?function(t,i,r){var s=e["dynCall_"+t];return r&&r.length?s.apply(null,[i].concat(r)):s.call(null,i)}(t,i,r):me(i).apply(null,r)}(r,s,n)}):me(i);return"function"!=typeof o&&We("unknown function pointer with signature "+t+": "+i),o}var ft=void 0;function vt(e){var t=fi(e),i=Oe(t);return ui(t),i}function gt(e,t){var i=[],r={};throw t.forEach((function e(t){r[t]||Fe[t]||(_e[t]?_e[t].forEach(e):(i.push(t),r[t]=!0))})),new ft(e+": "+i.map(vt).join([", "]))}function mt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var i=Be(e.name||"unknownFunctionName",(function(){}));i.prototype=e.prototype;var r=new i,s=e.apply(r,t);return s instanceof Object?s:r}function St(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function yt(e,t,i,r,s){var n=t.length;n<2&&We("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==i,a=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){a=!0;break}var h="void"!==t[0].name,l="",d="";for(c=0;c<n-2;++c)l+=(0!==c?", ":"")+"arg"+c,d+=(0!==c?", ":"")+"arg"+c+"Wired";var u="return function "+Le(e)+"("+l+") {\nif (arguments.length !== "+(n-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(n-2)+" args!');\n}\n";a&&(u+="var destructors = [];\n");var p=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[We,r,s,St,t[0],t[1]];for(o&&(u+="var thisWired = classParam.toWireType("+p+", this);\n"),c=0;c<n-2;++c)u+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),v.push(t[c+2]);if(o&&(d="thisWired"+(d.length>0?", ":"")+d),u+=(h?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",a)u+="runDestructors(destructors);\n";else for(c=o?1:2;c<t.length;++c){var g=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(u+=g+"_dtor("+g+"); // "+t[c].name+"\n",f.push(g+"_dtor"),v.push(t[c].destructorFunction))}return h&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),u+="}\n",f.push(u),mt(Function,f).apply(null,v)}function bt(e,t){for(var i=[],r=0;r<e;r++)i.push(U[(t>>2)+r>>>0]);return i}function wt(e,t,i){return e instanceof Object||We(i+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||We(i+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||We("cannot call emscripten binding method "+i+" on deleted object"),ot(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var Et=[],xt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tt(e){e>4&&0==--xt[e].refcount&&(xt[e]=void 0,Et.push(e))}var Pt={toValue:e=>(e||We("Cannot use deleted val. handle = "+e),xt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Et.length?Et.pop():xt.length;return xt[t]={refcount:1,value:e},t}}};function Ct(e,t,i){switch(t){case 0:return function(e){var t=i?M:L;return this.fromWireType(t[e>>>0])};case 1:return function(e){var t=i?B:I;return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=i?U:W;return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function kt(e,t){var i=Fe[e];return void 0===i&&We(t+" has unknown type "+vt(e)),i}function Dt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Ot(e,t){switch(t){case 2:return function(e){return this.fromWireType(N[e>>>2])};case 3:return function(e){return this.fromWireType(H[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function At(e,t,i){switch(t){case 0:return i?function(e){return M[e>>>0]}:function(e){return L[e>>>0]};case 1:return i?function(e){return B[e>>>1]}:function(e){return I[e>>>1]};case 2:return i?function(e){return U[e>>>2]}:function(e){return W[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Ft={};function _t(e){var t=Ft[e];return void 0===t?Oe(e):t}var Rt=[];function Mt(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Lt,Bt=[];function It(t,i){if(Nt.mainLoop.timingMode=t,Nt.mainLoop.timingValue=i,!Nt.mainLoop.func)return 1;if(Nt.mainLoop.running||(Nt.mainLoop.running=!0),0==t)Nt.mainLoop.scheduler=function(){var e=0|Math.max(0,Nt.mainLoop.tickStartTime+i-Lt());setTimeout(Nt.mainLoop.runner,e)},Nt.mainLoop.method="timeout";else if(1==t)Nt.mainLoop.scheduler=function(){Nt.requestAnimationFrame(Nt.mainLoop.runner)},Nt.mainLoop.method="rAF";else if(2==t){if("undefined"==typeof setImmediate){var r=[],s="setimmediate";addEventListener("message",(function(e){e.data!==s&&e.data.target!==s||(e.stopPropagation(),r.shift()())}),!0),setImmediate=function(t){r.push(t),v?(void 0===e.setImmediates&&(e.setImmediates=[]),e.setImmediates.push(t),postMessage({target:s})):postMessage(s,"*")}}Nt.mainLoop.scheduler=function(){setImmediate(Nt.mainLoop.runner)},Nt.mainLoop.method="immediate"}return 0}function Ut(e,t){if(!P)if(t)e();else try{e()}catch(e){!function(e){if(e instanceof Si||"unwind"==e)return T;p(1,e)}(e)}}function Wt(e,t){return setTimeout((function(){Ut(e)}),t)}Lt=g?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var Nt={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Nt.mainLoop.scheduler=null,Nt.mainLoop.currentlyRunningMainloop++},resume:function(){Nt.mainLoop.currentlyRunningMainloop++;var e=Nt.mainLoop.timingMode,t=Nt.mainLoop.timingValue,i=Nt.mainLoop.func;Nt.mainLoop.func=null,function(e,t,i,r,s){C(!Nt.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Nt.mainLoop.func=e,Nt.mainLoop.arg=r;var n=Nt.mainLoop.currentlyRunningMainloop;function o(){return!(n<Nt.mainLoop.currentlyRunningMainloop)}Nt.mainLoop.running=!1,Nt.mainLoop.runner=function(){if(!P)if(Nt.mainLoop.queue.length>0){var t=Date.now(),i=Nt.mainLoop.queue.shift();if(i.func(i.arg),Nt.mainLoop.remainingBlockers){var r=Nt.mainLoop.remainingBlockers,s=r%1==0?r-1:Math.floor(r);i.counted?Nt.mainLoop.remainingBlockers=s:(s+=.5,Nt.mainLoop.remainingBlockers=(8*r+s)/9)}if(S('main loop blocker "'+i.name+'" took '+(Date.now()-t)+" ms"),Nt.mainLoop.updateStatus(),!o())return;setTimeout(Nt.mainLoop.runner,0)}else o()&&(Nt.mainLoop.currentFrameNumber=Nt.mainLoop.currentFrameNumber+1|0,1==Nt.mainLoop.timingMode&&Nt.mainLoop.timingValue>1&&Nt.mainLoop.currentFrameNumber%Nt.mainLoop.timingValue!=0?Nt.mainLoop.scheduler():(0==Nt.mainLoop.timingMode&&(Nt.mainLoop.tickStartTime=Lt()),Nt.mainLoop.runIter(e),o()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Nt.mainLoop.scheduler())))}}(i,0,0,Nt.mainLoop.arg),It(e,t),Nt.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var t=e.statusMessage||"Please wait...",i=Nt.mainLoop.remainingBlockers,r=Nt.mainLoop.expectedBlockers;i?i<r?e.setStatus(t+" ("+(r-i)+"/"+r+")"):e.setStatus(t):e.setStatus("")}},runIter:function(t){if(!P){if(e.preMainLoop&&!1===e.preMainLoop())return;Ut(t),e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),!Nt.initted){Nt.initted=!0;try{new Blob,Nt.hasBlobConstructor=!0}catch(e){Nt.hasBlobConstructor=!1,S("warning: no blob constructor, cannot create blobs with mimetypes")}Nt.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Nt.hasBlobConstructor?null:S("warning: no BlobBuilder"),Nt.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,e.noImageDecoding||void 0!==Nt.URLObject||(S("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var t={canHandle:function(t){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},handle:function(e,t,i,r){var s=null;if(Nt.hasBlobConstructor)try{(s=new Blob([e],{type:Nt.getMimetype(t)})).size!==e.length&&(s=new Blob([new Uint8Array(e).buffer],{type:Nt.getMimetype(t)}))}catch(e){w("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!s){var n=new Nt.BlobBuilder;n.append(new Uint8Array(e).buffer),s=n.getBlob()}var o=Nt.URLObject.createObjectURL(s),a=new Image;a.onload=()=>{C(a.complete,"Image "+t+" could not be decoded");var r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d").drawImage(a,0,0),ri[t]=r,Nt.URLObject.revokeObjectURL(o),i&&i(e)},a.onerror=e=>{S("Image "+o+" could not be decoded"),r&&r()},a.src=o}};e.preloadPlugins.push(t);var i={canHandle:function(t){return!e.noAudioDecoding&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,i,r){var s=!1;function n(r){s||(s=!0,si[t]=r,i&&i(e))}function o(){s||(s=!0,si[t]=new Audio,r&&r())}if(!Nt.hasBlobConstructor)return o();try{var a=new Blob([e],{type:Nt.getMimetype(t)})}catch(e){return o()}var c=Nt.URLObject.createObjectURL(a),h=new Audio;h.addEventListener("canplaythrough",(function(){n(h)}),!1),h.onerror=function(i){s||(S("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),h.src="data:audio/x-"+t.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",r=0,s=0,n=0;n<e.length;n++)for(r=r<<8|e[n],s+=8;s>=6;){var o=r>>s-6&63;s-=6,i+=t[o]}return 2==s?(i+=t[(3&r)<<4],i+="=="):4==s&&(i+=t[(15&r)<<2],i+="="),i}(e),n(h))},h.src=c,Wt((function(){n(h)}),1e4)}};e.preloadPlugins.push(i);var r=e.canvas;r&&(r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.exitPointerLock=r.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",s,!1),document.addEventListener("mozpointerlockchange",s,!1),document.addEventListener("webkitpointerlockchange",s,!1),document.addEventListener("mspointerlockchange",s,!1),e.elementPointerLock&&r.addEventListener("click",(function(t){!Nt.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),t.preventDefault())}),!1))}function s(){Nt.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}},handledByPreloadPlugin:function(t,i,r,s){Nt.init();var n=!1;return e.preloadPlugins.forEach((function(e){n||e.canHandle(i)&&(e.handle(t,i,r,s),n=!0)})),n},createContext:function(t,i,r,s){if(i&&e.ctx&&t==e.canvas)return e.ctx;var n,o;if(i){var a={antialias:!1,alpha:!1,majorVersion:1};if(s)for(var c in s)a[c]=s[c];void 0!==Yt&&(o=Yt.createContext(t,a))&&(n=Yt.getContext(o).GLctx)}else n=t.getContext("2d");return n?(r&&(i||C(void 0===ii,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=n,i&&Yt.makeContextCurrent(o),e.useWebGL=i,Nt.moduleContextCreatedCallbacks.forEach((function(e){e()})),Nt.init()),n):null},destroyContext:function(e,t,i){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(t,i){Nt.lockPointer=t,Nt.resizeCanvas=i,void 0===Nt.lockPointer&&(Nt.lockPointer=!0),void 0===Nt.resizeCanvas&&(Nt.resizeCanvas=!1);var r=e.canvas;function s(){Nt.isFullscreen=!1;var t=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t?(r.exitFullscreen=Nt.exitFullscreen,Nt.lockPointer&&r.requestPointerLock(),Nt.isFullscreen=!0,Nt.resizeCanvas?Nt.setFullscreenCanvasSize():Nt.updateCanvasDimensions(r)):(t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),Nt.resizeCanvas?Nt.setWindowedCanvasSize():Nt.updateCanvasDimensions(r)),e.onFullScreen&&e.onFullScreen(Nt.isFullscreen),e.onFullscreen&&e.onFullscreen(Nt.isFullscreen)}Nt.fullscreenHandlersInstalled||(Nt.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",s,!1),document.addEventListener("mozfullscreenchange",s,!1),document.addEventListener("webkitfullscreenchange",s,!1),document.addEventListener("MSFullscreenChange",s,!1));var n=document.createElement("div");r.parentNode.insertBefore(n,r),n.appendChild(r),n.requestFullscreen=n.requestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen||(n.webkitRequestFullscreen?function(){n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(n.webkitRequestFullScreen?function(){n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),n.requestFullscreen()},exitFullscreen:function(){return!!Nt.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===Nt.nextRAF)Nt.nextRAF=t+1e3/60;else for(;t+2>=Nt.nextRAF;)Nt.nextRAF+=1e3/60;var i=Math.max(Nt.nextRAF-t,0);setTimeout(e,i)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Nt.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeSetTimeout:function(e){return Wt(e)},safeRequestAnimationFrame:function(e){return Nt.requestAnimationFrame((function(){Ut(e)}))},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(t){if(Nt.pointerLock)"mousemove"!=t.type&&"mozMovementX"in t?Nt.mouseMovementX=Nt.mouseMovementY=0:(Nt.mouseMovementX=Nt.getMovementX(t),Nt.mouseMovementY=Nt.getMovementY(t)),"undefined"!=typeof SDL?(Nt.mouseX=SDL.mouseX+Nt.mouseMovementX,Nt.mouseY=SDL.mouseY+Nt.mouseMovementY):(Nt.mouseX+=Nt.mouseMovementX,Nt.mouseY+=Nt.mouseMovementY);else{var i=e.canvas.getBoundingClientRect(),r=e.canvas.width,s=e.canvas.height,n=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===t.type||"touchend"===t.type||"touchmove"===t.type){var a=t.touch;if(void 0===a)return;var c=a.pageX-(n+i.left),h=a.pageY-(o+i.top),l={x:c*=r/i.width,y:h*=s/i.height};if("touchstart"===t.type)Nt.lastTouches[a.identifier]=l,Nt.touches[a.identifier]=l;else if("touchend"===t.type||"touchmove"===t.type){var d=Nt.touches[a.identifier];d||(d=l),Nt.lastTouches[a.identifier]=d,Nt.touches[a.identifier]=l}return}var u=t.pageX-(n+i.left),p=t.pageY-(o+i.top);u*=r/i.width,p*=s/i.height,Nt.mouseMovementX=u-Nt.mouseX,Nt.mouseMovementY=p-Nt.mouseY,Nt.mouseX=u,Nt.mouseY=p}},resizeListeners:[],updateResizeListeners:function(){var t=e.canvas;Nt.resizeListeners.forEach((function(e){e(t.width,t.height)}))},setCanvasSize:function(t,i,r){var s=e.canvas;Nt.updateCanvasDimensions(s,t,i),r||Nt.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var t=W[SDL.screen>>>2];t|=8388608,U[SDL.screen>>>2]=t}Nt.updateCanvasDimensions(e.canvas),Nt.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var t=W[SDL.screen>>>2];t&=-8388609,U[SDL.screen>>>2]=t}Nt.updateCanvasDimensions(e.canvas),Nt.updateResizeListeners()},updateCanvasDimensions:function(t,i,r){i&&r?(t.widthNative=i,t.heightNative=r):(i=t.widthNative,r=t.heightNative);var s=i,n=r;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(s/n<e.forcedAspectRatio?s=Math.round(n*e.forcedAspectRatio):n=Math.round(s/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t.parentNode&&"undefined"!=typeof screen){var o=Math.min(screen.width/s,screen.height/n);s=Math.round(s*o),n=Math.round(n*o)}Nt.resizeCanvas?(t.width!=s&&(t.width=s),t.height!=n&&(t.height=n),void 0!==t.style&&(t.style.removeProperty("width"),t.style.removeProperty("height"))):(t.width!=i&&(t.width=i),t.height!=r&&(t.height=r),void 0!==t.style&&(s!=i||n!=r?(t.style.setProperty("width",s+"px","important"),t.style.setProperty("height",n+"px","important")):(t.style.removeProperty("width"),t.style.removeProperty("height"))))}};function Ht(e){try{return E.grow(e-R.byteLength+65535>>>16),Z(E.buffer),1}catch(e){}}var Gt={};function Vt(){if(!Vt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in Gt)void 0===Gt[t]?delete e[t]:e[t]=Gt[t];var i=[];for(var t in e)i.push(t+"="+e[t]);Vt.strings=i}return Vt.strings}function zt(e){for(var t=e.split("."),i=0;i<4;i++){var r=Number(t[i]);if(isNaN(r))return null;t[i]=r}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function jt(e){return parseInt(e)}var qt={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,i=zt(e);if(null!==i)return e;if(null!==(i=function(e){var t,i,r,s,n=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=jt(t[t.length-4])+256*jt(t[t.length-3]),t[t.length-3]=jt(t[t.length-2])+256*jt(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),r=0,s=0,i=0;i<t.length;i++)if("string"==typeof t[i])if("Z"===t[i]){for(s=0;s<8-t.length+1;s++)n[i+s]=0;r=s-1}else n[i+r]=vi(parseInt(t[i],16));else n[i+r]=t[i];return[n[1]<<16|n[0],n[3]<<16|n[2],n[5]<<16|n[4],n[7]<<16|n[6]]}(e)))return e;if(qt.address_map.addrs[e])t=qt.address_map.addrs[e];else{var r=qt.address_map.id++;C(r<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&r)+"."+(65280&r),qt.address_map.names[t]=e,qt.address_map.addrs[e]=t}return t},lookup_addr:function(e){return qt.address_map.names[e]?qt.address_map.names[e]:null}},Yt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Yt.lastError||(Yt.lastError=e)},getNewId:function(e){for(var t=Yt.counter++,i=e.length;i<t;i++)e[i]=null;return t},getSource:function(e,t,i,r){for(var s="",n=0;n<t;++n){var o=r?U[r+4*n>>>2]:-1;s+=O(U[i+4*n>>>2],o<0?void 0:o)}return s},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){function r(t,i){var r=e.getContextSafariWebGL2Fixed(t,i);return"webgl"==t==r instanceof WebGLRenderingContext?r:null}e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=r}var i=e.getContext("webgl",t);return i?Yt.registerContext(i,t):0},registerContext:function(e,t){var i=Yt.getNewId(Yt.contexts),r={handle:i,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Yt.contexts[i]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Yt.initExtensions(r),i},makeContextCurrent:function(t){return Yt.currentContext=Yt.contexts[t],e.ctx=ii=Yt.currentContext&&Yt.currentContext.GLctx,!(t&&!ii)},getContext:function(e){return Yt.contexts[e]},deleteContext:function(e){Yt.currentContext===Yt.contexts[e]&&(Yt.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(Yt.contexts[e].GLctx.canvas),Yt.contexts[e]&&Yt.contexts[e].GLctx.canvas&&(Yt.contexts[e].GLctx.canvas.GLctxObject=void 0),Yt.contexts[e]=null},initExtensions:function(e){if(e||(e=Yt.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,i=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,i){t.vertexAttribDivisorANGLE(e,i)},e.drawArraysInstanced=function(e,i,r,s){t.drawArraysInstancedANGLE(e,i,r,s)},e.drawElementsInstanced=function(e,i,r,s,n){t.drawElementsInstancedANGLE(e,i,r,s,n)})}(i),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(i),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,i){t.drawBuffersWEBGL(e,i)})}(i),i.disjointTimerQueryExt=i.getExtension("EXT_disjoint_timer_query"),(t=i).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(i.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||i.getExtension(e)}))}}};function Xt(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function $t(e){var t=ii.currentProgram;if(t){var i=t.uniformLocsById[e];return"number"==typeof i&&(t.uniformLocsById[e]=i=ii.getUniformLocation(t,t.uniformArrayNamesById[e]+(i>0?"["+i+"]":""))),i}Yt.recordError(1282)}var Zt=[],Qt=[];function Jt(e){return e%4==0&&(e%100!=0||e%400==0)}var Kt=[31,29,31,30,31,30,31,31,30,31,30,31],ei=[31,28,31,30,31,30,31,31,30,31,30,31];var ti=function(e,t,i,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Te.nextInode++,this.name=t,this.mode=i,this.node_ops={},this.stream_ops={},this.rdev=r};Object.defineProperties(ti.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return Te.isDir(this.mode)}},isDevice:{get:function(){return Te.isChrdev(this.mode)}}}),Te.FSNode=ti,Te.staticInit(),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);De=e}(),Ue=e.BindingError=Ie(Error,"BindingError"),Ne=e.InternalError=Ie(Error,"InternalError"),it.prototype.isAliasOf=function(e){if(!(this instanceof it))return!1;if(!(e instanceof it))return!1;for(var t=this.$$.ptrType.registeredClass,i=this.$$.ptr,r=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)i=t.upcast(i),t=t.baseClass;for(;r.baseClass;)s=r.upcast(s),r=r.baseClass;return t===r&&i===s},it.prototype.clone=function(){if(this.$$.ptr||ze(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=tt(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},it.prototype.delete=function(){this.$$.ptr||ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),qe(this),Ye(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},it.prototype.isDeleted=function(){return!this.$$.ptr},it.prototype.deleteLater=function(){return this.$$.ptr||ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&We("Object already scheduled for deletion"),Ze.push(this),1===Ze.length&&Je&&Je(Qe),this.$$.deleteScheduled=!0,this},e.getInheritedInstanceCount=function(){return Object.keys(Ke).length},e.getLiveInheritedInstances=function(){var e=[];for(var t in Ke)Ke.hasOwnProperty(t)&&e.push(Ke[t]);return e},e.flushPendingDeletes=Qe,e.setDelayFunction=function(e){Je=e,Ze.length&&Je&&Je(Qe)},dt.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},dt.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},dt.prototype.argPackAdvance=8,dt.prototype.readValueFromPointer=lt,dt.prototype.deleteObject=function(e){null!==e&&e.delete()},dt.prototype.fromWireType=function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var i=function(e,t){return t=function(e,t){for(void 0===t&&We("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Ke[t]}(this.registeredClass,t);if(void 0!==i){if(0===i.$$.count.value)return i.$$.ptr=t,i.$$.smartPtr=e,i.clone();var r=i.clone();return this.destructor(e),r}function s(){return this.isSmartPointer?et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):et(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var n,o=this.registeredClass.getActualType(t),a=$e[o];if(!a)return s.call(this);n=this.isConst?a.constPointerType:a.pointerType;var c=Xe(t,this.registeredClass,n.registeredClass);return null===c?s.call(this):this.isSmartPointer?et(n.registeredClass.instancePrototype,{ptrType:n,ptr:c,smartPtrType:this,smartPtr:e}):et(n.registeredClass.instancePrototype,{ptrType:n,ptr:c})},ft=e.UnboundTypeError=Ie(Error,"UnboundTypeError"),e.count_emval_handles=function(){for(var e=0,t=5;t<xt.length;++t)void 0!==xt[t]&&++e;return e},e.get_first_emval=function(){for(var e=5;e<xt.length;++e)if(void 0!==xt[e])return xt[e];return null},e.requestFullscreen=function(e,t){Nt.requestFullscreen(e,t)},e.requestAnimationFrame=function(e){Nt.requestAnimationFrame(e)},e.setCanvasSize=function(e,t,i){Nt.setCanvasSize(e,t,i)},e.pauseMainLoop=function(){Nt.mainLoop.pause()},e.resumeMainLoop=function(){Nt.mainLoop.resume()},e.getUserMedia=function(){Nt.getUserMedia()},e.createContext=function(e,t,i,r){return Nt.createContext(e,t,i,r)};for(var ii,ri={},si={},ni=new Float32Array(288),oi=0;oi<288;++oi)Zt[oi]=ni.subarray(0,oi+1);var ai=new Int32Array(288);for(oi=0;oi<288;++oi)Qt[oi]=ai.subarray(0,oi+1);function ci(e,t,i){var r=i>0?i:_(e)+1,s=new Array(r),n=A(e,s,0,s.length);return t&&(s.length=n),s}var hi,li={na:function(){return e.HEAP8.length},g:function(e,t,i,r){ae("Assertion failed: "+O(e)+", at: "+[t?O(t):"unknown filename",i,r?O(r):"unknown function"])},b:function(e){return di(e+24)+24},c:function(e,t,i){throw new Se(e).init(t,i),e},Z:function(e,t){try{return e=Pe.getStr(e),Te.chmod(e,t),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},_:function(e,t,i,r){try{if(t=Pe.getStr(t),t=Pe.calculateAt(e,t),-8&i)return-28;var s=Te.lookupPath(t,{follow:!0}).node;if(!s)return-44;var n="";return 4&i&&(n+="r"),2&i&&(n+="w"),1&i&&(n+="x"),n&&Te.nodePermissions(s,n)?-2:0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},r:function(e,t,i){Pe.varargs=i;try{var r=Pe.getStreamFromFD(e);switch(t){case 0:return(s=Pe.get())<0?-28:Te.createStream(r,s).fd;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:var s=Pe.get();return r.flags|=s,0;case 5:return s=Pe.get(),B[s+0>>>1]=2,0;case 16:case 8:default:return-28;case 9:return 28,U[pi()>>>2]=28,-1}}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},Q:function(e,t){try{var i=Pe.getStreamFromFD(e);return Pe.doStat(Te.stat,i.path,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},I:function(e,t,i){try{var r=Pe.getStreamFromFD(e);r.getdents||(r.getdents=Te.readdir(r.path));for(var s=280,n=0,o=Te.llseek(r,0,1),a=Math.floor(o/s);a<r.getdents.length&&n+s<=i;){var c,h,l=r.getdents[a];if("."===l)c=r.node.id,h=4;else if(".."===l)c=Te.lookupPath(r.path,{parent:!0}).node.id,h=4;else{var d=Te.lookupNode(r.node,l);c=d.id,h=Te.isChrdev(d.mode)?2:Te.isDir(d.mode)?4:Te.isLink(d.mode)?10:8}de=[c>>>0,(le=c,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[t+n>>>2]=de[0],U[t+n+4>>>2]=de[1],de=[(a+1)*s>>>0,(le=(a+1)*s,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[t+n+8>>>2]=de[0],U[t+n+12>>>2]=de[1],B[t+n+16>>>1]=280,M[t+n+18>>>0]=h,F(l,t+n+19,256),n+=s,a+=1}return Te.llseek(r,a*s,0),n}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},$:function(e,t,i){Pe.varargs=i;try{var r=Pe.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var s=Pe.get();return U[s>>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return s=Pe.get(),Te.ioctl(r,t,s);default:ae("bad ioctl syscall "+t)}}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},N:function(e,t){try{return e=Pe.getStr(e),Pe.doStat(Te.lstat,e,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},K:function(e,t,i){try{return t=Pe.getStr(t),t=Pe.calculateAt(e,t),"/"===(t=ye.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Te.mkdir(t,i,0),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},O:function(e,t,i,r){try{t=Pe.getStr(t);var s=256&r,n=4096&r;return r&=-4353,t=Pe.calculateAt(e,t,n),Pe.doStat(s?Te.lstat:Te.stat,t,i)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},v:function(e,t,i,r){Pe.varargs=r;try{t=Pe.getStr(t),t=Pe.calculateAt(e,t);var s=r?Pe.get():0;return Te.open(t,i,s).fd}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},H:function(e){try{return e=Pe.getStr(e),Te.rmdir(e),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},P:function(e,t){try{return e=Pe.getStr(e),Pe.doStat(Te.stat,e,t)}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},F:function(e,t,i){try{return t=Pe.getStr(t),t=Pe.calculateAt(e,t),0===i?Te.unlink(t):512===i?Te.rmdir(t):ae("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},W:function(e){},Y:function(e,t){ae(Ce)},X:function(e,t){ae(Ce)},B:function(e,t,i,r,s){},ba:function(e,t,i,r,s){var n=ke(i);Ve(e,{name:t=Oe(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:s},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===i)r=M;else if(2===i)r=B;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+t);r=U}return this.fromWireType(r[e>>>n])},destructorFunction:null})},d:function(t,i,r,s,n,o,a,c,h,l,d,u,p){d=Oe(d),o=pt(n,o),c&&(c=pt(a,c)),l&&(l=pt(h,l)),p=pt(u,p);var f=Le(d);st(f,(function(){gt("Cannot construct "+d+" due to unbound types",[s])})),Ge([t,i,r],s?[s]:[],(function(i){var r,n;i=i[0],n=s?(r=i.registeredClass).instancePrototype:it.prototype;var a=Be(f,(function(){if(Object.getPrototypeOf(this)!==h)throw new Ue("Use 'new' to construct "+d);if(void 0===u.constructor_body)throw new Ue(d+" has no accessible constructor");var e=u.constructor_body[arguments.length];if(void 0===e)throw new Ue("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),h=Object.create(n,{constructor:{value:a}});a.prototype=h;var u=new nt(d,a,h,p,r,o,c,l),v=new dt(d,u,!0,!1,!1),g=new dt(d+"*",u,!1,!1,!1),m=new dt(d+" const*",u,!1,!0,!1);return $e[t]={pointerType:g,constPointerType:m},function(t,i,r){e.hasOwnProperty(t)||He("Replacing nonexistant public symbol"),e[t].overloadTable,e[t]=i,e[t].argCount=r}(f,a),[v,g,m]}))},f:function(e,t,i,r,s,n,o){var a=bt(i,r);t=Oe(t),n=pt(s,n),Ge([],[e],(function(e){var r=(e=e[0]).name+"."+t;function s(){gt("Cannot call "+r+" due to unbound types",a)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.registeredClass.constructor;return void 0===c[t]?(s.argCount=i-1,c[t]=s):(rt(c,t,r),c[t].overloadTable[i-1]=s),Ge([],a,(function(e){var s=[e[0],null].concat(e.slice(1)),a=yt(r,s,null,n,o);return void 0===c[t].overloadTable?(a.argCount=i-1,c[t]=a):c[t].overloadTable[i-1]=a,[]})),[]}))},e:function(e,t,i,r,s,n){C(t>0);var o=bt(t,i);s=pt(r,s),Ge([],[e],(function(e){var i="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Ue("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{gt("Cannot construct "+e.name+" due to unbound types",o)},Ge([],o,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=yt(i,r,null,s,n),[]})),[]}))},a:function(e,t,i,r,s,n,o,a){var c=bt(i,r);t=Oe(t),n=pt(s,n),Ge([],[e],(function(e){var r=(e=e[0]).name+"."+t;function s(){gt("Cannot call "+r+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var h=e.registeredClass.instancePrototype,l=h[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===i-2?(s.argCount=i-2,s.className=e.name,h[t]=s):(rt(h,t,r),h[t].overloadTable[i-2]=s),Ge([],c,(function(s){var a=yt(r,s,e,n,o);return void 0===h[t].overloadTable?(a.argCount=i-2,h[t]=a):h[t].overloadTable[i-2]=a,[]})),[]}))},k:function(e,t,i,r,s,n,o,a,c,h){t=Oe(t),s=pt(r,s),Ge([],[e],(function(e){var r=(e=e[0]).name+"."+t,l={get:function(){gt("Cannot access "+r+" due to unbound types",[i,o])},enumerable:!0,configurable:!0};return l.set=c?()=>{gt("Cannot access "+r+" due to unbound types",[i,o])}:e=>{We(r+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,l),Ge([],c?[i,o]:[i],(function(i){var o=i[0],l={get:function(){var t=wt(this,e,r+" getter");return o.fromWireType(s(n,t))},enumerable:!0};if(c){c=pt(a,c);var d=i[1];l.set=function(t){var i=wt(this,e,r+" setter"),s=[];c(h,i,d.toWireType(s,t)),St(s)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]})),[]}))},aa:function(e,t){Ve(e,{name:t=Oe(t),fromWireType:function(e){var t=Pt.toValue(e);return Tt(e),t},toWireType:function(e,t){return Pt.toHandle(t)},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:null})},i:function(e,t,i,r){var s=ke(i);function n(){}t=Oe(t),n.values={},Ve(e,{name:t,constructor:n,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Ct(t,s,r),destructorFunction:null}),st(t,n)},h:function(e,t,i){var r=kt(e,"enum");t=Oe(t);var s=r.constructor,n=Object.create(r.constructor.prototype,{value:{value:i},constructor:{value:Be(r.name+"_"+t,(function(){}))}});s.values[i]=n,s[t]=n},y:function(e,t,i){var r=ke(i);Ve(e,{name:t=Oe(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:Ot(t,r),destructorFunction:null})},l:function(e,t,i,r,s){t=Oe(t),-1===s&&(s=4294967295);var n=ke(i),o=e=>e;if(0===r){var a=32-8*i;o=e=>e<<a>>>a}var c=t.includes("unsigned");Ve(e,{name:t,fromWireType:o,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:At(t,n,0!==r),destructorFunction:null})},j:function(e,t,i){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function s(e){var t=W,i=t[(e>>=2)>>>0],s=t[e+1>>>0];return new r(R,s,i)}Ve(e,{name:i=Oe(i),fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})},x:function(e,t){var i="std::string"===(t=Oe(t));Ve(e,{name:t,fromWireType:function(e){var t,r=W[e>>>2];if(i)for(var s=e+4,n=0;n<=r;++n){var o=e+4+n;if(n==r||0==L[o>>>0]){var a=O(s,o-s);void 0===t?t=a:(t+=String.fromCharCode(0),t+=a),s=o+1}}else{var c=new Array(r);for(n=0;n<r;++n)c[n]=String.fromCharCode(L[e+4+n>>>0]);t=c.join("")}return ui(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||We("Cannot pass non-string to std::string");var s=(i&&r?()=>_(t):()=>t.length)(),n=di(4+s+1);if(W[(n>>>=0)>>>2]=s,i&&r)F(t,n+4,s+1);else if(r)for(var o=0;o<s;++o){var a=t.charCodeAt(o);a>255&&(ui(n),We("String has UTF-16 code units that do not fit in 8 bits")),L[n+4+o>>>0]=a}else for(o=0;o<s;++o)L[n+4+o>>>0]=t[o];return null!==e&&e.push(ui,n),n},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(e){ui(e)}})},s:function(e,t,i){var r,s,n,o,a;i=Oe(i),2===t?(r=V,s=z,o=j,n=()=>I,a=1):4===t&&(r=q,s=Y,o=X,n=()=>W,a=2),Ve(e,{name:i,fromWireType:function(e){for(var i,s=W[e>>>2],o=n(),c=e+4,h=0;h<=s;++h){var l=e+4+h*t;if(h==s||0==o[l>>>a]){var d=r(c,l-c);void 0===i?i=d:(i+=String.fromCharCode(0),i+=d),c=l+t}}return ui(e),i},toWireType:function(e,r){"string"!=typeof r&&We("Cannot pass non-string to C++ string type "+i);var n=o(r),c=di(4+n+t);return W[(c>>>=0)>>>2]=n>>a,s(r,c+4,n+t),null!==e&&e.push(ui,c),c},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(e){ui(e)}})},ca:function(e,t){Ve(e,{isVoid:!0,name:t=Oe(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},T:function(){return Date.now()},S:function(){return!0},n:function(e,t,i){e=Pt.toValue(e),t=kt(t,"emval::as");var r=[],s=Pt.toHandle(r);return U[i>>>2]=s,t.toWireType(r,e)},sa:function(e,t,i,r,s){return(e=Rt[e])(t=Pt.toValue(t),i=_t(i),function(e){var t=[];return U[e>>>2]=Pt.toHandle(t),t}(r),s)},wa:Tt,ta:function(e){return 0===e?Pt.toHandle(Mt()):(e=_t(e),Pt.toHandle(Mt()[e]))},ra:function(e,t){var i=function(e,t){for(var i=new Array(e),r=0;r<e;++r)i[r]=kt(W[t+4*r>>>2],"parameter "+r);return i}(e,t),r=i[0],s=r.name+"_$"+i.slice(1).map((function(e){return e.name})).join("_")+"$",n=Bt[s];if(void 0!==n)return n;for(var o=["retType"],a=[r],c="",h=0;h<e-1;++h)c+=(0!==h?", ":"")+"arg"+h,o.push("argType"+h),a.push(i[1+h]);var l,d,u="return function "+Le("methodCaller_"+s)+"(handle, name, destructors, args) {\n",p=0;for(h=0;h<e-1;++h)u+="    var arg"+h+" = argType"+h+".readValueFromPointer(args"+(p?"+"+p:"")+");\n",p+=i[h+1].argPackAdvance;for(u+="    var rv = handle[name]("+c+");\n",h=0;h<e-1;++h)i[h+1].deleteObject&&(u+="    argType"+h+".deleteObject(arg"+h+");\n");return r.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u),l=mt(Function,o).apply(null,a),d=Rt.length,Rt.push(l),n=d,Bt[s]=n,n},t:function(e,t){return e=Pt.toValue(e),t=Pt.toValue(t),Pt.toHandle(e[t])},z:function(e){e>4&&(xt[e].refcount+=1)},qa:function(e){return Pt.toHandle(_t(e))},ua:function(e){St(Pt.toValue(e)),Tt(e)},o:function(e,t,i){e=Pt.toValue(e),t=Pt.toValue(t),i=Pt.toValue(i),e[t]=i},m:function(e,t){var i=(e=kt(e,"_emval_take_value")).readValueFromPointer(t);return Pt.toHandle(i)},va:function(e){return e=Pt.toValue(e),Pt.toHandle(typeof e)},U:function(e,t){var i=new Date(1e3*U[e>>>2]);U[t>>>2]=i.getSeconds(),U[t+4>>>2]=i.getMinutes(),U[t+8>>>2]=i.getHours(),U[t+12>>>2]=i.getDate(),U[t+16>>>2]=i.getMonth(),U[t+20>>>2]=i.getFullYear()-1900,U[t+24>>>2]=i.getDay();var r=new Date(i.getFullYear(),0,1),s=(i.getTime()-r.getTime())/864e5|0;U[t+28>>>2]=s,U[t+36>>>2]=-60*i.getTimezoneOffset();var n=new Date(i.getFullYear(),6,1).getTimezoneOffset(),o=r.getTimezoneOffset(),a=0|(n!=o&&i.getTimezoneOffset()==Math.min(o,n));U[t+32>>>2]=a},J:function(e,t,i,r,s,n){try{e>>>=0;var o=Te.getStream(s);o&&(2&i&&Pe.doMsync(e,o,t,r,n),Te.munmap(o))}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return-e.errno}},V:function e(t,i,r){e.called||(e.called=!0,function(e,t,i){var r=(new Date).getFullYear(),s=new Date(r,0,1),n=new Date(r,6,1),o=s.getTimezoneOffset(),a=n.getTimezoneOffset(),c=Math.max(o,a);function h(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}U[e>>>2]=60*c,U[t>>>2]=Number(o!=a);var l=h(s),d=h(n),u=$(l),p=$(d);a<o?(W[i>>>2]=u,W[i+4>>>2]=p):(W[i>>>2]=p,W[i+4>>>2]=u)}(t,i,r))},u:function(){ae("")},G:function(){return 4294901760},da:function(e,t,i){(0|e)===e&&(e=O(e)),e=be.resolve(e);var r=ri[e];if(r){var s=r.getContext("2d").getImageData(0,0,r.width,r.height),n=di(r.width*r.height*4);return L.set(s.data,n>>>0),U[t>>>2]=r.width,U[i>>>2]=r.height,n}return 0},R:function(e,t,i){L.copyWithin(e>>>0,t>>>0,t+i>>>0)},E:function(e){var t,i=L.length,r=4294901760;if((e>>>=0)>r)return!1;for(var s=1;s<=4;s*=2){var n=i*(1+.2/s);if(n=Math.min(n,e+100663296),Ht(Math.min(r,(t=Math.max(e,n))+(65536-t%65536)%65536)))return!0}return!1},L:function(e,t){var i=0;return Vt().forEach((function(r,s){var n=t+i;W[e+4*s>>>2]=n,function(e,t,i){for(var r=0;r<e.length;++r)M[t++>>>0]=e.charCodeAt(r);M[t>>>0]=0}(r,n),i+=r.length+1})),0},M:function(e,t){var i=Vt();W[e>>>2]=i.length;var r=0;return i.forEach((function(e){r+=e.length+1})),W[t>>>2]=r,0},oa:function(t){!function(t,i){var r;T=t,T=r=t,te()||(e.onExit&&e.onExit(r),P=!0),p(r,new Si(r))}(t)},p:function(e){try{var t=Pe.getStreamFromFD(e);return Te.close(t),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},w:function(e,t,i,r){try{var s=function(e,t,i,r){for(var s=0,n=0;n<i;n++){var o=W[t>>>2],a=W[t+4>>>2];t+=8;var c=Te.read(e,M,o,a,undefined);if(c<0)return-1;if(s+=c,c<a)break}return s}(Pe.getStreamFromFD(e),t,i);return U[r>>>2]=s,0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},A:function(e,t,i,r,s){try{var n=(c=i)+2097152>>>0<4194305-!!(a=t)?(a>>>0)+4294967296*c:NaN;if(isNaN(n))return 61;var o=Pe.getStreamFromFD(e);return Te.llseek(o,n,r),de=[o.position>>>0,(le=o.position,+Math.abs(le)>=1?le>0?(0|Math.min(+Math.floor(le/4294967296),4294967295))>>>0:~~+Math.ceil((le-+(~~le>>>0))/4294967296)>>>0:0)],U[s>>>2]=de[0],U[s+4>>>2]=de[1],o.getdents&&0===n&&0===r&&(o.getdents=null),0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}var a,c},q:function(e,t,i,r){try{var s=function(e,t,i,r){for(var s=0,n=0;n<i;n++){var o=W[t>>>2],a=W[t+4>>>2];t+=8;var c=Te.write(e,M,o,a,undefined);if(c<0)return-1;s+=c}return s}(Pe.getStreamFromFD(e),t,i);return W[r>>>2]=s,0}catch(e){if(void 0===Te||!(e instanceof Te.ErrnoError))throw e;return e.errno}},pa:function(e){return function(e){var t=di(20),i=di(e.length+1);F(e,i,e.length+1),W[t>>>2]=i;var r=di(4);W[r>>>2]=0,W[t+4>>>2]=r,U[t+8>>>2]=2,U[t+12>>>2]=4;var s=di(12);return W[s>>>2]=s+8,W[s+4>>>2]=0,U[s+8>>>2]=zt(qt.lookup_name(e)),W[t+16>>>2]=s,t}(O(e))},ma:function(e,t){if(t=O(t),e=Yt.programs[e]){!function(e){var t,i,r=e.uniformLocsById,s=e.uniformSizeAndIdsByName;if(!r)for(e.uniformLocsById=r={},e.uniformArrayNamesById={},t=0;t<ii.getProgramParameter(e,35718);++t){var n=ii.getActiveUniform(e,t),o=n.name,a=n.size,c=Xt(o),h=c>0?o.slice(0,c):o,l=e.uniformIdCounter;for(e.uniformIdCounter+=a,s[h]=[a,l],i=0;i<a;++i)r[l]=i,e.uniformArrayNamesById[l++]=h}}(e);var i=e.uniformLocsById,r=0,s=t,n=Xt(t);n>0&&(r=jt(t.slice(n+1))>>>0,s=t.slice(0,n));var o=e.uniformSizeAndIdsByName[s];if(o&&r<o[0]&&(i[r+=o[1]]=i[r]||ii.getUniformLocation(e,t)))return r}else Yt.recordError(1281);return-1},ka:function(e,t){ii.uniform1f($t(e),t)},la:function(e,t){ii.uniform1i($t(e),t)},ga:function(e,t,i){if(t<=144)for(var r=Zt[2*t-1],s=0;s<2*t;s+=2)r[s]=N[i+4*s>>>2],r[s+1]=N[i+(4*s+4)>>>2];else r=N.subarray(i>>>2,i+8*t>>>2);ii.uniform2fv($t(e),r)},ja:function(e,t,i){if(t<=144)for(var r=Qt[2*t-1],s=0;s<2*t;s+=2)r[s]=U[i+4*s>>>2],r[s+1]=U[i+(4*s+4)>>>2];else r=U.subarray(i>>>2,i+8*t>>>2);ii.uniform2iv($t(e),r)},fa:function(e,t,i){if(t<=96)for(var r=Zt[3*t-1],s=0;s<3*t;s+=3)r[s]=N[i+4*s>>>2],r[s+1]=N[i+(4*s+4)>>>2],r[s+2]=N[i+(4*s+8)>>>2];else r=N.subarray(i>>>2,i+12*t>>>2);ii.uniform3fv($t(e),r)},ia:function(e,t,i){if(t<=96)for(var r=Qt[3*t-1],s=0;s<3*t;s+=3)r[s]=U[i+4*s>>>2],r[s+1]=U[i+(4*s+4)>>>2],r[s+2]=U[i+(4*s+8)>>>2];else r=U.subarray(i>>>2,i+12*t>>>2);ii.uniform3iv($t(e),r)},ea:function(e,t,i){if(t<=72){var r=Zt[4*t-1],s=N;i>>=2;for(var n=0;n<4*t;n+=4){var o=i+n;r[n]=s[o>>>0],r[n+1]=s[o+1>>>0],r[n+2]=s[o+2>>>0],r[n+3]=s[o+3>>>0]}}else r=N.subarray(i>>>2,i+16*t>>>2);ii.uniform4fv($t(e),r)},ha:function(e,t,i){if(t<=72)for(var r=Qt[4*t-1],s=0;s<4*t;s+=4)r[s]=U[i+4*s>>>2],r[s+1]=U[i+(4*s+4)>>>2],r[s+2]=U[i+(4*s+8)>>>2],r[s+3]=U[i+(4*s+12)>>>2];else r=U.subarray(i>>>2,i+16*t>>>2);ii.uniform4iv($t(e),r)},C:function(e){},D:function(e,t,i,r){return function(e,t,i,r){var s=U[r+40>>>2],n={tm_sec:U[r>>>2],tm_min:U[r+4>>>2],tm_hour:U[r+8>>>2],tm_mday:U[r+12>>>2],tm_mon:U[r+16>>>2],tm_year:U[r+20>>>2],tm_wday:U[r+24>>>2],tm_yday:U[r+28>>>2],tm_isdst:U[r+32>>>2],tm_gmtoff:U[r+36>>>2],tm_zone:s?O(s):""},o=O(i),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in a)o=o.replace(new RegExp(c,"g"),a[c]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,i){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=i[0]+r;return r}function u(e,t){return d(e,t,"0")}function p(e,t){function i(e){return e<0?-1:e>0?1:0}var r;return 0===(r=i(e.getFullYear()-t.getFullYear()))&&0===(r=i(e.getMonth()-t.getMonth()))&&(r=i(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function v(e){var t=function(e,t){for(var i=new Date(e.getTime());t>0;){var r=Jt(i.getFullYear()),s=i.getMonth(),n=(r?Kt:ei)[s];if(!(t>n-i.getDate()))return i.setDate(i.getDate()+t),i;t-=n-i.getDate()+1,i.setDate(1),s<11?i.setMonth(s+1):(i.setMonth(0),i.setFullYear(i.getFullYear()+1))}return i}(new Date(e.tm_year+1900,0,1),e.tm_yday),i=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),s=f(i),n=f(r);return p(s,t)<=0?p(n,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return h[e.tm_wday].substring(0,3)},"%A":function(e){return h[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return u((e.tm_year+1900)/100|0,2)},"%d":function(e){return u(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return v(e).toString().substring(2)},"%G":function(e){return v(e)},"%H":function(e){return u(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),u(t,2)},"%j":function(e){return u(e.tm_mday+function(e,t){for(var i=0,r=0;r<=t;i+=e[r++]);return i}(Jt(e.tm_year+1900)?Kt:ei,e.tm_mon-1),3)},"%m":function(e){return u(e.tm_mon+1,2)},"%M":function(e){return u(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return u(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return u(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var i=(e.tm_wday+371-e.tm_yday)%7;4==i||3==i&&Jt(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&Jt(e.tm_year%400-1))&&t++}return u(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return u(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,i=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(i?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in o=o.replace(/%%/g,"\0\0"),g)o.includes(c)&&(o=o.replace(new RegExp(c,"g"),g[c](n)));var m=ci(o=o.replace(/\0\0/g,"%"),!1);return m.length>t?0:(function(e,t){M.set(e,t>>>0)}(m,e),m.length-1)}(e,t,i,r)}},di=(function(){var t={a:li};function i(t,i){var r,s=t.exports;e.asm=s,Z((E=e.asm.xa).buffer),Q=e.asm.Ea,r=e.asm.ya,K.unshift(r),oe()}function s(e){i(e.instance)}function o(e){return function(){if(!b&&(f||v)){if("function"==typeof fetch&&!pe(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return fe(ce)}));if(n)return new Promise((function(e,t){n(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return fe(ce)}))}().then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(ne(),e.instantiateWasm)try{return e.instantiateWasm(t,i)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(b||"function"!=typeof WebAssembly.instantiateStreaming||ue(ce)||pe(ce)||g||"function"!=typeof fetch?o(s):fetch(ce,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(s,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),o(s)}))}))).catch(r)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.ya).apply(null,arguments)},e._malloc=function(){return(di=e._malloc=e.asm.za).apply(null,arguments)}),ui=e._free=function(){return(ui=e._free=e.asm.Aa).apply(null,arguments)},pi=e.___errno_location=function(){return(pi=e.___errno_location=e.asm.Ba).apply(null,arguments)},fi=e.___getTypeName=function(){return(fi=e.___getTypeName=e.asm.Ca).apply(null,arguments)},vi=(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.Da).apply(null,arguments)},e._htons=function(){return(vi=e._htons=e.asm.Fa).apply(null,arguments)}),gi=e._emscripten_builtin_memalign=function(){return(gi=e._emscripten_builtin_memalign=e.asm.Ga).apply(null,arguments)},mi=e.___cxa_is_pointer_type=function(){return(mi=e.___cxa_is_pointer_type=e.asm.Ha).apply(null,arguments)};function Si(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function yi(i){function r(){hi||(hi=!0,e.calledRun=!0,P||(e.noFSInit||Te.init.initialized||Te.init(),Te.ignorePermissions=!1,we.init(),ve(K),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),ee.unshift(t);var t;ve(ee)}()))}i=i||d,ie>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),J.unshift(t);var t;ve(J)}(),ie>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),r()}),1)):r()))}if(e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.Ia).apply(null,arguments)},e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.Ja).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.Ka).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.La).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.Ma).apply(null,arguments)},e.dynCall_viiiiji=function(){return(e.dynCall_viiiiji=e.asm.Na).apply(null,arguments)},e.dynCall_viiijj=function(){return(e.dynCall_viiijj=e.asm.Oa).apply(null,arguments)},e.FS=Te,se=function e(){hi||yi(),hi||(se=e)},e.run=yi,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return yi(),e.ready});const ft=pt;class vt{constructor(e){this.occ=e,this.hashesFromPreviousRun={},this.usedHashes={},this.argCache={}}cleanAllCache(){Object.keys(this.argCache).forEach((e=>{if(this.argCache[e])try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.occ.BRepTools.Clean(e,!0),this.occ.BRepTools.CleanGeometry(e),e.delete()}catch(e){}})):(this.occ.BRepTools.Clean(t,!0),this.occ.BRepTools.CleanGeometry(t),t.delete()))}catch(e){}})),this.argCache={},this.usedHashes={},this.hashesFromPreviousRun={}}cleanCacheForHash(e){if(this.argCache[e])try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.occ.BRepTools.Clean(e,!0),this.occ.BRepTools.CleanGeometry(e),e.delete()}catch(e){}})):(this.occ.BRepTools.Clean(t,!0),this.occ.BRepTools.CleanGeometry(t),t.delete()))}catch(e){}delete this.argCache[e],delete this.usedHashes[e],delete this.hashesFromPreviousRun[e]}cleanUpCache(){const e=Object.keys(this.usedHashes),t=Object.keys(this.hashesFromPreviousRun);let i=[];t.length>0&&(i=t.filter((t=>!e.includes(t)))),i.length>0&&i.forEach((e=>{if(this.argCache[e]){try{const t=this.argCache[e];this.isOCCTObject(t)&&(Array.isArray(t)?t.forEach((e=>{try{this.occ.BRepTools.Clean(e,!0),this.occ.BRepTools.CleanGeometry(e),e.delete()}catch(e){}})):(this.occ.BRepTools.Clean(t,!0),this.occ.BRepTools.CleanGeometry(t),t.delete()))}catch(e){}delete this.argCache[e]}delete this.usedHashes[e]})),this.hashesFromPreviousRun=Object.assign({},this.usedHashes)}isOCCTObject(e){return null!=e&&!Array.isArray(e)&&void 0!==e.$$||Array.isArray(e)&&e.length>0&&void 0!==e[0].$$}cacheOp(e,t){let i=null;const r=this.computeHash(e);this.usedHashes[r]=r,this.hashesFromPreviousRun[r]=r;const s=this.checkCache(r);if(s)this.isOCCTObject(s)?(i=s,i.hash=s.hash):s.value&&(i=s.value);else if(i=t(),Array.isArray(i)&&this.isOCCTObject(i))i.forEach(((t,i)=>{const r=this.computeHash(Object.assign(Object.assign({},e),{index:i}));t.hash=r,this.addToCache(r,t)}));else if(this.isOCCTObject(i))i.hash=r,this.addToCache(r,i);else if(i&&i.compound&&i.data&&i.shapes&&i.shapes.length>0){const t=i,s=this.computeHash(Object.assign(Object.assign({},e),{index:"compound"}));t.compound.hash=s,this.addToCache(s,t.compound),t.shapes.forEach(((t,i)=>{const r=this.computeHash(Object.assign(Object.assign({},e),{index:i}));t.shape.hash=r,this.addToCache(r,t.shape)})),this.addToCache(r,{value:t})}else this.addToCache(r,{value:i});return i}checkCache(e){const t=this.argCache[e];if(!t)return null;if(this.isOCCTObject(t))if(Array.isArray(t))for(const i of t)try{if(i.IsNull&&i.IsNull())return delete this.argCache[e],null}catch(t){return delete this.argCache[e],null}else try{if(t.IsNull&&t.IsNull())return delete this.argCache[e],null}catch(t){return delete this.argCache[e],null}return t}addToCache(e,t){const i=t;return null!==i&&"object"==typeof i&&(i.hash=e),this.argCache[e]=i,e}computeHash(e,t){let i=JSON.stringify(e);i=i.replace(/("ptr":(-?[0-9]*?),)/g,""),i=i.replace(/("ptr":(-?[0-9]*))/g,""),i.includes("ptr")&&console.error("YOU DONE MESSED UP YOUR REGEX.");const r=Math.random.toString()+i;return t?r:this.stringToHash(r)}stringToHash(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}remove(e,t){return e.filter((e=>e.hash!==t.hash||e.ptr!==t.ptr))}}let gt,mt,St;class yt{static distributeBetweenBounds(e,t,i,r=!1){const s=[];let n=i;for(r&&s.push(n);n>t;)n-=e,s.push(n);return s}static computeSideA(e,t){const i=e*Math.PI/180,r=t/Math.cos(i),s=Math.pow(r,2)-Math.pow(t,2);return Math.sqrt(s)}static computeSideAFromHypotenuseAndAngle(e,t){const i=e*Math.PI/180;return t*Math.sin(i)}static computeHypotenuse(e,t){return t/Math.cos(e*Math.PI/180)}}var bt,wt,Et,xt,Tt,Pt;!function(e){e.low="low",e.middle="middle",e.high="high"}(bt||(bt={}));class Ct{constructor(){this.lod=bt.low}}class kt{}class Dt{constructor(e,t,i,r,s,n,o,a,c){this.swirl=.6,this.nrOfDivisions=10,this.addRadiusNarrow=.4,this.addRadiusWide=.2,this.addMiddleHeight=1.6,this.addTopHeight=1.5,this.thickness=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.swirl=e),void 0!==t&&(this.nrOfDivisions=t),void 0!==i&&(this.addRadiusNarrow=i),void 0!==r&&(this.addRadiusWide=r),void 0!==s&&(this.addMiddleHeight=s),void 0!==n&&(this.addTopHeight=n),void 0!==o&&(this.thickness=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.origin=c)}}class Ot{constructor(){this.type="parametric-model",this.name="serenitySwirl"}}class At{}class Ft{constructor(e,t,i,r,s,n,o,a,c,h,l,d){this.profilePoints=[[2,0,0],[4,5,0],[1.5,10,0],[3,14,0]],this.nrOfSides=6,this.nrOfVerticalArches=4,this.archCenterThickness=.8,this.edgesThickness=.2,this.thickness=1,this.baseHeight=.4,this.patchHoles=!0,this.lod=bt.high,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.nrOfSides=e),void 0!==t&&(this.nrOfVerticalArches=t),void 0!==i&&(this.archCenterThickness=i),void 0!==r&&(this.edgesThickness=r),void 0!==s&&(this.thickness=s),void 0!==n&&(this.baseHeight=n),void 0!==o&&(this.patchHoles=o),void 0!==a&&(this.lod=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.origin=h),void 0!==l&&(this.direction=l),void 0!==d&&(this.scale=d)}}class _t{constructor(){this.type="parametric-model",this.name="arabicArchway"}}class Rt{}class Mt{}class Lt{}class Bt{constructor(e,t,i,r,s,n,o,a){this.textHeading="LOVE YOU",this.textName="NORA",this.fullModel=!0,this.thickness=6,this.decorationThickness=1,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textHeading=e),void 0!==t&&(this.textName=t),void 0!==i&&(this.fullModel=i),void 0!==r&&(this.thickness=r),void 0!==s&&(this.decorationThickness=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.origin=o),void 0!==a&&(this.direction=a)}}class It{constructor(){this.type="parametric-model",this.name="eternalLove"}}class Ut{}class Wt{constructor(e,t,i,r,s,n,o,a,c,h,l,d){this.height=6,this.radiusBottom=4,this.radiusTopOffset=2,this.thickness=.6,this.fillet=.2,this.nrOfHandles=1,this.handleDist=2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==i&&(this.radiusTopOffset=i),void 0!==r&&(this.thickness=r),void 0!==s&&(this.fillet=s),void 0!==n&&(this.nrOfHandles=n),void 0!==o&&(this.handleDist=o),void 0!==a&&(this.precision=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.scale=h),void 0!==l&&(this.origin=l),void 0!==d&&(this.direction=d)}}class Nt{constructor(){this.type="parametric-model",this.name="calmCup"}}class Ht{}class Gt{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b){this.height=8,this.radiusBottom=4,this.radiusTopOffset=2,this.radiusMidOffset=2,this.rotationTopAngle=20,this.rotationMidAngle=20,this.nrSkinCellsVertical=5,this.nrSkinCellsHorizontal=10,this.nrSkinCellDivisionsTop=1,this.nrSkinCellDivisionsBottom=3,this.skinCellOuterHeight=.4,this.skinCellInnerHeight=.3,this.skinCellBottomHeight=.4,this.skinCellTopHeight=.4,this.thickness=.6,this.bottomThickness=1,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.radiusBottom=t),void 0!==i&&(this.radiusTopOffset=i),void 0!==r&&(this.radiusMidOffset=r),void 0!==s&&(this.rotationTopAngle=s),void 0!==n&&(this.rotationMidAngle=n),void 0!==o&&(this.nrSkinCellsVertical=o),void 0!==a&&(this.nrSkinCellsHorizontal=a),void 0!==c&&(this.nrSkinCellDivisionsTop=c),void 0!==h&&(this.nrSkinCellDivisionsBottom=h),void 0!==l&&(this.skinCellOuterHeight=l),void 0!==d&&(this.skinCellInnerHeight=d),void 0!==u&&(this.skinCellBottomHeight=u),void 0!==p&&(this.skinCellTopHeight=p),void 0!==f&&(this.thickness=f),void 0!==v&&(this.bottomThickness=v),void 0!==g&&(this.precision=g),void 0!==m&&(this.rotation=m),void 0!==S&&(this.scale=S),void 0!==y&&(this.origin=y),void 0!==b&&(this.direction=b)}}class Vt{constructor(){this.type="parametric-model",this.name="dragonCup"}}class zt{}class jt{}class qt{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m){this.heightBottom=5,this.heightTop=16,this.widthBack=25,this.widthFront=10,this.length=16,this.backOffset=6,this.thickness=.4,this.applyOrnaments=!1,this.filletRadius=2,this.phoneHeight=16.8,this.phoneWidth=7.8,this.phoneThickness=.7,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.heightBottom=e),void 0!==t&&(this.heightTop=t),void 0!==i&&(this.widthBack=i),void 0!==r&&(this.widthFront=r),void 0!==s&&(this.length=s),void 0!==n&&(this.backOffset=n),void 0!==o&&(this.thickness=o),void 0!==a&&(this.applyOrnaments=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.phoneHeight=h),void 0!==l&&(this.phoneWidth=l),void 0!==d&&(this.phoneThickness=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class Yt{constructor(){this.type="parametric-model",this.name="phoneNest"}}class Xt extends kt{}class $t{}class Zt extends kt{}class Qt{}class Jt{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Kt{}class ei{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S){this.textTop="Pepper",this.textFront="For Your Spicy Needs",this.nrSides=4,this.nrOffsets=1,this.height=6,this.radiusBase=4,this.radiusOffset=2,this.coverHeight=1,this.baseHeight=1,this.thickness=.6,this.ornamentalThickness=.1,this.nrOrnamnetsPerSide=10,this.invertOrnaments=!1,this.fillet=.2,this.precision=.01,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.textTop=e),void 0!==t&&(this.textFront=t),void 0!==i&&(this.nrSides=i),void 0!==r&&(this.nrOffsets=r),void 0!==s&&(this.height=s),void 0!==n&&(this.coverHeight=n),void 0!==o&&(this.baseHeight=o),void 0!==a&&(this.radiusBase=a),void 0!==c&&(this.radiusOffset=c),void 0!==h&&(this.thickness=h),void 0!==l&&(this.ornamentalThickness=l),void 0!==d&&(this.nrOrnamnetsPerSide=d),void 0!==u&&(this.invertOrnaments=u),void 0!==p&&(this.fillet=p),void 0!==f&&(this.precision=f),void 0!==v&&(this.rotation=v),void 0!==g&&(this.scale=g),void 0!==m&&(this.origin=m),void 0!==S&&(this.direction=S)}}class ti{constructor(){this.type="parametric-model",this.name="spicyBox"}}class ii{}class ri{}class si{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b,w,E,x,T){this.title="Your Name",this.subtitle="And Message",this.includeLogo=!0,this.thickness=.4,this.kerf=.01,this.phoneWidth=8,this.phoneHeight=16,this.phoneThickness=1,this.backLength=10,this.angle=20,this.offsetAroundPhone=.5,this.penShelf=1,this.phoneLockHeight=.5,this.filletRadius=.3,this.includePattern=!1,this.densityPattern=.4,this.holesForWire=!0,this.wireInputThickness=1.5,this.includeModel=!0,this.includeDrawings=!0,this.spacingDrawings=.5,this.rotation=0,this.origin=[0,0,0],this.direction=[0,1,0],this.scale=[1,1,1],void 0!==e&&(this.title=e),void 0!==t&&(this.subtitle=t),void 0!==i&&(this.includeLogo=i),void 0!==r&&(this.thickness=r),void 0!==s&&(this.kerf=s),void 0!==n&&(this.phoneWidth=n),void 0!==o&&(this.phoneHeight=o),void 0!==a&&(this.phoneThickness=a),void 0!==c&&(this.backLength=c),void 0!==h&&(this.angle=h),void 0!==l&&(this.offsetAroundPhone=l),void 0!==d&&(this.penShelf=d),void 0!==u&&(this.phoneLockHeight=u),void 0!==p&&(this.filletRadius=p),void 0!==f&&(this.includePattern=f),void 0!==v&&(this.densityPattern=v),void 0!==g&&(this.holesForWire=g),void 0!==m&&(this.wireInputThickness=m),void 0!==S&&(this.includeModel=S),void 0!==y&&(this.includeDrawings=y),void 0!==b&&(this.spacingDrawings=b),void 0!==w&&(this.rotation=w),void 0!==E&&(this.origin=E),void 0!==x&&(this.direction=x),void 0!==T&&(this.scale=T)}}class ni{}class oi{constructor(){this.cutWiresColor="#000000",this.engravingWiresColor="#0000ff",this.fileName="bitbybit-droplets-phone-holder",this.angularDeflection=.1,this.curvatureDeflection=.1,this.minimumOfPoints=2,this.uTolerance=1e-9,this.minimumLength=1e-7}}class ai{constructor(){this.fileName="bitbybit-droplets-phone-holder",this.adjustYZ=!0}}class ci{constructor(){this.type="parametric-model",this.name="dropletsPhoneHolder"}}class hi{}class li{}class di{}class ui{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m,S,y,b,w,E,x,T,P,C,k,D,O){this.widthFirstWing=4,this.lengthFirstWing=10,this.terraceWidth=3,this.widthSecondWing=5,this.lengthSecondWing=10,this.heightWalls=3,this.roofAngleFirstWing=15,this.roofAngleSecondWing=25,this.roofOffset=.5,this.roofInsideOverhang=.5,this.roofMaxDistAttachmentBeams=.8,this.roofAttachmentBeamWidth=.2,this.roofAttachmentBeamHeight=.05,this.roofOutsideOverhang=.5,this.columnSize=.3,this.ceilingBeamHeight=.25,this.ceilingBeamWidth=.1,this.nrCeilingBeamsBetweenColumns=3,this.distBetweenColumns=2,this.floorHeight=.1,this.groundLevel=.6,this.facadePanelThickness=.05,this.windowWidthOffset=.1,this.windowHeightOffset=.2,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05,this.lod=bt.high,this.skinOpacity=1,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.widthFirstWing=e),void 0!==t&&(this.lengthFirstWing=t),void 0!==i&&(this.terraceWidth=i),void 0!==r&&(this.widthSecondWing=r),void 0!==s&&(this.lengthSecondWing=s),void 0!==n&&(this.heightWalls=n),void 0!==o&&(this.roofAngleFirstWing=o),void 0!==a&&(this.roofAngleSecondWing=a),void 0!==c&&(this.roofOffset=c),void 0!==h&&(this.roofInsideOverhang=h),void 0!==l&&(this.roofMaxDistAttachmentBeams=l),void 0!==d&&(this.roofAttachmentBeamWidth=d),void 0!==u&&(this.roofAttachmentBeamHeight=u),void 0!==p&&(this.roofOutsideOverhang=p),void 0!==f&&(this.columnSize=f),void 0!==v&&(this.ceilingBeamHeight=v),void 0!==g&&(this.ceilingBeamWidth=g),void 0!==m&&(this.nrCeilingBeamsBetweenColumns=m),void 0!==S&&(this.distBetweenColumns=S),void 0!==y&&(this.floorHeight=y),void 0!==b&&(this.groundLevel=b),void 0!==w&&(this.facadePanelThickness=w),void 0!==E&&(this.windowWidthOffset=E),void 0!==x&&(this.windowHeightOffset=x),void 0!==T&&(this.windowFrameThickness=T),void 0!==P&&(this.windowGlassFrameThickness=P),void 0!==C&&(this.lod=C),void 0!==k&&(this.skinOpacity=k),void 0!==D&&(this.rotation=D),void 0!==O&&(this.origin=O)}}class pi{constructor(){this.type="parametric-model",this.name="zenHideout"}}class fi{}class vi{}class gi{constructor(){this.wallThickness=.4,this.facadePanelThickness=.05,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThckness=.05,this.height=3,this.lengthFirst=1,this.lengthSecond=2,this.rotation=0}}class mi{constructor(){this.thickness=.3,this.glassFrameThickness=.02,this.glassThickness=.005,this.frameThickness=.05,this.height=3,this.width=1,this.rotation=0,this.center=[0,0,0],this.direction=[0,1,0]}}class Si extends mi{}class yi extends gi{}class bi{constructor(){this.name="sandwitch-panel",this.createWindow=!0,this.createInnerPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelWidth=.4,this.exteriorPanelHeight=3,this.exteriorPanelThickness=.05,this.exteriorPanelBottomOffset=0,this.interiorPanelWidth=.4,this.interiorPanelHeight=3,this.interiorPanelThickness=.05,this.interiorPanelBottomOffset=0,this.windowWidthOffset=0,this.windowHeightOffset=0,this.windowFrameThickness=.1,this.windowGlassFrameThickness=.05}}class wi{constructor(){this.name="sandwitch-panel-flex",this.createInteriorPanel=!0,this.createExteriorPanel=!0,this.wallWidth=.3,this.exteriorPanelThickness=.05,this.interiorPanelThickness=.05,this.interiorPanelPolygonPoints=[],this.exteriorPanelPolygonPoints=[]}}class Ei extends bi{}class xi extends wi{}class Ti{}class Pi{}class Ci{}class ki{}class Di{}class Oi{}class Ai{constructor(){this.invert=!1,this.widthFirstLanding=1,this.widthSecondLanding=1,this.lengthFirstWing=2,this.lengthSecondWing=1,this.maxWishedStepHeight=.25,this.stepHeightWidthProportion=1.35,this.totalHeight=1,this.rotation=0,this.origin=[0,0,0]}}class Fi extends Ai{}class _i{}class Ri{constructor(){this.name="roof-cover",this.roofAngle=15,this.roofLength=3,this.roofWidth=3,this.roofOutsideOverhang=.5,this.roofInsideOverhang=1,this.roofOverhangFacade=.1,this.roofThickness=.05,this.roofCoverHeight=.3,this.rotation=0,this.lod=bt.high,this.center=[0,0,0],this.direction=[0,1,0]}}class Mi extends Ri{}class Li{}class Bi{}class Ii{constructor(){this.widthFirstWing=1,this.widthSecondWing=2,this.lengthStairFirstWing=2,this.lengthStairSecondWing=1,this.lengthWallFirstWing=2,this.lengthWallSecondWing=1,this.facadePanelThickness=.05,this.wallThickness=3,this.wallHeightExterior=3,this.wallHeightInterior=3,this.windowFrameOffsetTop=.3,this.windowFrameThickness=.1,this.glassFrameThickness=.05,this.doorWidth=1,this.windowWidthOffset=.3,this.stairTotalHeight=1,this.createStair=!1,this.flipDirection=!1,this.rotation=0,this.origin=[0,0,0]}}class Ui{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.5,this.holeDiameter=1.5,this.holeDistToBottom=2.5,this.stickLength=1.2,this.stickDiameter=.5,this.baseAttachmentHeight=2,this.roofOverhang=1,this.rotation=0,this.chimneyHeight=1,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==i&&(this.interiorHeight=i),void 0!==r&&(this.thickness=r),void 0!==s&&(this.holeDiameter=s),void 0!==n&&(this.holeDistToBottom=n),void 0!==o&&(this.stickLength=o),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.rotation=l),void 0!==d&&(this.chimneyHeight=d),void 0!==u&&(this.origin=u)}}class Wi{constructor(){this.type="parametric-model",this.name="wingtipVilla"}}class Ni{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u){this.interiorWidth=3,this.interiorLength=3,this.interiorHeight=5,this.thickness=.3,this.holeDiameter=1.2,this.holeDistToBottom=2.5,this.stickLength=.9,this.stickDiameter=.3,this.baseAttachmentHeight=2,this.roofOverhang=.5,this.roofAngle=20,this.rotation=0,this.origin=[0,0,0],void 0!==e&&(this.interiorWidth=e),void 0!==t&&(this.interiorLength=t),void 0!==i&&(this.interiorHeight=i),void 0!==r&&(this.thickness=r),void 0!==s&&(this.holeDiameter=s),void 0!==n&&(this.holeDistToBottom=n),void 0!==o&&(this.stickLength=o),void 0!==a&&(this.stickDiameter=a),void 0!==c&&(this.baseAttachmentHeight=c),void 0!==h&&(this.roofOverhang=h),void 0!==l&&(this.roofAngle=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.origin=u)}}class Hi{constructor(){this.type="parametric-model",this.name="chirpyChalet"}}class Gi{}class Vi{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f){this.sittingHeight=.45,this.backRestOffset=.1,this.backRestHeight=.7,this.width=.45,this.length=.45,this.thickness=.05,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.sittingHeight=e),void 0!==t&&(this.backRestOffset=t),void 0!==i&&(this.backRestHeight=i),void 0!==r&&(this.width=r),void 0!==s&&(this.length=s),void 0!==n&&(this.thickness=n),void 0!==o&&(this.nrOrnamentPlanks=o),void 0!==a&&(this.ornamentDepth=a),void 0!==c&&(this.filletRadius=c),void 0!==h&&(this.precision=h),void 0!==l&&(this.drawEdges=l),void 0!==d&&(this.rotation=d),void 0!==u&&(this.scale=u),void 0!==p&&(this.origin=p),void 0!==f&&(this.direction=f)}}class zi{constructor(){this.type="parametric-model",this.name="snakeChair"}}class ji extends kt{}class qi{}class Yi extends kt{}class Xi{}class $i{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class Zi{}class Qi{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v){this.height=.74,this.width=1,this.length=2,this.topThickness=.02,this.topOffset=.03,this.bottomThickness=.05,this.minFillet=.2,this.radiusLegTop=.03,this.radiusLegBottom=.01,this.nrLegPairs=2,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==i&&(this.length=i),void 0!==r&&(this.topThickness=r),void 0!==s&&(this.topOffset=s),void 0!==n&&(this.bottomThickness=n),void 0!==o&&(this.minFillet=o),void 0!==a&&(this.radiusLegTop=a),void 0!==c&&(this.radiusLegBottom=c),void 0!==h&&(this.nrLegPairs=h),void 0!==l&&(this.precision=l),void 0!==d&&(this.drawEdges=d),void 0!==u&&(this.rotation=u),void 0!==p&&(this.scale=p),void 0!==f&&(this.origin=f),void 0!==v&&(this.direction=v)}}class Ji{constructor(){this.type="parametric-model",this.name="elegantTable"}}class Ki extends kt{}class er{}class tr extends kt{}class ir extends kt{}class rr{constructor(){this.index=0}}class sr{}class nr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class or{}class ar{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g,m){this.height=.4,this.width=1,this.length=1.2,this.chamfer=.01,this.topThickness=.05,this.topGlassOffset=.2,this.glassThickness=.005,this.glassHolderLength=.02,this.shelfTopOffset=.15,this.shelfThickness=.03,this.legWidth=.1,this.legDepth=.05,this.precision=.001,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==i&&(this.length=i),void 0!==r&&(this.chamfer=r),void 0!==s&&(this.topThickness=s),void 0!==n&&(this.topGlassOffset=n),void 0!==o&&(this.glassThickness=o),void 0!==a&&(this.glassHolderLength=a),void 0!==c&&(this.shelfTopOffset=c),void 0!==h&&(this.shelfThickness=h),void 0!==l&&(this.legWidth=l),void 0!==d&&(this.legDepth=d),void 0!==u&&(this.precision=u),void 0!==p&&(this.drawEdges=p),void 0!==f&&(this.rotation=f),void 0!==v&&(this.scale=v),void 0!==g&&(this.origin=g),void 0!==m&&(this.direction=m)}}class cr{constructor(){this.type="parametric-model",this.name="goodCoffeeTable"}}class hr extends kt{}class lr{}class dr extends kt{}class ur extends kt{}class pr extends kt{}class fr{constructor(){this.index=0}}class vr{}class gr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}class mr{}class Sr{constructor(e,t,i,r,s,n,o,a,c,h,l,d,u,p,f,v,g){this.height=.74,this.width=1,this.length=2,this.supportLength=.5,this.shelfHeight=.2,this.thickness=.05,this.glassThickness=.005,this.glassOffset=0,this.nrOrnamentPlanks=7,this.ornamentDepth=.01,this.filletRadius=.05,this.precision=.01,this.drawEdges=!0,this.rotation=0,this.scale=1,this.origin=[0,0,0],this.direction=[0,1,0],void 0!==e&&(this.height=e),void 0!==t&&(this.width=t),void 0!==i&&(this.length=i),void 0!==r&&(this.supportLength=r),void 0!==s&&(this.shelfHeight=s),void 0!==n&&(this.thickness=n),void 0!==o&&(this.glassThickness=o),void 0!==a&&(this.glassOffset=a),void 0!==c&&(this.nrOrnamentPlanks=c),void 0!==h&&(this.ornamentDepth=h),void 0!==l&&(this.filletRadius=l),void 0!==d&&(this.precision=d),void 0!==u&&(this.drawEdges=u),void 0!==p&&(this.rotation=p),void 0!==f&&(this.scale=f),void 0!==v&&(this.origin=v),void 0!==g&&(this.direction=g)}}class yr{constructor(){this.type="parametric-model",this.name="snakeTable"}}class br extends kt{}class wr{}class Er extends kt{}class xr{}class Tr{constructor(){this.drawFaces=!0,this.precision=.001,this.drawEdges=!0,this.edgeColour="#ffffff",this.edgeWidth=.06}}!function(e){e.Aboreto="Aboreto",e.Bungee="Bungee",e.IndieFlower="IndieFlower",e.Lugrasimo="Lugrasimo",e.Orbitron="Orbitron",e.Roboto="Roboto",e.RobotoSlab="RobotoSlab",e.Silkscreen="Silkscreen",e.Tektur="Tektur",e.Workbench="Workbench"}(wt||(wt={})),function(e){e.Regular="Regular",e.Black="Black",e.Bold="Bold",e.ExtraBold="ExtraBold",e.Medium="Medium",e.SemiBold="SemiBold",e.BlackItalic="BlackItalic",e.BoldItalic="BoldItalic",e.Italic="Italic",e.Light="Light",e.LightItalic="LightItalic",e.MediumItalic="MediumItalic",e.Thin="Thin",e.ThinItalic="ThinItalic",e.ExtraLight="ExtraLight"}(Et||(Et={})),function(e){e.separatedExtrusion="separatedExtrusion",e.integratedExtrusion="integratedExtrusion",e.cutout="cutout"}(xt||(xt={})),function(e){e.compound="compound",e.cutout="originalCutout",e.cutoutInsideCharacter="cutoutInsideCharacter"}(Tt||(Tt={})),function(e){e.leftTop="leftTop",e.leftMiddle="leftMiddle",e.leftBottom="leftBottom",e.centerTop="centerTop",e.centerMiddle="centerMiddle",e.centerBottom="centerBottom",e.rightTop="rightTop",e.rightMiddle="rightMiddle",e.rightBottom="rightBottom"}(Pt||(Pt={}));const Pr=[{key:"Aboreto",variants:["Regular"]},{key:"Bungee",variants:["Regular"]},{key:"IndieFlower",variants:["Regular"]},{key:"Lugrasimo",variants:["Regular"]},{key:"Orbitron",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Roboto",variants:["Black","BlackItalic","Bold","BoldItalic","Italic","Light","LightItalic","Medium","MediumItalic","Regular","Thin","ThinItalic"]},{key:"RobotoSlab",variants:["Black","Bold","ExtraBold","ExtraLight","Light","Medium","Regular","SemiBold","Thin"]},{key:"Silkscreen",variants:["Bold","Regular"]},{key:"Tektur",variants:["Black","Bold","ExtraBold","Medium","Regular","SemiBold"]},{key:"Workbench",variants:["Regular"]}];class Cr{constructor(e,t,i,r,s,n,o,a,c){this.text="bitbybit.dev",this.fontType=wt.Roboto,this.fontVariant=Et.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontType=t),void 0!==i&&(this.fontVariant=i),void 0!==r&&(this.fontSize=r),void 0!==s&&(this.height=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.origin=o),void 0!==a&&(this.direction=a),void 0!==c&&(this.originAlignment=c)}}class kr{constructor(e,t,i,r,s,n,o,a){this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.fontUrl=t),void 0!==i&&(this.fontSize=i),void 0!==r&&(this.height=r),void 0!==s&&(this.rotation=s),void 0!==n&&(this.origin=n),void 0!==o&&(this.direction=o),void 0!==a&&(this.originAlignment=a)}}class Dr{constructor(e,t,i,r,s,n,o,a){this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.origin=[0,0,0],this.direction=[0,1,0],this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.text=e),void 0!==t&&(this.letterPaths=t),void 0!==i&&(this.fontSize=i),void 0!==r&&(this.height=r),void 0!==s&&(this.rotation=s),void 0!==n&&(this.origin=n),void 0!==o&&(this.direction=o),void 0!==a&&(this.originAlignment=a)}}class Or{constructor(e,t,i,r,s,n,o,a,c,h,l,d){this.facePlanar=!1,this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=wt.Roboto,this.fontVariant=Et.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.faceTextVar=i),void 0!==r&&(this.text=r),void 0!==s&&(this.fontType=s),void 0!==n&&(this.fontVariant=n),void 0!==o&&(this.fontSize=o),void 0!==a&&(this.height=a),void 0!==c&&(this.rotation=c),void 0!==h&&(this.originParamU=h),void 0!==l&&(this.originParamV=l),void 0!==d&&(this.originAlignment=d)}}class Ar{constructor(e,t,i,r,s,n,o,a,c,h,l){this.facePlanar=!1,this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.faceTextVar=i),void 0!==r&&(this.text=r),void 0!==s&&(this.fontUrl=s),void 0!==n&&(this.fontSize=n),void 0!==o&&(this.height=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class Fr{constructor(e,t,i,r,s,n,o,a,c,h,l){this.facePlanar=!1,this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.faceTextVar=i),void 0!==r&&(this.text=r),void 0!==s&&(this.letterPaths=s),void 0!==n&&(this.fontSize=n),void 0!==o&&(this.height=o),void 0!==a&&(this.rotation=a),void 0!==c&&(this.originParamU=c),void 0!==h&&(this.originParamV=h),void 0!==l&&(this.originAlignment=l)}}class _r{constructor(){this.type="parametric-model",this.name="text3d"}}class Rr{constructor(){this.index=0}}class Mr{}class Lr{}class Br{constructor(e,t,i,r,s,n,o,a,c,h){this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontType=wt.Roboto,this.fontVariant=Et.Regular,this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==i&&(this.fontType=i),void 0!==r&&(this.fontVariant=r),void 0!==s&&(this.fontSize=s),void 0!==n&&(this.height=n),void 0!==o&&(this.rotation=o),void 0!==a&&(this.originParamU=a),void 0!==c&&(this.originParamV=c),void 0!==h&&(this.originAlignment=h)}}class Ir{constructor(e,t,i,r,s,n,o,a,c){this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontUrl="https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/Tektur/Tektur-Bold.ttf",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==i&&(this.fontUrl=i),void 0!==r&&(this.fontSize=r),void 0!==s&&(this.height=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.originParamU=o),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class Ur{constructor(e,t,i,r,s,n,o,a,c){this.faceTextVar=xt.separatedExtrusion,this.text="bitbybit.dev",this.fontSize=1.5,this.height=.2,this.rotation=180,this.originParamU=.5,this.originParamV=.5,this.originAlignment=Pt.centerMiddle,void 0!==e&&(this.faceTextVar=e),void 0!==t&&(this.text=t),void 0!==i&&(this.letterPaths=i),void 0!==r&&(this.fontSize=r),void 0!==s&&(this.height=s),void 0!==n&&(this.rotation=n),void 0!==o&&(this.originParamU=o),void 0!==a&&(this.originParamV=a),void 0!==c&&(this.originAlignment=c)}}class Wr{constructor(e,t,i){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.definitions=i)}}class Nr{constructor(e,t,i){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.definitions=i)}}class Hr{constructor(e,t,i){this.facePlanar=!1,void 0!==e&&(this.face=e),void 0!==t&&(this.facePlanar=t),void 0!==i&&(this.definitions=i)}}class Gr{constructor(e,t,i,r){this.uNumber=10,this.vNumber=10,this.height=.2,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==r&&(this.height=r),void 0!==t&&(this.uNumber=t),void 0!==i&&(this.vNumber=i)}}class Vr{constructor(e,t,i,r,s,n,o){this.uNumber=10,this.vNumber=5,this.defaultHeight=.2,this.affectMinHeight=0,this.affectMaxHeight=1,this.precision=.01,void 0!==e&&(this.faces=e),void 0!==t&&(this.affectorPoints=t),void 0!==i&&(this.uNumber=i),void 0!==r&&(this.vNumber=r),void 0!==s&&(this.affectMinHeight=s),void 0!==n&&(this.affectMaxHeight=n),void 0!==o&&(this.precision=o)}}class zr{constructor(){this.type="parametric-model",this.name="patternsFacePatternPyramidSimple"}}class jr{constructor(){this.index=0}}class qr{}class Yr{}class Xr{}class $r{}class Zr{constructor(){this.faceIndex=0}}class Qr{constructor(){this.faceIndex=0,this.uIndex=0,this.vIndex=0}}class Jr{constructor(){this.faceIndex=0,this.uIndex=0}}class Kr{constructor(){this.faceIndex=0,this.vIndex=0}}class es{}class ts{}var is,rs,ss;!function(e){e.wire="wire",e.face="face",e.solid="solid"}(is||(is={}));class ns{constructor(e,t,i,r){this.occtService=e,this.dependencies=i,this.occtAdv=t,this.base=r}wingtipVilla(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","chimneyHeight","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.chimneyHeight<=0?t=`chimney height can't be ${e.chimneyHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const i=e.baseAttachmentHeight,r=e.roofOverhang,s=e.chimneyHeight,n=(e.interiorWidth+2*e.thickness)/2,o=yt.computeSideA(45,n),a=function(e,t){const i=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(i)}(o,n),c=e.thickness,h=[],l=t.shapes.wire.createPolygonWire({points:[[-n,-i-c,0],[n,-i-c,0],[n,e.interiorHeight,0],[0,e.interiorHeight+o,0],[-n,e.interiorHeight,0]].reverse()});h.push(l);const d=e.interiorLength+e.thickness,u=t.shapes.wire.createPolygonWire({points:[[-n,-c,d],[n,-c,d],[n,e.interiorHeight,d],[0,e.interiorHeight+o,d],[-n,e.interiorHeight,d]].reverse()});h.push(u);const p=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,d]});h.push(p);const f=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,d+c]});h.push(f);const v=t.shapes.face.createFaceFromWire({shape:f,planar:!0});h.push(v);const g=t.operations.extrude({shape:v,direction:[0,0,e.stickLength]}),m=t.shapes.solid.createBoxFromCorner({corner:[-n+c,-c,c],width:e.interiorWidth,length:e.interiorLength,height:c}),S=t.shapes.solid.createBoxFromCorner({corner:[-n,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),y=t.shapes.solid.createBoxFromCorner({corner:[n-c,-c,c],width:c,length:e.interiorLength,height:e.interiorHeight+c}),b=t.shapes.solid.createBoxFromCorner({corner:[0,0,0],width:a+r,length:e.interiorLength+2*c+r,height:c}),w=t.shapes.solid.createBoxFromCorner({corner:[0,-c,0],width:a+r+c,length:e.interiorLength+2*c+r,height:c}),E=t.transforms.rotate({shape:b,angle:-45,axis:[0,0,1]});h.push(E);const x=t.transforms.translate({shape:E,translation:[0,e.interiorHeight+o,0]}),T=t.shapes.edge.getCornerPointsOfEdgesForShape({shape:x}),P=t.transforms.rotate({shape:w,angle:225,axis:[0,0,1]});h.push(P);const C=t.transforms.translate({shape:P,translation:T[3]}),k=t.shapes.face.createFaceFromWire({shape:l,planar:!0});h.push(k);const D=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),O=t.shapes.face.createFaceFromWire({shape:u,planar:!0});h.push(O);const A=t.operations.splitShapeWithShapes({shape:O,shapes:[p],nonDestructive:!0,localFuzzyTolerance:1e-4});h.push(...A),console.log(A);const F=t.shapes.face.getFace({shape:A[1],index:0});h.push(F);const _=t.operations.makeThickSolidSimple({shape:F,offset:-e.thickness}),R=function(e,t,i){const r=e.shapes.face.getFaces({shape:t})[3],s=e.shapes.face.getFaceCenterOfMass({shape:r}),n=e.transforms.scale3d({shape:r,scale:[.3,.3,.3],center:s}),o=e.shapes.edge.getCornerPointsOfEdgesForShape({shape:n}),a=o[0],c=o[1],h=o[2],l=o[3],d=Math.max(a[1],c[1],h[1],l[1]),u=[a[0],d+i,a[2]],p=[c[0],d+i,c[2]],f=[h[0],d+i,h[2]],v=[l[0],d+i,l[2]],g=e.shapes.wire.createPolygonWire({points:[a,c,h,l]}),m=e.shapes.wire.createPolygonWire({points:[u,p,f,v]}),S=e.operations.loft({shapes:[g,m],makeSolid:!0});return r.delete(),n.delete(),g.delete(),m.delete(),S}(t,x,s),M=[m,D,_,S,y,x,C,g,t.shapes.compound.makeCompound({shapes:[x,C]}),t.shapes.compound.makeCompound({shapes:[D,_,S,y]}),R],L=M.map(((i,r)=>{const s=t.transforms.rotate({shape:i,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),B=t.shapes.compound.makeCompound({shapes:L});return M.forEach((e=>e.delete())),h.forEach((e=>e.delete())),{compound:B,shapes:L.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"wingtipVilla",roof:{compound:"8",shapes:["5","6"]},walls:{compound:"9",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"7"},chimney:{shape:"10"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}chirpyChalet(e){return function(e,t){!function(e){let t;if(["interiorWidth","interiorLength","interiorHeight","roofAngle","roofOverhang","thickness","holeDiameter","holeDistToBottom","stickDiameter","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number`)})),e.interiorWidth<=0?t=`interior width can't be ${e.interiorWidth}, which is lower or equal to 0`:e.interiorLength<=0?t=`interior length can't be ${e.interiorLength}, which is lower or equal to 0`:e.interiorHeight<=0?t=`interior height can't be ${e.interiorHeight}, which is lower or equal to 0`:e.interiorWidth<e.holeDiameter?t="The width of the bird house is smaller than the hole diameter. Make width larger or hole radius smaller, otherwise the model can't be made.":e.interiorHeight<e.holeDiameter+e.holeDistToBottom?t="The height of the bird house is smaller than the hole diameter and it's distance to the bottom. Increase the height or decrease the hole radius and distance to the bottom, otherwise the model can't be made.":e.interiorHeight<e.stickDiameter?t="The height of the bird house is smaller than the stick diameter. Model can't be made.":e.stickDiameter>e.holeDistToBottom&&(t="The stick diameter is larger than the hole's distance to bottom. Stick can't fit the surface. Model can't be made."),t)throw new Error(t)}(e);const i=e.baseAttachmentHeight,r=e.roofOverhang,s=e.roofAngle,n=e.interiorWidth/2,o=e.interiorLength+2*e.thickness,a=yt.computeSideA(s,o),c=yt.computeSideA(s,o-e.thickness),h=function(e,t){const i=Math.pow(e,2)+Math.pow(t,2);return Math.sqrt(i)}(a,o),l=e.thickness,d=[],u=t.shapes.wire.createPolygonWire({points:[[-n,-i-l,0],[n,-i-l,0],[n,e.interiorHeight+c,0],[-n,e.interiorHeight+c,0]].reverse()});d.push(u);const p=e.interiorLength+e.thickness,f=t.shapes.wire.createPolygonWire({points:[[-n,-l,p],[n,-l,p],[n,e.interiorHeight,p],[-n,e.interiorHeight,p]].reverse()});d.push(f);const v=t.shapes.wire.createCircleWire({radius:e.holeDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom+e.holeDiameter/2,p]});d.push(v);const g=t.shapes.wire.createCircleWire({radius:e.stickDiameter/2,direction:[0,0,1],center:[0,e.holeDistToBottom/2,p+l]});d.push(g);const m=t.shapes.face.createFaceFromWire({shape:g,planar:!0});d.push(m);const S=t.operations.extrude({shape:m,direction:[0,0,e.stickLength]}),y=t.shapes.solid.createBoxFromCorner({corner:[-n,-l,l],width:e.interiorWidth,length:e.interiorLength,height:l}),b=t.shapes.wire.createPolygonWire({points:[[-n,-l,0],[-n,-l,p+l],[-n,e.interiorHeight,p+l],[-n,e.interiorHeight+a,0]].reverse()}),w=t.shapes.face.createFaceFromWire({shape:b,planar:!0}),E=t.operations.extrude({shape:w,direction:[-l,0,0]}),x=t.transforms.translate({shape:E,translation:[e.interiorWidth+l,0,0]}),T=t.shapes.solid.createBoxFromCorner({corner:[-n-l-r,0,0],width:e.interiorWidth+2*l+2*r,length:h+r,height:l}),P=t.transforms.rotate({shape:T,angle:s,axis:[1,0,0]});d.push(P);const C=t.transforms.translate({shape:P,translation:[0,e.interiorHeight+a,0]}),k=t.shapes.face.createFaceFromWire({shape:u,planar:!0});d.push(k);const D=t.operations.makeThickSolidSimple({shape:k,offset:-e.thickness}),O=t.shapes.face.createFaceFromWire({shape:f,planar:!0});d.push(O);const A=t.operations.splitShapeWithShapes({shape:O,shapes:[v],nonDestructive:!0,localFuzzyTolerance:1e-4});d.push(...A);const F=t.shapes.face.getFace({shape:A[1],index:0});d.push(F);const _=t.operations.makeThickSolidSimple({shape:F,offset:-e.thickness}),R=[y,D,_,E,x,C,S,t.shapes.compound.makeCompound({shapes:[C]}),t.shapes.compound.makeCompound({shapes:[D,_,E,x]})],M=R.map(((i,r)=>{const s=t.transforms.rotate({shape:i,angle:e.rotation,axis:[0,1,0]});return t.transforms.translate({shape:s,translation:e.origin})})),L=t.shapes.compound.makeCompound({shapes:M});return R.forEach((e=>e.delete())),d.forEach((e=>e.delete())),{compound:L,shapes:M.map(((e,t)=>({id:t.toString(),shape:e}))),data:{type:"parametric-model",name:"chirpyChalet",roof:{compound:"7",shapes:["5","6"]},walls:{compound:"8",shapes:["1","2","3","4"]},floor:{shape:"0"},stick:{shape:"6"},basicPoints:[{kind:"origin",point:e.origin}]}}}(e,this.occtService)}serenitySwirl(t){return function(t,i,r){if(function(e){let t;if(["swirl","nrOfDivisions","addRadiusNarrow","addRadiusWide","addMiddleHeight","addTopHeight","thickness","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number`)})),e.swirl<0?t="swirl value should be between 0 and 1":e.nrOfDivisions<=0?t=`nrOfDivisions can't be ${e.nrOfDivisions}, which is lower or equal to 0`:e.addRadiusNarrow<0?t=`addRadiusNarrow can't be ${e.addRadiusNarrow}, which is lower then 0`:e.addRadiusWide<0?t=`addRadiusWide can't be ${e.addRadiusWide}, which is lower then 0`:e.addMiddleHeight<=0?t=`addMiddleHeight can't be ${e.addMiddleHeight}, which is lower or equal to 0`:e.addTopHeight<=0?t=`addTopHeight can't be ${e.addTopHeight}, which is lower or equal to 0`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!r.serenitySwirl)throw new Error("Could not compute, to use Serenity Swirl algorithm you must be subscribed.");try{const s=`\n            ${r.serenitySwirl}\n        `;return new Function(s).apply({inputs:t,occt:i,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}arabicArchway(t){return function(t,i,r){if(function(e){let t;if(["nrOfSides","thickness","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number`)})),e.nrOfSides<0?t="swirl value should be between 0 and 1":e.nrOfSides<3?t=`nrOfSides can't be ${e.nrOfSides}, which is lower to 3`:e.nrOfSides>30?t=`nrOfSides can't be ${e.nrOfSides}, which is higher then 30`:e.thickness<=0?t=`thickness can't be ${e.thickness}, which is lower or equal to 0`:3!==e.origin.length&&(t="The origin should be a vector of 3 numbers."),t)throw new Error(t)}(t),!r.arabicArchway)throw new Error("Could not compute, to use Arabic Archway algorithm you must be subscribed.");try{const s=`\n            ${r.arabicArchway}\n        `;return new Function(s).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}eternalLove(t){return function(t,i,r,s){if(!s.eternalLove)throw new Error("Could not compute, to use Eternal Love algorithm you must be subscribed to our silver plan.");try{const n=`\n            ${s.eternalLove}\n        `;return new Function(n).apply({inputs:t,occt:i,occtAdv:r,Inputs:e,Text3D:L})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}calmCup(t){return function(t,i,r,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","fillet","nrOfHandles","handleDist","precision","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.height<6*e.thickness?t="Height must be at least 6 times greater than thickness.":e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.fillet<0||e.fillet>e.thickness/2?t="Fillet must be greater than 0 and less than half of the thickness.":e.handleDist<=2*e.thickness?t="Handle distance from cup must be greater than 2 times the thickness.":e.nrOfHandles<0||e.nrOfHandles>2?t="Nr of handles must be between 0 and 2.":e.radiusTopOffset>.75*e.radiusBottom&&(t="Top offset radius must be less than 0.75 times the bottom radius."),t)throw new Error(t)}(t),!s.calmCup)throw new Error("Could not compute, to use Calm Cup algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.calmCup}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}spicyBox(t){return function(t,i,r,s){if(!s.spicyBox)throw new Error("Could not compute, to use Spicy Box algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.spicyBox}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dragonCup(t){return function(t,i,r,s){if(function(e){let t;if(["height","radiusBottom","radiusTopOffset","thickness","nrSkinCellsHorizontal","nrSkinCellsVertical","precision","rotation"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.radiusBottom<=0?t="Radius bottom must be greater than 0.":e.thickness<=0?t="Thickness must be greater than 0.":e.nrSkinCellsHorizontal<=2?t="Nr of horizontal skin cells must be larger than 2.":e.nrSkinCellsVertical<1&&(t="Nr of horizontal skin cells must be larger than 0."),t)throw new Error(t)}(t),!s.dragonCup)throw new Error("Could not compute, to use Dragon Cup algorithm you must be subscribed to our silver plan.");try{const n=`\n            ${s.dragonCup}\n        `;return new Function(n).apply({inputs:t,occt:i,occtAdv:r,Inputs:e,Advanced:re})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}zenHideout(t){return function(t,i,r){if(function(e){let t;if([].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number`)})),t)throw new Error(t)}(t),!r.zenHideout)throw new Error("Could not compute, to use Zen Hideout algorithm you must be subscribed.");try{const s=`\n            ${r.zenHideout}\n        `;return new Function(s).apply({inputs:t,occt:i,Inputs:e,Things:M,MathHelper:yt,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.dependencies)}elegantTable(t){return function(t,i,r,s){if(!s.elegantTable)throw new Error("Could not compute, to use Elegant Table algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.elegantTable}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}goodCoffeeTable(t){return function(t,i,r,s){if(function(e){let t;if(["height","width","length","topThickness","topGlassOffset","glassThickness","glassHolderLength","chamfer","legWidth","legDepth","precision","rotation","scale"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.height<=e.topThickness?t="Height must be greated then top thickness.":e.width<=0?t="Width must be greater than 0.":e.width<=2*(e.topGlassOffset+e.glassHolderLength)?t="Width must be greater than two top glass offsets and glass holder lengths.":e.length<=0?t="Length must be greater than 0.":e.length<=2*(e.topGlassOffset+e.glassHolderLength)?t="Length must be greater than two top glass offsets and glass holder lengths.":e.topThickness<=2*e.glassThickness?t="Table top thickness must be greater 2 x glass thickness.":e.glassThickness<=0?t="Glass thickness must be greater than 0":e.glassHolderLength<e.glassThickness?t="Glass holder length must be at least as long as glass thickness.":e.shelfTopOffset>e.height-e.topThickness-e.shelfThickness?t=`Shelf top offset is larger than ${e.height-e.topThickness-e.shelfThickness}, which make it go underground.`:e.chamfer>=e.topThickness/2?t="Chamfer distance must be lower or equal than half of the top thickness.":e.chamfer>=e.shelfThickness/2?t="Chamfer distance must be lower or equal than half of the shelf thickness.":e.chamfer>=e.topGlassOffset/2?t="Chamfer distance must be lower or equal than half of the top glass offset.":e.chamfer>=e.legWidth/2?t="Chamfer distance must be lower or equal than half of the leg width.":e.chamfer>=e.legDepth/2?t="Chamfer distance must be lower or equal than half of the leg depth.":e.width<=2*e.legWidth?t="Width of the table must be greater or equal to the width of the two legs.":e.length<=2*e.legDepth?t="Length of the table must be greater or equal to the length of the two legs.":e.legDepth>=e.topGlassOffset+e.glassHolderLength?t="The depth of the leg must be lower or equal to the sum of glass offset and glass holder length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.goodCoffeeTable)throw new Error("Could not compute, to use Good Coffee Table algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.goodCoffeeTable}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeChair(t){return function(t,i,r,s){if(function(e){let t;if(["sittingHeight","backRestOffset","backRestHeight","width","length","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.sittingHeight<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.backRestOffset<0?t="Back rest offset can't be negative.":e.backRestHeight<=0?t="Back rest height must be greater than 0":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.sittingHeight/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.filletRadius>=e.backRestHeight/2?t="Fillet radius must be lower than half of the back height.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeChair)throw new Error("Could not compute, to use Snake Chair algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.snakeChair}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}snakeTable(t){return function(t,i,r,s){if(function(e){let t;if(["height","width","length","shelfHeight","supportLength","glassThickness","glassOffset","thickness","ornamentDepth","nrOrnamentPlanks","filletRadius","precision","rotation","scale"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.height<=2*e.thickness?t="Sitting height must be greater than 2 x thickness.":e.width<=0?t="Width must be greater than 0.":e.length<=2*e.thickness?t="Length height must be greater than 2 x thickness.":e.thickness<=0?t="Width must be greater than 0.":e.nrOrnamentPlanks<0?t="Number of ornament planks must be greater than 0":e.filletRadius<=0?t="Fillet radius must be greater than 0.":e.filletRadius>=e.height/2?t="Fillet radius must be lower than half of the sitting height.":e.filletRadius>=e.length/2?t="Fillet radius must be lower than half of the length.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!s.snakeTable)throw new Error("Could not compute, to use Snake Table algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.snakeTable}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}phoneNest(t){return function(t,i,r,s){if(!s.phoneNest)throw new Error("Could not compute, to use Phone Nest algorithm you must be subscribed to our silver plan.");try{const r=`\n            ${s.phoneNest}\n        `;return new Function(r).apply({inputs:t,occt:i,Inputs:e,Things:M,ShapeParser:dt})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.dependencies)}dropletsPhoneHolder(t){return function(t,i,r,s,n){if(!n.dropletsPhoneHolder)throw new Error("Could not compute, to use Droplets Phone Holder algorithm you must be subscribed.");try{const o=`\n            ${n.dropletsPhoneHolder}\n        `;return new Function(o).apply({inputs:t,occt:i,occtAdv:r,base:s,Inputs:e,Things:M,ShapeParser:dt,Text3D:L})}catch(e){throw new Error(e)}}(t,this.occtService,this.occtAdv,this.base,this.dependencies)}}function os(e,t,i){const r=[];ls(e.letterPaths,i,t,r);const s=new _r;return e.height>0?hs(r,t,e.height,e.rotation,e.origin,e.direction,s):cs(r,t,e.rotation,e.origin,e.direction,s)}function as(e,t,i,r){const s=i.find((t=>t.name===`${e.fontType}-${e.fontVariant}`));if(!s)throw new Error(`Font ${e.fontType}-${e.fontVariant}.ttf does not exist. Current font probably does not have corresponding variant.`);const n=s.font.getPath(e.text,0,0,e.fontSize),o=[];let a=s.font.getPaths(e.text,0,0,e.fontSize,{});const c=s.font.getAdvanceWidth(e.text,e.fontSize),h=n.getBoundingBox();switch(e.originAlignment){case Pt.leftBottom:break;case Pt.leftMiddle:a=s.font.getPaths(e.text,0,(h.y2-h.y1)/2,e.fontSize,{});break;case Pt.leftTop:a=s.font.getPaths(e.text,0,h.y2-h.y1,e.fontSize,{});break;case Pt.centerBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,0,e.fontSize,{});break;case Pt.centerMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,(h.y2-h.y1)/2,e.fontSize,{});break;case Pt.centerTop:a=s.font.getPaths(e.text,-(h.x2-h.x1)/2,h.y2-h.y1,e.fontSize,{});break;case Pt.rightBottom:a=s.font.getPaths(e.text,-(h.x2-h.x1),0,e.fontSize,{});break;case Pt.rightMiddle:a=s.font.getPaths(e.text,-(h.x2-h.x1),(h.y2-h.y1)/2,e.fontSize,{});break;case Pt.rightTop:a=s.font.getPaths(e.text,-(h.x2-h.x1),h.y2-h.y1,e.fontSize,{})}ls(a,r,t,o);const l=new _r;return l.advanceWidth=c,l.boundingBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},e.height>0?hs(o,t,e.height,e.rotation,e.origin,e.direction,l):cs(o,t,e.rotation,e.origin,e.direction,l)}function cs(e,t,i,r,s,n){const o=e.map((e=>{const n=t.transforms.rotate({shape:e,angle:i,axis:[0,1,0]}),o=t.transforms.alignAndTranslate({shape:n,center:r,direction:s});return n.delete(),o}));o.reverse(),e.forEach((e=>e.delete()));const a=t.shapes.face.getFacesCentersOfMass({shapes:o});n.characterCenterCoordinates=a;const c=t.shapes.compound.makeCompound({shapes:o});return n.characterParts=o.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),ds(n,c)}function hs(e,t,i,r,s,n,o){const a=e.map((e=>t.operations.extrude({shape:e,direction:[0,i,0]})));e.forEach((e=>e.delete()));const c=a.map((e=>{const i=t.transforms.rotate({shape:e,angle:r,axis:[0,1,0]}),o=t.transforms.alignAndTranslate({shape:i,center:s,direction:n});return i.delete(),o}));c.reverse();const h=t.shapes.solid.getSolidsCentersOfMass({shapes:c});o.characterCenterCoordinates=h;const l=t.shapes.compound.makeCompound({shapes:c});return o.characterParts=c.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}}))),ds(o,l)}function ls(e,t,i,r){e.forEach((e=>{const s=e.commands,n=[];let o,a,c;for(let e=0;e<s.length;e++){const r=s[e];if("M"===r.type)o=[-r.x,0,r.y],a=o,c=new t.BRepBuilderAPI_MakeWire_1;else if("Z"===r.type)try{let e=null;e=n.length>0?new t.BRepBuilderAPI_MakeFace_22(n[n.length-1],c.Wire()):new t.BRepBuilderAPI_MakeFace_15(c.Wire(),!0),n.push(e.Face()),e.delete(),c.delete()}catch(e){console.error("We could not create faces from this font probably due to self intersections! You should try removing weird characters and pick a more reliable font like 'Roboto'.")}else if("L"===r.type){const e=[-r.x,0,r.y];if(a[0]===e[0]&&a[2]===e[2])continue;const t=i.shapes.edge.line({start:a,end:e});c.Add_1(t),t.delete(),a=e}else if("Q"===r.type){const e=[-r.x1,0,r.y1],t=[-r.x,0,r.y],s=[a,e,t],n=i.shapes.wire.createBezier({points:s,closed:!1});c.Add_2(n),n.delete(),a=t}else if("C"===r.type){const e=[-r.x,0,r.y],t=[a,[-r.x1,0,r.y1],[-r.x2,0,r.y2],e],s=i.shapes.wire.createBezier({points:t,closed:!1});c.Add_2(s),s.delete(),a=e}}if(void 0!==n[n.length-1]){const e=n[n.length-1],t=new H.BasicShapeRepairDto;t.shape=e,t.minTolerance=1e-8,t.maxTolerance=1e-4,t.precision=.001;const s=i.shapeFix.basicShapeRepair(t);e.delete(),r.push(s)}}))}function ds(e,t){if(e){const i=[],r=dt.parse(e,i,"text-3d");return{compound:t,shapes:[{id:"1",shape:t},...i],data:Object.assign({compound:"1"},r)}}}String.prototype.codePointAt||(ss=function(e){if(null==this)throw TypeError();var t=String(this),i=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||r>=i)){var s,n=t.charCodeAt(r);return n>=55296&&n<=56319&&i>r+1&&(s=t.charCodeAt(r+1))>=56320&&s<=57343?1024*(n-55296)+s-56320+65536:n}},(rs=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}())?rs(String.prototype,"codePointAt",{value:ss,configurable:!0,writable:!0}):String.prototype.codePointAt=ss);function us(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function ps(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new us,this.dtree=new us}var fs=new us,vs=new us,gs=new Uint8Array(30),ms=new Uint16Array(30),Ss=new Uint8Array(30),ys=new Uint16Array(30),bs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ws=new us,Es=new Uint8Array(320);function xs(e,t,i,r){var s,n;for(s=0;s<i;++s)e[s]=0;for(s=0;s<30-i;++s)e[s+i]=s/i|0;for(n=r,s=0;s<30;++s)t[s]=n,n+=1<<e[s]}var Ts=new Uint16Array(16);function Ps(e,t,i,r){var s,n;for(s=0;s<16;++s)e.table[s]=0;for(s=0;s<r;++s)e.table[t[i+s]]++;for(e.table[0]=0,n=0,s=0;s<16;++s)Ts[s]=n,n+=e.table[s];for(s=0;s<r;++s)t[i+s]&&(e.trans[Ts[t[i+s]]++]=s)}function Cs(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function ks(e,t,i){if(!t)return i;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+i}function Ds(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=0,r=0,s=0,n=e.tag;do{r=2*r+(1&n),n>>>=1,++s,i+=t.table[s],r-=t.table[s]}while(r>=0);return e.tag=n,e.bitcount-=s,t.trans[i+r]}function Os(e,t,i){var r,s,n,o,a,c;for(r=ks(e,5,257),s=ks(e,5,1),n=ks(e,4,4),o=0;o<19;++o)Es[o]=0;for(o=0;o<n;++o){var h=ks(e,3,0);Es[bs[o]]=h}for(Ps(ws,Es,0,19),a=0;a<r+s;){var l=Ds(e,ws);switch(l){case 16:var d=Es[a-1];for(c=ks(e,2,3);c;--c)Es[a++]=d;break;case 17:for(c=ks(e,3,3);c;--c)Es[a++]=0;break;case 18:for(c=ks(e,7,11);c;--c)Es[a++]=0;break;default:Es[a++]=l}}Ps(t,Es,0,r),Ps(i,Es,r,s)}function As(e,t,i){for(;;){var r,s,n,o,a=Ds(e,t);if(256===a)return 0;if(a<256)e.dest[e.destLen++]=a;else for(r=ks(e,gs[a-=257],ms[a]),s=Ds(e,i),o=n=e.destLen-ks(e,Ss[s],ys[s]);o<n+r;++o)e.dest[e.destLen++]=e.dest[o]}}function Fs(e){for(var t,i;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,i=t;i;--i)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}!function(e,t){var i;for(i=0;i<7;++i)e.table[i]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,i=0;i<24;++i)e.trans[i]=256+i;for(i=0;i<144;++i)e.trans[24+i]=i;for(i=0;i<8;++i)e.trans[168+i]=280+i;for(i=0;i<112;++i)e.trans[176+i]=144+i;for(i=0;i<5;++i)t.table[i]=0;for(t.table[5]=32,i=0;i<32;++i)t.trans[i]=i}(fs,vs),xs(gs,ms,4,3),xs(Ss,ys,2,1),gs[28]=0,ms[28]=258;var _s=function(e,t){var i,r,s=new ps(e,t);do{switch(i=Cs(s),ks(s,2,0)){case 0:r=Fs(s);break;case 1:r=As(s,fs,vs);break;case 2:Os(s,s.ltree,s.dtree),r=As(s,s.ltree,s.dtree);break;default:r=-3}if(0!==r)throw new Error("Data error")}while(!i);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest};function Rs(e,t,i,r,s){return Math.pow(1-s,3)*e+3*Math.pow(1-s,2)*s*t+3*(1-s)*Math.pow(s,2)*i+Math.pow(s,3)*r}function Ms(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Ls(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Bs(e){throw new Error(e)}function Is(e,t){e||Bs(t)}Ms.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Ms.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},Ms.prototype.addX=function(e){this.addPoint(e,null)},Ms.prototype.addY=function(e){this.addPoint(null,e)},Ms.prototype.addBezier=function(e,t,i,r,s,n,o,a){var c=[e,t],h=[i,r],l=[s,n],d=[o,a];this.addPoint(e,t),this.addPoint(o,a);for(var u=0;u<=1;u++){var p=6*c[u]-12*h[u]+6*l[u],f=-3*c[u]+9*h[u]-9*l[u]+3*d[u],v=3*h[u]-3*c[u];if(0!==f){var g=Math.pow(p,2)-4*v*f;if(!(g<0)){var m=(-p+Math.sqrt(g))/(2*f);0<m&&m<1&&(0===u&&this.addX(Rs(c[u],h[u],l[u],d[u],m)),1===u&&this.addY(Rs(c[u],h[u],l[u],d[u],m)));var S=(-p-Math.sqrt(g))/(2*f);0<S&&S<1&&(0===u&&this.addX(Rs(c[u],h[u],l[u],d[u],S)),1===u&&this.addY(Rs(c[u],h[u],l[u],d[u],S)))}}else{if(0===p)continue;var y=-v/p;0<y&&y<1&&(0===u&&this.addX(Rs(c[u],h[u],l[u],d[u],y)),1===u&&this.addY(Rs(c[u],h[u],l[u],d[u],y)))}}},Ms.prototype.addQuad=function(e,t,i,r,s,n){var o=e+2/3*(i-e),a=t+2/3*(r-t),c=o+1/3*(s-e),h=a+1/3*(n-t);this.addBezier(e,t,o,a,c,h,s,n)},Ls.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},Ls.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},Ls.prototype.curveTo=Ls.prototype.bezierCurveTo=function(e,t,i,r,s,n){this.commands.push({type:"C",x1:e,y1:t,x2:i,y2:r,x:s,y:n})},Ls.prototype.quadTo=Ls.prototype.quadraticCurveTo=function(e,t,i,r){this.commands.push({type:"Q",x1:e,y1:t,x:i,y:r})},Ls.prototype.close=Ls.prototype.closePath=function(){this.commands.push({type:"Z"})},Ls.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof Ms){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},Ls.prototype.getBoundingBox=function(){for(var e=new Ms,t=0,i=0,r=0,s=0,n=0;n<this.commands.length;n++){var o=this.commands[n];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,i=s=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,s=o.y;break;case"Q":e.addQuad(r,s,o.x1,o.y1,o.x,o.y),r=o.x,s=o.y;break;case"C":e.addBezier(r,s,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,s=o.y;break;case"Z":r=t,s=i;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},Ls.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var i=this.commands[t];"M"===i.type?e.moveTo(i.x,i.y):"L"===i.type?e.lineTo(i.x,i.y):"C"===i.type?e.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):"Q"===i.type?e.quadraticCurveTo(i.x1,i.y1,i.x,i.y):"Z"===i.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},Ls.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function i(){for(var e=arguments,i="",r=0;r<arguments.length;r+=1){var s=e[r];s>=0&&r>0&&(i+=" "),i+=t(s)}return i}e=void 0!==e?e:2;for(var r="",s=0;s<this.commands.length;s+=1){var n=this.commands[s];"M"===n.type?r+="M"+i(n.x,n.y):"L"===n.type?r+="L"+i(n.x,n.y):"C"===n.type?r+="C"+i(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?r+="Q"+i(n.x1,n.y1,n.x,n.y):"Z"===n.type&&(r+="Z")}return r},Ls.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},Ls.prototype.toDOMElement=function(e){var t=this.toPathData(e),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),i};var Us={fail:Bs,argument:Is,assert:Is},Ws=2147483648,Ns={},Hs={},Gs={};function Vs(e){return function(){return e}}Hs.BYTE=function(e){return Us.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},Gs.BYTE=Vs(1),Hs.CHAR=function(e){return[e.charCodeAt(0)]},Gs.CHAR=Vs(1),Hs.CHARARRAY=function(e){void 0===e&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);return t},Gs.CHARARRAY=function(e){return void 0===e?0:e.length},Hs.USHORT=function(e){return[e>>8&255,255&e]},Gs.USHORT=Vs(2),Hs.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},Gs.SHORT=Vs(2),Hs.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},Gs.UINT24=Vs(3),Hs.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},Gs.ULONG=Vs(4),Hs.LONG=function(e){return e>=Ws&&(e=-(2*Ws-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},Gs.LONG=Vs(4),Hs.FIXED=Hs.ULONG,Gs.FIXED=Gs.ULONG,Hs.FWORD=Hs.SHORT,Gs.FWORD=Gs.SHORT,Hs.UFWORD=Hs.USHORT,Gs.UFWORD=Gs.USHORT,Hs.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},Gs.LONGDATETIME=Vs(8),Hs.TAG=function(e){return Us.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},Gs.TAG=Vs(4),Hs.Card8=Hs.BYTE,Gs.Card8=Gs.BYTE,Hs.Card16=Hs.USHORT,Gs.Card16=Gs.USHORT,Hs.OffSize=Hs.BYTE,Gs.OffSize=Gs.BYTE,Hs.SID=Hs.USHORT,Gs.SID=Gs.USHORT,Hs.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?Hs.NUMBER16(e):Hs.NUMBER32(e)},Gs.NUMBER=function(e){return Hs.NUMBER(e).length},Hs.NUMBER16=function(e){return[28,e>>8&255,255&e]},Gs.NUMBER16=Vs(3),Hs.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},Gs.NUMBER32=Vs(5),Hs.REAL=function(e){var t=e.toString(),i=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(i){var r=parseFloat("1e"+((i[2]?+i[2]:0)+i[1].length));t=(Math.round(e*r)/r).toString()}for(var s="",n=0,o=t.length;n<o;n+=1){var a=t[n];s+="e"===a?"-"===t[++n]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var c=[30],h=0,l=(s+=1&s.length?"f":"ff").length;h<l;h+=2)c.push(parseInt(s.substr(h,2),16));return c},Gs.REAL=function(e){return Hs.REAL(e).length},Hs.NAME=Hs.CHARARRAY,Gs.NAME=Gs.CHARARRAY,Hs.STRING=Hs.CHARARRAY,Gs.STRING=Gs.CHARARRAY,Ns.UTF8=function(e,t,i){for(var r=[],s=i,n=0;n<s;n++,t+=1)r[n]=e.getUint8(t);return String.fromCharCode.apply(null,r)},Ns.UTF16=function(e,t,i){for(var r=[],s=i/2,n=0;n<s;n++,t+=2)r[n]=e.getUint16(t);return String.fromCharCode.apply(null,r)},Hs.UTF16=function(e){for(var t=[],i=0;i<e.length;i+=1){var r=e.charCodeAt(i);t[t.length]=r>>8&255,t[t.length]=255&r}return t},Gs.UTF16=function(e){return 2*e.length};var zs={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};Ns.MACSTRING=function(e,t,i,r){var s=zs[r];if(void 0!==s){for(var n="",o=0;o<i;o++){var a=e.getUint8(t+o);n+=a<=127?String.fromCharCode(a):s[127&a]}return n}};var js,qs="function"==typeof WeakMap&&new WeakMap;function Ys(e){return e>=-128&&e<=127}function Xs(e,t,i){for(var r=0,s=e.length;t<s&&r<64&&0===e[t];)++t,++r;return i.push(128|r-1),t}function $s(e,t,i){for(var r=0,s=e.length,n=t;n<s&&r<64;){var o=e[n];if(!Ys(o))break;if(0===o&&n+1<s&&0===e[n+1])break;++n,++r}i.push(r-1);for(var a=t;a<n;++a)i.push(e[a]+256&255);return n}function Zs(e,t,i){for(var r=0,s=e.length,n=t;n<s&&r<64;){var o=e[n];if(0===o)break;if(Ys(o)&&n+1<s&&Ys(e[n+1]))break;++n,++r}i.push(64|r-1);for(var a=t;a<n;++a){var c=e[a];i.push(c+65536>>8&255,c+256&255)}return n}Hs.MACSTRING=function(e,t){var i=function(e){if(!js)for(var t in js={},zs)js[t]=new String(t);var i=js[e];if(void 0!==i){if(qs){var r=qs.get(i);if(void 0!==r)return r}var s=zs[e];if(void 0!==s){for(var n={},o=0;o<s.length;o++)n[s.charCodeAt(o)]=o+128;return qs&&qs.set(i,n),n}}}(t);if(void 0!==i){for(var r=[],s=0;s<e.length;s++){var n=e.charCodeAt(s);if(n>=128&&void 0===(n=i[n]))return;r[s]=n}return r}},Gs.MACSTRING=function(e,t){var i=Hs.MACSTRING(e,t);return void 0!==i?i.length:0},Hs.VARDELTAS=function(e){for(var t=0,i=[];t<e.length;){var r=e[t];t=0===r?Xs(e,t,i):r>=-128&&r<=127?$s(e,t,i):Zs(e,t,i)}return i},Hs.INDEX=function(e){for(var t=1,i=[t],r=[],s=0;s<e.length;s+=1){var n=Hs.OBJECT(e[s]);Array.prototype.push.apply(r,n),t+=n.length,i.push(t)}if(0===r.length)return[0,0];for(var o=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,c=[void 0,Hs.BYTE,Hs.USHORT,Hs.UINT24,Hs.ULONG][a],h=0;h<i.length;h+=1){var l=c(i[h]);Array.prototype.push.apply(o,l)}return Array.prototype.concat(Hs.Card16(e.length),Hs.OffSize(a),o,r)},Gs.INDEX=function(e){return Hs.INDEX(e).length},Hs.DICT=function(e){for(var t=[],i=Object.keys(e),r=i.length,s=0;s<r;s+=1){var n=parseInt(i[s],0),o=e[n];t=(t=t.concat(Hs.OPERAND(o.value,o.type))).concat(Hs.OPERATOR(n))}return t},Gs.DICT=function(e){return Hs.DICT(e).length},Hs.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},Hs.OPERAND=function(e,t){var i=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)Us.argument(e.length===t.length,"Not enough arguments given for type"+t),i=i.concat(Hs.OPERAND(e[r],t[r]));else if("SID"===t)i=i.concat(Hs.NUMBER(e));else if("offset"===t)i=i.concat(Hs.NUMBER32(e));else if("number"===t)i=i.concat(Hs.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);i=i.concat(Hs.REAL(e))}return i},Hs.OP=Hs.BYTE,Gs.OP=Gs.BYTE;var Qs="function"==typeof WeakMap&&new WeakMap;function Js(e,t,i){if(t.length&&("coverageFormat"!==t[0].name||1===t[0].value))for(var r=0;r<t.length;r+=1){var s=t[r];this[s.name]=s.value}if(this.tableName=e,this.fields=t,i)for(var n=Object.keys(i),o=0;o<n.length;o+=1){var a=n[o],c=i[a];void 0!==this[a]&&(this[a]=c)}}function Ks(e,t,i){void 0===i&&(i=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:i};for(var s=0;s<t.length;s++)r[s+1]={name:e+s,type:"USHORT",value:t[s]};return r}function en(e,t,i){var r=t.length,s=new Array(r+1);s[0]={name:e+"Count",type:"USHORT",value:r};for(var n=0;n<r;n++)s[n+1]={name:e+n,type:"TABLE",value:i(t[n],n)};return s}function tn(e,t,i){var r=t.length,s=[];s[0]={name:e+"Count",type:"USHORT",value:r};for(var n=0;n<r;n++)s=s.concat(i(t[n],n));return s}function rn(e){1===e.format?Js.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Ks("glyph",e.glyphs))):2===e.format?Js.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(tn("rangeRecord",e.ranges,(function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]})))):Us.assert(!1,"Coverage format must be 1 or 2.")}function sn(e){Js.call(this,"scriptListTable",tn("scriptRecord",e,(function(e,t){var i=e.script,r=i.defaultLangSys;return Us.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Js("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Js("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Ks("featureIndex",r.featureIndexes)))}].concat(tn("langSys",i.langSysRecords,(function(e,t){var i=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new Js("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Ks("featureIndex",i.featureIndexes)))}]}))))}]})))}function nn(e){Js.call(this,"featureListTable",tn("featureRecord",e,(function(e,t){var i=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Js("featureTable",[{name:"featureParams",type:"USHORT",value:i.featureParams}].concat(Ks("lookupListIndex",i.lookupListIndexes)))}]})))}function on(e,t){Js.call(this,"lookupListTable",en("lookup",e,(function(e){var i=t[e.lookupType];return Us.assert(!!i,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new Js("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(en("subtable",e.subtables,i)))})))}Hs.CHARSTRING=function(e){if(Qs){var t=Qs.get(e);if(void 0!==t)return t}for(var i=[],r=e.length,s=0;s<r;s+=1){var n=e[s];i=i.concat(Hs[n.type](n.value))}return Qs&&Qs.set(e,i),i},Gs.CHARSTRING=function(e){return Hs.CHARSTRING(e).length},Hs.OBJECT=function(e){var t=Hs[e.type];return Us.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},Gs.OBJECT=function(e){var t=Gs[e.type];return Us.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},Hs.TABLE=function(e){for(var t=[],i=e.fields.length,r=[],s=[],n=0;n<i;n+=1){var o=e.fields[n],a=Hs[o.type];Us.argument(void 0!==a,"No encoding function for field type "+o.type+" ("+o.name+")");var c=e[o.name];void 0===c&&(c=o.value);var h=a(c);"TABLE"===o.type?(s.push(t.length),t=t.concat([0,0]),r.push(h)):t=t.concat(h)}for(var l=0;l<r.length;l+=1){var d=s[l],u=t.length;Us.argument(u<65536,"Table "+e.tableName+" too big."),t[d]=u>>8,t[d+1]=255&u,t=t.concat(r[l])}return t},Gs.TABLE=function(e){for(var t=0,i=e.fields.length,r=0;r<i;r+=1){var s=e.fields[r],n=Gs[s.type];Us.argument(void 0!==n,"No sizeOf function for field type "+s.type+" ("+s.name+")");var o=e[s.name];void 0===o&&(o=s.value),t+=n(o),"TABLE"===s.type&&(t+=2)}return t},Hs.RECORD=Hs.TABLE,Gs.RECORD=Gs.TABLE,Hs.LITERAL=function(e){return e},Gs.LITERAL=function(e){return e.length},Js.prototype.encode=function(){return Hs.TABLE(this)},Js.prototype.sizeOf=function(){return Gs.TABLE(this)},rn.prototype=Object.create(Js.prototype),rn.prototype.constructor=rn,sn.prototype=Object.create(Js.prototype),sn.prototype.constructor=sn,nn.prototype=Object.create(Js.prototype),nn.prototype.constructor=nn,on.prototype=Object.create(Js.prototype),on.prototype.constructor=on;var an={Table:Js,Record:Js,Coverage:rn,ScriptList:sn,FeatureList:nn,LookupList:on,ushortList:Ks,tableList:en,recordList:tn};function cn(e,t){return e.getUint8(t)}function hn(e,t){return e.getUint16(t,!1)}function ln(e,t){return e.getUint32(t,!1)}function dn(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var un={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function pn(e,t){this.data=e,this.offset=t,this.relativeOffset=0}pn.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},pn.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},pn.prototype.parseCard8=pn.prototype.parseByte,pn.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},pn.prototype.parseCard16=pn.prototype.parseUShort,pn.prototype.parseSID=pn.prototype.parseUShort,pn.prototype.parseOffset16=pn.prototype.parseUShort,pn.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},pn.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},pn.prototype.parseULong=function(){var e=ln(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},pn.prototype.parseOffset32=pn.prototype.parseULong,pn.prototype.parseFixed=function(){var e=dn(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},pn.prototype.parseString=function(e){var t=this.data,i=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var s=0;s<e;s++)r+=String.fromCharCode(t.getUint8(i+s));return r},pn.prototype.parseTag=function(){return this.parseString(4)},pn.prototype.parseLongDateTime=function(){var e=ln(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},pn.prototype.parseVersion=function(e){var t=hn(this.data,this.offset+this.relativeOffset),i=hn(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+i/e/10},pn.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=un[e]*t},pn.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),i=this.data,r=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=i.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},pn.prototype.parseOffset16List=pn.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),i=this.data,r=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=i.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},pn.prototype.parseShortList=function(e){for(var t=new Array(e),i=this.data,r=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=i.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},pn.prototype.parseByteList=function(e){for(var t=new Array(e),i=this.data,r=this.offset+this.relativeOffset,s=0;s<e;s++)t[s]=i.getUint8(r++);return this.relativeOffset+=e,t},pn.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var i=new Array(e),r=0;r<e;r++)i[r]=t.call(this);return i},pn.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var i=new Array(e),r=0;r<e;r++)i[r]=t.call(this);return i},pn.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var i=new Array(e),r=Object.keys(t),s=0;s<e;s++){for(var n={},o=0;o<r.length;o++){var a=r[o],c=t[a];n[a]=c.call(this)}i[s]=n}return i},pn.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var i=new Array(e),r=Object.keys(t),s=0;s<e;s++){for(var n={},o=0;o<r.length;o++){var a=r[o],c=t[a];n[a]=c.call(this)}i[s]=n}return i},pn.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),i={},r=0;r<t.length;r++){var s=t[r],n=e[s];i[s]=n.call(this)}return i},pn.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},pn.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),i=new Array(t),r=0;r<t;r++)i[r]=this.parseValueRecord(e);return i},pn.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new pn(this.data,this.offset+t).parseStruct(e)},pn.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new pn(this.data,this.offset+t).parseStruct(e)},pn.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),i=t.length,r=this.relativeOffset,s=new Array(i),n=0;n<i;n++){var o=t[n];if(0!==o)if(this.relativeOffset=o,e){for(var a=this.parseOffset16List(),c=new Array(a.length),h=0;h<a.length;h++)this.relativeOffset=o+a[h],c[h]=e.call(this);s[n]=c}else s[n]=this.parseUShortList();else s[n]=void 0}return this.relativeOffset=r,s},pn.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),i=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(i)};if(2===t){for(var r=new Array(i),s=0;s<i;s++)r[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},pn.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:pn.uShort,end:pn.uShort,classId:pn.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},pn.list=function(e,t){return function(){return this.parseList(e,t)}},pn.list32=function(e,t){return function(){return this.parseList32(e,t)}},pn.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},pn.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},pn.pointer=function(e){return function(){return this.parsePointer(e)}},pn.pointer32=function(e){return function(){return this.parsePointer32(e)}},pn.tag=pn.prototype.parseTag,pn.byte=pn.prototype.parseByte,pn.uShort=pn.offset16=pn.prototype.parseUShort,pn.uShortList=pn.prototype.parseUShortList,pn.uLong=pn.offset32=pn.prototype.parseULong,pn.uLongList=pn.prototype.parseULongList,pn.struct=pn.prototype.parseStruct,pn.coverage=pn.prototype.parseCoverage,pn.classDef=pn.prototype.parseClassDef;var fn={reserved:pn.uShort,reqFeatureIndex:pn.uShort,featureIndexes:pn.uShortList};pn.prototype.parseScriptList=function(){return this.parsePointer(pn.recordList({tag:pn.tag,script:pn.pointer({defaultLangSys:pn.pointer(fn),langSysRecords:pn.recordList({tag:pn.tag,langSys:pn.pointer(fn)})})}))||[]},pn.prototype.parseFeatureList=function(){return this.parsePointer(pn.recordList({tag:pn.tag,feature:pn.pointer({featureParams:pn.offset16,lookupListIndexes:pn.uShortList})}))||[]},pn.prototype.parseLookupList=function(e){return this.parsePointer(pn.list(pn.pointer((function(){var t=this.parseUShort();Us.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var i=this.parseUShort(),r=16&i;return{lookupType:t,lookupFlag:i,subtables:this.parseList(pn.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},pn.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return Us.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:pn.offset32,featureTableSubstitutionOffset:pn.offset32})}))||[]};var vn={getByte:cn,getCard8:cn,getUShort:hn,getCard16:hn,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ln,getFixed:dn,getTag:function(e,t){for(var i="",r=t;r<t+4;r+=1)i+=String.fromCharCode(e.getInt8(r));return i},getOffset:function(e,t,i){for(var r=0,s=0;s<i;s+=1)r<<=8,r+=e.getUint8(t+s);return r},getBytes:function(e,t,i){for(var r=[],s=t;s<i;s+=1)r.push(e.getUint8(s));return r},bytesToString:function(e){for(var t="",i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return t},Parser:pn};function gn(e,t,i){e.segments.push({end:t,start:t,delta:-(t-i),offset:0,glyphIndex:i})}var mn={parse:function(e,t){var i={};i.version=vn.getUShort(e,t),Us.argument(0===i.version,"cmap table version should be 0."),i.numTables=vn.getUShort(e,t+2);for(var r=-1,s=i.numTables-1;s>=0;s-=1){var n=vn.getUShort(e,t+4+8*s),o=vn.getUShort(e,t+4+8*s+2);if(3===n&&(0===o||1===o||10===o)||0===n&&(0===o||1===o||2===o||3===o||4===o)){r=vn.getULong(e,t+4+8*s+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var a=new vn.Parser(e,t+r);if(i.format=a.parseUShort(),12===i.format)!function(e,t){var i;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=i=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<i;r+=1)for(var s=t.parseULong(),n=t.parseULong(),o=t.parseULong(),a=s;a<=n;a+=1)e.glyphIndexMap[a]=o,o++}(i,a);else{if(4!==i.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+i.format+").");!function(e,t,i,r,s){var n;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=n=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new vn.Parser(i,r+s+14),a=new vn.Parser(i,r+s+16+2*n),c=new vn.Parser(i,r+s+16+4*n),h=new vn.Parser(i,r+s+16+6*n),l=r+s+16+8*n,d=0;d<n-1;d+=1)for(var u=void 0,p=o.parseUShort(),f=a.parseUShort(),v=c.parseShort(),g=h.parseUShort(),m=f;m<=p;m+=1)0!==g?(l=h.offset+h.relativeOffset-2,l+=g,l+=2*(m-f),0!==(u=vn.getUShort(i,l))&&(u=u+v&65535)):u=m+v&65535,e.glyphIndexMap[m]=u}(i,a,e,t,r)}return i},make:function(e){var t,i=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),i=!1;break}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:i?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:i?12:20}];i||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new an.Table("cmap",r);for(s.segments=[],t=0;t<e.length;t+=1){for(var n=e.get(t),o=0;o<n.unicodes.length;o+=1)gn(s,n.unicodes[o],t);s.segments=s.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(s);var a=s.segments.length,c=0,h=[],l=[],d=[],u=[],p=[],f=[];for(t=0;t<a;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(h=h.concat({name:"end_"+t,type:"USHORT",value:v.end}),l=l.concat({name:"start_"+t,type:"USHORT",value:v.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),u=u.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):c+=1,i||void 0===v.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(a-c),s.searchRange=2*Math.pow(2,Math.floor(Math.log(a-c)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(h),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(l),s.fields=s.fields.concat(d),s.fields=s.fields.concat(u),s.fields=s.fields.concat(p),s.cmap4Length=14+2*h.length+2+2*l.length+2*d.length+2*u.length+2*p.length,!i){var g=16+4*f.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),s.fields=s.fields.concat(f)}return s}},Sn=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],yn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],bn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],wn=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function En(e){this.font=e}function xn(e){this.cmap=e}function Tn(e,t){this.encoding=e,this.charset=t}function Pn(e){switch(e.version){case 1:this.names=wn.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<wn.length?this.names[t]=wn[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-wn.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var i=0;i<e.numberOfGlyphs;i++)this.names[i]=wn[i+e.glyphNameIndex[i]];break;default:this.names=[]}}En.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),i=this.font.glyphs;if(i)for(var r=0;r<i.length;r+=1)for(var s=i.get(r),n=0;n<s.unicodes.length;n+=1)if(s.unicodes[n]===t)return r;return null},xn.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},Tn.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),i=this.encoding[t];return this.charset.indexOf(i)},Pn.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},Pn.prototype.glyphIndexToName=function(e){return this.names[e]};var Cn=function(e,t,i,r,s){e.beginPath(),e.moveTo(t,i),e.lineTo(r,s),e.stroke()};function kn(e){this.bindConstructorValues(e)}function Dn(e,t,i){Object.defineProperty(e,t,{get:function(){return e.path,e[i]},set:function(t){e[i]=t},enumerable:!0,configurable:!0})}function On(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];r.path.unitsPerEm=e.unitsPerEm,this.glyphs[i]=r}this.length=t&&t.length||0}kn.prototype.bindConstructorValues=function(e){var t,i;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,i=t||new Ls,{configurable:!0,get:function(){return"function"==typeof i&&(i=i()),i},set:function(e){i=e}}))},kn.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},kn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},kn.prototype.getPath=function(e,t,i,r,s){var n,o;e=void 0!==e?e:0,t=void 0!==t?t:0,i=void 0!==i?i:72,r||(r={});var a=r.xScale,c=r.yScale;if(r.hinting&&s&&s.hinting&&(o=this.path&&s.hinting.exec(this,i)),o)n=s.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),a=c=1;else{n=this.path.commands;var h=1/(this.path.unitsPerEm||1e3)*i;void 0===a&&(a=h),void 0===c&&(c=h)}for(var l=new Ls,d=0;d<n.length;d+=1){var u=n[d];"M"===u.type?l.moveTo(e+u.x*a,t+-u.y*c):"L"===u.type?l.lineTo(e+u.x*a,t+-u.y*c):"Q"===u.type?l.quadraticCurveTo(e+u.x1*a,t+-u.y1*c,e+u.x*a,t+-u.y*c):"C"===u.type?l.curveTo(e+u.x1*a,t+-u.y1*c,e+u.x2*a,t+-u.y2*c,e+u.x*a,t+-u.y*c):"Z"===u.type&&l.closePath()}return l},kn.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],i=0;i<this.points.length;i+=1){var r=this.points[i];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return Us.argument(0===t.length,"There are still points left in the current contour."),e},kn.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],i=[],r=0;r<e.length;r+=1){var s=e[r];"Z"!==s.type&&(t.push(s.x),i.push(s.y)),"Q"!==s.type&&"C"!==s.type||(t.push(s.x1),i.push(s.y1)),"C"===s.type&&(t.push(s.x2),i.push(s.y2))}var n={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,i),leftSideBearing:this.leftSideBearing};return isFinite(n.xMin)||(n.xMin=0),isFinite(n.xMax)||(n.xMax=this.advanceWidth),isFinite(n.yMin)||(n.yMin=0),isFinite(n.yMax)||(n.yMax=0),n.rightSideBearing=this.advanceWidth-n.leftSideBearing-(n.xMax-n.xMin),n},kn.prototype.draw=function(e,t,i,r,s){this.getPath(t,i,r,s).draw(e)},kn.prototype.drawPoints=function(e,t,i,r){function s(t,i,r,s){e.beginPath();for(var n=0;n<t.length;n+=1)e.moveTo(i+t[n].x*s,r+t[n].y*s),e.arc(i+t[n].x*s,r+t[n].y*s,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,i=void 0!==i?i:0,r=void 0!==r?r:24;for(var n=1/this.path.unitsPerEm*r,o=[],a=[],c=this.path,h=0;h<c.commands.length;h+=1){var l=c.commands[h];void 0!==l.x&&o.push({x:l.x,y:-l.y}),void 0!==l.x1&&a.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&a.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",s(o,t,i,n),e.fillStyle="red",s(a,t,i,n)},kn.prototype.drawMetrics=function(e,t,i,r){var s;t=void 0!==t?t:0,i=void 0!==i?i:0,r=void 0!==r?r:24,s=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",Cn(e,t,-1e4,t,1e4),Cn(e,-1e4,i,1e4,i);var n=this.xMin||0,o=this.yMin||0,a=this.xMax||0,c=this.yMax||0,h=this.advanceWidth||0;e.strokeStyle="blue",Cn(e,t+n*s,-1e4,t+n*s,1e4),Cn(e,t+a*s,-1e4,t+a*s,1e4),Cn(e,-1e4,i+-o*s,1e4,i+-o*s),Cn(e,-1e4,i+-c*s,1e4,i+-c*s),e.strokeStyle="green",Cn(e,t+h*s,-1e4,t+h*s,1e4)},On.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],i=this.font._IndexToUnicodeMap[e];if(i)for(var r=0;r<i.unicodes.length;r++)t.addUnicode(i.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},On.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var An={GlyphSet:On,glyphLoader:function(e,t){return new kn({index:t,font:e})},ttfGlyphLoader:function(e,t,i,r,s,n){return function(){var o=new kn({index:t,font:e});return o.path=function(){i(o,r,s);var t=n(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},Dn(o,"xMin","_xMin"),Dn(o,"xMax","_xMax"),Dn(o,"yMin","_yMin"),Dn(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,i,r){return function(){var s=new kn({index:t,font:e});return s.path=function(){var t=i(e,s,r);return t.unitsPerEm=e.unitsPerEm,t},s}}};function Fn(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i+=1)if(!Fn(e[i],t[i]))return!1;return!0}return!1}function _n(e){return e.length<1240?107:e.length<33900?1131:32768}function Rn(e,t,i){var r,s,n=[],o=[],a=vn.getCard16(e,t);if(0!==a){var c=vn.getByte(e,t+2);r=t+(a+1)*c+2;for(var h=t+3,l=0;l<a+1;l+=1)n.push(vn.getOffset(e,h,c)),h+=c;s=r+n[a]}else s=t+2;for(var d=0;d<n.length-1;d+=1){var u=vn.getBytes(e,r+n[d],r+n[d+1]);i&&(u=i(u)),o.push(u)}return{objects:o,startOffset:t,endOffset:s}}function Mn(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",i=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),s=r>>4,n=15&r;if(15===s)break;if(t+=i[s],15===n)break;t+=i[n]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ln(e,t,i){t=void 0!==t?t:0;var r=new vn.Parser(e,t),s=[],n=[];for(i=void 0!==i?i:e.length;r.relativeOffset<i;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),s.push([o,n]),n=[]):n.push(Mn(r,o))}return function(e){for(var t={},i=0;i<e.length;i+=1){var r,s=e[i][0],n=e[i][1];if(r=1===n.length?n[0]:n,t.hasOwnProperty(s)&&!isNaN(t[s]))throw new Error("Object "+t+" already has key "+s);t[s]=r}return t}(s)}function Bn(e,t){return t<=390?Sn[t]:e[t-391]}function In(e,t,i){for(var r,s={},n=0;n<t.length;n+=1){var o=t[n];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var c=0;c<o.type.length;c++)void 0===(r=void 0!==e[o.op]?e[o.op][c]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[c]?o.value[c]:null),"SID"===o.type[c]&&(r=Bn(i,r)),a[c]=r;s[o.name]=a}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=Bn(i,r)),s[o.name]=r}return s}var Un=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Wn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Nn(e,t){return In(Ln(e,0,e.byteLength),Un,t)}function Hn(e,t,i,r){return In(Ln(e,t,i),Wn,r)}function Gn(e,t,i,r){for(var s=[],n=0;n<i.length;n+=1){var o=Nn(new DataView(new Uint8Array(i[n]).buffer),r);o._subrs=[],o._subrsBias=0,o._defaultWidthX=0,o._nominalWidthX=0;var a=o.private[0],c=o.private[1];if(0!==a&&0!==c){var h=Hn(e,c+t,a,r);if(o._defaultWidthX=h.defaultWidthX,o._nominalWidthX=h.nominalWidthX,0!==h.subrs){var l=Rn(e,c+h.subrs+t);o._subrs=l.objects,o._subrsBias=_n(o._subrs)}o._privateDict=h}s.push(o)}return s}function Vn(e,t,i){var r,s,n,o,a,c,h,l,d=new Ls,u=[],p=0,f=!1,v=!1,g=0,m=0;if(e.isCIDFont){var S=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[S];a=y._subrs,c=y._subrsBias,h=y._defaultWidthX,l=y._nominalWidthX}else a=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,h=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var b=h;function w(e,t){v&&d.closePath(),d.moveTo(e,t),v=!0}function E(){u.length%2!=0&&!f&&(b=u.shift()+l),p+=u.length>>1,u.length=0,f=!0}return function i(h){for(var S,y,x,T,P,C,k,D,O,A,F,_,R=0;R<h.length;){var M=h[R];switch(R+=1,M){case 1:case 3:case 18:case 23:E();break;case 4:u.length>1&&!f&&(b=u.shift()+l,f=!0),m+=u.pop(),w(g,m);break;case 5:for(;u.length>0;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 6:for(;u.length>0&&(g+=u.shift(),d.lineTo(g,m),0!==u.length);)m+=u.shift(),d.lineTo(g,m);break;case 7:for(;u.length>0&&(m+=u.shift(),d.lineTo(g,m),0!==u.length);)g+=u.shift(),d.lineTo(g,m);break;case 8:for(;u.length>0;)r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(r,s,n,o,g,m);break;case 10:P=u.pop()+c,(C=a[P])&&i(C);break;case 11:return;case 12:switch(M=h[R],R+=1,M){case 35:r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),k=n+u.shift(),D=o+u.shift(),O=k+u.shift(),A=D+u.shift(),F=O+u.shift(),_=A+u.shift(),g=F+u.shift(),m=_+u.shift(),u.shift(),d.curveTo(r,s,n,o,k,D),d.curveTo(O,A,F,_,g,m);break;case 34:r=g+u.shift(),s=m,n=r+u.shift(),o=s+u.shift(),k=n+u.shift(),D=o,O=k+u.shift(),A=o,F=O+u.shift(),_=m,g=F+u.shift(),d.curveTo(r,s,n,o,k,D),d.curveTo(O,A,F,_,g,m);break;case 36:r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),k=n+u.shift(),D=o,O=k+u.shift(),A=o,F=O+u.shift(),_=A+u.shift(),g=F+u.shift(),d.curveTo(r,s,n,o,k,D),d.curveTo(O,A,F,_,g,m);break;case 37:r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),k=n+u.shift(),D=o+u.shift(),O=k+u.shift(),A=D+u.shift(),F=O+u.shift(),_=A+u.shift(),Math.abs(F-g)>Math.abs(_-m)?g=F+u.shift():m=_+u.shift(),d.curveTo(r,s,n,o,k,D),d.curveTo(O,A,F,_,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+M),u.length=0}break;case 14:u.length>0&&!f&&(b=u.shift()+l,f=!0),v&&(d.closePath(),v=!1);break;case 19:case 20:E(),R+=p+7>>3;break;case 21:u.length>2&&!f&&(b=u.shift()+l,f=!0),m+=u.pop(),w(g+=u.pop(),m);break;case 22:u.length>1&&!f&&(b=u.shift()+l,f=!0),w(g+=u.pop(),m);break;case 24:for(;u.length>2;)r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(r,s,n,o,g,m);g+=u.shift(),m+=u.shift(),d.lineTo(g,m);break;case 25:for(;u.length>6;)g+=u.shift(),m+=u.shift(),d.lineTo(g,m);r=g+u.shift(),s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+u.shift(),d.curveTo(r,s,n,o,g,m);break;case 26:for(u.length%2&&(g+=u.shift());u.length>0;)r=g,s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n,m=o+u.shift(),d.curveTo(r,s,n,o,g,m);break;case 27:for(u.length%2&&(m+=u.shift());u.length>0;)r=g+u.shift(),s=m,n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o,d.curveTo(r,s,n,o,g,m);break;case 28:S=h[R],y=h[R+1],u.push((S<<24|y<<16)>>16),R+=2;break;case 29:P=u.pop()+e.gsubrsBias,(C=e.gsubrs[P])&&i(C);break;case 30:for(;u.length>0&&(r=g,s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+(1===u.length?u.shift():0),d.curveTo(r,s,n,o,g,m),0!==u.length);)r=g+u.shift(),s=m,n=r+u.shift(),o=s+u.shift(),m=o+u.shift(),g=n+(1===u.length?u.shift():0),d.curveTo(r,s,n,o,g,m);break;case 31:for(;u.length>0&&(r=g+u.shift(),s=m,n=r+u.shift(),o=s+u.shift(),m=o+u.shift(),g=n+(1===u.length?u.shift():0),d.curveTo(r,s,n,o,g,m),0!==u.length);)r=g,s=m+u.shift(),n=r+u.shift(),o=s+u.shift(),g=n+u.shift(),m=o+(1===u.length?u.shift():0),d.curveTo(r,s,n,o,g,m);break;default:M<32?console.log("Glyph "+t.index+": unknown operator "+M):M<247?u.push(M-139):M<251?(S=h[R],R+=1,u.push(256*(M-247)+S+108)):M<255?(S=h[R],R+=1,u.push(256*-(M-251)-S-108)):(S=h[R],y=h[R+1],x=h[R+2],T=h[R+3],R+=4,u.push((S<<24|y<<16|x<<8|T)/65536))}}}(i),t.advanceWidth=b,d}function zn(e,t){var i,r=Sn.indexOf(e);return r>=0&&(i=r),(r=t.indexOf(e))>=0?i=r+Sn.length:(i=Sn.length+t.length,t.push(e)),i}function jn(e,t,i){for(var r={},s=0;s<e.length;s+=1){var n=e[s],o=t[n.name];void 0===o||Fn(o,n.value)||("SID"===n.type&&(o=zn(o,i)),r[n.op]={name:n.name,type:n.type,value:o})}return r}function qn(e,t){var i=new an.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=jn(Un,e,t),i}function Yn(e){var t=new an.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Xn(e){var t=[],i=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,s=0,n=0;n<i.commands.length;n+=1){var o=void 0,a=void 0,c=i.commands[n];if("Q"===c.type){var h=1/3,l=2/3;c={type:"C",x:c.x,y:c.y,x1:Math.round(h*r+l*c.x1),y1:Math.round(h*s+l*c.y1),x2:Math.round(h*c.x+l*c.x1),y2:Math.round(h*c.y+l*c.y1)}}if("M"===c.type)o=Math.round(c.x-r),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(c.x),s=Math.round(c.y);else if("L"===c.type)o=Math.round(c.x-r),a=Math.round(c.y-s),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(c.x),s=Math.round(c.y);else if("C"===c.type){var d=Math.round(c.x1-r),u=Math.round(c.y1-s),p=Math.round(c.x2-c.x1),f=Math.round(c.y2-c.y1);o=Math.round(c.x-c.x2),a=Math.round(c.y-c.y2),t.push({name:"dx1",type:"NUMBER",value:d}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:p}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(c.x),s=Math.round(c.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var $n={parse:function(e,t,i,r){i.tables.cff={};var s=function(e,t){var i={};return i.formatMajor=vn.getCard8(e,t),i.formatMinor=vn.getCard8(e,t+1),i.size=vn.getCard8(e,t+2),i.offsetSize=vn.getCard8(e,t+3),i.startOffset=t,i.endOffset=t+4,i}(e,t),n=Rn(e,s.endOffset,vn.bytesToString),o=Rn(e,n.endOffset),a=Rn(e,o.endOffset,vn.bytesToString),c=Rn(e,a.endOffset);i.gsubrs=c.objects,i.gsubrsBias=_n(i.gsubrs);var h=Gn(e,t,o.objects,a.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var l=h[0];if(i.tables.cff.topDict=l,l._privateDict&&(i.defaultWidthX=l._privateDict.defaultWidthX,i.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(i.isCIDFont=!0),i.isCIDFont){var d=l.fdArray,u=l.fdSelect;if(0===d||0===u)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=Rn(e,d+=t),f=Gn(e,t,p.objects,a.objects);l._fdArray=f,u+=t,l._fdSelect=function(e,t,i,r){var s,n=[],o=new vn.Parser(e,t),a=o.parseCard8();if(0===a)for(var c=0;c<i;c++){if((s=o.parseCard8())>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");n.push(s)}else{if(3!==a)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);var h,l=o.parseCard16(),d=o.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var u=0;u<l;u++){if(s=o.parseCard8(),h=o.parseCard16(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");if(h>i)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;d<h;d++)n.push(s);d=h}if(h!==i)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}return n}(e,u,i.numGlyphs,f.length)}var v,g=t+l.private[1],m=Hn(e,g,l.private[0],a.objects);if(i.defaultWidthX=m.defaultWidthX,i.nominalWidthX=m.nominalWidthX,0!==m.subrs){var S=g+m.subrs,y=Rn(e,S);i.subrs=y.objects,i.subrsBias=_n(i.subrs)}else i.subrs=[],i.subrsBias=0;r.lowMemory?(v=function(e,t){var i,r,s=[],n=vn.getCard16(e,t);if(0!==n){var o=vn.getByte(e,t+2);i=t+(n+1)*o+2;for(var a=t+3,c=0;c<n+1;c+=1)s.push(vn.getOffset(e,a,o)),a+=o;r=i+s[n]}else r=t+2;return{offsets:s,startOffset:t,endOffset:r}}(e,t+l.charStrings),i.nGlyphs=v.offsets.length):(v=Rn(e,t+l.charStrings),i.nGlyphs=v.objects.length);var b=function(e,t,i,r){var s,n,o=new vn.Parser(e,t);i-=1;var a=[".notdef"],c=o.parseCard8();if(0===c)for(var h=0;h<i;h+=1)s=o.parseSID(),a.push(Bn(r,s));else if(1===c)for(;a.length<=i;){s=o.parseSID(),n=o.parseCard8();for(var l=0;l<=n;l+=1)a.push(Bn(r,s)),s+=1}else{if(2!==c)throw new Error("Unknown charset format "+c);for(;a.length<=i;){s=o.parseSID(),n=o.parseCard16();for(var d=0;d<=n;d+=1)a.push(Bn(r,s)),s+=1}}return a}(e,t+l.charset,i.nGlyphs,a.objects);if(0===l.encoding?i.cffEncoding=new Tn(yn,b):1===l.encoding?i.cffEncoding=new Tn(bn,b):i.cffEncoding=function(e,t,i){var r,s={},n=new vn.Parser(e,t),o=n.parseCard8();if(0===o)for(var a=n.parseCard8(),c=0;c<a;c+=1)s[r=n.parseCard8()]=c;else{if(1!==o)throw new Error("Unknown encoding format "+o);var h=n.parseCard8();r=1;for(var l=0;l<h;l+=1)for(var d=n.parseCard8(),u=n.parseCard8(),p=d;p<=d+u;p+=1)s[p]=r,r+=1}return new Tn(s,i)}(e,t+l.encoding,b),i.encoding=i.encoding||i.cffEncoding,i.glyphs=new An.GlyphSet(i),r.lowMemory)i._push=function(r){var s=function(e,t,i,r,s){var n=vn.getCard16(i,r),o=0;0!==n&&(o=r+(n+1)*vn.getByte(i,r+2)+2);var a=vn.getBytes(i,o+t[e],o+t[e+1]);return a}(r,v.offsets,e,t+l.charStrings);i.glyphs.push(r,An.cffGlyphLoader(i,r,Vn,s))};else for(var w=0;w<i.nGlyphs;w+=1){var E=v.objects[w];i.glyphs.push(w,An.cffGlyphLoader(i,w,Vn,E))}},make:function(e,t){for(var i,r=new an.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),s=1/t.unitsPerEm,n={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],a=1;a<e.length;a+=1)i=e.get(a),o.push(i.name);var c=[];r.header=new an.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new an.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var i=0;i<e.length;i+=1)t.names.push({name:"name_"+i,type:"NAME",value:e[i]});return t}([t.postScriptName]);var h=qn(n,c);r.topDictIndex=Yn(h),r.globalSubrIndex=new an.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var i=new an.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var s=zn(e[r],t);i.fields.push({name:"glyph_"+r,type:"SID",value:s})}return i}(o,c),r.charStringsIndex=function(e){for(var t=new an.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),i=0;i<e.length;i+=1){var r=e.get(i),s=Xn(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:s})}return t}(e),r.privateDict=function(e,t){var i=new an.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=jn(Wn,{},t),i}(0,c),r.stringIndex=function(e){var t=new an.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var i=0;i<e.length;i+=1)t.strings.push({name:"string_"+i,type:"STRING",value:e[i]});return t}(c);var l=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return n.charset=l,n.encoding=0,n.charStrings=n.charset+r.charsets.sizeOf(),n.private[1]=n.charStrings+r.charStringsIndex.sizeOf(),h=qn(n,c),r.topDictIndex=Yn(h),r}},Zn={parse:function(e,t){var i={},r=new vn.Parser(e,t);return i.version=r.parseVersion(),i.fontRevision=Math.round(1e3*r.parseFixed())/1e3,i.checkSumAdjustment=r.parseULong(),i.magicNumber=r.parseULong(),Us.argument(1594834165===i.magicNumber,"Font header has wrong magic number."),i.flags=r.parseUShort(),i.unitsPerEm=r.parseUShort(),i.created=r.parseLongDateTime(),i.modified=r.parseLongDateTime(),i.xMin=r.parseShort(),i.yMin=r.parseShort(),i.xMax=r.parseShort(),i.yMax=r.parseShort(),i.macStyle=r.parseUShort(),i.lowestRecPPEM=r.parseUShort(),i.fontDirectionHint=r.parseShort(),i.indexToLocFormat=r.parseShort(),i.glyphDataFormat=r.parseShort(),i},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,i=t;return e.createdTimestamp&&(i=e.createdTimestamp+2082844800),new an.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:i},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Qn={parse:function(e,t){var i={},r=new vn.Parser(e,t);return i.version=r.parseVersion(),i.ascender=r.parseShort(),i.descender=r.parseShort(),i.lineGap=r.parseShort(),i.advanceWidthMax=r.parseUShort(),i.minLeftSideBearing=r.parseShort(),i.minRightSideBearing=r.parseShort(),i.xMaxExtent=r.parseShort(),i.caretSlopeRise=r.parseShort(),i.caretSlopeRun=r.parseShort(),i.caretOffset=r.parseShort(),r.relativeOffset+=8,i.metricDataFormat=r.parseShort(),i.numberOfHMetrics=r.parseUShort(),i},make:function(e){return new an.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Jn={parse:function(e,t,i,r,s,n,o){o.lowMemory?function(e,t,i,r,s){var n,o;e._hmtxTableData={};for(var a=new vn.Parser(t,i),c=0;c<s;c+=1)c<r&&(n=a.parseUShort(),o=a.parseShort()),e._hmtxTableData[c]={advanceWidth:n,leftSideBearing:o}}(e,t,i,r,s):function(e,t,i,r,s){for(var n,o,a=new vn.Parser(e,t),c=0;c<r;c+=1){c<i&&(n=a.parseUShort(),o=a.parseShort());var h=s.get(c);h.advanceWidth=n,h.leftSideBearing=o}}(t,i,r,s,n)},make:function(e){for(var t=new an.Table("hmtx",[]),i=0;i<e.length;i+=1){var r=e.get(i),s=r.advanceWidth||0,n=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:s}),t.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:n})}return t}},Kn={make:function(e){for(var t=new an.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),i="",r=12+4*e.length,s=0;s<e.length;++s){var n=i.indexOf(e[s]);n<0&&(n=i.length,i+=e[s]),t.fields.push({name:"offset "+s,type:"USHORT",value:r+n}),t.fields.push({name:"length "+s,type:"USHORT",value:e[s].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:i}),t},parse:function(e,t){var i=new vn.Parser(e,t),r=i.parseULong();Us.argument(1===r,"Unsupported ltag table version."),i.skip("uLong",1);for(var s=i.parseULong(),n=[],o=0;o<s;o++){for(var a="",c=t+i.parseUShort(),h=i.parseUShort(),l=c;l<c+h;++l)a+=String.fromCharCode(e.getInt8(l));n.push(a)}return n}},eo={parse:function(e,t){var i={},r=new vn.Parser(e,t);return i.version=r.parseVersion(),i.numGlyphs=r.parseUShort(),1===i.version&&(i.maxPoints=r.parseUShort(),i.maxContours=r.parseUShort(),i.maxCompositePoints=r.parseUShort(),i.maxCompositeContours=r.parseUShort(),i.maxZones=r.parseUShort(),i.maxTwilightPoints=r.parseUShort(),i.maxStorage=r.parseUShort(),i.maxFunctionDefs=r.parseUShort(),i.maxInstructionDefs=r.parseUShort(),i.maxStackElements=r.parseUShort(),i.maxSizeOfInstructions=r.parseUShort(),i.maxComponentElements=r.parseUShort(),i.maxComponentDepth=r.parseUShort()),i},make:function(e){return new an.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},to=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],io={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ro={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},so={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function no(e,t,i){switch(e){case 0:if(65535===t)return"und";if(i)return i[t];break;case 1:return io[t];case 3:return so[t]}}var oo="utf-16",ao={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},co={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function ho(e,t,i){switch(e){case 0:return oo;case 1:return co[i]||ao[t];case 3:if(1===t||10===t)return oo}}function lo(e){var t={};for(var i in e)t[e[i]]=parseInt(i);return t}function uo(e,t,i,r,s,n){return new an.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:i},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:n}])}function po(e,t){var i=function(e,t){var i=e.length,r=t.length-i+1;e:for(var s=0;s<r;s++)for(;s<r;s++){for(var n=0;n<i;n++)if(t[s+n]!==e[n])continue e;return s}return-1}(e,t);if(i<0){i=t.length;for(var r=0,s=e.length;r<s;++r)t.push(e[r])}return i}var fo={parse:function(e,t,i){for(var r={},s=new vn.Parser(e,t),n=s.parseUShort(),o=s.parseUShort(),a=s.offset+s.parseUShort(),c=0;c<o;c++){var h=s.parseUShort(),l=s.parseUShort(),d=s.parseUShort(),u=s.parseUShort(),p=to[u]||u,f=s.parseUShort(),v=s.parseUShort(),g=no(h,d,i),m=ho(h,l,d);if(void 0!==m&&void 0!==g){var S;if(S=m===oo?Ns.UTF16(e,a+v,f):Ns.MACSTRING(e,a+v,f,m)){var y=r[p];void 0===y&&(y=r[p]={}),y[g]=S}}}return 1===n&&s.parseUShort(),r},make:function(e,t){var i,r=[],s={},n=lo(to);for(var o in e){var a=n[o];if(void 0===a&&(a=o),i=parseInt(a),isNaN(i))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');s[i]=e[o],r.push(i)}for(var c=lo(io),h=lo(so),l=[],d=[],u=0;u<r.length;u++){var p=s[i=r[u]];for(var f in p){var v=p[f],g=1,m=c[f],S=ro[m],y=ho(g,S,m),b=Hs.MACSTRING(v,y);void 0===b&&(g=0,(m=t.indexOf(f))<0&&(m=t.length,t.push(f)),S=4,b=Hs.UTF16(v));var w=po(b,d);l.push(uo(g,S,m,i,b.length,w));var E=h[f];if(void 0!==E){var x=Hs.UTF16(v),T=po(x,d);l.push(uo(3,1,E,i,x.length,T))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var P=new an.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),C=0;C<l.length;C++)P.fields.push({name:"record_"+C,type:"RECORD",value:l[C]});return P.fields.push({name:"strings",type:"LITERAL",value:d}),P}},vo=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],go={parse:function(e,t){var i={},r=new vn.Parser(e,t);i.version=r.parseUShort(),i.xAvgCharWidth=r.parseShort(),i.usWeightClass=r.parseUShort(),i.usWidthClass=r.parseUShort(),i.fsType=r.parseUShort(),i.ySubscriptXSize=r.parseShort(),i.ySubscriptYSize=r.parseShort(),i.ySubscriptXOffset=r.parseShort(),i.ySubscriptYOffset=r.parseShort(),i.ySuperscriptXSize=r.parseShort(),i.ySuperscriptYSize=r.parseShort(),i.ySuperscriptXOffset=r.parseShort(),i.ySuperscriptYOffset=r.parseShort(),i.yStrikeoutSize=r.parseShort(),i.yStrikeoutPosition=r.parseShort(),i.sFamilyClass=r.parseShort(),i.panose=[];for(var s=0;s<10;s++)i.panose[s]=r.parseByte();return i.ulUnicodeRange1=r.parseULong(),i.ulUnicodeRange2=r.parseULong(),i.ulUnicodeRange3=r.parseULong(),i.ulUnicodeRange4=r.parseULong(),i.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),i.fsSelection=r.parseUShort(),i.usFirstCharIndex=r.parseUShort(),i.usLastCharIndex=r.parseUShort(),i.sTypoAscender=r.parseShort(),i.sTypoDescender=r.parseShort(),i.sTypoLineGap=r.parseShort(),i.usWinAscent=r.parseUShort(),i.usWinDescent=r.parseUShort(),i.version>=1&&(i.ulCodePageRange1=r.parseULong(),i.ulCodePageRange2=r.parseULong()),i.version>=2&&(i.sxHeight=r.parseShort(),i.sCapHeight=r.parseShort(),i.usDefaultChar=r.parseUShort(),i.usBreakChar=r.parseUShort(),i.usMaxContent=r.parseUShort()),i},make:function(e){return new an.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:vo,getUnicodeRange:function(e){for(var t=0;t<vo.length;t+=1){var i=vo[t];if(e>=i.begin&&e<i.end)return t}return-1}},mo={parse:function(e,t){var i={},r=new vn.Parser(e,t);switch(i.version=r.parseVersion(),i.italicAngle=r.parseFixed(),i.underlinePosition=r.parseShort(),i.underlineThickness=r.parseShort(),i.isFixedPitch=r.parseULong(),i.minMemType42=r.parseULong(),i.maxMemType42=r.parseULong(),i.minMemType1=r.parseULong(),i.maxMemType1=r.parseULong(),i.version){case 1:i.names=wn.slice();break;case 2:i.numberOfGlyphs=r.parseUShort(),i.glyphNameIndex=new Array(i.numberOfGlyphs);for(var s=0;s<i.numberOfGlyphs;s++)i.glyphNameIndex[s]=r.parseUShort();i.names=[];for(var n=0;n<i.numberOfGlyphs;n++)if(i.glyphNameIndex[n]>=wn.length){var o=r.parseChar();i.names.push(r.parseString(o))}break;case 2.5:i.numberOfGlyphs=r.parseUShort(),i.offset=new Array(i.numberOfGlyphs);for(var a=0;a<i.numberOfGlyphs;a++)i.offset[a]=r.parseChar()}return i},make:function(){return new an.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},So=new Array(9);So[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(pn.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(pn.coverage),substitute:this.parseOffset16List()}:void Us.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},So[2]=function(){var e=this.parseUShort();return Us.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(pn.coverage),sequences:this.parseListOfLists()}},So[3]=function(){var e=this.parseUShort();return Us.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(pn.coverage),alternateSets:this.parseListOfLists()}},So[4]=function(){var e=this.parseUShort();return Us.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(pn.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var yo={sequenceIndex:pn.uShort,lookupListIndex:pn.uShort};So[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(pn.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,yo)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(pn.coverage),classDef:this.parsePointer(pn.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,yo)}}))};if(3===t){var i=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(i,pn.pointer(pn.coverage)),lookupRecords:this.parseRecordList(r,yo)}}Us.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},So[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(pn.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(yo)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(pn.coverage),backtrackClassDef:this.parsePointer(pn.classDef),inputClassDef:this.parsePointer(pn.classDef),lookaheadClassDef:this.parsePointer(pn.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(yo)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(pn.pointer(pn.coverage)),inputCoverage:this.parseList(pn.pointer(pn.coverage)),lookaheadCoverage:this.parseList(pn.pointer(pn.coverage)),lookupRecords:this.parseRecordList(yo)}:void Us.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},So[7]=function(){var e=this.parseUShort();Us.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),i=new pn(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:So[t].call(i)}},So[8]=function(){var e=this.parseUShort();return Us.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(pn.coverage),backtrackCoverage:this.parseList(pn.pointer(pn.coverage)),lookaheadCoverage:this.parseList(pn.pointer(pn.coverage)),substitutes:this.parseUShortList()}};var bo=new Array(9);bo[1]=function(e){return 1===e.substFormat?new an.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new an.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)}].concat(an.ushortList("substitute",e.substitute)))},bo[2]=function(e){return Us.assert(1===e.substFormat,"Lookup type 2 substFormat must be 1."),new an.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)}].concat(an.tableList("seqSet",e.sequences,(function(e){return new an.Table("sequenceSetTable",an.ushortList("sequence",e))}))))},bo[3]=function(e){return Us.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new an.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)}].concat(an.tableList("altSet",e.alternateSets,(function(e){return new an.Table("alternateSetTable",an.ushortList("alternate",e))}))))},bo[4]=function(e){return Us.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new an.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)}].concat(an.tableList("ligSet",e.ligatureSets,(function(e){return new an.Table("ligatureSetTable",an.tableList("ligature",e,(function(e){return new an.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(an.ushortList("component",e.components,e.components.length+1)))})))}))))},bo[6]=function(e){if(1===e.substFormat){var t=new an.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new an.Coverage(e.coverage)}].concat(an.tableList("chainRuleSet",e.chainRuleSets,(function(e){return new an.Table("chainRuleSetTable",an.tableList("chainRule",e,(function(e){var t=an.ushortList("backtrackGlyph",e.backtrack,e.backtrack.length).concat(an.ushortList("inputGlyph",e.input,e.input.length+1)).concat(an.ushortList("lookaheadGlyph",e.lookahead,e.lookahead.length)).concat(an.ushortList("substitution",[],e.lookupRecords.length));return e.lookupRecords.forEach((function(e,i){t=t.concat({name:"sequenceIndex"+i,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+i,type:"USHORT",value:e.lookupListIndex})})),new an.Table("chainRuleTable",t)})))}))));return t}if(2===e.substFormat)Us.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===e.substFormat){var i=[{name:"substFormat",type:"USHORT",value:e.substFormat}];return i.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach((function(e,t){i.push({name:"backtrackCoverage"+t,type:"TABLE",value:new an.Coverage(e)})})),i.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach((function(e,t){i.push({name:"inputCoverage"+t,type:"TABLE",value:new an.Coverage(e)})})),i.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach((function(e,t){i.push({name:"lookaheadCoverage"+t,type:"TABLE",value:new an.Coverage(e)})})),i.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach((function(e,t){i=i.concat({name:"sequenceIndex"+t,type:"USHORT",value:e.sequenceIndex}).concat({name:"lookupListIndex"+t,type:"USHORT",value:e.lookupListIndex})})),new an.Table("chainContextTable",i)}Us.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var wo={parse:function(e,t){var i=new pn(e,t=t||0),r=i.parseVersion(1);return Us.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(So)}:{version:r,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(So),variations:i.parseFeatureVariationsList()}},make:function(e){return new an.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new an.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new an.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new an.LookupList(e.lookups,bo)}])}},Eo={parse:function(e,t){var i=new vn.Parser(e,t),r=i.parseULong();Us.argument(1===r,"Unsupported META table version."),i.parseULong(),i.parseULong();for(var s=i.parseULong(),n={},o=0;o<s;o++){var a=i.parseTag(),c=i.parseULong(),h=i.parseULong(),l=Ns.UTF8(e,t+c,h);n[a]=l}return n},make:function(e){var t=Object.keys(e).length,i="",r=16+12*t,s=new an.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var n in e){var o=i.length;i+=e[n],s.fields.push({name:"tag "+n,type:"TAG",value:n}),s.fields.push({name:"offset "+n,type:"ULONG",value:r+o}),s.fields.push({name:"length "+n,type:"ULONG",value:e[n].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:i}),s}};function xo(e){return Math.log(e)/Math.log(2)|0}function To(e){for(;e.length%4!=0;)e.push(0);for(var t=0,i=0;i<e.length;i+=4)t+=(e[i]<<24)+(e[i+1]<<16)+(e[i+2]<<8)+e[i+3];return t%Math.pow(2,32)}function Po(e,t,i,r){return new an.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==i?i:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function Co(e){var t=new an.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var i=Math.pow(2,xo(t.numTables));t.searchRange=16*i,t.entrySelector=xo(i),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],s=[],n=t.sizeOf()+Po().sizeOf()*t.numTables;n%4!=0;)n+=1,s.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var a=e[o];Us.argument(4===a.tableName.length,"Table name"+a.tableName+" is invalid.");var c=a.sizeOf(),h=Po(a.tableName,To(a.encode()),n,c);for(r.push({name:h.tag+" Table Record",type:"RECORD",value:h}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),n+=c,Us.argument(!isNaN(n),"Something went wrong calculating the offset.");n%4!=0;)n+=1,s.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(s),t}function ko(e,t,i){for(var r=0;r<t.length;r+=1){var s=e.charToGlyphIndex(t[r]);if(s>0)return e.glyphs.get(s).getMetrics()}return i}function Do(e){for(var t=0,i=0;i<e.length;i+=1)t+=e[i];return t/e.length}var Oo=function(e){for(var t,i=[],r=[],s=[],n=[],o=[],a=[],c=[],h=0,l=0,d=0,u=0,p=0,f=0;f<e.glyphs.length;f+=1){var v=e.glyphs.get(f),g=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+f+"): advanceWidth is not a number.");(t>g||void 0===t)&&g>0&&(t=g),h<g&&(h=g);var m=go.getUnicodeRange(g);if(m<32)l|=1<<m;else if(m<64)d|=1<<m-32;else if(m<96)u|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<m-96}if(".notdef"!==v.name){var S=v.getMetrics();i.push(S.xMin),r.push(S.yMin),s.push(S.xMax),n.push(S.yMax),a.push(S.leftSideBearing),c.push(S.rightSideBearing),o.push(v.advanceWidth)}}var y={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,s),yMax:Math.max.apply(null,n),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:Do(o),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,c)};y.ascender=e.ascender,y.descender=e.descender;var b=Zn.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),w=Qn.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),E=eo.make(e.glyphs.length),x=go.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:h,ulUnicodeRange1:l,ulUnicodeRange2:d,ulUnicodeRange3:u,ulUnicodeRange4:p,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:ko(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:ko(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),T=Jn.make(e.glyphs),P=mn.make(e.glyphs),C=e.getEnglishName("fontFamily"),k=e.getEnglishName("fontSubfamily"),D=C+" "+k,O=e.getEnglishName("postScriptName");O||(O=C.replace(/\s/g,"")+"-"+k);var A={};for(var F in e.names)A[F]=e.names[F];A.uniqueID||(A.uniqueID={en:e.getEnglishName("manufacturer")+":"+D}),A.postScriptName||(A.postScriptName={en:O}),A.preferredFamily||(A.preferredFamily=e.names.fontFamily),A.preferredSubfamily||(A.preferredSubfamily=e.names.fontSubfamily);var _=[],R=fo.make(A,_),M=_.length>0?Kn.make(_):void 0,L=mo.make(),B=$n.make(e.glyphs,{version:e.getEnglishName("version"),fullName:D,familyName:C,weightName:k,postScriptName:O,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),I=e.metas&&Object.keys(e.metas).length>0?Eo.make(e.metas):void 0,U=[b,w,E,x,R,P,L,B,T];M&&U.push(M),e.tables.gsub&&U.push(wo.make(e.tables.gsub)),I&&U.push(I);for(var W=Co(U),N=To(W.encode()),H=W.fields,G=!1,V=0;V<H.length;V+=1)if("head table"===H[V].name){H[V].value.checkSumAdjustment=2981146554-N,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return W};function Ao(e,t){for(var i=0,r=e.length-1;i<=r;){var s=i+r>>>1,n=e[s].tag;if(n===t)return s;n<t?i=s+1:r=s-1}return-i-1}function Fo(e,t){for(var i=0,r=e.length-1;i<=r;){var s=i+r>>>1,n=e[s];if(n===t)return s;n<t?i=s+1:r=s-1}return-i-1}function _o(e,t){for(var i,r=0,s=e.length-1;r<=s;){var n=r+s>>>1,o=(i=e[n]).start;if(o===t)return i;o<t?r=n+1:s=n-1}if(r>0)return t>(i=e[r-1]).end?0:i}function Ro(e,t){this.font=e,this.tableName=t}function Mo(e){Ro.call(this,e,"gpos")}function Lo(e){Ro.call(this,e,"gsub")}function Bo(e,t){var i=e.length;if(i!==t.length)return!1;for(var r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Io(e,t,i){for(var r=e.subtables,s=0;s<r.length;s++){var n=r[s];if(n.substFormat===t)return n}if(i)return r.push(i),i}function Uo(e,t){if(!e)throw t}function Wo(e,t,i,r,s){var n;return(t&r)>0?(n=e.parseByte(),t&s||(n=-n),n=i+n):n=(t&s)>0?i:i+e.parseShort(),n}function No(e,t,i){var r,s,n=new vn.Parser(t,i);if(e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)o.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var c=0;c<e.instructionLength;c+=1)e.instructions.push(n.parseByte());var h=o[o.length-1]+1;r=[];for(var l=0;l<h;l+=1)if(s=n.parseByte(),r.push(s),(8&s)>0)for(var d=n.parseByte(),u=0;u<d;u+=1)r.push(s),l+=1;if(Us.argument(r.length===h,"Bad flags."),o.length>0){var p,f=[];if(h>0){for(var v=0;v<h;v+=1)s=r[v],(p={}).onCurve=!!(1&s),p.lastPointOfContour=o.indexOf(v)>=0,f.push(p);for(var g=0,m=0;m<h;m+=1)s=r[m],(p=f[m]).x=Wo(n,s,g,2,16),g=p.x;for(var S=0,y=0;y<h;y+=1)s=r[y],(p=f[y]).y=Wo(n,s,S,4,32),S=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){r=n.parseUShort();var w={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&r)>0?(2&r)>0?(w.dx=n.parseShort(),w.dy=n.parseShort()):w.matchedPoints=[n.parseUShort(),n.parseUShort()]:(2&r)>0?(w.dx=n.parseChar(),w.dy=n.parseChar()):w.matchedPoints=[n.parseByte(),n.parseByte()],(8&r)>0?w.xScale=w.yScale=n.parseF2Dot14():(64&r)>0?(w.xScale=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()):(128&r)>0&&(w.xScale=n.parseF2Dot14(),w.scale01=n.parseF2Dot14(),w.scale10=n.parseF2Dot14(),w.yScale=n.parseF2Dot14()),e.components.push(w),b=!!(32&r)}if(256&r){e.instructionLength=n.parseUShort(),e.instructions=[];for(var E=0;E<e.instructionLength;E+=1)e.instructions.push(n.parseByte())}}}function Ho(e,t){for(var i=[],r=0;r<e.length;r+=1){var s=e[r],n={x:t.xScale*s.x+t.scale01*s.y+t.dx,y:t.scale10*s.x+t.yScale*s.y+t.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};i.push(n)}return i}function Go(e){var t=new Ls;if(!e)return t;for(var i=function(e){for(var t=[],i=[],r=0;r<e.length;r+=1){var s=e[r];i.push(s),s.lastPointOfContour&&(t.push(i),i=[])}return Us.argument(0===i.length,"There are still points left in the current contour."),t}(e),r=0;r<i.length;++r){var s=i[r],n=null,o=s[s.length-1],a=s[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(a.onCurve)t.moveTo(a.x,a.y);else{var c={x:.5*(o.x+a.x),y:.5*(o.y+a.y)};t.moveTo(c.x,c.y)}for(var h=0;h<s.length;++h)if(n=o,o=a,a=s[(h+1)%s.length],o.onCurve)t.lineTo(o.x,o.y);else{var l=a;n.onCurve||(o.x,n.x,o.y,n.y),a.onCurve||(l={x:.5*(o.x+a.x),y:.5*(o.y+a.y)}),t.quadraticCurveTo(o.x,o.y,l.x,l.y)}t.closePath()}return t}function Vo(e,t){if(t.isComposite)for(var i=0;i<t.components.length;i+=1){var r=t.components[i],s=e.get(r.glyphIndex);if(s.getPath(),s.points){var n=void 0;if(void 0===r.matchedPoints)n=Ho(s.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],a=s.points[r.matchedPoints[1]],c={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=Ho([a],c)[0],c.dx=o.x-a.x,c.dy=o.y-a.y,n=Ho(s.points,c)}t.points=t.points.concat(n)}}return Go(t.points)}Ro.prototype={searchTag:Ao,binSearch:Fo,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,i=0;i<e.scripts.length;i++){var r=e.scripts[i].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var i=this.getTable(t);if(i){e=e||"DFLT";var r=i.scripts,s=Ao(i.scripts,e);if(s>=0)return r[s].script;if(t){var n={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-s,0,n),n.script}}},getLangSysTable:function(e,t,i){var r=this.getScriptTable(e,i);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var s=Ao(r.langSysRecords,t);if(s>=0)return r.langSysRecords[s].langSys;if(i){var n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-s,0,n),n.langSys}}},getFeatureTable:function(e,t,i,r){var s=this.getLangSysTable(e,t,r);if(s){for(var n,o=s.featureIndexes,a=this.font.tables[this.tableName].features,c=0;c<o.length;c++)if((n=a[o[c]]).tag===i)return n.feature;if(r){var h=a.length;return Us.assert(0===h||i>=a[h-1].tag,"Features must be added in alphabetical order."),n={tag:i,feature:{params:0,lookupListIndexes:[]}},a.push(n),o.push(h),n.feature}}},getLookupTables:function(e,t,i,r,s){var n=this.getFeatureTable(e,t,i,s),o=[];if(n){for(var a,c=n.lookupListIndexes,h=this.font.tables[this.tableName].lookups,l=0;l<c.length;l++)(a=h[c[l]]).lookupType===r&&o.push(a);if(0===o.length&&s){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=h.length;return h.push(a),c.push(d),[a]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var i=_o(e.ranges,t);return i?i.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var i=Fo(e.glyphs,t);return i>=0?i:-1;case 2:var r=_o(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],i=e.ranges,r=0;r<i.length;r++)for(var s=i[r],n=s.start,o=s.end,a=n;a<=o;a++)t.push(a);return t}},Mo.prototype=Ro.prototype,Mo.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Mo.prototype.getKerningValue=function(e,t,i){for(var r=0;r<e.length;r++)for(var s=e[r].subtables,n=0;n<s.length;n++){var o=s[n],a=this.getCoverageIndex(o.coverage,t);if(!(a<0))switch(o.posFormat){case 1:for(var c=o.pairSets[a],h=0;h<c.length;h++){var l=c[h];if(l.secondGlyph===i)return l.value1&&l.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(o.classDef1,t),u=this.getGlyphClass(o.classDef2,i),p=o.classRecords[d][u];return p.value1&&p.value1.xAdvance||0}}return 0},Mo.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Lo.prototype=Ro.prototype,Lo.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Lo.prototype.getSingle=function(e,t,i){for(var r=[],s=this.getLookupTables(t,i,e,1),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++){var c=o[a],h=this.expandCoverage(c.coverage),l=void 0;if(1===c.substFormat){var d=c.deltaGlyphId;for(l=0;l<h.length;l++){var u=h[l];r.push({sub:u,by:u+d})}}else{var p=c.substitute;for(l=0;l<h.length;l++)r.push({sub:h[l],by:p[l]})}}return r},Lo.prototype.getMultiple=function(e,t,i){for(var r=[],s=this.getLookupTables(t,i,e,2),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++){var c=o[a],h=this.expandCoverage(c.coverage),l=void 0;for(l=0;l<h.length;l++){var d=h[l],u=c.sequences[l];r.push({sub:d,by:u})}}return r},Lo.prototype.getAlternates=function(e,t,i){for(var r=[],s=this.getLookupTables(t,i,e,3),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++)for(var c=o[a],h=this.expandCoverage(c.coverage),l=c.alternateSets,d=0;d<h.length;d++)r.push({sub:h[d],by:l[d]});return r},Lo.prototype.getLigatures=function(e,t,i){for(var r=[],s=this.getLookupTables(t,i,e,4),n=0;n<s.length;n++)for(var o=s[n].subtables,a=0;a<o.length;a++)for(var c=o[a],h=this.expandCoverage(c.coverage),l=c.ligatureSets,d=0;d<h.length;d++)for(var u=h[d],p=l[d],f=0;f<p.length;f++){var v=p[f];r.push({sub:[u].concat(v.components),by:v.ligGlyph})}return r},Lo.prototype.addSingle=function(e,t,i,r){var s=Io(this.getLookupTables(i,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Us.assert(1===s.coverage.format,"Single: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.substitute.splice(o,0,0)),s.substitute[o]=t.by},Lo.prototype.addMultiple=function(e,t,i,r){Us.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var s=Io(this.getLookupTables(i,r,e,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Us.assert(1===s.coverage.format,"Multiple: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.sequences.splice(o,0,0)),s.sequences[o]=t.by},Lo.prototype.addAlternate=function(e,t,i,r){var s=Io(this.getLookupTables(i,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Us.assert(1===s.coverage.format,"Alternate: unable to modify coverage table format "+s.coverage.format);var n=t.sub,o=this.binSearch(s.coverage.glyphs,n);o<0&&(o=-1-o,s.coverage.glyphs.splice(o,0,n),s.alternateSets.splice(o,0,0)),s.alternateSets[o]=t.by},Lo.prototype.addLigature=function(e,t,i,r){var s=this.getLookupTables(i,r,e,4,!0)[0],n=s.subtables[0];n||(n={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=n),Us.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format);var o=t.sub[0],a=t.sub.slice(1),c={ligGlyph:t.by,components:a},h=this.binSearch(n.coverage.glyphs,o);if(h>=0){for(var l=n.ligatureSets[h],d=0;d<l.length;d++)if(Bo(l[d].components,a))return;l.push(c)}else h=-1-h,n.coverage.glyphs.splice(h,0,o),n.ligatureSets.splice(h,0,[c])},Lo.prototype.getFeature=function(e,t,i){if(/ss\d\d/.test(e))return this.getSingle(e,t,i);switch(e){case"aalt":case"salt":return this.getSingle(e,t,i).concat(this.getAlternates(e,t,i));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,i);case"ccmp":return this.getMultiple(e,t,i).concat(this.getLigatures(e,t,i));case"stch":return this.getMultiple(e,t,i)}},Lo.prototype.add=function(e,t,i,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,i,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,i,r):this.addAlternate(e,t,i,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,i,r);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,i,r):this.addLigature(e,t,i,r)}};var zo,jo,qo,Yo,Xo={getPath:Go,parse:function(e,t,i,r,s){return s.lowMemory?function(e,t,i,r){var s=new An.GlyphSet(r);return r._push=function(n){var o=i[n];o!==i[n+1]?s.push(n,An.ttfGlyphLoader(r,n,No,e,t+o,Vo)):s.push(n,An.glyphLoader(r,n))},s}(e,t,i,r):function(e,t,i,r){for(var s=new An.GlyphSet(r),n=0;n<i.length-1;n+=1){var o=i[n];o!==i[n+1]?s.push(n,An.ttfGlyphLoader(r,n,No,e,t+o,Vo)):s.push(n,An.glyphLoader(r,n))}return s}(e,t,i,r)}};function $o(e){this.font=e,this.getCommands=function(e){return Xo.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Zo(e){return e}function Qo(e){return Math.sign(e)*Math.round(Math.abs(e))}function Jo(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Ko(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function ea(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function ta(e){return Math.sign(e)*Math.floor(Math.abs(e))}var ia=function(e){var t=this.srPeriod,i=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-i,e=Math.trunc(e/t)*t,(e+=i)<0?i*r:e*r},ra={x:1,y:0,axis:"x",distance:function(e,t,i,r){return(i?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,i,r){var s,n,o,a,c,h,l;if(!r||r===this)return s=e.xo-t.xo,n=e.xo-i.xo,c=t.x-t.xo,h=i.x-i.xo,0===(l=(o=Math.abs(s))+(a=Math.abs(n)))?void(e.x=e.xo+(c+h)/2):void(e.x=e.xo+(c*a+h*o)/l);s=r.distance(e,t,!0,!0),n=r.distance(e,i,!0,!0),c=r.distance(t,t,!1,!0),h=r.distance(i,i,!1,!0),0!==(l=(o=Math.abs(s))+(a=Math.abs(n)))?ra.setRelative(e,e,(c*a+h*o)/l,r,!0):ra.setRelative(e,e,(c+h)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,i,r,s){if(r&&r!==this){var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+i*r.x,c=o+i*r.y;e.x=a+(e.y-c)/r.normalSlope}else e.x=(s?t.xo:t.x)+i},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},sa={x:0,y:1,axis:"y",distance:function(e,t,i,r){return(i?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,i,r){var s,n,o,a,c,h,l;if(!r||r===this)return s=e.yo-t.yo,n=e.yo-i.yo,c=t.y-t.yo,h=i.y-i.yo,0===(l=(o=Math.abs(s))+(a=Math.abs(n)))?void(e.y=e.yo+(c+h)/2):void(e.y=e.yo+(c*a+h*o)/l);s=r.distance(e,t,!0,!0),n=r.distance(e,i,!0,!0),c=r.distance(t,t,!1,!0),h=r.distance(i,i,!1,!0),0!==(l=(o=Math.abs(s))+(a=Math.abs(n)))?sa.setRelative(e,e,(c*a+h*o)/l,r,!0):sa.setRelative(e,e,(c+h)/2,r,!0)},normalSlope:0,setRelative:function(e,t,i,r,s){if(r&&r!==this){var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+i*r.x,c=o+i*r.y;e.y=c+r.normalSlope*(e.x-a)}else e.y=(s?t.yo:t.y)+i},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function na(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function oa(e,t){var i=Math.sqrt(e*e+t*t);return t/=i,1==(e/=i)&&0===t?ra:0===e&&1===t?sa:new na(e,t)}function aa(e,t,i,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=i,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(ra),Object.freeze(sa),na.prototype.distance=function(e,t,i,r){return this.x*ra.distance(e,t,i,r)+this.y*sa.distance(e,t,i,r)},na.prototype.interpolate=function(e,t,i,r){var s,n,o,a,c,h,l;o=r.distance(e,t,!0,!0),a=r.distance(e,i,!0,!0),s=r.distance(t,t,!1,!0),n=r.distance(i,i,!1,!0),0!==(l=(c=Math.abs(o))+(h=Math.abs(a)))?this.setRelative(e,e,(s*h+n*c)/l,r,!0):this.setRelative(e,e,(s+n)/2,r,!0)},na.prototype.setRelative=function(e,t,i,r,s){r=r||this;var n=s?t.xo:t.x,o=s?t.yo:t.y,a=n+i*r.x,c=o+i*r.y,h=r.normalSlope,l=this.slope,d=e.x,u=e.y;e.x=(l*d-h*a+c-u)/(l-h),e.y=l*(e.x-d)+u},na.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},aa.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},aa.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var ca=Object.freeze(new aa(0,0)),ha={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function la(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=ra,this.round=Qo}}function da(e){for(var t=e.tZone=new Array(e.gZone.length),i=0;i<t.length;i++)t[i]=new aa(0,0)}function ua(e,t){var i,r=e.prog,s=e.ip,n=1;do{if(88===(i=r[++s]))n++;else if(89===i)n--;else if(64===i)s+=r[s+1]+1;else if(65===i)s+=2*r[s+1]+1;else if(i>=176&&i<=183)s+=i-176+1;else if(i>=184&&i<=191)s+=2*(i-184+1);else if(t&&1===n&&27===i)break}while(n>0);e.ip=s}function pa(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function fa(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function va(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function ga(e,t){var i,r,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",n,o),e?(i=a.y-c.y,r=c.x-a.x):(i=c.x-a.x,r=c.y-a.y),t.pv=t.dpv=oa(i,r)}function ma(e,t){var i,r,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",n,o),e?(i=a.y-c.y,r=c.x-a.x):(i=c.x-a.x,r=c.y-a.y),t.fv=oa(i,r)}function Sa(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function ya(e,t){var i=t.stack.pop(),r=t.z0[i],s=t.fv,n=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",i);var o=n.distance(r,ca);e&&(o=t.round(o)),s.setRelative(r,ca,o,n),s.touch(r),t.rp0=t.rp1=i}function ba(e,t){var i,r,s,n=t.z2,o=n.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<o;a++)i=n[a],e.touched(i)||(r=i.prevTouched(e))!==i&&(r===(s=i.nextTouched(e))&&e.setRelative(i,i,e.distance(r,r,!1,!0),e,!0),e.interpolate(i,r,s,e))}function wa(e,t){for(var i=t.stack,r=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[r],n=t.fv,o=t.pv,a=t.loop,c=t.z2;a--;){var h=i.pop(),l=c[h],d=o.distance(s,s,!1,!0);n.setRelative(l,l,d,o),n.touch(l),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",h)}t.loop=1}function Ea(e,t){var i=t.stack,r=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[r],n=t.fv,o=t.pv,a=i.pop(),c=t.z2[t.contours[a]],h=c;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",a);var l=o.distance(s,s,!1,!0);do{h!==s&&n.setRelative(h,h,l,o),h=h.nextPointOnContour}while(h!==c)}function xa(e,t){var i,r,s=t.stack,n=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[n],a=t.fv,c=t.pv,h=s.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",h),h){case 0:i=t.tZone;break;case 1:i=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=c.distance(o,o,!1,!0),d=i.length-2,u=0;u<d;u++)r=i[u],a.setRelative(r,r,l,c)}function Ta(e,t){var i=t.stack,r=i.pop()/64,s=i.pop(),n=t.z1[s],o=t.z0[t.rp0],a=t.fv,c=t.pv;a.setRelative(n,o,r,c),a.touch(n),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,s),t.rp1=t.rp0,t.rp2=s,e&&(t.rp0=s)}function Pa(e,t){var i=t.stack,r=i.pop(),s=i.pop(),n=t.z0[s],o=t.fv,a=t.pv,c=t.cvt[r];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",c,")",s);var h=a.distance(n,ca);e&&(Math.abs(h-c)<t.cvCutIn&&(h=c),h=t.round(h)),o.setRelative(n,ca,h,a),0===t.zp0&&(n.xo=n.x,n.yo=n.y),o.touch(n),t.rp0=t.rp1=s}function Ca(e,t){var i=t.stack,r=i.pop(),s=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),i.push(64*t.dpv.distance(s,ca,e,!1))}function ka(e,t){var i=t.stack,r=i.pop(),s=i.pop(),n=t.z1[r],o=t.z0[s],a=t.dpv.distance(o,n,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,s,"->",a),t.stack.push(Math.round(64*a))}function Da(e,t){var i=t.stack,r=i.pop(),s=t.fv,n=t.pv,o=t.ppem,a=t.deltaBase+16*(e-1),c=t.deltaShift,h=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,i);for(var l=0;l<r;l++){var d=i.pop(),u=i.pop();if(a+((240&u)>>4)===o){var p=(15&u)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",d,"by",p*c);var f=h[d];s.setRelative(f,f,p*c,n)}}}function Oa(e,t){var i=t.stack,r=i.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),i.push(64*t.round(r/64))}function Aa(e,t){var i=t.stack,r=i.pop(),s=t.ppem,n=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,i);for(var a=0;a<r;a++){var c=i.pop(),h=i.pop();if(n+((240&h)>>4)===s){var l=(15&h)-8;l>=0&&l++;var d=l*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",c,"by",d),t.cvt[c]+=d}}}function Fa(e,t){var i,r,s=t.stack,n=s.pop(),o=s.pop(),a=t.z2[n],c=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,o),e?(i=a.y-c.y,r=c.x-a.x):(i=c.x-a.x,r=c.y-a.y),t.dpv=oa(i,r)}function _a(e,t){var i=t.stack,r=t.prog,s=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var n=0;n<e;n++)i.push(r[++s]);t.ip=s}function Ra(e,t){var i=t.ip,r=t.prog,s=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var n=0;n<e;n++){var o=r[++i]<<8|r[++i];32768&o&&(o=-(1+(65535^o))),s.push(o)}t.ip=i}function Ma(e,t,i,r,s,n){var o,a,c,h,l=n.stack,d=e&&l.pop(),u=l.pop(),p=n.rp0,f=n.z0[p],v=n.z1[u],g=n.minDis,m=n.fv,S=n.dpv;c=(a=o=S.distance(v,f,!0,!0))>=0?1:-1,a=Math.abs(a),e&&(h=n.cvt[d],r&&Math.abs(a-h)<n.cvCutIn&&(a=h)),i&&a<g&&(a=g),r&&(a=n.round(a)),m.setRelative(v,f,c*a,S),m.touch(v),exports.DEBUG&&console.log(n.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(i?">":"_")+(r?"R":"_")+(0===s?"Gr":1===s?"Bl":2===s?"Wh":"")+"]",e?d+"("+n.cvt[d]+","+h+")":"",u,"(d =",o,"->",c*a,")"),n.rp1=n.rp0,n.rp2=u,t&&(n.rp0=u)}function La(e){this.char=e,this.state={},this.activeState=null}function Ba(e,t,i){this.contextName=i,this.startIndex=e,this.endOffset=t}function Ia(e,t,i){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=i}function Ua(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function Wa(e){this.eventId=e,this.subscribers=[]}function Na(e){var t=this,i=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];i.forEach((function(e){Object.defineProperty(t.events,e,{value:new Wa(e)})})),e&&i.forEach((function(i){var r=e[i];"function"==typeof r&&t.events[i].subscribe(r)})),["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function Ha(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Na.call(this,e)}function Ga(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Va(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function za(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function ja(e){return/[A-z]/.test(e)}function qa(e){this.font=e,this.features={}}function Ya(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function Xa(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var i=t.ranges,r=0;r<i.length;r++){var s=i[r];if(e>=s.start&&e<=s.end){var n=e-s.start;return s.index+n}}break;default:return-1}return-1}function $a(e,t){return-1===Xa(e,t.coverage)?null:e+t.deltaGlyphId}function Za(e,t){var i=Xa(e,t.coverage);return-1===i?null:t.substitute[i]}function Qa(e,t){for(var i=[],r=0;r<e.length;r++){var s=e[r],n=t.current,o=Xa(n=Array.isArray(n)?n[0]:n,s);-1!==o&&i.push(o)}return i.length!==e.length?-1:i}function Ja(e,t){var i=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<i)return[];var r=Qa(t.inputCoverage,e);if(-1===r)return[];var s=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var n=e.lookahead.slice(s);n.length&&za(n[0].char);)n.shift();var o=new Ua(n,0),a=Qa(t.lookaheadCoverage,o),c=[].concat(e.backtrack);for(c.reverse();c.length&&za(c[0].char);)c.shift();if(c.length<t.backtrackCoverage.length)return[];var h=new Ua(c,0),l=Qa(t.backtrackCoverage,h),d=[];if(r.length===t.inputCoverage.length&&a.length===t.lookaheadCoverage.length&&l.length===t.backtrackCoverage.length)for(var u=0;u<t.lookupRecords.length;u++)for(var p=t.lookupRecords[u].lookupListIndex,f=this.getLookupByIndex(p),v=0;v<f.subtables.length;v++){var g=f.subtables[v],m=this.getLookupMethod(f,g);if("12"===this.getSubstitutionType(f,g))for(var S=0;S<r.length;S++){var y=m(e.get(S));y&&d.push(y)}}return d}function Ka(e,t){var i,r=Xa(e.current,t.coverage);if(-1===r)return null;for(var s=t.ligatureSets[r],n=0;n<s.length;n++){i=s[n];for(var o=0;o<i.components.length&&e.lookahead[o]===i.components[o];o++)if(o===i.components.length-1)return i}return null}function ec(e,t){var i=Xa(e,t.coverage);return-1===i?null:t.sequences[i]}$o.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var i=this.font,r=this._prepState;if(!r||r.ppem!==t){var s=this._fpgmState;if(!s){la.prototype=ha,(s=this._fpgmState=new la("fpgm",i.tables.fpgm)).funcs=[],s.font=i,exports.DEBUG&&(console.log("---EXEC FPGM---"),s.step=-1);try{jo(s)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}la.prototype=s,(r=this._prepState=new la("prep",i.tables.prep)).ppem=t;var n=i.tables.cvt;if(n)for(var o=r.cvt=new Array(n.length),a=t/i.unitsPerEm,c=0;c<n.length;c++)o[c]=n[c]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{jo(r)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return qo(e,r)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},qo=function(e,t){var i,r,s,n=t.ppem/t.font.unitsPerEm,o=n,a=e.components;if(la.prototype=t,a){var c=t.font;r=[],i=[];for(var h=0;h<a.length;h++){var l=a[h],d=c.glyphs.get(l.glyphIndex);s=new la("glyf",d.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+h+"---"),s.step=-1),Yo(d,s,n,o);for(var u=Math.round(l.dx*n),p=Math.round(l.dy*o),f=s.gZone,v=s.contours,g=0;g<f.length;g++){var m=f[g];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+u,m.yo=m.y=m.y+p}var S=r.length;r.push.apply(r,f);for(var y=0;y<v.length;y++)i.push(v[y]+S)}e.instructions&&!s.inhibitGridFit&&((s=new la("glyf",e.instructions)).gZone=s.z0=s.z1=s.z2=r,s.contours=i,r.push(new aa(0,0),new aa(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),s.step=-1),jo(s),r.length-=2)}else s=new la("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),s.step=-1),Yo(e,s,n,o),r=s.gZone;return r},Yo=function(e,t,i,r){for(var s,n,o,a=e.points||[],c=a.length,h=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[],d=0;d<c;d++)s=a[d],h[d]=new aa(s.x*i,s.y*r,s.lastPointOfContour,s.onCurve);for(var u=0;u<c;u++)s=h[u],n||(n=s,l.push(u)),s.lastPointOfContour?(s.nextPointOnContour=n,n.prevPointOnContour=s,n=void 0):(o=h[u+1],s.nextPointOnContour=o,o.prevPointOnContour=s);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var p=0;p<c;p++)console.log(p,h[p].x,h[p].y)}if(h.push(new aa(0,0),new aa(Math.round(e.advanceWidth*i),0)),jo(t),h.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var f=0;f<c;f++)console.log(f,h[f].x,h[f].y)}}},jo=function(e){var t=e.prog;if(t){var i,r=t.length;for(e.ip=0;e.ip<r;e.ip++){if(exports.DEBUG&&e.step++,!(i=zo[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));i(e)}}},zo=[pa.bind(void 0,sa),pa.bind(void 0,ra),fa.bind(void 0,sa),fa.bind(void 0,ra),va.bind(void 0,sa),va.bind(void 0,ra),ga.bind(void 0,0),ga.bind(void 0,1),ma.bind(void 0,0),ma.bind(void 0,1),function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.pv=e.dpv=oa(r,i)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.fv=oa(r,i)},function(e){var t=e.stack,i=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*i.x),t.push(16384*i.y)},function(e){var t=e.stack,i=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*i.x),t.push(16384*i.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,i=t.pop(),r=t.pop(),s=t.pop(),n=t.pop(),o=t.pop(),a=e.z0,c=e.z1,h=a[i],l=a[r],d=c[s],u=c[n],p=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",i,r,s,n,o);var f=h.x,v=h.y,g=l.x,m=l.y,S=d.x,y=d.y,b=u.x,w=u.y,E=(f-g)*(y-w)-(v-m)*(S-b),x=f*m-v*g,T=S*w-y*b;p.x=(x*(S-b)-T*(f-g))/E,p.y=(x*(y-w)-T*(v-m))/E},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||da(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||da(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||da(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||da(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=Qo},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Ko},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),ua(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},Sa,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(i),t.push(r)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",i),t.push(t[t.length-i])},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",i),t.push(t.splice(t.length-i,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",i,r);var s=e.ip,n=e.prog;e.prog=e.funcs[i];for(var o=0;o<r;o++)jo(e),exports.DEBUG&&console.log(++e.step,o+1<r?"next loopcall":"done loopcall",o);e.ip=s,e.prog=n},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var i=e.ip,r=e.prog;e.prog=e.funcs[t],jo(e),e.ip=i,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,i=e.prog,r=e.ip,s=t.pop(),n=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",s);45!==i[++r];);e.ip=r,e.funcs[s]=i.slice(n+1,r)},void 0,ya.bind(void 0,0),ya.bind(void 0,1),ba.bind(void 0,sa),ba.bind(void 0,ra),wa.bind(void 0,0),wa.bind(void 0,1),Ea.bind(void 0,0),Ea.bind(void 0,1),xa.bind(void 0,0),xa.bind(void 0,1),function(e){for(var t=e.stack,i=e.loop,r=e.fv,s=t.pop()/64,n=e.z2;i--;){var o=t.pop(),a=n[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"SHPIX[]",o,s),r.setRelative(a,a,s),r.touch(a)}e.loop=1},function(e){for(var t=e.stack,i=e.rp1,r=e.rp2,s=e.loop,n=e.z0[i],o=e.z1[r],a=e.fv,c=e.dpv,h=e.z2;s--;){var l=t.pop(),d=h[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"IP[]",l,i,"<->",r),a.interpolate(d,n,o,c),a.touch(d)}e.loop=1},Ta.bind(void 0,0),Ta.bind(void 0,1),function(e){for(var t=e.stack,i=e.rp0,r=e.z0[i],s=e.loop,n=e.fv,o=e.pv,a=e.z1;s--;){var c=t.pop(),h=a[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"ALIGNRP[]",c),n.setRelative(h,r,0,o),n.touch(h)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Jo},Pa.bind(void 0,0),Pa.bind(void 0,1),function(e){var t=e.prog,i=e.ip,r=e.stack,s=t[++i];exports.DEBUG&&console.log(e.step,"NPUSHB[]",s);for(var n=0;n<s;n++)r.push(t[++i]);e.ip=i},function(e){var t=e.ip,i=e.prog,r=e.stack,s=i[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",s);for(var n=0;n<s;n++){var o=i[++t]<<8|i[++t];32768&o&&(o=-(1+(65535^o))),r.push(o)}e.ip=t},function(e){var t=e.stack,i=e.store;i||(i=e.store=[]);var r=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,s),i[s]=r},function(e){var t=e.stack,i=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);var s=i&&i[r]||0;t.push(s)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",i,r),e.cvt[r]=i/64},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",i),t.push(64*e.cvt[i])},Ca.bind(void 0,0),Ca.bind(void 0,1),void 0,ka.bind(void 0,0),ka.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",i,r),t.push(r<i?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",i,r),t.push(r<=i?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",i,r),t.push(r>i?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",i,r),t.push(r>=i?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",i,r),t.push(i===r?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",i,r),t.push(i!==r?1:0)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",i),t.push(Math.trunc(i)%2?1:0)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",i),t.push(Math.trunc(i)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(ua(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",i,r),t.push(i&&r?1:0)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",i,r),t.push(i||r?1:0)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",i),t.push(i?0:1)},Da.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",i,r),t.push(r+i)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",i,r),t.push(r-i)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",i,r),t.push(64*r/i)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",i,r),t.push(r*i/64)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",i),t.push(Math.abs(i))},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",i),t.push(-i)},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",i),t.push(64*Math.floor(i/64))},function(e){var t=e.stack,i=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",i),t.push(64*Math.ceil(i/64))},Oa.bind(void 0,0),Oa.bind(void 0,1),Oa.bind(void 0,2),Oa.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",i,r),e.cvt[r]=i*e.ppem/e.font.unitsPerEm},Da.bind(void 0,2),Da.bind(void 0,3),Aa.bind(void 0,1),Aa.bind(void 0,2),Aa.bind(void 0,3),function(e){var t,i=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",i),e.round=ia,192&i){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*t},function(e){var t,i=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",i),e.round=ia,192&i){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Zo},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=ea},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=ta},Sa,Sa,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},Fa.bind(void 0,0),Fa.bind(void 0,1),function(e){var t=e.stack,i=t.pop(),r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",i),1&i&&(r=35),32&i&&(r|=4096),t.push(r)},void 0,function(e){var t=e.stack,i=t.pop(),r=t.pop(),s=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(i),t.push(s)},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",i,r),t.push(Math.max(r,i))},function(e){var t=e.stack,i=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",i,r),t.push(Math.min(r,i))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),i=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,i),t){case 1:return void(e.inhibitGridFit=!!i);case 2:return void(e.ignoreCvt=!!i);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,_a.bind(void 0,1),_a.bind(void 0,2),_a.bind(void 0,3),_a.bind(void 0,4),_a.bind(void 0,5),_a.bind(void 0,6),_a.bind(void 0,7),_a.bind(void 0,8),Ra.bind(void 0,1),Ra.bind(void 0,2),Ra.bind(void 0,3),Ra.bind(void 0,4),Ra.bind(void 0,5),Ra.bind(void 0,6),Ra.bind(void 0,7),Ra.bind(void 0,8),Ma.bind(void 0,0,0,0,0,0),Ma.bind(void 0,0,0,0,0,1),Ma.bind(void 0,0,0,0,0,2),Ma.bind(void 0,0,0,0,0,3),Ma.bind(void 0,0,0,0,1,0),Ma.bind(void 0,0,0,0,1,1),Ma.bind(void 0,0,0,0,1,2),Ma.bind(void 0,0,0,0,1,3),Ma.bind(void 0,0,0,1,0,0),Ma.bind(void 0,0,0,1,0,1),Ma.bind(void 0,0,0,1,0,2),Ma.bind(void 0,0,0,1,0,3),Ma.bind(void 0,0,0,1,1,0),Ma.bind(void 0,0,0,1,1,1),Ma.bind(void 0,0,0,1,1,2),Ma.bind(void 0,0,0,1,1,3),Ma.bind(void 0,0,1,0,0,0),Ma.bind(void 0,0,1,0,0,1),Ma.bind(void 0,0,1,0,0,2),Ma.bind(void 0,0,1,0,0,3),Ma.bind(void 0,0,1,0,1,0),Ma.bind(void 0,0,1,0,1,1),Ma.bind(void 0,0,1,0,1,2),Ma.bind(void 0,0,1,0,1,3),Ma.bind(void 0,0,1,1,0,0),Ma.bind(void 0,0,1,1,0,1),Ma.bind(void 0,0,1,1,0,2),Ma.bind(void 0,0,1,1,0,3),Ma.bind(void 0,0,1,1,1,0),Ma.bind(void 0,0,1,1,1,1),Ma.bind(void 0,0,1,1,1,2),Ma.bind(void 0,0,1,1,1,3),Ma.bind(void 0,1,0,0,0,0),Ma.bind(void 0,1,0,0,0,1),Ma.bind(void 0,1,0,0,0,2),Ma.bind(void 0,1,0,0,0,3),Ma.bind(void 0,1,0,0,1,0),Ma.bind(void 0,1,0,0,1,1),Ma.bind(void 0,1,0,0,1,2),Ma.bind(void 0,1,0,0,1,3),Ma.bind(void 0,1,0,1,0,0),Ma.bind(void 0,1,0,1,0,1),Ma.bind(void 0,1,0,1,0,2),Ma.bind(void 0,1,0,1,0,3),Ma.bind(void 0,1,0,1,1,0),Ma.bind(void 0,1,0,1,1,1),Ma.bind(void 0,1,0,1,1,2),Ma.bind(void 0,1,0,1,1,3),Ma.bind(void 0,1,1,0,0,0),Ma.bind(void 0,1,1,0,0,1),Ma.bind(void 0,1,1,0,0,2),Ma.bind(void 0,1,1,0,0,3),Ma.bind(void 0,1,1,0,1,0),Ma.bind(void 0,1,1,0,1,1),Ma.bind(void 0,1,1,0,1,2),Ma.bind(void 0,1,1,0,1,3),Ma.bind(void 0,1,1,1,0,0),Ma.bind(void 0,1,1,1,0,1),Ma.bind(void 0,1,1,1,0,2),Ma.bind(void 0,1,1,1,0,3),Ma.bind(void 0,1,1,1,1,0),Ma.bind(void 0,1,1,1,1,1),Ma.bind(void 0,1,1,1,1,2),Ma.bind(void 0,1,1,1,1,3)],La.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},La.prototype.getState=function(e){return this.state[e]||null},Ha.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},Ha.prototype.composeRUD=function(e){var t=this,i=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),r=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(i.every(r))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:i.filter(r)};this.dispatch("composeRUD",[i.filter((function(e){return!r(e)}))])},Ha.prototype.replaceRange=function(e,t,i,r){t=null!==t?t:this.tokens.length;var s=i.every((function(e){return e instanceof La}));if(!isNaN(e)&&this.inboundIndex(e)&&s){var n=this.tokens.splice.apply(this.tokens,[e,t].concat(i));return r||this.dispatch("replaceToken",[e,t,i]),[n,i]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Ha.prototype.replaceToken=function(e,t,i){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof La){var r=this.tokens.splice(e,1,t);return i||this.dispatch("replaceToken",[e,t]),[r[0],t]}return{FAIL:"replaceToken: invalid token or index."}},Ha.prototype.removeRange=function(e,t,i){t=isNaN(t)?this.tokens.length:t;var r=this.tokens.splice(e,t);return i||this.dispatch("removeRange",[r,e,t]),r},Ha.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var i=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[i,e]),i}return{FAIL:"removeToken: invalid token index."}},Ha.prototype.insertToken=function(e,t,i){return e.every((function(e){return e instanceof La}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),i||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},Ha.prototype.registerModifier=function(e,t,i){this.events.newToken.subscribe((function(r,s){var n=[r,s],o=[r,s];if(null===t||!0===t.apply(this,n)){var a=i.apply(this,o);r.setState(e,a)}})),this.registeredModifiers.push(e)},Wa.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},Wa.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},Ua.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},Ua.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},Ha.prototype.rangeToText=function(e){if(e instanceof Ba)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},Ha.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},Ha.prototype.getContext=function(e){return this.registeredContexts[e]||null},Ha.prototype.on=function(e,t){var i=this.events[e];return i?i.subscribe(t):null},Ha.prototype.dispatch=function(e,t){var i=this,r=this.events[e];r instanceof Wa&&r.subscribers.forEach((function(e){e.apply(i,t||[])}))},Ha.prototype.registerContextChecker=function(e,t,i){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof i)return{FAIL:"missing context end check."};var r=new Ia(e,t,i);return this.registeredContexts[e]=r,this.contextCheckers.push(r),r},Ha.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},Ha.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},Ha.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)e.hasOwnProperty(t)&&(e[t].ranges=[])},Ha.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var i=new Ua(e,t);this.runContextCheck(i)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Ha.prototype.setEndOffset=function(e,t){var i=new Ba(this.getContext(t).openRange.startIndex,e,t),r=this.getContext(t).ranges;return i.rangeId=t+"."+r.length,r.push(i),this.getContext(t).openRange=null,i},Ha.prototype.runContextCheck=function(e){var t=this,i=e.index;this.contextCheckers.forEach((function(r){var s=r.contextName,n=t.getContext(s).openRange;if(!n&&r.checkStart(e)&&(n=new Ba(i,null,s),t.getContext(s).openRange=n,t.dispatch("contextStart",[s,i])),n&&r.checkEnd(e)){var o=i-n.startIndex+1,a=t.setEndOffset(o,s);t.dispatch("contextEnd",[s,a])}}))},Ha.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var i=0;i<t.length;i++){var r=t[i],s=new Ua(t,i);this.dispatch("next",[s]),this.runContextCheck(s);var n=new La(r);this.tokens.push(n),this.dispatch("newToken",[n,s])}return this.dispatch("end",[this.tokens]),this.tokens},qa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var i=e[t];if("DFLT"===i.tag)return i.script.defaultLangSys.featureIndexes}return[]},qa.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,i=0;i<t.length;i++){var r=t[i];if(r.tag===e&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;var s=r.langSysRecords;if(s)for(var n=0;n<s.length;n++){var o=s[n];if(o.tag===e)return o.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},qa.prototype.mapTagsToFeatures=function(e,t){for(var i={},r=0;r<e.length;r++){var s=e[r].tag,n=e[r].feature;i[s]=n}this.features[t].tags=i},qa.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var i=this.getScriptFeaturesIndexes(e);if(!i)return null;var r=this.font.tables.gsub;return t=i.map((function(e){return r.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},qa.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},qa.prototype.getLookupMethod=function(e,t){var i=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return $a.apply(i,[e,t])};case"12":return function(e){return Za.apply(i,[e,t])};case"63":return function(e){return Ja.apply(i,[e,t])};case"41":return function(e){return Ka.apply(i,[e,t])};case"21":return function(e){return ec.apply(i,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},qa.prototype.lookupFeature=function(e){var t=e.contextParams,i=t.index,r=this.getFeature({tag:e.tag,script:e.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var s=this.getFeatureLookups(r),n=[].concat(t.context),o=0;o<s.length;o++)for(var a=s[o],c=this.getLookupSubtables(a),h=0;h<c.length;h++){var l=c[h],d=this.getSubstitutionType(a,l),u=this.getLookupMethod(a,l),p=void 0;switch(d){case"11":(p=u(t.current))&&n.splice(i,1,new Ya({id:11,tag:e.tag,substitution:p}));break;case"12":(p=u(t.current))&&n.splice(i,1,new Ya({id:12,tag:e.tag,substitution:p}));break;case"63":p=u(t),Array.isArray(p)&&p.length&&n.splice(i,1,new Ya({id:63,tag:e.tag,substitution:p}));break;case"41":(p=u(t))&&n.splice(i,1,new Ya({id:41,tag:e.tag,substitution:p}));break;case"21":(p=u(t.current))&&n.splice(i,1,new Ya({id:21,tag:e.tag,substitution:p}))}t=new Ua(n,i),Array.isArray(p)&&!p.length||(p=null)}return n.length?n:null},qa.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var i=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&i},qa.prototype.getLookupSubtables=function(e){return e.subtables||null},qa.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},qa.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},qa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var tc={startCheck:function(e){var t=e.current,i=e.get(-1);return null===i&&Ga(t)||!Ga(i)&&Ga(t)},endCheck:function(e){var t=e.get(1);return null===t||!Ga(t)}},ic={startCheck:function(e){var t=e.current,i=e.get(-1);return(Ga(t)||za(t))&&!Ga(i)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!Ga(t)&&!za(t):var i=/\s/.test(t);if(!i)return!0;if(i)if(!e.lookahead.some((function(e){return Ga(e)||za(e)})))return!0;break;default:return!1}}},rc={11:function(e,t,i){t[i].setState(e.tag,e.substitution)},12:function(e,t,i){t[i].setState(e.tag,e.substitution)},63:function(e,t,i){e.substitution.forEach((function(r,s){t[i+s].setState(e.tag,r)}))},41:function(e,t,i){var r=t[i];r.setState(e.tag,e.substitution.ligGlyph);for(var s=e.substitution.components.length,n=0;n<s;n++)(r=t[i+n+1]).setState("deleted",!0)}};function sc(e,t,i){e instanceof Ya&&rc[e.id]&&rc[e.id](e,t,i)}function nc(e){var t=this,i="arab",r=this.featuresTags[i],s=this.tokenizer.getRangeTokens(e);if(1!==s.length){var n=new Ua(s.map((function(e){return e.getState("glyphIndex")})),0),o=new Ua(s.map((function(e){return e.char})),0);s.forEach((function(e,a){if(!za(e.char)){n.setCurrentIndex(a),o.setCurrentIndex(a);var c,h=0;switch(function(e){for(var t=[].concat(e.backtrack),i=t.length-1;i>=0;i--){var r=t[i],s=Va(r),n=za(r);if(!s&&!n)return!0;if(s)return!1}return!1}(o)&&(h|=1),function(e){if(Va(e.current))return!1;for(var t=0;t<e.lookahead.length;t++)if(!za(e.lookahead[t]))return!0;return!1}(o)&&(h|=2),h){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi"}if(-1!==r.indexOf(c)){var l=t.query.lookupFeature({tag:c,script:i,contextParams:n});if(l instanceof Error)return console.info(l.message);l.forEach((function(e,t){e instanceof Ya&&(sc(e,s,t),n.context[t]=e.substitution)}))}}}))}}function oc(e,t){return new Ua(e.map((function(e){return e.activeState.value})),t||0)}function ac(e){var t=this,i=this.tokenizer.getRangeTokens(e),r=oc(i);r.context.forEach((function(e,s){r.setCurrentIndex(s);var n=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:r});n.length&&(n.forEach((function(e){return sc(e,i,s)})),r=oc(i))}))}var cc={startCheck:function(e){var t=e.current,i=e.get(-1);return null===i&&ja(t)||!ja(i)&&ja(t)},endCheck:function(e){var t=e.get(1);return null===t||!ja(t)}};function hc(e,t){return new Ua(e.map((function(e){return e.activeState.value})),t||0)}function lc(e){var t=this,i=this.tokenizer.getRangeTokens(e),r=hc(i);r.context.forEach((function(e,s){r.setCurrentIndex(s);var n=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:r});n.length&&(n.forEach((function(e){return sc(e,i,s)})),r=hc(i))}))}function dc(e){this.baseDir=e||"ltr",this.tokenizer=new Ha,this.featuresTags={}}function uc(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function pc(){return uc.call(this,"latinWord"),uc.call(this,"arabicWord"),uc.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function fc(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var i=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,i.reverse())}))}function vc(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function gc(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(vc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){nc.call(e,t)})))}function mc(){var e=this,t="arab";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("rlig")&&(vc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){ac.call(e,t)})))}function Sc(){var e=this,t="latn";this.featuresTags.hasOwnProperty(t)&&-1!==this.featuresTags[t].indexOf("liga")&&(vc.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){lc.call(e,t)})))}function yc(e){(e=e||{}).tables=e.tables||{},e.empty||(Uo(e.familyName,"When creating a new Font object, familyName is required."),Uo(e.styleName,"When creating a new Font object, styleName is required."),Uo(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Uo(e.ascender,"When creating a new Font object, ascender is required."),Uo(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new An.GlyphSet(this,e.glyphs||[]),this.encoding=new En(this),this.position=new Mo(this),this.substitution=new Lo(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new $o(this):void 0}})}function bc(e,t){var i=JSON.stringify(e),r=256;for(var s in t){var n=parseInt(s);if(n&&!(n<256)){if(JSON.stringify(t[s])===i)return n;r<=n&&(r=n+1)}}return t[r]=e,r}function wc(e,t,i){var r=bc(t.name,i);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function Ec(e,t,i){var r={},s=new vn.Parser(e,t);return r.tag=s.parseTag(),r.minValue=s.parseFixed(),r.defaultValue=s.parseFixed(),r.maxValue=s.parseFixed(),s.skip("uShort",1),r.name=i[s.parseUShort()]||{},r}function xc(e,t,i,r){for(var s=[{name:"nameID_"+e,type:"USHORT",value:bc(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],n=0;n<i.length;++n){var o=i[n].tag;s.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return s}function Tc(e,t,i,r){var s={},n=new vn.Parser(e,t);s.name=r[n.parseUShort()]||{},n.skip("uShort",1),s.coordinates={};for(var o=0;o<i.length;++o)s.coordinates[i[o].tag]=n.parseFixed();return s}dc.prototype.setText=function(e){this.text=e},dc.prototype.contextChecks={latinWordCheck:cc,arabicWordCheck:tc,arabicSentenceCheck:ic},dc.prototype.registerFeatures=function(e,t){var i=this,r=t.filter((function(t){return i.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(r):this.featuresTags[e]=r},dc.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new qa(e));for(var i=0;i<t.length;i++){var r=t[i];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}},dc.prototype.registerModifier=function(e,t,i){this.tokenizer.registerModifier(e,t,i)},dc.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},dc.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(gc.call(this),mc.call(this)),this.checkContextReady("latinWord")&&Sc.call(this),this.checkContextReady("arabicSentence")&&fc.call(this)},dc.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),pc.call(this),this.applyFeaturesToContexts())},dc.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},dc.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],i=0;i<this.tokenizer.tokens.length;i++){var r=this.tokenizer.tokens[i];if(!r.state.deleted){var s=r.activeState.value;t.push(Array.isArray(s)?s[0]:s)}}return t},yc.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},yc.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},yc.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),i=this.glyphs.get(t);return i||(i=this.glyphs.get(0)),i},yc.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},yc.prototype.stringToGlyphs=function(e,t){var i=this,r=new dc;r.registerModifier("glyphIndex",null,(function(e){return i.charToGlyphIndex(e.char)}));var s=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;r.applyFeatures(this,s);for(var n=r.getTextGlyphs(e),o=n.length,a=new Array(o),c=this.glyphs.get(0),h=0;h<o;h+=1)a[h]=this.glyphs.get(n[h])||c;return a},yc.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},yc.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),i=this.glyphs.get(t);return i||(i=this.glyphs.get(0)),i},yc.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},yc.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var i=this.position.defaultKerningTables;return i?this.position.getKerningValue(i,e,t):this.kerningPairs[e+","+t]||0},yc.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},yc.prototype.forEachGlyph=function(e,t,i,r,s,n){t=void 0!==t?t:0,i=void 0!==i?i:0,r=void 0!==r?r:72,s=Object.assign({},this.defaultRenderOptions,s);var o,a=1/this.unitsPerEm*r,c=this.stringToGlyphs(e,s);if(s.kerning){var h=s.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(h,s.language)}for(var l=0;l<c.length;l+=1){var d=c[l];n.call(this,d,t,i,r,s),d.advanceWidth&&(t+=d.advanceWidth*a),s.kerning&&l<c.length-1&&(t+=(o?this.position.getKerningValue(o,d.index,c[l+1].index):this.getKerningValue(d,c[l+1]))*a),s.letterSpacing?t+=s.letterSpacing*r:s.tracking&&(t+=s.tracking/1e3*r)}return t},yc.prototype.getPath=function(e,t,i,r,s){var n=new Ls;return this.forEachGlyph(e,t,i,r,s,(function(e,t,i,r){var o=e.getPath(t,i,r,s,this);n.extend(o)})),n},yc.prototype.getPaths=function(e,t,i,r,s){var n=[];return this.forEachGlyph(e,t,i,r,s,(function(e,t,i,r){var o=e.getPath(t,i,r,s,this);n.push(o)})),n},yc.prototype.getAdvanceWidth=function(e,t,i){return this.forEachGlyph(e,0,0,t,i,(function(){}))},yc.prototype.draw=function(e,t,i,r,s,n){this.getPath(t,i,r,s,n).draw(e)},yc.prototype.drawPoints=function(e,t,i,r,s,n){this.forEachGlyph(t,i,r,s,n,(function(t,i,r,s){t.drawPoints(e,i,r,s)}))},yc.prototype.drawMetrics=function(e,t,i,r,s,n){this.forEachGlyph(t,i,r,s,n,(function(t,i,r,s){t.drawMetrics(e,i,r,s)}))},yc.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},yc.prototype.validate=function(){var e=this;function t(t){var i=e.getEnglishName(t);i&&i.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},yc.prototype.toTables=function(){return Oo(this)},yc.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},yc.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),i=new Uint8Array(t),r=0;r<e.length;r++)i[r]=e[r];return t},yc.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var s=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var n=new DataView(s),o=new Blob([n],{type:"font/opentype"}),a=document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=e;var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),a.dispatchEvent(c)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=i(256),l=function(e){for(var t=new Buffer(e.byteLength),i=new Uint8Array(e),r=0;r<t.length;++r)t[r]=i[r];return t}(s);h.writeFileSync(e,l)}},yc.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},yc.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},yc.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Pc={make:function(e,t){var i=new an.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);i.offsetToData=i.sizeOf();for(var r=0;r<e.axes.length;r++)i.fields=i.fields.concat(wc(r,e.axes[r],t));for(var s=0;s<e.instances.length;s++)i.fields=i.fields.concat(xc(s,e.instances[s],e.axes,t));return i},parse:function(e,t,i){var r=new vn.Parser(e,t),s=r.parseULong();Us.argument(65536===s,"Unsupported fvar table version.");var n=r.parseOffset16();r.skip("uShort",1);for(var o=r.parseUShort(),a=r.parseUShort(),c=r.parseUShort(),h=r.parseUShort(),l=[],d=0;d<o;d++)l.push(Ec(e,t+n+d*a,i));for(var u=[],p=t+n+o*a,f=0;f<c;f++)u.push(Tc(e,p+f*h,l,i));return{axes:l,instances:u}}},Cc=function(){return{coverage:this.parsePointer(pn.coverage),attachPoints:this.parseList(pn.pointer(pn.uShortList))}},kc=function(){var e=this.parseUShort();return Us.argument(1===e||2===e||3===e,"Unsupported CaretValue table version."),1===e?{coordinate:this.parseShort()}:2===e?{pointindex:this.parseShort()}:3===e?{coordinate:this.parseShort()}:void 0},Dc=function(){return this.parseList(pn.pointer(kc))},Oc=function(){return{coverage:this.parsePointer(pn.coverage),ligGlyphs:this.parseList(pn.pointer(Dc))}},Ac=function(){return this.parseUShort(),this.parseList(pn.pointer(pn.coverage))},Fc={parse:function(e,t){var i=new pn(e,t=t||0),r=i.parseVersion(1);Us.argument(1===r||1.2===r||1.3===r,"Unsupported GDEF table version.");var s={version:r,classDef:i.parsePointer(pn.classDef),attachList:i.parsePointer(Cc),ligCaretList:i.parsePointer(Oc),markAttachClassDef:i.parsePointer(pn.classDef)};return r>=1.2&&(s.markGlyphSets=i.parsePointer(Ac)),s}},_c=new Array(10);_c[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(pn.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(pn.coverage),values:this.parseValueRecordList()}:void Us.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},_c[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();Us.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var i=this.parsePointer(pn.coverage),r=this.parseUShort(),s=this.parseUShort();if(1===t)return{posFormat:t,coverage:i,valueFormat1:r,valueFormat2:s,pairSets:this.parseList(pn.pointer(pn.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}}))))};if(2===t){var n=this.parsePointer(pn.classDef),o=this.parsePointer(pn.classDef),a=this.parseUShort(),c=this.parseUShort();return{posFormat:t,coverage:i,valueFormat1:r,valueFormat2:s,classDef1:n,classDef2:o,class1Count:a,class2Count:c,classRecords:this.parseList(a,pn.list(c,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(s)}})))}}},_c[3]=function(){return{error:"GPOS Lookup 3 not supported"}},_c[4]=function(){return{error:"GPOS Lookup 4 not supported"}},_c[5]=function(){return{error:"GPOS Lookup 5 not supported"}},_c[6]=function(){return{error:"GPOS Lookup 6 not supported"}},_c[7]=function(){return{error:"GPOS Lookup 7 not supported"}},_c[8]=function(){return{error:"GPOS Lookup 8 not supported"}},_c[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Rc=new Array(10),Mc={parse:function(e,t){var i=new pn(e,t=t||0),r=i.parseVersion(1);return Us.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(_c)}:{version:r,scripts:i.parseScriptList(),features:i.parseFeatureList(),lookups:i.parseLookupList(_c),variations:i.parseFeatureVariationsList()}},make:function(e){return new an.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new an.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new an.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new an.LookupList(e.lookups,Rc)}])}},Lc={parse:function(e,t){var i=new vn.Parser(e,t),r=i.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var i=e.parseUShort();Us.argument(0===i,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var s=0;s<r;s+=1){var n=e.parseUShort(),o=e.parseUShort(),a=e.parseShort();t[n+","+o]=a}return t}(i);if(1===r)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var i=255&e.parseUShort();if(e.skip("uShort"),0===i){var r=e.parseUShort();e.skip("uShort",3);for(var s=0;s<r;s+=1){var n=e.parseUShort(),o=e.parseUShort(),a=e.parseShort();t[n+","+o]=a}}return t}(i);throw new Error("Unsupported kern table version ("+r+").")}},Bc={parse:function(e,t,i,r){for(var s=new vn.Parser(e,t),n=r?s.parseUShort:s.parseULong,o=[],a=0;a<i+1;a+=1){var c=n.call(s);r&&(c*=2),o.push(c)}return o}};function Ic(e,t){i(256).readFile(e,(function(e,i){if(e)return t(e.message);t(null,function(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),r=0;r<e.length;++r)i[r]=e[r];return t}(i))}))}function Uc(e,t){var i=new XMLHttpRequest;i.open("get",e,!0),i.responseType="arraybuffer",i.onload=function(){return i.response?t(null,i.response):t("Font could not be loaded: "+i.statusText)},i.onerror=function(){t("Font could not be loaded")},i.send()}function Wc(e,t){for(var i=[],r=12,s=0;s<t;s+=1){var n=vn.getTag(e,r),o=vn.getULong(e,r+4),a=vn.getULong(e,r+8),c=vn.getULong(e,r+12);i.push({tag:n,checksum:o,offset:a,length:c,compression:!1}),r+=16}return i}function Nc(e,t){if("WOFF"===t.compression){var i=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(_s(i,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}return{data:e,offset:t.offset}}function Hc(e,t){var i,r;t=null==t?{}:t;var s,n,o,a,c,h,l,d,u,p,f,v,g,m=new yc({empty:!0}),S=new DataView(e,0),y=[],b=vn.getTag(S,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)m.outlinesFormat="truetype",y=Wc(S,s=vn.getUShort(S,4));else if("OTTO"===b)m.outlinesFormat="cff",y=Wc(S,s=vn.getUShort(S,4));else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var w=vn.getTag(S,4);if(w===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+b);m.outlinesFormat="cff"}y=function(e,t){for(var i=[],r=44,s=0;s<t;s+=1){var n,o=vn.getTag(e,r),a=vn.getULong(e,r+4),c=vn.getULong(e,r+8),h=vn.getULong(e,r+12);n=c<h&&"WOFF",i.push({tag:o,offset:a,compression:n,compressedLength:c,length:h}),r+=20}return i}(S,s=vn.getUShort(S,12))}for(var E=0;E<s;E+=1){var x=y[E],T=void 0;switch(x.tag){case"cmap":T=Nc(S,x),m.tables.cmap=mn.parse(T.data,T.offset),m.encoding=new xn(m.tables.cmap);break;case"cvt ":T=Nc(S,x),g=new vn.Parser(T.data,T.offset),m.tables.cvt=g.parseShortList(x.length/2);break;case"fvar":o=x;break;case"fpgm":T=Nc(S,x),g=new vn.Parser(T.data,T.offset),m.tables.fpgm=g.parseByteList(x.length);break;case"head":T=Nc(S,x),m.tables.head=Zn.parse(T.data,T.offset),m.unitsPerEm=m.tables.head.unitsPerEm,i=m.tables.head.indexToLocFormat;break;case"hhea":T=Nc(S,x),m.tables.hhea=Qn.parse(T.data,T.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":d=x;break;case"ltag":T=Nc(S,x),r=Kn.parse(T.data,T.offset);break;case"maxp":T=Nc(S,x),m.tables.maxp=eo.parse(T.data,T.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":f=x;break;case"OS/2":T=Nc(S,x),m.tables.os2=go.parse(T.data,T.offset);break;case"post":T=Nc(S,x),m.tables.post=mo.parse(T.data,T.offset),m.glyphNames=new Pn(m.tables.post);break;case"prep":T=Nc(S,x),g=new vn.Parser(T.data,T.offset),m.tables.prep=g.parseByteList(x.length);break;case"glyf":a=x;break;case"loca":p=x;break;case"CFF ":n=x;break;case"kern":u=x;break;case"GDEF":c=x;break;case"GPOS":h=x;break;case"GSUB":l=x;break;case"meta":v=x}}var P=Nc(S,f);if(m.tables.name=fo.parse(P.data,P.offset,r),m.names=m.tables.name,a&&p){var C=0===i,k=Nc(S,p),D=Bc.parse(k.data,k.offset,m.numGlyphs,C),O=Nc(S,a);m.glyphs=Xo.parse(O.data,O.offset,D,m,t)}else{if(!n)throw new Error("Font doesn't contain TrueType or CFF outlines.");var A=Nc(S,n);$n.parse(A.data,A.offset,m,t)}var F=Nc(S,d);if(Jn.parse(m,F.data,F.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs,t),function(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,i=Object.keys(t),r=0;r<i.length;r+=1){var s=i[r],n=t[s];void 0===e._IndexToUnicodeMap[n]?e._IndexToUnicodeMap[n]={unicodes:[parseInt(s)]}:e._IndexToUnicodeMap[n].unicodes.push(parseInt(s))}}(e):function(e){for(var t,i=e.tables.cmap.glyphIndexMap,r=Object.keys(i),s=0;s<r.length;s+=1){var n=r[s],o=i[n];(t=e.glyphs.get(o)).addUnicode(parseInt(n))}for(var a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?e.isCIDFont?t.name="gid"+a:t.name=e.cffEncoding.charset[a]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(a))}(e)}(m,t),u){var _=Nc(S,u);m.kerningPairs=Lc.parse(_.data,_.offset)}else m.kerningPairs={};if(c){var R=Nc(S,c);m.tables.gdef=Fc.parse(R.data,R.offset)}if(h){var M=Nc(S,h);m.tables.gpos=Mc.parse(M.data,M.offset),m.position.init()}if(l){var L=Nc(S,l);m.tables.gsub=wo.parse(L.data,L.offset)}if(o){var B=Nc(S,o);m.tables.fvar=Pc.parse(B.data,B.offset,m.names)}if(v){var I=Nc(S,v);m.tables.meta=Eo.parse(I.data,I.offset),m.metas=m.tables.meta}return m}function Gc(e,t,i,r,s=!0){const n=e.map((e=>{const r=t.shapes.wire.getWires({shape:e}),s=r.map((e=>t.shapes.wire.placeWireOnFace({wire:e,face:i.face}))),n=t.shapes.face.createFaceFromWires({shapes:s,planar:i.facePlanar}),o=new H.BasicShapeRepairDto;o.shape=n,o.minTolerance=1e-8,o.maxTolerance=1e-4;const a=t.shapeFix.basicShapeRepair(o),c=t.shapes.face.getFaces({shape:a});return r.forEach((e=>e.delete())),s.forEach((e=>e.delete())),n.delete(),a.delete(),c})),o=new _r;let a;if(i.faceTextVar===xt.separatedExtrusion&&0===i.height){a=t.shapes.compound.makeCompound({shapes:n.flat()});const e=n.map((e=>{const i=t.shapes.face.getFacesCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=e,o.characterParts=n.map(((e,i)=>({id:`character-${i.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}})))}else if(i.faceTextVar===xt.separatedExtrusion&&0!==i.height){const e=n.map((e=>e.map((e=>t.operations.makeThickSolidSimple({shape:e,offset:i.height}))))),s=e.map((e=>{const i=t.shapes.solid.getSolidsCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=s,a=t.shapes.compound.makeCompound({shapes:e.flat()}),o.characterParts=e.map(((e,i)=>({id:`character-${i.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}})))}else if(i.faceTextVar===xt.integratedExtrusion&&0!==i.height){const e=n.map((e=>e.map((e=>t.operations.makeThickSolidSimple({shape:e,offset:i.height}))))),c=e.map((e=>{const i=t.shapes.solid.getSolidsCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=c;const h=n.flat(),l=e.map((e=>e.map((e=>{const r=t.shapes.face.getFaces({shape:e}),s=r.filter((e=>{let t=!0;return h.some((t=>t.IsSame(e)))&&(t=!1),t}));i.height<0&&s.forEach((e=>e.Reverse()));const n=t.shapes.shell.sewFaces({shapes:s,tolerance:1e-4});return r.forEach((e=>e.delete())),n}))));if(e.forEach((e=>e.forEach((e=>e.delete())))),o.characterParts=l.map(((e,i)=>({id:`character-${i.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=t.booleans.difference({shape:i.face,shapes:h,keepEdges:!1}),r=t.shapes.face.getFaces({shape:e});e.delete(),a=t.shapes.shell.sewFaces({shapes:[...r,...l.flat()],tolerance:1e-4}),o.faceParts=r.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?Tt.cutout:Tt.cutoutInsideCharacter,shapes:{face:e}})))}else a=t.shapes.compound.makeCompound({shapes:o.characterParts.map((e=>e.shapes.compound))})}else if(i.faceTextVar===xt.integratedExtrusion&&0===i.height)if(o.characterParts=n.map(((e,i)=>({id:`character-${i.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=n.flat(),s=t.booleans.difference({shape:i.face,shapes:e,keepEdges:!1}),c=t.shapes.face.getFaces({shape:s});s.delete();const h=t.shapes.shell.sewFaces({shapes:[...c,...n.flat()],tolerance:1e-4}),l=n.map((e=>{const i=t.shapes.face.getFacesCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=l,a=h,o.faceParts=c.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?Tt.cutout:Tt.cutoutInsideCharacter,shapes:{face:e}})))}else a=t.shapes.compound.makeCompound({shapes:o.characterParts.map((e=>e.shapes.compound))});else if(i.faceTextVar===xt.cutout){if(o.characterParts=n.map(((e,i)=>({id:`character-${i.toString()}`,shapes:{compound:t.shapes.compound.makeCompound({shapes:e})}}))),s){const e=t.booleans.difference({shape:i.face,shapes:n.flat(),keepEdges:!1}),s=t.shapes.face.getFaces({shape:e}),c=n.map((e=>{const i=t.shapes.face.getFacesCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=c,a=e,o.faceParts=s.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?Tt.cutout:Tt.cutoutInsideCharacter,shapes:{face:e}})))}}else{const e=n.map((e=>t.shapes.compound.makeCompound({shapes:e}))),i=n.map((e=>{const i=t.shapes.face.getFacesCentersOfMass({shapes:e});return r.averageVector(i)}));o.characterCenterCoordinates=i,a=t.shapes.compound.makeCompound({shapes:e}),o.characterParts=e.map(((e,t)=>({id:`character-${t.toString()}`,shapes:{compound:e}})))}return{res:o,compound:a,placedFacesOfLetters:n}}function Vc(e,t){if(e){const i=[],r=dt.parse(e,i,"text-3d-face");return{compound:t,shapes:[{id:"1",shape:t},...i],data:Object.assign({compound:"1"},r)}}}function zc(e,t,i,r,s,n){const o=new _r;if(e.length>0){const n=t.booleans.difference({shape:i,shapes:e,keepEdges:!1}),a=t.shapes.face.getFaces({shape:n});n.delete();const c=t.shapes.shell.sewFaces({shapes:[...a,...r],tolerance:1e-4});o.compound=c,s.length>0&&(o.compound=t.shapes.compound.makeCompound({shapes:[...s,c]})),o.faceParts=a.map(((e,t)=>({id:`face-${t.toString()}`,type:0===t?Tt.cutout:Tt.cutoutInsideCharacter,shapes:{face:e}})))}else o.compound=t.shapes.compound.makeCompound({shapes:n.map((e=>e.compound))});return o}class jc{constructor(e,t,i,r){this.fonts=[],this.occtService=e,this.dependencies=t,this.occ=i,this.vectorHelper=r}loadFonts(e){return t=this,i=void 0,s=function*(){return new Promise(((t,i)=>{try{void 0!==e&&Array.isArray(e)&&0===e.length&&t({});const i=e?Pr.filter((t=>e.includes(t.key))):Pr,r=i.reduce(((e,t)=>e+t.variants.length),0);let s=0;i.forEach((e=>{e.variants.forEach((i=>{const n=e.key,o=`${n}-${i}`;!function(e,t,i){i=null==i?{}:i;var r="undefined"!=typeof window||i.isUrl?Uc:Ic;new Promise((function(s,n){r(e,(function(e,r){if(e){if(t)return t(e);n(e)}var o;try{o=Hc(r,i)}catch(e){if(t)return t(e,null);n(e)}if(t)return t(null,o);s(o)}))}))}(`https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@latest/fonts/${n}/${o}.ttf`,((e,a)=>{e||(this.fonts.push({name:o,type:n,variant:i,font:a}),s++,s===r&&t({}))}),{isUrl:!0})}))}))}catch(e){i(e)}}))},new((r=void 0)||(r=Promise))((function(e,n){function o(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(o,a)}c((s=s.apply(t,i||[])).next())}));var t,i,r,s}text3dUrl(e){return os(e,this.occtService,this.occ)}text3d(e){return as(e,this.occtService,this.fonts,this.occ)}text3dFace(e){return function(e,t,i,r,s){const n=new H.DataOnUVDto;n.shape=e.face,n.paramU=e.originParamU,n.paramV=e.originParamV;const o=t.shapes.face.uvOnFace(n),a=[o[1],0,o[0]],c=new Cr;c.direction=[0,1,0],c.fontSize=e.fontSize,c.fontType=e.fontType,c.fontVariant=e.fontVariant,c.height=0,c.origin=a,c.originAlignment=e.originAlignment,c.rotation=e.rotation,c.text=e.text;const h=as(c,t,i,r);h.data.name="text3dFace";const l=h.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),{res:d,compound:u}=Gc(l,t,e,s);return Vc(d,u)}(e,this.occtService,this.fonts,this.occ,this.vectorHelper)}text3dFaceUrl(e){return function(e,t,i,r){const s=new H.DataOnUVDto;s.shape=e.face,s.paramU=e.originParamU,s.paramV=e.originParamV;const n=t.shapes.face.uvOnFace(s),o=[n[1],0,n[0]],a=new Dr;a.direction=[0,1,0],a.fontSize=e.fontSize,a.letterPaths=e.letterPaths,a.height=0,a.origin=o,a.originAlignment=e.originAlignment,a.rotation=e.rotation,a.text=e.text;const c=os(a,t,i);c.data.name="text3dFace";const h=c.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),{res:l,compound:d}=Gc(h,t,e,r);return Vc(l,d)}(e,this.occtService,this.occ,this.vectorHelper)}texts3dFace(e){return function(e,t,i,r,s){const n=[],o=[],a=[],c=e.definitions.map((c=>{const h=new H.DataOnUVDto;h.shape=e.face,h.paramU=c.originParamU,h.paramV=c.originParamV;const l=t.shapes.face.uvOnFace(h),d=[l[1],0,l[0]],u=new Cr;return u.direction=[0,1,0],u.fontSize=c.fontSize,u.fontType=c.fontType,u.fontVariant=c.fontVariant,u.height=0,u.origin=d,u.originAlignment=c.originAlignment,u.rotation=c.rotation,u.text=c.text,function(e,t,i,r,s,n,o,a,c){e.data.name="text3dFace";const h=Gc(e.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),t,Object.assign({face:i,facePlanar:r},s),n,!1);return s.faceTextVar!==xt.cutout&&s.faceTextVar!==xt.integratedExtrusion||o.push(...h.placedFacesOfLetters.flat()),s.faceTextVar===xt.integratedExtrusion?h.res.characterParts.forEach((e=>a.push(e.shapes.compound))):s.faceTextVar===xt.separatedExtrusion&&c.push(h.compound),h}(as(u,t,i,r),t,e.face,e.facePlanar,c,s,n,o,a)})),h=zc(n,t,e.face,o,a,c);h.originalInputs=e;const l=c.map((e=>e.res.characterParts)).flat();return l.forEach(((e,t)=>e.id=`texts-character-${t}-${e.id}`)),h.characterParts=l,Vc(h,h.compound)}(e,this.occtService,this.fonts,this.occ,this.vectorHelper)}texts3dFaceUrl(e){return function(e,t,i,r){const s=[],n=[],o=[],a=e.definitions.map((a=>{const c=new H.DataOnUVDto;c.shape=e.face,c.paramU=a.originParamU,c.paramV=a.originParamV;const h=t.shapes.face.uvOnFace(c),l=[h[1],0,h[0]],d=new Dr;return d.direction=[0,1,0],d.fontSize=a.fontSize,d.letterPaths=a.letterPaths,d.height=0,d.origin=l,d.originAlignment=a.originAlignment,d.rotation=a.rotation,d.text=a.text,function(e,t,i,r,s,n,o,a){e.data.name="text3dFace";const c=Gc(e.shapes.filter((e=>"1"!==e.id)).map((e=>e.shape)),t,Object.assign({face:i.face,facePlanar:i.facePlanar},r),s,!1);return r.faceTextVar!==xt.cutout&&r.faceTextVar!==xt.integratedExtrusion||n.push(...c.placedFacesOfLetters.flat()),r.faceTextVar===xt.integratedExtrusion?c.res.characterParts.forEach((e=>o.push(e.shapes.compound))):r.faceTextVar===xt.separatedExtrusion&&a.push(c.compound),c}(os(d,t,i),t,e,a,r,s,n,o)})),c=zc(s,t,e.face,n,o,a),h=a.map((e=>e.res.characterParts)).flat();return h.forEach(((e,t)=>e.id=`texts-character-${t}-${e.id}`)),c.characterParts=h,Vc(c,c.compound)}(e,this.occtService,this.occ,this.vectorHelper)}pyramidSimple(t){return function(t,i,r,s,n){if(function(e){let t;if(["uNumber","vNumber","height","precision"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!n.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple algorithm you must be subscribed to our silver or gold plan.");try{const o=`\n            ${n.patternsFacePatternPyramidSimple}\n        `,a=new Function(o),c={name:"pyramidSimple"};return a.apply({inputs:t,occt:i,occ:r,vectorHelper:s,Inputs:e,Advanced:re,ShapeParser:dt,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}pyramidSimpleAffectors(t){return function(t,i,r,s,n){if(function(e){let t;if(["uNumber","vNumber","defaultHeight","affectMinHeight","affectMaxHeight","precision"].forEach((i=>{isNaN(e[i])&&(t=`"${i}" must be a number.`)})),e.uNumber<=0?t="U number mus be greater than 0.":e.vNumber<=0?t="V number must be greater than 0.":e.precision<=0&&(t="Precision must be greater than 0."),t)throw new Error(t)}(t),!n.patternsFacePatternPyramidSimple)throw new Error("Could not compute, to use Pyramid Simple Affectors algorithm you must be subscribed to our silver or gold plan.");try{const o=`\n            ${n.patternsFacePatternPyramidSimple}\n        `,a=new Function(o),c={name:"pyramidSimpleAffectors"};return a.apply({inputs:t,occt:i,occ:r,vectorHelper:s,Inputs:e,Advanced:re,ShapeParser:dt,method:c})}catch(e){throw new Error(e)}}(t,this.occtService,this.occ,this.vectorHelper,this.dependencies)}}class qc{constructor(e){this.dependencies={serenitySwirl:void 0};const t=new ne,i=new se,r=new Yc;this.occtService=new lt(e,new it(t,i,e)),this.advanced=new jc(this.occtService,this.dependencies,e,t),this.things=new ns(this.occtService,this.advanced,this.dependencies,r)}}class Yc{constructor(){this.geometryHelper=new Ye,this.math=new He,this.vector=new je(this.math,this.geometryHelper),this.logic=new Ne,this.lists=new We}}var Xc=function(){return Xc=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Xc.apply(this,arguments)},$c=function(e,t,i,r){return new(i||(i=Promise))((function(s,n){function o(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},Zc=function(e,t){var i,r,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(o=0)),o;)try{if(i=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};addEventListener("message",(function(e){var t,i,r,s,n,o,a,c,h,l,d,u=e.data;"initialise"===u.type?(t={},i=t.mainJS,r=void 0===i?ft:i,s=t.mainWasm,n=void 0===s?"https://cdn.jsdelivr.net/gh/bitbybit-dev/bitbybit-assets@0.20.10/wasm/bitbybit-dev-occt.f151efeb.wasm":s,o=t.worker,a=void 0===o?void 0:o,c=t.libs,h=void 0===c?[]:c,l=t.module,d=void 0===l?{}:l,new Promise((function(e,t){new r(Xc({locateFile:function(e){return e.endsWith(".wasm")?n:e.endsWith(".worker.js")&&a?a:e}},d)).then((function(t){return $c(void 0,void 0,void 0,(function(){var i,r,s;return Zc(this,(function(n){switch(n.label){case 0:i=0,r=h,n.label=1;case 1:return i<r.length?(s=r[i],[4,t.loadDynamicLibrary(s,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!1})]):[3,4];case 2:n.sent(),n.label=3;case 3:return i++,[3,1];case 4:return e(t),[2]}}))}))}))}))).then((function(e){return $c(void 0,void 0,void 0,(function(){var t,i;return Zc(this,(function(r){switch(r.label){case 0:t=new qc(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.advanced.loadFonts(u.loadFonts)];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),console.error(i),[3,4];case 4:return((e,t,i)=>{mt=new vt(e);const r=new ne,s=new se;gt=new lt(e,new it(r,s,e)),t&&(gt.plugins=t,St&&Object.keys(St).forEach((e=>{gt.plugins.dependencies[e]=St[e]}))),postMessage("occ-initialised")})(e,t),postMessage("occ-initialised"),[2]}}))}))})):((e,t)=>{let i;t("busy");try{if("shapeToMesh"!==e.action.functionName&&"shapesToMeshes"!==e.action.functionName&&"deleteShape"!==e.action.functionName&&"deleteShapes"!==e.action.functionName&&"startedTheRun"!==e.action.functionName&&"cleanAllCache"!==e.action.functionName&&"addOc"!==e.action.functionName&&"saveShapeSTEP"!==e.action.functionName){Object.keys(e.action.inputs).forEach((t=>{const i=e.action.inputs[t];if(i&&i.type&&"occ-shape"===i.type&&i.hash){const i=mt.checkCache(e.action.inputs[t].hash);if(!i)throw new Error(`Shape with hash ${e.action.inputs[t].hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);e.action.inputs[t]=i}i&&Array.isArray(i)&&i.length>0&&(i[0].type&&"occ-shape"===i[0].type&&i[0].hash?e.action.inputs[t]=e.action.inputs[t].map((e=>{const t=mt.checkCache(e.hash);if(!t)throw new Error(`Shape with hash ${e.hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);return t})):Array.isArray(i[0])&&i[0][0].type&&"occ-shape"===i[0][0].type&&i[0][0].hash&&(e.action.inputs[t]=e.action.inputs[t].map((e=>e.map((e=>{const t=mt.checkCache(e.hash);if(!t)throw new Error(`Shape with hash ${e.hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);return t}))))))}));const t=e.action.functionName.split(".");let r;if(r=3===t.length?mt.cacheOp(e.action,(()=>gt[t[0]][t[1]][t[2]](e.action.inputs))):2===t.length?mt.cacheOp(e.action,(()=>gt[t[0]][t[1]](e.action.inputs))):mt.cacheOp(e.action,(()=>gt[e.action.functionName](e.action.inputs))),mt.isOCCTObject(r))i=Array.isArray(r)?r.map((e=>({hash:e.hash,type:"occ-shape"}))):{hash:r.hash,type:"occ-shape"};else if(r.compound&&r.data&&r.shapes&&r.shapes.length>0){const e=r;e.shapes=e.shapes.map((e=>({id:e.id,shape:{hash:e.shape.hash,type:"occ-shape"}}))),e.compound={hash:e.compound.hash,type:"occ-shape"},i=e}else i=r}if("saveShapeSTEP"===e.action.functionName){const t=mt.checkCache(e.action.inputs.shape.hash);if(!t)throw new Error(`Shape with hash ${e.action.inputs.shape.hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);e.action.inputs.shape=t,i=gt.io.saveShapeSTEP(e.action.inputs)}if("addOc"===e.action.functionName&&(gt&&gt.plugins?Object.keys(e.action.inputs).forEach((t=>{gt.plugins.dependencies[t]=e.action.inputs[t]})):St=e.action.inputs),"shapeToMesh"===e.action.functionName){const t=mt.checkCache(e.action.inputs.shape.hash);if(!t)throw new Error(`Shape with hash ${e.action.inputs.shape.hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);e.action.inputs.shape=t,i=gt.shapeToMesh(e.action.inputs)}if("shapesToMeshes"===e.action.functionName){if(!(e.action.inputs.shapes&&e.action.inputs.shapes.length>0))throw new Error("No shapes detected");e.action.inputs.shapes=e.action.inputs.shapes.map((e=>{const t=mt.checkCache(e.hash);if(!t)throw new Error(`Shape with hash ${e.hash} not found in cache. The cache may have been cleaned. Please regenerate the shape.`);return t})),i=gt.shapesToMeshes(e.action.inputs)}"deleteShape"===e.action.functionName&&(mt.cleanCacheForHash(e.action.inputs.shape.hash),i={}),"deleteShapes"===e.action.functionName&&(e.action.inputs.shapes.forEach((e=>mt.cleanCacheForHash(e.hash))),i={}),"startedTheRun"===e.action.functionName&&(mt&&Object.keys(mt.usedHashes).length>1e4&&mt.cleanAllCache(),i={}),"cleanAllCache"===e.action.functionName&&(mt.cleanAllCache(),i={}),t({uid:e.uid,result:i})}catch(i){let r,s;e&&e.action&&e.action.inputs&&(r=`Input values were: {${Object.keys(e.action.inputs).map((t=>`${t}: ${JSON.stringify(e.action.inputs[t])}`)).join(",")}}. `),e&&e.action&&e.action.functionName&&(s=`- ${e.action.functionName}`),t({uid:e.uid,result:void 0,error:`OCCT computation failed. ${i} While executing function ${s}. ${r}`})}})(u,postMessage)}))})()})();